
<html><head><title>Improving Yield for a Design</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="urajput" />
<meta name="CreateDate" content="2020-09-20" />
<meta name="CreateTime" content="1600586711" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the advanced simulation run modes provided by Virtuoso Variation Option." />
<meta name="DocTitle" content="Virtuoso Variation Option User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Improving Yield for a Design" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="vvoUG" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-09-20" />
<meta name="ModifiedTime" content="1600586711" />
<meta name="NextFile" content="appEnvVars.html" />
<meta name="Order" content="2" />
<meta name="Group" content="ADE Assembler" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="vvoMCPostProc.html" />
<meta name="c_product" content="Virtuoso Analog Design Environment" />
<meta name="Product" content="Virtuoso Analog Design Environment" />
<meta name="ProductFamily" content="Virtuoso Analog Design Environment" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Variation Option User Guide -- Improving Yield for a Design" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="vvoUGICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="vvoUGTOC.html">Contents</a></li><li><a class="prev" href="vvoMCPostProc.html" title="Virtuoso Variation Option Advanced Features">Virtuoso Variation Option Adva ...</a></li><li style="float: right;"><a class="viewPrint" href="vvoUG.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="appEnvVars.html" title="Environment Variables">Environment Variables</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Variation Option User Guide<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>3
<a id="pgfId-1032955"></a></h1>
<h1>
<a id="pgfId-1035250"></a><hr />
<a id="45385"></a>Improving Yield for a Design<hr />
</h1>

<p>
<a id="pgfId-1105786"></a>Virtuoso Variation Option provides the <em>Improve Yield</em> run mode that you can use to return a design point that meets all corners and has the highest possible yield.</p>
<p>
<a id="pgfId-1105876"></a>This chapter describes this run mode in detail.</p>

<h2>
<a id="pgfId-1105790"></a>The <a id="marker-1105787"></a><a id="17482"></a>Improve Yield Run Mode<a id="runImproveYield"></a></h2>

<p>
<a id="pgfId-1104644"></a>The Improve Yield run mode runs iterations of sizing and Monte Carlo analysis to arrive at a solution. When you start Improve Yield, Virtuoso Variation Option first generates the statistical corners, then, as the run progresses, evaluates points on a subset of those corners. Promising points are then evaluated on a larger set of corners. Eventually the tool arrives at the best point&#8212;one that has been evaluated at all statistical corners and has the highest possible yield.</p>
<p>
<a id="pgfId-1104645"></a>Also available are a number of stopping criteria, including time and points limits. Once the tool hits any of the specified options, it will end the improvement process.</p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1104646"></a>
<em>Improve Yield</em>, like <em>Monte Carlo Sampling</em>, is available only for the Spectre circuit simulator.</div>

<p>
<a id="pgfId-1104647"></a>Your design must include devices or device models for which you have specified statistically varying parameter values. You must have one or more specs defined and enabled. You must specify either global (process) or mismatch (per-instance) variations or both. You can also specify correlation information. After simulating, you can <h-hot><a actuate="user" class="URL" href="../assembler/asmViewingResults.html#YieldView" show="replace" xml:link="simple">select the yield view</a></h-hot> to view mean and standard deviation information. For more information, see <h-hot><a actuate="user" class="URL" href="../assembler/asmMC.html#firstpage" show="replace" xml:link="simple">Performing Monte Carlo Analysis</a></h-hot> in the Virtuoso ADE Assembler User Guide.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1104650"></a>For information about specifying parameter distributions for Spectre circuit simulation, see Specifying Parameter Distributions Using Statistics Blocks in the Analyses chapter of the <em><a actuate="user" class="URL" href="../spectreuser/spectreuserTOC.html#firstpage" show="replace" xml:link="simple">Spectre Circuit Simulator and Accelerated Parallel SimulatorUser Guide</a></em>.</div>
<p>
<a id="pgfId-1104651"></a>To improve the yield:</p>
<ol><li>
<a id="pgfId-1104652"></a>From the <em>Select a Run Mode</em> drop-down list on the Run toolbar, choose <em>Improve Yield</em>.</li><li>
<a id="pgfId-1104656"></a>Click <img src="images/optionsIcon.gif" /><span> to specify improve yield options.</span><br />
<a id="pgfId-1104657"></a>The Improve Yield options form appears.<br />
<a id="pgfId-1104661"></a><div class="webflare-div-image">
<img width="386" height="480" src="images/vvoHYE-4.gif" /></div></li><li>
<a id="pgfId-1104662"></a>On the <em>Optimization</em> tab, select the optimization algorithm from the <em>Algorithm</em> drop-down list.</li><li>
<a id="pgfId-1104663"></a>In the <em>Starting Point</em> panel, select one of the following options to specify a starting point for the simulation run: <ul><li>
<a id="pgfId-1104666"></a><em>Use Starting State</em>&#8212;Select this option if you have created a setup state and want to use that as the starting point for the run. To use the setup state as the starting point for the optimization, select a setup state that defines a set of fixed values for every global variable or parameter that defines a range of values in the active setup.<br />
<a id="pgfId-1104668"></a>You must have a setup state available to use this option.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1105524"></a>If the setup of your cellview earlier used a reference point as a startng point, the details of the starting point have been saved in a setup state named <code>ref_point_migrated</code>. Name of this state is automatically selected in the <em>Starting State</em> drop-down list on the run options form.</div></li><li>
<a id="pgfId-1104669"></a><em>No (Runs Initial Global Optimization)</em>&#8212;Select this option if you do not have a reference point, or do not want to use the reference point as the starting point for sizing. When this option is selected, the tool performs an initial global optimization on the nominal corner and uses its best point as the starting point for the run. If you select <em>No (Runs Initial Global Optimization)</em>, ensure that:<ul><li>
<a id="pgfId-1104670"></a>The nominal corner is not disabled in the Run Summary pane.</li><li>
<a id="pgfId-1104672"></a>For tests that are enabled in the Data View pane, the nominal corner is not disabled in the Corners Setup form.</li></ul></li></ul><br />
<a id="pgfId-1104675"></a>You can also set these run mode options using SKILL and can view the data.sdb file inside the maestro view to find the names of the run options. The options are set when you open the maestro view. For exmaple, by default the Algorithm is set to Global Optimization and if you want to change the algorithm to BFGS, you can follow the below steps:<ol><li>
<a id="pgfId-1104676"></a>Open the <code>maestro</code> view. The default value for <em>Algorithm</em> is displayed in the SKILL file. </li><li>
<a id="pgfId-1104677"></a>In the SKILL file, change the algorithm to BFGS.</li><li>
<a id="pgfId-1104678"></a>Save the maestro cellview.</li><li>
<a id="pgfId-1104679"></a>Open the maestro view again. The BFGS algorithm is set.</li></ol><br />
<a id="pgfId-1104680"></a>You can either set the default run options one time (at the time of ADE Assembler launch) or force the run options to not allow you to change them during the session. Now we connect to two triggers.<br />
<a id="pgfId-1104681"></a>postInstall to set the default options when the maestro view is opened.<br />
<a id="pgfId-1104682"></a>runOptionsUpdated to reset the run options in case<br />
<a id="pgfId-1104683"></a>you want to force some options and make the user unable to change them. <pre class="webflare-pre-block webflare-courier-new" id="#id1104684">
<a id="pgfId-1104684"></a>(axlSessionConnect session_name &quot;postInstall&quot;</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1104685">
<a id="pgfId-1104685"></a>&#39;CCRaxlLaunchADEXL_setDefaultIYrunOptions)</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1104686">
<a id="pgfId-1104686"></a>(axlSessionConnect session_name &quot;runOptionsUpdated&quot;</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1104687">
<a id="pgfId-1104687"></a>&#39;CCRaxlRunOptionsUpdated_forceIYrunOptions)</pre>
<a id="pgfId-1104688"></a>The Improve Yield algorithm default is set once on ADE Assembler launch. You can change the algorithm during the session. It will be reset to the default the next time the maestro view is opened. If you uncomment the axlSessionConnect line for the runOptionsUpdated, the new file will have the same behavior as before by setting the default options only at the time of ADE Assembler launch.</li><li>
<a id="pgfId-1104696"></a>Select an evaluation type by selecting one of the following radio buttons under <em>Evaluation</em>:<ul><li>
<a id="pgfId-1104697"></a>Full</li><li>
<a id="pgfId-1104698"></a>Conditional</li></ul><br />
<a id="pgfId-1104701"></a>For more information on conditional evaluation, see <a actuate="user" class="URL" href="../assembler/asmOptimize.html#conditionalEval" show="replace" xml:link="simple">Understanding Conditional Evaluation</a>.</li><li>
<a id="pgfId-1104703"></a>Select the <em>Recommended</em> check box under <em>Stopping Criteria</em> to use the recommended options. The recommended options are:<ul><li>
<a id="pgfId-1104704"></a>Three sizing/Monte Carlo iterations</li><li>
<a id="pgfId-1104705"></a>3000 points run per iteration</li></ul><br />
<a id="pgfId-1104706"></a>If you want to modify these defaults, select the <em>Custom</em> check box, then one or more of the following stopping criteria:<ol><li>
<a id="pgfId-1104707"></a>To set a time limit for the run, select the <em>Time Limit (minutes) </em>check box and enter a value in hours.</li><li>
<a id="pgfId-1104708"></a>To specify the number of sizing/Monte Carlo iterations, select the <em>No. of Iterations</em> check box and enter the number in the field.</li><li>
<a id="pgfId-1104709"></a>If you want to specify the maximum number of points processed per iteration, select the <em>Max Points per Iteration</em> check box and enter the number of points in the field.</li><li>
<a id="pgfId-1104710"></a>If you want to stop the process early if the sizing results in no improvement, select the <em>Stop Iteration Early if No Improvement</em> check box. This option is applied to each optimization iteration. This stopping criteria is similar to the <em>No Improvement with Points</em> stopping criteria for the global or local optimization run modes for which the user also specifies the number of points. In the case of iterative run modes, the number of points is calculated as <code>Max Points per Iteration / 3</code>.</li></ol></li><li>
<a id="pgfId-1104711"></a>Select the Monte Carlo tab to specify options for Monte Carlo.<br />
<a id="pgfId-1104715"></a><div class="webflare-div-image">
<img width="390" height="476" src="images/vvoHYE-5.gif" /></div></li><li>
<a id="pgfId-1104716"></a>When you run Improve Yield, you have a choice of varying the process statistical variables, mismatch statistical variables, or both. If you run only one type of statistical variable, the other variables are set to fixed values.<br />
<a id="pgfId-1104718"></a>In the <em>Method</em> group box, select one of the following statistical variations:<a id="marker-1104717"></a><br />
<a id="pgfId-1104735"></a><table class="webflareTable" id="#id1104719">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1104722"></a><em>Process</em><a id="marker-1104721"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1104724"></a>for process statistical variations</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1104727"></a><em>Mismatch</em><a id="marker-1104726"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1104729"></a>for per-instance statistical variations</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1104732"></a><em>All</em><a id="marker-1104731"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1104734"></a>for both process and per-instance statistical variations</p>
</td>
</tr>
</tbody></table><div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1104736"></a>
You must define your models so that they respond to the statistical variations you choose. You must specify the file containing your models on the <a actuate="user" class="URL" href="../assembler/asmTests.html#formModelLibrarySetup" show="replace" xml:link="simple">Model Library Setup form</a>. For a Spectre circuit simulator example of how to define your models, see &#8220;Specifying Parameter Distributions Using Statistics Blocks&#8221; in the <em>Virtuoso Spectre Circuit Simulator User Guide</em>.</div></li><li>
<a id="pgfId-1104738"></a>In the <em>Number of Points</em> field, type the number of Monte Carlo points you want to simulate.</li><li>
<a id="pgfId-1104739"></a>In the <em>Sampling Method</em> group box, select the statistical sampling method to be used&#8212;<em>Random</em>, <em>Latin Hypercube</em>, or <em>Low-Descrepancy Sequence</em>. </li><li>
<a id="pgfId-1104740"></a>If the selected sampling method is <em>Latin Hypercube</em>, specify the number of bins (subdivisions) for the <em>Latin Hypercube</em> method in the <em>Number of Bins</em> field.<br />
<a id="pgfId-1104741"></a>Note the following:<ul><li>
<a id="pgfId-1104742"></a>If a number is specified, the number of bins will be the specified number, or <em>Number of Points</em> + <em>Starting Run Number</em> - <code>1</code>, whichever is greater. For example, if the specified number of bins is <code>90</code>, the number of points specified in the <em>Number of Points</em> field is <code>100</code> and the starting run number specified in the <em>Starting Run Number</em> field is <code>6</code>, the value <code>105</code> (100+6-1) is used.</li><li>
<a id="pgfId-1104743"></a>If no number is specified, a default value of <em>Number of Points</em> + <em>Starting Run Number </em>- <code>1</code> is used. For example, if the number of points specified in the <em>Number of Points</em> field is <code>100</code> and the starting run number specified in the <em>Starting Run Number</em> field is <code>6</code>, the default value of <code>105</code> (100+6-1) is used.</li></ul></li><li>
<a id="pgfId-1104746"></a>(Optional) If you want to specify a different seed for the Monte Carlo analysis, select the<em> Monte Carlo Seed</em> check box and enter the seed number. <br />
<a id="pgfId-1104747"></a>By always specifying the same seed, you can reproduce a previous experiment. If you do not specify a seed, the value <code>12345</code> is used.</li><li>
<a id="pgfId-1104748"></a>(Optional) If you want to specify a starting run number, select the <em>Starting Run Number</em> check box and enter the starting run number.<br />
<a id="pgfId-1104749"></a>The starting run number specifies the run that Monte Carlo begins with. By specifying this number, you can reproduce a particular run or sequence of runs from a previous experiment (for example, to examine an earlier case in more detail).<br /><div class="webflare-information-macro webflare-macro-tip">
<a id="pgfId-1104750"></a>
To reproduce a run or sequence of runs, you need to specify the same value in the Starting Run # and the Monte Carlo Seed fields.</div></li><li>
<a id="pgfId-1104751"></a>By default, mismatch variations are applied to all subcircuit instances in the design. Click the <em>Specify Instances/Devices</em> button to specify the sensitive instances and devices you want to either include or exclude for applying mismatch variations. For more information, see the <a actuate="user" class="URL" href="../Explorer/chap8.html#selectInstForMismatch" show="replace" xml:link="simple">Including or Excluding Instances and Devices for Applying Mismatch Variations</a> section in the <em><a actuate="user" class="URL" href="../assembler/assemblerTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso ADE Assembler User Guide</a></em>.</li><li>
<a id="pgfId-1104932"></a>Click <em>Specify Tests for Monte Carlo</em> and select the check box next to the test name for which you want to run Monte Carlo.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1104754"></a>The N-Sigma tab is not available on the Improve Yield options form now. You can run High Yield Estimation and create statistical corners to optimize your design and to achieve a yield of less than the desired sigma value for the selected specifications. For more details, refer to <a actuate="user" class="URL" href="../vvoUG/vvoMCPostProc.html#WCD_statsCorner" show="replace" xml:link="simple">Creating Statistical Corners From a Worst Case Distance Analysis</a>.</div></li><li>
<a id="pgfId-1104758"></a>In the Run workspace, click the <em>Run simulation</em> icon to improve the yield. <br />
<a id="pgfId-1104759"></a>The tool begins synthesizing with Monte Carlo analysis.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1106446"></a>There is no change in the simulation results if the <em>Run Nominal Simulation</em> check box is selected. You can ignore this setting on the Monte Carlo tab of the Improve Yield form.</div></li></ol>










































































<p>
<a id="pgfId-1104761"></a><a id="improveYieldResults"></a>When the Improve Yield run is finished, the Data View lists the Improve Yield check point. Expanding this check point displays the different runs that make up a full Improve Yield run, including iterations of Optimization and Monte Carlo. You can view the results of any of these runs by right-clicking and choosing <em>View Results</em>.</p>
<p>
<a id="pgfId-1104782"></a>Several factors are considered in generating statistical corners, which includes overall yield estimate, individual yield of each specification, and sigma to target value of each specification. Statistical corners are created for specs that have low yield as well as for specs that have yield estimate=100%, but low sigma to target value. When the overall yield is high, statistical corners are created at the worst sample. When the yield is low, the Improve Yield method is less effective in creating statistical corners.</p>
<p>
<a id="pgfId-1098524"></a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="vvoMCPostProc.html" id="prev" title="Virtuoso Variation Option Advanced Features">Virtuoso Variation Option Adva ...</a></em></b><b><em><a href="appEnvVars.html" id="nex" title="Environment Variables">Environment Variables</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>