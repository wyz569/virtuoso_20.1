
<html><head><title>Working With Function Templates </title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="urajput" />
<meta name="CreateDate" content="2020-09-20" />
<meta name="CreateTime" content="1600587997" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the Virtuoso Visualization and Analysis XL Tool." />
<meta name="DocTitle" content="Virtuoso Visualization and Analysis XL User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Working With Function Templates" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="vivaxlug" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-09-20" />
<meta name="ModifiedTime" content="1600587997" />
<meta name="NextFile" content="vivaxlugIX.html" />
<meta name="Order" content="0" />
<meta name="Group" content="Virtuoso Visualization and Analysis XL" />
<meta name="Platform" content="Custom IC Design,Custom IC Design" />
<meta name="PrevFile" content="appG.html" />
<meta name="c_product" content="Spectre,Virtuoso Analog Design Environment" />
<meta name="Product" content="Spectre,Virtuoso Analog Design Environment" />
<meta name="ProductFamily" content="Spectre,Virtuoso Analog Design Environment" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Visualization and Analysis XL User Guide -- Working With Function Templates" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="vivaxlugICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="vivaxlugTOC.html">Contents</a></li><li><a class="prev" href="appG.html" title="Defining New SKILL Functions">Defining New SKILL Functions</a></li><li style="float: right;"><a class="viewPrint" href="vivaxlug.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="vivaxlugIX.html" title="Index">Index</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Visualization and Analysis XL User Guide<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>F
<a id="pgfId-1060881"></a></h1>
<h1>
<a id="pgfId-1060882"></a><hr />
Working With Function Templates <hr />
</h1>

<p>
<a id="pgfId-1060884"></a><a id="functionstemplates"></a>This chapter describes the function templates and how you can use them to create new functions in Virtuoso Visualization and Analysis XL Calculator with supporting examples.</p>
<ul><li>
<a id="pgfId-1057497"></a><a href="appH.html#OLE_LINK1">Function Templates</a><ul><li>
<a id="pgfId-1059326"></a><a href="appH.html#76942">Function Template Search Paths</a></li><li>
<a id="pgfId-1059339"></a><a href="appH.html#99690">Template Catalog Summary File</a></li></ul></li><li>
<a id="pgfId-1059292"></a><a href="appH.html#35675">Creating a template file</a></li><li>
<a id="pgfId-1057499"></a><a href="appH.html#85502">Working with Template File</a></li><li>
<a id="pgfId-1059307"></a><a href="appH.html#17665">Examples</a><ul><li>
<a id="pgfId-1059358"></a><a href="appH.html#97649">Example 1: Sample template with single argument: average.ocn</a></li><li>
<a id="pgfId-1059372"></a><a href="appH.html#69323">Example 2: Sample template with multiple arguments: delay.ocn</a></li><li>
<a id="pgfId-1059383"></a><a href="appH.html#17306">Example 3: Signature described by a format statement: compression.ocn</a></li><li>
<a id="pgfId-1059394"></a><a href="appH.html#19498">Example 4: Creating your own template</a></li></ul></li><li>
<a id="pgfId-1059278"></a><a href="appH.html#62284">Advanced Features to provide GUI Hints</a></li></ul>











<h2>
<a id="pgfId-1057507"></a><a id="OLE_LINK1"></a>Function Templates</h2>

<p>
<a id="pgfId-1057509"></a>Function templates are a mechanism to facilitate easier construction and addition of new functions in the Calculator. They are described in a prescribed format in function template file.</p>
<p>
<a id="pgfId-1057510"></a>Virtuoso Visualization and Analysis XL uses these template files to perform the following tasks:</p>
<ul><li>
<a id="pgfId-1057511"></a>Builds lists of function names, separated into categories and displays it in the GUI panel.</li><li>
<a id="pgfId-1057512"></a>Generates an expression using rules present in the template file.</li></ul>


<h3>
<a id="pgfId-1060457"></a><a id="76942"></a>Function Template Search Paths</h3>

<p>
<a id="pgfId-1060459"></a>Virtuoso Visualization and Analysis XL searches for function templates using <h-hot><a actuate="user" class="URL" href="../caiuser/chap3.html#firstpage" show="replace" xml:link="simple">csfsearchpath</a></h-hot>. The priority of searching a UDF GUI template will be:</p>
<ol><li>
<a id="pgfId-1060392"></a><code>&lt;CSF_SEARCH_PATHS&gt;/measures</code></li><li>
<a id="pgfId-1060432"></a><code>&lt;CDS_INST_DIR&gt;/tools/dfII/etc/tools/viva/functionTemplates</code></li></ol>

<p>
<a id="pgfId-1061102"></a>Virtuoso Visualization and Analysis XL function templates, shipped by Cadence, are stored at the following location:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1061103"></a><code>&lt;CDS_INST_DIR&gt;</code>/tools/dfII/etc/tools/viva/functionTemplates</pre>
<h3>
<a id="pgfId-1061105"></a><a id="99690"></a>Template Catalog Summary File</h3>

<p>
<a id="pgfId-1058156"></a>The template catalog summary file <code>.skeMeaseruesCatalog</code> lists the categories and the templates that exists in each category. Virtuoso Visualization and Analysis XL template catalog file is shipped in the following directory. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1058157"></a>&lt;CDS_ROOT&gt;/tools/dfII/etc/tools/viva/functionTemplates/.skeMeasuresCatalog</pre>

<p>
<a id="pgfId-1057534"></a>Different categories are specified in-between the lines <code>skeBeginCategory</code> and <code>skeEndCategory</code>. The below example defines Math, Modifier, RF Functions, Special Function, and Trigonometric as the categories.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1058177"></a></pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1058188"></a>skeBeginCategory</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057536"></a>Math</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057537"></a>Modifier</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057538"></a>RF Functions</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057539"></a>Special Functions</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057540"></a>Trigonometric</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057541"></a>skeEndCategory</pre>
<p>
<a id="pgfId-1059708"></a>You can specify different functions within a category in between the lines:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1058229"></a><code>skeBeginMeasures &lt;Category Name&gt; &amp; skeEndCategory</code>. </pre>
<p>
<a id="pgfId-1058210"></a>For example, function &#8220;Fourier Evaluation&#8221; of category &#8220;Special Functions can be defined as follows:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057544"></a>skeBeginMeasures.Special Functions</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057545"></a>fourEval;&quot;Fourier Evaluation&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1058246"></a>skeEndMeasures</pre>

<h2>
<a id="pgfId-1057548"></a><a id="35675"></a>Creating a template file</h2>

<p>
<a id="pgfId-1057550"></a>To add a new function, write a template file for your function and override <code>.skeMeasuresCatalog</code> file. </p>
<p>
<a id="pgfId-1060647"></a>To create a template file, perform the following steps:</p>
<ol><li>
<a id="pgfId-1060648"></a>Choose one of the two directories listed below where you want to store the new functions:<ul><li>
<a id="pgfId-1060662"></a><code>&lt;CSF_SEARCH_PATHS&gt;/measures</code></li><li>
<a id="pgfId-1060649"></a><code>&lt;CDS_INST_DIR&gt;/tools/dfII/local/tools/wavescan/measures</code></li></ul></li><li>
<a id="pgfId-1058329"></a>After creating a directory named &#8220;<code>measures</code>&#8221; which is accessible to the complete project team, copy <code>&lt;CDS_ROOT&gt;/tools/dfII/etc/tools/wavescan/measures/.skeMeasuresCatalog</code> to<code> </code>CSF_SEARCH_PATHS<code>/measures/.skeMeasuresCatalog</code>.</li><li>
<a id="pgfId-1057561"></a>Open CSF_SEARCH_PATHS<code>/measures/.skeMeasuresCatalog</code> for editing.</li><li>
<a id="pgfId-1057563"></a>Add an entry of the new function in between <code>skeBeginMeasures &amp; skeEndMeasures </code>tags of the category where the new function is required to belong. <br />
<a id="pgfId-1057565"></a>For example to add a function named &#8216;testfun&#8217; in math category, add testfun; in between <code>skeBeginMeasures Math </code>&amp; nearest <code>skeEndMeasures</code> line.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1057568"></a>Current implementation doesn&#39;t merge the entries specified in separate <code>.skeMeasuresCatalog</code> files. </div></li></ol>








<h2>
<a id="pgfId-1057570"></a>Working with <a id="85502"></a>Template File</h2>

<p>
<a id="pgfId-1057572"></a>Each Virtuoso Visualization and Analysis XL function template file describes a Calculator function. The template provides information such as:</p>
<ul><li>
<a id="pgfId-1057573"></a>The function name </li><li>
<a id="pgfId-1057574"></a>The function&#8217;s categories</li><li>
<a id="pgfId-1057575"></a>Input parameters and default values</li><li>
<a id="pgfId-1057576"></a>Gui building tips such as adjacent row hints and parameter dependencies</li><li>
<a id="pgfId-1057577"></a>Tool tip information (currently ignored).</li><li>
<a id="pgfId-1057578"></a>Rules to build the function expression</li></ul>





<p>
<a id="pgfId-1057580"></a>The template is divided into following sections:</p>

<h3>
<a id="pgfId-1057581"></a>Header</h3>

<p>
<a id="pgfId-1057582"></a>Header describes the general function information such as the name, display name, description, and category list.</p>
<ul><li>
<a id="pgfId-1057583"></a>function name: This is the name used to construct the expression </li><li>
<a id="pgfId-1057584"></a>name: This is the display name used as the dialog label in the function panel. </li><li>
<a id="pgfId-1057585"></a>Category list: Each template can belong to multiple categories. For example, the riseTime template could belong to &#8220;Special Functions&#8221; and &#8220;transient&#8221;. Currently we do not define categories according to analysis type. The current categories are: <ul><li>
<a id="pgfId-1057586"></a>Math </li><li>
<a id="pgfId-1057587"></a>Modifier </li><li>
<a id="pgfId-1057588"></a>RF Functions </li><li>
<a id="pgfId-1057589"></a>Special Functions </li><li>
<a id="pgfId-1057590"></a>Trigonometric</li></ul></li></ul>








<h3>
<a id="pgfId-1058429"></a>The Analysis Section</h3>

<p>
<a id="pgfId-1057592"></a>The analysis section describes how to generate the expression, the signal, and parameter arguments.</p>
<ul><li>
<a id="pgfId-1057593"></a>args: Describe how to build the expression </li><li>
<a id="pgfId-1057594"></a>signals: Describe each signal argument: <ul><ul><li>
<a id="pgfId-1057595"></a>prompt </li></ul></ul></li></ul>










<h2>
<a id="pgfId-1057604"></a><a id="17665"></a>Examples</h2>
<h3>
<a id="pgfId-1058471"></a><a id="97649"></a>Example 1: Sample template with single argument: average.ocn</h3>

<p>
<a id="pgfId-1058487"></a>Location: </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1058550"></a><code>&lt;CDS_INST_DIR&gt;/tools/dfII/etc/tools/wavescan/measures/average.ocn</code></pre>
<a id="pgfId-1058579"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
  1;;; GUI builder information ;;;;;;;;;;;;;;;;;;;;;;;;;;;                </pre>
<a id="pgfId-1058580"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
      2 ocnmRegGUIBuilder(</pre>
<a id="pgfId-1058581"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
      3   &#39;(nil</pre>
<a id="pgfId-1057611"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
      4     function average</pre>
<a id="pgfId-1057612"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
      5     name average </pre>
<a id="pgfId-1057613"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
      6     description &quot;Compute average of a waveform over its entire range.&quot;</pre>
<a id="pgfId-1057614"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
      7     category (&quot;Special Functions&quot;)</pre>
<a id="pgfId-1057615"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
      8     analysis (nil</pre>
<a id="pgfId-1057616"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
      9               general (nil</pre>
<a id="pgfId-1057617"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     10                    args (signal)</pre>
<a id="pgfId-1057618"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     11                    signals (nil</pre>
<a id="pgfId-1057619"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     12                             signal (nil</pre>
<a id="pgfId-1057620"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     13                                     prompt &quot;Signal&quot;</pre>
<a id="pgfId-1057621"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     14                                     tooltip &quot;signal to average&quot;</pre>
<a id="pgfId-1057622"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     15                                     )</pre>
<a id="pgfId-1057623"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     16                    )</pre>
<a id="pgfId-1057624"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     17                    inputrange t</pre>
<a id="pgfId-1057625"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     18                    )</pre>
<a id="pgfId-1057626"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     19     )</pre>
<a id="pgfId-1057627"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     20     outputs (result)</pre>
<a id="pgfId-1057628"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     21    )</pre>
<a id="pgfId-1057629"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     22 )</pre>

<p>
<a id="pgfId-1057630"></a>~ </p>
<ul><li>
<a id="pgfId-1057631"></a>The function name used to build the expression is defined by line 4 (function average).</li><li>
<a id="pgfId-1057632"></a>Line 5 is the name used in the dialog label if a function panel is displayed. In this case the function signature takes a single argument (signal) and no function panel is required.</li><li>
<a id="pgfId-1057633"></a>Line 6 is a simple description that will be used at some point for bubble help. (This feature is not yet implemented).</li><li>
<a id="pgfId-1057634"></a>Line 7 is a set of category names. Typically each function belongs to a single category. Optionally a function can belong to multiple categories. </li><li>
<a id="pgfId-1057635"></a>Line 8 begins the analysis section.</li><li>
<a id="pgfId-1057636"></a>Line 10 is the args statement which provides the rule used by Virtuoso Visualization and Analysis XL to generate the function expression. The args statement is a list of ordered signal and parameter names and in our example contains a single item: signal. Therefore the signature looks something like: <code>average(VT(&#8220;/net10&#8221;))</code>, it takes a single signal name<br />
<a id="pgfId-1058633"></a>The order in the args statement defines the order the parameter values will be named in the expression that is put into the buffer. This may or may not be the same order that is displayed in the function panel. Some functions require a more complex mechanism to describe the signature. The template mechanism provides a format statement that will be described in a later example.</li><li>
<a id="pgfId-1057639"></a>Line 11 starts the signal section. A function signature might contain multiple signal parameters (ex: the delay function).</li><li>
<a id="pgfId-1057640"></a>The single signal description begins at Line 12. Line 13 is the signal prompt used to name the signal parameter in the Function Panel. Line 14 is the signal tool tip. This is currently not used.</li></ul>









<h3>
<a id="pgfId-1057643"></a><a id="69323"></a>Example 2: Sample template with multiple arguments: delay.ocn</h3>

<p>
<a id="pgfId-1058680"></a>Location: </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1058711"></a>(&lt;CDS_INST_DIR&gt;/tools/dfII/etc/tools/wavescan/measures/delay.ocn)</pre>
<a id="pgfId-1058725"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
      2 ;;;;;;;;;;;;;;;;;;;;;;;;;; GUI builder information ;;;;;;;;;;;;;;;;;;;;;;;;;;;                </pre>
<a id="pgfId-1058726"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
      3 ocnmRegGUIBuilder(</pre>
<a id="pgfId-1057648"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
      4   &#39;(nil</pre>
<a id="pgfId-1057649"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
      5     function delay</pre>
<a id="pgfId-1057650"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
      6     name delay </pre>
<a id="pgfId-1057651"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
      7     description &quot;delay &quot;</pre>
<a id="pgfId-1057652"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
      8     category (&quot;Special Functions&quot;)</pre>
<a id="pgfId-1057653"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
      9     analysis (nil</pre>
<a id="pgfId-1057654"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     10               tran  (nil </pre>
<a id="pgfId-1057655"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     11                    args (signal1 threshold1 edge1 type1 signal2 threshold2 edge2 type2 numberOfOccurences)</pre>
<a id="pgfId-1057656"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     12                    signals (nil</pre>
<a id="pgfId-1057657"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     13                             signal1 (nil</pre>
<a id="pgfId-1057658"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     14                                     prompt &quot;Signal1&quot;</pre>
<a id="pgfId-1057659"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     15                                     tooltip &quot;signal to measure&quot;</pre>
<a id="pgfId-1057660"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     16                                     )</pre>
<a id="pgfId-1057661"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     17                             signal2 (nil</pre>
<a id="pgfId-1057662"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     18                                     prompt &quot;Signal2&quot;</pre>
<a id="pgfId-1057663"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     19                                     tooltip &quot;signal to measure&quot;</pre>
<a id="pgfId-1057664"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     20                                     )</pre>
<a id="pgfId-1057665"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     21                    )</pre>
<a id="pgfId-1057666"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     22                    params (nil</pre>
<a id="pgfId-1057667"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     23                            threshold1 (nil</pre>
<a id="pgfId-1057668"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     24                                      prompt &quot;Threshold Value 1&quot;</pre>
<a id="pgfId-1057669"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     25                                      tooltip &quot;Threshold Value 1&quot;</pre>
<a id="pgfId-1057670"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     26                                      default 2.5</pre>
<a id="pgfId-1057671"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     27                                      type float</pre>
<a id="pgfId-1057672"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     28                                      min 0)   </pre>
<a id="pgfId-1057673"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     &#8230; </pre>
<a id="pgfId-1057674"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
          periodicity1(nil</pre>
<a id="pgfId-1057675"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
          prompt &quot;Periodicity 1&#8221;</pre>
<a id="pgfId-1057676"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
          tooltip &quot;Periodicity 1&quot;</pre>
<a id="pgfId-1057677"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
          default 1</pre>
<a id="pgfId-1057678"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
          type float )       </pre>
<a id="pgfId-1057679"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
      &#8230;</pre>
<a id="pgfId-1057680"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     65                            periodicity2 (nil</pre>
<a id="pgfId-1057681"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     66                                      prompt &quot;Periodicity 2&quot;</pre>
<a id="pgfId-1057682"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     67                                      tooltip &quot;Periodicity 2&quot;</pre>
<a id="pgfId-1057683"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     68                                      default 1</pre>
<a id="pgfId-1057684"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     69                                      type float</pre>
<a id="pgfId-1057685"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     70                             )</pre>
<a id="pgfId-1057686"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     71                             numberOfOccurences (nil</pre>
<a id="pgfId-1057687"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     72                                      prompt &quot;Number of occurrences&quot;</pre>
<a id="pgfId-1057688"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     73                                      tooltip &quot;Occurrence choice&quot;</pre>
<a id="pgfId-1057689"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     74                                      default single</pre>
<a id="pgfId-1057690"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     75                                      type ((single (0 0 nil nil)) (multiple (&quot; %s  %s  t  %s &quot; periodicity1 periodicity2 sweepName)))</pre>
<a id="pgfId-1057691"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     76                             )</pre>
<a id="pgfId-1057692"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     77                            sweepName (nil</pre>
<a id="pgfId-1057693"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     78                                      prompt &quot;Plot/print vs.&quot;</pre>
<a id="pgfId-1057694"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     79                                      tooltip &quot;Independent variable to plot against.&quot;</pre>
<a id="pgfId-1057695"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     80                                      required nil</pre>
<a id="pgfId-1057696"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     81                                      default trigger</pre>
<a id="pgfId-1057697"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     82                                      type (trigger target cycle)</pre>
<a id="pgfId-1057698"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     83                                      min 0)</pre>
<a id="pgfId-1057699"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     84                    )</pre>

<p>
<a id="pgfId-1057701"></a>The <code>delay</code> template is similar to <code>average.</code> Some differences:</p>
<ul><li>
<a id="pgfId-1057703"></a>Line 11: The args description contains multiple parameters so a Function Panel will be built to describe this function. <br />
<a id="pgfId-1057704"></a>The signals section contains two signals named signal1 and signal2. The prompts (lines 14 and 18) will name the respective fields in the panel. <br />
<a id="pgfId-1057705"></a>This template contains parameters beginning at Line 22. </li><li>
<a id="pgfId-1057706"></a>Line 77: the parameter sweepName. Line 82 names the type: a simple list of cyclic choices. The default value (line 81) names the default choice to be initially displayed. </li><li>
<a id="pgfId-1057707"></a>Line 71: a much more complex example of a cyclic type parameter <code>(numberOfOccurances).</code><br />
<a id="pgfId-1057709"></a>The cyclic type (Line 75) is a list of two choices: single and multiple:<pre class="webflare-pre-block webflare-courier-new" id="#id1057711">
<a id="pgfId-1057711"></a>type ((single (0 0 nil nil)) (multiple (&quot; %s  %s  t  %s &quot; periodicity1 periodicity2 sweepName)))</pre>
<a id="pgfId-1057713"></a>Each choice has an associated value that describes what must be added to the expression signature. <br />
<a id="pgfId-1057715"></a>If you select &#8220;single&#8221;, then the value of numberOfOccurances put into the expression string is literally &#8220;0 0 nil nil&#8221;.<br />
<a id="pgfId-1057717"></a>If you select &#8220;multiple&#8221;, the choice value is described by a formatted string  and will look like: &#8220;&lt;periodicity1&gt; &lt;periodicty2&gt; t &lt;sweepName&gt;&#8221;. If the default values are used, then the choice resolves to: 1 1 t &#8220;trigger&#8221;.</li></ul>










<h3>
<a id="pgfId-1057720"></a><a id="17306"></a>Example 3: Signature described by a format statement: compression.ocn</h3>

<p>
<a id="pgfId-1057721"></a>Location:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1057722"></a>(&lt;CDS_INST_DIR&gt;/tools/dfII/etc/tools/wavescan/measures/compress.ocn)</pre>
<a id="pgfId-1057725"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
      9     analysis (nil</pre>
<a id="pgfId-1057726"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     10               general  (nil</pre>
<a id="pgfId-1057727"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     11                    ;; args (signal ...)</pre>
<a id="pgfId-1057728"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
     12            format (&quot;compression(dB20(harmonic(%s, %s)), ?x %s, ?compress %s)&quot; signal harmNumber xpoint compressiondb)</pre>

<p>
<a id="pgfId-1057731"></a>The compression function is one of those examples where the expression does not conform to a simple rule of function name plus name/value pairs for the parameters. We have to use the format statement (line 12 above).</p>
<p>
<a id="pgfId-1057732"></a>The format uses %s to substitute in the values of the named parameters (signal, harmNumber, xpoint, and compressiondb).</p>

<h3>
<a id="pgfId-1059791"></a><a id="19498"></a>Example 4: Creating your own template</h3>

<p>
<a id="pgfId-1059815"></a>This example creates a template for calculator function named &#8216;trap&#8217; that exists in a new category named &#8216;MyProject&#8217;.</p>

<div class="webflare-information-macro webflare-macro-tip">
<a id="pgfId-1059876"></a>
To build a new template, it is advised to pick an existing similar template and modify it accordingly.</div>

<ol><li>
<a id="pgfId-1057736"></a>Define the function signature:<ul><li>
<a id="pgfId-1057737"></a>Function name</li><li>
<a id="pgfId-1057738"></a>Signal parameters</li><li>
<a id="pgfId-1057739"></a>Additional parameters</li></ul><br />
<a id="pgfId-1057741"></a>For example to create a new function named trap with signature:<pre class="webflare-pre-block webflare-courier-new" id="#id1057742">
<a id="pgfId-1057742"></a>trap(&lt;signal&gt; &lt;from&gt; &lt;to&gt;)</pre>
<a id="pgfId-1057744"></a>The template signal section will contain a single signal named Signal. The parameter section will contain two parameters named From and To, both of type float.</li><li>
<a id="pgfId-1057748"></a>Go to the source directory for template files:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1057749">
<a id="pgfId-1057749"></a>&lt;CDS_INST_DIR&gt;/tools/dfII/etc/tools/wavescan/measures</pre></li><li>
<a id="pgfId-1057751"></a>Find an existing similar template so that you do not have to start from scratch. For example, if the new function trap was similar to existing function clip:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1057752">
<a id="pgfId-1057752"></a>% cp clip.ocn trap.ocn</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1057753">
<a id="pgfId-1057753"></a>% chmod +w trap.ocn</pre></li><li>
<a id="pgfId-1057755"></a>Define the function information in the header section. Replace the information indicated in boldface below. Redefine the category name as MyProject.</li></ol>













<a id="pgfId-1057757"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
  ocnmRegGUIBuilder(</pre>
<a id="pgfId-1057758"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
         &#39;(nil</pre>
<a id="pgfId-1057759"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
          function trap </pre>
<a id="pgfId-1057760"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
          name trap </pre>
<a id="pgfId-1057761"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
          description &quot;short tool tip description for trap function&#8221;</pre>
<a id="pgfId-1057762"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
          category (&quot;MyProject&quot;)</pre>

<ol><li>
<a id="pgfId-1057763"></a>  Define the args (or format) statement so we have a rule for building the expression. <br />
<a id="pgfId-1057765"></a>For the trap example, no change is required in the args statement that comes from the clip template.<pre class="webflare-pre-block webflare-courier-new" id="#id1057767">
<a id="pgfId-1057767"></a> args (signal From To)</pre></li><li>
<a id="pgfId-1057769"></a>Define the signal parameter in the signal section.<br />
<a id="pgfId-1058956"></a>For the trap example reuse the clip example. Change the tool tip as required.</li></ol>





<a id="pgfId-1058957"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
                    signals (nil</pre>
<a id="pgfId-1058958"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
                            signal1 (nil</pre>
<a id="pgfId-1058959"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
                                    prompt &quot;Signal&quot;</pre>
<a id="pgfId-1058960"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
                                    tooltip &quot;signal to trap &quot;</pre>
<a id="pgfId-1058961"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
                                    )</pre>

<ol><li>
<a id="pgfId-1057777"></a>Define the parameters<br />
<a id="pgfId-1057778"></a>For the trap example, reuse the parameter definitions from the clip template. Change the tool tip values as required</li></ol>


<a id="pgfId-1057779"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
               params (nil</pre>
<a id="pgfId-1057780"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
                           From (nil</pre>
<a id="pgfId-1057781"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
                                     prompt &quot;From&quot;</pre>
<a id="pgfId-1057782"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
                                     tooltip &quot;Trap Start&quot;</pre>
<a id="pgfId-1057783"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
                                     default 0</pre>
<a id="pgfId-1057784"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
                                     type float</pre>
<a id="pgfId-1057785"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
                                     min 0)</pre>
<a id="pgfId-1057786"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
                            To (nil</pre>
<a id="pgfId-1057787"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
                                     prompt &quot;To&quot;</pre>
<a id="pgfId-1057788"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
                                     tooltip &quot;End Trap Range&quot;</pre>
<a id="pgfId-1057789"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
                                     default 0</pre>
<a id="pgfId-1057790"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
                                     type float</pre>
<a id="pgfId-1057791"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
                                     min 0)</pre>
<a id="pgfId-1057792"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
                   )</pre>

<ol><li>
<a id="pgfId-1057793"></a>Install the measures file into the template directory.<br />
<a id="pgfId-1057794"></a>Copy trap.ocn to <code>&lt;USER_HOME&gt;/measures</code> or CSF_SEARCH_PATHS<code>/measures</code>. <br />
<a id="pgfId-1057796"></a>For more information, refer <a href="appH.html#76942">Function Template Search Paths</a>.</li><li>
<a id="pgfId-1057798"></a>Add entry in catalog file by doing following tasks:<ul><li>
<a id="pgfId-1057799"></a>Install your new project catalog file. </li></ul><br /><pre class="webflare-pre-block webflare-courier-new" id="#id1057801">
<a id="pgfId-1057801"></a>% cp  &lt;CDS_INST_DIR&gt;/tools/dfII/etc/tools/wavescan/measures/.skeMeasuresCatalog CSF_SEARCH_PATHS/measures.</pre>
<a id="pgfId-1057803"></a>For more information, refer <a href="appH.html#99690">Template Catalog Summary File</a>. <ul><li>
<a id="pgfId-1057805"></a>Edit your new project catalog file to add the new category and function name:<ul><li>
<a id="pgfId-1057806"></a>Add category name at line #2 after skeBeginCategory keyword</li><li>
<a id="pgfId-1057807"></a>Add new category section before skeBeginMeasures.Math.</li></ul><br />
<a id="pgfId-1057808"></a>Your <code>.skeMeasuresCatalog</code> file will look like as below: <pre class="webflare-pre-block webflare-courier-new" id="#id1057811">
<a id="pgfId-1057811"></a>skeBeginCategory</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1057812">
<a id="pgfId-1057812"></a>MyProject</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1057813">
<a id="pgfId-1057813"></a>Math</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1057814">
<a id="pgfId-1057814"></a>Modifier</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1057815">
<a id="pgfId-1057815"></a>RF Functions</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1057816">
<a id="pgfId-1057816"></a>Special Functions</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1057817">
<a id="pgfId-1057817"></a>Trigonometric</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1057818">
<a id="pgfId-1057818"></a>skeEndCategory</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1057819">
<a id="pgfId-1057819"></a>skeBeginMeasures.MyProject</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1057820">
<a id="pgfId-1057820"></a>trap;trap</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1057821">
<a id="pgfId-1057821"></a>skeEndMeasures</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1057822">
<a id="pgfId-1057822"></a>skeBeginMeasures.Math</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1057823">
<a id="pgfId-1057823"></a>exp;exp</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1060844">
<a id="pgfId-1060844"></a>dB20;dB20</pre></li></ul></li></ol>


























<p>
<a id="pgfId-1060845"></a>Now run Virtuoso Visualization and Analysis XL and open calculator, you should be able to see trap function added in <code>MyProject</code> function category. </p>

<h2>
<a id="pgfId-1059154"></a><a id="62284"></a>Advanced Features to provide GUI Hints</h2>

<p>
<a id="pgfId-1057829"></a>The template format supports the following advanced features:</p>
<ul><li>
<a id="pgfId-1060863"></a>Sometimes it makes sense for two or more parameters to share the same row. An optional parameter property <code>gridRowHint &lt;num&gt;</code> directs Virtuoso Visualization and Analysis XL to layout all parameters with the same <code>gridRowHint value</code> on the same row. </li><li>
<a id="pgfId-1057831"></a>Sometimes a parameter controls whether one or more other parameters are enabled or disabled. An optional parameter property <code>guiEnableHint &lt;target list&gt;</code> controls whether other parameters are enabled. </li></ul>

<p>
<a id="pgfId-1059187"></a>Example: evm.ocn template (evmQpsk)</p>

<p>
<a id="pgfId-1059479"></a></p>
<div class="webflare-div-image">
<img src="images/guihint1.gif" /></div>

<p>
<a id="pgfId-1059169"></a>The above example is the GUI form for the original evmQpsk 6.1.0 template. The template contains no <code>gridRowHints</code> or <code>guiEnableHints</code>. </p>
<p>
<a id="pgfId-1057840"></a>The next example shows how the two hint properties are used to:</p>
<ul><li>
<a id="pgfId-1057841"></a>Place the Symbol Start and Symbol period parameters on the same row. </li><li>
<a id="pgfId-1057842"></a>Place the Amplitude and Offset parameters on the same row. </li><li>
<a id="pgfId-1057843"></a>The form has three columns instead of two to make the form more compact. </li><li>
<a id="pgfId-1057844"></a>The Auto Level Detect parameter will enable/disable the Amplitude and Offset parameters. </li></ul>



<p>
<a id="pgfId-1059555"></a>Example: evmQpsk with gridRowHint and gridEnableHints:</p>

<p>
<a id="pgfId-1059562"></a></p>
<div class="webflare-div-image">
<img src="images/guihint2.gif" /></div>

<p>
<a id="pgfId-1057850"></a>The following is a snippet of the evmQpsk template with modifications is italized:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057851"></a> delay (nil</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057852"></a>  prompt <em>&quot;Sym Start/Period&quot;</em></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057853"></a>  tooltip &quot;Symbol Start&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057854"></a>  type float</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057855"></a>  required t</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057856"></a>  <em>guiRowHint 1</em></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057857"></a>  min 0)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057858"></a> sampling (nil</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057859"></a>  <em>prompt &quot;&quot;</em></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057860"></a>  tooltip &quot;Symbol period&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057861"></a>  type float</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057862"></a>  required t</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057863"></a>  <em>guiRowHint 1</em></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057864"></a>  min 0)</pre>
<p>
<a id="pgfId-1057865"></a>Notes on template changes:</p>
<ul><li>
<a id="pgfId-1057866"></a>The guiRowHint properties for delay and sampling have the same value (guiRowHint 1), so the prompt/value pairs for both parameters are put on the same row. </li><li>
<a id="pgfId-1057867"></a>Column 1 contains the prompt for the delay value. Column 3 is supposed to contain the prompt for the sampling value; however, I wanted to simplify the layout and have three columns instead of four. Look at the prompt value for the delay parameter: it describes BOTH the delay and sampling value fields. The prompt for the sampling parameter is set to an empty string (&#8220;&#8221;).</li></ul>

<p>
<a id="pgfId-1057869"></a>The following is a snippet of the evmQpsk template with modifications is italized:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057870"></a> Autoleveldetect(nil</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057871"></a>  prompt &quot;Auto Level Detect&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057872"></a>  tooltip &quot;Auto Level Detect&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057873"></a>  type ( (&quot;on&quot; (t, nil, nil)) (&quot;off&quot; (&quot;nil, %s, %s&quot; voltage offset)))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057874"></a>  <em>guiRowHint 2</em></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057875"></a><em>  guiEnableHint ( (voltage off) (offset off) )</em></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057876"></a> )</pre>
<p>
<a id="pgfId-1057877"></a>The autoleveldetect parameter is an enumerated type with values &#8220;on&#8221; and &#8220;off&#8221;. When it is &#8220;on&#8221;, there is no need to specify two other parameters: voltage and offset because those values will be automatically calculated. </p>
<p>
<a id="pgfId-1059247"></a>If you want the GUI fields representing these other parameters to be disabled when autoleveldetect is &#8220;on&#8221;. The guiEnableHint target list gives the name(s) of the other parameters to enable (voltage and offset). Each target is specified as a list: the first name is the target name, followed by the set of autoleveldetect values that will turn that target on.</p>
<p>
<a id="pgfId-1057878"></a>Examine the first target list for autoleveldetect&#8217;s guiEnableHint:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1057879"></a>guiEnableHint( (voltage off) (offset off)) </pre>
<p>
<a id="pgfId-1057880"></a>This hint tells the GUI that when the autoleveldetect enumerated value is &#8220;off&#8221;, the gui for the voltage parameter can be enabled. For any other autoenablehint value, the gui for the voltage parameter will be disabled.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1056517"></a></pre>
<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="appG.html" id="prev" title="Defining New SKILL Functions">Defining New SKILL Functions</a></em></b><b><em><a href="vivaxlugIX.html" id="nex" title="Index">Index</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>