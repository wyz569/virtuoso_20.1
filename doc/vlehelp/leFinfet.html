
<html><head><title>FinFET Support in Layout Editor</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="komal" />
<meta name="CreateDate" content="2020-09-18" />
<meta name="CreateTime" content="1600420470" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes how to use the Virtuoso Layout Suite XL layout editor." />
<meta name="DocTitle" content="Virtuoso Layout Suite XL: Basic Editing User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="FinFET Support in Layout Editor" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="vlehelp" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-09-18" />
<meta name="ModifiedTime" content="1600420470" />
<meta name="NextFile" content="leWSP.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="chap14.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Layout Suite XL: Basic Editing User Guide -- FinFET Support in Layout Editor" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="vlehelpICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="vlehelpTOC.html">Contents</a></li><li><a class="prev" href="chap14.html" title="Dialog Box Messages">Dialog Box Messages</a></li><li style="float: right;"><a class="viewPrint" href="vlehelp.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="leWSP.html" title="Width Spacing Pattern Support in Layout Editing">Width Spacing Pattern Support  ...</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Layout Suite XL: Basic Editing User Guide<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>15
<a id="pgfId-1066321"></a></h1>
<h1>
<a id="pgfId-1066323"></a><hr />
<a id="54714"></a>FinFET Support in Layout Editor<hr />
</h1>

<p>
<a id="pgfId-1086337"></a><a id="ff_FinFET"></a>This chapter describes enhancements made to the layout editor to support FinFET devices. These enhancements include mechanisms to let you display the snap pattern grid in the layout canvas and automatically snap design objects to that grid.</p>
<p>
<a id="pgfId-1066754"></a><a id="errorMessFirstpage"></a>This chapter contains the following topics:</p>
<ul><li>
<a id="pgfId-1085999"></a><a href="leFinfet.html#70040">Snapping Objects to Local Snap Pattern Shapes</a><ul><li>
<a id="pgfId-1086003"></a><a href="leFinfet.html#25454">Snapping Objects to Snap Patterns</a></li><li>
<a id="pgfId-1086007"></a><a href="leFinfet.html#88604">Placing Objects Inside the Fin Boundary</a></li><li>
<a id="pgfId-1067050"></a><a href="leFinfet.html#30322">Controlling the Display of Snap Patterns</a></li><li>
<a id="pgfId-1067054"></a><a href="leFinfet.html#33757">Turning On Snap Pattern Snapping</a></li><li>
<a id="pgfId-1067039"></a><a href="leFinfet.html#67022">Snapping Objects</a></li><li>
<a id="pgfId-1066406"></a><a href="leFinfet.html#55055">Snapping Objects and Shapes as Groups</a></li><li>
<a id="pgfId-1087602"></a><a href="leFinfet.html#74218">Track Group Support</a></li><li>
<a id="pgfId-1088964"></a><a href="leFinfet.html#28495">Commands Supporting Snap Pattern Snapping</a></li></ul></li><li>
<a id="pgfId-1071569"></a><a href="leFinfet.html#60230">Snapping Objects to Global Snap Pattern Grid</a><ul><li>
<a id="pgfId-1071393"></a><a href="leFinfet.html#34498">Controlling the Display of Global Grid</a></li><li>
<a id="pgfId-1071420"></a><a href="leFinfet.html#28873">Anchoring the Global Grid</a></li></ul></li><li>
<a id="pgfId-1078306"></a><a href="leFinfet.html#18184">Controlling the Display of Snap Patterns in Palette</a></li><li>
<a id="pgfId-1078458"></a><a href="leFinfet.html#94499">Modes for Object Placement</a><ul><li>
<a id="pgfId-1081154"></a><a href="leFinfet.html#82157">Selecting Placement Mode</a></li><li>
<a id="pgfId-1080213"></a><a href="leFinfet.html#29613">Abstract Mode Placement</a></li><li>
<a id="pgfId-1080222"></a><a href="leFinfet.html#62216">Manual Mode Placement Override</a></li></ul></li><li>
<a id="pgfId-1093357"></a><a href="leFinfet.html#34567">Create Custom Placement Area</a></li><li>
<a id="pgfId-1097143"></a><a href="leFinfet.html#53388">Snapping for singleTrackCenter Snap Mode</a></li></ul>



















<h2>
<a id="pgfId-1065385"></a><a id="70040"></a>Snapping <a id="ff_SnapObjsToLocalSnapPatterns"></a>Objects to Local Snap Pattern Shapes</h2>

<p>
<a id="pgfId-1073451"></a>Virtuoso has been enhanced in a way that layout engineers working on FinFET processes improve their productivity. A new snap pattern has been defined to capture layers that have a grid-like nature and new constraints have been defined to capture a new class of width and spacing rules for FinFET processes. For more information, see <h-hot><a actuate="user" class="URL" href="../ascitechfile/chap4.html#ff_snapPatternDefs" show="replace" xml:link="simple">snapPatternDefs</a></h-hot>.</p>
<p>
<a id="pgfId-1066900"></a>The layout editor has been enhanced with visualization of the fin grids made inherent in FinFET technology, as well as automated snapping of shapes to the fin grid.</p>

<h3>
<a id="pgfId-1066926"></a><a id="25454"></a><a id="60228"></a>Snapping Objects to Snap Patterns<a id="ff_SnappingObjsToSnapPatterns"></a></h3>

<p>
<a id="pgfId-1065533"></a>The high-level steps that a layout designer needs to follow for snapping objects to snap patterns are listed below:</p>
<ul><li>
<a id="pgfId-1065534"></a>Create the snap pattern definition for the fin boundary in the ASCII technology file.</li><li>
<a id="pgfId-1067468"></a>Specify the fin pitch (<code>step</code>), fin width (<code>trackWidth</code>), direction (<code>stepDirection</code>), distance of the first fin center line from the lower edge (<code>offset</code>), and type (<code>type</code>) of fin - local or global.</li><li>
<a id="pgfId-1073268"></a>Specify the name of the layer, typically the <em>Active </em>layer, on which objects will snap to the fin grid (<code>snappingLayers</code>) and the required fin enclosures from the center line (<code>enclosures</code>). There can be multiple snapping layers (<code>layer</code>) in the snap pattern definition. Each layer can optionally have multiple purposes (<code>purposes</code>) and enclosure values (<code>enclosures</code>).</li><li>
<a id="pgfId-1065537"></a>Draw the fin boundary in the layout editor.</li><li>
<a id="pgfId-1065538"></a>Move a Pcell (including modgen Pcells), a via, an <em>Active</em> shape, or an instance over the fin boundary. These objects are snapped automatically to the fin grid by the layout editor.</li></ul>





<h3>
<a id="pgfId-1065541"></a><a id="88604"></a>Placing Objects Inside the Fin Boundary<a id="ff_PlacingObjsInFinBoundary"></a></h3>

<p>
<a id="pgfId-1065542"></a>The layout editor provides rapid placement of shapes, Pcells, instances, and vias in a fin boundary using a shape snapping algorithm. This ensures a correct-by-construction layout on the fin grid. Automatic alignment is achieved by an alignment engine, which contains the alignment semantics. The layout editor commands that are responsible for creating and moving Pcells, instances, and vias in a layout make use of the alignment engine to ensure placement correctness. The alignment engine accepts a set of shapes, and based on their overlaps with fin boundaries in the design, places them appropriately. The automatic placement requirements and their results are classified as following:</p>
<ul><li>
<a id="pgfId-1065543"></a>When a snap pattern shape or a Pcell, instance, via or fig group containing a snap pattern shape (the free figure) overlaps another snap pattern shape or a Pcell, instance, via, fig group containing a snap pattern shape, (the fixed figures), on the same LPP, then the alignment engine tries to align the snap pattern tracks and in the process determines the transformation that is applied to the free figure, such that the closest tracks of the overlapping pair are aligned.<br />
<a id="pgfId-1065550"></a><div class="webflare-div-image">
<img width="635" height="502" src="images/leFinfet-2.gif" /></div>
<a id="pgfId-1065551"></a>The above figure shows the result of snap pattern shape pair alignment. No modification of the Pcell code is necessary to enable snapping of Pcell instances to the fin grid, since the snapping is done based on the existing fin boundary shape in the Pcell.</li><li>
<a id="pgfId-1065552"></a>A snap pattern definition specifies a list of LPPs. Shapes on these LPPs should snap to the snap pattern grid. When a shape on such a layer, or a Pcell, instance, via, fig group containing a shape overlaps a matching snap pattern shape then the engine computes the transformation that would be required to place the shape as defined by the applicable track enclosure.<br />
<a id="pgfId-1065559"></a><div class="webflare-div-image">
<img width="635" height="395" src="images/leFinfet-3.gif" /></div>
<a id="pgfId-1065560"></a>The above figure shows the result of shape to snap pattern alignment for a via that contains this shape. No change to the via is needed to enable snapping of substrate contacts to the fin grid because the snapping is done based on the existing shape on the <em>Active </em>layer in the via master.</li></ul>











<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1065561"></a>When you select or drag a snap pattern shape, these shapes behave in the same way as any other shape in the layout editor. You can also change the visibility and selectability of the snap pattern shapes from the Palette assistant.</div>

<h3>
<a id="pgfId-1067081"></a><a id="30322"></a>Controlling the Display of Snap Patterns<a id="ff_ControlDisplaySP"></a></h3>

<p>
<a id="pgfId-1067082"></a>The layout editor has been enhanced to visualize the fin grid or the full fin shapes inside fin boundaries. The snap pattern display lets you switch between full fin detail display, which is used to debug fin-alignment related DRC violations, and high-level fin boundary display which is used to focus on wiring and placement without being distracted by fin shapes.</p>
<p>
<a id="pgfId-1067083"></a>You can display the boundary, the tracks, or both of them for snap patterns.</p>

<ol><li>
<a id="pgfId-1067084"></a>Choose <em>Options &#8211; Display</em>.<br />
<a id="pgfId-1088751"></a>The <a href="appA.html#38064">Display Options Form</a> opens.<br />
<a id="pgfId-1088757"></a><div class="webflare-div-image">
<img width="635" height="120" src="images/leFinfet-4.gif" /></div></li><li>
<a id="pgfId-1088758"></a>Select one of the following from the <em>Snap Pattern Display</em> list:<ul><li>
<a id="pgfId-1088759"></a><em>Full</em>: Displays the snap pattern (SP) boundary, tracks, fins, and width spacing patterns periods.</li><li>
<a id="pgfId-1088760"></a><em>Tracks</em>: Displays the snap pattern boundary and tracks.</li><li>
<a id="pgfId-1088761"></a><em>Boundary</em>: Displays only the snap pattern boundary.</li><li>
<a id="pgfId-1088762"></a><em>Periods</em>: Displays only the width spacing pattern periods.</li><li>
<a id="pgfId-1096501"></a><em>Periods and Tracks</em>: Displays width spacing pattern periods and tracks.<br />
<a id="pgfId-1067110"></a><div class="webflare-div-image">
<img width="635" height="366" src="images/leFinfet-5.gif" /></div></li></ul></li><li>
<a id="pgfId-1086092"></a>Click <em>OK</em>.<br /><div class="webflare-information-macro webflare-macro-tip">
<a id="pgfId-1086096"></a>
You can use the new <a actuate="user" class="URL" href="../sklayoutref/layout.html#ff_leCycleSnapPatternDisplay" show="replace" xml:link="simple">leCycleSnapPatternDisplay</a> SKILL function to cycle through the different snap pattern display types. You set the default value using the new <a href="appB.html#17321">snapPatternDrawingStyle</a> environment variable.</div></li></ol>

















<h3>
<a id="pgfId-1067114"></a><a id="33757"></a>Turning On Snap Pattern Snapping<a id="ff_SettingDirectionSP"></a></h3>

<p>
<a id="pgfId-1067538"></a>To turn on <em>Snap Pattern Snapping </em>in the <a href="appA.html#41538">Layout Editor Options Form</a>, do the following:</p>

<ol><li>
<a id="pgfId-1067555"></a>Choose<em> Options &#8211; Editor</em>.</li><li>
<a id="pgfId-1067666"></a>In the <a href="appA.html#41538">Layout Editor Options Form</a>, click to turn on the <em>Snap Pattern Snapping </em>option and click <em>OK</em>.<br />
<a id="pgfId-1069027"></a><div class="webflare-div-image">
<img width="635" height="131" src="images/leFinfet-7.gif" /></div></li></ol>




<p>
<a id="pgfId-1067667"></a>You can also set the <code>snapPatternSnapping </code>variable in your <code>.cdsenv</code> file, to turn the <em>Snap Pattern Snapping </em>option on at startup.</p>
<p>
<a id="pgfId-1067840"></a><code>layout snapPatternSnapping boolean t</code></p>

<div class="webflare-information-macro webflare-macro-video">
<a id="pgfId-1089015"></a>
You can view the video, <em><a actuate="user" class="URL" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1Od0000002JgpOEAS&amp;pageName=ArticleContent" show="replace" xml:link="simple">Snap Pattern Enabling</a></em>.</div>
<h3>
<a id="pgfId-1067844"></a><a id="67022"></a>Snapping Objects<a id="ff_SnappingObjects"></a></h3>

<p>
<a id="pgfId-1065607"></a>This section describes how objects are snapped to snap pattern shapes.</p>

<h4>
<a id="pgfId-1065608"></a>Snap Pattern Shape to Snap Pattern Shape Snapping</h4>

<p>
<a id="pgfId-1065609"></a>Two snap pattern shapes drawn on the same LPP snap to each other. Assume a FinFET process where snap pattern shapes are used to draw fin boundaries. If two Pcell instances containing fin boundaries are placed close to each other, such that their fin boundaries overlap, then Virtuoso will automatically align the fins of these snap patterns, as shown in the figure below.</p>

<p>
<a id="pgfId-1065624"></a></p>
<div class="webflare-div-image">
<img width="656" height="230" src="images/leFinfet-9.gif" /></div>

<p>
<a id="pgfId-1065625"></a>When an instance containing multiple snap pattern shapes overlaps a snap pattern shape, then the instance is snapped based on only one of the snap pattern shapes. If the instance partially overlaps the snap pattern shape, one of the overlapping snap patterns is used for snapping.</p>

<h4>
<a id="pgfId-1087133"></a>P&amp;R Boundary Snapping</h4>

<p>
<a id="pgfId-1087050"></a>When you create a P&amp;R boundary with the <em>Create Method </em>as <em>From Selected Set</em> and the constraint <h-hot><a actuate="user" class="URL" href="../ascitechconstr/constr_length_width.html#allowedPRBoundaryDimensions" show="replace" xml:link="simple">allowedPRBoundaryDimensions</a></h-hot> is set in the technology file, the P&amp;R boundary will be a multiple of the value specified in the <code>allowedPRBoundaryDimensions</code> constraint.</p>

<h4>
<a id="pgfId-1065626"></a><a id="18657"></a>Instance Snapping</h4>

<p>
<a id="pgfId-1065627"></a>When an instance overlaps a snap pattern shape and the master does not contain a snap pattern shape on the same LPP, then the instance is snapped based on its shapes (assuming it contains a shape on an LPP that snaps to the snap pattern shape).</p>
<p>
<a id="pgfId-1065628"></a>For example, consider a Pcell instance that does not contain a snap pattern, but it contains a shape on the <em>Active</em> layer. If this Pcell instance is moved over a snap pattern shape that applies to the <em>Active</em> layer, then the instance is snapped to the grid based on the shape on <em>Active</em> layer using the snap pattern definitions <code>enclosures</code> attribute.</p>

<p>
<a id="pgfId-1065655"></a></p>
<div class="webflare-div-image">
<img width="656" height="503" src="images/leFinfet-10.gif" /></div>

<p>
<a id="pgfId-1065656"></a>If there are multiple matching shapes, the snapping is done based on the first LPP union bbox that is found, where the relevant edge (lower for vertical snapping, left for horizontal snapping) overlaps the snap pattern shape.</p>
<p>
<a id="pgfId-1065657"></a>If the snap pattern shape applies to shapes on multiple LPPs and the instance master contains shapes on several such LPPs, the snapping algorithm does snapping based on any one of the LPPs.</p>
<p>
<a id="pgfId-1072271"></a>If the instance overlaps multiple snap pattern shapes that are <em>Active</em>, then the algorithm does snapping based on just one snap pattern shape.</p>

<h4><em>
<a id="pgfId-1072272"></a>Snapping Instances in Modgens</em></h4>

<p>
<a id="pgfId-1072273"></a>A modgen comprises multiple Pcell instances in the form of a complex, structured array. The layout editor automatically snaps the Pcells in modgens to the snap pattern. The entire modgen block is, therefore, snapped to the top-level snap pattern shape.</p>

<h4>
<a id="pgfId-1072274"></a>Shape Snapping</h4>

<p>
<a id="pgfId-1065660"></a>Shapes that overlap a snap pattern shape after a copy or move snap to the grid.</p>
<p>
<a id="pgfId-1065661"></a>For example, consider a snap pattern shape that applies to the <em>Active</em> layer and it is moved over a snap pattern shape. The shape is snapped to the grid based on the snap pattern definitions <code>enclosures</code> attribute.</p>

<p>
<a id="pgfId-1065685"></a></p>
<div class="webflare-div-image">
<img width="656" height="466" src="images/leFinfet-11.gif" /></div>

<p>
<a id="pgfId-1065686"></a>A shape may overlap multiple snap pattern shapes and more than one of those may apply to it. In this case, the snapping algorithm does snapping based on one snap pattern shape.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1065687"></a>If a shape overlaps multiple snap pattern shapes, the snapping is done only if all the snap pattern shapes are aligned.</div>
<p>
<a id="pgfId-1086676"></a>When you are creating a rectangle and the <a href="appB.html#50855">rectOnSnapPatternGrid</a> environment variable is enabled, a DRC correct rectangle is created.</p>

<h4>
<a id="pgfId-1065688"></a>Via Snapping</h4>

<p>
<a id="pgfId-1065689"></a>Custom layout designs have a stdVia, cdsViaDevice, cdsGenVia, and customVia. Except for customVias, none of the vias insert a snap pattern shape into the via subMaster. Therefore, vias are snapped based on the shapes they contain, instead of a snap pattern.</p>
<p>
<a id="pgfId-1065690"></a>Also, when a via in a via stack is snapped to a snap pattern shape, the entire via stack is snapped. A via stack is snapped as a group. </p>
<p>
<a id="pgfId-1065691"></a>Via and via stacks that overlap a matching snap pattern shape after a copy, move, or create operation are snapped to the grid.</p>
<p>
<a id="pgfId-1065692"></a>For example, consider a FinFET process where snap pattern shapes are used for fin boundaries. When a substrate contact containing an <em>Active</em> shape is placed on a fin boundary, it is automatically aligned to the fin grid based on the <code>enclosures</code> of the snap pattern shape. The figure below contains a via with a plate layer on &#8220;<em>Active/drawing</em>&#8221;. When the via is moved over a snap pattern shape that applies to all <em>Active</em> shapes, the via is automatically snapped to the fin grid based on the <code>enclosures</code> of the snap pattern.</p>

<p>
<a id="pgfId-1065716"></a></p>
<div class="webflare-div-image">
<img width="656" height="458" src="images/leFinfet-12.gif" /></div>

<p>
<a id="pgfId-1065717"></a>When a <code>snapPatternDef</code> does not have any <code>snapPurposes</code>, it applies to all shapes on the <code>snapLayer</code>.</p>
<p>
<a id="pgfId-1065718"></a>If the snap pattern applies to shapes on multiple LPPs and the via master contains shapes on several such LPPs, the snapping algorithm does snapping based on one of the LPPs.</p>
<p>
<a id="pgfId-1065719"></a>If the via overlaps multiple snap pattern shapes that are <em>Active</em>, then the snapping algorithm does snapping based on one snap pattern shape.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1072260"></a>Snap pattern shapes on the same LPP should snap to each other. Snapping should be performed after a copy, move, or stretch operation or creation of an instance or via.</div>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1089134"></a>You can use the environment variables <a href="appB.html#59564">snapPatternSnappingDepth<code></code></a> and <a href="appB.html#37215">snapPatternSnappingDepthMethod<code></code></a> to specify the snap depth and the method to be used to define the snap depth for snap pattern snapping, respectively.</div>

<h3>
<a id="pgfId-1079737"></a><a id="55055"></a>Snapping Objects and Shapes as Groups<a id="ff_SnappingObjShapesGroups"></a></h3>

<p>
<a id="pgfId-1065724"></a>The following objects in a cellview are snapped as groups:</p>
<ul><li>
<a id="pgfId-1065725"></a>Members of a fig group.</li><li>
<a id="pgfId-1065726"></a>A chain of abutted MOS devices. If the chain is moved in such a way that snapPattern snapping is triggered after the move, all the devices on it are snapped together. This ensures that the abutment chain remains aligned.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1086202"></a>For <em>Move</em> and <em>Copy</em> commands, if the <em>Chain Mode</em> is set to <em>All </em>then even if one device is selected, all the devices are snapped as a group.</div></li><li>
<a id="pgfId-1068172"></a>Members of a selected set, only if the selected set has a shape.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1082241"></a>For <em>Move</em> and <em>Copy</em> commands, if the selected set has a shape, then the entire selected set is snapped as a group. If the selected set has less than 25 figures, the representative figure is the nearest snappable shape in the hierarchy inside the selected set. However, if the selected set has more than 25 figures, the representative figure is the nearest top-level figure in the selected set; the heirarchy analysis is not done.</div></li><li>
<a id="pgfId-1079703"></a>Vias in a via stack.</li></ul>






<h3>
<a id="pgfId-1087250"></a><a id="74218"></a>Track Group Support<a id="trackGroup"></a></h3>

<p>
<a id="pgfId-1087251"></a>The layout editor has been enhanced to support track groups available in <a href="../ascitechfile/chap4.html#ff_snapPatternDefs">snapPatternDefs</a>.</p>
<p>
<a id="pgfId-1087193"></a>When a <code>snapPatternDef</code> has track groups, tracks are combined in groups. Within each track group, the existing <code>step</code> is used as the track space. The <code>period</code> of the <code>snapPatternDef </code>is computed from the group spacings and the number of tracks in each group. </p>
<p>
<a id="pgfId-1087699"></a>Snap pattern shapes of the <code>snapPatternDef</code> snap to their period lines. </p>
<p>
<a id="pgfId-1087196"></a>The shape snapping for track groups is supported both for global and local snap pattern definitions.</p>
<p>
<a id="pgfId-1087199"></a>For snap pattern to shape snapping, the shape is snapped by having the lower or left edge of the shape enclose a track by the <code>trackEnclosure</code> value. The shape is snapped to the nearest track. To move a snapped shape from one track group to another, move the pointer by at least half the track group spacing. </p>
<p>
<a id="pgfId-1088076"></a>The shape snapping to snap patterns with track groups is depicted in the figure below.</p>

<p>
<a id="pgfId-1087426"></a>f</p>
<div class="webflare-div-image">
<img width="656" height="543" src="images/leFinfet-13.gif" /></div>

<p>
<a id="pgfId-1087666"></a>For snap pattern to snap pattern snapping, the computed period is used. The lower-left edge of the moving snap pattern is snapped to the closest period line of the target snap pattern. The track groups in snap pattern to shape snapping are depicted in the figure below.</p>

<p>
<a id="pgfId-1087747"></a></p>
<div class="webflare-div-image">
<img width="656" height="475" src="images/leFinfet-14.gif" /></div>
<h4>
<a id="pgfId-1087829"></a>Snapping of Instances in Detail Mode</h4>

<p>
<a id="pgfId-1087925"></a>Special behavior is needed when snapping instances containing snap patterns with track groups. Non-uniform snap patterns have a lower precedence than the uniform snap patterns. The snapping behavior is described below:</p>
<ul><li>
<a id="pgfId-1087831"></a>If an instance has both uniform and non-uniform snap patterns, only the uniform snap pattern is used for snapping.</li><li>
<a id="pgfId-1087832"></a>If an instance contains only non-uniform snap patterns, snapping is done to period lines.</li><li>
<a id="pgfId-1087833"></a>If there are no non-uniform snap patterns, there is no change in snapping behavior.<br /><div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1088247"></a>
Instance snapping based on snap patterns will usually be more accurate than shape-based snapping. As a result, if a snap pattern shape is found, shape snapping will be disabled for that direction. In this case, shape snapping will not be performed even if snapping is not possible for the snap pattern shape.</div></li></ul>




<h2>
<a id="pgfId-1088250"></a><a id="60230"></a>Snapping <a id="ff_snapObjsToGlobalSP"></a>Objects to Global Snap Pattern Grid</h2>

<p>
<a id="pgfId-1069865"></a>The layout editor has been enhanced to display a uniform fin grid over the entire design window. This has been enabled by adding a global snap pattern grid to the design. You can create a global snap pattern grid by specifying the value <code>global</code> in the <code>type</code> constraint of the snap pattern definition, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1068646"></a>snapPatternDefs(<br />        (GFG            (&quot;CellBoundary&quot; &quot;global&quot;)<br />        &#39;offset          0.024<br />        &#39;type            &quot;global&quot;<br />        &#39;step            0.048<br />        &#39;stepDirection   &quot;vertical&quot;<br />        ...<br /></pre>

<p>
<a id="pgfId-1070178"></a>The type constraint can have the value <code>global </code>or<code> local</code>. For more information, see <h-hot><a actuate="user" class="URL" href="../ascitechfile/chap4.html#ff_snapPatternDefs" show="replace" xml:link="simple">snapPatternDefs</a></h-hot>.</p>
<p>
<a id="pgfId-1071682"></a>A local snap pattern definition is drawn using a snap pattern shape in the layout. A global snap pattern definition can be activated through either a constraint (<code>snapGridVertical </code>or <code>snapGridHorizontal</code>), or by drawing a corresponding snap pattern shape.</p>

<h3>
<a id="pgfId-1071685"></a><a id="34498"></a>Controlling the Display of Global G<a id="ff_ControlDisplayGG"></a>rid</h3>

<p>
<a id="pgfId-1069435"></a>You can also enable global grid display using the <code>snapGridVertical</code> and <code>snapGridHorizontal</code> constraints. The constraint value is the name of the global<code> snapPatternDef</code> and the direction the same as is specified in that <code>snapPatternDef</code>. </p>
<p>
<a id="pgfId-1072961"></a>In the example below, the constraint value is <code>GFG</code>, which is the name of the global, vertical <code>snapPatternDef</code> shown on the previous page.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1069363"></a>spacings(</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1069364"></a> snapGridVertical(&quot;GFG&quot;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1069365"></a>  );spacings</pre>
<h3>
<a id="pgfId-1069757"></a><a id="28873"></a>Anchoring the Global G<a id="ff_AnchorGG"></a>rid</h3>

<p>
<a id="pgfId-1070304"></a>The global grid is anchored in the following order of priority:</p>
<ul><li>
<a id="pgfId-1070408"></a>Shape on global snapPatternDef LPP</li><li>
<a id="pgfId-1070409"></a>Snap boundary</li><li>
<a id="pgfId-1070410"></a>PR boundary</li><li>
<a id="pgfId-1070371"></a>Origin axis</li></ul>



<p>
<a id="pgfId-1070458"></a>You can also enable or disable the global grid anchoring using the following environment variable:</p>
<p>
<a id="pgfId-1070652"></a><code>graphic snapPatternGlobalGridAnchoring boolean nil</code></p>
<p>
<a id="pgfId-1070709"></a>When the global grid anchoring is disabled, the global grid is anchored to the origin axis.</p>
<p>
<a id="pgfId-1070735"></a>A few examples of global grid anchoring are shown below:</p>
<ul><li>
<a id="pgfId-1070812"></a>Anchoring by shape on global snapPatternDef LPP: The vertical grid is anchored to the lower edge of the drawn shape. In the example below, an offset of 24nm is shown.<br />
<a id="pgfId-1071905"></a><div class="webflare-div-image">
<img width="635" height="438" src="images/leFinfet-16.gif" /></div></li><li>
<a id="pgfId-1089462"></a>Anchoring by PR boundary: If no shape is drawn on global grid LPP, then Virtuoso looks for a PR boundary. If it is found, then the global grid is anchored to the lower edge of the PR boundary.<br />
<a id="pgfId-1089475"></a><div class="webflare-div-image">
<img width="635" height="433" src="images/leFinfet-17.gif" /></div>
<a id="pgfId-1089480"></a>By default, the PR boundary snaps to the least common multiple of the grid values in the X and Y directions. You can use the environment variables, <a href="appB.html#66641">boundarySnapXGrids<code></code></a> and <a href="appB.html#51701">boundarySnapYGrids<code></code></a>, to override the default behavior and snap the PR boundary to the specified grids in X and Y directions, respectively. <br />
<a id="pgfId-1098008"></a>When the creation method for PR boundary is <em>Rectangle</em>, both the edges on the X and Y axis are snapped. However, when the creation method for PR boundary is <em>Polygon</em>, all points are snapped. When the creation method for PR boundary is <em>From Selected Set</em> and the <em>Rectilinear</em> option is not selected, the bounding box is snapped. <br />
<a id="pgfId-1098169"></a>During creation, only the outer edges of the rectilinear PR boundary snaps to the grids. During stretch, all the selected edges, inner or outer, of the rectilinear PR boundary snap to the grid.<br />
<a id="pgfId-1097778"></a>For editing command, the PR boundary snaps with the snap boundary as reference, if <code>dbGetGlobalGridOffsetReferenceType(cv)</code> is specified as <code>boundary</code>. If the <code>drdEditSmartSnapAllowedWidthSnap</code> environment variable is specified and the placement grid is present in the design, these settings are prioritized for snapping.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1093015"></a>The PR boundary snaps to the global grid irrespective of global grid offset reference being set to boundary or origin.</div></li><li>
<a id="pgfId-1071248"></a>Anchoring by Origin Axis: If a PR boundary, snap boundary, or a drawn shape on LPP is not found, then the global grid is anchored to the origin axis.<br />
<a id="pgfId-1071260"></a><div class="webflare-div-image">
<img width="635" height="410" src="images/leFinfet-18.gif" /></div></li></ul>



















<p>
<a id="pgfId-1072100"></a>Global snapping is done similar to local snapping. For more information, see <a href="leFinfet.html#67022">Snapping Objects</a>.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1086990"></a>When you move an object in a design, if the object overlaps the local snap pattern shape, then the object snaps to the local snap pattern shape. However, if no local snap pattern shape is found, then the object snaps to the global snap pattern grid.</div>

<h3>
<a id="pgfId-1088851"></a><a id="28495"></a>Commands Supporting Snap Pattern Snapping</h3>

<p>
<a id="pgfId-1088937"></a>Snap pattern snapping is supported in Create Rectangle, Create Instance, Create Via, Create Wire, Copy, Move, Stretch, Flip, Rotate, Yank and Paste, and Repeat Copy commands.</p>
<p>
<a id="pgfId-1091802"></a>You can enable the environment variable, <a href="appB.html#97929"><h-hot>snapResizeWireObjects</h-hot><code></code></a>, to snap, resize, and color all pathsegs and vias in the selection set during the Move and Copy commands. The pathsegs are snapped to the track by maintaining the relative spacing between them. The connectivity of pathsegs and vias is also maintained.</p>

<h2>
<a id="pgfId-1087014"></a><a id="18184"></a>Controlling the Display of Snap Patterns in Pa<a id="ff_SPPalette"></a>lette</h2>

<p>
<a id="pgfId-1078379"></a>You can control the visibility of snap patterns (local and global grids) through the <em>Grids</em> panel of the Palette assistant. The grid drawing style is controlled through the <em>Snap Pattern Display</em> field in the <a href="appA.html#38064">Display Options Form</a>. For more information on the <em>Snap Pattern Display</em> field, see <a href="leFinfet.html#30322">Controlling the Display of Snap Patterns</a>.</p>

<p>
<a id="pgfId-1077894"></a></p>
<div class="webflare-div-image">
<img width="359" height="367" src="images/leFinfet-19.gif" /></div>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1078120"></a>Starting with ICADV12.1 ISR10, the layerset file references snap pattern entries by the snap pattern Def name. In ICADV12.1 ISR9 and earlier releases, snap pattern entries were referenced by LPP name, instead of the snap pattern Def name. As a result, older layerset files that contain LPPs corresponding to these grids are not read correctly in ICADV12.1 ISR10 and later releases.</div>
<p>
<a id="pgfId-1086836"></a>The selections that you make in the <em>Layers</em>, <em>Objects</em>, and <em>Grids</em> panels of the Palette assistant control the visibility of the shape boundary and grid on the canvas. When the grid visibility is on, the shape boundary and grid is displayed irrespective of the LPP and shape visibility settings.</p>
<p>
<a id="pgfId-1080425"></a>The following table lists the options selected in the Palette assistant and the results displayed on the canvas.</p>

<p>
<a id="pgfId-1079130"></a></p>
<table class="webflareTable" id="#id1079054">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1079056">
<a id="pgfId-1079056"></a>LPP Visibility</span>
<span class="tbl-head" id="#id1079057">
<a id="pgfId-1079057"></a>(Layers Panel)</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1079059">
<a id="pgfId-1079059"></a>Shape Visibility</span>
<span class="tbl-head" id="#id1079060">
<a id="pgfId-1079060"></a>(Object Panel)</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1079062">
<a id="pgfId-1079062"></a>Grid Visibility</span>
<span class="tbl-head" id="#id1079063">
<a id="pgfId-1079063"></a>(Grids Panel)</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1079065">
<a id="pgfId-1079065"></a>Display on Canvas</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079067"></a>t</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079069"></a>t</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079071"></a>t</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079073"></a>Shape boundary + Grid</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079075"></a>t</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079077"></a>nil</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079079"></a>t</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079081"></a>Shape boundary + Grid</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079083"></a>nil</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079085"></a>nil</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079087"></a>t</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079089"></a>Shape boundary + Grid</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079091"></a>nil</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079093"></a>t</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079095"></a>t</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079097"></a>Shape boundary + Grid</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079099"></a>t</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079101"></a>t</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079103"></a>nil</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079105"></a>Shape boundary </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079107"></a>t</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079109"></a>nil</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079111"></a>nil</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079113"></a>Nothing</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079115"></a>nil</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079117"></a>nil</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079119"></a>nil</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079121"></a>Nothing</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079123"></a>nil</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079125"></a>t</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079127"></a>nil</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1079129"></a>Nothing</p>
</td>
</tr>
</tbody></table>
<h2>
<a id="pgfId-1079132"></a><a id="94499"></a>Modes for Object Placeme<a id="ff_ModesPlacement"></a>nt</h2>

<p>
<a id="pgfId-1082446"></a>In a FinFET based chip, all instances should be aligned to a fin grid, either to several independent local grids or to a global grid.</p>
<p>
<a id="pgfId-1082447"></a>For the placement of Pcells and small instances, placement is done by searching the instance master for fin grids. If no fin grids are found, snapping shapes are searched. This functionality is referred to as Detail Mode Placement. For more information, see <a href="leFinfet.html#18657">Instance Snapping</a>. Detail Mode Placement is suitable only for small blocks.</p>
<p>
<a id="pgfId-1082176"></a>For the placement of large blocks, it is not feasible to search the instance master for fin grids or snapping shapes. Instead, it is recommended that you use Abstract Mode Placement. In Abstract Mode Placement, an instance snaps to a global snap pattern grid using its snapBoundary or PRBoundary. If a snapBoundary or PRBoundary is not found, then the instance&#8217;s origin axis is used as the reference point for placement.</p>
<p>
<a id="pgfId-1078491"></a>Abstract Mode Placement allows fast placement of large layout blocks. For more information, see <a href="leFinfet.html#29613">Abstract Mode Placement</a>.</p>
<p>
<a id="pgfId-1078742"></a>There may be a situation when both Detail Mode and Abstract Mode Placements are not appropriate. One such example is when the design has a third-party IP block laid out in a different methodology. For such cases, you can use Manual Mode Placement Override. For more information, see <a href="leFinfet.html#62216">Manual Mode Placement Override</a>.</p>

<h3>
<a id="pgfId-1081129"></a><a id="82157"></a>Selecting Placement Mode<a id="ff_SelectPlacementMode"></a></h3>

<p>
<a id="pgfId-1081130"></a>You can switch between Detail and Abstract modes of instance placement using the <a href="appB.html#45319"><h-hot>snapPatternSnappingMode</h-hot><code></code></a> environment variable. </p>
<p>
<a id="pgfId-1081838"></a>To enable Detail Mode Placement, set the <code>snapPatternSnappingMode </code>environment variable as follows:</p>
<p>
<a id="pgfId-1081131"></a>envSetVal(&quot;layout&quot; &quot;snapPatternSnappingMode&quot; &#39;cyclic &#8220;detail&quot;)</p>
<p>
<a id="pgfId-1081830"></a>To enable Abstract Mode Placement, set the <code>snapPatternSnappingMode </code>environment variable as follows:</p>

<a id="pgfId-1081132"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
envSetVal(&quot;layout&quot; &quot;snapPatternSnappingMode&quot; &#39;cyclic &quot;abstract&quot;)</pre>
<h3>
<a id="pgfId-1081120"></a><a id="29613"></a>Abstract Mode Placemen<a id="ff_AbstractMode"></a>t</h3>

<p>
<a id="pgfId-1078805"></a>When Abstract Mode Placement is enabled and an instance is placed in the design window, Virtuoso does not search for the master for individual shapes. Instead, an instance snaps to a global snap pattern grid using its snapBoundary or PRBoundary. If no global grid is enabled, then there will be no instance snapping. </p>
<p>
<a id="pgfId-1079301"></a>The following figure depicts PRBoundary-based snapping to the global grid.</p>

<p>
<a id="pgfId-1079225"></a></p>
<div class="webflare-div-image">
<img width="656" height="571" src="images/leFinfet-20.gif" /></div>

<p>
<a id="pgfId-1078518"></a>The placement offset is taken as the offset defined in the snap pattern definition of the global snap pattern. If the master contains a snapBoundary, it is used for snapping. If no snapBoundary is found, then the PRBoundary is used for placement. Otherwise, the instance&#8217;s origin axis is used as the reference point for placement.</p>
<p>
<a id="pgfId-1078520"></a>The following figure shows the high-level flow diagram of instance snapping:</p>

<p>
<a id="pgfId-1079183"></a></p>
<div class="webflare-div-image">
<img width="532" height="404" src="images/leFinfet-21.gif" /></div>
<h3>
<a id="pgfId-1078521"></a><a id="62216"></a><a id="82183"></a>Manual Mode Placemen<a id="ff_ManualMode"></a>t Override</h3>

<p>
<a id="pgfId-1079860"></a>The Manual Mode Placement override is used in cases where a third-party IP block is used in a design. This mode enables you to manually specify the placement mode or offset on a per instance or master basis. This is done by setting the <code>leSnapPatternSnapping</code> property on either the instance or the master. If the <code>leSnapPatternSnapping </code>property is set on both the instance and its master, the instance definition overrides the master definition.</p>
<p>
<a id="pgfId-1079863"></a>The <code>leSnapPatternSnapping </code>string property can have the following values:</p>
<ul><li>
<a id="pgfId-1079865"></a>off: No automatic snapping</li><li>
<a id="pgfId-1079866"></a>detail: Force Detail Mode Placement</li><li>
<a id="pgfId-1079867"></a>abstract: Force Abstract Mode Placement</li><li>
<a id="pgfId-1079868"></a>1 number: Force Abstract Mode Placement with manual offset for either one or both directions along which snapping is performed</li><li>
<a id="pgfId-1079869"></a>2 numbers: Force Abstract Mode Placement with separate manual offsets<ul><li>
<a id="pgfId-1080101"></a>1st number is the vertical offset (for example, fin grid)</li><li>
<a id="pgfId-1080102"></a>2nd number is the horizontal offset (for example, poly grid)</li></ul></li></ul>







<h3>
<a id="pgfId-1093270"></a><a id="34567"></a>Create<a id="CreateCPA"></a> Custom Placement Area</h3>

<p>
<a id="pgfId-1093271"></a>Use this form to create a custom placement area. </p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1093274"></a>
When using the form to manually create a custom placement area in Layout XL or higher tiers, the custom placement area is automatically snapped to an appropriate grid depending on the state of the <a href="../vxlhelp/appA.html#snapCpaToPlacementGrid">snapCpaToPlacementGrid</a> environment variable. </div>

<ul><li>
<a id="pgfId-1093281"></a>Scenario 1: The <a href="../vxlhelp/appA.html#snapCpaToPlacementGrid">snapCpaToPlacementGrid</a> environment variable is set to <code>nil</code>. <br />
<a id="pgfId-1093285"></a>When the <a href="../vxlhelp/appA.html#snapCpaToPlacementGrid">snapCpaToPlacementGrid</a> environment variable is set to <code>nil</code>, which is the default state of the environment variable, the custom placement area is snapped to the X Snap and Y Snap spacing, provided the following conditions are fulfilled:<ol><li>
<a id="pgfId-1093286"></a>X Snap and Y Snap spacing are multiples of the manufacturing grid, and</li><li>
<a id="pgfId-1093287"></a>Both, X Snap and Y Snap spacing are equal to or greater than the manufacturing grid.</li></ol><br />
<a id="pgfId-1093288"></a>If either of the snapping conditions is not met, the custom placement area is snapped to the manufacturing grid.</li><li>
<a id="pgfId-1093292"></a>Scenario 2: The <a href="../vxlhelp/appA.html#snapCpaToPlacementGrid">snapCpaToPlacementGrid</a> environment variable is set to <code>t</code>.<br />
<a id="pgfId-1093296"></a>When the <a href="../vxlhelp/appA.html#snapCpaToPlacementGrid">snapCpaToPlacementGrid</a> environment variable is set to <code>t</code>, the custom placement area is snapped to the placement grid. If the placement grid is unavailable, the conditions for snapping to the X/Y spacing are verified. If both the conditions are fulfilled, the placement area is snapped to the X-snap and Y-snap spacing. Else, the placement area is snapped to the manufacturing grid.</li></ul>









<h3>
<a id="pgfId-1096975"></a><a id="53388"></a>Snapping for singleTrackCenter Snap Mode</h3>

<p>
<a id="pgfId-1097079"></a>The sections below describe the snapping behavior for layers with <code>singleTrackCenter </code>snapping mode. The snapping modes are specified in the <code>snappingMode</code> argument of the <code>snapPatternDefs</code> as describe in the <h-hot><a actuate="user" class="URL" href="../ascitechfile/chap4.html#ff_snapPatternDefs" show="replace" xml:link="simple">snapPatternDefs</a></h-hot> section.</p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1096976"></a>
<code>singleTrackCenter</code> snapping is performed only for global grids.</div>

<p>
<a id="pgfId-1096981"></a>When the <code>singleTrackCenter</code> attribute is specified for a layer, a shape is snapped to global grid only if it can be centered on a single track while meeting enclosure rule on both sides. This means that a shape would snap to the global grid only if its dimension is twice the <code>trackEnclosure</code> value. In this case, combined snapping layer BBox is not considered. If the device contains any shape meeting the dimension rule, the shape is snapped even if the combined layer BBox does not meet the enclosure on both sides.</p>

<h4>
<a id="pgfId-1096982"></a>Enhancements to the Create Rectangle Command</h4>

<p>
<a id="pgfId-1096983"></a>In the Create Rectangle command, both the points are snapped to the grid by applying negative enclosure for the lower edge and positive enclosure for the upper edge of the rectangle. While drawing rectangles on LPPs with <code>singleTrackCenter</code> attribute, the points are snapped with respect to the same track, this restricting the dimension to twice the enclosure value.</p>
<p>
<a id="pgfId-1096984"></a>In addition, you can now disable snapping while drawing rectangles using a special mode enabled using the <code>Shift</code> key.</p>

<h4><em>
<a id="pgfId-1096985"></a>Creating a Rectangle of Single Track Height</em></h4>

<p>
<a id="pgfId-1096986"></a>To create a rectangle of single track height, start the Create Rectangle command without pressing the <code>Shift</code> key. The first point of the rectangle is snapped according to the enclosure value. For vertical grids, the height of the rectangle is fixed after the first point is entered and the mouse can only be moved in the X-direction. Similarly, for horizontal grids, the width of the rectangle is fixed after the first point is entered, and the mouse can only be moved in the Y-direction.</p>

<p>
<a id="pgfId-1096995"></a></p>
<div class="webflare-div-image">
<img width="656" height="234" src="images/leFinfet-22.gif" /></div>
<h4><em>
<a id="pgfId-1096996"></a>Creating a Rectangle of Arbitrary Height with First Point Snapped</em></h4>

<p>
<a id="pgfId-1096997"></a>To create a rectangle of arbitrary height with the first point snapped, start the Create Rectangle command. The first point is snapped according to the enclosure value. Press the <code>Shift</code> key during mouse drag to disable snapping for the second point. A rectangle of arbitrary height is created.</p>

<p>
<a id="pgfId-1097006"></a></p>
<div class="webflare-div-image">
<img width="656" height="230" src="images/leFinfet-23.gif" /></div>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1097007"></a>If the <code>allowedWidthRanges</code> constraint is specified for the LPP, the height of the rectangle is a multiple of the discrete width specified. If this constraint is not specified, a rectangle of arbitrary height is created.</div>
<p>
<a id="pgfId-1097008"></a>Creating a Rectangle of Arbitrary Height without Snapping</p>
<p>
<a id="pgfId-1097009"></a>To create a rectangle of arbitrary height without snapping, start the Create Rectangle command. Press the <code>Shift</code> key during mouse drag to disable snapping for the first point. The second point of the rectangle will also not be snapped. A rectangle of arbitrary height is created.</p>

<p>
<a id="pgfId-1097018"></a></p>
<div class="webflare-div-image">
<img width="656" height="232" src="images/leFinfet-24.gif" /></div>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1097019"></a>If the <code>allowedWidthRanges</code> constraint is specified for the LPP, the height of the rectangle is a multiple of the discrete width specified. If this constraint is not specified, a rectangle of arbitrary height is created.</div>

<h3>
<a id="pgfId-1097020"></a>Snapping for Edit Commands</h3>
<h4>
<a id="pgfId-1097021"></a>Shape Snapping</h4>

<p>
<a id="pgfId-1097022"></a>For edit commands, if a shape is on the snapping LPP with the <code>singleTrackCenter</code> snapping mode, snapping is performed only if the height or width (depending on the grid direction) of the shape is equal to twice the enclosure value. For other cases, snapping is disabled.</p>
<p>
<a id="pgfId-1097023"></a>For shapes on a snapping LPP with the <code>singleTrackCenter</code> snapping mode, the value specified in the <code>checkAllSPGridsEnclosures</code> environment variable is ignored and the shape dimensions are verified in all cases.</p>

<h4>
<a id="pgfId-1097024"></a>Instance Snapping</h4>

<p>
<a id="pgfId-1097025"></a>The <code>singleTrackCenter</code> layer purpose pairs (LPPs) in the instance master have a higher precedence than <code>multiTrackCenter </code>LPPs. If there is a shape on the <code>singleTrackCenter </code>LPP in the master, the shapes on <code>multiTrackCenter</code> LPPs are not snapped. The <code>multiTrackCenter </code>LPPs are snapped only when there are no shapes on any of the <code>singleTrackCenter</code> LPPs. Snapping is not performed in a direction if shapes exist on the <code>singleTrackCenter </code>LPP, but no shape meets the dimension rule.</p>
<p>
<a id="pgfId-1097026"></a>In case of <code>singleTrackCenter</code> LPPs, individual shapes inside the master are snapped instead of the combined bounding box which is used for <code>multiTrackCenter </code>LPPs<code>.</code>A shape on <code>singleTrackCenter</code> LPP is snapped only if dimension rule (twice the grid enclosure) is met. In case of multiple <code>singleTrackCenter</code> LPPs, all the <code>singleTrackCenter</code> LPPs are examined until a shape meeting the dimension rule is found. If all the shapes on the <code>singleTrackCenter</code> LPP violate the dimension rule, snapping is not performed in that direction.</p>

<h3>
<a id="pgfId-1097027"></a>Support for the exceptOverlap Attribute</h3>
<p>
<a id="pgfId-1097028"></a>When <code>exceptOverlap </code>attribute is specified for a snapping LPP, the shapes on this LPP do not snap if they completely lie inside the shapes on <code>exceptOverlap</code> LPP. In case of partial overlap, snapping does take place. This attribute can be specified for both <code>singleTrackCenter and multiTrackCenter LPPs.</code></p>

<p>
<a id="pgfId-1097029"></a>For <code>singleTrackCenter</code> LPP, if a shape meeting dimension rule is found:</p>
<ul><li>
<a id="pgfId-1097030"></a>If it does not completely overlap any shape on the <code>exceptOverlap</code> LPP, it is snapped to the grid.</li><li>
<a id="pgfId-1097031"></a>If it completely overlaps any <code>exceptOverlap</code> LPP shape, the shape is ignored for snapping</li></ul>

<p>
<a id="pgfId-1097032"></a>If all the shapes on <code>singleTrackCenter </code>LPP violate the dimension rule or completely overlap <code>exceptOverlap </code>LPP, snapping is not performed in this direction.</p>
<p>
<a id="pgfId-1097033"></a>For <code>multiTrackCenter </code>LPP, snapping is performed only if the combined bounding box of shapes does not completely overlap any shape on the <code>exceptOverlap</code> LPP.</p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="chap14.html" id="prev" title="Dialog Box Messages">Dialog Box Messages</a></em></b><b><em><a href="leWSP.html" id="nex" title="Width Spacing Pattern Support in Layout Editing">Width Spacing Pattern Support  ...</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>