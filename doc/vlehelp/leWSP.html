
<html><head><title>Width Spacing Pattern Support in Layout Editing</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="komal" />
<meta name="CreateDate" content="2020-09-18" />
<meta name="CreateTime" content="1600420475" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes how to use the Virtuoso Layout Suite XL layout editor." />
<meta name="DocTitle" content="Virtuoso Layout Suite XL: Basic Editing User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Width Spacing Pattern Support in Layout Editing" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="vlehelp" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-09-18" />
<meta name="ModifiedTime" content="1600420475" />
<meta name="NextFile" content="appA.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="leFinfet.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Layout Suite XL: Basic Editing User Guide -- Width Spacing Pattern Support in Layout Editing" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="vlehelpICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="vlehelpTOC.html">Contents</a></li><li><a class="prev" href="leFinfet.html" title="FinFET Support in Layout Editor">FinFET Support in Layout Edito ...</a></li><li style="float: right;"><a class="viewPrint" href="vlehelp.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="appA.html" title="Layout Editor Forms">Layout Editor Forms</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Layout Suite XL: Basic Editing User Guide<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>16
<a id="pgfId-1066321"></a></h1>
<h1>
<a id="pgfId-1109893"></a><hr />
<a id="85364"></a>Width Spacing Pattern Support in Layout Editing<hr />
</h1>

<p>
<a id="pgfId-1109895"></a><a id="wsp_widthSpacingPatterns"></a>This chapter includes the following topics:</p>
<ul><li>
<a id="pgfId-1100970"></a><a href="leWSP.html#70040">Overview</a><ul><li>
<a id="pgfId-1086003"></a><a href="leWSP.html#81137">Controlling the Display of Width Spacing Patterns</a></li></ul></li><li>
<a id="pgfId-1097179"></a><a href="leWSP.html#50062">Snapping Behavior of Objects in Width Spacing Patterns</a><ul><li>
<a id="pgfId-1097472"></a><a href="leWSP.html#70672">Pin Snapping</a></li><li>
<a id="pgfId-1097513"></a><a href="leWSP.html#85351">Region Shape Snapping</a></li><li>
<a id="pgfId-1103696"></a><a href="leWSP.html#81682">Region Group Snapping</a></li><li>
<a id="pgfId-1097535"></a><a href="leWSP.html#82669">Instance Snapping: Abstract Mode Placement</a></li></ul></li><li>
<a id="pgfId-1071569"></a><a href="leWSP.html#46719">Enhancements in Editing Commands</a></li><li>
<a id="pgfId-1097563"></a><a href="leWSP.html#80788">Enhancements in Create Commands</a><ul><li>
<a id="pgfId-1097596"></a><a href="leWSP.html#10804">Creating Pins</a></li></ul></li><li>
<a id="pgfId-1097960"></a><a href="leWSP.html#18464">Display Enhancements for WSP</a><ul><li>
<a id="pgfId-1097969"></a><a href="leWSP.html#90133">Support for Alpha Blending</a></li><li>
<a id="pgfId-1097980"></a><a href="leWSP.html#71879">Support for Filtering Tracks</a></li></ul></li><li>
<a id="pgfId-1106980"></a><a href="leWSP.html#14597">Interactive Snapping</a></li><li>
<a id="pgfId-1110698"></a><a href="leWSP.html#29491">Interactively Setting Color on a Selected Object</a></li></ul>















<h2>
<a id="pgfId-1086510"></a><a id="70040"></a>Overview</h2>

<p>
<a id="pgfId-1104575"></a>Virtuoso has been enhanced to support snapPatternDefs called <h-hot>widthSpacingSnapPatternDefs</h-hot>. The width spacing pattern (WSP) definitions are stored in the technology database. A WSP is a sequence of width and spacing values that define the track patterns to which the shapes in a design are aligned. WSP is an advanced form of the snapPatternDef that can have multiple width and space combinations.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1099441"></a><code>widthSpacingSnapPatternDef</code> are available both in the technology database and the design.</div>
<p>
<a id="pgfId-1099442"></a>The figure below illustrates that each width spacing pattern is a sequence of width-space pairs. Patterns are specified as width and space pairs. Groups of width and space pairs can be repeated. The first track of the pattern is anchored to the period grid using an offset.</p>

<p>
<a id="pgfId-1090799"></a></p>
<div class="webflare-div-image">
<img width="667" height="298" src="images/leWSP-2.gif" /></div>
<h3>
<a id="pgfId-1088378"></a><a id="81137"></a>Controlling the Display of Width Spacing Patterns<a id="wsp_ControlDisplaySP"></a></h3>

<p>
<a id="pgfId-1087991"></a>The layout editor has been enhanced to visualize the width spacing patterns. You can control the display of width spacing patterns through the Display Options form or Palette assistant.</p>

<h4>
<a id="pgfId-1087976"></a>Display Options Form</h4>

<p>
<a id="pgfId-1087578"></a>You can control the display of width spacing patterns using the <em>Snap Pattern Display</em> option in the Display Options form. In addition to boundary and tracks, you can now display periods for WSPs.</p>

<ol><li>
<a id="pgfId-1087580"></a>Choose <em>Options &#8211; Display</em>.<br />
<a id="pgfId-1087581"></a>The Display Options form opens.<br />
<a id="pgfId-1087586"></a><div class="webflare-div-image">
<img width="635" height="120" src="images/leWSP-3.gif" /></div></li><li>
<a id="pgfId-1087587"></a>Select one of the following from the <em>Snap Pattern Display</em> list:<ul><li>
<a id="pgfId-1087588"></a><em>Full</em>: Displays the snap pattern (SP) boundary, tracks, fins, and width spacing patterns periods.</li><li>
<a id="pgfId-1087589"></a><em>Tracks</em>: Displays the snap pattern boundary and tracks.</li><li>
<a id="pgfId-1087590"></a><em>Boundary</em>: Displays only the snap pattern boundary.</li><li>
<a id="pgfId-1098943"></a><em>Periods</em>: Displays only the width spacing pattern periods.</li><li>
<a id="pgfId-1115533"></a><em>Periods and Tracks</em>: displays the width spacing patterns periods and snap pattern tracks.<br /><ffi2-fig-frame-in-2 id="#id1090834">
<a id="pgfId-1090834"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img width="604" height="498" src="images/leWSP-4.gif" /></div></li></ul></li><li>
<a id="pgfId-1087607"></a>Click <em>OK</em>.<br /><div class="webflare-information-macro webflare-macro-tip">
<a id="pgfId-1087609"></a>
You can use the<code> leCycleSnapPatternDisplay</code> SKILL function to cycle through the different snap pattern display types. You set the default value using the new <a href="appB.html#17321">snapPatternDrawingStyle</a> environment variable.</div></li></ol>

















<h4>
<a id="pgfId-1087816"></a>Pa<a id="wsp_WSPPalette"></a>lette Assistant</h4>

<p>
<a id="pgfId-1092915"></a>You can control the visibility of snap patterns (Local Grids, Global Grids, and Width Spacing Grids) through the <em>Grids</em> panel of the Palette assistant.</p>

<p>
<a id="pgfId-1092947"></a><a id="_Toc386399261"></a></p>
<div class="webflare-div-image">
<img width="668" height="446" src="images/leWSP-6.gif" /></div>

<p>
<a id="pgfId-1104699"></a>The layerset file references snap pattern entries by the snap pattern Def name. For example, the local grid named <em>fbd46</em> and WSP grid named <em>M5WSP</em>, shown in the figure above, are listed as follows in the layerset file:</p>
<p class="webflare-indent1">
<a id="pgfId-1104700"></a><code>GridLayer Local_Grids;fb46 t NA</code></p>
<p class="webflare-indent1">
<a id="pgfId-1104701"></a><code>GridLayer Width_Spacing_Grids;M5WSP t NA</code></p>

<h4><em>
<a id="pgfId-1108596"></a>Grids Panel</em></h4>

<p>
<a id="pgfId-1108597"></a>The visibility settings of WSP grids are cellview specific. Therefore, if you have two different cellviews open and you modify the visibility setting of a WSP grid in one cellview, the visibility setting of this WSP grid is not affected in the other cellview.</p>
<p>
<a id="pgfId-1108598"></a>In the example shown below, you can see that the visibility settings of WSP grids in the two open cellviews are identical.</p>

<p>
<a id="pgfId-1108608"></a></p>
<div class="webflare-div-image">
<img width="668" height="533" src="images/leWSP-7.gif" /></div>

<p>
<a id="pgfId-1108609"></a>If you now turn off the visibility of WSP grid <em>M4WSP</em> in cellview <code>even_odd</code>, you will find that the visibility setting of WSP grid <em>M4WSP</em> in cellview <code>inst_snapping</code> remains unchanged. </p>

<p>
<a id="pgfId-1108622"></a></p>
<div class="webflare-div-image">
<img width="668" height="569" src="images/leWSP-8.gif" /></div>

<p>
<a id="pgfId-1108698"></a>However, while editing a cellview, if you run the <em>Edit In Place</em> command or descend into a different cellview, the visibility settings of WSP grids are refreshed to reflect the settings for the cellview being edited, as shown in the example below.</p>

<p>
<a id="pgfId-1108713"></a></p>
<div class="webflare-div-image">
<img width="668" height="637" src="images/leWSP-9.gif" /></div>
<h2>
<a id="pgfId-1092949"></a><a id="50062"></a>Snapping Behavior of Objects in Width Spacing Patterns<a id="wsp_snappingWSP"></a></h2>
<h3>
<a id="pgfId-1092932"></a><a id="70672"></a>Pin Snapping<a id="wsp_pinSnapping"></a></h3>

<p>
<a id="pgfId-1088476"></a>A pin that has the snapping LPP that cannot be snapped to a snap pattern will be snapped to a width spacing pattern. A pin will either snap to a snap pattern or a width spacing pattern, but not both.</p>
<p>
<a id="pgfId-1088466"></a>If a pin shape can be snapped to a snap pattern, there will be no change in behavior. Otherwise, it will try to snap to WSP. WSP snapping is only supported for rectangular and not polygon pins. The center of the pin is snapped to the center of the closest track.</p>
<p>
<a id="pgfId-1088498"></a>For snapping a pin to a WSP region shape, the applied pattern is considered; and for a global WSP, the default active pattern is considered.</p>
<p>
<a id="pgfId-1107742"></a>If the target track width is greater than the pin width, the pin width is updated to match the track width. However, if the track width is less than the pin width, the pin is updated based on the value of the <code>minWidth</code> constraint defined in the technology file.</p>

<p>
<a id="pgfId-1116689"></a></p>
<div class="webflare-div-image">
<img width="669" height="242" src="images/leWSP-10.gif" /></div>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1116760"></a>A pin inside an instance matches a WSP track if its width and mask color match that of the WSP track.</div>

<h3>
<a id="pgfId-1108810"></a>Pin Snapping for Overlapping Regions<a id="wsp_pinSnappingOverlap"></a></h3>

<p>
<a id="pgfId-1107787"></a>There regions can be multiple overlapping regions and the snapping behavior is described below:</p>
<ul><li>
<a id="pgfId-1107789"></a><strong>Region R1 partially overlaps another region R2</strong><br />
<a id="pgfId-1107790"></a>The region R1 has <code>WSP1</code> as the active pattern and the region R2 has <code>WSP2</code> as the active pattern. The overlap area of the two regions does not have any pattern available and displays a blank area. Also, a pin cannot be snapped inside the overlapping area. <br />
<a id="pgfId-1107798"></a><div class="webflare-div-image">
<img width="631" height="295" src="images/leWSP-11.gif" /></div></li><li>
<a id="pgfId-1107799"></a><strong>Two regions with the same size overlap each other</strong><br />
<a id="pgfId-1107800"></a>The two regions R1 and R2 have the same size. The region R1 has <code>WSP1</code> as the active pattern and the region R2 has <code>WSP2</code> as the active pattern. In this case, no snapping is possible inside the overlapping region and pins cannot be created inside this region.<br />
<a id="pgfId-1107808"></a><div class="webflare-div-image">
<img width="631" height="289" src="images/leWSP-12.gif" /></div></li><li>
<a id="pgfId-1107819"></a><strong>Region R1 is fully enclosed in another region R2 </strong></li><li>
<a id="pgfId-1108362"></a>Region R1 has <code>2xWidth</code> as the active pattern and region R2 has <code>WSP1</code> as the active pattern. The tracks in the innermost region are effective for pin snapping. The tracks of R1 are used for snapping pins in the overlapping area and in the remaining area the tracks of R2 are used for snapping.<br />
<a id="pgfId-1116980"></a><div class="webflare-div-image">
<img width="631" height="431" src="images/leWSP-13.gif" /></div></li></ul>

















<p>
<a id="pgfId-1117304"></a>In WSP detail mode snapping, if your design has pins, they are used for snapping. However, if pins are not available in the design, rectangles, pathSegs, two-point paths, and rectangular polygons are used for snapping.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1117597"></a>If the <a href="appB.html#62087">snapRectToWSPGrid</a> environment variable is set, rectangles snap to the WSP grid, similar to pins.</div>

<h3>
<a id="pgfId-1103513"></a><a id="85351"></a>Region Shape Snapping<a id="wsp_regionShapeSnapping"></a></h3>

<p>
<a id="pgfId-1103544"></a>A region is any shape drawn on a WSP LPP. The region&#8217;s <code>widthSpacingSnapPatternDef </code>may or may not be defined as part of the global WSP grids. You can create a region shape on a non-global WSP grid with a period different than the period of the global grid. </p>

<p>
<a id="pgfId-1103552"></a></p>
<div class="webflare-div-image">
<img width="669" height="342" src="images/leWSP-14.gif" /></div>

<p>
<a id="pgfId-1103553"></a>The snapping LPP of the region&#8217;s <code>widthSpacingSnapPatternDef</code> is used to find the global WSP grid to which the region shape snaps. If there are multiple global grids to which the snapping layers of region <code>widthSpacingSnapPatternDef</code> can snap, the region is snapped to the first matching global grid. </p>
<p>
<a id="pgfId-1103554"></a>For vertical WSPs, the region shape is snapped along the x-direction. For horizontal WSPs, the region shape is snapped along the y-direction. </p>
<p>
<a id="pgfId-1103555"></a>Region snapping is supported only for rectangles and polygons. If the WSP LPP is also the snapping LPP of a <code>snapPatternDef</code>, the region shape is snapped only to the WSP grid.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1103556"></a>You can define the WSP grids in the technology file, or you can draw them in the design.</div>

<h3>
<a id="pgfId-1103600"></a><a id="81682"></a>Region Group Snapping</h3>

<p>
<a id="pgfId-1103601"></a>A region group is an <code>oaFigGroup</code> that contains only WSP region shapes or snap pattern shapes. In other words, the LPP of each shape in the <code>oaFigGroup</code> has a <code>snapPatternDef</code> or <code>widthSpacingSnapPatternDef</code>. </p>
<p>
<a id="pgfId-1103602"></a>The reference region shapes along each direction are determined based on the region with the largest period of the snapping <code>widthSpacingSnapPatternDef</code>, and are snapped similar to <a href="leWSP.html#85351">Region Shape Snapping</a>. If there is no region along a direction in the group, then snapping does not occur along that direction.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1103606"></a>If a region group contains both WSPs and SPs, WSP snapping takes precedence over SP.</div>

<h3>
<a id="pgfId-1104078"></a><a id="82669"></a>Instance Snapping: Abstract Mode Placement<a id="wsp_instanceSnapping"></a></h3>

<p>
<a id="pgfId-1104079"></a>Th abstract mode placement allows fast placement of large layout blocks. The WSP default abstract mode placement is performed in the following cases:</p>
<ul><li style="list-style-type: none;background-image: none;"><ul><li>
<a id="pgfId-1104080"></a>If the <code>leSnapPatternSnappingVerticalGrid</code> or <code>leSnapPatternSnappingHorizontalGrid</code> properties are not specified.</li><li>
<a id="pgfId-1104057"></a>If the<code> </code><a href="appB.html#45319">snapPatternSnappingMode</a> environment variable is not set to abstract.</li><li>
<a id="pgfId-1104058"></a>If the <code>leSnapPatternSnapping</code> property has not been specified.</li></ul></li></ul>


<p>
<a id="pgfId-1104059"></a>In the above cases, the steps used to snap to the default WSP grid in either direction are as follows:</p>
<ul><li style="list-style-type: none;background-image: none;"><ul><li>
<a id="pgfId-1104060"></a>The largest period is identified.</li><li>
<a id="pgfId-1104061"></a>For the matching period, the definition with the highest mask number snapping layer is identified.</li><li>
<a id="pgfId-1104062"></a>In case there are multiple definitions on a snapping layer with the largest period, sorting is done based on the definition names.</li><li>
<a id="pgfId-1104063"></a>If no WSP is found along a given direction, the SP global grid is used for abstract mode placement.</li></ul></li></ul>



<p>
<a id="pgfId-1104043"></a>An advanced scenario when abstract mode placement is performed for WSPs is described below:</p>
<ul><li>
<a id="pgfId-1103632"></a>If you specify the <code>leSnapPatternSnappingVerticalGrid</code> or <code>leSnapPatternSnappingHorizontalGrid</code> property.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1103633"></a>The offset overrides can be specified for WSP abstract mode snapping using the <code>leSnapPatternSnapping</code> property only if one of the properties, <code>leSnapPatternSnappingVerticalGrid</code> or <code>leSnapPatternSnappingHorizontalGrid</code>, has been set. If you do not specify <code>leSnapPatternSnappingVerticalGrid</code> or <code>leSnapPatternSnappingHorizontalGrid</code> and only specify the offset overrides using the <code>leSnapPatternSnapping</code> property, the largest grid in the constraint in either direction is considered for snapping. It is assumed that you want to specify an offset override only when you override the grid.</div>
<a id="pgfId-1103634"></a>In this case, the grid that you have specified is accepted without any further check. If <code>leSnapPatternSnapping</code> property has an offset override, it is applied based on the existing rules that apply to the <code>leSnapPatternSnapping </code>property. If only one direction grid has been specified, the other grid is determined based on the default algorithm.</li></ul>


<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1118098"></a>When <code>leSnapGridHorizontal</code> and <code>leSnapGridVertical</code> abstract override properties have been specified, the object closest to pointer is used as the reference object for snapping. However, in case of modgens, the object that has the abstract override properties specified is used as the reference object for snapping.</div>

<h2>
<a id="pgfId-1092393"></a><a id="46719"></a>Enhancements in Editing Commands<a id="wsp_editingCommands"></a></h2>

<p>
<a id="pgfId-1107367"></a>The <code>Move</code>, <code>Copy</code>, and <code>Stretch</code> commands have been enhanced to support snapping for WSP LPPs. If the selected set has multiple objects, the object closest to the reference point is snapped and all the objects in the selected set are moved by the same transform to maintain their relative spacing. The snapping object, closest to the pointer, in the selected set is the reference. In case there are multiple shapes closest to the pointer, the shape with the higher mask number takes precedence. If there is no shape closest to the pointer, the precedence that is followed is the closest instance, row, boundary, and then blockage.</p>
<p>
<a id="pgfId-1109623"></a>As illustrated in the figure below, in case multiple objects are selected, this reference object is highlighted on the canvas.</p>

<p>
<a id="pgfId-1107382"></a></p>
<div class="webflare-div-image">
<img width="669" height="383" src="images/leWSP-15.gif" /></div>

<p>
<a id="pgfId-1109548"></a>The object is snapped depending on its type (pin, region, or instance). For more information, see <a href="leWSP.html#50062">Snapping Behavior of Objects in Width Spacing Patterns</a>. The pointer is snapped to the snapping grid as you move the mouse. It gives a visual indication of how the objects will be placed after the editing command is complete.</p>
<p>
<a id="pgfId-1108281"></a>For <code>Move</code> and <code>Copy</code> commands, the selected pathseg will be resized if no other object is selected and the Wire Snapping option, in the Layout Editor Options form, is set to <em>Snap Pattern</em>.</p>
<p>
<a id="pgfId-1108927"></a>For <code>Stretch</code> of partially selected objects, the selected edge is snapped to the snapping grid. The edges that are not selected are not modified and these edges could be off-grid.</p>
<p>
<a id="pgfId-1108535"></a>For <code>Chop</code> and <code>Yank</code> commands, the WSP-specific information (like definition name) present on the region shape is preserved.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1112371"></a>For <code>Move</code> and <code>Copy</code> commands, reference pathseg and vias are resized interactively according to the track width.</div>

<h2>
<a id="pgfId-1090406"></a><a id="80788"></a>Enhancements in Create Commands<a id="wsp_creatingCommands"></a></h2>
<h3>
<a id="pgfId-1090363"></a><a id="75674"></a><a id="10804"></a>Creating Pins<a id="wsp_creatingPins"></a></h3>

<p>
<a id="pgfId-1093107"></a>A pin shape snaps to the snap patterns of the LPP on which the pin is being created or edited.</p>
<p>
<a id="pgfId-1099171"></a>If the snap pattern is a <code>snapPatternDef</code>, the pin shape is snapped based on the width magnet parameters. If the snap pattern is <code>widthSpacingSnapPatternDef</code>, the pin shape is snapped to the default active pattern available in the region. When you create a pin shape on a pattern, the height of the pin shape is always equal to the track pattern width. By default, a rectangular pin is created where the height of the pin is equal to the track width. You can enable the square pin creation mode using the environment variable <a href="appB.html#48201">rectangularWSPPinAsSquare</a>. In the square pin creation mode, the width of the pin is fixed by the track width. The length of the pin is also fixed by the track width. A square pin can be created on a WSP track with a single click. This mode is useful when you want to pre-fill net names in the Create Pin form. The square pins can be placed quickly, one pin per click.</p>

<p>
<a id="pgfId-1102389"></a>The figure below illustrates how a pin is snapped to a <code>snapPatternDef</code>.</p>
<p>
<a id="pgfId-1102394"></a></p>
<div class="webflare-div-image">
<img width="550" height="250" src="images/leWSP-16.gif" /></div>

<p>
<a id="pgfId-1102644"></a></p>
<p>
<a id="pgfId-1102645"></a>The figure below illustrates how a pin is snapped to a <code>widthSpacingSnapPatternDef.</code> </p>

<p>
<a id="pgfId-1102713"></a></p>
<div class="webflare-div-image">
<img width="659" height="205" src="images/leWSP-17.gif" /></div>

<p>
<a id="pgfId-1102679"></a>The precendence that is followed for pin shape snapping is described below:</p>
<ul><li>
<a id="pgfId-1102680"></a>Local grid (<code>snapPattern</code> followed by <code>widthSpacingSnapPattern</code>) available bound to shape:<ul><li>
<a id="pgfId-1092218"></a>If the shape is bound to a WSP, the default active pattern applicable to corresponding WSSPD is applicable for pin shape snapping.</li></ul></li><li>
<a id="pgfId-1101701"></a>Global grid (<code>snapPattern</code> followed by <code>widthSpacingSnapPattern</code>) available for pin LPP.</li><li>
<a id="pgfId-1101702"></a>If local or global grid is not found, the pin shape is snapped to the X or Ysnap spacing grids.</li></ul>



<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1098210"></a>The <code>minWidth</code> constraint defined in the technology file needs to be met for pin snapping. If the pin width is less than the <code>minWidth</code> constraint, the next track is searched.</div>

<h4>
<a id="pgfId-1092973"></a>Dynamic Display in Pin Creation and Editing Commands</h4>

<p>
<a id="pgfId-1092974"></a>While running the pin creation and editing commands, the applicable WSP track is automatically displayed in the design so that you can visualize the available tracks and their width. This is important since WSP is so track centric.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1092975"></a>Dynamic display is visible while running the pin creation and editing commands, only when the <em>Snap Pattern Snapping</em> option is selected in the Layout Editor Options form and the reference object is snappable to the WSP grid.</div>
<p>
<a id="pgfId-1092977"></a>For the <code>Create Pin</code> command, the entry LPP is used in the dynamic display. In case you are editing an existing pin, the LPP of the pin is used in the dynamic display.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1092978"></a>When you are creating or editing a pin, the corresponding WSP grid is displayed even if the visibility of the grid is turned off from the <em>Grids</em> panel of the Palette assistant.</div>

<h2>
<a id="pgfId-1097748"></a><a id="34829"></a><a id="18464"></a>Display Enhancements for WSP<a id="wsp_displayEnhancements"></a></h2>
<h3>
<a id="pgfId-1106268"></a><a id="90133"></a>Support for Alpha Blending<a id="wsp_alphaBlending"></a></h3>

<p>
<a id="pgfId-1103754"></a>The alpha blending feature lets you control the transparency of tracks, FinFET/WSP shapes, regions, and Wire Editor tracks. </p>
<p>
<a id="pgfId-1103755"></a>You can control the transparency at different levels for the track fill or outline using the options available in the Transparency Options form or the <a href="leWSP.html#85986">Alpha Blending Environment Variables</a>.</p>

<ol><li>
<a id="pgfId-1103759"></a>Choose <em>Options &#8211; Transparency</em>.<br />
<a id="pgfId-1103771"></a>The <a href="appA.html#91593">Transparency Options Form</a> opens.<br />
<a id="pgfId-1103776"></a><div class="webflare-div-image">
<img width="631" height="468" src="images/leWSP-18.gif" /></div></li><li>
<a id="pgfId-1103777"></a>Select the <em>Transparency Enabled</em> check box to enable the transparency options in the form.</li><li>
<a id="pgfId-1103778"></a>You can specify the outline and fill values for <em>Tracks</em>, <em>FinFET/WSP Shapes</em>, <em>Regions</em>, and <em>Wire Editor Tracks</em> using the sliders. </li></ol>








<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1103779"></a>You can use the <em>Linked</em> check box to change the <em>Outline</em> and <em>Fill</em> values for <em>Tracks</em>, <em>FinFET/WSP Shapes</em>, <em>Regions</em>, or <em>Wire Editor Tracks </em>by tuning only one slider at a time. If you want to change the <em>Outline</em> and <em>Fill</em> values of , , , and  together by tuning only a single slider, select the check box.</div>

<h3>
<a id="pgfId-1105018"></a>Alpha Blending Environment Variables<a id="85986"></a><a id="wsp_alphablendingEnvVars"></a></h3>

<p>
<a id="pgfId-1103783"></a>You can also use the following environment variables to control the transparency at different levels for the track fill or outline:</p>
<ul><li>
<a id="pgfId-1095353"></a><a href="appB.html#59160">alphaBlendingBoundaryFillValue</a></li><li>
<a id="pgfId-1096465"></a><a href="appB.html#32935">alphaBlendingBoundaryHaloValue</a></li><li>
<a id="pgfId-1096503"></a><a href="appB.html#64470">alphaBlendingBoundaryOutLineValue</a></li><li>
<a id="pgfId-1096507"></a><a href="appB.html#12856">alphaBlendingFinFillValue</a></li><li>
<a id="pgfId-1096516"></a><a href="appB.html#24720">alphaBlendingFinHaloValue</a></li><li>
<a id="pgfId-1096526"></a><a href="appB.html#76311">alphaBlendingFinOutLineValue</a></li><li>
<a id="pgfId-1096537"></a><a href="appB.html#52795">alphaBlendingTrackFillValue</a></li><li>
<a id="pgfId-1096548"></a><a href="appB.html#81566">alphaBlendingTrackHaloValue</a></li><li>
<a id="pgfId-1096559"></a><a href="appB.html#67892">alphaBlendingTrackOutLineValue</a></li><li>
<a id="pgfId-1109408"></a><a href="appB.html#99534">useAlphaBlending</a></li></ul>










<h3>
<a id="pgfId-1109415"></a><a id="71879"></a>Support for Filtering Tracks<a id="wsp_trackFilters"></a></h3>

<p>
<a id="pgfId-1101365"></a>In Virtuoso, by default, all the tracks on a WSP snapping layer are active. You can activate only a subset of tracks. This is referred to as track filtering. Track filtering is based on the <code>wireType </code>for each WSP track. When a track is active, it is displayed and used for layout creation. When a track is inactive, it is not displayed and is, therefore, not used for layout creation.</p>
<p>
<a id="pgfId-1104846"></a>When a track filter is active, only active tracks are displayed. The track filter specifies a list of <code>wireType</code> names. A WSP track with a specified <code>wireType</code> is not displayed if its <code>wireType</code> is not in the list of filter <code>wireTypes</code>. WSP tracks with no specified <code>wireType</code> are displayed only if the empty string is included in the list of active wire types.</p>
<p>
<a id="pgfId-1104847"></a>For more information about track filters, see<h-hot> Filtering Tracks by Wire Type</h-hot>.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1109696"></a>When a track filter is active, pin editing is supported only for active tracks. Also, during pin creation, the pointer snaps to active tracks.</div>

<h2>
<a id="pgfId-1110074"></a><a id="14597"></a>Interactive Snapping</h2>

<p>
<a id="pgfId-1110088"></a>Layout editing has been enhanced to provide interactive snapping. This enables you to visualize how the object will be placed after snapping. During interactive snapping, the object which is snappable and is closest to the reference point is used as the reference object. The snapping transform is calculated for the reference object at every mouse movement and the pointer is adjusted to ensure that the reference object is snapped to the grid.</p>

<h3>
<a id="pgfId-1110101"></a>Interactive Snap Pattern Snapping: Create Rectangle</h3>

<p>
<a id="pgfId-1110182"></a>With the interactive snap pattern snapping enhancement for the Create Rectangle command, the first and the second points of the rectangle are snapped. The first point snaps to the upper enclosure and the second point snaps to the lower enclosure.</p>
<p>
<a id="pgfId-1110183"></a>If discrete dimension is enabled, snapping does not update the second point. The dimension of the created rectangle is based on the value of the <code>allowedWidthRanges</code> constraint is specified in the technology file.</p>
<p>
<a id="pgfId-1110184"></a>If discrete dimension is disabled, the second point discretely snaps by the step size of the snapping grid. The figure below depicts the snapping of the rectangle with the discrete dimension option enabled and disabled.</p>

<p>
<a id="pgfId-1110172"></a></p>
<div class="webflare-div-image">
<img width="601" height="366" src="images/leWSP-19.gif" /></div>
<h3>
<a id="pgfId-1110152"></a>Interactive Snap Pattern Snapping: Move and Copy Commands</h3>

<p>
<a id="pgfId-1110121"></a>When you move objects, snapping ensures that the bottom edge (vertical snapping) and left edge (horizontal snapping) of the reference object is snapped to the grid. The reference object moves by the step size of the snapping grid. The reference object snaps if the bottom edge of the shape is inside a snapping region even if the reference point goes outside it.</p>
<p>
<a id="pgfId-1110124"></a>If the reference object overlaps multiple snapping regions, it will snap to the region under the bottom edge of the shape.</p>
<p>
<a id="pgfId-1110125"></a>If the bottom edge of the reference object goes out of the snapping region then snapping is not performed even if some part of the shape overlaps the snapping region.</p>
<p>
<a id="pgfId-1110659"></a>The figure below depicts interactive snapping when moving objects.</p>

<p>
<a id="pgfId-1110126"></a></p>
<div class="webflare-div-image">
<img width="665" height="328" src="images/leWSP-20.gif" /></div>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1111362"></a>Interactive snapping for the Copy command works similar to the way it works for the Move command.</div>

<h3>
<a id="pgfId-1110113"></a>Interactive Snap Pattern Snapping: Stretch Command</h3>

<p>
<a id="pgfId-1110145"></a>When you stretch objects, snapping ensures that the bottom edge (vertical snapping) and left edge (horizontal snapping) of the reference object is snapped to the grid. The reference object stretches by the step size of the snapping grid. </p>
<p>
<a id="pgfId-1110817"></a>If discrete dimension is enabled and it adjusts the selected edge, snapping does not modify the edge. So, if the shape is off-grid before the Stretch command, it will remain off grid after the Stretch command also. If the discrete dimension option is disabled, snapping ensures that the edges of the shape are on grid after the Stretch command. This is depicted in the figure below.</p>

<p>
<a id="pgfId-1110886"></a></p>
<div class="webflare-div-image">
<img width="645" height="449" src="images/leWSP-21.gif" /></div>

<p>
<a id="pgfId-1110874"></a>If you stretch a partially selected edge, the selected edge is snapped to the grid. In this case, the bottom edge snaps to the lower enclosure and the top edge snaps to the upper enclosure of the track. </p>
<p>
<a id="pgfId-1110971"></a>When you stretch the top edge of the shape, it snaps to the grid till it is inside the snapping region. Snapping is not performed when the edge is out of the snapping region.</p>
<p>
<a id="pgfId-1111628"></a>In additon to the above commands, the instance is snapped interactively during Create Instance command with every mouse drag.</p>

<h2>
<a id="pgfId-1111632"></a><a id="29491"></a>Interactively Setting Color on a Selected Object<a id="wsp_InteractiveColor"></a></h2>
<h3>
<a id="pgfId-1109699"></a>Enhancements in the Property Editor</h3>

<p>
<a id="pgfId-1106133"></a>You can interactively set the color for the selected MPT shape objects and vias through the Property Editor and assistant. This eliminates the need of only using SKILL functions to change the color information for MPT shape objects and vias.</p>

<h4>
<a id="pgfId-1105343"></a>Setting Color on Shape Objects</h4>

<p>
<a id="pgfId-1105949"></a>For a selected MPT shape, you can modify the color and color state using the Property Editor and assistant. </p>
<p>
<a id="pgfId-1105358"></a>Use the <em>Color</em> and <em>State</em> fields in the MPT Coloring section on the <em>Attribute</em> tab of the Edit Shape Properties form to modify the color information.</p>

<p>
<a id="pgfId-1105371"></a></p>
<div class="webflare-div-image">
<img width="634" height="302" src="images/leWSP-22.gif" /></div>

<p>
<a id="pgfId-1105442"></a>Property Editor determines the available colors through the #Masks (number of masks) defined in the technology database. The table below summarizes the display colors based on the association between the #Masks found in the technology database and MPT Coloring section.</p>
<table class="webflareTable" id="#id1105504">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1105606">
<a id="pgfId-1105606"></a>#Masks</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1105608">
<a id="pgfId-1105608"></a>MPT Coloring Section</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1105610">
<a id="pgfId-1105610"></a>Available Colors</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1105612"></a>NoColor</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1105614"></a>Gray Out | Hidden</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1105616"></a>N/A</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1105618"></a>2</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1105620"></a>Enabled</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1105622"></a>grayColor | mask1Color | mask2Color</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1105624"></a>3</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1105626"></a>Enabled</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1105628"></a>grayColor | mask1Color | mask2Color | mask3Color</p>
</td>
</tr>
</tbody></table>
<p>
<a id="pgfId-1111759"></a>The values of the <em>State</em> field for the available colors are summarized in the table below:</p>
<table class="webflareTable" id="#id1105710">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1105747">
<a id="pgfId-1105747"></a>Color</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1105749">
<a id="pgfId-1105749"></a>Color State</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1105751"></a>grayColor</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1105753"></a>Gray Out | Hidden</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1105755"></a>mask1Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1105757"></a>unlock | lock</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1105759"></a>mask2Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1105761"></a>unlock | lock</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1105809"></a>mask3Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1105811"></a>unlock | lock</p>
</td>
</tr>
</tbody></table>
<p>
<a id="pgfId-1106695"></a>The default value of the <em>Color</em> field is defined by the <code>setDefaultColorOnMPTLayers</code> environment variable. The table below summarizes the default values of the <em>Color</em> and <em>State</em> fields in the Property Editor, based on the value of the <code>setDefaultColorOnMPTLayers</code> environment variable.</p>
<table class="webflareTable" id="#id1106696">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1106698">
<a id="pgfId-1106698"></a>setDefaultColorOnMPTLayers</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1106700">
<a id="pgfId-1106700"></a>Default Value: Color</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1106702">
<a id="pgfId-1106702"></a>Default Value: State</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106704"></a>grayColor</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106706"></a>grayColor</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106708"></a>unlock</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106710"></a>mask1Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106712"></a>mask1Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106714"></a>unlock</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106716"></a>mask2Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106718"></a>mask2Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106720"></a>unlock</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106722"></a>mask3Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106724"></a>mask3Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106726"></a>unlock</p>
</td>
</tr>
</tbody></table>
<p>
<a id="pgfId-1105433"></a>Setting Color on Vias</p>
<p>
<a id="pgfId-1105963"></a>For a selected via, you can modify the color using the MPT Coloring section of the Edit Via Properties form or the Property Editor assistant. You can set the colors for Layer1, CutLayer, and Layer2.</p>
<p>
<a id="pgfId-1105393"></a>The table below summarizes the MPT coloring fields that are available for the layers.</p>
<table class="webflareTable" id="#id1106037">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1106039">
<a id="pgfId-1106039"></a>Via Layer</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1106041">
<a id="pgfId-1106041"></a>Available Colors</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106043"></a>Layer1</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106045"></a>grayColor | mask1Color | mask2Color | mask3Color</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106047"></a>CutLayer</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106049"></a>grayColor | mask1Color | mask2Color | mask3Color</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106051"></a>Layer2</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106053"></a>grayColor | mask1Color | mask2Color | mask3Color</p>
</td>
</tr>
</tbody></table>
<p>
<a id="pgfId-1111809"></a>Similar to shapes, you can set the lock state for vias. When multiple vias are selected, which implies the Common check box is selected in the Edit Via Properties form, and the lock state is different for some of the selected vias, the AS IS option is displayed to reflect the lock state of the vias.</p>

<div class="webflare-information-macro webflare-macro-video">
<a id="pgfId-1110004"></a>
You can view the enhancements related to MPT Coloring in the videos, <em><a actuate="user" class="URL" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1Od0000002JiXtEAK&amp;pageName=ArticleContent&amp;sq=005d0000001T4ADAA0_201711882316299" show="replace" xml:link="simple">Coloring Utilities in Property Editor</a></em> and <em><a actuate="user" class="URL" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1Od0000002JkKkEAK&amp;pageName=ArticleContent&amp;sq=005d0000001T4ADAA0_201711882415715" show="replace" xml:link="simple">Coloring Utilities Dynamic Selection Assistant</a></em>.</div>
<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="leFinfet.html" id="prev" title="FinFET Support in Layout Editor">FinFET Support in Layout Edito ...</a></em></b><b><em><a href="appA.html" id="nex" title="Layout Editor Forms">Layout Editor Forms</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>