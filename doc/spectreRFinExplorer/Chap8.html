
<html><head><title>AnalogLib Components Used in RF Simulation</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="jommy" />
<meta name="CreateDate" content="2020-06-25" />
<meta name="CreateTime" content="1593085749" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Provides user information for Spectre Circuit Simulator and Accelerated Parallel Simulator RF Analysis" />
<meta name="DocTitle" content="Spectre Circuit Simulator and Accelerated Parallel Simulator RF Analysis in ADE Explorer User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="AnalogLib Components Used in RF Simulation" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="spectreRFinExplorer" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-06-25" />
<meta name="ModifiedTime" content="1593085749" />
<meta name="NextFile" content="Chap9.html" />
<meta name="Group" content="SpectreRF" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="Chap7.html" />
<meta name="c_product" content="Spectre" />
<meta name="Product" content="Spectre" />
<meta name="ProductFamily" content="Spectre" />
<meta name="ProductVersion" content="19.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre Circuit Simulator and Accelerated Parallel Simulator RF Analysis in ADE Explorer User Guide -- AnalogLib Components Used in RF Simulation" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="Version" content="19.1" />
<meta name="SpaceKey" content="spectreRFinExplorer191" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="spectreRFinExplorerTOC.html">Contents</a></li><li><a class="prev" href="Chap7.html" title="Large-Signal S-Parameter Simulation (LSSP)">Large-Signal S-Parameter Simul ...</a></li><li style="float: right;"><a class="viewPrint" href="spectreRFinExplorer.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="Chap9.html" title="Cosimulation with MATLAB ...">Cosimulation with MATLAB ...</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Spectre Circuit Simulator and Accelerated Parallel Simulator RF Analysis in ADE Explorer User Guide<br />Product Version 19.1, June 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>8
<a id="pgfId-1065082"></a></h1>
<h1>
<a id="pgfId-1252016"></a><hr />
<a id="15189"></a>AnalogLib Components Used in RF Simulation<hr />
</h1>
<h2>
<a id="pgfId-1252018"></a>The Dela<a id="marker-1252022"></a>yline El<a id="nport_component"></a>ement</h2>

<p>
<a id="pgfId-1252019"></a>The delayline element is a lossless transmission line with a specified delay time Td and characteristic impedance Z0. It is intended for the small-signal ac, sp, and noise analyses, and the harmonic balance analysis and models ideal delays in these analyses.</p>
<p>
<a id="pgfId-1244191"></a>The ABCD matrix of a lossless transmission line section is given by:</p>

<p>
<a id="pgfId-1246089"></a></p>
<div class="webflare-div-image">
<img width="367" height="153" src="images/Chap8-2.gif" /></div>

<p>
<a id="pgfId-1228324"></a>The delayline symbol is shown below.</p>

<p>
<a id="pgfId-1228368"></a></p>
<div class="webflare-div-image">
<img width="373" height="120" src="images/Chap8-3.gif" /></div>
<h4>
<a id="pgfId-1244367"></a>Command-line help</h4>

<p>
<a id="pgfId-1228328"></a>spectre -h mtline</p>

<h4>
<a id="pgfId-1244386"></a>CDF Parameters</h4>

<p>
<a id="pgfId-1244413"></a></p>
<table class="webflareTable" id="#id1244424">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264214"></a>CDF Parameter Label</p>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264216"></a>CDF Parameter</p>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264218"></a>Spectre</p>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264220"></a>auCDL</p>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264222"></a>auLVS</p>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264224"></a>hspiceD</p>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264226"></a>Default</p>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264228"></a>Characteristic Impedance</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264230"></a><code>z0</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264232"></a>X</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264234"></a>-</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264236"></a>-</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264238"></a>X</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264240"></a>50</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264242"></a>Delay Time</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264244"></a><code>td</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264246"></a>X</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264248"></a>-</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264250"></a>-</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264252"></a>X</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1264254"></a>1n</p>
</td>
</tr>
</tbody></table>
<p>
<a id="pgfId-1244357"></a>The properties list is shown below.</p>

<p>
<a id="pgfId-1247714"></a></p>
<div class="webflare-div-image">
<img width="436" height="496" src="images/Chap8-4.gif" /></div>
<h2>
<a id="pgfId-1247716"></a>The P<a id="marker-1252047"></a>ORT E<a id="nport_enhancement"></a>lement</h2>

<p>
<a id="pgfId-1247717"></a>You can use the <em>port</em> component, located in the <em>analogLib</em> library, in RF circuits for Spectre<sup>&#174;</sup> circuit simulator RF Analysis (SpectreRF) and Spectre S-parameter simulations.</p>
<p>
<a id="pgfId-1209468"></a>The <em>port</em> component, located in the <em>analogLib</em> library, is a superset of the existing <em>psin</em> component. The <em>port</em> component supports all the source types of the Spectre <em>port</em> primitive: <em>pwl</em>, <em>pulse</em>, <em>sine</em>, <em>dc</em>,<em> </em>and <em>exp</em><em>. </em>In addition, it includes the <em>bit</em><em> </em>and<em> </em><em>prbs</em><em> </em>source types. If you are using the <code>psin</code> component, it is highly recommended that you switch to the port component because the properties are organized in a better way, and the levels in volts peak and in dBm both cannot be set at the same time. This is easily accomplished by obtaining the properties form for <code>psin</code>, and changing the cell name to <code>port</code>. All the properties that are set in the <code>psin</code> component will retain their values when you make the change. </p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1233101"></a>The existing <code>psin</code> is retained for legacy designs and will not be enhanced in any way moving forward.</div>

<p>
<a id="pgfId-1065325"></a></p>
<div class="webflare-div-image">
<img src="images/Chap8E/1257_PortSymbol.gif" /></div>

<p>
<a id="pgfId-1065326"></a>The <em>port</em> component is an independent resistive source tied between positive and negative terminals. It is equivalent to a voltage source in series with a resistor, where the reference resistance of the <em>port</em> is the value of the resistor.</p>

<h2>
<a id="pgfId-1065327"></a>Capabilities of the port Component</h2>

<p>
<a id="pgfId-1065328"></a>While the <em>port</em> component is most useful as a stimulus in high-frequency circuits, it also has the following unique capabilities.</p>
<ul><li>
<a id="pgfId-1065329"></a>It can define the ports of a circuit to the S-parameter analysis.</li><li>
<a id="pgfId-1065330"></a>It has an intrinsic noise source that lets the noise analysis directly compute the noise figure of the circuit.</li><li>
<a id="pgfId-1065331"></a>Is the only source for which you can specify the amplitude in terms of power.</li><li>
<a id="pgfId-1075214"></a>It generates sinusoidal, exponential, piecewise-linear, periodic piecewise-linear, pulse, bit, and prbs waveforms for all the large-signal analyses.</li><li>
<a id="pgfId-1144526"></a>It can have different impedances for each harmonic number in the harmonic balance large-signal analysis.</li></ul>





<h2>
<a id="pgfId-1228534"></a>Terminati<a id="marker-1252056"></a>ng the Port</h2>

<p>
<a id="pgfId-1228535"></a>When you specify the voltage on a <em>port</em>, all Spectre simulations assume that the port is properly terminated in it&#8217;s reference resistance. The specified voltage value is not the voltage on the internal voltage source, which is actually set to twice the value specified on the <code>port</code>. If you use a <code>port</code> source to drive an open circuit, the voltage (for DC, transient, AC, and PAC signals) is double its specified value. However, you can alternatively specify the amplitude of the sine wave in the transient and PAC analyses as the power in dBm delivered by the <em>port</em> when terminated with the reference resistance. For the <code>bit</code> and <code>prbs</code> source, the voltages specified for the zero and one states are doubled inside the port as usual. For the <code>prbs</code> source, you can add a matching resistor across the port to get the voltages specified in the zero and one states, or you can omit the resistor, and half the desired voltages. For the bit source, if you intend to use the z state, do not add a matching resistor across the source because this small resistor will totally swamp the Z-state effect. Thus, when you use the bit source in a port, the values for the zero and one states should be half the desired voltages. This is not an issue for the <code>vsource</code> element.</p>
<p>
<a id="pgfId-1065337"></a>The <em>port</em> component <em>Edit Object Properties</em> form is shown in <a href="Chap8.html#19207">Figure&#160;8-1</a> and <a href="Chap8.html#25067">Figure&#160;8-2</a>.</p>

<p><strong>Figure 8-1
<a id="pgfId-1065342"></a><a id="19207"></a>Top of the port Component Edit Object Properties Form</strong></p>
<p>
<a id="pgfId-1065346"></a></p>
<div class="webflare-div-image">
<img width="669" height="622" src="images/Chap8-6.gif" /></div>
<p><strong>Figure 8-2
<a id="pgfId-1071727"></a><a id="25067"></a>Bottom of the port Component Edit Object Properties Form</strong></p>
<p>
<a id="pgfId-1065355"></a></p>
<div class="webflare-div-image">
<img width="669" height="453" src="images/Chap8-7.gif" /></div>
<h3>
<a id="pgfId-1144764"></a>Param<a id="marker-1144777"></a>eters for the Port Component</h3>
<h3>
<a id="pgfId-1144769"></a>Port Param<a id="marker-1252083"></a>eters</h3>

<p>
<a id="pgfId-1065432"></a>Port parameters include <em>Resistance</em>, <em>Reactance</em>, <em>Port Number</em>, and <em>Multiplier</em>.</p>

<h4><em>
<a id="pgfId-1065433"></a>Resis<a id="marker-1252094"></a>tance</em></h4>

<p>
<a id="pgfId-1209837"></a>The reference resistance of the system. The value must be a real number, but not 0. The default value is 50 ohms. This applies for all analyses. Note that the resistance and reactance can be set individually for each harmonic in harmonic balance large-signal analyses only. For more information, refer to <a href="Chap8.html#13151">Using the Harmonic Port with Harmonic Balance</a>.</p>

<h4><em>
<a id="pgfId-1065435"></a>Reac<a id="marker-1252099"></a>tance</em></h4>

<p>
<a id="pgfId-1233165"></a>The imaginary part of impedance is used for harmonic balance large and small-signal analyses, and for the ac, noise, xf, sens, stb, pz, and sp.analyses. The reactance is not used for the dc, transient, and shooting-based large and small-signal analyses. The value must be a real number. The default is zero ohms. Note that the resistance and reactance can be set individually for each harmonic in harmonic balance large-signal analyses only. For more information, refer to <a href="Chap8.html#13151">Using the Harmonic Port with Harmonic Balance</a>.</p>

<h4><em>
<a id="pgfId-1209899"></a>Port nu<a id="marker-1252104"></a>mber</em></h4>

<p>
<a id="pgfId-1065438"></a>The number associated with the <em>port</em>. The value must be a non-zero integer and must be unique for each <em>port</em> in a schematic. The port number is not automatically indexed when you place a new <em>port</em> on your schematic. There is no need to assign this number because in the sp analysis, you just select the port instances you want from the schematic.</p>
<p>
<a id="pgfId-1081759"></a>If you do assign port numbers, start with the number one, and number the ports sequentially. A gap in the port number sequence causes a simulation error if the port list is not defined in the S-parameter analyses.</p>
<p>
<a id="pgfId-1065440"></a>Mult<a id="marker-1252109"></a>iplier</p>
<p>
<a id="pgfId-1210026"></a>Leave this property at the default. The multiplicity factor specifies the number of <em>ports</em> in parallel. The value must be a non-zero real number and the default is 1. For example, if you set <em>Resistance</em> to 50 and <em>Multiplier</em> to 2, you specify two <em>ports</em> in parallel, with an effective reference resistance of 25 ohms.</p>

<h2>
<a id="pgfId-1144813"></a><a id="13151"></a>Using the Harmonic Port with H<a id="marker-1252114"></a>armonic Balance</h2>

<p>
<a id="pgfId-1210152"></a>The port component has a feature called harmonic port that allows the specification of different impedances at different harmonic numbers. This is available for harmonic balance large-signal analyses only and does not work with any other analysis.</p>
<p>
<a id="pgfId-1210156"></a>For this example, a 2.4GHz LNA is the example circuit.</p>

<p>
<a id="pgfId-1233310"></a></p>
<div class="webflare-div-image">
<img width="664" height="614" src="images/Chap8-8.gif" /></div>

<p>
<a id="pgfId-1233311"></a>The input and output ports are set up normally, as shown in the properties forms below.</p>

<p>
<a id="pgfId-1233316"></a></p>
<div class="webflare-div-image">
<img width="484" height="800" src="images/Chap8-9.gif" /></div>
<p>
<a id="pgfId-1210432"></a></p>
<div class="webflare-div-image">
<img width="456" height="569" src="images/Chap8-10.gif" /></div>

<p>
<a id="pgfId-1210613"></a><em>PORT1</em> is the input and <em>PORT2</em> is the output.</p>

<h4><em>
<a id="pgfId-1210879"></a>One Input Frequency</em></h4>

<p>
<a id="pgfId-1210880"></a>The harmonic balance <em>Choosing Analyses</em> form has a single input applied.</p>

<p>
<a id="pgfId-1210884"></a></p>
<div class="webflare-div-image">
<img width="457" height="763" src="images/Chap8-11.gif" /></div>

<p>
<a id="pgfId-1210963"></a>To use the harmonic port, select <em>Harmonic Port</em> on the properties form. In this case, the port being used as a load in the circuit is selected. The <em>Edit harmonic port</em> window is displayed.</p>

<p>
<a id="pgfId-1210976"></a></p>
<div class="webflare-div-image">
<img width="518" height="345" src="images/Chap8-12.gif" /></div>

<p>
<a id="pgfId-1211094"></a>For this setup, a single input frequency is applied to the circuit. In this case, harmonic numbers 1, 2, 3, 4, and 5 exist in the simulation result. In the <em>Harmonic</em> column, you enter the harmonic number. In the <em>Resistance</em> column, you enter the resistance. In the <em>Reactance</em> column, you enter the series reactance in ohms. Positive reactance adds inductance, and negative reactance adds capacitance. Multiple entries are allowed, so different impedances can be set for each harmonic. The resistance or reactance can be left blank, which is interpreted as zero resistance or reactance.</p>

<p>
<a id="pgfId-1211104"></a></p>
<div class="webflare-div-image">
<img width="517" height="349" src="images/Chap8-13.gif" /></div>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1179833"></a>When a variable name is used to set the value of resistance or reactance, that variable must be added to ADE Explorer manually. The <em>Variables</em> - <em>Copy From Cellview</em> menu option will not enter the variable into the variable table in ADE Explorer. To add a variable manually:</div>
<ol><li>
<a id="pgfId-1211153"></a>Double-click on the last variable in the variables list. The <em>Editing Design Variables</em> window is displayed. </li><li>
<a id="pgfId-1211171"></a>In the <em>Editing Design Variables</em> window, click <em>Next</em>. The <em>Name</em> and <em>Value (expr)</em> fields become editable. </li><li>
<a id="pgfId-1211188"></a>Enter the variable name in the <em>Name</em> field, and the starting value in the <em>Value (expr)</em> field.</li><li>
<a id="pgfId-1211195"></a>Click <em>OK</em> or <em>Apply</em>. The variable and value are entered into the table.</li></ol>



<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1179870"></a>Whenever you have an expression for one of the values, you must enclose the expression in parentheses. If this is not done, a simulation error is generated: </div>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1211260"></a>ERROR: Length of hvec is not equal to length of rvec multilies tones or length of rvec is not equal to length of xvec.</pre>

<p>
<a id="pgfId-1144841"></a>Here is a comparison where the third harmonic is set normally in the top trace, and to 1 ohm in series with +j1mohm in the bottom trace. The lower impedance for the third harmonic in the bottom trace lowers the amplitude of the third harmonic.</p>

<p>
<a id="pgfId-1211301"></a></p>
<div class="webflare-div-image">
<img width="619" height="399" src="images/Chap8-14.gif" /></div>
<h4><em>
<a id="pgfId-1144846"></a>Two Input Frequencies</em></h4>

<p>
<a id="pgfId-1144851"></a>Now the harmonic balance <em>Choosing Analyses</em> form has two frequencies.</p>

<p>
<a id="pgfId-1211377"></a></p>
<div class="webflare-div-image">
<img width="425" height="767" src="images/Chap8-15.gif" /></div>

<p>
<a id="pgfId-1146249"></a>Also, the diamond cut is set with a very large <em>MaximOrder</em>. The reason for doing this is to see the harmonic numbers that correspond to the frequencies produced by the circuit. Each frequency has two harmonic numbers that indicate which harmonics are mixing with which to produce a specific output frequency. For example, take the 2.44GHz term. The harmonic number is 1 0. The frequency that is produced is 1*2.44G + 0*2.46G. Now look at the intermod at 2.42GHz. This index is 2 -1. The frequency is 2*2.44G - 1*2.46G. These are the harmonic numbers that can be set for the harmonic port. Wild cards (*) are not allowed in the harmonic number specification.</p>
<p>
<a id="pgfId-1144852"></a>Note that if there were three input frequencies, there would be three numbers that specify every output frequency.</p>
<p>
<a id="pgfId-1211489"></a>In this case, if the harmonic was specified as 3, there would be an error produced by Spectre because there is a single index in the harmonic, but there are 2 indices for all the harmonics of the existing simulation. The number of entries in the <em>Harmonic</em> field must match the number of input frequencies in the circuit.</p>

<p>
<a id="pgfId-1211507"></a></p>
<div class="webflare-div-image">
<img width="528" height="350" src="images/Chap8-16.gif" /></div>

<p>
<a id="pgfId-1144857"></a>The above example sets the impedance of the third-order intermods to be much lower than 50 ohms. If the source is in series, setting the resistance and/or reactance to a large number can block harmonics you don&#8217;t want. If the port is in parallel like this one, setting small resistance and reactance values can short out an undesired harmonic. This can be used for debugging the circuit, or for setting values to maximize power-added efficiency. The resistance or reactance can be left blank, which is interpreted as zero resistance or reactance.</p>

<p>
<a id="pgfId-1211677"></a></p>
<div class="webflare-div-image">
<img width="664" height="433" src="images/Chap8-17.gif" /></div>

<p>
<a id="pgfId-1144861"></a>The top trace above is from the normal port, and the bottom trace is from the harmonic port. The third order harmonics are much smaller because they are essentially shorted out.</p>

<h3>
<a id="pgfId-1065445"></a>Source type</h3>

<p>
<a id="pgfId-1065446"></a>The <em>Source type</em> parameter lets you select a wave shape for the port from the <em>Source type</em> cyclic field: <em>dc</em>, <em>pulse</em>, <em>exp</em>, <em>pwl</em>, <em>pwlz, sine, bit</em>, <em>prbs</em>, <em>oscmacro</em>, or blank. Each <em>Source type</em> has different parameter settings associated with it. You can define several different wave shapes and quickly switch between them without losing the wave shape settings. The wave shape settings are described in detail in the following sections:</p>
<ul><li>
<a id="pgfId-1228569"></a><a href="Chap8.html#43782">DC Parameters</a></li><li>
<a id="pgfId-1228577"></a><a href="Chap8.html#12283">Pulse Waveform Parameters</a></li><li>
<a id="pgfId-1228585"></a><em><a href="Chap8.html#83991">PWL Waveform Parameters</a><em></em> </em></li><li>
<a id="pgfId-1228593"></a><a href="Chap8.html#77097">Sinusoidal Waveform Parameters</a></li><li>
<a id="pgfId-1228843"></a><em><a href="Chap8.html#38408">Exponential Waveform Parameters</a><em></em>, </em></li><li>
<a id="pgfId-1228601"></a><em><a href="Chap8.html#10424">Bit Waveform Parameters</a><em></em>, </em></li><li>
<a id="pgfId-1228609"></a><a href="Chap8.html#20839">PRBS Waveform Parameters</a> </li></ul>






<p>
<a id="pgfId-1065447"></a>The typical <em>Source types </em>used in SpectreRF analyses are: <em>dc</em>, <em>piecewise linear, pulsed</em>, and <em>sine</em>. For example, you can quickly switch from a sinusoid (for PSS analysis) to a DC level (for PAC analysis) by changing the <em>Source type</em> from <em>sine</em> to <em>dc</em>. The sinusoidal properties remain with the port, and can be changed when the <em>Source type</em> is returned to <em>sine</em>. This is true when switching between any of the sourcetypes. All the properties are retained for everything that you define.</p>
<p>
<a id="pgfId-1065448"></a>When you set <em>Source type</em> to a blank value, the <em>port</em> acts as a resistive load.</p>

<h3>
<a id="pgfId-1075555"></a><a id="43782"></a>DC Parameters</h3>

<p>
<a id="pgfId-1075556"></a>To generate a dc level from the <em>port</em> component, select <em>dc</em> in the <em>Source type</em> cyclic field. When the <em>Source type</em> is set to <em>dc</em>, the <em>dc</em><italic>
 
and <em>temperature effect</em><italic>
 
parameters are active.</italic></italic></p>
<p>
<a id="pgfId-1211761"></a>The <em>dc</em> setting sets the DC level for all analyses.</p>

<h3>
<a id="pgfId-1117499"></a>DC voltage</h3>

<p>
<a id="pgfId-1065460"></a>The <em>DC voltage</em> parameter sets the port&#8217;s DC level for all analysis. The value must be a real number. If you do not specify the DC value, the default value is 0 volts.</p>
<p>
<a id="pgfId-1120360"></a>The <em>DC voltage</em> parameter specifies the DC voltage across the <em>port</em> when it is terminated in its reference resistance. In other words, the <em>DC voltage</em> of the internal voltage source is double the specified DC value, <em>dc</em>. Because all small signal analyses (AC, SP, XF, and Noise) use DC<italic>
 
analysis results, the <em>DC voltage</em> level also affects the small-signal analyses.</italic></p>

<p><strong>Figure 8-3
<a id="pgfId-1065464"></a><a id="65085"></a>Source type=dc in the Edit Object Properties form</strong></p>
<p>
<a id="pgfId-1065468"></a></p>
<div class="webflare-div-image">
<img width="408" height="255" src="images/Chap8-18.gif" /></div>

<p>
<a id="pgfId-1065469"></a>The <em>Display small signal params, Display temperature params,</em> and <em>Display noise parameters</em> fields are discussed in <a href="Chap8.html#66743">Small-Signal Parameters</a>, <a href="Chap8.html#72546">&#8220;Temperature Effect Parameters&#8221;</a>, and <a href="Chap8.html#20839">&#8220;PRBS Waveform Parameters&#8221;</a>.</p>

<h3>
<a id="pgfId-1065479"></a><a id="12283"></a>Pulse Waveform Pa<a id="marker-1252144"></a>rameters</h3>

<p>
<a id="pgfId-1065480"></a>The pulse waveform can generate a step, a single pulse, or a periodic pulse waveform.</p>
<p>
<a id="pgfId-1211810"></a>To generate a pulse waveform from the <em>port</em> component, select <em>pulse</em> in the <em>Source type</em> cyclic field.</p>
<p>
<a id="pgfId-1065481"></a>When you specify the voltage on a <em>port</em>, you are specifying the voltage when the port is properly terminated, and not the voltage on the internal voltage source. Therefore, the voltage on the internal source is set to twice the value specified on the <em>port</em>.</p>

<p><strong>Figure 8-4
<a id="pgfId-1065482"></a>Source type=pulse in the Edit Object Properties form</strong></p>
<p>
<a id="pgfId-1065486"></a></p>
<div class="webflare-div-image">
<img width="669" height="485" src="images/Chap8-19.gif" /></div>
<h4>
<a id="pgfId-1065488"></a><a id="21356"></a>Frequency name 1</h4>

<p>
<a id="pgfId-1065492"></a>The <em>Frequency name 1</em> parameter is listed in the <em>Fundamental Tones</em> section of the <em>Choosing Analyses</em> form for pss, qpss, and hb when <em>Names</em> is selected.</p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1079823"></a>
If you have two different sources at the same frequency or at integer multiple of the same frequency, make sure that you use the same <em>Frequency name</em> 1 or 2 property for both sources. An example might be RF1.</div>
<h4>
<a id="pgfId-1069069"></a>Delay <a id="marker-1252151"></a>time</h4>

<p>
<a id="pgfId-1069073"></a>The <em>Delay time</em> parameter is the simulation time that the port stays at the zero value without becoming periodic. Generally, this should be set less than the period of the waveform. Longer times are allowed, however, this forces a transient analysis until the longest delay time before the large-signal analyses pss, qpss, and hb can start. If a 1GHz signal and a delay time of 1 second is in your circuit, a transient is forced for 1 billion cycles of the input before the pss, qpss, or hb can start. This effectively prevents them from starting because of the long simulation time in the transient analysis. This must be a real number.</p>

<h4>
<a id="pgfId-1069074"></a><a id="22763"></a>Zero v<a id="marker-1252156"></a>alue</h4>

<p>
<a id="pgfId-1065499"></a>The <em>Zero value</em> property is the time-zero value of the pulse in Volts. The default is zero volts.</p>

<h4>
<a id="pgfId-1065500"></a><a id="55912"></a>One val<a id="marker-1252161"></a>ue</h4>

<p>
<a id="pgfId-1125162"></a>The <em>One value</em> property specifies the voltage that the signal transitions to at time equals zero plus. The default is one volt, which is unlikely to be what you want. Always set this property.</p>

<h4>
<a id="pgfId-1125164"></a><a id="87482"></a>Period of w<a id="marker-1252166"></a>aveform</h4>

<p>
<a id="pgfId-1125165"></a>The <em>period</em> property specifies the period of the pulse. If this property is left blank, a single pulse is generated at the beginning of the transient simulation.</p>

<h4>
<a id="pgfId-1065504"></a><a id="62664"></a>Rise ti<a id="marker-1252171"></a>me</h4>

<p>
<a id="pgfId-1124225"></a>The<em> Rise time</em> property specifies the zero to 100% risetime for the pulse. This is the time for the complete transition from the zero value to the one value.</p>

<h4>
<a id="pgfId-1065506"></a><a id="85226"></a>Fall ti<a id="marker-1252176"></a>me</h4>

<p>
<a id="pgfId-1124230"></a>The<em> Fall time</em> property specifies the zero to 100% falltime for the pulse. This is the time for the complete transition from the one value to the zero value.</p>

<h4>
<a id="pgfId-1065508"></a>Pulse widt<a id="marker-1252183"></a>h</h4>

<p>
<a id="pgfId-1065509"></a>The <em>Pulse width</em> property specifies the time to remain at the one value. The default is infinity.</p>

<h4>
<a id="pgfId-1074379"></a>Pulse Wave<a id="marker-1252200"></a>form Examples</h4>
<h4><em>
<a id="pgfId-1074393"></a>Generating a step from zero to 1.2 Volts</em></h4>
<p>
<a id="pgfId-1212226"></a></p>
<div class="webflare-div-image">
<img width="523" height="730" src="images/Chap8-21.gif" /></div>

<ol><li>
<a id="pgfId-1074406"></a>Set the <em>Zero value</em> field to 0 volts.</li><li>
<a id="pgfId-1212301"></a>Set the <em>One value</em> field to 1.2 volts.</li><li>
<a id="pgfId-1212345"></a>Set the risetime to a time that is appropriate for your circuit. A suggested starting value is about <img width="143" height="35" src="images/Chap8-22.gif" /><span> .</span><br />
<a id="pgfId-1212362"></a>The default is the falltime. If the falltime is not given, the default is <img width="46" height="35" src="images/Chap8-23.gif" /><span>. If the period is not given, then the default is </span><img width="102" height="35" src="images/Chap8-24.gif" /><span>.</span><br />
<a id="pgfId-1074525"></a>The waveform is shown below.<br />
<a id="pgfId-1212379"></a><div class="webflare-div-image">
<img width="626" height="408" src="images/Chap8-25.gif" /></div></li><li>
<a id="pgfId-1074549"></a>Setting a <em>Delay time</em> to 1n shifts the waveform to the right.<br />
<a id="pgfId-1212424"></a><div class="webflare-div-image">
<img width="587" height="728" src="images/Chap8-26.gif" /></div>
<a id="pgfId-1074575"></a>The waveform is shown below.<br />
<a id="pgfId-1212535"></a><div class="webflare-div-image">
<img width="639" height="419" src="images/Chap8-27.gif" /></div></li></ol>



















<h4><em>
<a id="pgfId-1074649"></a>Specifying a startup bump in a supply voltage</em></h4>

<p>
<a id="pgfId-1074828"></a>This is commonly used to start oscillators, and is usually done using a <code>vsource</code>.</p>
<ol><li>
<a id="pgfId-1074663"></a>Set the <em>Zero value</em> to about 80% of the supply voltage.</li><li>
<a id="pgfId-1074695"></a>Set the <em>One valu</em>e to the supply voltage.</li><li>
<a id="pgfId-1074696"></a>Set the <em>Rise time</em> as appropriate for the system you are simulating.<br />
<a id="pgfId-1212592"></a><div class="webflare-div-image">
<img width="507" height="739" src="images/Chap8-28.gif" /></div></li><li>
<a id="pgfId-1074720"></a>The waveform is shown below.<br />
<a id="pgfId-1212646"></a><div class="webflare-div-image">
<img width="628" height="398" src="images/Chap8-29.gif" /></div></li></ol>










<h4><em>
<a id="pgfId-1074906"></a>Specifying a single pulse at startup, then zero after that.</em></h4>

<p>
<a id="pgfId-1074920"></a>This is usually used with the ipulse or isource components to start an oscillator.</p>

<p>
<a id="pgfId-1212685"></a></p>
<div class="webflare-div-image">
<img width="464" height="741" src="images/Chap8-30.gif" /></div>

<ol><li>
<a id="pgfId-1074927"></a>Set the <em>Zero value</em> to zero.</li><li>
<a id="pgfId-1074937"></a>Set the <em>One value</em> large enough to get things started.</li><li>
<a id="pgfId-1074944"></a>Set the rise and fall times to about one tenth of the period of the oscillator.</li><li>
<a id="pgfId-1233971"></a>Set the <em>Pulse width</em> to about three tenths of the period.</li><li>
<a id="pgfId-1233972"></a>Leave the <em>Period of waveform</em> field blank.</li><li>
<a id="pgfId-1233973"></a>The waveform is shown below.<br />
<a id="pgfId-1212740"></a><div class="webflare-div-image">
<img width="605" height="396" src="images/Chap8-31.gif" /></div></li></ol>








<h4><em>
<a id="pgfId-1075015"></a>To generate a pulse with an arbitrary duty cycle and differing rise and fall times:</em></h4>

<ol><li>
<a id="pgfId-1212824"></a>Set the <em>Zero value</em> and <em>One value</em> fields to the levels needed for your system.</li><li>
<a id="pgfId-1212825"></a>Set the <em>Rise time</em> and <em>Fall time fields</em> to approximate the real input source. The values can be different.</li><li>
<a id="pgfId-1075042"></a>Set the <em>Period of waveform</em> field to the value needed for your frequency.</li><li>
<a id="pgfId-1075049"></a>Set the <em>Pulse width</em> between 0.05 to about 0.95 times the period.<br />
<a id="pgfId-1212850"></a><div class="webflare-div-image">
<img width="476" height="741" src="images/Chap8-32.gif" /></div></li><li>
<a id="pgfId-1075082"></a>The waveform is shown below.<br />
<a id="pgfId-1212903"></a><div class="webflare-div-image">
<img width="650" height="398" src="images/Chap8-33.gif" /></div></li></ol>











<h4><em>
<a id="pgfId-1075124"></a>To generate a 50% duty cycle square wave:</em></h4>

<ol><li>
<a id="pgfId-1075134"></a>Set the <em>Zero value</em> and <em>One value</em> fields as appropriate for your system.</li><li>
<a id="pgfId-1075144"></a>Set the <em>Rise time</em> and <em>Fall time fields</em> as appropriate for your system and make them equal.</li><li>
<a id="pgfId-1075151"></a>Set the <em>Period of waveform field</em> to that needed to generate your input frequency.</li><li>
<a id="pgfId-1075158"></a>Set the <em>Pulse width</em> to half the period minus the risetime.<br />
<a id="pgfId-1212955"></a><div class="webflare-div-image">
<img width="475" height="741" src="images/Chap8-34.gif" /></div></li><li>
<a id="pgfId-1132189"></a>The waveform is shown below.<br />
<a id="pgfId-1213002"></a><div class="webflare-div-image">
<img width="648" height="397" src="images/Chap8-35.gif" /></div></li></ol>











<h3>
<a id="pgfId-1074697"></a><a id="83991"></a>PWL Waveform P<a id="marker-1252311"></a>arameters</h3>

<p>
<a id="pgfId-1076130"></a>Piecewise linear waveforms allow an arbitrary input waveform to be generated. The input can either be a file that contains time and voltage pairs, or you can enter the time-voltage pairs directly in the PWL source properties form. Remember that the voltages you enter in the piecewise linear file assume that the port is properly terminated. The internal voltage source gets set to double the value specified in the piecewise linear voltage specifications.</p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1137564"></a>
If the period property is set, the source repeats the waveform between zero and period over and over again. If the period property is not set and the transient analysis goes past the last point in the PWL file, the last voltage value in the file is held until the end of the simulation. If the period property is not set, the signal does not become periodic until after the time of the last point in the PWL file, where the source output becomes a DC level. If the file has a stopping point that has a large time, then the periodic analyses pss, qpss, and hb run a transient until the longest time in any input PWL file has been reached before they go into the steady-state analyses, and these analyses use the DC level that is present at the end of the PWL file as the input signal.</div>
<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1137578"></a>
If you want a periodic piecewise linear waveform for pss, qpss, and hb, make sure that the period property is set.</div>

<p>
<a id="pgfId-1065511"></a>To generate a piecewise linear waveform from the <em>port</em> component, select <em>pwl</em> in the <em>Source type</em> cyclic field. This sets the <em>Source type</em> CDF parameter to <em>pwl</em> and displays additional fields for the PWL CDF parameter settings.</p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1137820"></a>
The advantage of entering a square or pulse wave using the pwl source is that the starting value can be at the center of the waveform. In the pulse waveform, the signal starts at the zero value, and because of this, in some cases, the tstab time must be extended to allow the waveform to settle. Starting the waveform in the middle can drastically reduce tstab and/or dramatically improve convergence for systems that have square or pulse waves and relatively long settling times for the nodes with the square or pulse wave signal.</div>

<p>
<a id="pgfId-1065512"></a>When you specify the voltage on a <em>port</em>, you are specifying the voltage when the port is properly terminated, and not the voltage on the internal voltage source. Therefore, the voltage on the internal source is set to twice the value specified on the <em>port</em>.</p>

<p><strong>Figure 8-5
<a id="pgfId-1065513"></a>Source type=pwl in the Edit Object Properties form</strong></p>
<p>
<a id="pgfId-1065517"></a></p>
<div class="webflare-div-image">
<img width="668" height="616" src="images/Chap8-36.gif" /></div>
<h3>
<a id="pgfId-1065518"></a>Waveform E<a id="marker-1252317"></a>ntry Method</h3>

<p>
<a id="pgfId-1065519"></a>With the <em>Waveform Entry Method</em> buttons, select how you enter piecewise-linear data,</p>
<ul><li>
<a id="pgfId-1065520"></a>By specifying a <em>File name</em>.</li><li>
<a id="pgfId-1065521"></a>By entering a series of <em>Voltage/Time points </em>directly in the properties list for the port.</li></ul>


<h4>
<a id="pgfId-1065522"></a>File name</h4>

<p>
<a id="pgfId-1065523"></a>When you select <em>File</em> as the <em>Waveform Entry Method</em>, type the name of the file containing your piece wise-linear data in the <em>File name</em> field. The file<em> </em>name must be a string. There is no default. In ADE Explorer, define the directory that contains the file by selecting <em>Setup</em> - <em>Simulation</em> <em>Files</em>, and entering either the rooted path (starts with slash (/)) or relative path (starts with dot (.)) in the <em>Include Paths</em> field. Multiple directories can be specified in the <em>Include Paths</em> fields.</p>
<p>
<a id="pgfId-1065524"></a>In your file, list the piecewise-linear data in the form of time-value pairs. Enter one pair per line with a space or tab between the time and voltage values. The numbers in the file must use exponential notation, for example, 1.04e-3. You can also use SI scale factors (p, n, u, m, k, M, G, etc.).</p>

<h4>
<a id="pgfId-1065525"></a>Number of PWL/Time pairs</h4>

<p>
<a id="pgfId-1065526"></a>When you select <em>Voltage/Time points </em>as the <em>Waveform Entry Method</em>, the <em>Number of PWL-Time pairs</em> field (tvpairs) form opens. Enter the number of time-value pairs you plan to enter. The form expands to let you enter the designated number of <em>Time</em><italic>
 
and<italic>
 
<em>Voltage</em><italic>
 
values. Units are seconds and volts. The default is 0 and the maximum value is 50.</italic></italic></italic></p>
<p>
<a id="pgfId-1065527"></a>In this example, the number of voltage-time pairs is 6.</p>

<p><strong>Figure 8-6
<a id="pgfId-1065528"></a>Waveform Entry Method=Voltage/Time points</strong></p>
<p>
<a id="pgfId-1065532"></a></p>
<div class="webflare-div-image">
<img width="668" height="741" src="images/Chap8-37.gif" /></div>

<p>
<a id="pgfId-1065533"></a>The waveform that is produced is shown below.</p>

<p>
<a id="pgfId-1213203"></a></p>
<div class="webflare-div-image">
<img width="654" height="398" src="images/Chap8-38.gif" /></div>

<p>
<a id="pgfId-1077010"></a>The <em>DC offset, Amplitude scale factor,</em> and <em>Time scale factor</em> parameter fields let you quickly adjust the amplitude, frequency, and offset of your piecewise-linear data pairs without editing each individual time-value pair in the <em>PWL</em> waveform.</p>

<h4><em>
<a id="pgfId-1065534"></a>DC offset</em></h4>

<p>
<a id="pgfId-1065535"></a><em>DC offset</em> for the <em>PWL</em> waveform. The default is zero volts.</p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1213425"></a>
Note that for PWL waveforms, the DC Voltage term in the port only applies for the DC based analyses and not for the PWL waveform itself. To shift the DC level of the PWL waveform in the large-signal analyses (tran, envlp, pss, qpss, and hb) use the DC offset property. When the DC voltage property and the DC offset property are both set, the actual offset value used in the large signal analyses is defined by the DC offset property by itself, and not the DC voltage plus the DC offset property.</div>

<p>
<a id="pgfId-1213426"></a>To show the effect of setting both the DC voltage and DC offset properties, in the following example, the DC Voltage and the DC offset are both set to 0.1.</p>

<p>
<a id="pgfId-1213472"></a></p>
<div class="webflare-div-image">
<img width="622" height="740" src="images/Chap8-39.gif" /></div>

<p>
<a id="pgfId-1213352"></a>Note that the signal only observes the DC offset in the transient.</p>

<p>
<a id="pgfId-1213517"></a></p>
<div class="webflare-div-image">
<img width="607" height="398" src="images/Chap8-40.gif" /></div>
<h4><em>
<a id="pgfId-1065536"></a><a id="19929"></a>Amplitude scale factor</em></h4>

<p>
<a id="pgfId-1065537"></a><em>Amplitude scale factor</em> (<em>scale</em>) for the <em>PWL</em> waveform. The default value is 1. The example below shows a scale factor of 3.</p>

<p>
<a id="pgfId-1213630"></a></p>
<div class="webflare-div-image">
<img width="572" height="740" src="images/Chap8-41.gif" /></div>

<p>
<a id="pgfId-1213634"></a>Note that the waveform is multiplied by three in amplitude.</p>

<p>
<a id="pgfId-1213648"></a></p>
<div class="webflare-div-image">
<img width="647" height="397" src="images/Chap8-42.gif" /></div>
<h4><em>
<a id="pgfId-1213635"></a>Time scale factor</em></h4>

<p>
<a id="pgfId-1076320"></a><em>Time scale factor</em> is a multiplier for the times given for <em>PWL</em> waveform. Default is 1. Setting the time scale factor greater than 1 increases the times in the file, and reduces the frequency.</p>

<p>
<a id="pgfId-1213721"></a></p>
<div class="webflare-div-image">
<img width="464" height="742" src="images/Chap8-43.gif" /></div>

<p>
<a id="pgfId-1077199"></a>Note that setting the time scale factor to 0.5 multiplies all the times including the time in the period property.</p>

<p>
<a id="pgfId-1213774"></a></p>
<div class="webflare-div-image">
<img width="662" height="397" src="images/Chap8-44.gif" /></div>
<h4><em>
<a id="pgfId-1076322"></a><a id="53817"></a>Cosine Filter</em></h4>

<p>
<a id="pgfId-1071125"></a>The raised cosine filter is used when the PWL source is used to define digital modulation. Values are <code>none</code> (default), and <code>nrc</code>. <code>nrc</code> specifies a raised cosine filter to be used on the output waveform of the PWL source. This can be used to lower the numerical noise floor of the modulation specified in the I and Q modulating file. When <code>nrc</code> is selected, the PWL file must have evenly spaced points with timepoints at 1/(2*Bandwidth of the filter).</p>

<p>
<a id="pgfId-1213835"></a></p>
<div class="webflare-div-image">
<img width="412" height="743" src="images/Chap8-45.gif" /></div>
<h4><em>
<a id="pgfId-1071536"></a><a id="32992"></a>Rolloff factor</em></h4>

<p>
<a id="pgfId-1071537"></a>When <code>nrc</code> is selected, the <em>Rolloff factor</em> (<em>rolloff</em>) of the filter can be specified. The default value is <code>0.2</code>, which is reasonable for simulations. If you consider a continuous waveform, changing the rolloff factor has an effect on the ringing that is produced in the time domain. Smaller rolloff factors produce more ringing in the continuous waveform. Envelope does not simulate the continuous waveform. Instead, envelope samples the waveform at the time interval in the I and Q modulation file. This delta-time in the I and Q file is always related to the modulation frequency, and it also determines the bandwidth of the cosine filter as described below. The effect of this is that the sampling occurs at the times where the ringing of the filter is zero. Therefore, the cosine filter does not change the spectral content calculated in envelope. It just reduces the numerical noise floor of the input signal.</p>

<h4><em>
<a id="pgfId-1071484"></a><a id="75877"></a>Bandwidth</em></h4>

<p>
<a id="pgfId-1071495"></a>The <em>Bandwidth</em> (<em>pwlbandwidth</em>) of the Cosine Filter. If you want to only allow in-band modulation, this is the channel bandwidth. If you want to allow an accurate ACPR measurement, set the bandwidth to three times the channel bandwidth. If you want to measure two adjacent channels for ACPR, set the bandwidth to five times the channel bandwidth. Note that the I and Q data must have properly spaced time intervals of <img width="92" height="35" src="images/Chap8-46.gif" /><span>for this capability to be used.</span></p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1213919"></a>The <em>Rolloff factor</em> and <em>Bandwidth</em> options are available only when <code>nrc</code> is selected in the <em>Cosine Filter</em> drop-down list.</div>

<h4><em>
<a id="pgfId-1234727"></a><a id="62943"></a>Desired rms value</em></h4>

<p>
<a id="pgfId-1234728"></a>Desired rms voltage for the PWL waveform. Note that this will be set based on the datapoints in the PWL file or in the manually defined points entered directly into the properties form only. This has implications for periodic piecewise linear or if you go beyond the last point in the file in the transient analysis.</p>
<p>
<a id="pgfId-1142433"></a>If the signal is defined for only part of the period or if you go beyond the last point in the pwl description, the rms calculation will not take into account the fact that the signal remains at the last voltage after the last timepoint in the pwl file. If you want this to be taken into account, define a point in the pwl description at the stop time of the transient or at the end of the period.</p>
<p>
<a id="pgfId-1142635"></a>Consider an example in which a 1GHz signal is being generated, with points for the first period of 1GHz defined. No points after 1nsec exist in the PWL description. Also note that the desired RMS value is set to 1.5 (volts).</p>

<p>
<a id="pgfId-1214012"></a></p>
<div class="webflare-div-image">
<img width="558" height="747" src="images/Chap8-47.gif" /></div>

<p>
<a id="pgfId-1077272"></a>Now the transient result is plotted.</p>

<p>
<a id="pgfId-1214060"></a></p>
<div class="webflare-div-image">
<img width="619" height="396" src="images/Chap8-48.gif" /></div>

<p>
<a id="pgfId-1142915"></a>Vertical markers have been placed at the midpoint of the high and low states. The voltage is slightly greater than 1.5 because of the finite rise and fall times in the PWL description.</p>
<p>
<a id="pgfId-1142937"></a>Now, the period is set to 2nsec. This will make the waveform periodic at 500MHz.</p>

<p>
<a id="pgfId-1214111"></a></p>
<div class="webflare-div-image">
<img width="538" height="786" src="images/Chap8-49.gif" /></div>

<p>
<a id="pgfId-1143044"></a>Now the transient result is plotted. Note that the high and low values are the same as before.</p>

<p>
<a id="pgfId-1214157"></a></p>
<div class="webflare-div-image">
<img width="619" height="396" src="images/Chap8-50.gif" /></div>

<p>
<a id="pgfId-1143065"></a>Now the transient waveform is sent to the calculator, and the actual rms value is calculated.</p>

<p>
<a id="pgfId-1214201"></a></p>
<div class="webflare-div-image">
<img width="561" height="253" src="images/Chap8-51.gif" /></div>

<p>
<a id="pgfId-1143214"></a>Instead of producing 1.5 volts as specified, only 1.061 volts is produced.</p>
<p>
<a id="pgfId-1143225"></a>Now add another datapoint in the PWL description at 2nsec, and zero volts. Now the period and the time interval that defines the PWL points exactly agree.</p>

<p>
<a id="pgfId-1214282"></a></p>
<div class="webflare-div-image">
<img width="477" height="785" src="images/Chap8-52.gif" /></div>

<p>
<a id="pgfId-1143300"></a>Now the transient result is plotted.</p>

<p>
<a id="pgfId-1214475"></a></p>
<div class="webflare-div-image">
<img width="619" height="396" src="images/Chap8-53.gif" /></div>

<p>
<a id="pgfId-1214476"></a>Note that the positive and negative voltages have changed. This is because the PWL description completely defines the waveform during the entire first period of the waveform.</p>
<p>
<a id="pgfId-1214536"></a>Now the signal is set to the calculator, and the rms is calculated. It is appended to the last table.</p>
<p>
<a id="pgfId-1214541"></a>Now the RMS value is exactly 1.5 volts.</p>

<p>
<a id="pgfId-1214546"></a></p>
<div class="webflare-div-image">
<img width="561" height="124" src="images/Chap8-54.gif" /></div>

<p>
<a id="pgfId-1143579"></a>Now leave the last timepoint at 2nsec, and reduce the period to 1nsec.</p>

<p>
<a id="pgfId-1214614"></a></p>
<div class="webflare-div-image">
<img width="489" height="799" src="images/Chap8-55.gif" /></div>

<p>
<a id="pgfId-1143689"></a>Now, the transient result is plotted. The positive and negative voltages still reflect the rms value for the 2nsec interval defined by the timepoints themselves. It has not truncated the timepoints to just the first period. It is also not periodic. When the period is smaller than the time of the last timepoint in the PWL description, Spectre assumes that the period is in error, and ignores the property.</p>

<p>
<a id="pgfId-1214692"></a></p>
<div class="webflare-div-image">
<img width="619" height="394" src="images/Chap8-56.gif" /></div>
<div class="webflare-information-macro webflare-macro-tip">
<a id="pgfId-1143357"></a>
If you need to set an rms voltage for a periodic piecewise linear signal, make sure that the timepoints in the piecewise linear description define timepoints over exactly the entire first period of the waveform.</div>

<p>
<a id="pgfId-1142828"></a>Do not set <em>Desired rms value</em> and <em>Power of PWL waveform</em> at the same time. If both are specified, first the amplitude is calculated based on the Power of PWL waveform property, and then that amplitude is multiplied by the <em>Desired rms value</em> setting.</p>

<h4><em>
<a id="pgfId-1069095"></a>Delay time</em></h4>

<p>
<a id="pgfId-1069099"></a>The <em>Delay time</em> parameter sets the time that the signal remains at the first point in the file before the pwl points begin to take effect. Generally, this should be set less than the period of the waveform. Longer times are allowed, however, this forces a transient analysis until the longest delay time before the periodic large-signal analyses pss, qpss, and hb can start. If a 1GHz signal and a delay time of 1 second is in your circuit, a transient is forced for 1 billion cycles of the input before the pss, qpss, or hb can start. This effectively prevents them from starting because of the long simulation time in the transient analysis.</p>

<h4><em>
<a id="pgfId-1069100"></a>Breakpoints</em></h4>

<p>
<a id="pgfId-1065541"></a>Possible values are <em>no</em>, <em>yes</em>, or blank. If you set <em>Breakpoints</em> to <em>yes</em>, you force SpectreRF to place time points at each point specified in a <em>PWL</em> waveform during a transient analysis. This can be very expensive for waveforms with many points. If you set <em>Breakpoints</em> to <em>no</em>, SpectreRF inspects the waveform, looking for abrupt changes, and forces time points only at those changes. If you set <em>Source type =</em> <em>pwl</em> and set <em>Breakpoints</em> to blank, the default is <em>yes</em> if the number of points you specify is less than 20.</p>

<h4><em>
<a id="pgfId-1065542"></a>Period</em></h4>

<p>
<a id="pgfId-1065543"></a>The <em>PWL</em> waveform is periodic if you specify <em>Period</em> in seconds.</p>
<p>
<a id="pgfId-1065544"></a>If the value of the waveform you specify is not exactly the same at both its beginning and its end, then you must provide a non-zero value for <em>Transition Width</em>.</p>

<h4><em>
<a id="pgfId-1070075"></a><a id="74371"></a>Power of PWL waveform</em></h4>

<p>
<a id="pgfId-1143774"></a>This is the power in dBm for a 50 ohm resistor for the output of the PWL source. See <a href="Chap8.html#62943">Desired rms value</a> for important information about how to define timepoints in the PWL input points. Do not set <em>Desired rms value</em> and <em>Power of PWL waveform</em> at the same time. If both are specified, first the amplitude is calculated based on the <em>Power of PWL waveform</em> property, and then that amplitude is multiplied by the <em>Desired rms value</em> setting.</p>

<h4><em>
<a id="pgfId-1067663"></a>Transition Width</em></h4>

<p>
<a id="pgfId-1067664"></a><em>Transition width </em>(<em>twidth</em>) is used when making <em>PWL</em> waveforms periodic and the ending value of the PWL file does not equal the beginning value. The default is the <code>PWL period/1000</code>. </p>
<p>
<a id="pgfId-1065547"></a>Before repeating, the waveform changes linearly in an interval of <em>Transition Width</em> from its value at<em> (Period &#8211; Transition Width) </em>to its value at the beginning of the waveform. Thus, the <em>Transition Width </em>must always be much less than the <em>Period</em>.</p>

<h3>
<a id="pgfId-1065548"></a><a id="77097"></a>Sinusoidal Wavef<a id="marker-1252389"></a>orm Parameters</h3>
<p>
<a id="pgfId-1065549"></a>The <em>port</em> component can generate up to two sinusoids simultaneously. They are denoted as 1 and 2. You can set the amplitude, frequency, and phase for both individually. The amplitude can be set to either a voltage or a power level. When you set a power level, the assumption is that the port is perfectly matched. The source that is internal to the port gets double the amplitude specified by the power in dBm.You can also specify sinusoidal AM or FM modulation of sinusoid 1. Sinusoid 2 cannot be modulated.</p>

<p>
<a id="pgfId-1143782"></a>To generate sinusoidal waveforms, set the <em>Source type</em> in the properties list to <em>sine</em>.</p>
<p>
<a id="pgfId-1065554"></a>The first sinusoid is described by the parameters <em>Frequency name 1, Frequency 1, Amplitude 1 (Vpk)</em>, <em>Amplitude 1 (dBm)</em>, <em>Phase for Sinusoid 1</em>, <em>Sine DC level</em>, and by AM or FM modulation terms.</p>

<p><strong>Figure 8-7
<a id="pgfId-1065556"></a><a id="38781"></a>Source type=sine in the Edit Object Properties form</strong></p>
<p>
<a id="pgfId-1065560"></a></p>
<div class="webflare-div-image">
<img width="668" height="592" src="images/Chap8-58.gif" /></div>
<h4>
<a id="pgfId-1065562"></a><a id="80138"></a>Frequency name 1</h4>

<p>
<a id="pgfId-1065563"></a>This property names the fundamental tones of sinusoid 1. After you save the schematic, the names you assign appear in the <em>Fundamental Tones</em> list box on the <em>Choosing Analyses</em> form.</p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1077604"></a>
When you have multiple ports that are connected to the circuit at different places, but have the same frequency, or integer multiples of the same frequency, make sure that the <em>Frequency name 1</em> property is the same for every instance. An example might be RF1. For harmonic balance, when names is selected in the <em>Choosing Analyses</em> form, and for qpss, the frequency name property specifies that all the signals with the same name should be treated as one tone in the simulation. This can save a lot of time when you run those analyses.</div>

<p>
<a id="pgfId-1065564"></a><em>Frequency 1</em> is the <italic>
frequency
 of the first sinusoidal waveform (carrier frequency). You typically use unmodulated signals in SpectreRF analyses. The value must be a real number. The default frequency is zero, which causes no signal to be generated. Always set this property.</italic></p>

<h4>
<a id="pgfId-1065565"></a>Amplitude 1 (Vpk)</h4>

<p>
<a id="pgfId-1065566"></a>The peak amplitude of the first sinusoidal waveform that you generate. The value specified is the voltage delivered into a matched load. You can select either<em> Amplitude 1 (Vpk) </em>or <em>Amplitude 1 (dBm)</em>, but not both. If <em>Amplitude 1 (Vpk) </em>has a value, the<em> Amplitude 1 (dBm)</em> field is grayed out. The value must be a real number. The default is 1 volt.</p>
<p>
<a id="pgfId-1065567"></a>When you specify the voltage on a <em>port</em>, you are specifying the voltage when the port is properly terminated, and not the voltage on the internal voltage source. Thus, the voltage on the internal source is set to twice the value specified on the <em>port</em>.</p>

<h4>
<a id="pgfId-1065568"></a>Amplitude 1 (dBm)</h4>

<p>
<a id="pgfId-1065569"></a><em>Amplitude 1 (dBm)</em> is the amplitude of the first sinusoidal waveform, in dBm.The resistance for the dBm calculation is taken from the resistance of the port. The value specified is the power delivered into a matched load. You can select either<em> Amplitude 1 (Vpk) </em>or <em>Amplitude 1 (dBm)</em>, but not both. If <em>Amplitude 1 (dBm) </em>has a value, the<em> Amplitude 1 (Vpk)</em> field is grayed out. The value must be a real number.</p>

<h4>
<a id="pgfId-1065570"></a>Phase for Sinusoid 1</h4>

<p>
<a id="pgfId-1077824"></a>The phase at the specified <em>Delay time</em>. To achieve a specified phase and still remain continuous, the sinusoidal waveform might start before the given <em>Delay time</em>. For example, if you want to generate a cosine wave, set this parameter to 90<superscript>
o
. The value must be a real number. The default is 0 degrees.</superscript></p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1143821"></a>
For circuits that have long settling times for the nodes connected to the sinusoidal signal, it can save a lot of time and/or dramatically improve convergence if you set phases other than zero or 180 degrees by using the delay time parameter instead of the <em>Phase</em> parameter. Imagine a need to start at a 90 degree phase shift. If the <em>Phase for Sinusoid 1</em> property is set to 90, the waveform that is produced starts at the positive peak, If instead, the delay time was set to 3/4ths of the period and the <em>Phase for Sinusoid 1</em> property was set to zero, instead of starting at the peak and needing to settle to near the middle value in the tstab interval, the signal itself starts at the center value, so the circuit has to settle a much smaller amount.</div>
<h4>
<a id="pgfId-1077825"></a>Sine DC level </h4>

<p>
<a id="pgfId-1065573"></a>Sets the DC level in volts for sinusoidal waveforms in large-signal analyses. This parameter is used when the sinusoid has a different average level than the one specified for the DC analyses. If not specified, the average value of the sinusoid is the same as that of the DC level of the source.</p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1077923"></a>
When this property is specified, it is used directly. The DC level of the sinusoid is not the DC voltage plus the Sine DC level. It is just the Sine DC level.</div>
<h3>
<a id="pgfId-1077997"></a>Modulation Pa<a id="marker-1252402"></a>rameters</h3>
<h4>
<a id="pgfId-1077998"></a>Display Modulation Parameters</h4>
<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1085961"></a>
The check box is a display feature in the form only. If there are properties that are set and the display check box is not selected, although you will not see the parameters in the form, these parameters will still be netlisted, and will still have an effect on the simulation.</div>

<p>
<a id="pgfId-1077999"></a>When selected, the form expands and the following modulation parameters are displayed: <em>FM modulation index, FM modulation freq, AM modulation index, AM modulation freq, AM modulation phase, </em>and <em>Damping factor</em>.</p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1078157"></a>
These parameters only affect the sinusoidal waveform.</div>
<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1078000"></a>
Only the first <code>sinusoid</code> can be modulated.</div>
<p><strong>Figure 8-8
<a id="pgfId-1078001"></a>Display modulation params</strong></p>
<p>
<a id="pgfId-1078005"></a></p>
<div class="webflare-div-image">
<img width="669" height="278" src="images/Chap8-59.gif" /></div>
<h4>
<a id="pgfId-1078995"></a>AM Modulation (Background Information)</h4>

<p>
<a id="pgfId-1078996"></a>The amplitude modulation for the sinusoidal case is defined as</p>
<p>
<a id="pgfId-1078997"></a><img width="557" height="41" src="images/Chap8-60.gif" /></p>



<p>
<a id="pgfId-1143912"></a>where</p>
<ul><li>
<a id="pgfId-1143913"></a><img width="33" height="21" src="images/Chap8-61.gif" /><span> is the amplitude modulation waveform</span></li><li>
<a id="pgfId-1143914"></a><img width="27" height="29" src="images/Chap8-62.gif" /><span> is the carrier frequency</span></li><li>
<a id="pgfId-1144002"></a><img width="29" height="21" src="images/Chap8-63.gif" /><span> is the AM modulation index</span></li><li>
<a id="pgfId-1143948"></a><img width="48" height="29" src="images/Chap8-64.gif" /><span> is the modulation frequency</span></li><li>
<a id="pgfId-1079003"></a><img width="13" height="21" src="images/Chap8-65.gif" /><span> is the </span></li></ul>








<em>AM modulation phase</em>
<p>
<a id="pgfId-1079004"></a>The amplitude modulation parameters affect only the first sinusoid generated by <em>port</em>. They have no effect on the second sinusoid.</p>

<h4>
<a id="pgfId-1079036"></a>AM modulation Index</h4>

<p>
<a id="pgfId-1079054"></a>This property specifies the amplitude of the modulation signal. When the AM modulation index is 1.0, the signal is 100% modulated. When the AM modulation index is 0.5, the signal is 50% modulated.</p>

<h4>
<a id="pgfId-1079061"></a>AM Modulation Frequency</h4>

<p>
<a id="pgfId-1079071"></a>This property specifies the frequency of the sine wave that is used to modulate the signal that is specified in the <em>Frequency 1</em> property. The AM modulation frequency should be much lower than the <em>Frequency1</em> property.</p>

<h4>
<a id="pgfId-1079078"></a>AM Modulation Phase</h4>

<p>
<a id="pgfId-1079085"></a>This specifies the initial phase of the AM modulation sinusoid. The default is zero degrees.</p>
<p>
<a id="pgfId-1215414"></a>The <em>Edit Object Properties</em> form for a 100% modulated signal is shown below.</p>

<p>
<a id="pgfId-1215430"></a></p>
<div class="webflare-div-image">
<img width="619" height="805" src="images/Chap8-66.gif" /></div>

<p>
<a id="pgfId-1215421"></a>The output waveform is shown below.</p>

<p>
<a id="pgfId-1215480"></a></p>
<div class="webflare-div-image">
<img width="650" height="399" src="images/Chap8-67.gif" /></div>
<h4>
<a id="pgfId-1078983"></a>FM Modulation (Background Information)</h4>

<p>
<a id="pgfId-1078007"></a>The frequency modulation for the sinusoidal case is defined as:</p>
<p>
<a id="pgfId-1078008"></a>V<subscript>
FM
(t) = A sin(2πf<sub>c</sub>t + β sin(2πf<subscript>
m
t) + φ)</subscript></subscript></p>
<p>
<a id="pgfId-1078009"></a>where</p>
<ul><li>
<a id="pgfId-1078010"></a>A is the amplitude of sinusoid 1</li><li>
<a id="pgfId-1078011"></a>β is the FM modulation index</li><li>
<a id="pgfId-1078012"></a>sin(2πf<subscript>
m
t) is the modulation signal</subscript></li><li>
<a id="pgfId-1078013"></a>f<subscript>
c
 is the carrier frequency</subscript></li><li>
<a id="pgfId-1078014"></a>φ is the <em>phase for sinusoid 1</em></li></ul>




<p>
<a id="pgfId-1078015"></a>The frequency modulation parameters affect only the first sinusoid generated by <em>port</em>. They have no effect on the second sinusoid.</p>

<h4>
<a id="pgfId-1078016"></a>FM modulation frequency</h4>

<p>
<a id="pgfId-1078017"></a><em>FM modulation frequency</em> for the sinusoidal waveform (f<smallcaps>
m
 in the previous equation).</smallcaps></p>

<h4>
<a id="pgfId-1078182"></a>FM modulation index</h4>

<p>
<a id="pgfId-1078019"></a>FM index of modulation for the sinusoidal waveform. It is the ratio of the peak frequency deviation divided by the modulation frequency (β in the above equations).</p>
<p>
<a id="pgfId-1078020"></a>β=Δf/f<subscript>
m
</subscript></p>
<p>
<a id="pgfId-1227885"></a>When the modulation index is 1.0, the deviation frequency from the carrier frequency is equal to the modulation frequency.</p>
<p>
<a id="pgfId-1215655"></a>The property list for an FM signal with a modulation index of 100% is show below.</p>
<p>
<a id="pgfId-1215656"></a></p>

<div class="webflare-div-image">
<img width="572" height="809" src="images/Chap8-68.gif" /></div>

<p>
<a id="pgfId-1215657"></a>The transient waveform goes from zero frequency to twice the center frequency. This is an extremely large modulation index. Zero frequency is produced at the center of the below waveform.</p>

<p>
<a id="pgfId-1215732"></a></p>
<div class="webflare-div-image">
<img width="666" height="398" src="images/Chap8-69.gif" /></div>

<p>
<a id="pgfId-1227987"></a>When zoomed in near the beginning, the frequency is nearly double the carrier frequency.</p>

<p>
<a id="pgfId-1228007"></a></p>
<div class="webflare-div-image">
<img width="619" height="396" src="images/Chap8-70.gif" /></div>
<h4>
<a id="pgfId-1078023"></a>Number of FM Files</h4>

<p>
<a id="pgfId-1078024"></a>The first sinusoid can also be phase modulated with a pair of PWL files that define the desired modulation.</p>
<ul><li>
<a id="pgfId-1078025"></a><em>none</em> specifies that the FM signal should be modulated with a sinusoid. <br />
<a id="pgfId-1078026"></a>In this case, the FM signal from the source will be represented as:<br />
<a id="pgfId-1078027"></a>V<subscript>
FM
(t) = A sin(2πf<sub>c</sub>t + β sin(2πf<subscript>
m
t))</subscript></subscript></li><li>
<a id="pgfId-1078028"></a>When <em>one</em> is selected, a <em>Name of FM File1 </em>field appears. Provide the filename of the PWL file that is to be used for the frequency modulation.<br />
<a id="pgfId-1078029"></a>In this case, the FM signal from the source will be represented as:<br />
<a id="pgfId-1078033"></a><div class="webflare-div-image">
<img width="636" height="31" src="images/Chap8-71.gif" /></div>
<a id="pgfId-1078034"></a>This is shown in the <em>Edit Object Properties</em> form, as shown below.<br />
<a id="pgfId-1216304"></a><div class="webflare-div-image">
<img width="668" height="799" src="images/Chap8-72.gif" /></div></li><li>
<a id="pgfId-1078043"></a>When <em>two</em> is selected, the <em>Name of FM File1 and Name of FM file2 </em>fields appear. Provide the filename of the PWL file that is to be used for the phase modulation.<br />
<a id="pgfId-1078044"></a>In this case, the FM signal from the source will be represented as:<br />
<a id="pgfId-1078048"></a><div class="webflare-div-image">
<img width="636" height="33" src="images/Chap8-73.gif" /></div>
<a id="pgfId-1078049"></a>Here,<br />
<a id="pgfId-1078053"></a><img width="12" height="18" src="images/Chap8-74.gif" /><span> is the frequency modulation index</span><br />
<a id="pgfId-1078057"></a><div class="webflare-div-image">
<img width="636" height="35" src="images/Chap8-75.gif" /></div>
<a id="pgfId-1216572"></a>where <code>I(t)</code> is the waveform specified in the <em>Name of FM File1</em> pwl file, and <code>Q(t)</code> is <br />
<a id="pgfId-1216573"></a><div class="webflare-div-image">
<img width="190" height="59" src="images/Chap8-76.gif" /></div>
<a id="pgfId-1216498"></a>waveform specified in the <em>Name of FM File2</em> pwl file. This is shown below.<br />
<a id="pgfId-1216669"></a><div class="webflare-div-image">
<img width="605" height="812" src="images/Chap8-77.gif" /></div></li></ul>

































<h4>
<a id="pgfId-1216458"></a>Modulating a carrier with a digital modulation I and Q file</h4>

<p>
<a id="pgfId-1078818"></a>This capability provides exactly the same capability as the <em>ACPR_Source</em> in rfLib. The I and Q PWL files provide the information to be modulated, and the source acts as an ideal modulator.</p>

<h4>
<a id="pgfId-1078072"></a>IQ modulation I File</h4>

<p>
<a id="pgfId-1078076"></a>This parameter should be set to the filename to the PWL file that contains the digital modulation &#8216;I&#8217; information. This is a file with two columns. The left column is the time, and the right column is the voltage. Usually, the file is generated with a constant delta-T from entry to entry in the file. Generally, this file is provided by the system designer.</p>

<h4>
<a id="pgfId-1078077"></a>IQ modulation Q File</h4>

<p>
<a id="pgfId-1079414"></a>This parameter should be set to the filename to the PWL file that contains the digital modulation &#8216;Q&#8217; information.This is a file with two columns. The left column is the time, and the right column is the voltage. Usually, the file is generated with a constant delta-T from entry to entry in the file. Generally, this file is provided by the system designer.</p>

<h4><em>
<a id="pgfId-1079469"></a>Cosine Filter</em></h4>

<p>
<a id="pgfId-1079470"></a>The raised cosine filter is used when the PWL source is used to define digital modulation. Values are <code>none</code> (default), and <code>nrc</code>. <code>nrc</code> specifies a raised cosine filter to be used on the output waveform of the PWL source. This can be used to lower the numerical noise floor of the modulation specified in the I and Q modulating file. When <code>nrc</code> is selected, the PWL file must have evenly spaced points with timepoints at 1/(2*Bandwidth of the filter).</p>

<h4><em>
<a id="pgfId-1144441"></a>Rolloff factor</em></h4>

<p>
<a id="pgfId-1144442"></a>When <code>nrc</code> is selected, the <em>Rolloff factor</em> (<em>rolloff</em>) of the filter can be specified. The default value is <code>0.2</code>, which is reasonable for simulations. If you consider a continuous waveform, changing the rolloff factor has an effect on the ringing that is produced in the time domain. Smaller rolloff factors produce more ringing in the continuous waveform. Envelope does not simulate the continuous waveform. Instead, envelope samples the waveform at the time interval in the I and Q modulation file. This delta-Time in the I and Q file is always related to the modulation frequency, and it also determines the bandwidth of the cosine filter as described below. The effect of this is that the sampling occurs at the times where the ringing of the filter is zero, thus the cosine filter does not change the spectral content calculated in envelope. It just reduces the numerical noise floor of the input signal.</p>

<h4><em>
<a id="pgfId-1144444"></a>Bandwidth</em></h4>

<p>
<a id="pgfId-1144445"></a>The <em>Bandwidth</em> (<em>pwlbandwidth</em>) of the Cosine Filter. If you want to only allow in-band modulation, this is the channel bandwidth. If you want to allow an accurate ACPR measurement, set the bandwidth to three times the channel bandwidth. If you want to measure two adjacent channels for ACPR, set the bandwidth to five times the channel bandwidth. Note that the I and Q data must have properly spaced time intervals of <img width="92" height="35" src="images/Chap8-78.gif" /><span>for this capability to be used.</span></p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1144449"></a>The <em>Rolloff factor</em> and <em>Bandwidth</em> options are available only when <code>nrc</code> is selected in the <em>Cosine Filter</em> drop-down list box.</div>
<p>
<a id="pgfId-1079415"></a>The <em>Rolloff factor</em> and <em>Bandwidth</em> options are available only when <code>nrc</code> is selected in the Cosine Filter.</p>

<h4>
<a id="pgfId-1066165"></a>Damping factor</h4>

<p>
<a id="pgfId-1228119"></a><em>This property is available in the </em><code>vsin</code><em> and </em><code>isin</code><em> components only.</em></p>
<p>
<a id="pgfId-1066166"></a><em>Damping factor</em><italic>
 
for the sinusoidal waveform. 1/<em>Damping factor</em><italic>
 
specifies the time it takes to change the amplitude by a factor of e. For example, consider the following damped sinusoid:</italic></italic></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1066167"></a>v(t) = A e<superscript>
−σt
 sin(2πft + φ)</superscript></pre>

<p>
<a id="pgfId-1066168"></a>where</p>
<p>
<a id="pgfId-1228138"></a><symbol>
σ 
= <em>Damping factor</em>, A is the amplitude of sinusoid 1, and φ is the <em>Phase for sinusoid 1</em></symbol></p>
<ul><li>
<a id="pgfId-1228139"></a>If<symbol>
 σ
 = 0, the waveform is a pure sinusoid (steady state).</symbol></li><li>
<a id="pgfId-1228140"></a>If<symbol>
 σ
 &lt; 0, the waveform exhibits growing amplitude.</symbol></li><li>
<a id="pgfId-1228141"></a>If<symbol>
 σ
 &gt; 0, the waveform exhibits decaying amplitude.</symbol></li><li>
<a id="pgfId-1066173"></a>The value must be a real number. The default is 0 and the unit is 1/seconds.</li></ul>



<p>
<a id="pgfId-1228169"></a>For the vsin component, <em>am</em> example property list is shown below.</p>

<p>
<a id="pgfId-1228214"></a></p>
<div class="webflare-div-image">
<img width="356" height="732" src="images/Chap8-79.gif" /></div>

<p>
<a id="pgfId-1228170"></a>The amplitude is 1 volt. The initial phase of 90 degrees starts the sine wave at a peak so that the amplitude at 1/100M seconds or 10nsec will be at a peak that can be measured with a marker in the waveform tool. The transient analysis has strobeperiod set so a datapoint at exactly 10nSec is produced in the output. With a positive damping factor, the waveform decays, and the amplitude is 1/e at 10nsec.</p>

<p>
<a id="pgfId-1228224"></a></p>
<div class="webflare-div-image">
<img width="619" height="396" src="images/Chap8-80.gif" /></div>

<p>
<a id="pgfId-1228177"></a>When the damping factor is negative, the amplitude is e (2.7182...) at 10 nsec.</p>

<p>
<a id="pgfId-1228204"></a></p>
<div class="webflare-div-image">
<img width="619" height="399" src="images/Chap8-81.gif" /></div>
<h3>
<a id="pgfId-1066229"></a>Display second sinusoid</h3>
<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1085860"></a>
The check box is a display feature in the form only. If there are properties that are set and the display check box is not selected, although you will not see the parameters in the form, these parameters will still be netlisted, and will still have an effect on the simulation.</div>

<p>
<a id="pgfId-1066230"></a>Displays the CDF parameters for the second sinusoid in the <em>Edit Object Properties</em> and <em>Add Instance</em> forms. When selected, the form expands to show the following CDF parameters:<em> Frequency name 2, Frequency 2, Amplitude 2 (Vpk), Amplitude 2 (dBm), </em>and <em>Phase for Sinusoid 2</em>.</p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1066231"></a>
<italic>
The second sinusoid cannot be modulated.
</italic></div>
<p><strong>Figure 8-9
<a id="pgfId-1066232"></a>Display second sinusoid</strong></p>
<p>
<a id="pgfId-1066236"></a></p>
<div class="webflare-div-image">
<img width="668" height="143" src="images/Chap8-82.gif" /></div>
<h4>
<a id="pgfId-1079908"></a>Frequency name 2</h4>

<p>
<a id="pgfId-1080496"></a>Name for the second sinusoid. After you save the schematic, the name you assign is listed in the <em>Fundamental Tones</em> section of the <em>Choosing Analyses</em> form for pss, qpss, and hb when names is selected.</p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1066238"></a>
If you have two different sources at the same frequency or at integer multiple of the same frequency, make sure that you use the same frequency name 1 or 2 property for both sources. An example might be RF1.</div>

<p>
<a id="pgfId-1066239"></a><em>Frequency 2</em> is the frequency of the second sinusoidal waveform in Hertz. There is no default value.</p>

<h4>
<a id="pgfId-1066240"></a>Amplitude 2 (Vpk)</h4>

<p>
<a id="pgfId-1066241"></a>Peak amplitude of the second sinusoidal waveform. The value specified is the voltage delivered into a matched load. You can select either<em> Amplitude 2 (Vpk) </em>or <em>Amplitude 2 (dBm)</em>, but not both. If <em>Amplitude 2 (Vpk) </em>has a value, the<em> Amplitude 2 (dBm)</em> field is grayed out. The value must be a real number. The default is 1 volt.</p>
<p>
<a id="pgfId-1066242"></a>When you specify the voltage on a <em>port</em>, you are specifying the voltage when the port is properly terminated, and not the voltage on the internal voltage source. Thus, the voltage on the internal source is set to twice the value specified on the <em>port</em>.</p>

<h4>
<a id="pgfId-1066243"></a>Amplitude 2 (dBm)</h4>

<p>
<a id="pgfId-1066244"></a><em>Amplitude 2 (dBm)</em> is the amplitude of the second sinusoidal waveform, in dBm. The resistance for the dBm calculation is taken from the resistance parameter of the port. the value specified is the power delivered into a matched load. You can select either <em>Amplitude 2 (Vpk)</em> or <em>Amplitude 2 (dBm),</em> but not both. If <em>Amplitude 2 (dBm)</em> has a value, the <em>Amplitude 2 (Vpk) </em>field is grayed out. The value must be a real number. Units: dBm</p>

<h4>
<a id="pgfId-1066245"></a>Phase for Sinusoid 2</h4>

<p>
<a id="pgfId-1066246"></a>The phase at the specified <em>Delay time</em> for the second sinusoid. To achieve specified phase while still remaining continuous, the sinusoidal waveform might start before the given <em>Delay time</em>. The value must be a real number. Default: 0 Units: degrees.</p>

<h3>
<a id="pgfId-1066247"></a>Display multi sinusoid</h3>
<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1085904"></a>
The check box is a display feature in the form only. If there are properties that are set and the display check box is not selected, although you will not see the parameters in the form, these parameters will still be netlisted, and will still have an effect on the simulation.</div>

<p>
<a id="pgfId-1081273"></a>Multi sinusoid is a way of generating up to nine unmodulated signals at the same time from the port component. It works in all the large-signal analyses, and is usually used with harmonic balance or qpss-harmonic balance for the simulation of systems with multiple carriers.</p>
<p>
<a id="pgfId-1146596"></a>When <em>Display</em> <em>multi sinusoid</em> is selected, the properties form expands to show more properties. The <em>Number of Frequencies</em> field specifies the number of carriers you want to generate. Up to nine carriers can be generated by the port component. For each one of the frequencies, a set of parameters patterned after: <em>Sinusoid Frequency 1, Sinusoid Ampl 1 (Vpk), Sinusoid Ampl 1 (dBm), </em>S<em>inusoid Phase 1, Sinusoid Maxharm 1 is displayed for each tone you want to generate</em>.</p>
<p>
<a id="pgfId-1069912"></a>When <em>Display multi sinusoid</em> is selected, the frequency specified in the <em>Frequency1</em> parameter should be the middle frequency of the group of frequencies you want to generate. It must be one of the frequencies that could actually be generated by the port component. If four frequencies are to be generated, then the <em>Frequency1</em> property could be either the second or third frequency in the series.</p>
<p>
<a id="pgfId-1081420"></a>Consider an example where 2.43GHz, 2.44GHz, and 2.46GHz need to be generated for a composite triple beat measurement. The actual center frequency is 2.445GHz. Since this is not one of the frequencies in the series that is actually generated, it cannot be picked. Pick one of the frequencies that could be generated on either side of the actual center frequency. Here, the center frequency could be either 2.44GHz or 2.45GHz. Even though 2.45GHz is not being generated in this example, it is one of the frequencies that could be generated by the series, and thus it is eligible to be selected.</p>

<p>
<a id="pgfId-1216964"></a></p>
<div class="webflare-div-image">
<img width="619" height="393" src="images/Chap8-83.gif" /></div>

<p>
<a id="pgfId-1216965"></a>The frequency specified in the <em>Frequency 2</em> field should be the spacing frequency. All the frequencies specified in the multi-frequency section need to be separated by the spacing frequency. In the example above, the spacing frequency is 10MHz.</p>
<p>
<a id="pgfId-1081435"></a>Up to nine frequencies can be generated in one port. When this feature is used with HB or QPSS, only specify the <em>Frequency1</em> and <em>Frequency2</em> frequencies in the frequencies section. The number of harmonics should be set to about two times the total number of tones that are generated in the multi-frequency section.</p>

<p><strong>Figure 8-10
<a id="pgfId-1069913"></a>Display multi sinusoid</strong></p>
<p>
<a id="pgfId-1066253"></a></p>
<div class="webflare-div-image">
<img src="images/Chap8E/33.gif" /></div>
<h4>
<a id="pgfId-1066254"></a>Number of Frequencies</h4>

<p>
<a id="pgfId-1066255"></a>Number of sinusoid frequencies to be specified.</p>

<h4>
<a id="pgfId-1066256"></a>Sinusoid Frequency 1</h4>
<h4>
<a id="pgfId-1066258"></a>The frequency of the first sinusoidal waveform (carrier frequency) in hertz.</h4>
<h4>
<a id="pgfId-1217058"></a>Sinusoid Ampl 1 (Vpk)</h4>

<p>
<a id="pgfId-1066260"></a>The peak amplitude of the sinusoidal waveform that you generate in volts. When you specify the voltage on a <em>port</em>, you are specifying the voltage when the port is properly terminated, and not the voltage on the internal voltage source. Thus, the voltage on the internal source is set to twice the value specified on the <em>port</em>.</p>

<h4>
<a id="pgfId-1066262"></a>Sinusoid Ampl 1 (dBm)</h4>

<p>
<a id="pgfId-1066264"></a>The amplitude of the first sinusoidal waveform when specified in dBm.</p>

<h4>
<a id="pgfId-1066265"></a>Sinusoid Phase 1</h4>

<p>
<a id="pgfId-1066266"></a>The phase at the specified delay time. To achieve a specified phase and still remain continuous, the sinusoidal waveform might start before the given delay time. For example, to generate a cosine wave, set this parameter to pi/2. The units are radians.</p>

<h4>
<a id="pgfId-1066267"></a>Sinusoid Maxharm 1</h4>

<p>
<a id="pgfId-1066268"></a>Do not set this parameter. Harmonics are usually set in the hb or qpss <em>Choosing Analyses</em> form.</p>
<p>
<a id="pgfId-1081838"></a>Below is a plot of the output when the variable <code>prf</code> is set to -40 (dBm).</p>

<p>
<a id="pgfId-1217107"></a></p>
<div class="webflare-div-image">
<img width="627" height="400" src="images/Chap8-85.gif" /></div>

<p>
<a id="pgfId-1146761"></a>The amplitudes of the tones at 2.4G, 2.41G, 2.42G and so on are at the numerical noise floor of the simulation.</p>
<p>
<a id="pgfId-1146779"></a>When these three frequencies are applied to a real system, the nonlinearity of the system produces mixing products. For example, 2.43G mixes with 2.44G to produce 10M. 2.44G mixes with 2.46G to produce 20M. 2.43G mixes with 2.46G to produce 30M. 2.43G, 2.44G, and 2.46G are first order terms, so 10M, 20M, and 30M are second order terms.</p>
<p>
<a id="pgfId-1146795"></a>Now the 10M, 20M, and 30M terms can mix with 2.43G, 2.44G, and 2.46G. For example, 2.44G mixes with 10M to produce 2.45G. 2.44G is a first order term, and 10M is a second order term, so 2.45G is a third order term. 2.43G can mix with 20M to add an additional third order term at 2.45G. This leads to many harmonics that are actually produced, as shown below. The vertical axes have the same scale.</p>

<p>
<a id="pgfId-1217158"></a></p>
<div class="webflare-div-image">
<img width="619" height="395" src="images/Chap8-86.gif" /></div>
<h3>
<a id="pgfId-1066280"></a><a id="38408"></a>Exponential Waveform P<a id="marker-1252517"></a>arameters</h3>

<p>
<a id="pgfId-1066281"></a>To generate an exponential waveform from the <code>port</code> component, set the CDF parameter <em>Source type</em>=<em>exp</em>, as shown in the next figure.</p>

<p><strong>Figure 8-11
<a id="pgfId-1066282"></a>Source type=exp in the Edit Object Properties form</strong></p>
<p>
<a id="pgfId-1066286"></a></p>
<div class="webflare-div-image">
<img width="668" height="370" src="images/Chap8-87.gif" /></div>

<p>
<a id="pgfId-1066287"></a>The exponential waveform can generate one exponential pulse, and cannot generate a periodic signal. This it is not usable with SpectreRF.</p>
<p>
<a id="pgfId-1081890"></a>When you specify the voltage on a <em>port</em>, you are specifying the voltage when the port is properly terminated, and not the voltage on the internal voltage source. Thus, the voltage on the internal source is set to twice the value specified on the <em>port</em>.</p>

<h4>
<a id="pgfId-1081619"></a>Zero value</h4>

<p>
<a id="pgfId-1081620"></a>The <em>Zero value</em> property is the time-zero value of the exponential waveform in volts.</p>

<h4>
<a id="pgfId-1081622"></a>One value</h4>

<p>
<a id="pgfId-1081601"></a>The <em>One value</em> property specifies the voltage that the signal transitions to at time equals zero plus. The default is one volt, which is unlikely to be what you want. Always set this property.</p>

<h4>
<a id="pgfId-1066292"></a>Rise time start</h4>

<p>
<a id="pgfId-1066293"></a>This property specifies the simulation time in seconds to begin the transition from the zero to the one value. The default is zero seconds.</p>

<h4>
<a id="pgfId-1066294"></a>Rise time constant</h4>

<p>
<a id="pgfId-1066295"></a>The <em>Rise time constant</em> specifies the time for the exponential waveform to reach 63 percent of the way from the zero value to the one value. The default is 0.075 percent of the stop time in the transient analysis.</p>

<h4>
<a id="pgfId-1066296"></a>Fall time start</h4>

<p>
<a id="pgfId-1066297"></a>The <em>Fall time start</em> specifies the simulation time to begin the transition from the one state to the zero state. The default is one percent of the transient analysis stop time.</p>

<h4>
<a id="pgfId-1066298"></a>Fall time constant</h4>

<p>
<a id="pgfId-1066299"></a>The <em>Fall time constant</em> specifies the simulation time for the exponential waveform to reach 63 percent of the way from the one value to the zero value. The default is one percent of the stop time in the transient analysis.</p>

<h3>
<a id="pgfId-1079690"></a><a id="10424"></a>Bit Waveform Par<a id="marker-1252530"></a>ameters</h3>

<p>
<a id="pgfId-1079691"></a>To generate bit sequence/string from the port component, select bit in the <em>Source Type</em> cyclic field. The bit source has four states: <code>1</code>, <code>0</code>, <code>m</code>, and <code>z</code>, which represent the high, low, middle voltage/current and high impedance state respectively. It allows patterns defining a sequence of bits. When the <em>m</em> state is specified, the output voltage is set halfway between the zero and one voltage.</p>

<p><strong>Figure 8-12
<a id="pgfId-1079692"></a>Source type=bit in the Edit Object Properties form</strong></p>
<p>
<a id="pgfId-1079696"></a></p>
<div class="webflare-div-image">
<img width="668" height="374" src="images/Chap8-88.gif" /></div>
<h4>
<a id="pgfId-1079697"></a>Delay Time</h4>

<p>
<a id="pgfId-1079701"></a>The <em>Delay time</em> property specifies the time the first bit in the string should be held before the first bit is generated.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1083714"></a>When the delay time property is set, the time of the first transition is at the delay time plus the period of the first bit, which is set by the <em>Period of waveform</em> property.</div>

<h4>
<a id="pgfId-1079702"></a>Zero Value</h4>

<p>
<a id="pgfId-1228991"></a>The <em>Zero value</em> property sets the voltage when the pattern specifies a zero state. The pattern will be defined shortly.</p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1228992"></a>
For the zero and one value, the port is assumed to be terminated with a matching register. The internal voltage source is doubled.</div>

<p class="webflare-indent1">
<a id="pgfId-1229007"></a>If you intend to use the z state of the bit source, do not add a matching resistor across the port terminals, since this resistor will totally negate the high impedance state. Make sure that you halve the voltage values you want for the zero and one states when you use the port element to generate a bit pattern.</p>

<h4>
<a id="pgfId-1228993"></a>One Value</h4>

<p>
<a id="pgfId-1079711"></a>The <em>One value</em> property sets the voltage of the port when the pattern specifies a one.</p>

<h4>
<a id="pgfId-1079712"></a>Period of Waveform</h4>

<p>
<a id="pgfId-1079716"></a>The bit waveform type generates a bit stream where the period defines the period of one of the bits in the stream. For example, if the period property is set to 1n, then every nanosecond the bit switches to the next bit in the sequence.</p>

<h4>
<a id="pgfId-1079717"></a>Rise Time</h4>

<p>
<a id="pgfId-1079721"></a>The <em>Rise time</em> property specifies the transition time from the zero state to the one state.</p>

<h4>
<a id="pgfId-1079722"></a>Fall Time</h4>

<p>
<a id="pgfId-1083780"></a>The <em>Fall time</em> property specifies the transition time from the one state to the zero state.</p>

<h4>
<a id="pgfId-1079728"></a>Pattern Parameter data</h4>

<p>
<a id="pgfId-1079729"></a>This is the bit string, which is a series of the four states; <code>1</code>, <code>0</code>, <code>m</code>, and <code>z</code>. An example is 101100 (not separated by spaces) which would generate a 1, then a zero, then 2 ones in a row, and then two zeros in a row.</p>

<h4>
<a id="pgfId-1083830"></a>rptstart</h4>

<p>
<a id="pgfId-1083831"></a>This specifies the starting bit number when repeating. Default value is <code>1</code>, which causes the first bit in the sequence to be the starting bit for the repeated pattern. The data repeats from the specified bit to the end of the bit string. The value of the parameter should be an integer from 1 to the length of the bit string.</p>

<h4>
<a id="pgfId-1079732"></a>rpttimes</h4>

<p>
<a id="pgfId-1079733"></a>This specifies the number of times the pattern should be repeated after the first sequence is generated. The default value is <code>0</code>. which specifies that the pattern should not be repeated. When its value is <code>negative</code>, the string repeats forever. If a finite number of repeats is specified and the simulation time increases to a time after the last bit is generated, the output will maintain the state of the last bit in the sequence.</p>

<h3>
<a id="pgfId-1083936"></a>Bit Waveform Ex<a id="marker-1252560"></a>amples</h3>

<p>
<a id="pgfId-1079682"></a>Here is the circuit that is used for all the examples.</p>

<p>
<a id="pgfId-1217337"></a></p>
<div class="webflare-div-image">
<img width="668" height="542" src="images/Chap8-89.gif" /></div>

<p>
<a id="pgfId-1084248"></a>The port with the sourcetype set to bit is on the left. Then there is a 1MOhm resistor, and a DC voltage source set to 900mV.</p>

<h4><em>
<a id="pgfId-1084519"></a>Example 1</em></h4>

<p>
<a id="pgfId-1084175"></a>Here is a property list for the first example.</p>

<p>
<a id="pgfId-1217407"></a></p>
<div class="webflare-div-image">
<img width="511" height="747" src="images/Chap8-90.gif" /></div>

<p>
<a id="pgfId-1083980"></a>Here is the output signal which is <em>Out1</em> in the schematic.</p>

<p>
<a id="pgfId-1217469"></a></p>
<div class="webflare-div-image">
<img width="663" height="397" src="images/Chap8-91.gif" /></div>

<p>
<a id="pgfId-1217530"></a>The delay time is 5n, and the bit period is 1n. This causes the signal to start at the first bit which is 1, and hold it for 5nsec. Then, it produces the first bit, which is 1 for the next nanosecond. If you look closely, you can see that the middle of the transition occurs at exactly 6nsec. The start of the transition is half the falltime before. The sequence is 1010110000mmzzzzzzzzzz. You can see the 0, 1, 0 transitions at 7nsec, 8nsec, and 9nsec. Then you see the two 1 states from 9nsec to 11 nsec, and the four 0 states from 11nsec to 15nsec. The next two states are middle states at 0.6v from 15nsec to 17 nsec. Then the output goes to high impedance, where the 900mv DC level at the output is seen. Rpttimes is set to 1, which repeats the pattern once, and the starting bit is the first bit in the sequence, which is a 1. At the end of the 900mv section, the signal transitions to the 1 state, and the entire pattern is repeated again. After the second pattern is done, the last state which is a z state is held after that.</p>

<h4><em>
<a id="pgfId-1084569"></a>Example 2</em></h4>

<p>
<a id="pgfId-1084588"></a>Here is the property list for the second example.</p>

<p>
<a id="pgfId-1217578"></a></p>
<div class="webflare-div-image">
<img width="428" height="691" src="images/Chap8-92.gif" /></div>

<p>
<a id="pgfId-1084616"></a>Everything is the same as the first example except for the repeat start, which is set to 2. This causes the second bit in the sequence, which is a 0, to be the starting bit. At the end of the first pattern, the signal repeats from the second bit in the sequence.</p>

<p>
<a id="pgfId-1217636"></a></p>
<div class="webflare-div-image">
<img width="655" height="400" src="images/Chap8-93.gif" /></div>
<h4><em>
<a id="pgfId-1084639"></a>Example 3</em></h4>

<p>
<a id="pgfId-1084649"></a>Here is the property list for the third example.</p>

<p>
<a id="pgfId-1217706"></a></p>
<div class="webflare-div-image">
<img width="428" height="682" src="images/Chap8-94.gif" /></div>

<p>
<a id="pgfId-1084692"></a>Here, there is no repeat.</p>

<p>
<a id="pgfId-1217763"></a></p>
<div class="webflare-div-image">
<img width="652" height="397" src="images/Chap8-95.gif" /></div>
<h3>
<a id="pgfId-1066301"></a>PRBS Waveform Parameters<a id="prbs_source"></a><a id="PRBS Waveform Parameters"></a><a id="20839"></a></h3>

<p>
<a id="pgfId-1084778"></a>PRBS is an acronym for pseudo-random binary sequence. The PRBS source has three modes. It can be used to generate a maximum-length pseudo-random sequence. You can specify the beginning state and tap gains for a Fibonacci PRBS generator. A third mode allows reading an ascii file that describes the sequence of one and zero events to generate. To select this type of output, set the <em>Source Type</em> to <em>PRBS</em>.</p>
<p>
<a id="pgfId-1089985"></a>For any mode, first you must define the output characteristics.</p>

<p>
<a id="pgfId-1217845"></a></p>
<div class="webflare-div-image">
<img width="483" height="802" src="images/Chap8-96.gif" /></div>
<h4>
<a id="pgfId-1090087"></a>Delay Time</h4>

<p>
<a id="pgfId-1090313"></a>This specifies a time where the source stays at the zero value, and does nothing. The default is zero seconds. At the end of the delay time, the first bit will be produced.</p>

<h4>
<a id="pgfId-1090226"></a>Zero Value</h4>

<p>
<a id="pgfId-1229142"></a>This specifies the analog voltage to generate in the zero state. The default is zero volts. The port internally doubles the specified voltage as usual. To get the correct voltage when using the port, make sure that you add a matching resistor across the port terminals.</p>

<h4>
<a id="pgfId-1217903"></a>One Value</h4>

<p>
<a id="pgfId-1229162"></a>This specifies the analog voltage to generate in the one state. The default is one volt. The port internally doubles the specified voltage as usual. To get the correct voltage when using the port, make sure that you add a matching resistor across the port terminals.</p>

<h4>
<a id="pgfId-1090197"></a>Bit Period</h4>

<p>
<a id="pgfId-1090362"></a>This specifies the time of a single bit. It sets the trigger times between the zero and one state for the duration of a single bit. The transitions begin at the trigger event time. For example, if the <em>Bit Period</em> is 1n, then the first transition starts at 1nSec, the second transition starts at 2nSec, and so on.</p>

<h4>
<a id="pgfId-1090173"></a>Rise Time</h4>

<p>
<a id="pgfId-1090373"></a>This is the zero percent to 100 percent (by default) risetime for the transition from the zero state to the one state. The waveshape of the transition and the definition of risetime are settable.</p>

<h4>
<a id="pgfId-1090155"></a>Fall Time</h4>

<p>
<a id="pgfId-1090380"></a>This is the zero percent to 100 percent (by default) falltime for the transition from the one state to the zero state. The waveshape of the transition and the definition of risetime are settable.</p>

<h4>
<a id="pgfId-1229221"></a>Transition Reference</h4>

<p>
<a id="pgfId-1246352"></a>This specifies the thresholds for the rise time and fall time specification. This can be set to 0 to 100% (default), 10 to 90%, 20 to 80%, 30 to 70%, 40 to 60%, and <em>Specify</em>. When <em>Specify</em> is selected, the lower threshold must be entered. The upper threshold is calculated and is equidistant from the midpoint as the lower threshold. For example, if 22% is set for the lower threshold, 78% will be the upper threshold.</p>

<p>
<a id="pgfId-1246364"></a></p>
<div class="webflare-div-image">
<img width="396" height="781" src="images/Chap8-97.gif" /></div>
<h4>
<a id="pgfId-1246357"></a>Edge Type</h4>

<p>
<a id="pgfId-1229224"></a>The waveform shape of the transition defaults to linear, which generates a traditional pulse with straight edges. Selecting halfsine causes sinusoidal rounding of the edges.</p>

<h4>
<a id="pgfId-1259331"></a>PAM4 mo<a id="pam4"></a>dulat<a id="marker-1260115"></a>ion</h4>

<p>
<a id="pgfId-1259353"></a>The current PRBS source has binary output. When <em>PAM4 modulation</em> is set to <em>PAM4</em>, the <em>prbs</em> source generates four levels of binary instead of two, which allows two bits per symbol instead of one. </p>

<h4>
<a id="pgfId-1259536"></a>PAM4 map<a id="marker-1260124"></a>ping</h4>

<p>
<a id="pgfId-1259555"></a>This option is available only when you select <em>PAM4</em> from the <em>PAM4 modulation</em> drop-down list. It specifies the mapping from a pair of bits to 4-level voltages. If you do not specify a value in this field, the default mapping is taken as 0132. This means:&#160;&#160;&#160;&#160;</p>
<p>
<a id="pgfId-1260153"></a>00 generates 0V</p>
<p>
<a id="pgfId-1259714"></a>01 generates 0.33V</p>
<p>
<a id="pgfId-1259734"></a>11 generates 0.66V</p>
<p>
<a id="pgfId-1259754"></a>10 generates 1.0V</p>

<p>
<a id="pgfId-1259876"></a></p>
<div class="webflare-div-image">
<img width="668" height="791" src="images/Chap8-98.gif" /></div>

<p>
<a id="pgfId-1259700"></a>Note that you are setting the bit period, not the symbol period. The symbol period is twice the bit period in PAM4.</p>

<p>
<a id="pgfId-1259920"></a></p>
<div class="webflare-div-image">
<img width="668" height="429" src="images/Chap8-99.gif" /></div>

<p>
<a id="pgfId-1259895"></a>The output shows four different voltages instead of two. The symbol period is 2ns.</p>

<h4>
<a id="pgfId-1229225"></a>LSFR Mode</h4>

<p>
<a id="pgfId-1229226"></a>This controls whether a maximal length sequence is generated, a file with a pattern of 1 and 0 states ia read and produced, or whether you specify the shift register, taps and starting the shift register state yourself. </p>

<h4><em>
<a id="pgfId-1240642"></a>Maximum Length Sequence LSFR Mode</em></h4>

<p>
<a id="pgfId-1240631"></a>The default is PN32, which generates a maximum length sequence (MLS) with a 32-bit shift register, and alternating 1 and zero states in the shift register as the starting state. To generate a different Maximum Length Sequence, change the seed parameter to define a different starting state, or define your own register, taps, and starting the state manually. Maximum length sequences using 2 to 32 bit shift registers are available. The table below defines the taps for each length of the available shift registers.</p>

<p>
<a id="pgfId-1238616"></a></p>
<table class="webflareTable" id="#id1229227">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1229229">
<a id="pgfId-1229229"></a>Number of bits</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1229231">
<a id="pgfId-1229231"></a>Taps</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229233"></a>2</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229235"></a>2, 1, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229237"></a>3</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229239"></a>3, 2, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229241"></a>4</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229243"></a>4, 3, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229245"></a>5</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229247"></a>5, 3, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229249"></a>6</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229251"></a>6, 5, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229253"></a>7</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229255"></a>7, 6, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229257"></a>8</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229259"></a>8, 6, 5, 4, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229261"></a>9</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229263"></a>9, 5, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229265"></a>10</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229267"></a>10, 7, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229269"></a>11</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229271"></a>11, 9, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229273"></a>12</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229275"></a>12, 6, 4, 1, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229277"></a>13</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229279"></a>13, 4, 3, 1, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229281"></a>14</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229283"></a>14, 5, 3, 1, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229285"></a>15</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229287"></a>15, 14, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229289"></a>16</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229291"></a>16, 15, 13, 4, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229293"></a>17</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229295"></a>17, 14, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229297"></a>18</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229299"></a>18, 11, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229301"></a>19</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229303"></a>19, 6, 2, 1, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229305"></a>20</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229307"></a>20, 17, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229309"></a>21</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229311"></a>21, 19, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229313"></a>22</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229315"></a>22, 21, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229317"></a>23</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229319"></a>23, 18, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229321"></a>24</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229323"></a>24, 23, 22, 17, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229325"></a>25</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229327"></a>25, 22, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229329"></a>26</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229331"></a>26, 6, 2, 1, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229333"></a>27</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229335"></a>27, 5, 2, 1, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229337"></a>28</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229339"></a>28, 25, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229341"></a>29</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229343"></a>29, 27, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229345"></a>30</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229347"></a>30, 6, 4, 1, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229349"></a>31</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229351"></a>31, 28, 0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229353"></a>32</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1229355"></a>32, 22, 2, 1, 0</p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1229213"></a>The taps are numbered from left to right, starting with zero and going through N where N is the number of bits in the shift register.</p>
<p>
<a id="pgfId-1230024"></a>Below is an example with 0 to 100% risetime, linear edge type, with a 32 bit MLS set.</p>

<p>
<a id="pgfId-1235594"></a></p>
<div class="webflare-div-image">
<img width="465" height="799" src="images/Chap8-100.gif" /></div>

<p>
<a id="pgfId-1230025"></a>When this runs in the transient, first the alternating pattern of bits defined as the starting state of the shift register is produced, and then the sequence begins.</p>

<p>
<a id="pgfId-1230067"></a></p>
<div class="webflare-div-image">
<img width="619" height="398" src="images/Chap8-101.gif" /></div>

<p>
<a id="pgfId-1230010"></a>Looking closer, the transition begins at exactly 1nSec.</p>

<p>
<a id="pgfId-1251495"></a></p>
<div class="webflare-div-image">
<img width="641" height="399" src="images/Chap8-102.gif" /></div>
<h4><em>
<a id="pgfId-1249767"></a>Specify Bit File LSFR Mode</em></h4>

<p>
<a id="pgfId-1240722"></a>In this mode, an ASCII file with a sequence of 1 and 0 states is read. In this way, any arbitrary sequence can be used in the PRBS source. The states in the file are read from left to right, and if the time of the simulation exceeds the number of bit states in the file, the pattern will repeat. An example of a bit file is shown below.</p>

<p>
<a id="pgfId-1247786"></a></p>
<div class="webflare-div-image">
<img width="567" height="287" src="images/Chap8-103.gif" /></div>

<p>
<a id="pgfId-1240738"></a>When the file with the bit pattern is available, set the LFSR mode to <em>Specify bit file</em>, and use the file browser to select the file. If you specify the filename manually, enter the complete path to the file for the file name. An example with the external bit file is shown below.</p>

<p>
<a id="pgfId-1247352"></a></p>
<div class="webflare-div-image">
<img width="396" height="761" src="images/Chap8-104.gif" /></div>

<p>
<a id="pgfId-1240942"></a>Note that the pattern in the file is reproduced, and repeats, as shown below.</p>

<p>
<a id="pgfId-1240662"></a></p>
<div class="webflare-div-image">
<img width="619" height="396" src="images/Chap8-105.gif" /></div>
<h4><em>
<a id="pgfId-1230116"></a>Specify Seed and Taps LFSFR Mode</em></h4>

<p>
<a id="pgfId-1230117"></a>To use this feature, you must set the <em>Seed</em> and <em>Tap</em> information. The general configuration of a 6-bit Fibonacci shift register is as follows:</p>

<p>
<a id="pgfId-1218027"></a></p>
<div class="webflare-div-image">
<img width="661" height="259" src="images/Chap8-106.gif" /></div>

<p>
<a id="pgfId-1090524"></a>The boxes on the top are the shift register bits. The non-inverters in the middle can either be switched on or off, and are controlled by the taps vector. Taps zero and N (The taps at both ends of the shift register) are always on, which enables the circular connections. The shift register is clocked every period, and the bit shifts right. Depending on the setting of the feedback taps, different bits of the shift register can change the next bit that is loaded into the beginning (left) of the shift register. This logic is asynchronous. The adders at the bottom do modulo-2 addition, which is equivalent to an exclusive-or logic function.</p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1090514"></a>
There are different conventions for numbering the taps. Please note that in Spectre, the taps are numbered from left to right, starting at zero. The bits in the shift register are numbered from left to right starting at one.</div>
<h4>
<a id="pgfId-1090435"></a>Seed</h4>

<p>
<a id="pgfId-1090466"></a>This is a list of bit numbers to set to the one state that are used to preload the shift register at time zero. An example is 1 3 5, which would load the first, third, and fifth bits with the one state, and the rest of the bits to the zero state. If the size of the shift register is smaller than the data, the higher bit numbers are simply discarded. The default is to set all the odd bits to the one state.</p>

<h4>
<a id="pgfId-1090449"></a>Taps</h4>

<p>
<a id="pgfId-1091227"></a>This is a list of the taps to set to one, and also defines the length of the shift register. In the above example, the numbers 1, 2, 3, 4, and 5 can be specified. Additionally, 6 must be set to define the length to be 6 bits. The zero tap and the tap with the highest value in the Taps field are always set to 1. By convention, the first number is the number of bits in the shift register, and the next series of numbers are in descending order and control the gain of the taps. In Spectre, the numbers can be specified in any order, and the largest number sets the size of the shift register. For example, 6 4 2 (separated by spaces) specifies a 6-bit shift register with G2 and G4 set to one. The rest of the gains are set to zero, or an open connection. Also note that 6 4 and 4 6 give the same sequence. The largest number in the string sets the size of the shift register, and the rest of the numbers define which taps are on and off. If the <em>Taps</em> field has a single number, this defines the size of the shift register, and the values in the<em> Seed </em>field will endlessly circle through the shift register.</p>

<h4>
<a id="pgfId-1218306"></a>Detailed Example of Setting the Taps</h4>

<p>
<a id="pgfId-1218307"></a>To manually specify the seed and taps, you must first set the LSFR Mode to Specify seed and taps. Next, set the size of the shift register, and define the taps. In this example, the size is set to six, and the fourth tap is enabled. The setting of the Taps property is 6 4 as shown below. To set the bits in the shift register to the digital pattern 000011, set 5 6 in the <em>Seed</em> property. This will load the one state into the rightmost 2 bits of the 6 bit shift register.</p>

<p>
<a id="pgfId-1218132"></a></p>
<div class="webflare-div-image">
<img width="480" height="783" src="images/Chap8-107.gif" /></div>

<p>
<a id="pgfId-1090844"></a>The internal bits get set, as shown below. When the tap is on, it is a connection. When it is off, it is an open. When the adders that are not shown have a zero on the top connection, they take the bit from the right, add zero, which just brings that bit to the left. The other adders just become wired connections.</p>

<p>
<a id="pgfId-1218424"></a></p>
<div class="webflare-div-image">
<img width="604" height="255" src="images/Chap8-108.gif" /></div>

<p>
<a id="pgfId-1218425"></a>The taps vector enables G4, which brings the fourth bit from the left to the adder for that section. The adder sees a zero and a 1, so the output is 1. This 1 will be loaded in to the shift register at the next clock event.</p>
<p>
<a id="pgfId-1090873"></a>At the next clock, the 1 from the output of the adder is loaded into the leftmost bit, and the contents shift right.</p>

<p>
<a id="pgfId-1218449"></a></p>
<div class="webflare-div-image">
<img width="604" height="253" src="images/Chap8-109.gif" /></div>

<p>
<a id="pgfId-1090894"></a>The output of the right bit is still 1, and the 4th bit from the left is still 0, so the output of the adder stays at 1.</p>
<p>
<a id="pgfId-1090901"></a>At the next clock, the 1 is loaded in the leftmost bit, and the data shifts right.</p>

<p>
<a id="pgfId-1218512"></a></p>
<div class="webflare-div-image">
<img width="604" height="253" src="images/Chap8-110.gif" /></div>

<p>
<a id="pgfId-1090937"></a>Now, the adder sees zero on both inputs, so the output changes to zero. This is loaded in the next clock, and the data shifts right.</p>

<p>
<a id="pgfId-1218543"></a></p>
<div class="webflare-div-image">
<img width="604" height="257" src="images/Chap8-111.gif" /></div>

<p>
<a id="pgfId-1090926"></a>If you look at the sequence of the bits on the right side of the shift register so far, 1 1 0 0 has been generated. The sequence is from left to right. The first bit is a 1.</p>
<p>
<a id="pgfId-1147305"></a>Continuing this exercise, it can be shown that the bits on the output should be 1 1 0 0 0 0 1 1 0 0 1 1 1 1 1 1 0 0 0 0 for the first 20 bits. </p>
<p>
<a id="pgfId-1147081"></a>Now assume a bit period of 1nsec, The first bit, which is a 1, is generated from zero seconds to 1 nsec. The second bit, which is a 1, is generated from 1nsec to 2nsec. The third bit, which is a zero, is generated from 2nsec to 3nsec, The first transition from a 1 to a zero occurs at 2nsec. The bit sequence above would generate transitions at 2n, 6n, 8n, 10n, and 16n, which is shown in the result below.</p>

<p>
<a id="pgfId-1218614"></a></p>
<div class="webflare-div-image">
<img width="619" height="397" src="images/Chap8-112.gif" /></div>
<h3>
<a id="pgfId-1230245"></a>Jitter Gen<a id="Jitter Generation"></a>eration</h3>

<p>
<a id="pgfId-1230246"></a><strong>Random Jitter</strong></p>
<p>
<a id="pgfId-1230247"></a>The PRBS source can generate random jitter, periodic jitter, or a combination of both types of jitter. For periodic jitter, up to three periodic jitter sources can be specified. First, random jitter will be considered. The property for setting random jitter is <em>RJ(rms)</em>.</p>
<p>
<a id="pgfId-1230248"></a><strong>RJ(rms)</strong></p>
<p>
<a id="pgfId-1230249"></a>This property defines one standard deviation for random jitter to be generated in the PRBS output waveform. Random jitter with a gaussian distribution will be generated on the transitions of the output waveform. This example has 20 psec jitter added, as shown below.</p>

<p>
<a id="pgfId-1230757"></a></p>
<div class="webflare-div-image">
<img width="428" height="759" src="images/Chap8-113.gif" /></div>

<p>
<a id="pgfId-1230254"></a><strong>RJ(seed)</strong></p>
<p>
<a id="pgfId-1241314"></a>This is an optional property that can be used to generate different jitter sequences. Specify an integer in this field. The default value is 1.</p>
<p>
<a id="pgfId-1241281"></a>Next, this was run for 20 microseconds using the transient, and plotted in the waveform tool. To see the jitter, first select the trace, and then select <em>Measurements</em> - <em>Eye Diagram</em>.</p>

<p>
<a id="pgfId-1230801"></a></p>
<div class="webflare-div-image">
<img width="619" height="510" src="images/Chap8-114.gif" /></div>

<p>
<a id="pgfId-1230259"></a>The eye diagram assistant starts. The data has a periodicity of 1 nsec, To put all the transitions in the center of the eye, a 0.5 nsec <em>Start Time</em> is set, along with the 1 nsec periodicity of the output signal. The timing variations blur the transitions in the center.</p>

<p>
<a id="pgfId-1230843"></a></p>
<div class="webflare-div-image">
<img width="619" height="396" src="images/Chap8-115.gif" /></div>

<p>
<a id="pgfId-1230264"></a>To see where the wave is centered, a zoom operation was performed, and a vertical marker has been placed at 0.5 nsec.</p>

<p>
<a id="pgfId-1230893"></a></p>
<div class="webflare-div-image">
<img width="619" height="397" src="images/Chap8-116.gif" /></div>

<p>
<a id="pgfId-1230268"></a>In order to get standard deviation calculation, we need to modify the shift register so that it provides a periodic output. This is done in the example below by setting the seed to 13 5, which sets a 1 state in the first, third, and fifth bit, and then taps is set to 6, which rotates the pattern through the shift register endlessly. In this way, a square wave is generated with a periodicity of 2 nsec. This periodicity is needed in order for the standard deviation functions to work.</p>

<p>
<a id="pgfId-1230926"></a></p>
<div class="webflare-div-image">
<img width="428" height="743" src="images/Chap8-117.gif" /></div>

<p>
<a id="pgfId-1230273"></a>Now the transient is run for a large number of cycles. in the example below, it is run for 20usec, which gives 10,000 cycles of shift register output.</p>

<p>
<a id="pgfId-1230975"></a></p>
<div class="webflare-div-image">
<img width="619" height="398" src="images/Chap8-118.gif" /></div>

<p>
<a id="pgfId-1231067"></a>Select the trace, click the right mouse button and select <em>Send To Calculator</em>. This starts the calculator. Select the <em>abs_jitter</em> function. Set the threshold as appropriate for your circuit. 0.5 is appropriate for this example. Also set the period of the waveform in the <em>Tnom</em> field.</p>

<p>
<a id="pgfId-1231096"></a></p>
<div class="webflare-div-image">
<img width="462" height="724" src="images/Chap8-119.gif" /></div>

<p>
<a id="pgfId-1231087"></a>Click <em>OK</em>.</p>
<p>
<a id="pgfId-1230284"></a>Now, plot the signal. The jitter plots, as shown below.</p>

<p>
<a id="pgfId-1230288"></a></p>
<div class="webflare-div-image">
<img width="619" height="399" src="images/Chap8-120.gif" /></div>

<p>
<a id="pgfId-1230295"></a>Now add the <em>stddev</em> function in the calculator. Send the result to a table.</p>

<p>
<a id="pgfId-1231169"></a></p>
<div class="webflare-div-image">
<img width="462" height="724" src="images/Chap8-121.gif" /></div>

<p>
<a id="pgfId-1230300"></a>The result is very close to the 20psec setting in the <code>prbs</code> source.</p>

<p>
<a id="pgfId-1231198"></a></p>
<div class="webflare-div-image">
<img width="561" height="134" src="images/Chap8-122.gif" /></div>
<h4>
<a id="pgfId-1230301"></a>Periodic Jitter</h4>

<p>
<a id="pgfId-1230302"></a>Periodic jitter can be generated in the <code>prbs</code> source by setting the number of periodic jitter sources, choosing the waveshape for each jitter source, setting the frequency of each periodic jitter source, and by defining the delta-T (peak) for each jitter source in the <em>PJ(amplitude)</em> field. Jitter waveforms can be sinusoidal, triangular, or square wave. Below is an example of a single periodic sinusoidal jitter source at 500KHz with 100psec peak jitter.</p>

<p>
<a id="pgfId-1231242"></a></p>
<div class="webflare-div-image">
<img width="428" height="732" src="images/Chap8-123.gif" /></div>

<p>
<a id="pgfId-1230307"></a>Run in the transient, and then send the waveform to the calculator. Apply the <em>abs_jitter</em> function as before. The jitter waveform is shown below.</p>

<p>
<a id="pgfId-1231288"></a></p>
<div class="webflare-div-image">
<img width="619" height="397" src="images/Chap8-124.gif" /></div>

<p>
<a id="pgfId-1230311"></a>The curve seems to indicate only the negative jitter. An eye diagram was plotted to check the actual timing of the edges.</p>

<p>
<a id="pgfId-1231320"></a></p>
<div class="webflare-div-image">
<img width="619" height="499" src="images/Chap8-125.gif" /></div>

<p>
<a id="pgfId-1230315"></a>Note that the jitter is actually centered at 1nsec, which is the timing of the noise-free waveform. The <em>abs_jitter</em> function takes the time of the first transition of the time-domain waveform as the center time of the jitter calculation. As a result, the center value can be skewed if the timing of the first edge is not noise free. </p>
<p>
<a id="pgfId-1230319"></a>Below is an example of a triangle wave with 100psec peak jitter.</p>

<p>
<a id="pgfId-1231357"></a></p>
<div class="webflare-div-image">
<img width="619" height="398" src="images/Chap8-126.gif" /></div>

<p>
<a id="pgfId-1230323"></a>Again, with an eye diagram, the transitions are centered around 1nsec.</p>

<p>
<a id="pgfId-1246637"></a></p>
<div class="webflare-div-image">
<img width="619" height="399" src="images/Chap8-127.gif" /></div>
<h4>
<a id="pgfId-1246638"></a>Two Periodic Jitter sources at the Same Time</h4>

<p>
<a id="pgfId-1246639"></a>Up to three periodic jitter sources can be set at the same time. Specify the number of periodic sources you want, and define the jitter parameters for each jitter source. An example with two jitter sources is shown below.</p>

<p>
<a id="pgfId-1246644"></a></p>
<div class="webflare-div-image">
<img width="444" height="820" src="images/Chap8-128.gif" /></div>

<p>
<a id="pgfId-1246648"></a>The resulting abs_jitter plot is shown below. Both jitter sources are in the output.</p>

<p>
<a id="pgfId-1247603"></a></p>
<div class="webflare-div-image">
<img width="619" height="397" src="images/Chap8-129.gif" /></div>

<p>
<a id="pgfId-1246649"></a></p>
<p>
<a id="pgfId-1246650"></a></p>
<p>
<a id="pgfId-1246651"></a></p>
<p>
<a id="pgfId-1246652"></a></p>
<p>
<a id="pgfId-1246653"></a></p>
<p>
<a id="pgfId-1246654"></a></p>
<p>
<a id="pgfId-1246655"></a></p>
<p>
<a id="pgfId-1246656"></a></p>

<h4>
<a id="pgfId-1246657"></a>Random and Periodic Jitter at the Same Time</h4>

<p>
<a id="pgfId-1246658"></a>Both random and periodic jitter can be added at the same time. Below is an example of setting both in the <code>prbs</code> source.</p>

<p>
<a id="pgfId-1231439"></a></p>
<div class="webflare-div-image">
<img width="369" height="664" src="images/Chap8-130.gif" /></div>

<p>
<a id="pgfId-1230333"></a>The <em>abs_jitter</em> plot shows both random and periodic jitter</p>

<p>
<a id="pgfId-1231474"></a>.</p>
<div class="webflare-div-image">
<img width="619" height="394" src="images/Chap8-131.gif" /></div>
<h3>
<a id="pgfId-1230335"></a>PRBS Mode External Trigg<a id="marker-1252986"></a>ering</h3>

<p>
<a id="pgfId-1230336"></a>When the <code>prbs</code> source is externally triggered, the schematic Pcell redraws for the source, and two control terminals are added to the left of the source. This is shown below.</p>

<p>
<a id="pgfId-1231503"></a></p>
<div class="webflare-div-image">
<img width="199" height="157" src="images/Chap8-132.gif" /></div>

<p>
<a id="pgfId-1230340"></a>When the source is externally triggered, periodic and random noise generators are turned off. The properties form specifies the voltage level for the trigger and the edge mode for the trigger. In the example below, the trigger threshold is 0.5 Volts and the trigger is on the rising edge.</p>

<p>
<a id="pgfId-1231547"></a></p>
<div class="webflare-div-image">
<img width="434" height="781" src="images/Chap8-133.gif" /></div>

<p>
<a id="pgfId-1230345"></a>Note that the jitter terms are greyed out, indicating that the jitter is not available in the external trigger mode.</p>
<p>
<a id="pgfId-1230346"></a>When the threshold is reached on the input waveform, the output begins the transition to the opposite state. The timestep is actively controlled in the region of the trigger threshold to make the signal trigger very accurately. In the waveform window below, the blue trace is the input, and the trace symbols are on and mark the timesteps actually used in the simulation. As the threshold is reached, the timestep is actively managed so that the crossing is accurately detected.</p>

<p>
<a id="pgfId-1231583"></a></p>
<div class="webflare-div-image">
<img width="619" height="393" src="images/Chap8-134.gif" /></div>

<p>
<a id="pgfId-1230353"></a>The jitter is also very small, as seen below.</p>

<p>
<a id="pgfId-1231603"></a></p>
<div class="webflare-div-image">
<img width="561" height="92" src="images/Chap8-135.gif" /></div>

<p>
<a id="pgfId-1230354"></a>The calculator expression is shown on the left, and this is the same expression used before in this section to calculate the jitter.</p>

<h3>
<a id="pgfId-1230355"></a>PRBS Source with External Triggering Using a Pulse or PWL Signal</h3>

<p>
<a id="pgfId-1230356"></a>The external triggering capability of the <code>prbs</code> source depends on being able to calculate the slope of the input signal in order to accurately trigger at the specified voltage. The pulse and pwl sources guarantee timepoints at the corners of the waveforms, but they do not guarantee timepoints during the transition, especially if the transition is short. In that case, the prbs will trigger on the timepoint on the end of the transition as shown below.</p>

<p>
<a id="pgfId-1231637"></a></p>
<div class="webflare-div-image">
<img width="619" height="397" src="images/Chap8-136.gif" /></div>

<p>
<a id="pgfId-1230360"></a>The threshold for the trigger is 0.5 volts, and the input signal is the red trace. The actual timepoints of the input (red trace) are turned on, and the output starts its transition when the input is at 1 volt instead of at 0.5 Volts. This adds a slight delay in the prbs output, which in many cases is not significant. If you need to trigger on the actual threshold, then add a resistor and capacitor across the source as shown below. Set the R*C product to be the risetime of the input signal.</p>

<p>
<a id="pgfId-1231668"></a></p>
<div class="webflare-div-image">
<img width="555" height="561" src="images/Chap8-137.gif" /></div>

<p>
<a id="pgfId-1230364"></a>Adding these components adds numerical integration, and the error of this integration is controlled by Spectre by adding appropriate timepoints. This establishes a slope of the input signal so the trigger event can happen at the desired threshold of 0.5 volts in this example as shown below. The green trace below is the junction of the resistor and capacitor that was added to the circuit. Again, the timepoints are turned on for the input trace.</p>

<p>
<a id="pgfId-1231700"></a></p>
<div class="webflare-div-image">
<img width="619" height="393" src="images/Chap8-138.gif" /></div>

<p>
<a id="pgfId-1230237"></a>Keep the R*C product equal to the risetime of the pulse source or slightly less so the timestep is not excessively reduced for a long period of time.</p>

<h3>
<a id="pgfId-1260736"></a>Oscillator Macro Parameters</h3>

<p>
<a id="pgfId-1260779"></a>The <em>oscmacro</em> source can be used to generate oscillator waveform and noise in pss-pnoise and hb-hbnoise analysis. The <em>oscmacro</em> source does not generate noise in transient analysis.</p>

<p>
<a id="pgfId-1260903"></a></p>
<div class="webflare-div-image">
<img width="668" height="537" src="images/Chap8-139.gif" /></div>
<h4><em>
<a id="pgfId-1260878"></a>File Name</em></h4>

<p>
<a id="pgfId-1260921"></a>Specifies the file name containing the harmonics and noise data results from hb and hbnoise analyses. For more information, see <a href="Chap3.html#22283">Creating an Oscillator Macro Source</a>.</p>

<h4><em>
<a id="pgfId-1261102"></a>Freq scale</em></h4>

<p>
<a id="pgfId-1261115"></a>Specifies the frequency scaling factor. This is a multiplier for the frequency of the source. The default value is 1.0 which uses the frequency in the specified file.</p>

<h4><em>
<a id="pgfId-1261190"></a>Amplitude scale</em></h4>

<p>
<a id="pgfId-1261209"></a>Specifies the amplitude scaling factor. This is a multiplier for the amplitude of the output. The default value is 1.0 which uses the amplitude in the specified file.</p>

<h3>
<a id="pgfId-1084746"></a>Noise Param<a id="marker-1253034"></a>eters</h3>
<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1085726"></a>
The check box is a display feature in the form only. If there are properties that are set and the display check box is not selected, although you will not see the parameters in the form, these parameters will still be netlisted, and will still have an effect on the simulation.</div>

<p>
<a id="pgfId-1218843"></a>The noise parameters include <em>Noise temperature</em>, <em>Noise Entry Method</em>, <em>Noise file name, Noise type, Interpolation method</em>, and <em>Noise/Frequency points</em>.</p>
<p>
<a id="pgfId-1248460"></a>The <em>Noise type</em> selection sets one of two basic modes. When <em>Noise type</em> is set to <em>Noise Voltage</em>, pure noise voltage is injected for the noise analysis. In this mode, you specify frequency-volts-squared per Hertz pairs either in a file, or manually entered into the form. The second mode is to inject pure phase noise. In this mode, you specify frequency&#8212;ssb phase noise in dBc/Hz pairs. Phase noise is only available when the <em>Source type</em> property is set to <em>sine</em>.</p>
<p>
<a id="pgfId-1248657"></a>Voltage noise is observed in transient noise, but phase noise is not.</p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1248470"></a>
This mode can be tricky. Remember that for all noise analyses, the noise specified will be extrapolated outside the frequency range that is specified. When pnoise or hbnoise is used, this extrapolation can cause noise at harmonics of the large-signal frequency, which may result in more noise than expected. Make sure that you specify a noise frequency below the lowest frequency with zero as the noise setting, and specify an additional noise point slightly above the last point with the noise set to zero.</div>

<p>
<a id="pgfId-1251792"></a>The first example shown below has voltage noise injected. The default linear interpolation should be used when the noise data has linear spacing. If the noise data has log spacing, log-log interpolation will cause the noise analysis to be more accurate.</p>

<p>
<a id="pgfId-1251787"></a></p>
<div class="webflare-div-image">
<img width="429" height="705" src="images/Chap8-140.gif" /></div>

<p>
<a id="pgfId-1248791"></a>When phase noise is selected, log-log interpolation is always used. The frequency terms for the phase noise data should be the offset frequency from the carrier. The noise term should be single-sideband phase noise (ssbpha<a id="marker-1254073"></a>senoise) in dBc/Hz. The phase noise will be injected above and below the frequency for the first sinusoid the source produces.</p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1248808"></a>
This mode can be tricky. Remember that for all noise analyses, the noise specified will be extrapolated outside the frequency range that is specified. When pnoise or hbnoise is used, this extrapolation can cause noise at harmonics of the large-signal frequency, which may result in more noise than expected. Make sure that you specify a noise frequency below the lowest frequency with minus 400 as the noise setting, and specify an additional noise point slightly above the last point with the noise set to minus 400 as well.</div>

<p>
<a id="pgfId-1248908"></a>An example of phase noise is shown below</p>

<p>
<a id="pgfId-1251817"></a>.</p>
<div class="webflare-div-image">
<img width="369" height="803" src="images/Chap8-141.gif" /></div>
<h4>
<a id="pgfId-1066304"></a>Noise tempera<a id="marker-1066303"></a>ture</h4>

<p>
<a id="pgfId-1218943"></a><italic>
The 
<em>Noise temperature</em> of the <em>port</em> resistor in degrees Celsius. If this is not specified, the <em>Noise temperature</em> is assumed to be the temperature that is set by the temperature option. When you compute the noise figure of a circuit driven at its input by a <em>port</em>, set the <em>Noise temperature</em> of the <em>port</em> to 16.85C (290K). This setting matches the standard IEEE definition of noise figure. In addition, disable all other sources of noise in the <em>port</em>, such as the Spectre parameters <em>Noise file name</em> and eliminate any entries you have in the fields that appear when you select <em>Noise/Frequency points</em>. If you want a noiseless <em>port</em>, set the <em>Noise temperature</em> to absolute zero or below, and do not specify a noise file<em> </em>or Noise/Frequency points. Absolute zero is -273C. The default noise temperature is 290C. </italic></p>

<h4>
<a id="pgfId-1066306"></a>Noise Entry Method</h4>

<p>
<a id="pgfId-1066307"></a>You can select one of the two ways to enter noise data, either by specifying a <em>File</em> name or entering a series of <em>Noise/Frequency points</em>.</p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1091377"></a>
Entering noise points define AM noise only. There is no mechanism in the port for including PM noise from a noise file.</div>
<h4>
<a id="pgfId-1066308"></a>Noise file name</h4>

<p class="webflare-indent1">
<a id="pgfId-1066309"></a>If <em>Noise Entry Method </em>= <em>File</em> is selected, you enter the name of the file containing the noise data in the form of frequency-noise pairs. In your file, list the <italic>
frequency-noise pairs
 as one pair per line with a space or tab between the frequency and noise values. The first entry is the frequency, and the second value is volts-squared per Hertz.</italic></p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1085498"></a>
Frequencies outside the range specified in the noise file are interpolated, and not zero. If you want zero, make sure that you specify zero over the range you want. Remember that in pnoise, a wide range of noise frequencies are typically evaluated, and this interpolation can cause more noise than expected in the analysis. If you want to see what the source is actually generating, make a circuit with a port and a terminating resistor, and run linear noise over a very wide frequency range. Then plot the noise at the output of the port.</div>
<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1087458"></a>
If you want just the noise specified in the file and nothing more, set the noise temperature of the port to -273. The default is to generate the noise from the file and add to it the noise from the resistor in the port. Setting the noise temperature to -273 makes the noise fro the resistor be zero.</div>
<p><strong>Figure 8-13
<a id="pgfId-1066310"></a>Display noise parameters: Noise Entry Method=File</strong></p>
<p>
<a id="pgfId-1066314"></a></p>
<div class="webflare-div-image">
<img width="669" height="118" src="images/Chap8-142.gif" /></div>
<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1066315"></a>
The check box is a display feature in the form only. If there are properties that are set and the display check box is not selected, although you will not see the parameters in the form, these parameters will still be netlisted, and will still have an effect on the simulation.</div>
<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1147687"></a>
If you want just the noise specified in the noise file and nothing more, set the noise temperature of the port to -273. The default is to generate the noise from the file and add to it the noise from the resistor in the port. Setting the noise temperature to -273 makes the noise from the resistor be zero.</div>
<h4>
<a id="pgfId-1085663"></a>Num. of noise/freq pairs</h4>

<p>
<a id="pgfId-1066316"></a>If the <em>Noise Entry Method</em> is set to <em>Noise/Frequency points</em>, you specify the <em>Number of noise/freq pairs</em><italic>
. The form expands to let you type in the designated 
<em>Freq</em><italic>
 and 
<em>Noise</em><italic>
 values
. The noise values must be in volts-squared per Hz, and frequency in Hz. The maximum number of points in the form is 10.</italic></italic></italic></p>
<p>
<a id="pgfId-1066317"></a>The example below has the <em>Number of noise/freq pairs</em> set to 3.</p>

<p><strong>Figure 8-14
<a id="pgfId-1066318"></a>Display noise parameters: Noise Entry Method=Noise/Frequency Points</strong></p>
<p>
<a id="pgfId-1066322"></a></p>
<div class="webflare-div-image">
<img width="668" height="282" src="images/Chap8-143.gif" /></div>
<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1236256"></a>
If you want just the noise specified in the <em>Num. of noise/freq pairs</em> properties and nothing more, set the noise temperature of the port to -273. The default is to generate the noise from the noise properties and add to it the noise from the resistor in the port. Setting the noise temperature to -273 makes the noise from the resistor be zero.</div>
<h3>
<a id="pgfId-1236259"></a><a id="66743"></a>Small-Signal Param<a id="marker-1253071"></a>eters</h3>
<h4>
<a id="pgfId-1066325"></a>Display small signal params</h4>
<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1086031"></a>
The check box is a display feature in the form only. If there are properties that are set and the display check box is not selected, although you will not see the parameters in the form, these parameters will still be netlisted, and will still have an effect on the simulation.</div>

<p>
<a id="pgfId-1066326"></a>If selected, the <em>Edit Object Properties</em>/<em>Add Instance</em> form expands to show the small-signal properties <em>PAC Magnitude</em>, <em>PAC Magnitude (dBm)</em>, <em>PAC phase</em>, <em>AC Magnitude</em>, <em>AC phase</em>, and <em>XF Magnitude</em>.</p>

<p><strong>Figure 8-15
<a id="pgfId-1066327"></a>Display small signal params</strong></p>
<p>
<a id="pgfId-1066331"></a></p>
<div class="webflare-div-image">
<img width="669" height="201" src="images/Chap8-144.gif" /></div>

<p>
<a id="pgfId-1066332"></a>When you specify the voltage on a <em>port</em>, you are specifying the voltage when the port is properly terminated, and not the voltage on the internal voltage source. Thus, the voltage on the internal source is set to twice the value specified on the <em>port</em>. The same is true for the values for the transient, AC, and PAC signals. However, the amplitude of the sine wave in the PAC and transient analysis can alternatively be specified as the power in dBm delivered by the <code>port</code> when terminated with the reference resistance. The <em>PAC magnitude</em> property is used by pac, hbac, and qpac. The <em>XF Magnitude</em> property is used by xf, pxf, hbxf, and qpxf.</p>

<h4>
<a id="pgfId-1066333"></a>PAC Magnitude</h4>

<p>
<a id="pgfId-1066334"></a>The peak periodic AC analysis magnitude. Setting this value to unity is a convenient way of computing the transfer function from this source to the output.</p>
<p>
<a id="pgfId-1066335"></a>You can select either<em> PAC magnitude </em>or <em>PAC magnitude (dBm)</em>, but not both. If <em>PAC magnitude </em>has a value, the<em> PAC magnitude (dBm) </em>field is grayed out. The PAC magnitude property is used by pac, hbac, and qpac.</p>

<h4>
<a id="pgfId-1066336"></a>PAC Magnitude (dBm)</h4>

<p>
<a id="pgfId-1066337"></a>The periodic AC analysis magnitude in dBm (alternative to<em> PAC magnitude</em>). You can select either<em> PAC magnitude </em>or <em>PAC magnitude (dBm)</em>, but not both. If <em>PAC magnitude (dBm) </em>has a value, the<em> PAC magnitude </em>field is grayed out. The <em>PAC magnitude(dBm)</em> property is used by pac, hbac, and qpac.</p>

<h4>
<a id="pgfId-1066338"></a>PAC phase</h4>

<p>
<a id="pgfId-1066339"></a>The periodic AC analysis phase. The value must be a real number. The default value is 0 and the units is in degrees.</p>
<p>
<a id="pgfId-1236273"></a>Typically, only one source in the circuit has a <em>PAC magnitude</em> set to a value other than zero, and many times it has a <em>PAC magnitude</em>=1 and <em>PAC phase</em>=0. However, there are situations where more than one source has a nonzero <em>PAC magnitude</em>. For example, applying a differential small-signal input could be done with two sources with the <em>PAC magnitude</em>s<em> </em>set to 0.5 and the <em>PAC phase</em>s set to 0 and 180. The <em>PAC Phase</em> property is used by pac, hbac, and qpac.</p>
<p>
<a id="pgfId-1236274"></a>You do not specify the PAC frequency in the port <em>Edit Object Properties</em> form. Instead, you set the PAC frequency in the PAC <em>Choosing Analyses form</em>. For example, when making an IP3 measurement, you set the PAC frequency to a variable value in the <em>Choosing Analyses</em> form. Then, you enter the same variable in the <em>PAC Amplitude</em> (or <em>PAC Amplitude dBm</em>) field of the <em>port</em> <em>Edit Object Properties</em> form.</p>

<h4>
<a id="pgfId-1066342"></a>AC Magnitude</h4>

<p>
<a id="pgfId-1066343"></a>The peak small-signal voltage for the ac analysis in volts.</p>

<h4>
<a id="pgfId-1066344"></a>AC phase</h4>

<p>
<a id="pgfId-1066345"></a>The ac small-signal phase in degrees.</p>
<p>
<a id="pgfId-1066346"></a>Typically, only one source in the circuit has <em>AC Magnitude</em> set to a value other than zero, and many times it has an <em>AC magnitude</em>=1 and <em>AC phase</em>=0. However, there are situations where more than one source has a non-zero <em>AC magnitude</em>. For example, you can apply a differential small-signal input with two sources with the <em>AC magnitude</em>s set to 0.5 and the <em>AC phase</em>s<em> </em>set to 0 and 180.</p>

<h4>
<a id="pgfId-1066347"></a>XF Magnitude </h4>

<p>
<a id="pgfId-1066348"></a>This property is seldom used. It specifies the transfer function analysis magnitude. This is used by xf, pxf, hbxf, and qpxf.</p>

<h3>
<a id="pgfId-1066350"></a><a id="72546"></a>Temperature Effect Par<a id="marker-1253082"></a>ameters</h3>

<p>
<a id="pgfId-1066351"></a>Temperature effect parameters include <em>Linear temp. coefficient</em>, <em>Quadratic temp. coefficient</em>, and <em>Nominal temperature</em>.</p>

<h4>
<a id="pgfId-1066352"></a>Display temperature params</h4>
<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1086798"></a>
The check box is a display feature in the form only. If there are properties that are set and the display check box is not selected, although you will not see the parameters in the form, these parameters will still be netlisted, and will still have an effect on the simulation</div>

<p>
<a id="pgfId-1066353"></a>If the check box is selected, the <em>Edit Object Properties</em>/<em>Add Instance</em> form expands and the following three parameters appear in the form:<em> Linear temp. coefficient, Quadratic temp. coeff., </em>and <em>Nominal temperature</em>.</p>

<p><strong>Figure 8-16
<a id="pgfId-1066354"></a>Display temperature params</strong></p>
<p>
<a id="pgfId-1066358"></a></p>
<div class="webflare-div-image">
<img width="669" height="114" src="images/Chap8-145.gif" /></div>
<h4>
<a id="pgfId-1066359"></a>Linear temp. coefficient</h4>

<p>
<a id="pgfId-1066360"></a>This property sets the first order (linear) temperature coefficient of all the<em> </em>voltages<em> </em>specified for any waveform in the port. 0.01 entered in the <em>Linear temp. coefficient</em> field is interpreted as a one percent change per degree Celsius. If the number is positive, the voltages increase with temperature. If the number is negative, the voltages decrease with temperature. If the temperature moves far enough, the values can become negative.</p>

<h4>
<a id="pgfId-1066361"></a>Quadratic temp. coeff.</h4>

<p>
<a id="pgfId-1066362"></a>This property sets the second order (quadratic) temperature coefficient of all the<em> voltages</em> the source generates. 0.01 causes a change in value of one percent per degree squared.</p>

<h4>
<a id="pgfId-1066363"></a>Nominal temperature</h4>

<p>
<a id="pgfId-1066364"></a><italic>
The 
<em>Nominal temperature </em>(tnom) for the linear and quadratic temperature coefficients.</italic></p>

<h2>
<a id="pgfId-1066383"></a><a id="34542"></a>Simulating Tabulated S-Parameters Using the Nport Component</h2>

<p>
<a id="pgfId-1088181"></a>Np<a id="marker-1253091"></a>ort from analogLib provides a generic way to incorporate an S-Parameter file into a circuit simulation. The nport component allows you to set the number of ports, and when this is done, the schematic symbol re-draws with the number of ports shown. There is also n1port, n2port, n3port, and n4port in analogLib, which have a fixed number of ports. These components are provided for legacy purposes only, and should not be used in current simulations.</p>
<p>
<a id="pgfId-1088198"></a>For the frequency-domain based analyses, such as ac, noise, xf, stb, pz, harmonic balance, hbac, hbxf, and hbnoise, the S-Parameter file is used directly in the frequency domain. For the DC and transient based simulations dc, tran, and shooting, a time-domain model must be created from the frequency-domain description in the S-Parameter file. This is a non-trivial process.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1227850"></a>Currently, the improvements to the nport component are restricted to transient analysis only.</div>
<p>
<a id="pgfId-1088247"></a>In general, there are two different ways to create a time-domain model from an S-Parameter file. One way is to do a rational fit, which attempts to match the frequency domain description using a combination of poles, zeros, and gain blocks. The other way uses a convolution-based approach. This approach calculates the impulse response, and then creates a time-domain model based on the impulse response.</p>
<p>
<a id="pgfId-1088258"></a>Regardless of the method, there are fundamental requirements for the S-Parameter file. These are:</p>
<ul><li>
<a id="pgfId-1088265"></a>The file must contain a frequency point that is low enough so that when the DC point is extrapolated, the DC point correctly defines your circuit behavior.<br />
<a id="pgfId-1088275"></a>This is a fundamental requirement. To run a transient, first you need to run the DC analysis to capture the time-zero timepoint. If the first frequency in the file is not zero frequency, then a zero-frequency point must be extrapolated. If the first frequency in the S-Parameter file is not low enough to accurately represent the real DC characteristics of the system, the DC extrapolation will be incorrect.</li><li>
<a id="pgfId-1088285"></a>The phase of the DC point must be zero or 180 degrees.</li><li>
<a id="pgfId-1091780"></a>The frequency-domain data must be dense enough to accurately describe the transfer function.<br />
<a id="pgfId-1088302"></a>Smooth transfer functions without local complex behavior might need relatively few datapoints. Systems with complicated behavior need to have enough datapoints to capture the behavior well enough so that when the data is interpolated between the given points, and the interpolation error is small.<br />
<a id="pgfId-1093906"></a>For bandpass filters, make sure that data from near zero Hz through at least the frequency of the highest harmonic in the simulation is present in the S-Parameter file.</li><li>
<a id="pgfId-1088295"></a>The frequency data must exist to a high enough frequency so that harmonics of the system are accurately simulated.<br />
<a id="pgfId-1088312"></a>If your S-Parameter file has data only through the second harmonic of the input signal and you are calculating six harmonics in a large-signal analysis, just note that the S-Parameter data above the second harmonic is extrapolated. The simulation is not based on real data, and as a result, it is different from the real system. If you want your simulation to be accurate for the harmonics you are simulating, make sure that the S-Parameters themselves go high enough in frequency.</li><li>
<a id="pgfId-1088332"></a>As a strong suggestion, regardless of the source of the data, plot the data from your S-Parameter file before you simulate. The plot for all the S-Parameters should plot in a clockwise arc with no sudden jumps. These discontinuities cause large inaccuracies in the transient model. Spectre now checks for discontinuities in the S-Parameter data.</li></ul>








<p>
<a id="pgfId-1219313"></a>To plot an S-Parameter file directly in the waveform tool, the file format must be in Touchstone1 format. Here are the steps required to plot an S-Parameter form an S-Parameter file.</p>
<ol><li>
<a id="pgfId-1219314"></a>From the ADE Explorer window, select <em>Tools</em>-<em>Waveform</em>.</li><li>
<a id="pgfId-1219315"></a>In the waveform tool, select <em>File</em>-<em>Open Results</em>, and browse to the location of the S-Parameter file.<br />
<a id="pgfId-1219407"></a><div class="webflare-div-image">
<img width="614" height="366" src="images/Chap8-146.gif" /></div></li><li>
<a id="pgfId-1147985"></a>When the file is selected, the waveform tool has the path to the results at the top-left and the S-Parameter filename at the bottom. If you started from ADE Explorer, you may also have the path to the psf file on the upper left.<br />
<a id="pgfId-1219609"></a><div class="webflare-div-image">
<img width="578" height="449" src="images/Chap8-147.gif" /></div></li><li>
<a id="pgfId-1219614"></a>Double-click the filename. The S-Parameters in the file are displayed.<br />
<a id="pgfId-1219721"></a><div class="webflare-div-image">
<img width="619" height="397" src="images/Chap8-148.gif" /></div></li><li>
<a id="pgfId-1219722"></a>On the upper left, select <em>Impedance</em> or <em>Admittance</em>. This tells the waveform tool to plot on a Smith Chart.<br />
<a id="pgfId-1219690"></a><div class="webflare-div-image">
<img width="619" height="396" src="images/Chap8-149.gif" /></div></li><li>
<a id="pgfId-1219844"></a>Click one of the S-Parameters. Click the right mouse button and select <em>Move to Plot Signal</em>. The signal plots.<br />
<a id="pgfId-1219848"></a><div class="webflare-div-image">
<img width="619" height="396" src="images/Chap8-150.gif" /></div><div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1219849"></a>
S11 above has visible piecewise-linear behavior at low frequencies. This S-Parameter file will produce incorrect time-domain results at the frequencies between the inflection points in the S-Parameter plot.</div></li></ol>

























<h4>
<a id="pgfId-1088347"></a>Potential Problems with S-Parameter Files</h4>

<p>
<a id="pgfId-1088381"></a>Not all frequency domain descriptions are causal. This is a fundamental requirement for the time-domain model to be accurate. When Spectre reads in an S-Parameter description and causality is being checked, the transfer function from the highest frequency in the S-Parameter file through three times the highest frequency in the S-Parameter file is adjusted to enforce causality. Frequencies above three times the frequency in the S-Parameter file should be avoided.</p>

<h3>
<a id="pgfId-1088408"></a>Convolution-Ba<a id="marker-1253138"></a>sed Method</h3>

<p>
<a id="pgfId-1088418"></a>The convolution-based method is strongly suggested for most simulations. This method is used when the interpolation method is set to linear or spline. The default interpolation method is linear, and the convolution-based method is the default.</p>
<p>
<a id="pgfId-1148164"></a>The convolution-based method samples the frequency-domain data, and then calculates the impulse response for that frequency description. Then a Fourier transform is used to create the DC and time-domain model.</p>
<p>
<a id="pgfId-1088439"></a>Considerable development has been made in MMSIM12.1 so that the only thing that should be required is to set the S-parameter file name, the interpolation method, and the number of ports. The default settings are strongly recommended for all other parameters. By default, the impulse responses are cached. This allows the reuse of previously computed impulse response files, thereby saving a lot of time in simulations after the first time the simulation is run. If multiple instances in the schematic use the same S-Parameter file, the impulse response is calculated only once. The impulse response may need to be recalculated if you specifically set some of the properties that are available in the nport. Except for the <em>Passivity</em> parameter and the <em>Accuracy</em> parameter, changing any other property is highly discouraged unless you are an expert in simulating S-Parameters. The old Impulse response will not be erased. If you switch back to the previous settings in the nport, those files will still be available, and will still be reused. The location of the files depends on the setting of the <em>nportfiledir</em> option which is documented later.</p>
<p>
<a id="pgfId-1066384"></a>S-Parameter files with a large number of ports require lengthy calculations. In many cases, although there are a large number of ports in the S-Parameter file, only a small number of ports are actually connected in the circuit. This is common for package models. Starting with the MMSIM 12.1.1 release, the number of calculations can be reduced by eliminating the unused ports from the circuit, thus, improving the simulation time. This is done at the beginning of the simulation, and affects all the analyses that are specified to be run. If there is a component in the circuit connected to a port in the circuit, it is kept. If there is no connection, this port is removed. If you desire to monitor the output of a port that is not connected, add a large resistor to ground on this port so you can see what appears on this connection point. By default, if there are 20 ports or more, and 80% or less are actually connected to other components, the nport will be compressed. There are also global options in the <em>Simulation</em> - <em>Options</em> - <em>Analog form</em> (<em>Components</em> tab) to set compression explicitly.</p>

<h3>
<a id="pgfId-1250933"></a>Rational Fit M<a id="marker-1253143"></a>ethods</h3>

<p>
<a id="pgfId-1250947"></a>There are two rational fit methods. In general, these methods fit the data using poles and zeros to match the S-Parameter data. Of the two methods, bbspice is preferred. Bbspice is used to do the rational fit. The product bbspice has many desirable features such as non-causal data identification that are not implemented in the nport. For this method, set the <em>Interpolation method</em> to <em>bbspice</em>.</p>

<h2>
<a id="pgfId-1231881"></a><a id="12570"></a>Using the nport Com<a id="marker-1253159"></a>ponent</h2>

<p>
<a id="pgfId-1231882"></a>The nport symbol is a schematic Pcell, which redraws when you change the number of ports. The symbol has two different modes. At the top of the properties list, is a selection called <em>Common reference</em>, which is a check box. If the item is not checked, plus and minus pins will be displayed for all the individual ports. If the check box is selected, then the symbol redraws with a single common ground reference pin at the bottom of the symbol. This eliminates the need to add ground connections to each port of the symbol. The check box is highlighted in the properties list below.</p>

<p><strong>Figure 8-17
<a id="pgfId-1231829"></a>nport Component Edit Object Properties Form</strong></p>
<p>
<a id="pgfId-1067841"></a></p>
<div class="webflare-div-image">
<img width="669" height="591" src="images/Chap8-151.gif" /></div>

<p>
<a id="pgfId-1231920"></a>The symbol without the selection is shown on the left in the figure below, and the symbol with the selection is shown on the right.</p>

<p>
<a id="pgfId-1231947"></a></p>
<div class="webflare-div-image">
<img width="314" height="146" src="images/Chap8-152.gif" /></div>

<p>
<a id="pgfId-1231907"></a>Use the <italic>
nport
 component to read in S-parameter data. Follow these steps to prepare the component for use in SpectreRF simulations.</italic></p>

<p><strong>Figure 8-18
<a id="pgfId-1231993"></a>nport Component Edit Object Properties Form</strong></p>
<p>
<a id="pgfId-1231997"></a></p>
<div class="webflare-div-image">
<img width="669" height="586" src="images/Chap8-153.gif" /></div>

<ol><li>
<a id="pgfId-1067588"></a>Select the <em>nport</em> component from <em>analogLib</em>.</li><li>
<a id="pgfId-1066407"></a>Place the <em>nport</em> component in the schematic window.</li><li>
<a id="pgfId-1232021"></a>Set whether you want a single ground terminal on the nport symbol or not.</li><li>
<a id="pgfId-1152293"></a>Set the number of ports that are in the S-Parameter file.</li><li>
<a id="pgfId-1066408"></a>In the Schematic window, highlight the new component and then choose <em>Edit &#8211; Properties &#8211; Objects, or use the bindkey </em>you have set up for setting properties.<br />
<a id="pgfId-1152327"></a>The <em>Edit Object Properties</em> form for the <em>nport</em> component is displayed.</li><li>
<a id="pgfId-1152328"></a>Click the file browser button located to the right of <em>Browse and select the s-data file</em> in the properties form. From the browser, select the S-Parameter file.<br />
<a id="pgfId-1220095"></a><div class="webflare-div-image">
<img width="600" height="374" src="images/Chap8-154.gif" /></div>
<a id="pgfId-1220162"></a>Alternatively, type in the S-Parameter data filename. If you specify just the filename in the port component (not the complete filename starting from slash), then in ADE Explorer, select <em>Setup</em> - <em>Simulation Files</em>, and enter the path to the directory that contains the S-Parameter file in the <em>Include Paths</em> section. This is necessary so that the file can be found.<br />
<a id="pgfId-1220173"></a><div class="webflare-div-image">
<img width="619" height="270" src="images/Chap8-155.gif" /></div><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1257862"></a>You can also specify an S-parameter file as a design variable. To do this, select the <em>S-parameter file as Design Var?</em> check box and enter the name of the variable in the <em>S-parameter data file</em> field. However, this action does not add the file in ADE Explorer automatically even when you select the <em>Variables</em> - <em>Copy from CellView</em> menu option. You need to manually add a design variable in ADE Explorer and enter the file name <code>&quot;/&lt;path&gt;/&lt;file_name&gt;.s2p&quot;</code> surrounded by quotes in the <em>Value</em> field. </div></li><li>
<a id="pgfId-1220167"></a>Although the properties form is labeled S-Parameter data file, it can also be a Y-Parameter or Z-Parameter file. Spectre recognizes all three formats. It is labeled this way because S-Parameter files are more common than Y or Z-Parameter files.</li><li>
<a id="pgfId-1156556"></a>Set the <em>Interpolation method</em> cyclic field.<br />
<a id="pgfId-1066415"></a>The <em>linear</em> and <em>spline</em> values are usually preferable to <em>rational. If you want a rational fit, bbspice is preferred over rational. </em>In general, the recommended method is <em>linear.</em><br />
<a id="pgfId-1088888"></a>Linear and spline control the sampling of the S-Parameter data for the convolution-based method. In both methods, the S-parameter data is sampled using a linear frequency spacing from zero to three times the highest frequency in the S-Parameter data file in order to calculate the impulse response of the transfer function.<br /><div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1156633"></a>
Note that when the S-Parameter file is for a physically large structure like a package model, because of the physical size of the structure, the inductance drops starting in the range of 100KHz to 1MHz. To correctly model this behavior, you require data in the S-parameter file that accurately describes this behavior, and it requires a huge number of frequency sample points in order to get a correct time-domain model.</div><br />
<a id="pgfId-1156650"></a>When <em>linear</em> is selected as the interpolation method, linear interpolation is used to get a datapoint needed in the sample that is not directly in the S-Parameter file. Spline uses a cubic spline algorithm. Cubic spline can occasionally introduce errors when there are rapid changes in the transfer functions defined in the S-Parameter file near the sample point.<br />
<a id="pgfId-1156611"></a>When the data in the S-Parameter file is dense, linear and spline produce comparable results. When the data in the S-Parameter file is sparse, non-physical results can be introduced because of the wiggles that can be introduced by a polynomial fit. Linear is usually a better choice when the data is sparse.<br />
<a id="pgfId-1066416"></a>When you select <em>rational</em>, four new fields are displayed. For information about these fields, see <a href="Chap8.html#22684">Controlling Rational Fit Accuracy</a>.</li><li>
<a id="pgfId-1263896"></a>Specify whether you want the passivity check to run. Setting <em>Passivity</em> to <em>no</em> causes no passivity check to be run. Setting <em>Passivity</em> to <em>check</em>, which is the default, will run a passivity check, and the result of the check will be sent to the Spectre output window. The S-Parameter file will be used as specified. <br />
<a id="pgfId-1263916"></a>If <em>Passivity</em> is set to <em>enforce</em>, the passivity check will be run, and the S-Parameter file will be changed as necessary to ensure the passivity of the result. Note that this will change the S-Parameters as specified in the file if a non-passive entry is detected. The <em>no</em>, <em>check</em>, and <em>enforce</em> options are applicable only when the interpolation method is set to <em>linear</em>, <em>spline</em>, or <em>rational</em>.<br />
<a id="pgfId-1264146"></a>If <em>Interpolation Method</em> is set to <code>bbspice</code>, passivity may be set to <em>fit_weak_enforce</em> or <em>fit_enforce</em>. The default value is <em>fit_enforce</em> and with this setting the simulator always attempts to create a passive simulation model and favors passivity over accuracy. When <em>Passivity</em> is set to <em>fit_weak_enforce</em>, the simulator does not create a passive model if the passivity enforcement phase results in a significant accuracy loss.</li><li>
<a id="pgfId-1066422"></a>If exceptional accuracy is desired, select <em>Conservative</em> for the Accuracy default. This will cause more frequency-domain sample points, and produce a more accurate impulse response at the cost of runtime. <em>Default</em> accuracy is set tight enough that <em>Conservative</em> should only be needed in rare instances.<br />
<a id="pgfId-1093964"></a>When the DC or transient-based simulation is run, Spectre provides information about the S-Parameter file and the impulse response file in the output window.<br />
<a id="pgfId-1220427"></a><div class="webflare-div-image">
<img width="594" height="618" src="images/Chap8-156.gif" /></div></li></ol>


































<h3>
<a id="pgfId-1232108"></a>Nport Comp<a id="marker-1253213"></a>ression</h3>

<p>
<a id="pgfId-1232109"></a>In cases where package models are used, many ports may be specified in the S-Parameter file, but only a small number of ports are actually connected to the circuit for simulation. Although the nport caches the data from the S-Parameter file, with a large number of ports, the extraction time can be an issue. To speed these extractions, the S-Parameter file can be compressed, which removes the unused ports from the extraction and from the simulation result, but causes the extraction to be considerably faster. The extraction time is reduced to the square of the connected port fraction. If 10% of the ports are connected, the extraction time goes to 0.01*old extraction time.</p>
<p>
<a id="pgfId-1232110"></a>Unused ports are ports that are not connected to any circuit component, ports that are connected to ground, or ports that are shorted together.</p>
<p>
<a id="pgfId-1232206"></a>By default, if there are 10 or more ports in the S-Parameter file, and less then 80% of the ports are connected, nport compression runs. First, the connections to ground and shorted ports are applied, then an s-parameter analysis runs to capture the performance of the connected ports. That file is written to the netlist directory by default, and has a global option to control the location. To find the netlist directory, first determine the location of the simulation directory by selecting <em>Setup</em> - <em>Simulator/Directory/Host</em> menus in ADE Explorer, and read the location of the <em>Project</em> Directory. Navigate to this directory, then type <em>cd &lt;circuit_Name&gt;/spectre/&lt;schematic_or_config&gt;/netlist</em>. The compressed filename is the original S-Parameter filename with an extension. This is the file that is actually used for the simulation.</p>
<p>
<a id="pgfId-1232112"></a>Note that this occurs before any of the analyses are run, so all the simulation results from all the analyses will have data for only the ports that have circuit connections. If you want to monitor the result on a port that you do not want to connect to the circuit, add a large resistor to ground that is connected to that port so that the data for that port is saved.</p>

<h4>
<a id="pgfId-1232113"></a>Controlling the Directory for the Compressed S-Parameter File</h4>

<p>
<a id="pgfId-1232114"></a>This directory can be set using the global options form by selecting <em>Simulation</em> - <em>Options</em> - <em>Analog</em>, and then selecting the <em>Component</em> tab. Specify a full pathname to the desired directory location in the <em>nportcompressfiledir</em> field.</p>
<p>
<a id="pgfId-1232115"></a>Compression can also be controlled manually by selecting <em>yes</em> or <em>no</em> for the <em>nportcompress</em> option.</p>
<p>
<a id="pgfId-1232120"></a>These options are shown below.</p>

<p>
<a id="pgfId-1232307"></a></p>
<div class="webflare-div-image">
<img width="529" height="560" src="images/Chap8-157.gif" /></div>
<h4><em>
<a id="pgfId-1232121"></a>nportunusedportgmin</em></h4>

<p>
<a id="pgfId-1232122"></a>This option adds resistors to nport pins that are not connected to circuit components. Setting a small value (on the order of 1e-9 to 1e-3) adds a resistor with conductance set to this value from each unconnected pin to ground. This introduces a small error, but adds a small amount of damping to the nport response. This is sometimes useful for obtaining a passive response.</p>

<h4><em>
<a id="pgfId-1232123"></a>nportunusedportrmin</em></h4>

<p>
<a id="pgfId-1232098"></a>This option adds resistors in series with nport pins that are shorted together. Setting a small value (on the order of 1e-3 to 1 ohm) adds a resistor with resistance set to this value in series with the connection between pins. This introduces a small error, but adds a small amount of damping to the nport response. This is sometimes useful for obtaining a passive response.</p>

<h4>
<a id="pgfId-1088978"></a>Advanced transient convolution parameters</h4>

<p>
<a id="pgfId-1157754"></a>These properties are provided for S-Parameter simulation experts only.</p>

<p>
<a id="pgfId-1220491"></a></p>
<div class="webflare-div-image">
<img width="445" height="699" src="images/Chap8-158.gif" /></div>
<h4><em>
<a id="pgfId-1092529"></a>Max sampling points</em></h4>

<p>
<a id="pgfId-1088970"></a><em>Max sampling points</em> defines the maximum number of frequency points to be sampled in the adaptive algorithm. The default is 131072. In every case, encountered so far, the actual number of samples taken by the adaptive algorithm is much smaller than the default. In extremely unusual cases, it can be raised to 262144.</p>

<h4><em>
<a id="pgfId-1092564"></a>Max frequency of interest</em></h4>

<p>
<a id="pgfId-1157360"></a>The property <em>Max frequency of interest</em> should not be changed unless you are an expert in the simulation of S-Parameter files.</p>
<p>
<a id="pgfId-1157361"></a><em>Max frequency of interest</em> (fmax) controls the highest frequency for the frequency domain sampling of the S-Parameter file. Leave this property at the default. The default is three times the highest frequency in the S-Parameter file.</p>

<h4><em>
<a id="pgfId-1092590"></a>Impulse response truncation</em></h4>

<p>
<a id="pgfId-1089035"></a><em>Impulse response truncation</em> is used to deliberately cut off the tail of the impulse response which might theoretically continue to infinite time. Leave this property at the default of 1e-4, which corresponds to a gain of -80 dB.</p>

<h4><em>
<a id="pgfId-1232538"></a><em>Causality Correction</em></em></h4>

<p>
<a id="pgfId-1232539"></a>The <em>Causality Correction</em> drop-down list contains three choices: <em>no</em>, <em>fmax</em>, or <em>auto</em>. <em>fmax</em> is the default and is highly recommended. Causality enforcement is required in order to have reasonable results from an nport in either the DC or transient-based analyses. Causality correction is performed by setting the transfer function between the highest frequency in the S-Parameter file and three times this frequency so that the data becomes causal. The data within the frequencies specified in the S-Parameter file is unchanged. Setting causality to <code>fmax</code> or <code>auto</code> overrides the setting of the high frequency extrapolation property.</p>
<ul><li>
<a id="pgfId-1232419"></a><em>no</em> does not add a causality check.<br /><div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1232420"></a>
Setting the causality check to <em>no</em> is incredibly risky unless you are absolutely sure that the S-Parameter file is causal as described.</div></li><li>
<a id="pgfId-1089067"></a><em>fmax</em> retains the data in the frequency range of the S-parameter file, and then adds a transfer function above the frequency range in the S-parameter file to force the system to be causal. This transfer function extends to the setting of <em>Max frequency of interest</em>, which defaults to three times the highest frequency in the S-Parameter file. If you suspect that the maximum frequency of interest needs to be changed, use causality Auto instead, if you are not an expert.</li><li>
<a id="pgfId-1089068"></a><em>auto</em> applies the causality correction in a similar manner to choosing <em>fmax</em>. <em>auto</em> can also vary the maximum frequency of interest if it needs to get a causal time-domain model.</li></ul>






<h4><em>
<a id="pgfId-1092663"></a>DC extrapolation</em></h4>

<p>
<a id="pgfId-1089009"></a>The <em>DC extrapolation</em> can be set to <em>constant</em> or <em>unwrap</em>. <em>constant</em> projects the first point down to zero frequency at exactly the same level. <em>unwrap</em> does an estimation based on the first few frequency points in the S-Parameter file. The default is <em>constant</em>.</p>

<h4>
<a id="pgfId-1228268"></a>Noise Pa<a id="marker-1253239"></a>rameters</h4>

<p>
<a id="pgfId-1228269"></a>These properties should never be needed.</p>

<h4><em>
<a id="pgfId-1228270"></a>Thermal noise</em></h4>

<p>
<a id="pgfId-1228271"></a>Thermal noise defaults to <em>yes</em>. If you want to disable noise production, set to <em>no</em>.</p>

<h4><em>
<a id="pgfId-1228272"></a>Thermal noise model</em></h4>

<p>
<a id="pgfId-1228273"></a>Thermal noise model defaults to external, which reads the noise parameters in the S-parameter file if it is available, and if not, it uses an internal noise model. Internal forces the internal noise model.</p>

<h4><em>
<a id="pgfId-1228274"></a>Noise correlation</em></h4>

<p>
<a id="pgfId-1228256"></a>The default is complex. The noise parameters in the S-parameter file might have real and imaginary parts. By default, if these parameters are complex, Spectre observes them. In some cases, passive components may have complex noise parameters in the noise file, which is theoretically not possible. In this case, set <em>Noise correlation</em> to <em>real</em>.</p>

<h4>
<a id="pgfId-1092149"></a>Rarely Used Parameters</h4>

<p>
<a id="pgfId-1157826"></a>These properties should never be needed.</p>

<p>
<a id="pgfId-1220646"></a></p>
<div class="webflare-div-image">
<img width="428" height="736" src="images/Chap8-159.gif" /></div>
<h4><em>
<a id="pgfId-1092711"></a>S-Parameter data format</em></h4>

<p>
<a id="pgfId-1092346"></a><em>S-Parameter data format</em> is not needed because Spectre can directly parse an S, Y, or Z-parameter file in Spectre, Touchstone1, Touchstone2, CITI file, RFM, or Sigrity BNP format file.</p>
<p>
<a id="pgfId-1092347"></a>Note that the Touchstone1 file format now provides support for multiple impedances at each port. This is done in the header of the file. When R is listed, then multiple values can be entered up to the maximum number of ports in the file. If a number is omitted, then that number takes on the value of the first R entry.</p>
<p>
<a id="pgfId-1092348"></a>For example, <code>#GHz RI R 50 1 1 50</code> means the frequency numbers are in GHz. The data is in real-imaginary format. The resistance is 50 Ohms on port 1 and 4, and 1 Ohm on ports 2 and 3.</p>
<p>
<a id="pgfId-1092349"></a><code>#GHz RI R 50 10 20 30</code> means 50 ohms on port 1, 10 ohms on port 2, 20 ohms on port 3, and 30 ohms on port 4.</p>
<p>
<a id="pgfId-1068961"></a><code>#GHz RI R 50 10</code> means 50 ohms on ports 1, 3and 4, and 10 ohms on port 2.</p>

<h4><em>
<a id="pgfId-1092334"></a>Causal s-param output file</em></h4>

<p>
<a id="pgfId-1092740"></a>Enter a filename beginning with slash (/) in this field. Specifying a filename causes the S-Parameter data after causality correction to be placed in this file. This file will be created the first time a tstab or transient simulation runs after the file is specified. This file can then be plotted directly in the waveform display tool. Most of the time, the data within the S-Parameter file frequencies is not disturbed, and the data between the highest frequency and three times the highest frequency is the data that is added to make the time-domain model causal. Below is a comparison of the raw data and the causality-corrected data. The red trace is the original data.</p>

<p>
<a id="pgfId-1220759"></a></p>
<div class="webflare-div-image">
<img width="619" height="402" src="images/Chap8-160.gif" /></div>

<p>
<a id="pgfId-1093402"></a>This has the data plotted on a linear X-Axis.</p>

<p>
<a id="pgfId-1093409"></a></p>
<div class="webflare-div-image">
<img width="619" height="401" src="images/Chap8-161.gif" /></div>

<p>
<a id="pgfId-1092792"></a>This has the data plotted on the Smith Chart. The original data is in red, and the causality-corrected data is in blue.</p>
<p>
<a id="pgfId-1157606"></a>Here is the original data in the Smith Chart.</p>

<p>
<a id="pgfId-1220842"></a></p>
<div class="webflare-div-image">
<img width="619" height="397" src="images/Chap8-162.gif" /></div>
<h4><em>
<a id="pgfId-1093457"></a>Passivity tolerance</em></h4>

<p>
<a id="pgfId-1092747"></a>This property is only used when the <em>Passivity</em> property is set to <em>check</em> or <em>enforce</em>. Passivity tolerance does not need to be set. The default is 1e-6. This defines how close to unity gain should be modified by the passivity check and enforcement. Passivity will be enforced and/or reported when the gain is (<code>1 - Passivity tolerance</code>) or greater.</p>

<h4><em>
<a id="pgfId-1092826"></a>Data truncation threshold</em></h4>

<p>
<a id="pgfId-1092849"></a>Leave this property at the default of 1e-3, which corresponds to -60dB gain. When the cross coupling terms become smaller than the data truncation threshold, they are ignored. Cross coupling is the coupling from one port to another port.</p>

<h4><em>
<a id="pgfId-1092905"></a>Frequency sampling interval</em></h4>

<p>
<a id="pgfId-1092875"></a><em>Frequency sampling interval</em> sets the delta frequency for the sampling from zero to the maximum frequency of interest. Leave this property at the default value. With adaptive sampling, this should never be necessary. If used, this delta should be a power of two divisor of the maximum frequency of interest.</p>

<h4><em>
<a id="pgfId-1092958"></a>Multiplier</em></h4>

<p>
<a id="pgfId-1092931"></a>Multiplier specifies how many nport devices to put in parallel. This is rarely used.</p>

<h4><em>
<a id="pgfId-1092985"></a>Scale Factor</em></h4>

<p>
<a id="pgfId-1092999"></a>This scales the frequency of the S-Parameter file. For example, many S-Parameter files have the frequency in GHz. In this case, set the <em>Scale factor</em> to 1e9.</p>

<h4><em>
<a id="pgfId-1093044"></a>High freq extrapolation</em></h4>

<p>
<a id="pgfId-1093021"></a>This property should not be used. This property is ignored when causality correction is applied. The <em>High freq extrapolation</em> field can be set to <em>constant</em> or <em>linear</em>. If the causality check is not run, <em>constant</em> maintains the same amplitude and phase as the last point in the S-parameter file to infinite frequency. <em>linear</em> keeps the amplitude constant at the last frequency point, but the phase increases linearly with frequency.</p>

<h4><em>
<a id="pgfId-1093089"></a>Flag for matrix form input</em></h4>

<p>
<a id="pgfId-1093062"></a><em>Flag for matrix form of input</em> should not be needed to be set. In the past, each time the simulation ran, the impulse response was calculated for every port of every instance of the nport every time the simulation was started. In some cases, especially with a large number of ports, this could take considerable time. This flag was provided so the step of calculating the impulse response could be skipped. Since the impulse response is cached and available for re-use at any time, this property should never be needed.</p>

<h4><em>
<a id="pgfId-1093116"></a>Additional parameter list</em></h4>

<p>
<a id="pgfId-1066440"></a>This field is typically used by beta customers to unlock new features. Note that when this feature is used, a warning message will be issued. This warning can be ignored.</p>

<h2>
<a id="pgfId-1066442"></a><a id="22684"></a>Controlling Ra<a id="marker-1253282"></a>tional Fit Accuracy</h2>

<p>
<a id="pgfId-1066443"></a>Rational fitting is the process of adding multiple poles, zeros, and gain blocks to match the frequency response that is defined in the S-Parameter file. Note that the S-Parameter file may have distributed effects. Approximating these distributed effects with poles and zeros can require a system with a very high order. Matching an arbitrary frequency-domain transfer function with poles and zeros is a difficult and complicated process.</p>
<p>
<a id="pgfId-1251149"></a>Presently, the best rational fit option is bbspice. No controls are provided for this interpolation method.</p>
<p>
<a id="pgfId-1178419"></a>At the current time, it is usually better to use the convolution-based algorithms when the interpolation method is set to <em>linear</em> or <em>spline</em>, or use the <em>bbspice</em> rational fitting method.</p>

<p>
<a id="pgfId-1221062"></a></p>
<div class="webflare-div-image">
<img width="444" height="610" src="images/Chap8-163.gif" /></div>

<p>
<a id="pgfId-1180107"></a>If you do use the rational fit, always test the rational model that is produced by running sp analysis using a circuit composed of an input port, an output port, and an nport with the interpolation method set to <em>rational</em>. Run the sp analysis, and plot all the S-Parameters. Look for differences between the original S-Parameter file and the S-Parameters with the rational fit.</p>
<p>
<a id="pgfId-1180116"></a>Also, the algorithm is known to take a very long time to run for S-Parameter files with a large number of ports.</p>
<p>
<a id="pgfId-1093216"></a>The <em>nport</em> component has three parameters to control the accuracy of the rational interpolation process:</p>
<ul><li>
<a id="pgfId-1066444"></a><em>relerr </em>(The <em>Relative error</em> field)</li><li>
<a id="pgfId-1066445"></a><em>abserr </em>(The <em>Absolute error </em>field)</li><li>
<a id="pgfId-1066446"></a><em>ratorder </em>(The <em>Rational order </em>field)</li></ul>


<p>
<a id="pgfId-1066447"></a>You can use these parameters to trade off accuracy against model size and simulation time. In general, the more stringent the accuracy requirement, the higher the model order. Higher-order models require longer extraction and simulation time. SpectreRF can automatically generate a model that meets a specified accuracy requirement. You can also specify the model order directly to SpectreRF.</p>

<h3>
<a id="pgfId-1221103"></a>Using the relerr and abserr Parameters</h3>

<p>
<a id="pgfId-1221104"></a>The <em>relerr</em> parameter is used to control the accuracy of the rational fit when the gain is larger than the gain specified in abserr. Usually, <em>relerr</em> is on the order of about 0.01, which sets a 1% error in the rational fit when the gain is large. Usually, <em>abserr</em> is in the order of 1e-3 to 1e-4, which specifies that when the gain is less than <em>abserr</em>, allow a lot of error in the rational fit. 1e-3 is -60dB gain, and 1e-4 is -80 dB gain. The <em>abserr</em> parameter lowers the order of the model by allowing fewer poles and zeros when the gain is small.</p>
<p>
<a id="pgfId-1066469"></a>Consider the data shown by the solid line in Figure <a href="Chap8.html#66566">8-19</a>. In this example:</p>
<ul><li>
<a id="pgfId-1066470"></a><em>relerr</em> can control the error in the passband</li><li>
<a id="pgfId-1066471"></a><em>abserr</em> can control the error in the stopband</li></ul>

<p>
<a id="pgfId-1066472"></a>If you are not interested in the details of the filter behavior in the stopband, you can set <em>abserr</em> to the level shown and these details are ignored in the interpolation.</p>

<p><strong>Figure 8-19
<a id="pgfId-1066474"></a><a id="66566"></a>Using relerr and abserr</strong></p>
<p>
<a id="pgfId-1066478"></a></p>
<div class="webflare-div-image">
<img src="images/Chap8E/AXjTabSparam1.gif" /></div>

<p>
<a id="pgfId-1066479"></a>This example has approximately a 10% ripple in the passband. To ensure adequate error control there, set <em>relerr</em> to much less than 0.1, for example, 0.01.</p>
<p>
<a id="pgfId-1066483"></a>The dashed line in Figure <a href="Chap8.html#66566">8-19</a> shows an interpolation function with the error control levels specified in Figure <a href="Chap8.html#66566">8-19</a>: <em>abserr</em>=2e<sup>-4</sup>, and <em>relerr</em>=0.01. Details of the data below the <em>abserr</em> threshold are not resolved by the rational interpolation.</p>
<p>
<a id="pgfId-1066487"></a>To recover the details in the stopband, set <em>abserr</em> to about 1e<sup>-5</sup> for this example.</p>
<p>
<a id="pgfId-1066488"></a>If there is noise in the data, set <em>relerr</em> and <em>abserr</em> above the respective noise levels. Otherwise, Spectre and SpectreRF attempt to interpolate the noise, resulting in very high order models and very long simulation times.</p>
<p>
<a id="pgfId-1066489"></a>Remember that if you set <em>relerr </em>to zero, then, from the formula above, pure absolute error is used. Conversely, if you set <em>abserr</em> to zero, the error control is based solely on the errors relative to the magnitude of the input data.</p>

<h3>
<a id="pgfId-1066490"></a>Using the rational order (ratorder) Parameter</h3>

<p>
<a id="pgfId-1066491"></a>In general, it is usually best to specify only the accuracy parameters, <em>relerr</em> and <em>abserr</em>, and to let SpectreRF automatically select <em>rational order, </em>the order of the rational approximation. However, if you have information about your data set, you can direct SpectreRF to use a specific order of approximation in the rational interpolation. For example, if you know that your tabulated S-parameter data represents a sixth-order filter, you might instruct SpectreRF to use a seventh or eighth order fit. The slightly higher order gives SpectreRF flexibility to adjust for any noise or non-ideal behavior in the data.</p>
<p>
<a id="pgfId-1066492"></a>When you specify the <em>ratorder</em> parameter, SpectreRF tries to meet the error requirements specified by <em>relerr</em> and <em>abserr</em>, but is limited to the number of poles and zeros it can use to achieve them. If the error specified cannot be achieved with the number of poles and zeros you have specified, a warning message is generated to let you know that the error requirements were not met.</p>

<h4><em>
<a id="pgfId-1093367"></a>ROM data file</em></h4>

<p>
<a id="pgfId-1178329"></a>If this file is specified, when the rational fit is performed, the results of the rational fit are stored in the specified file as a Spectre format reduced order model.</p>

<h2>
<a id="pgfId-1093560"></a><a id="34582"></a>Troubleshooting</h2>

<p>
<a id="pgfId-1093561"></a>Certain S-parameter data sets might cause difficulty for the rational interpolation process. Types of data to avoid are:</p>
<ul><li>
<a id="pgfId-1093563"></a>Data specified only over a very narrow frequency range. Time-domain simulation requires time-domain models with a wider range of values; values that lie outside the narrow frequency range. Data extrapolation might be difficult and is always risky.</li><li>
<a id="pgfId-1093565"></a>Very noisy data. Noisy data might lead to large, unreliable time-domain models.</li><li>
<a id="pgfId-1093567"></a>Data on a very sparse frequency grid. Accurate interpolation of such data might be impossible.</li><li>
<a id="pgfId-1093568"></a>Data with long ideal delays.</li><li>
<a id="pgfId-1093569"></a>Data representing idealized lossless elements, such as lossless transmission lines.</li></ul>





<h2>
<a id="pgfId-1093570"></a>Assessing the Qua<a id="marker-1253309"></a>lity of the Rational Interpolation</h2>

<p>
<a id="pgfId-1066505"></a>If you suspect a problem with the rational interpolation process, you can investigate it using the <em>sp</em> analysis using the following steps:</p>
<ol><li>
<a id="pgfId-1066506"></a>Construct a test schematic consisting of an <em>nport</em> component with interpolation set to rational, as discussed in <a href="Chap8.html#12570">&#8220;Using the nport Component&#8221;</a>.</li><li>
<a id="pgfId-1221297"></a>Next add the appropriate number of <em>port</em> components to the schematic. An example with two ports is shown below.<br />
<a id="pgfId-1221301"></a><div class="webflare-div-image">
<img width="660" height="588" src="images/Chap8-165.gif" /></div></li><li>
<a id="pgfId-1066511"></a>Perform an <em>sp</em> analysis on the <em>nport</em> component and look for anomalies.<br />
<a id="pgfId-1221384"></a>Large swings in interpolated values and S-parameter magnitudes greater than one both suggest a problem.<br />
<a id="pgfId-1221360"></a>Large changes in the interpolated data result from an inaccurate fit. Usually, when this happens, there are local peaks or suckouts in the S-Parameter data.<br />
<a id="pgfId-1066516"></a>S-parameter values greater than one result from a non-passive (energy-generating) model that might create unstable time-domain solutions. Be particularly critical of anomalies near the zero frequency (DC). Most S-Parameter files do not have zero frequency data, so the DC point must be extrapolated. Sometimes in rational fit, the DC point can be inaccurate.<br />
<a id="pgfId-1066517"></a>When the anomalous behavior occurs <em>within</em> the frequency range of the data in the S-parameter data file, it usually indicates an inaccurate rational interpolation. Anomalous behavior below the first frequency point and above the last frequency point are uncommon, but always needs to be checked. If you have this anomalous behavior, linear interpolation is suggested.</li></ol>











<h4><em>
<a id="pgfId-1189532"></a>Possible Problems with Rational Fit</em></h4>

<p>
<a id="pgfId-1089372"></a>Because the rational fit can have unexpected behavior, it is suggested that you run an S-Parameter simulation over a very wide frequency range. Check for those behaviors in the sp analysis.</p>
<p>
<a id="pgfId-1221443"></a>A comparison between rational and linear interpolation is shown below. Note that S21 and S11 both go considerably above unity gain (0dB) above about 60GHz for the rational fit. The data in this file stops at 25GHz. This data is from a passive structure.</p>

<p>
<a id="pgfId-1221453"></a></p>
<div class="webflare-div-image">
<img width="653" height="397" src="images/Chap8-166.gif" /></div>

<p>
<a id="pgfId-1221447"></a>Magenta and green are the original data. Blue and red are the rational fit.</p>
<p>
<a id="pgfId-1193957"></a>Also note the differences in the low frequency data shown below.</p>

<p>
<a id="pgfId-1221527"></a></p>
<div class="webflare-div-image">
<img width="660" height="399" src="images/Chap8-167.gif" /></div>

<ol><li>
<a id="pgfId-1193961"></a>Verify that all the conditions listed at the beginning of the <a href="Chap8.html#34582">Troubleshooting</a> section are met.</li><li>
<a id="pgfId-1193962"></a>Try decreasing <em>relerr</em> or <em>abserr</em> or both.</li><li>
<a id="pgfId-1193963"></a>Try specifying a higher-order interpolation with the <em>ratorder</em> parameter.</li><li>
<a id="pgfId-1193964"></a>Remember that measured data can contain fine details that might require a higher order than you might expect from a casual inspection of the data.</li><li>
<a id="pgfId-1193965"></a>If the anomalous behavior occurs <em>outside</em> the tabulated frequency range, try changing the <em>abserr</em>, <em>relerr</em>, or <em>ratorder</em> parameters. Sometimes anomalies can be removed by using a more accurate fit. However, there are limits to the ability to extrapolate outside the frequency interval you specify. You might need to specify additional data points in the S-Parameter file to fix the problem.</li></ol>




<p>
<a id="pgfId-1221577"></a>Difficulty can also sometimes be seen in running the transient analysis. Below is a <em>Choosing Analyses</em> form that shows a setup to run the transient to 10nsec.</p>

<p>
<a id="pgfId-1221618"></a></p>
<div class="webflare-div-image">
<img width="365" height="410" src="images/Chap8-168.gif" /></div>

<p>
<a id="pgfId-1221581"></a>The simulation runs, and the data plots, but note that only part of the waveform has been calculated.</p>

<p>
<a id="pgfId-1221665"></a></p>
<div class="webflare-div-image">
<img width="627" height="400" src="images/Chap8-169.gif" /></div>

<p>
<a id="pgfId-1089784"></a>When you look in the Spectre output log, the iterations have stopped because the solution goes above 1GigaVolt.</p>

<p>
<a id="pgfId-1221693"></a></p>
<div class="webflare-div-image">
<img width="670" height="118" src="images/Chap8-170.gif" /></div>
<h2>
<a id="pgfId-1066527"></a><a id="24628"></a>Model Reu<a id="marker-1253355"></a>se</h2>
<h4><em>
<a id="pgfId-1194104"></a>Rational Fit</em></h4>

<p>
<a id="pgfId-1194143"></a>When <em>rational</em> or bbspice is set for the interpolation method, Spectre caches the rational model in the simulation directory. As long as you do not change the S-Parameter file, the rational fit will be reused.</p>

<h4><em>
<a id="pgfId-1194133"></a>Linear and Spline Fit</em></h4>

<p>
<a id="pgfId-1089499"></a>Prior to MMSIM 12.1, every instance of every nport calculated the impulse response at the beginning of the simulation. In some cases, this added a lot of time in order to accomplish this. Starting with MMSIM 12.1, only the impulse responses that need to be calculated are performed. For example, if there are multiple instances of nport with the same S-Parameter file and the same nport settings, the impulse response is calculated only once.</p>
<p>
<a id="pgfId-1194161"></a>The impulse response data is cached by default so that as long as the S-Parameter data and the properties on the nport do not change, the cached data is reused in subsequent simulations. When the properties on the nport instance are modified, then a new impulse response is needed. The impulse response is recalculated and cached without eliminating the original cached data file. This is done so that if you go back to the original settings, you do not need to re-run the impulse response.</p>
<p>
<a id="pgfId-1194175"></a>Additionally, file locking has been implemented to allow multiple users to have access to a shared impulse response directory. This is controlled by the <em>nportfiledir</em> option described below.</p>
<p>
<a id="pgfId-1093757"></a>There are two options that control caching. These options are located in the ADE Explorer options located in <em>Simulation</em>-<em>Options</em>-<em>Analog</em>.</p>

<p>
<a id="pgfId-1221869"></a></p>
<div class="webflare-div-image">
<img width="614" height="556" src="images/Chap8-171.gif" /></div>
<h4><em>
<a id="pgfId-1093764"></a>Nportirreuse</em></h4>

<p>
<a id="pgfId-1093781"></a>This option has the default of <em>yes</em>. Keep this at the default to save time. This option enables caching of the impulse response.</p>

<h4><em>
<a id="pgfId-1093771"></a>nportirfiledir</em></h4>

<p>
<a id="pgfId-1066534"></a>This controls the location of the cached impulse response files. The default (blank) sets the location to <code>/home/&lt;username&gt;/.cadence/mmsim</code>. When a directory name is specified in the <em>nportirfiledir</em> option, the impulse response files are cached in the specified directory. This can be a shared directory between users, as long as all the users have write permissions in that directory.</p>

<h2>
<a id="pgfId-1221936"></a>Dcblock, dcfeed, in<a id="frequency_dependent_components"></a>dq, and capq</h2>

<p>
<a id="pgfId-1221937"></a>Ideal components are provided to allow what-if analysis without needing details of specific structures to allow the determination of what is needed to meet the specifications.</p>
<p>
<a id="pgfId-1179356"></a>These components are provided for any analysis in Spectre except shooting. This allows the use of inductors and capacitors with Q in s-parameter, ac, and hbac analyses, along with the other small-signal Spectre and SpectreRF analyses. </p>

<h3>
<a id="pgfId-1094417"></a>Dcfe<a id="marker-1253380"></a>ed</h3>

<p>
<a id="pgfId-1198595"></a>Dcfeed is an ideal short at DC and an ideal open at all other frequencies. For the transient analysis, dcfeed is an inductor with a default value of 1uh.</p>
<p>
<a id="pgfId-1198596"></a>The symbol and the properties form are shown below. The <em>Model Name</em> field should be left blank.</p>

<p>
<a id="pgfId-1221990"></a></p>
<div class="webflare-div-image">
<img width="659" height="458" src="images/Chap8-172.gif" /></div>

<p>
<a id="pgfId-1198600"></a>An example comparing the dcfeed, and inductor, and a wire is shown below.</p>

<p>
<a id="pgfId-1222035"></a></p>
<div class="webflare-div-image">
<img width="617" height="256" src="images/Chap8-173.gif" /></div>

<p>
<a id="pgfId-1094549"></a>This example shows three cascode amplifiers with different connections to the power supply for the upper transistor. The left amplifier has a dcfeed. The center amplifier has an inductor. The right amplifier has a wire. In the amplifiers above, the resistor to the left has the output point set to 1K ohm.</p>
<p>
<a id="pgfId-1198683"></a>When the inductor and the dcfeed are essentially open, the gain of the circuit is set by the resistor. When the impedance is less than 1Kohms, the load impedance is dominated by the impedance of the DCfeed or inductor. In this way, we can deduce what is happening at low frequency by running a simulation.</p>
<p>
<a id="pgfId-1198891"></a>The amplitude of the input is deliberately large so the amplifiers tend toward the mixer behavior. The input signals are at 2.45GHz and 2.451GHz. The difference frequency is 1MHz. The 1 MHz signal will be analyzed so the behavior of the dcfeed, inductor, and wire can be evaluated.</p>
<p>
<a id="pgfId-1198703"></a>At all frequencies other than DC, the dcfeed is open. The inductor impedance goes up with frequency. At 1MHz, the impedance of the 1uh inductor is 6.28 ohms.</p>
<p>
<a id="pgfId-1094578"></a>Below is the simulation result from harmonic balance near 2.45GHz. The result agrees for the dcfeed and inductor. With a wire, essentially no signal is present.</p>

<p>
<a id="pgfId-1222118"></a></p>
<div class="webflare-div-image">
<img width="642" height="105" src="images/Chap8-174.gif" /></div>

<p>
<a id="pgfId-1106804"></a>In the table above, the left result is the output signal level in dBm for the amplifier with the dcfeed, the middle is the signal level in dBm for the amplifier with the inductor, and the right is the output signal level in dBm for a wire connected to the power supply. The third output is at the numerical noise floor of the simulation. </p>
<p>
<a id="pgfId-1237012"></a>Below is the spectral plot near 2.4GHz.</p>

<p>
<a id="pgfId-1222175"></a></p>
<div class="webflare-div-image">
<img width="657" height="397" src="images/Chap8-175.gif" /></div>

<p>
<a id="pgfId-1106834"></a>Below is the simulation result near 1MHz.</p>

<p>
<a id="pgfId-1222270"></a></p>
<div class="webflare-div-image">
<img width="564" height="84" src="images/Chap8-176.gif" /></div>

<p>
<a id="pgfId-1199076"></a>In the table above, the left result comes from the amplifier with the dcfeed. The center is with the inductor, and the right is with the wire. The dcfeed is open at 1MHz, so the signal level is set by the 1K resistor. Because the inductor has an impedance of only 6.28 ohms at 1MHz, the signal is much smaller than for the dcdfeed. With a wire, you see the numerical noise floor of the simulation.</p>
<p>
<a id="pgfId-1106851"></a>The spectral plot is shown below.</p>

<p>
<a id="pgfId-1253489"></a></p>
<div class="webflare-div-image">
<img width="619" height="396" src="images/Chap8-177.gif" /></div>
<h3>
<a id="pgfId-1253491"></a>Dcbl<a id="marker-1253490"></a>ock</h3>

<p>
<a id="pgfId-1253492"></a>Dcblock is a near open (1Gohm) at DC and an ideal short at all other frequencies. For the transient analysis, dcfeed is a capacitor with a default value of 1uF.</p>
<p>
<a id="pgfId-1199143"></a>The schematic symbol and properties list are shown below.</p>

<p>
<a id="pgfId-1222398"></a></p>
<div class="webflare-div-image">
<img width="662" height="456" src="images/Chap8-178.gif" /></div>

<p>
<a id="pgfId-1199131"></a>Below is an example with three cascode amplifiers that use different connections to the output load resistor. The left amplifier has a dcblock in series with the load resistor. The middle amplifier has a capacitor in series with the load resistor. The amplifier on the right has a wire connected to the load resistor. The output resistance is 10KOhms.</p>

<p>
<a id="pgfId-1222460"></a></p>
<div class="webflare-div-image">
<img width="617" height="252" src="images/Chap8-179.gif" /></div>

<p>
<a id="pgfId-1094947"></a>Here is a table with the DC values from the three cases. The left column is the DC voltage on the load resistor with the dcblock, the center column is the DC voltage with the capacitor, and the right column is the DC voltage with the wire.</p>

<p>
<a id="pgfId-1222493"></a></p>
<div class="webflare-div-image">
<img width="567" height="85" src="images/Chap8-180.gif" /></div>

<p>
<a id="pgfId-1199294"></a>The voltage with the dcblock is only a few microvolts. This is because it is a 1Gohm resistor at DC. The capacitor is a perfect open at DC, so the voltage is exactly zero. With a wire, the DC bias level appears at the load resistor.</p>
<p>
<a id="pgfId-1106955"></a>Here, is the simulation results from harmonic balance. Instead of dB, the vertical axis is linear volts. Note that the DC level is small for the dcblock. This is the top trace. The dcblock is a 1e9 ohm resistor at dc, and an ideal short at all non-zero frequencies. The center trace is from the amplifier with the capacitor, and the bottom trace is from the circuit with the wire.</p>

<p>
<a id="pgfId-1222555"></a></p>
<div class="webflare-div-image">
<img width="619" height="397" src="images/Chap8-181.gif" /></div>
<h3>
<a id="pgfId-1094951"></a>in<a id="marker-1253497"></a>dq</h3>

<p>
<a id="pgfId-1094968"></a>Indq is a series inductor and resistor. There are three different modes with different frequency behavior in each mode. Below is the test circuit for the plots that will come later. PORT1 is defined as port1 in a single port S-parameter analysis so that the Z-Parameters for the inductor can be directly plotted.</p>

<p>
<a id="pgfId-1222621"></a></p>
<div class="webflare-div-image">
<img width="662" height="510" src="images/Chap8-182.gif" /></div>

<p>
<a id="pgfId-1199740"></a>The properties list for <em>mode 1</em> is shown below.</p>

<p>
<a id="pgfId-1222680"></a></p>
<div class="webflare-div-image">
<img width="428" height="529" src="images/Chap8-183.gif" /></div>

<p>
<a id="pgfId-1199806"></a>The inductor with Q works in all the analyses except for shooting.</p>
<p>
<a id="pgfId-1199982"></a>The <code>indq</code> component has three modes, with different behavior in each mode. For all three modes, you need to specify the inductance, Q, and the frequency for the inductance and Q specification.</p>

<h4>
<a id="pgfId-1094997"></a>Mode 1</h4>

<p>
<a id="pgfId-1222718"></a>In this mode, the <code>indq</code> model is a series RL branch with R=constant and L=constant at the value given by the <em>Inductance</em> property. The value of the property Rdc in mode2 and 3 is not used in this mode. </p>
<p>
<a id="pgfId-1095063"></a>Special case: specifying Q=0 or F=0 makes the <code>indq</code> component just an inductor with the value L without any series resistance.</p>
<p>
<a id="pgfId-1096109"></a>The resistance is calculated as follows:</p>

<p>
<a id="pgfId-1222764"></a></p>
<div class="webflare-div-image">
<img width="126" height="57" src="images/Chap8-184.gif" /></div>

<p>
<a id="pgfId-1200061"></a>Below is a plot of the inductance, resistance, and Q with respect to frequency. A vertical marker has been placed at 1GHz, which is the frequency for L and Q. The inductance and resistance are constant, and the Q rises with frequency.</p>

<p>
<a id="pgfId-1222789"></a></p>
<div class="webflare-div-image">
<img width="619" height="398" src="images/Chap8-185.gif" /></div>
<h4>
<a id="pgfId-1095012"></a>Mode 2</h4>

<p>
<a id="pgfId-1095464"></a>In this mode, both the resistance and the inductance are frequency dependent.</p>

<p>
<a id="pgfId-1095473"></a></p>
<div class="webflare-div-image">
<img width="131" height="39" src="images/Chap8-186.gif" /></div>
<p>
<a id="pgfId-1222814"></a></p>
<div class="webflare-div-image">
<img width="130" height="44" src="images/Chap8-187.gif" /></div>

<p>
<a id="pgfId-1222840"></a>If RDC in mode 2 and 3 property is set to zero or is left blank, the DC resistance is 0.05*the resistor value that is set at the frequency defined by the Frequency for L and Q property.</p>
<p>
<a id="pgfId-1107345"></a>RDC, R&#39;&#39;, and <img width="36" height="28" src="images/Chap8-188.gif" /><span>being constants are the classic forms of the skin-effect expressions for the resistance (grows as the square root of frequency) and inductance (the internal inductance decays inversely proportional to the square root of frequency). These expressions specify a causal frequency dependence of impedance. At the frequency specified in the Frequency for L and Q property, L and Q are equal to the values specified for Inductance and Quality factor.</span></p>

<p>
<a id="pgfId-1102344"></a>The transient analysis cannot use frequency-dependent impedances, so it uses the inductance specified in the properties form, and the RDC in Mode 2 and 3 property for the resistance.</p>
<p>
<a id="pgfId-1095522"></a>Below is the property form for mode 2.</p>

<p>
<a id="pgfId-1222913"></a></p>
<div class="webflare-div-image">
<img width="451" height="526" src="images/Chap8-189.gif" /></div>

<p>
<a id="pgfId-1095547"></a>Below is the inductance, resistance, and Q. Note the log frequency for inductance.</p>

<p>
<a id="pgfId-1222973"></a></p>
<div class="webflare-div-image">
<img width="619" height="396" src="images/Chap8-190.gif" /></div>
<h4>
<a id="pgfId-1095512"></a>Mode 3</h4>

<p>
<a id="pgfId-1095626"></a>The advantage of mode 3 is that the non-physical frequency dependence of R near f=0 (DC) present with mode=2 is corrected. In this mode, R(f) has a reasonable frequency derivative near f=0. However, the expressions are non-causal as R varies as a function of frequency while L remains constant.</p>
<p>
<a id="pgfId-1095627"></a>In this mode, L is constant at the value specified and </p>

<p>
<a id="pgfId-1223013"></a></p>
<div class="webflare-div-image">
<img width="159" height="55" src="images/Chap8-191.gif" /></div>

<p>
<a id="pgfId-1097596"></a>If the RDC in mode 2 and 3 property is set to zero, the DC resistance is 0.05*the resistor value that is set at the frequency defined by the Frequency for L and Q property.</p>
<p>
<a id="pgfId-1107411"></a>Because the transient analysis cannot handle frequency-dependent resistance, the transient analysis uses the inductance specified in the properties form, and RDC for the resistance.</p>
<p>
<a id="pgfId-1102478"></a>The properties list for mode 3 is shown below.</p>

<p>
<a id="pgfId-1223074"></a></p>
<div class="webflare-div-image">
<img width="428" height="536" src="images/Chap8-192.gif" /></div>

<p>
<a id="pgfId-1095689"></a>The inductance, resistance, and Q in mode 3 are plotted versus frequency, as shown below.</p>

<p>
<a id="pgfId-1223131"></a></p>
<div class="webflare-div-image">
<img width="619" height="394" src="images/Chap8-193.gif" /></div>

<p>
<a id="pgfId-1107649"></a>Here is an expanded view of Q at low frequency. Q drops off at low frequency.</p>

<p>
<a id="pgfId-1223187"></a></p>
<div class="webflare-div-image">
<img width="619" height="401" src="images/Chap8-194.gif" /></div>
<h3>
<a id="pgfId-1095628"></a>ca<a id="marker-1253586"></a>pq</h3>

<p>
<a id="pgfId-1096331"></a>Capq is a parallel capacitor and resistor. There are three different modes with different behavior in each mode. In all three modes, the capacitor is constant at the value specified in the properties form. Below is the test circuit for the plots that will come later. PORT1 is defined as port1 in a single port S-parameter analysis so that the Y-Parameters for the capacitor can be directly plotted.</p>

<p>
<a id="pgfId-1223241"></a></p>
<div class="webflare-div-image">
<img width="661" height="515" src="images/Chap8-195.gif" /></div>
<h4>
<a id="pgfId-1095034"></a>Mode 1</h4>

<p>
<a id="pgfId-1095973"></a>In this mode, the capq model is a parallel R C branch with R=constant and C=constant at the value given by the Capacitance property.</p>
<p>
<a id="pgfId-1096472"></a>The conductance is constant as given below.</p>

<p>
<a id="pgfId-1223273"></a></p>
<div class="webflare-div-image">
<img width="138" height="57" src="images/Chap8-196.gif" /></div>

<p>
<a id="pgfId-1096476"></a><img width="23" height="23" src="images/Chap8-197.gif" /><span> above is the frequency for the Q value in radians per second.</span></p>

<p>
<a id="pgfId-1223338"></a>This model is used in all the analyses, except shooting, where it is not supported.</p>
<p>
<a id="pgfId-1223342"></a>Below is the properties list for the capq with mode 1 selected.</p>

<p>
<a id="pgfId-1223352"></a></p>
<div class="webflare-div-image">
<img width="428" height="497" src="images/Chap8-198.gif" /></div>

<p>
<a id="pgfId-1223343"></a>Below is a plot of the conductance, and Q with respect to frequency in mode 1. A vertical marker has been placed at 1GHz, which is the frequency for Q. The capacitance and resistance is constant, and the Q rises linearly with frequency.</p>

<p>
<a id="pgfId-1223404"></a></p>
<div class="webflare-div-image">
<img width="619" height="397" src="images/Chap8-199.gif" /></div>
<h4>
<a id="pgfId-1095989"></a>Mode 2</h4>

<p>
<a id="pgfId-1096708"></a>In mode 2, the conductance is frequency dependent as shown in the equation below.</p>

<p>
<a id="pgfId-1223438"></a></p>
<div class="webflare-div-image">
<img width="186" height="52" src="images/Chap8-200.gif" /></div>

<p>
<a id="pgfId-1201269"></a>The capacitance is constant in all modes.</p>
<p>
<a id="pgfId-1096000"></a><img width="23" height="23" src="images/Chap8-201.gif" /><span> above is the frequency where Q is specified in radians per second.</span></p>

<p>
<a id="pgfId-1096726"></a>Mode 2 is non-causal. Because the resistance is frequency dependent, the transient analysis uses the capacitance specified in the properties list with no resistor in parallel.</p>
<p>
<a id="pgfId-1096004"></a>Below is the properties form for mode 2.</p>

<p>
<a id="pgfId-1223489"></a></p>
<div class="webflare-div-image">
<img width="428" height="498" src="images/Chap8-202.gif" /></div>

<p>
<a id="pgfId-1096008"></a>Below is the conductance and Q versus frequency. Vertical markers have been placed at 1GHz and 40GHz. Mode 2 is a compromise between a linear Q increase with frequency in mode 1, and a constant Q in mode 3. The Q goes up with frequency, but not as fast as in mode 1.</p>

<p>
<a id="pgfId-1223545"></a></p>
<div class="webflare-div-image">
<img width="619" height="396" src="images/Chap8-203.gif" /></div>
<h4>
<a id="pgfId-1096009"></a>Mode 3</h4>

<p>
<a id="pgfId-1097013"></a>In mode 3, C is constant at the value specified in the properties form, and the conductance is</p>

<p>
<a id="pgfId-1223575"></a></p>
<div class="webflare-div-image">
<img width="198" height="55" src="images/Chap8-204.gif" /></div>

<p>
<a id="pgfId-1097017"></a>Mode 3 is non-causal. Because the resistance is a function of frequency, the transient analysis uses just the capacitance term.</p>
<p>
<a id="pgfId-1097990"></a>The properties list for mode 3 is shown below.</p>

<p>
<a id="pgfId-1223630"></a></p>
<div class="webflare-div-image">
<img width="428" height="499" src="images/Chap8-205.gif" /></div>

<p>
<a id="pgfId-1097021"></a>The conductance and Q versus frequency is plotted below.</p>

<p>
<a id="pgfId-1223712"></a></p>
<div class="webflare-div-image">
<img width="619" height="398" src="images/Chap8-206.gif" /></div>

<p>
<a id="pgfId-1201694"></a>In mode 3, the capacitance is constant, and the Q is constant. The resistance is a function of frequency.</p>

<h2>
<a id="pgfId-1094406"></a>Reference: S-Parameter Equ<a id="marker-1253669"></a>ations</h2>

<p>
<a id="pgfId-1066545"></a>This section describes the equations used by the VIVA Calculator to plot data generated by Spectre S-parameter<a id="marker-1066546"></a> simulations.</p>
<p>
<a id="pgfId-1066547"></a>Using the VIVA Calculator in the Analog Design Environment, you can plot the following S-parameter data:</p>
<ul><li>
<a id="pgfId-1066551"></a><a href="Chap8.html#48329">Network Parameters</a></li><li>
<a id="pgfId-1066555"></a><a href="Chap8.html#74413">Two-Port Scalar Quantities</a></li><li>
<a id="pgfId-1066559"></a><a href="Chap8.html#91934">Two-Port Gain Quantities</a></li><li>
<a id="pgfId-1066563"></a><a href="Chap8.html#48806">Two-Port Network Circles</a></li><li>
<a id="pgfId-1066567"></a><a href="Chap8.html#22904">Equation for VSWR (Voltage Standing Wave Ratio)</a></li><li>
<a id="pgfId-1066571"></a><a href="Chap8.html#46137">Equation for GD (group delay)</a></li></ul>





<p>
<a id="pgfId-1066572"></a>Use the buttons located in the <em>Function</em> area of the S-parameter <em>Direct Plot</em> <em>Form</em> to specify the type of data to plot.</p>

<h2>
<a id="pgfId-1066574"></a><a id="48329"></a>Network Parameters</h2>

<p>
<a id="pgfId-1066575"></a>You can plot S, Y, Z, and H network parameters.</p>
<p>
<a id="pgfId-1066576"></a>S-parameters, Y-parameters, and Z-parameters (denoted as SP, YP, and ZP on the <em>Direct Plot</em> <em>Form</em>) are defined for circuits with any number of ports. H-parameters (denoted as HP on the <em>Direct Plot Form</em>) are defined only for two-port circuits.</p>
<p>
<a id="pgfId-1223775"></a>You can plot parameters on polar charts, Smith charts, or on rectangular plots after applying a <em>Modifier</em> option. The dB conversion uses <t-times>
20 log</t-times>
<sub>10</sub><t-times>
X</t-times>
 because the parameters represent scalar ratios (for example, voltage).</p>

<h3>
<a id="pgfId-1066578"></a>Equations for Network Parameters</h3>

<p>
<a id="pgfId-1066579"></a>For the ZP, YP, and HP parameters, Spectre returns S-parameters to the analog design environment. The environment converts them, as needed, to the equivalent Z, Y, and H matrixes using standard published methods. Spectre calculates S-parameter values.</p>
<p>
<a id="pgfId-1066580"></a>SP (S-parameter) values</p>
<p>
<a id="pgfId-1066581"></a>SP (S-parameter) values are calculated by Spectre.</p>
<p>
<a id="pgfId-1223858"></a>ZP (Z-parameter) equation</p>
<p>
<a id="pgfId-1223859"></a>The Z-parameter equation is as follows:</p>

<p>
<a id="pgfId-1223863"></a></p>
<div class="webflare-div-image">
<img width="333" height="57" src="images/Chap8-207.gif" /></div>

<p>
<a id="pgfId-1223855"></a>Where</p>
<ul><li>
<a id="pgfId-1066589"></a><t-times>
S</t-times>
<sub>m</sub> is the N-port S-parameter matrix</li><li>
<a id="pgfId-1066590"></a><t-times>
I </t-times>
is the N x N identity matrix</li><li>
<a id="pgfId-1066591"></a><t-times>
Z</t-times>
<sub>ref</sub> is the characteristic impedance of the port</li><li>
<a id="pgfId-1066592"></a><t-times>
Z</t-times>
<sub>m</sub> is the resulting Z-parameter matrix</li></ul>




<h4>
<a id="pgfId-1066593"></a>YP (Y-parameter) equations</h4>

<p>
<a id="pgfId-1066594"></a>The Y-parameter equations are as follows:</p>

<p>
<a id="pgfId-1066598"></a><img width="325" height="57" src="images/Chap8-208.gif" /></p>

<p>
<a id="pgfId-1066599"></a>Where</p>
<ul><li>
<a id="pgfId-1066600"></a><t-times>
S</t-times>
<sub>m</sub> is the N-port S-parameter matrix</li><li>
<a id="pgfId-1066601"></a><t-times>
I</t-times>
 is the N x N identity matrix</li><li>
<a id="pgfId-1066602"></a><t-times>
Y</t-times>
<sub>ref</sub> is a diagonal matrix defined as</li></ul>



<p>
<a id="pgfId-1066606"></a><img width="168" height="73" src="images/Chap8-209.gif" /></p>

<p class="webflare-indent1">
<a id="pgfId-1066607"></a>Where</p>
<ul><li style="list-style-type: none;background-image: none;"><ul><li>
<a id="pgfId-1066608"></a><t-times>
Z</t-times>
<sub>i</sub> is the terminating impedance at port <t-times>
i</t-times>
</li><li>
<a id="pgfId-1263754"></a><t-times>
Y</t-times>
<sub>m</sub> is the resulting Y-parameter matrix</li></ul></li></ul>


<h4>
<a id="pgfId-1066610"></a>The HP (H-parameter) equations</h4>

<p>
<a id="pgfId-1066611"></a>The HP (H-parameter) equations only apply to two-port circuits.</p>
<p>
<a id="pgfId-1066612"></a><t-times>
D </t-times>
is</p>

<p>
<a id="pgfId-1066616"></a><img width="299" height="52" src="images/Chap8-210.gif" /></p>

<p>
<a id="pgfId-1066617"></a><t-times>
H</t-times>
<sub>11 </sub>is</p>

<p>
<a id="pgfId-1066621"></a><img width="350" height="82" src="images/Chap8-211.gif" /></p>

<p>
<a id="pgfId-1066622"></a><t-times>
H</t-times>
<sub>21</sub> is</p>

<p>
<a id="pgfId-1066626"></a><img width="227" height="73" src="images/Chap8-212.gif" /></p>

<p>
<a id="pgfId-1066627"></a><t-times>
H</t-times>
<sub>12</sub> is</p>

<p>
<a id="pgfId-1066631"></a><img width="220" height="78" src="images/Chap8-213.gif" /></p>

<p>
<a id="pgfId-1066632"></a>and <t-times>
H</t-times>
<sub>22</sub> is</p>

<p>
<a id="pgfId-1066636"></a><img width="329" height="84" src="images/Chap8-214.gif" /></p>

<p>
<a id="pgfId-1066637"></a>Where</p>
<ul><li>
<a id="pgfId-1066638"></a><t-times>
Z</t-times>
<sub>ref1 </sub>is the terminating impedance at port 1</li><li>
<a id="pgfId-1066639"></a><t-times>
Z</t-times>
<sub>ref2</sub> is the terminating impedance at port 2</li></ul>


<h2>
<a id="pgfId-1066642"></a><a id="74413"></a>T<a id="Two-Port Scalar Quantities"></a>wo-Port Scalar Quantities</h2>

<p>
<a id="pgfId-1066643"></a>The two-port scalar quantities include</p>
<ul><li>
<a id="pgfId-1066644"></a><t-times>
NF</t-times>
<sub>min</sub> is minimum noise figure</li><li>
<a id="pgfId-1066645"></a><t-times>
NF </t-times>
is noise figure</li><li>
<a id="pgfId-1066646"></a><t-times>
R</t-times>
<sub>n</sub> is equivalent noise resistance</li><li>
<a id="pgfId-1066647"></a><t-times>
G</t-times>
<sub>min</sub> is Optimum Noise reflection coefficient</li><li>
<a id="pgfId-1066648"></a><t-times>
B</t-times>
<sub>1f</sub> is alternative stability factor</li><li>
<a id="pgfId-1066649"></a><t-times>
K</t-times>
<sub>f</sub> is stability factor</li></ul>





<p>
<a id="pgfId-1066650"></a>You can plot two-port scalar quantities only against frequency. In addition, you can plot them only on rectangular charts. <a href="Chap8.html#52839">Figure&#160;8-20</a> illustrates a generic two-port circuit that defines impedances and reflection coefficients.</p>

<p><strong>Figure 8-20
<a id="pgfId-1066655"></a><a id="52839"></a>A Generic Two-Port Circuit</strong></p>
<p>
<a id="pgfId-1066659"></a></p>
<div class="webflare-div-image">
<img src="images/Chap8E/Efig1TwoPort.gif" /></div>

<p>
<a id="pgfId-1066663"></a><t-times>
In Figure <a href="Chap8.html#52839"></a><h-hot>8-20</h-hot><t-times />
:</t-times>
</p>
<ul><li>
<a id="pgfId-1066664"></a><t-times>
Z</t-times>
<sub>s</sub> is the source impedance</li><li>
<a id="pgfId-1066665"></a>Γ<sub>s</sub> is the input reflection coefficient</li><li>
<a id="pgfId-1066666"></a><t-times>
Z</t-times>
<sub>L</sub> is the load impedance</li><li>
<a id="pgfId-1066667"></a>Γ<sub>L</sub> is the load reflection coefficient</li><li>
<a id="pgfId-1066668"></a><t-times>
Z</t-times>
<sub>O</sub> is the characteristic impedance</li></ul>





<h3>
<a id="pgfId-1066669"></a>Equations for Two-Port Scalar Quantities</h3>
<h4>
<a id="pgfId-1066670"></a>G<sub>min</sub> (Optimum Noise Reflection Coefficient) Equation</h4>

<p>
<a id="pgfId-1066671"></a><t-times>
G</t-times>
<sub>min</sub> (also known as Γ<sub>min</sub> in the literature) is the reflection coefficient associated with minimum noise figure. You can plot <t-times>
G</t-times>
<sub>min</sub> on a Smith chart or, by using the <em>Modifier</em> field, on a rectangular chart.</p>

<p>
<a id="pgfId-1066675"></a><img width="238" height="70" src="images/Chap8-216.gif" /></p>

<p>
<a id="pgfId-1066676"></a>Where</p>
<ul><li>
<a id="pgfId-1066677"></a><t-times>
Z</t-times>
<sub>o</sub> is the characteristic impedance</li><li>
<a id="pgfId-1066678"></a><t-times>
Z</t-times>
<sub>on</sub> is the source impedance associated with minimum noise figure (<t-times>
NF</t-times>
<sub>min</sub>)</li></ul>


<h4>
<a id="pgfId-1066679"></a>NF<sub><strong>min </strong></sub>(Minimum Noise Figure) and NF (Noise Figure) Equations</h4>

<p>
<a id="pgfId-1066680"></a>The <t-times>
NF</t-times>
<sub>min</sub> and <t-times>
NF</t-times>
 plots are controlled by the <em>Modifier</em> option in the <em>Direct Plot Form</em>.</p>
<p>
<a id="pgfId-1066681"></a>Plot noise figure (NF) in dB by setting <em>Modifier</em> to <em>dB10</em></p>
<ul><li>
<a id="pgfId-1066682"></a>Plot noise factor (F) by setting <em>Magnitude</em></li></ul>
<p>
<a id="pgfId-1066683"></a>Use <t-times>
NF</t-times>
<sub>min</sub> and <t-times>
NF</t-times>
 only for two-port circuits.</p>

<p>
<a id="pgfId-1066687"></a><img width="134" height="46" src="images/Chap8-217.gif" /></p>

<p>
<a id="pgfId-1066688"></a>Where</p>
<ul><li>
<a id="pgfId-1066689"></a><t-times>
F</t-times>
 is the noise factor</li><li>
<a id="pgfId-1066690"></a><t-times>
NF</t-times>
<sub>min</sub> is the minimum noise figure</li></ul>

<p>
<a id="pgfId-1223936"></a>The<bold>
 
<t-times>
NF</t-times>
<sub>min</sub> values are calculated by Spectre</bold></p>
<p>
<a id="pgfId-1223940"></a>The <t-times>
NF</t-times>
<bold>
 
(noise figure) equation is calculated by the Analog Design Environment from <t-times>
NF</t-times>
<sub>min</sub>, <t-times>
G</t-times>
<sub>min</sub> (Γ<sub>min</sub>), and <t-times>
r</t-times>
<sub>n</sub>. You can specify the optional source reflection coefficient Γ<sub>S</sub> as an argument if you use the Analog Design Environment calculator. From the <em>Direct Plot Form</em>, the Analog Design Environment assumes Γ<sub>S</sub> to be 0 (input matched to reference termination).</bold></p>

<p>
<a id="pgfId-1066696"></a><img width="314" height="92" src="images/Chap8-218.gif" /></p>

<p>
<a id="pgfId-1066697"></a>Where</p>

<p>
<a id="pgfId-1066701"></a><img width="122" height="76" src="images/Chap8-219.gif" /></p>

<p>
<a id="pgfId-1066702"></a>Here<t-times>
 r</t-times>
<sub>n</sub> is the <em>normalized</em> equivalent noise resistance.</p>
<p>
<a id="pgfId-1066703"></a>Rn (equivalent noise resistance)</p>
<p>
<a id="pgfId-1066704"></a>R<sub>n</sub> plots equivalent noise resistance. The <t-times>
R</t-times>
<sub>n</sub> values are calculated by Spectre.</p>
<p>
<a id="pgfId-1066705"></a>Stability Factors</p>
<p>
<a id="pgfId-1066706"></a><t-times>
K</t-times>
<sub>f</sub> and <t-times>
B</t-times>
<sub>1f</sub> plot the Rollet stability factor and its intermediate term. Use these parameters only for two-port circuits.</p>
<p>
<a id="pgfId-1066707"></a><t-times>
D</t-times>
 is</p>

<p>
<a id="pgfId-1066711"></a><img width="235" height="54" src="images/Chap8-220.gif" /></p>

<p>
<a id="pgfId-1066712"></a><t-times>
K</t-times>
<sub>f</sub> is</p>

<p>
<a id="pgfId-1066716"></a><img width="263" height="83" src="images/Chap8-221.gif" /></p>

<p>
<a id="pgfId-1066717"></a>and <t-times>
B</t-times>
<sub>1f</sub> is</p>

<p>
<a id="pgfId-1066721"></a><img width="263" height="59" src="images/Chap8-222.gif" /></p>
<h2>
<a id="pgfId-1066723"></a><a id="91934"></a>Two-Port Gain Quantities</h2>

<p>
<a id="pgfId-1066724"></a>The following gain quantities are valid only for two-port circuits:</p>
<ul><li>
<a id="pgfId-1066725"></a><t-times>
G</t-times>
<sub>A</sub><bold>
 (available gain)
 is the power gain obtained by optimally matching the output of the network.</bold></li><li>
<a id="pgfId-1066726"></a><t-times>
G</t-times>
<sub>P</sub><bold>
 (power gain)
 is the power gain obtained by optimally matching the input of the network.</bold></li><li>
<a id="pgfId-1066727"></a><t-times>
G</t-times>
<sub>T</sub> (transducer gain) shows the insertion effect of a two-port circuit. This quantity is used in amplifier design.</li><li>
<a id="pgfId-1066728"></a><t-times>
G</t-times>
<sub>umx </sub>(maximum unilateral transducer power gain)</li><li>
<a id="pgfId-1066729"></a>G<sub>max</sub> (maximum available gain) sho<bold>
ws the transducer power gain when there exists a simultaneous conjugate match at both ports.
</bold></li><li>
<a id="pgfId-1066730"></a><t-times>
G</t-times>
<sub>msg</sub> (maximum stable gain) shows the gain that can be achieved by resistively loading the two-port such that <t-times>
k </t-times>
= 1 and then simultaneously conjugately matching the input and output ports. For conditionally stable two-ports, you can approach the maximum stable gain as you reduce the input and output mismatch. If you attempt a simultaneous conjugate match and <t-times>
k </t-times>
&lt; 1, the two-port oscillates.</li></ul>






<h3>
<a id="pgfId-1066731"></a>Equations for Two-Port Gain Calculations</h3>
<h4>
<a id="pgfId-1066732"></a>G<sub><strong>A</strong></sub> (Available Gain) Equations</h4>

<p>
<a id="pgfId-1066733"></a>Available gain equations for output conjugately matched.</p>

<p>
<a id="pgfId-1066737"></a><img width="259" height="116" src="images/Chap8-223.gif" /></p>

<p>
<a id="pgfId-1066738"></a>Where</p>

<p>
<a id="pgfId-1066742"></a><img width="212" height="77" src="images/Chap8-224.gif" /></p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1066743"></a>When you use the S-parameter <em>Direct Plot Form</em>, <t-times>
Γ</t-times>
<sub>S</sub> is set to zero, and therefore available gain (<t-times>
G</t-times>
<sub>A</sub>) is plotted as:</div>

<p>
<a id="pgfId-1066747"></a><img width="173" height="98" src="images/Chap8-225.gif" /></p>

<p>
<a id="pgfId-1066748"></a>To plot <t-times>
G</t-times>
<sub>A</sub> for non-zero values of <t-times>
Γ</t-times>
<sub>S</sub>, use the Analog Design Environment calculator.</p>

<h4>
<a id="pgfId-1066749"></a>G<sub><strong>P</strong></sub> (Power Gain) Equations</h4>

<p>
<a id="pgfId-1066750"></a>Power gain equations for input conjugately matched.</p>

<p>
<a id="pgfId-1066754"></a><img width="255" height="116" src="images/Chap8-226.gif" /></p>

<p>
<a id="pgfId-1066755"></a>Where</p>

<p>
<a id="pgfId-1066759"></a><img width="196" height="75" src="images/Chap8-227.gif" /></p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1066760"></a>When you use the S-parameter <em>Direct Plot Form</em>, <t-times>
Γ</t-times>
<sub>L</sub> is set to zero, and therefore the power gain, <t-times>
G</t-times>
<sub>P</sub>, is plotted as:</div>

<p>
<a id="pgfId-1066764"></a><img width="150" height="95" src="images/Chap8-228.gif" /></p>

<p>
<a id="pgfId-1066765"></a>To plot <t-times>
G</t-times>
<sub>P</sub> for nonzero values of Γ<sub>L</sub>, use the Analog Design Environment calculator.</p>

<h4>
<a id="pgfId-1066766"></a>G<sub><strong>T</strong></sub> (Transducer Gain) Equations</h4>
<p>
<a id="pgfId-1066770"></a><img width="397" height="103" src="images/Chap8-229.gif" /></p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1066771"></a>When using the S-parameter <em>Direct Plot Form</em>, the Analog Design Environment assumes that the source (Γ<sub>S</sub>) and load (Γ<sub>L</sub>) reflection coefficients are zero. <t-times>
G</t-times>
<sub>T</sub>, therefore, plots the insertion gain.</div>

<p>
<a id="pgfId-1066775"></a><img width="120" height="53" src="images/Chap8-230.gif" /></p>

<p>
<a id="pgfId-1066776"></a>Using the calculator, you can plot <t-times>
G</t-times>
<sub>T</sub> and specify the source and load terminations.</p>

<h4>
<a id="pgfId-1066777"></a>G<sub><strong>max</strong></sub> (Maximum Available Gain) Equations</h4>

<p>
<a id="pgfId-1066778"></a>For <t-times>
K</t-times>
 &gt;1</p>

<p>
<a id="pgfId-1066782"></a><img width="242" height="73" src="images/Chap8-231.gif" /></p>

<p>
<a id="pgfId-1066783"></a>For <t-times>
K</t-times>
&lt;=1</p>

<p>
<a id="pgfId-1066787"></a><img width="130" height="75" src="images/Chap8-232.gif" /></p>

<p>
<a id="pgfId-1066788"></a><bold>
Where 
<t-times>
K</t-times>
<bold>
 is the stability factor, 
<t-times>
K</t-times>
<sub>f</sub></bold></bold></p>

<h4>
<a id="pgfId-1066789"></a>G<sub><strong>umx</strong></sub> (Maximum Unilateral Transducer Power Gain) Equation</h4>
<p>
<a id="pgfId-1066793"></a><img width="276" height="90" src="images/Chap8-233.gif" /></p>
<h4>
<a id="pgfId-1066794"></a>G<sub><strong>msg</strong></sub> (Maximum Stable Power Gain) Equation</h4>
<p>
<a id="pgfId-1066798"></a><img width="211" height="81" src="images/Chap8-234.gif" /></p>
<h2>
<a id="pgfId-1066801"></a><a id="Two Port Network Circles"></a><a id="48806"></a>Two-Port Network Circles</h2>

<p>
<a id="pgfId-1066802"></a><em>NC</em> plots constant noise contours at the input of a two-port circuit. <em>GAC</em> plots constant gain contours at the input port, and <em>GPC</em> plots constant gain contours at the output port. Gain contour values reflect an optimum match at the opposing port.</p>
<p>
<a id="pgfId-1066803"></a>Noise and Gain circles can be plotted at a single dB value for a range of frequencies or at a single frequency for a range of dB values. If you do not enter values for the frequency range, a circle is plotted for every simulated frequency for which a circle with the specified value exists.</p>
<p>
<a id="pgfId-1066804"></a><em>SSB</em> plots stability circles at the input port, and <em>LSB</em> plots stability circles at the output port. You can also specify a limited frequency range for these contours.</p>

<h3>
<a id="pgfId-1066805"></a>Equations for Two-Port Network Circle</h3>
<h4>
<a id="pgfId-1066806"></a>NC (Noise Circle) Equations</h4>
<p>
<a id="pgfId-1066810"></a><img width="242" height="88" src="images/Chap8-235.gif" /></p>

<p>
<a id="pgfId-1066811"></a>where</p>

<p>
<a id="pgfId-1066815"></a><img width="144" height="55" src="images/Chap8-236.gif" /></p>

<p>
<a id="pgfId-1066816"></a>The center is calculated using</p>

<p>
<a id="pgfId-1066820"></a><img width="122" height="70" src="images/Chap8-237.gif" /></p>

<p>
<a id="pgfId-1066821"></a>The radius is calculated using</p>

<p>
<a id="pgfId-1066825"></a><img width="245" height="100" src="images/Chap8-238.gif" /></p>

<p>
<a id="pgfId-1066826"></a>Where <t-times>
i</t-times>
 is the index number</p>

<h4>
<a id="pgfId-1066827"></a>GAC (Available Gain Circle) Equations</h4>

<p>
<a id="pgfId-1066828"></a>The center is calculated using</p>

<p>
<a id="pgfId-1066832"></a><img width="240" height="94" src="images/Chap8-239.gif" /></p>

<p>
<a id="pgfId-1066833"></a>The radius is calculated using</p>

<p>
<a id="pgfId-1066837"></a><img width="341" height="109" src="images/Chap8-240.gif" /></p>

<p>
<a id="pgfId-1066838"></a>Where</p>

<p>
<a id="pgfId-1224188"></a><img width="122" height="83" src="images/Chap8-241.gif" /></p>

<p>
<a id="pgfId-1224189"></a>And</p>

<p>
<a id="pgfId-1224193"></a><img width="216" height="53" src="images/Chap8-242.gif" /></p>
<h4>
<a id="pgfId-1066848"></a>GPC (Power Gain Circle) Equations</h4>

<p>
<a id="pgfId-1066849"></a>The center is calculated</p>

<p>
<a id="pgfId-1066853"></a><img width="227" height="87" src="images/Chap8-243.gif" /></p>

<p>
<a id="pgfId-1066854"></a>The radius is calculated using</p>

<p>
<a id="pgfId-1066858"></a><img width="360" height="116" src="images/Chap8-244.gif" /></p>

<p>
<a id="pgfId-1066859"></a>Where</p>

<p>
<a id="pgfId-1066863"></a><img width="127" height="86" src="images/Chap8-245.gif" /></p>

<p>
<a id="pgfId-1066864"></a>And</p>

<p>
<a id="pgfId-1066868"></a><img width="191" height="54" src="images/Chap8-246.gif" /></p>
<h4>
<a id="pgfId-1066869"></a>LSB (Load Stability Circle) Equations</h4>

<p>
<a id="pgfId-1066870"></a>The center is calculated using</p>

<p>
<a id="pgfId-1066874"></a><img width="201" height="97" src="images/Chap8-247.gif" /></p>

<p>
<a id="pgfId-1066875"></a>The radius is calculated using</p>

<p>
<a id="pgfId-1066879"></a><img width="198" height="91" src="images/Chap8-248.gif" /></p>

<p>
<a id="pgfId-1066880"></a>Where</p>

<p>
<a id="pgfId-1066884"></a><img width="212" height="59" src="images/Chap8-249.gif" /></p>
<h4>
<a id="pgfId-1066885"></a>SSB (Source Stability Circle) Equations</h4>

<p>
<a id="pgfId-1066886"></a>The center is calculated using</p>

<p>
<a id="pgfId-1066890"></a><img width="200" height="87" src="images/Chap8-250.gif" /></p>

<p>
<a id="pgfId-1066891"></a>The radius is calculated using</p>

<p>
<a id="pgfId-1066895"></a><img width="174" height="89" src="images/Chap8-251.gif" /></p>

<p>
<a id="pgfId-1066896"></a>Where</p>

<p>
<a id="pgfId-1066900"></a><img width="212" height="51" src="images/Chap8-252.gif" /></p>
<h3>
<a id="pgfId-1066902"></a><a id="22904"></a>Equation for VSWR (Voltage Standing Wave Ratio)</h3>

<p>
<a id="pgfId-1066903"></a><em>VSWR</em> is calculated from the S-parameters. You can plot the <em>VSWR</em> at any port in the circuit on a rectangular chart.</p>

<p>
<a id="pgfId-1066907"></a><img width="166" height="77" src="images/Chap8-253.gif" /></p>

<p>
<a id="pgfId-1066908"></a>Where <t-times>
i</t-times>
 is the port number.</p>

<h4>
<a id="pgfId-1066909"></a>Equation for ZM (Input Impedance)</h4>

<p>
<a id="pgfId-1066910"></a>You can plot input impedance if all other ports are matched.</p>

<p>
<a id="pgfId-1066914"></a><img width="189" height="81" src="images/Chap8-254.gif" /></p>

<p>
<a id="pgfId-1066915"></a>Where <code>R</code> the reference impedance of the port of interest and <code>i</code><t-times />
is the port number.</p>

<h3>
<a id="pgfId-1066917"></a><a id="46137"></a>Equation for GD (group delay)</h3>

<p>
<a id="pgfId-1066918"></a><em>GD</em> (group delay) approximates the derivative of the phase with respect to frequency, normalized to 360 degrees. Units for group delay are in seconds.</p>

<p>
<a id="pgfId-1066922"></a><img width="103" height="54" src="images/Chap8-255.gif" /></p>

<p>
<a id="pgfId-1065073"></a>Group delay is calculated from the phase of the corresponding S-parameter (for example, <t-times>
GD</t-times>
<sub>21</sub> corresponds to <t-times>
S</t-times>
<sub>21</sub>).</p>

<h3>
<a id="pgfId-1068152"></a>References</h3>

<p>
<a id="pgfId-1068140"></a>To learn the technical details about how SpectreRF converts S-parameter data to a time-domain description, see the article &#8220;Robust rational function approximation algorithm for model generation,&#8221; by C. P. Coelho, J. R. Phillips, and L. M. Silveira. This article appeared in the proceedings of the 36th Design Automation Conference, New Orleans, LA, June 1999.</p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="Chap7.html" id="prev" title="Large-Signal S-Parameter Simulation (LSSP)">Large-Signal S-Parameter Simul ...</a></em></b><b><em><a href="Chap9.html" id="nex" title="Cosimulation with MATLAB ...">Cosimulation with MATLAB ...</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>