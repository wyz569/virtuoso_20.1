
<html><head><title>Using xrun for AMS Simulation</title>
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="jommy" />
<meta name="CreateDate" content="2019-11-04" />
<meta name="CreateTime" content="1572864910" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the Virtuoso AMS Designer simulator, a mixed-signal simulator that supports the Verilog-AMS and VHDL-AMS language standards." />
<meta name="DocTitle" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Using xrun for AMS Simulation" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="FileType" content="Chapter" />
<meta name="Keyword" content="amssimug" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2019-11-04" />
<meta name="ModifiedTime" content="1572864910" />
<meta name="NextFile" content="Using_the_AMS_Designer_Simulator_for_Design_Verification.html" />
<meta name="Group" content="Analog Mixed-Signal Simulation" />
<meta name="Platform" content="Functional Verification" />
<meta name="PrevFile" content="Real_Number_Modeling.html" />
<meta name="Product" content="Xcelium" />
<meta name="ProductFamily" content="Functional Verification" />
<meta name="ProductVersion" content="19.09" />
<meta name="RightsManagement" content="Copyright 2012-2019 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide -- Using xrun for AMS Simulation" />
<meta name="Version" content="19.09" />
<meta name="Renderer" content="WIKI" />
<meta name="SpaceKey" content="amssimug2003" />
<meta name="confluence-version" content="6.13.3" />
<meta name="ecms-plugin-version" content="03.30.005" />
<script type="text/javascript" src="styles/shCore1.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shCore.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shBrushCpp.js">/*<![CDATA[*//*]]>*/</script><script type="text/javascript" src="styles/shBrushJava.js">/*<![CDATA[*//*]]>*/</script><link rel="stylesheet" href="styles/shCoreDefault.css" type="text/css" /><script type="text/javascript">/*<![CDATA[*/
SyntaxHighlighter.all();
/*]]>*/</script>
        
        <link href="styles/site.css" rel="stylesheet" type="text/css" />
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    

    </head><body style="background-color: #FFFFFF;"><!-- Begin Buttons --><header xmlns:html="http://www.w3.org/1999/xhtml"><div class="docHeadr">Product Documentation<img src="images/Cadence-Logo.jpg" /></div>
<nav class="blueHead"><ul><li><a class="content" href="amssimugTOC.html">Contents</a></li><li><a class="prev" href="Real_Number_Modeling.html" title="Real_Number_Modeling">Real_Number_Modeling</a></li><li style="float: right;"><a class="viewPrint" href="amssimug.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="Using_the_AMS_Designer_Simulator_for_Design_Verification.html" title="Using_the_AMS_Designer_Simulator_for_Design_Verification">Using_the_AMS_Designer_Simulat ...</a></li></ul></nav></header><!-- End Buttons --><div xmlns:html="http://www.w3.org/1999/xhtml" style="font-size:14px;line-height:1.42857142857;margin:20px 0 0 0;font-weight:bold;"><center>Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide<br />Product Version 19.09, September 2019</center></div>
<div xmlns:html="http://www.w3.org/1999/xhtml" style="margin-left:5%;">
<p></p>

<p></p>
<div id="main-header">
                    
                    
                                                <div style="width: 100%; font-size: 32px; text-align: left;               font-weight: bold;">10</div>
<h1 style="margin: 4px 0 4px;"><span>Using xrun for AMS Simulation</span></h1>

                    
                </div>
<div class="wiki-content group" id="main-content">
                    
<p><span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1031602"></span></p>

<p><span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-using_irun"></span>You can run the Spectre<span style="color: rgb(0,0,0);"><sup>&#174;</sup> </span>AMS Designer simulator by issuing a single command:<code> xrun.</code> You can use the<code> xrun </code>command to specify all your AMS input files and options for simulation, which can be particularly useful in your&#160;<a href="Using_the_AMS_Designer_Simulator_for_Design_Verification.html">verification flow</a>.</p>

<p>The<code> xrun </code>command supports input files from many different simulation and programming languages including Verilog and Verilog-AMS, SystemVerilog (SV), VHDL and VHDL-AMS, SPICE and Spectre. You can use the<code> xrun </code>command to compile, elaborate, and simulate your mixed-language designs.</p>

<p>To understand how<code> xrun </code>works, start by reading the<span style="color: rgb(0,0,255);"> <a class="message-url" href="../xrun/Overview.html">&quot;Overview&quot;</a> </span>in the<span style="color: rgb(0,0,255);"> <a class="message-url" href="../xrun/xrunTOC.html">xrun User Guide</a>.</span> To&#160;understand how<code> xrun </code>works for AMS simulation, refer to the following additional topics:</p>

<p></p>
<div class="toc-macro rbtoc1572864886012">
<ul class="toc-indentation">
<li><a href="#UsingxrunforAMSSimulation-xrunCommandSyntaxirunCommand1038257">xrun Command Syntax &#160;</a></li>
<li><a href="#UsingxrunforAMSSimulation-xrunCommand-LineOptionsforAMSirun_command-line_options1044107">xrun Command-Line Options for AMS &#160;</a></li>
<li><a href="#UsingxrunforAMSSimulation-UsingxrunwithSpectreandSPICEInputFilesSPICEsupport1060437">Using xrun with Spectre and SPICE Input Files &#160;</a></li>
<li><a href="#UsingxrunforAMSSimulation-SpecifyingCommand-LineOptionsforSpectrespectre_argsOption1035581">Specifying Command-Line Options for Spectre &#160;</a></li>
<li><a href="#UsingxrunforAMSSimulation-MigratingfromThree-Steptoxrunmigrate1049795">Migrating from Three-Step to xrun &#160;</a></li>
<li><a href="#UsingxrunforAMSSimulation-ExamplesUsingxrunforAMSSimulation1039756">Examples Using xrun for AMS Simulation</a></li>
</ul>
</div>

<p>See also<span style="color: rgb(0,0,255);"> <a class="message-url" href="../xrun/xrunTOC.html">xrun User Guide</a> </span>for information on binding rules.</p>
<h2 id="UsingxrunforAMSSimulation-xrunCommandSyntaxirunCommand1038257">xrun Command Syntax<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-irunCommand"></span>&#160;<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1038257"></span></h2>

<p>The<code> xrun </code>command has the following syntax:</p>

<p><code>
    xrun&#160;<a href="#UsingxrunforAMSSimulation-1044107">xrunOptions</a>&#160;sourceFiles  
  </code></p>

<p>For AMS simulation, the<code> xrun </code>command recognizes the following source file types (<code>sourceFiles</code>) by their file extensions:<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-AMSfileExtensions"></span>&#160;<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1041592"></span></p>
<div class="table-wrap"><table border="1" cellpadding="5" cellspacing="0" class="wrapped confluenceTable" style="width: 648.0px;"><colgroup><col /><col /></colgroup><tbody><tr><th class="confluenceTh" valign="middle" width="182">
<p>Source File Type</p>
</th><th class="confluenceTh" valign="middle" width="466">
<p>Valid Extensions</p>
</th></tr>
<tr><td class="confluenceTd" valign="top">
<p>Spectre or SPICE</p>
</td>
<td class="confluenceTd" valign="top">
<p><code>.scs </code>or<code> .sp </code></p>

<p><span style="color: rgb(0,0,0);"> <strong>Note:</strong>&#160;</span>You can specify additional extensions for analog source files using <a href="#UsingxrunforAMSSimulation-1064517"> <code>-s</code> </a> <code>pice_ext </code> extension.</p>

<p>See also &quot;<a href="#UsingxrunforAMSSimulation-1060437">Using xrun with Spectre and SPICE Input Files</a>.&quot;</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p>Verilog-AMS</p>
</td>
<td class="confluenceTd" valign="top">
<p><code>.vams </code>,<code> .VAMS </code></p>

<p><strong>Note:</strong>&#160;You can specify additional extensions for Verilog-AMS source files using the <code><a href="#UsingxrunforAMSSimulation-1064123">-amsvlog_ext</a></code> extension.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p>SV-AMS</p>
</td>
<td class="confluenceTd" valign="top">
<p><code>.svams</code></p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p>VHDL-AMS</p>
</td>
<td class="confluenceTd" valign="top">
<p><code>.vha</code>,<code> .VHA</code>,<code> .vhams</code>,<code> .VHAMS</code>,<code> .vhms</code>,<code> .VHMS </code></p>

<p><span style="color: rgb(0,0,0);"> <strong>Note:</strong>&#160;</span>You can specify additional extensions for VHDL-AMS source files using <a href="#UsingxrunforAMSSimulation-1064113"><code>-amsvhdl_ext</code> </a><span style="font-family: monospace;">&#160;</span>extension.</p>
</td>
</tr>
</tbody></table></div>

<p>See also<span style="color: rgb(0,0,255);"> <a class="message-url" href="../xrun/Customizing_XRUN.html">&quot;Changing the Default Set of File Extensions&quot;</a> </span>in the<span style="color: rgb(0,0,255);"> <a class="message-url" href="../xrun/xrunTOC.html">xrun User Guide</a> </span>for complete information about the file extensions that<code> xrun </code>recognizes and how to change the default set. You can also type<code> xrun -helpfileext </code>to see a list of file extensions.</p>

<p>In the following example,<code> xrun </code>compiles the<code> .v </code>file using<code> xmvlog</code>, the<code> .sv </code>files using<code> xmvlog -sv</code>, and the<code> .vams </code>file using<code> xmvlog -ams</code>:</p>

<p><code> xrun top.sv dut.sv dut2.v dut3.vams </code></p>

<p>After compiling the input files,<code> xrun </code>automatically runs<code> xmelab </code>to elaborate the design and<code> xmsim </code>to simulate the design.</p>
<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>You must not specify <code>-ams</code> on the <code>xrun</code> command line unless you want to force <code>xrun</code> to compile all Verilog and VHDL input files as AMS files.</p>
</div>
</div>

<p>If you have a design that contains Verilog-A design units, see &quot;<a href="Elaborating.html#Elaborating-1044780">Including Structural Verilog-A in a Spectre Netlist</a>.&quot;</p>
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>While you can compile both SystemVerilog and AMS source files on the same command line, you cannot have a file that contains both SystemVerilog and AMS statements. See<a href="SystemVerilog_and_AMS_Extensions.html#SystemVerilogandAMSExtensions-1075123">&#160;&quot;Using SystemVerilog Modules&quot;&#160;</a>for more information.</p>
</div>
</div>
<h2 id="UsingxrunforAMSSimulation-xrunCommand-LineOptionsforAMSirun_command-line_options1044107">xrun Command-Line Options for AMS<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-irun_command-line_options"></span>&#160;<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1044107"></span></h2>

<p>To see the set of command-line options (<code>xrunOptions</code>) that relate to AMS simulation, type the following on the command line:</p>

<p><code> xrun -helpsubject ams</code></p>
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>You can use the<code>&#160;xrun -helpsubject amsspice&#160;</code>to view the<code>&#160;xrun&#160;</code>options for AMS-SPICE.</p>
</div>
</div>

<p><span style="color: rgb(51,51,51);">You can specify zero or more of the following AMS-related options (</span> <code style="color: rgb(51,51,51);">xrunOptions</code> <span style="color: rgb(51,51,51);">) on the</span> <code style="color: rgb(51,51,51);"> xrun </code> <span style="color: rgb(51,51,51);">command line:</span></p>
<div class="table-wrap"><table class="confluenceTable cadenceTable" id="cadDefaultfont" style="width:680px;"><colgroup><col style="width:200px;" /><col style="width:480px;" /></colgroup><colgroup><col style="width: 29.2127%;" /><col style="width: 70.7196%;" /></colgroup><tbody><tr><th class="confluenceTh" valign="top" width="192">
<p>xrunOptions</p>
</th><th class="confluenceTh" valign="top" width="456">
<p>Description</p>
</th></tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-ams </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Force<code> xrun </code>to compile all input files as AMS files (Verilog-AMS, VHDL-AMS) regardless of their file extensions</p>
</td>
</tr>
<tr><td class="confluenceTd" colspan="1"><code>-ade&#160;</code></td>
<td class="confluenceTd" colspan="1">Enable plotting of digital signals in ViVA on digital simulation in ADE flow.</td>
</tr>
<tr><td class="confluenceTd" colspan="1"><code>-amsvivalog</code></td>
<td class="confluenceTd" colspan="1">
<p>Generate <code>runObjFile</code>. This is useful for several analyses supported by AMS, such as monte carlo analysis that creates multiple log files. In cases where multiple log files are saved in different locations, it is not possible for ViVA to read all the datasets unless there is a <code>runObjFile</code> that tells ViVA where to get all the log files from.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top"><div class="content-wrapper">
<p><code>-amsconnrules </code> <span>&#160;</span> <code> rulesName<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-amsconnrules"></span>&#160;<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1064061"></span>
              </code></p>
</div>
</td>
<td class="confluenceTd" valign="top">
<p>Specify connect rules to use for automatic connect module insertion (for example, between the default<code> logic </code>discipline and the<code> electrical </code>discipline)</p>

<p><span style="color: rgb(0,0,0);"> <strong>Note:</strong>&#160;</span>You can specify more than one <code>-amsconnrules</code> option. The order in which you specify connect rules in their source files determines their precedence. The software must be able to find the named connect rules in one of the source files or precompiled libraries.</p>

<p><br /></p>
<div>
<p><strong>Tip</strong>: <span>If you use the Cadence-installed connect rules, you can use an </span><code><a href="Using_an_amsd_Block.html#UsinganamsdBlock-1051785">ie</a></code> <span>statement to automate the process of creating a custom discipline and connect rule for connecting the custom discipline to the<code> electrical </code>discipline. See &quot;<code><a href="Using_an_amsd_Block.html#UsinganamsdBlock-1051785">ie</a></code>&quot;.</span></p>
</div>
</td>
</tr>
<tr><td class="confluenceTd" colspan="1"><code>-amsdebug</code></td>
<td class="confluenceTd" colspan="1">
<p>Generates readable call stack for the log file.</p>
</td>
</tr>
<tr><td class="confluenceTd" colspan="1"><code>-ams_dig_wreal</code></td>
<td class="confluenceTd" colspan="1">
<p>Keeps wreal as discrete discipline.</p>
</td>
</tr>
<tr><td class="confluenceTd" colspan="1"><div class="content-wrapper">
<p><code><span>-ams_flex</span></code><span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-amsflex"></span></p>
</div>
</td>
<td class="confluenceTd" colspan="1">
<p>Enables flex mode that lets you use an external Spectre installation. When enabled, AMS Designer will look for the Spectre executable in the Linux user path and use it to simulate the analog kernel.</p>

<p><strong>Notes</strong>:</p>
<ul><li>AMS Designer flex mode is supported with SPECTRE 17.1 ISR14 and SPECTRE 18.1 ISR6 versions.</li><li>The Linux user path must point to Spectre from the actual installation; wrapper script should not be used.</li><li>
<p>In flex mode, <code>-amsformat</code> is ignored. The default waveform format is a unified database with analog data in PSFXL 1.1 format and digital data in SST2 format. To change the waveform format for analog users, use the <code>rawfmt </code>Spectre option or the <code>-format </code>Spectre command-line argument. In such cases, unified database is disabled and the results will be stored in two different files, one for analog results using the specified Spectre format and one for digital data in SST2 format.</p>
</li><li>
<p>It is recommended to use IC6.1.8 ISR3 or later for AMSD flex mode. To enable flex mode in ADE Explorer, navigate to <em>Simulation</em>&gt;<em>Netlist and Run Options</em>&gt;<em>Netlist and Run Options</em> form and select <em>Enable AMSD flexible release matrix</em>.</p>
</li></ul></td>
</tr>
<tr><td class="confluenceTd" valign="top"><div class="content-wrapper">
<p><code>-amsfastspice<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-amsfastspice"></span>     <span>&#160;</span>
<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1064077"></span>
              </code></p>
</div>
</td>
<td class="confluenceTd" valign="top">
<p>Enables Fast SPICE simulator (UltraSim).</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top"><div class="content-wrapper">
<p><code><span>-amsformat &lt;sst2|psfxl|sst2_all|psfxl_all&gt;</span> </code><span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-amsformat"></span></p>
</div>
</td>
<td class="confluenceTd" valign="top">
<p>Controls the storage format for AMS probes.</p>

<p><code>sst2</code>: Sets the Tcl-based probes to use sst2 storage. In this mode, the<code> rawfmt </code>option specified in the analog control file is honored. This is the default.</p>

<p><code>sst2_all</code>: Sets the Tcl probes to use sst2 storage. However, this option also overrides the<code> rawfmt </code>option specified in the analog control file so that all analog probes are stored in the sst2 format in the SHM database. In other words, this option overrides the<code> rawfmt </code>setting in the analog control file to<code> rawfmt=sst2.</code></p>

<p><code>psfxl</code>: Enables the unified PSFXL/SST2 waveform database storage. This mode sets the Tcl analog probes to use psfxl storage in the SHM waveform database. The<code> rawfmt </code>option in the analog control file is honored. Note that when<code> rawfmt=psfxl </code>or<code> rawfmt=sst2 </code>is specified, the SPICE probes are stored in the default PSFXL/SST2 database in the<code> psfxl </code>format. For all other cases, the<code> rawfmt </code>data is stored in the specified format in the<code> .raw </code>directory.</p>

<p><code>psfxl_all</code>: Enables the unified PSFXL/SST2 waveform database storage. This mode sets the Tcl probes to use psfxl storage and also overrides the<code> rawfmt </code>option specified in the analog control file so that all analog probes are stored in the psfxl format in the SHM database. In other words, this option overrides the<code> rawfmt </code>setting in the analog control file to<code> rawfmt=psfxl.</code></p>

<p>To enable<code> xrun </code>to use the unified PSFXL/SST2 waveform database storage:</p>
<ol><li>Specify the location of the default SHM database in the<code> probe.tcl </code>file. For example:<br /> <span> <code>database -open waves -into resultDirName.shm -default probe -create -database waves -all -depth all</code> </span></li><li>Specify the<code> probe.tcl </code>with the<code> xrun </code>command as follows:<br /> <code>xrun -amsformat psfxl_all -input probe.tcl</code></li></ol></td>
</tr>
<tr><td class="confluenceTd" colspan="1"><code>--amsoutdir</code></td>
<td class="confluenceTd" colspan="1">
<p>Redirect the temporary files and subdirectories created during compilation, elaboration, and simulation to the specified subdirectory . The -amsoutdir option will override the <code>+amsrawdir</code>, <code>-nclibdirpath</code>, or <code>-ahdllibdir</code> settings.</p>

<p><strong>Note</strong>: It is recommended not to use the <code>+amsrawdir</code><span>, </span><code>-nclibdirpath</code><span>, or </span><code>-ahdllibdir </code>options when using <code>--amsoutdir</code>.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-amspartinfo </code><code>file </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Mixed-signal partition information.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top"><div class="content-wrapper">
<p><code>-amsdir </code><code>raw_dir<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-amsrawdir"></span>
              </code></p>
</div>
</td>
<td class="confluenceTd" valign="top">
<p>Specifies the output raw file directory.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top"><div class="content-wrapper">
<p><code>-amsvhdl_ext </code><code>extension<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-amsvhdl_ext"></span><span>&#160;</span>
<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1064113"></span> </code></p>
</div>
</td>
<td class="confluenceTd" valign="top">
<p>Overrides extensions for VHDL-AMS source files.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top"><div class="content-wrapper">
<p><code>-amsvlog_ext </code> <code>extension<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-amsvlog_ext"></span>       <span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1064123"></span><br /></code></p>
</div>
</td>
<td class="confluenceTd" valign="top">
<p>Overrides extensions for Verilog-AMS source files.</p>

<p><span style="color: rgb(0,0,0);"><strong>Note:</strong>&#160;</span>You can also add file extensions to the list of built-in extensions, by specifying a plus sign (+) before the extensions to be added. For example, the following option adds<code> .va </code>to the list of built-in file extensions for Verilog-AMS source files:</p>

<p><code>-amsvlog_ext </code> <code> +.va </code></p>

<p>For more information about changing file extensions, refer to the<span style="color: rgb(0,0,0);"> Changing the Default Set of File Extensions </span>section in the<span style="color: rgb(0,0,0);"> <em> xrun User Guide</em>.</span></p>
</td>
</tr>
<tr><td class="confluenceTd" colspan="1"><code>-ams_weak_setd</code></td>
<td class="confluenceTd" colspan="1">Allows to override the BDR setting on domainless nets to any appropriate discipline.</td>
</tr>
<tr><td class="confluenceTd" valign="top"><div class="content-wrapper">
<p><code>-analogcontrol f</code><code>ile<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-analogcontrol"></span>
                <span>&#160;</span>
                <span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1064137"></span>
              </code></p>
</div>
</td>
<td class="confluenceTd" valign="top">
<p>Specifies the analog simulation control file.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-chkdigdisp </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Performs discipline compatibility of the digital net.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-clean </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Deletes the complete set of output files and directories that are created by the tool to perform additional processing of Verilog and SPICE interfaces. These files include the<code> portbind </code>files, skeletons, and other AMS Designer-specific processing files.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-cleanlib </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Deletes all <code>.pak</code> files found in the libraries specified in the<code> cds.lib </code>file that is located in the current working directory or the<code> cds.lib </code>file specified using the<code> -cdslib </code>option. It also removes the<code> ./xcelium.d </code>directory.</p>

<p>The <code>-cleanlib</code> option searches through the entire<code> cds.lib </code>structure and also deletes any additional<code> cds.lib </code>files that are included in the original. This option does not remove the<code> .pak </code>files that do not have write permissions, or the<code> .pak </code>files located in the Cadence Install directory.</p>

<p><br /></p>
<div>
<p><strong>Caution</strong>: Use the <code>-cleanlib</code> option carefully because it deletes all the writable <code>.pak</code> files found in the libraries specified in the cds.lib file even if the libraries are shared with another process.</p>
</div>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-cleanlibverify </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>This option behaves similarly as the<code> -cleanlib </code>option. However, when this option is used, xrun displays the list of files that are being removed and removes the files only after confirmation.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-cleanlibscript </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>This option creates an executable script, which upon executing, produces the same result as the<code> -cleanlib </code>option. The script is called<code> cleanlibscript.sh </code>and is created in the working directory. After creating the script, xrun exits.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><span><code>-default_spice_oomr</code> </span></p>
</td>
<td class="confluenceTd" valign="top">
<p>Assign a default value (<code>1&#39;bx</code>) when a digital statement contains an out-of-module reference to a SPICE block.</p>

<p>See &quot;<a href="Preparing_the_Design__Using_Mixed_Languages.html#PreparingtheDesign:UsingMixedLanguages-1043632">Using Command-Line Options to Manage Out-of-Module References to SPICE</a>&quot; for more information.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-disable_amsoptie </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>By default, hierarchical interface element (IE) optimization is enabled. Use this option to disable hierarchical IE optimization.</p>
</td>
</tr>
<tr><td class="confluenceTd" colspan="1"><code>-disable_dr_2_4</code></td>
<td class="confluenceTd" colspan="1">Specifies to use the VAMS LRM v2.3 the discipline resolution algorithms.</td>
</tr>
<tr><td class="confluenceTd" valign="top"><div class="content-wrapper">
<p><code>-discipline </code><code>disciplineName<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-discipline"></span>
                <span>&#160;</span>
<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1064237"></span><br /></code></p>
</div>
</td>
<td class="confluenceTd" valign="top">
<p>Specifies the discipline to use for undisciplined digital wires.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><span><code>-disres default|detailed|none</code> </span></p>
</td>
<td class="confluenceTd" valign="top">
<p>Sets discipline resolution.</p>
</td>
</tr>
<tr><td class="confluenceTd" colspan="1">
<p><code>+finish_current_analysis</code></p>
</td>
<td class="confluenceTd" colspan="1">
<p>Forces <code>$finish</code> to finish the current analysis for a multi-analysis simulation.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top"><div class="content-wrapper">
<p><code>-iereport/-ieinfo <span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-iereport"></span>
                <span>&#160;</span>
                <span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-ieinfo"></span>
                <span>&#160;</span>
                <span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1064258"></span>
              </code></p>
</div>
</td>
<td class="confluenceTd" valign="top">
<p>The<code> -iereport</code>/<code>-ieinfo </code>option generates a detailed report containing Interface Element information, Port Discipline, Sensitivity information, Port Drivers information, Conversion Element (CE) name, File, Instance, Generic map, VHDL signal, SPICE node, CE report summary, and so on. For example:</p>

<p><code>Interface Elements at the block &lt;instance&gt; testbench.msbuf.I2 of &lt;master&gt; ana_nand (file : /home/bcui/BDR_multpwr/source/analog/ana_nand.vams) </code></p>

<p><code>Automatically inserted : testbench.msbuf.I2.Y1__E2L__logic18V </code></p>

<p><code>Connect Module : E2L </code></p>

<p><code>Mode : Merged </code></p>

<p><code>Net : testbench.msbuf.I2.Y1 (discipline: discrete_amslps, nettype: wrealsum) </code></p>

<p><code>Port : testbench.msbuf@ms_buf&lt;module&gt;.I2@ana_nand&lt;module&gt;.I1@my_inv&lt;module&gt;.in (logic18V input) </code></p>

<p><code>Parameters : </code></p>

<p><code>vsup : 1.8 </code></p>

<p><code>List of Ports connected to net testbench.msbuf.I2.Y1 : (Total: 1) </code></p>

<p><code>testbench.msbuf.I2.I1.in (logic18V input) </code></p>

<p><code>Discipline of Port (Din): discrete_amslps, Wreal Port </code></p>

<p><code>Drivers of Port Din: </code></p>

<p><code>(tb.dut.PMUInst) assign wvdd1= vsup1 </code></p>

<p><code>IEEE1801 Power Supply net </code></p>

<p><code>CE #1: Name: MY_AD_LIB.E2ILOG:behavior </code></p>

<p><code>File: E2ILOG.vhms </code></p>

<p><code>Instance: :vh_top:test1:e2ilog_a </code></p>

<p><code>Generic Map: () </code></p>

<p><code>VHDL Signal: output &#39;:vh_top:A&#39; with type &#39;ilog&#39; </code></p>

<p><code>Spice Node name: dummy_spice.A </code></p>

<p><code>----  CE Report Summary: </code></p>

<p><code>E2ILOG ( ELECTRICAL inout; ILOG out; )         total: 1 </code></p>

<p><code>ILOG2E ( ILOG in; ELECTRICAL inout; )  total: 1 </code></p>

<p>The<code> -ieinfo </code>option writes the results in a file<code> ams_ieinfo.log.</code> Use the<code> -ieinfo_log </code>option to output the results to a different file.</p>

<p><span style="color: rgb(0,0,0);"> <strong>Note:</strong>&#160;</span>The<code> -iereport </code>option is aliased to the<code> -ieinfo </code>option.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-ieinfo_driverload </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Generates a Tcl file,<code> ieinfo_driverload.tcl</code>, with the drivers and loads information for both CE and IE.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-ieinfo_driverload_tcl &lt;</code> <code>filename</code> <code>&gt; </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Generates a user-specified Tcl file that contains drivers and loads information for both CE and IE.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-ieinfo_log </code>&lt;<code>filename</code>&gt;</p>
</td>
<td class="confluenceTd" valign="top">
<p>Specifies the file to which the results of the <code>-iereport</code> are written. If this option is not specified, the results are written to the default <code>ams_ieinfo.log</code> file in the current working directory.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-ieinfo_probe </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Generates a Tcl file<code> ieinfo_probe.tcl </code>that contains the probe-related information for both IE and CE.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-ieinfo_probe_tcl </code>&lt;<code>filename</code>&gt;</p>
</td>
<td class="confluenceTd" valign="top">
<p>Generates a user-specified Tcl file that contains the probe-related information for both IE and CE.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top"><div class="content-wrapper">
<p><code>-ieinfo_summary <span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-ieinfo_summary"></span>
              </code></p>
</div>
</td>
<td class="confluenceTd" valign="top">
<p>Generates a summarized report containing IE-related information. For example:</p>

<p><code>1. Interface Elements at the block &lt;instance&gt; top of &lt;master&gt; top (file : ./top.sv) </code></p>

<p><code>Automatically inserted : top.\b_zero_pad_bit0__R2E_2__electrical </code></p>

<p><code>Connect Module : R2E_2<br />Mode : Merged<br />Net : pad connection (discipline: logic, nettype: variable)<br />Port : top.ana_gate@analog_top&lt;module&gt;.\itune[1]  (discipline: electrical, direction: input, nettype: electrical) </code></p>

<p><code>Parameters : </code></p>

<p><code>vsup :5<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;vd elta :0.078125<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;vlo :0<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;vx :0<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tr :5e-11<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tf :5e-11<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ttol_t :5.000000000000001e-12<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tdelay :0<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rout :200<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rx :200<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rz :10000000 </code></p>

<p><code>Discipline of Port (Din): logic, Wreal Port<br />Discipline of Port (Aout): electrical, Analog Port </code></p>

<p><code>Sensitivity information: </code></p>

<p><code>No Sensitivity info </code></p>

<p><code>IE Report Summary (with disciplines and directions): </code></p>

<p><code>R2E_2 ( logic input; electrical output;)    total: 3 </code></p>

<p><code>-------------------------------------------------------------------- </code></p>

<p><code>Effective Number of IE Instances: </code></p>

<p><code>Total Number of Connect Modules : 3 </code></p>

<p>The<code> -ieinfo_summary </code>option writes the results in a file<code> ams_ieinfo.log.</code> Use the<code> -ieinfo_log </code>&lt;<code>filename</code>&gt; option to output the results to a different file.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><span><code>-ignore_missing_spice_port</code> </span></p>
</td>
<td class="confluenceTd" valign="top">
<p>Ignores the missing SPICE ports displayed as &quot;not found&quot; in the port bind file.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-ignore_spice_oomr </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Ignores any digital statements that contain out-of-module references to SPICE blocks</p>

<p>See &quot;<a href="Preparing_the_Design__Using_Mixed_Languages.html#PreparingtheDesign:UsingMixedLanguages-1043632">Using Command-Line Options to Manage Out-of-Module References to SPICE</a>&quot; for more information.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code><span>-ignore_svbind_spice</span></code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Ignores the SV bind statements on SPICE blocks. See <a href="SystemVerilog_and_AMS_Extensions.html#SystemVerilogandAMSExtensions-1075660">SystemVerilog Binding on SPICE</a> for more information.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top"><div class="content-wrapper">
<p><code>-licinfo<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-licinfo"></span>
              </code></p>
</div>
</td>
<td class="confluenceTd" valign="top">
<p>Provides information on the simulation-time licenses required for the specified design. It also provides additional information about the features that are being used for AMSD licensing. The<code> -licinfo </code>option generates a report on the licensing requirements using the following parameters:</p>
<ul><li>The contents of the design (AMS, SystemC, SystemVerilog, Verilog, VHDL, and so on).</li></ul><ul><li>Other options specified on the command line.</li></ul><ul><li>Any arguments specified using the <a href="Simulating.html#Simulating-1053825">-uselicense Option</a>.</li></ul>
<p><span style="color: rgb(0,0,0);"> <strong>Note:</strong>&#160;</span>The<code> -licinfo </code>option does not check out any licenses and also does not run the simulation.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-log_amsspice &lt;log </code> <span>&#160;</span> <code> file</code> <code>&gt; </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Saves the <code>amsspice</code> output file into the specified log file.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-mixed_bus_opt </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Does not allow mixed buses to be automatically generated for unsupported constructs.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top"><div class="content-wrapper">
<p><code>-modelpath </code> <code> string<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-modelpath"></span>
     <span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1064383"></span><br /></code></p>
</div>
</td>
<td class="confluenceTd" valign="top">
<p>For Verilog-AMS, specify one or more model files, optionally including a model section specifier such as</p>

<p><code>-modelpath ./models/resistor.scs(res) </code></p>
</td>
</tr>
<tr><td class="confluenceTd" colspan="1"><code>-ms_perf</code></td>
<td class="confluenceTd" colspan="1">Enables performance optimizations in some mixed-signal design.</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-nettype_port_relax </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Allows for relaxed port compatibility rules for connections of built-in nettypes. See <a href="SystemVerilog_Real_Number_Modeling.html#SystemVerilogRealNumberModeling-1074976">Using Real Number Modeling in SystemVerilog </a>for more information.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-neverwarn </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Do not display warning messages.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>
<span style="color: rgb(0,0,0);">-nowarn &lt;</span>arg&gt;</code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Do not display the specified warning messages.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-noparamerr </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Do not flag setting undefined parameters as error</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top"><div class="content-wrapper">
<p><span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-ppe"></span> <code>-ppe </code></p>
</div>
</td>
<td class="confluenceTd" valign="top"><div class="content-wrapper">
<p>Invoke the post-processing environment (<a href="Glossary.html#Glossary-1034191">PPE</a>)</p>

<p>See<span style="color: rgb(0,0,255);"> <a class="message-url" href="../RunningSimVision/invoking.html">Running the SimVision Analysis Environment</a> </span>for more information.</p>
</div>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-propspath </code> <code> path </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Specifies analog occurrence property database file</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-q </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Suppresses all informational messages (quiet mode).</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><span style="color: rgb(0,0,0);"><code>-rnm_tech</code> </span></p>
</td>
<td class="confluenceTd" valign="top">
<p>Enables Real Number Modeling (RNM) in Elaboration Mode.</p>

<p>The option enables you to compile and elaborate structural netlists/file in SystemVerilog (<code>.sv </code>file) while applying the concepts of &#39;implicit&#39; interconnects and RNM coercion; thereby, providing a behavior that is equivalent to structural netlists in Verilog-AMS (<code>.vams </code>files).</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-scope_discipline </code> <span>&#160;</span> <code> disc_scope </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Specifies one scope-based discipline.</p>
</td>
</tr>
<tr><td class="confluenceTd" colspan="1"><code><span>-shm_filter_group &lt;precision&gt;</span></code></td>
<td class="confluenceTd" colspan="1">
<p>Enables real value filtering for all real value probes. You can specify a precision (delta value) for real number probes to remove recorded values whose delta is less that the precision specified.</p>

<p>For more information, see <a href="Using_SimVision_with_the_AMS_Simulator.html#UsingSimVisionwiththeAMSSimulator-RealValueProbeFiltering">Enabling Real Value Probe Filtering</a>.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code><span>-solver spectre | ultrasim | aps </span></code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Specifies whether the Spectre solver, the UltraSim solver, or the APS solver is to be used with the AMS Designer simulator. If this parameter is not specified with the<code> xrun </code>command, the Spectre solver is used by default.</p>
</td>
</tr>
<tr><td class="confluenceTd" rowspan="2" valign="top"><div class="content-wrapper">
<p><code>-spectre_args<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-spectre_args"></span>
                <span>&#160;</span>
                <span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1064449"></span>
              </code></p>

<p><br /></p>

<p><br /></p>
</div>
</td>
<td class="confluenceTd" valign="top">
<p>Specifies one or more Spectre command-line arguments. You can also include multiple entries of the <code>-spectre_args</code> parameter on the command line, which are concatenated during command processing.</p>

<p><strong>Note</strong>:&#160;<code>-spectre_args</code> is ignored if APS or UltraSim solver is selected.</p>

<p>Valid Spectre arguments in AMS include:</p>

<p><code> *&#160;&#160;&#160; &#160;&#160;&#160; +aps[=liberal|moderate|conservative]</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+emir</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ms</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;++aps</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+speed=[1|2|3]</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ipmr</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+cktpreset=[sampled|pll]</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+cktpreset[=value]</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+errpreset</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+espice</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+lmode</code><br /><code>*&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; +lorder</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+lqs</code><br /><code>*&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; +lqsleep</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+lqt</code><br /><code>*&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; +lqtimeout</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+lsusp</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+lsuspend</code><br /><code>*&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; +mt [= N ] </code><br /><code>*&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; multithread [=  N ]</code><br /><code>*&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; +parasitics </code><br /><code>          +pwr_macro</code><br /><code> +mts </code><br /><code> &#160;+query</code></p>

<p><code>*&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; +rtsf</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+spice</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-D</code><br /><code>*&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; -E</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-V</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-W</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-cmiconfig</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-cmiversion</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-espice</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-h</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-lsusp</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-lsuspend</code><br /><code>*&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; -mt  </code><br /><code>*&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;-multithread </code><br /><code>*&#160;&#160;&#160;&#160;&#160;&#160;&#160;  -outdir</code><br /><code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-plugin plugin_path</code><br /><code>   &#160;&#160;&#160;&#160;&#160;&#160;&#160;-proc<br /></code><code>*&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; -r </code><br /><code>*&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; -raw </code><br /><code>*&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; -ahdllint [= value ]</code><br /><code>*&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; -ahdllint_maxwarn= n</code><br /><code> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-ahdllint_log= file<br /><span> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-ahdllibdir</span></code></p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><span style="color: rgb(0,0,0);"><strong>Note:</strong>&#160;</span>Arguments marked with * are supported in environment variables<code> spectre_DEFAULTS </code>or<code> SPECTRE_DEFAULTS </code>in AMS Designer Simulator. If the<code> spectre_DEFAULTS </code>(or<code> SPECTRE_DEFAULTS</code>) environment variable is specified, the AMS Designer simulator parses the environment variable before the<code> -spectre_args </code>parameter as the default option.</p>

<p>See the <em><span style="color: rgb(0,0,0);">Spectre Circuit Simulator and Accelerated Parallel Simulator User Guide</span></em> and the <em><span style="color: rgb(0,0,0);">Spectre Circuit Simulator Reference </span> </em>for information about these arguments. See also &quot;<a href="#UsingxrunforAMSSimulation-1035581">Specifying Command-Line Options for Spectre</a>.&quot;</p>

<p>You can achieve parasitics reduction for RF circuits using the<code> +parasitics [= </code> <code> N </code>| rf<code>] </code>argument with the<code> -spectre_args </code>parameter.</p>

<p>-<code>spectre_args +parasitics=[ N | rf ]...</code></p>

<p>Where the value specified for the<code> +parasitics </code>argument represents the maximum frequency (in GHz) of interest for RF reduction. If the chosen value is less than the maximum operating frequency of interest, you may experience accuracy loss for frequencies higher than the specified value.</p>
<ul><li><code>N </code>represents the user-defined maximum frequency</li></ul><ul><li><code>rf </code>represents the maximum frequency of<code> 30 GHz </code></li></ul><ul><li>If no value is specified for the<code> +parasitics </code>argument, the maximum frequency of<code> 1 GHz </code>is applied by default.</li></ul>
<p><span style="color: rgb(0,0,0);"><strong>Note:</strong>&#160;</span>If you specify more than one argument, you must separate them with a space and enclose them within quotation marks like this:</p>

<p><code>xrun -spectre_args &quot;-raw ../psf&quot; </code></p>

<p>To turn on the queuing-for-license capability, you can use the<code> +lqtimeout &lt;value&gt; </code>argument. Specify the value in seconds to set how long to wait for a license. Value<code> 0 </code>means wait until the license is available. You might use<code> +lqt </code>as an abbreviation of`<code> +lqtimeout.</code></p>

<p>For example, the following command instructs the tool to wait for analog solver licenses until they are available.</p>

<p><code>xrun -spectre_args &quot;+lqt 0&quot; <br /></code></p>

<p>The<code> +lqsleep &lt;value&gt; </code>argument enables you to set the sleep time between two attempts to check out a license when queuing. Setting the value to a positive number overrides the default sleep time of 30 seconds. You might use<code> +lqs </code>as an abbreviation of<code> +lqsleep.</code></p>

<p>For example, the following command instructs the tool to check for the availability of analog solver licenses every 5 minutes.</p>

<p><code>xrun -spectre_args &quot;+lqs 300&quot; </code></p>

<p>The<code> +lsuspend </code>argument (applied by default) allows you to suspend or resume the license for Spectre during the simulation run. However, you can use the<code> -lsuspend </code>argument to disable this feature. In other words,<code> -lsuspend </code>is equivalent to<code> -nolicsuspend </code>on the digital side.</p>

<p><span style="color: rgb(0,0,0);"><strong>Note:</strong>&#160;</span>Standalone Spectre does not have<code> +lsuspend </code>by default; this is an AMS-only behavior. This command will have an effect only on the analog licenses.</p>

<p>You can use the<code> -ahdllint </code>command-line option to turn on the AHDL linter feature that enables you to detect modeling issues in analog/mixed-signal Hardware Description Languages (AHDL). The AHDL linter feature comprises of static and dynamic lint checks. Static lint checks are performed before analysis. Dynamic lint checks are performed during analysis for dynamic modeling issues.</p>

<p><span style="color: rgb(0,0,0);"><strong>Note:</strong>&#160;</span>Dynamic lint checks can also be performed on VHDL-AMS modules.</p>

<p>Possible values for the<code> -ahdllint </code>option are:</p>

<p><code>no </code>- Disables lint checks. There is no change in the existing compilation or simulation warning messages.</p>

<p><code>warn </code>(default)- Turns on the static lint and dynamic lint checks. Except the models with attribute (<code> -ahdllint = no </code>), the static linter checks all models, continues the simulation, and then performs dynamic lint checks.</p>

<p><code>error </code>- Turns on the static lint check. Dynamic lint checks are performed only when static lint issues are not detected. Except the models with attribute (<code> -ahdllint = no </code>), the static linter checks all models.</p>

<p>The simulator generates an error and exits if there is any static lint warning reported after parsing all the models of the circuit. If there are no static lint warnings, the simulator continues the simulation and performs dynamic lint checks. However, in the case of dynamic lint issues, the simulator does not error out.</p>

<p><code> force </code>- Similar to<code> warn </code>, but this option overrides the model attribute<code> ahdllint = no </code>, and forces to check all models, continue the simulation, and perform dynamic lint checks.</p>

<p>You can use the<code> -ahdllint_maxwarn =</code> <code>n </code>command-line option to control the maximum number of static warnings generated per Verilog-A, Verilog-AMS, or VHDL-AMS model. The default value is 5. The<code> -ahdllint_maxwarn </code>option does not limit the warnings generated from the dynamic lint checks.</p>

<p>Use the<code> -ahdllint_log = file_name </code>command-line option to dump all AHDLinter static and dynamic and summary messages to a file.</p>

<p><span style="color: rgb(0,0,0);"><strong>Note:</strong>&#160;</span>The lint checks are performed during<code> xmsim </code>stage.</p>

<p><span style="color: rgb(0,0,0);"><strong>Note:</strong>&#160;</span>Though linter checks are supported for both Verilog-A and VerilogAMS languages, there can be some differences in the behavior. For example, when a declared variable is not used in the model, Verilog-A will generate a lint warning but VerilogAMS will not.</p>

<p><span style="color: rgb(0,0,0);"><strong>Note:</strong>&#160;</span>Dynamic lint checks can also be performed on VHDL-AMS modules.</p>

<p>The <code>+cktpreset</code> option, with a possible value of <code>sampled </code>(<code>cktpreset=sampled</code>) enables Spectre or the APS technologies to take less time steps during conservative mode simulation, while improving simulation resolution at each time step.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-spectre_e </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Run Spectre parser with the<code> -E </code>option</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top"><div class="content-wrapper">
<p><code>-spice_ext </code> <span>&#160;</span> <code> extension<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-spice_ext"></span>
                <span>&#160;</span>
                <span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1064517"></span>
              </code></p>
</div>
</td>
<td class="confluenceTd" valign="top">
<p>Overrides extensions for Spectre and SPICE source files.</p>

<p>See also &quot;<a href="#UsingxrunforAMSSimulation-1060437">Using xrun with Spectre and SPICE Input Files</a>.&quot;</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top"><div class="content-wrapper">
<p><code>-top </code> <code> top_unit <span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-dashtop"></span>
              </code></p>
</div>
</td>
<td class="confluenceTd" valign="top"><div class="content-wrapper">
<p>Specifies<code> top_unit </code>as the top-level design unit</p>

<p><strong>Important:</strong> You must use <code>-top</code> if the top level of your design is VHDL.</p>

<p><span style="color: rgb(0,0,0);"><strong>Note:</strong>&#160;</span> <code>xrun </code>automatically determines the top-level design unit from Verilog or SystemVerilog source files.</p>

<p>See<span style="color: rgb(0,0,255);font-family: &quot;Courier New&quot;;font-size: small;"> <a class="message-url" href="../xrun/The_XRUN_Command.html">-top</a> </span>in the<span style="color: rgb(0,0,255);"> <a class="message-url" href="../xrun/xrunTOC.html">xrun User Guide</a> </span>for more information. See also &quot;Verilog and VHDL-AMS&quot; in the<span style="color: rgb(0,0,255);"> <a class="message-url" href="../xrun/Compatibility_with_Existing_Use_Models.html">&quot;Compatibility with Existing Use Models&quot;</a> </span>chapter of the<em> <span style="color: rgb(0,0,0);"> xrun User Guide </span> </em>for information about using<code> -top </code>to specify connect modules and <code>cds_globals</code>.</p>
</div>
</td>
</tr>
<tr><td class="confluenceTd" valign="top"><div class="content-wrapper">
<p><code>-ultrasim_args <span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-ultrasim_args"></span>
              </code></p>
</div>
</td>
<td class="confluenceTd" valign="top">
<p>Specifies one or more UltraSim command-line arguments. You can also include multiple entries of the<code> -ultrasim_args </code>parameter on the command line, which are concatenated during command processing.</p>

<p><span style="color: rgb(0,0,0);"><strong>Note:</strong>&#160;</span>The<code> -ultrasim_args </code>parameter is ignored if the APS or Spectre solver is selected.</p>

<p>Valid UltraSim arguments in AMS include:</p>

<p><span style="color: rgb(0,0,0);font-family: &quot;Courier New&quot;;font-size: small;">+lorder+rtsf-turbo+mt[=N]-plugin<code> plugin_path </code> </span></p>

<p><span style="color: rgb(0,0,0);font-family: &quot;Courier New&quot;;font-size: small;">*-ahdllint [=<code> value </code>]*-ahdllint_maxwarn=<code> n </code>-ahdllint_log=<code> file </code> </span></p>

<p>Arguments marked with * are supported in environment variables<code> ultrasim_DEFAULTS </code>or<code> ULTRASIM_DEFAULTS </code>in AMS Designer Simulator.</p>

<p>The<code> +mt </code>argument turns turn on UltraSim multithreading for AMS simulation where<code> N </code>is the number of threads to use. The value of<code> N </code>can be between 1 and 16 and if<code> N </code>is not specified, the simulator automatically detects the number of processors and selects the appropriate number of threads to use.</p>

<p><span style="color: rgb(0,0,0);"><strong>Note:</strong>&#160;</span>UltraSim, in standalone mode, does not support multithreading when the simulation is run in<code> sim_mode=ms.</code> Therefore, AMS-UltraSim also does not support multithreading when the simulation is run in<code> sim_mode=ms.</code></p>

<p>The<code> -turbo </code>argument is used to turn off the UltraSim-Turbo feature, which is available only in<code> sim_mode=a </code>and is turned on by default in this mode.</p>

<p>The<code> +rtsf </code>argument enables <a href="Glossary.html#Glossary-1036133">RTSF</a>, which is a <a href="Glossary.html#Glossary-1034400">PSF</a> extension that can plot extremely large datasets (where signals have a large number of data points, for example 10 million) within seconds.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><br /></p>
</td>
<td class="confluenceTd" valign="top">
<p>You can use the<code> -ahdllint </code>command-line option to turn on the AHDL linter feature that enables you to detect modeling issues in analog/mixed-signal Hardware Description Languages (AHDL). The AHDL linter feature comprises of static and dynamic lint checks. Static lint checks are performed before analysis. Dynamic lint checks are performed during analysis for dynamic modeling issues.</p>

<p><span style="color: rgb(0,0,0);"><strong>Note:</strong>&#160;</span>Dynamic lint checks can also be performed on VHDL-AMS modules.</p>

<p>Possible values for<code> -ahdllint </code>are:</p>

<p><code>no </code>- Disables lint checks. There is no change in the existing compilation or simulation warning messages.</p>

<p><code>warn </code>(default)- Turns on the static lint and dynamic lint checks. Except the models with attribute (<code>-ahdllint = no</code>), the static linter checks all models, continues the simulation, and then performs dynamic lint checks.</p>

<p><code>error </code>- Turns on the static lint check. Dynamic lint checks are performed only when static lint issues are not detected. Except the models with attribute (<code>-ahdllint = no</code>), the static linter checks all models. The simulator generates an error and exits if there is any static lint warning reported after parsing all the models of the circuit. If there are no static lint warnings, the simulator continues the simulation and performs dynamic lint checks. However, in the case of dynamic lint issues, the simulator does not error out.</p>

<p><code>force </code>- Similar to<code> warn </code>, but this option overrides the model attribute<code> ahdllint = no</code>, and forces to check all models, continue the simulation, and perform dynamic lint checks.</p>

<p>You can use the<code> -ahdllint_maxwarn = </code> <code>n </code>command-line option to control the maximum number of static warnings generated per Verilog-A, Verilog-AMS, or VHDL-AMS model. The default value is 5. The<code> -ahdllint_maxwarn </code>option does not limit the warnings generated from the dynamic lint checks.</p>

<p>Use the<code> -ahdllint_log = file_name </code>command-line option to dump all AHDLinter static and dynamic and summary messages to a file.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><br /></p>
</td>
<td class="confluenceTd" valign="top">
<p><span style="color: rgb(0,0,0);"><strong>Note:</strong>&#160;</span>Though linter checks are supported for both Verilog-A and VerilogAMS languages, there can be some differences in the behavior. For example, when a declared variable is not used in the model, Verilog-A will generate a lint warning but Verilog-AMS will not.</p>

<p><span style="color: rgb(0,0,0);"><strong>Note:</strong>&#160;</span>The lint checks are performed during<code> xmsim </code>stage.</p>

<p><span style="color: rgb(0,0,0);"><strong>Note:</strong>&#160;</span>If you specify more than one argument, you must separate them with a space and enclose them within quotation marks.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-uselicense </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Specifies colon-separated mnemonics to select license. See &quot;<a href="Simulating.html#Simulating-1053825">-uselicense Option</a>&quot; for more information.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top"><div class="content-wrapper">
<p><code>-rnm_coerce default| none|</code> <code> detailed| off scopeType-scope- <span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-rnm_coerce"></span>
              </code></p>
</div>
</td>
<td class="confluenceTd" valign="top">
<p>Enables or disables wreal coercion globally, or disable wreal coercion on certain design scopes. You can turn off wreal coercion:</p>
<ul><li>On a specific instance and instances under it.</li></ul><ul><li>For instances whose master is specific module and instances under the module.</li></ul><ul><li>On specific nets.</li></ul>
<p>Possible values are:</p>
<ul><li><code>none</code>: disable wreal coercion.</li><li><code>detailed</code>: enable wreal coercion with detailed resolution. This is the default.</li><li><code>default</code>: enable global coercion with default resolution.</li><li><code>off scopeType</code> -<code>scope</code> <code>-: </code>disable wreal coercion on the specified scope; coercion on other scopes is ON. Here, <code>scopeType</code> can be a net<code> inst</code>,<code> insterm</code>,<code> cell</code>,<code> cellterm</code>, or <code>lib</code>. For example:</li></ul><p style="margin-left: 30.0px;"><code>&quot;NET- hierarchical_net_name -&quot;</code><br /><code>&quot;INSTTERM- hierarchical_port_name -&quot;</code><br /><code>&quot;INST- hierarchical_instance_name -&quot;</code><br /><code>&quot;CELLTERM-l ib_name.cell_name.port_name -&quot;</code><br /><code>&quot;CELLTERM- cell_name.port_name -&quot;</code><br /><code>&quot;CELL- lib_name.cell_name:view_name -&quot;</code><br /><code>&quot;CELL- lib_name.cell_name -&quot;</code><br /><code>&quot;CELL- cell_name -&quot;</code><br /><code>&quot;LIB- lib_name -&quot;</code></p>
<p style="margin-left: 30.0px;">Example:</p>
<p style="margin-left: 30.0px;"><code>rnm_coerce &quot;off inst-top.dcinst-&quot; </code></p>
<p style="margin-left: 30.0px;">All the net of instance <code>top.dcinst</code> and its children will not be coerced to wreal; top level and other instances will be coerced as normal.</p>
<p style="margin-left: 30.0px;"><span><strong>Note</strong>: The functionality of <code>insterm</code> assignment has been merged into net, for the same scope. Therefore, if you specify both the assignments, the <code>net</code> assignment takes higher precedence. However, if the <code>net</code> assignment is not specified, the <code>insterm</code> assignment is considered.</span></p>
<p style="margin-left: 30.0px;"><strong>Important</strong>: If <span><code>scopeType</code> is not specified, the behavior would be similar to the <code>none</code> option, and wreal coercion is disabled.</span></p>

<p>If multiple <code>-rnm_coerce</code> options are specified for the same design scope, the one specified with the immediate design scope takes precedence.</p>

<p>If you are a digital-centric user running an AMS simulation that requires only the digital solver, it is recommended to specify <code>-rnm_coerce none.</code></p>

<p><span style="color: rgb(0,0,0);"><strong>Note:</strong>&#160;</span>Coercion of a wire is performed for the entire wire (bus). Coercion is not supported at bit-level for a bus.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top"><div class="content-wrapper">
<p><code>+wf_alias <span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-wf_alias"></span>
              </code></p>
</div>
</td>
<td class="confluenceTd" valign="top">
<p>Using this option with the<code> -amsformat sst2 | psfxl_all </code>option enables the waveform aliasing feature, which improves the waveform database size by leveraging the alias semantics for waveform storage.</p>

<p><span style="color: rgb(0,0,0);"><strong>Note:</strong>&#160;</span>The <code>+wf_alia</code>s option would be removed in a future release.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top"><div class="content-wrapper">
<p><code>
-wreal_resolution </code><span><code>resolutionFunction</code> <span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-wreal_resolution"></span></span></p>
</div>
</td>
<td class="confluenceTd" valign="top">
<p>Specifies the <code>wreal</code> <a href="Real_Number_Modeling.html#RealNumberModeling-1049176">resolution function</a> you want the elaborator to use; valid values for<code> resolutionFunction</code> are:</p>
<ul><li><code> default </code>- Default setting</li></ul><ul><li><code> fourstate </code>- Verilog 4-state logic resolution algorithm</li></ul><ul><li><code> sum </code>- Summation of all drivers</li></ul><ul><li><code> avg </code>- Average of all drivers</li></ul><ul><li><code> min </code>- Minimum value of all drivers</li></ul><ul><li><code> max </code>- Maximum value of all drivers</li></ul></td>
</tr>
<tr><td class="confluenceTd" valign="top"><div class="content-wrapper">
<p><code>-wreal2vhdlmap </code> <code> file <span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-wreal2vhdl"></span>
                <span>&#160;</span>
                <span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-wreal2vhdl"></span>
              </code></p>
</div>
</td>
<td class="confluenceTd" valign="top">
<p>Maps VHDL analog X/Z states with the Verilog wrealZ/X states.</p>

<p>You can specify the VHDL/wreal X and Z state mappings in a<code> file.</code> The template format is in the form of wreal2vhdlmap card which defines the mapping for the specified VHDL data type. Multiple wreal2vhdlmap cards can be specified in the file. The format of the wreal2vhdlmap card is shown below:</p>

<p><code>wreal2vhdlmap type=[ &quot;default&quot; | &quot;&lt;vhdl type&gt;&quot; ] \ </code></p>

<p><code>wrealXState = &quot;&lt;vhdl primary xstate&gt; &lt;vhdl secondary xstate&gt;  ......&quot; \ </code></p>

<p><code>wrealZState = &quot;&lt;vhdl primary zstate&gt; &lt;vhdl secondary zstate&gt;,....&quot; </code></p>

<p>When<code> type </code>is set to<code> default </code>, it indicates the default mapping, otherwise,<code> type </code>specifies the VHDL type or subtype that needs to be mapped. If a type-based match is not found, the default mapping is used. You can specify only one<code> wreal2vhdlmap </code>card with<code> type=default.</code></p>

<p><span style="color: rgb(0,0,0);"><strong>Note:</strong>&#160;</span>Currently, a simulation run supports only five wreal2vhdlmap card entries.</p>

<p>The<code> wrealXState </code>and<code> wrealZState </code>arguments support a list of values to be mapped. The first element in the list is considered the primary value map and the remaining elements, if specified, are considered as secondary value maps. The primary value map is significant because it defines the value mapping for both Verilog driving VHDL and VHDL driving Verilog. The secondary maps are only used for mapping VHDL driving Verilog. In this form, a one-to-one mapping is supported for Verilog driving VHDL, whereas a many-to-one mapping is supported for VHDL driving Verilog. The<code> wrealXState </code>parameter defines the X state maps while the<code> wrealZState </code>parameter defines the Z state mapping.</p>

<p>When VHDL is driving a primary or secondary value, the value is mapped to the wrealXState or wrealZState value in the Verilog domain. Note that the primary and secondary values specified in<code> wrealXState </code>and<code> wrealZState </code>parameter must be unique, otherwise, a fatal error is reported.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><br /></p>
</td>
<td class="confluenceTd" valign="top">
<p>The type argument (except<code> type=default </code>) is used when an exact match is desired.<code> wreal2vhdlmap </code>card also supports derived mapping. Derived mapping can be performed by specifying the<code> derived_type </code>argument in the<code> wreal2vhdlmap </code>card, as shown below.</p>

<p><code>wreal2vhdlmap derived_type=&quot;&lt;vhdl type&gt;&quot;\ </code></p>

<p><code>wrealXState = &quot;&lt;vhdl xstate1&gt; &lt;vhdl xstate2&gt;  ......&quot; \ </code></p>

<p><code>wrealZState = &quot;&lt;vhdl zstate1&gt; &lt;vhdl zstate2&gt;,....&quot;</code></p>

<p>In this mode, the search is extended to the type decomposition of the actual. A match occurs when the specified<code> derived_type </code>matches one of the decomposed types of the actual. Note that the mapping algorithms find the best map where the order of precedence is<code> type </code>mappings,<code> derived_type </code>mappings and<code> default </code>mappings. For<code> derived_type </code>mappings the lookup algorithm binds to the<code> derived_type </code>mapping closest with respect to the decomposition to the actual type.</p>

<p><span style="color: rgb(0,0,0);"><strong>Example</strong> </span>:</p>

<p>The following example shows a VHDL package with type declaration to be mapped to wreal. The constant values represent the VHDL values to be mapped to wreal x and z states. This package<code> myPkg </code>is compiled into the library<code> myLib. </code></p>

<p><code>package is myPkg </code></p>

<p><code>type analog_ut is range real&#39;low to real&#39;high; </code></p>

<p><code>type analog_vector_ut is array (natural range &lt;&gt;) of analog_ut; </code></p>

<p><code>constant ANALOG_U : analog_ut := analog_ut&#39;left; </code></p>

<p><code>constant ANALOG_X : analog_ut := analog_ut(real(analog_ut&#39;left) / 2.0); </code></p>

<p><code>constant ANALOG_Z : analog_ut := analog_ut(real(analog_ut&#39;left) / 4.0); </code></p>

<p><code>end myPkg;</code></p>

<p>Following is the file that contains the wreal2vhdlmap template for the VHDL type above:</p>

<p><code>wreal2vhdlmap type=&quot;myLib.myPkg.analog_ut&quot; wrealXState = &quot;myLib.myPkg.ANALOG_X myLib.myPkg.ANALOG_U&quot; \ </code></p>

<p><code>wrealZState = &quot;myLib.myPkg.ANALOG_Z&quot; </code></p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><br /></p>
</td>
<td class="confluenceTd" valign="top">
<p>This template states that for mixed language boundary net connections of <code>myLib.myPkg</code>,<code> analog_ut</code> connecting to Verilog real, the following mapping occurs:</p>
<ul><li>Verilog driving a<code> wrealXState </code>value will be mapped to a<code> myLib.myPkg.ANALOG_X </code>VHDL value (primary value)</li></ul><ul><li><code>Verilog driving a wrealZState value will be mapped to a myLib.myPkg.ANALOG_Z </code>VHDL value.</li></ul><ul><li>VHDL driving<code> myLib.myPkg.ANALOG_X </code>or<code> myLib.myPkg.ANALOG_U </code>value will be mapped to a<code> wrealXState </code>Verilog value.</li></ul>
<p>VHDL driving a<code> myLib.myPkg.ANALOG_Z </code>value will be mapped to a<code> wrealZState </code>Verilog value.</p>
</td>
</tr>
<tr><td class="confluenceTd" colspan="1"><code>-wreal2vhd_probe</code></td>
<td class="confluenceTd" colspan="1">Generates a TCL probe file named, <code>wreal2vhd_probe.tcl</code> file. It probes the Wreal and VHDL ports where <code>xmelab</code> code implements the wreal2vhdl mapping.</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-zparse SKILL_file             </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Enables zparsing.</p>
</td>
</tr>
</tbody></table></div>
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>For information about the<code>&#160;xrun&#160;</code>options, refer to the<span style="color: rgb(0,0,0);">&#160;<em>xrun User Guide</em>.</span></p>
</div>
</div>
<h2 id="UsingxrunforAMSSimulation-UsingxrunwithSpectreandSPICEInputFilesSPICEsupport1060437">Using xrun with Spectre and SPICE Input Files<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-SPICEsupport"></span>&#160;<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1060437"></span></h2>

<p><code> xrun</code>&#39;s Spectre and SPICE input file support is consistent with what Cadence&#39;s SPECTRE technology offers (which applies to the Spectre and UltraSim circuit simulators). This use model enables you to re-configure some of the digital blocks in your existing design with their SPICE equivalents. This allows you to switch seamlessly between digital verification and mixed-signal verification.<code> amsspice </code>is a Cadence AMS Designer internal executable that is used by xrun to process SPICE/analog blocks. When you specify a file with the extension<code> .sp </code>or<code> .scs </code>to the <code>xrun</code> command, it is automatically parsed and interpreted by amsspice.</p>
<ul><li>A<code> .sp </code>extension indicates a SPICE syntax input file.</li></ul><ul><li>A<code> .scs </code>extension indicates a Spectre syntax input file.</li></ul><div>
<p><br /></p>
<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>If you use&#160; <code>
         -spice_ext
        </code>&#160; to change the extension to .cir or .ckt (for example), you must be sure to use the appropriate&#160; <code>
         simulator lang
        </code>&#160; assignments.</p>
</div>
</div>

<p>You need to specify the following information for AMSSPICE setup:</p>
</div>
<ul><li>Original HDL (Verilog, VHDL etc.) design file(s)</li></ul><ul><li>Top-level analog file containing subcircuit definition(s), model file(s) and so on</li></ul><ul><li>AMS configuration information on how SPICE and HDL interact, using an amsd block</li></ul>
<p>Your top-level analog file can contains SPICE subcircuit definitions, analog models,&#160;<a href="Specifying_Controls_for_the_Analog_Solvers.html">analog simulation control statements</a>,&#160;<a href="Specifying_Controls_for_the_Analog_Solvers.html#SpecifyingControlsfortheAnalogSolvers-1064646">UltraSim statements</a>, anything you can put in an&#160;<a href="Using_the_Analog_Simulation_Control_File.html">analog simulation control file</a>, and the&#160;<a href="Using_an_amsd_Block.html">amsd block</a>. You can put all your analog simulation control statements in a single file that you include in this top-level analog file so you do not need to use the&#160;<code><a href="#UsingxrunforAMSSimulation-1064137">-analogcontrol</a>
</code>option. You can specify other Spectre commands in the input file as long as you do not specify them in the amsd block. Other Spectre commands (such as transient analysis command) must not appear in the amsd block.</p>

<p>For example:</p>

<p><code>run all_spice.scs anyOtherInputFiles...</code></p>

<p>where<code> all_spice.scs </code>contains the following:</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">// all_spice.scs

include &quot;source/analog/PLL.sp&quot; // analog subcircuit definitions 
include &quot;analog_top.scs&quot; // analog subcircuit definitions 
include &quot;nmos1.scs&quot; // nmos models 
include &quot;pmos.scs&quot;// pmos model 
include &quot;acf.scs&quot; // analog control file

//amsd block

amsd{

&#160;&#160;&#160;&#160;portmap subckt=pll_top autobus=yes&#160;&#160;&#160;&#160;config cell=pll_top use=spice&#160;&#160;&#160;&#160;ie vsup=1.8

}</pre>
</div>
</div>

<p><br />Following is an example of AMSD control file containing SPICE information (using the include statement) including models information and multiple amsd blocks specified in different files:</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">// file1.scs

&#160;&#160;&#160;&#160;include &quot;s1.cir&quot;&#160;&#160;&#160;&#160;include &quot;s2.cir&quot;

amsd{
&#160;&#160;&#160;&#160;portmap subckt=s1 autobus=yes&#160;&#160;&#160;&#160;config cell=s1 use=spice
}

amsd{
&#160;&#160;&#160;&#160;portmap subckt=s2 busdelim=_&#160;&#160;&#160;&#160;config cell=s2 use=spice &#160;&#160;&#160;&#160;ie vsup=3.5
}

// file2.scs

include &quot;subcx.sp&quot;

amsd{
&#160;&#160;&#160;&#160;portmap subckt=subcx&#160;&#160;&#160;&#160;config cell=subcx use=spice
}</pre>
</div>
</div>

<p><br /></p>

<p>You can use the following methods to introduce SPICE models into Verilog-AMS:</p>
<ul><li>Using the amsd block. For example:<code> <br />include &quot;analog_top.sp&quot;<br /> </code> <code> &#160;&#160;&#160;&#160;amsd{<br /> </code> <code> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;portmap subckt=analog_top file=&quot;analog_top.pb&quot;<br /> </code> <code> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;config cell=analog_top use=spice<br /> </code> <code> &#160;&#160;&#160;&#160;} </code></li></ul><ul><li>Using the&#160;<code><a href="#UsingxrunforAMSSimulation-1064383">-modelpath</a></code>&#160;option. With the introduction of xrun use model, this option is no longer mandatory.</li></ul><ul><li>Using the<code> amsd_subckt_bind=yes </code>parameter in the<code> &#39;include </code>statement in SPICE files. For example:<br /> <code> <br />//analogmodel.scs <br />
    </code> <code> include &quot;analog_top.cir&quot; amsd_subckt_bind=yes <br />
      <br />
    </code> <code> amsd_subckt_bind </code>is a flag to indicate that the SPICE file is xmelab-aware to bind an instance to SPICE. This is equivalent to specifying the<code> -modelpath &lt;</code> <code>modelfiles</code> <code>&gt; </code>option. Without the<code> amsd_subckt_bind </code>option, xmelab could not get the SPICE list, and can generate an error.</li></ul><h2 id="UsingxrunforAMSSimulation-SpecifyingCommand-LineOptionsforSpectrespectre_argsOption1035581">Specifying Command-Line Options for Spectre<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-spectre_argsOption"></span>&#160;<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1035581"></span></h2>

<p>You can use the&#160;<code><a href="#UsingxrunforAMSSimulation-1064449">-spectre_args</a></code>&#160;command-line option to xrun (or to&#160; <code>
    <a href="Simulating.html#Simulating-1061528">xmsim</a></code>) to specify Spectre command-line options such as&#160;<code><a href="#UsingxrunforAMSSimulation-1045500">+parasitics</a></code>. See the following topics for more information:</p>
<ul><li><a href="#UsingxrunforAMSSimulation-1046635"> Turning On Spectre Multithreading for Device Evaluation </a></li></ul><ul><li><a href="#UsingxrunforAMSSimulation-1046766"> Turning Off Spectre Multithreading </a></li></ul><ul><li><a href="#UsingxrunforAMSSimulation-1045500"> Turning On Spectre Parasitic Reduction </a></li></ul><ul><li><a href="#UsingxrunforAMSSimulation-1041905"> Loading Plug-In for Spectre Netlist Compiled Functions (NCFs) </a></li></ul><ul><li><a href="#UsingxrunforAMSSimulation-1047565"> Enabling AMS-APS Mode </a></li></ul><ul><li><a href="#UsingxrunforAMSSimulation-1059665"> Working with PSpice Netlist and Device Models </a></li></ul><h3 id="UsingxrunforAMSSimulation-TurningonSpectreMultithreadingforDeviceEvaluation1046635">Turning on Spectre Multithreading for Device Evaluation<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1046635"></span></h3>

<p>If you are using the AMS Designer simulator with the Spectre solver, you can turn on multithreading for device evaluation. To turn on Spectre mutlithreading for AMS simulation, use the&#160;<code><a href="#UsingxrunforAMSSimulation-1064449">-spectre_args</a>
</code>command-line option to<code> xrun </code>(or to <code>
    <a href="Simulating.html#Simulating-1061528">xmsim</a></code>) to specify the Spectre<code> +mt </code>or<code> +multithread </code>command-line argument as follows:</p>

<p><code> xrun -spectre_args +mt[=N] ... </code></p>

<p><code> xrun -spectre_args +multithread[=N] ... </code></p>

<p>where <code>N</code>&#160;is the number of threads. If <code>N</code>&#160;is larger than the number of cores of the computer,<code> N </code>is reset to the number of cores. If <code>+mt=N </code>is not specified, the default number of threads is equal to the number of cores of the computer.</p>

<p>Alternatively, you can use the<code> multithread=on [nthreads=N] </code>option setting in a control file to turn on multithreading.</p>
<h3 id="UsingxrunforAMSSimulation-TurningoffSpectreMultithreading1046766">Turning off Spectre Multithreading<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1046766"></span></h3>

<p>If you are using the AMS Designer simulator with the Spectre solver, you can explicitly turn off multithreading for AMS simulation by specifying<code> -mt </code>or<code> -multithread </code>with the&#160;<code><a href="#UsingxrunforAMSSimulation-1064449">-spectre_args</a>
  </code> command-line option to<code> xrun </code>(or to <code>
    <a href="Simulating.html#Simulating-1061528">xmsim</a></code>) as follows:</p>

<p><code> xrun -spectre_args -mt ... </code></p>

<p><code> xrun -spectre_args -multithread ... </code></p>

<p>Alternatively, you can use the<code> multithread=off </code>option setting in a control file to turn off multithreading.</p>
<h3 id="UsingxrunforAMSSimulation-TurningonSpectreParasiticReductionparasitics1045500">Turning on Spectre Parasitic Reduction<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-parasitics"></span>&#160;<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1045500"></span></h3>

<p>If you are using the AMS Designer simulator with the Spectre solver, you can turn on parasitic reduction for designs that have RC parasitics. To turn on Spectre parasitic reduction, use the<code>&#160;<a href="#UsingxrunforAMSSimulation-1064449">-spectre_args</a>
</code>command-line option to<code> xrun </code>(or to <code>
    <a href="Simulating.html#Simulating-1061528">xmsim</a>
  </code>) to specify the Spectre<code> +parasitics </code>command-line argument as follows:</p>

<p><span style="color: rgb(0,0,0);font-family: &quot;Courier New&quot;;font-size: small;">xrun -spectre_args +parasitics[=<code> N </code> <code> | rf </code>] ...</span></p>

<p>where the value specified for the<code> +parasitics </code>argument represents the maximum frequency (in GHz) of interest for RC reduction. If the chosen value is less than the maximum operating frequency of interest, you may experience accuracy loss for frequencies higher than the specified value.</p>
<ul><li><code> N </code>represents the user-defined maximum frequency</li></ul><ul><li><code> rf </code>represents the maximum frequency of<code> 30 GHz </code></li></ul><ul><li>If no value is specified for the<code> +parasitics </code>argument, the maximum frequency of<code> 1 GHz </code>is applied by default.</li></ul>
<p>For information about the Spectre<code> +parasitic </code>command-line option, look for &quot;Parasitic Reduction&quot; in the<em> <span style="color: rgb(0,0,0);"> Spectre Circuit Simulator and Accelerated Parallel Simulator User Guide</span> </em>, version MMSIM&#160;7.0 or later.</p>
<h3 id="UsingxrunforAMSSimulation-LoadingPlug-InforSpectreNetlistCompiledFunctions(NCFs)pluginNCF1041905">Loading Plug-In for Spectre Netlist Compiled Functions (NCFs)<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-pluginNCF"></span>&#160;<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1041905"></span></h3>

<p>To load the plug-in for netlist compiled functions (<a href="Glossary.html#Glossary-1034080">NCF</a>s), use the<code> -spectre_args </code>command-line option to pass the<code> -plugin </code>command-line option to Spectre. For example:</p>

<p><code> xrun -spectre_args &quot;-plugin libmyplugin_sh.so&quot; </code></p>

<p>Alternatively, you can use the<code> loadplugin </code>command in your Spectre netlist file. For&#160;example:</p>

<p><code> loadplugin &quot;libmyplugin_sh.so&quot; </code></p>

<p>See &quot;Netlist Compiled Functions (NCFs)&quot; in the<span style="color: rgb(0,0,0);"> Spectre Circuit Simulator and Accelerated Parallel Simulator User Guide </span>for information about NCFs.</p>
<h3 id="UsingxrunforAMSSimulation-EnablingAMS-APSMode1047565">Enabling AMS-APS Mode<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1047565"></span></h3>

<p>To use the APS analog simulator with AMS-Spectre, use the<code> +aps </code>argument with the<code> -spectre_args </code>option of the<code> xrun </code>command.</p>

<p><strong>Example</strong>:</p>

<p><code> xrun -spectre_args &quot;+aps&quot; </code></p>
<h3 id="UsingxrunforAMSSimulation-EnablingAMSSpectreXPSMSModemsmode">Enabling AMS Spectre XPS MS Mode<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-msmode"></span></h3>

<p>Spectre XPS MS delivers a high-performance transistor-level multi-rate simulation solution by combining a highly accurate SPICE engine (Spectre APS) together with a fast digital simulation engine (Spectre XPS). The identification between the analog and digital portions of the circuit is done automatically, with the added flexibility for advanced users to optimize it. The Spectre XPS MS mode is valuable for DUTs including MOS or FinFET device instances in Spectre or SPICE subcircuits.</p>

<p>The AMS Designer simulator supports the Spectre XPS MS simulation mode for AMS applications with mixed-signal transistor level circuits. The AMS Designer simulator first partitions the design between the AMSD event solver and Spectre XPS MS analog solver. Next, the analog block circuit is automatically partitioned into analog and mixed-signal partitions where the digital partition is solved in the XPS solver and the analog partition is solved in APS.</p>

<p>The following figure provides an overview of the AMS Designer simulator with Spectre XPS MS mode:</p>
<p align="left"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" data-base-url="https://rdwiki.cadence.com" data-image-src="attachments/305236042/305236043.png" data-linked-resource-container-id="305236042" data-linked-resource-container-version="3" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="chap_irun.13.1.1.png" data-linked-resource-id="305236043" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/305236042/305236043.png" /></span></p>

<p>You should use Spectre XPS MS when there is a large number of gates described by device transistors. For such cases, Spectre XPS MS mode provides additional high-performance and large simulation capacity as compared to Spectre or Spectre APS.</p>

<p>To enable Spectre XPS MS mode in AMS, use<code> +ms </code>with the<code> -spectre_args </code>option of the<code> xrun </code>command.</p>

<p><span style="color: rgb(0,0,0);"> <strong>Example</strong> </span>:</p>

<p><code> xrun -spectre_args &quot;+ms&quot; input.scs test.v </code></p>

<p>When the Spectre XPS MS mode is enabled, a message is displayed in the<code> xrun </code>log file stating the same. Following is an example of the message that is displayed:</p>

<p><code> Notice from Spectre. </code></p>

<p><code> &#160;&#160;&#160;&#160;Spectre XPS Mixed -signal Mode Enabled (speed=2) </code></p>

<p>You can specify the errpreset settings with the +aps option at the command line to tighten the accuracy, with<code> +aps=liberal </code>being the default setting. You can use<code> +aps=moderate </code>or<code> +aps=conservative </code>setting for more accurate results while compromising on the simulation time.</p>

<p><code> xrun -spectre_args &quot;+ms +aps=moderate&quot; input.scs test.v </code></p>

<p>AMS Spectre XPS MS supports multi-threading computation on multi-core platforms. The multi-threading use model and behavior are identical to Spectre APS.</p>

<p>The AMS Spectre MS mode supports the following features:</p>
<ul><li>Verilog, SystemVerilog, Verilog-A, Verilog-AMS, VHDL, SystemC</li></ul><ul><li>Transient analysis</li></ul><ul><li>TCL voltage and current probing</li></ul><ul><li>Spectre<code> save </code>statement for current and voltage</li></ul><ul><li>SimVision debugger</li></ul><ul><li>Re-invoking the simulation</li></ul><ul><li>AHDL linter</li></ul><ul><li><code> +diagnose </code>option</li></ul><h4 id="UsingxrunforAMSSimulation-AdjustingAMSSpectreXPSMSSpeedandAccuracy">Adjusting AMS Spectre XPS MS Speed and Accuracy</h4>

<p>The Spectre XPS MS mode supports all performance and accuracy settings of Spectre APS for the analog portion. You can use the<code> ++aps </code>option to improve the performance of the APS analog engine in AMS Spectre XPS MS mode, as shown below.</p>

<p><code> xrun -spectre_args &quot;+ms ++aps&quot; input.scs test.v </code></p>

<p>You can also specify the errpreset options with<code> ++aps </code>to control the speed and accuracy of the analog engine with<code> liberal </code>being the default setting which results in faster simulation time but lower analog partition accuracy. Use<code> ++aps=moderate </code>for moderate analog partition accuracy. However, if accuracy is your primary concern, specify<code> ++aps=conservative </code>at the command line, as shown below.</p>

<p><code> xrun -spectre_args &quot;+ms ++aps=conservative&quot; input.scs test.v </code></p>

<p>The simulation speed and accuracy of digital portions in the AMS Spectre XPS MS mode can be controlled by the option +<code> speed=1/2/3.</code> The default value is 2, which is sufficient for most applications. Use<code> +speed=1 </code>for more accurate timing and power simulation of digital portions. Use +<code> speed=3 </code>for faster digital verification. For example:</p>

<p><code> xrun -spectre_args &quot;+ms ++aps +speed=3&quot; input.scs test.v </code></p>

<p>You can use the<code> +cktpreset=[sampled|pll] </code>option to improve the speed of ADC and PLL applications.</p>

<p>The xrun log file contains important information on the circuit partitions, simulation time spent on the analog and digital partitions, and suggestions to improve accuracy.</p>

<p><code> ********Pre-Simulation Summary******** </code></p>

<p><code> (MS) Table model. VDD=2.5V used for XPS table model creation, to overwrite tmopt options vdd=val </code></p>

<p><code> (MS) Circuit Partitions: 100% transistors and 99.4% nodes are identified as digital partitions. To force a subcircuit or subcircuit instance to digital, add in the netlistoptD options cktprest=digital subckt=[subckt_def_name]optD options cktpreset=digital inst=[subckt_inst_name] </code></p>

<p><code> *********Post-Transient Simulation Summary********* </code></p>

<p><code> 4.74% simulation time spent in analg partition. Consider force more circuit blocks to digital, or use more aggressive APS options.95.26% simulation time spent in digital partition Consider use more aggressive XPS options, add +speed=3 on command line </code></p>

<p><code> ********* </code></p>

<p><code> ********Post- </code></p>
<h4 id="UsingxrunforAMSSimulation-DigitalPartitioningandVirtualPowerNodes">Digital Partitioning and Virtual Power Nodes</h4>

<p>The Spectre XPS MS mode automatically detects the digital functions in a given circuit. For cases where a design has explicit hierarchical digital or analog functions, you can manually identify the functional blocks (subcircuit or instance) by using the following Spectre options:</p>

<p><code> optD options cktpreset=digital subckt=[dig_ctrl pll] </code></p>

<p><code> optA options cktpreset=analog subckt=[opamp adc] </code></p>

<p>or</p>

<p><code> optD options cktpreset=digital inst=[x1.xdig_ctrl x1.xpll] </code></p>

<p><code> optA options cktpreset=analog inst=[x2.xopamp x2.xadc] </code></p>

<p>You can define the virtual power supply nodes manually by using the<code> ms_vpn </code>option that defines the pairs of node names (wildcard is supported) and voltage values. The virtual ground nodes can be defined using the<code> ms_vgnd </code>option. The ground voltage is assumed to be 0V.</p>

<p><code> opt1 options ms_vpn = [I1.VDD_DIG 1.8 I1.VDD_DIG1 3.3] </code></p>

<p><code> opt3 options ms_vgnd = [I1.VSS] </code></p>

<p>The xrun log file provides information on the nodes that are identified as power/ground supplies and other nodes that are potential power/ground supplies. A sample log file report is shown below.</p>
<div class="table-wrap"><table border="1" cellpadding="5" cellspacing="0" class="wrapped confluenceTable" style="width: 624.0px;"><colgroup><col /><col /><col /><col /><col /><col /></colgroup><tbody><tr><td class="confluenceTd" colspan="6" valign="top" width="624">
<p><code> Digital Detection Vsource and Virtual Power Supply Node Summary </code></p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top" width="104">
<p><code> &#160; </code></p>
</td>
<td class="confluenceTd" valign="top" width="104">
<p><code> Type </code></p>
</td>
<td class="confluenceTd" valign="top" width="104">
<p><code> #CC </code></p>
</td>
<td class="confluenceTd" valign="top" width="104">
<p><code> #Bulk </code></p>
</td>
<td class="confluenceTd" valign="top" width="104">
<p><code> Voltage </code></p>
</td>
<td class="confluenceTd" valign="top" width="104">
<p><code> Name </code></p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code> &#160; </code></p>
</td>
<td class="confluenceTd" valign="top">
<p><code> GND </code></p>
</td>
<td class="confluenceTd" valign="top">
<p><code> 4274 </code></p>
</td>
<td class="confluenceTd" valign="top">
<p><code> 6866 </code></p>
</td>
<td class="confluenceTd" valign="top">
<p><code> 0 </code></p>
</td>
<td class="confluenceTd" valign="top">
<p><code> 0 </code></p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code> &#160; </code></p>
</td>
<td class="confluenceTd" valign="top">
<p><code> VSOURCE </code></p>
</td>
<td class="confluenceTd" valign="top">
<p><code> 6386 </code></p>
</td>
<td class="confluenceTd" valign="top">
<p><code> 6866 </code></p>
</td>
<td class="confluenceTd" valign="top">
<p><code> 2.5 </code></p>
</td>
<td class="confluenceTd" valign="top">
<p><code> vdd </code></p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code> &#160; </code></p>
</td>
<td class="confluenceTd" valign="top">
<p><code> &#160; </code></p>
</td>
<td class="confluenceTd" valign="top">
<p><code> &#160; </code></p>
</td>
<td class="confluenceTd" valign="top">
<p><code> &#160; </code></p>
</td>
<td class="confluenceTd" valign="top">
<p><code> &#160; </code></p>
</td>
<td class="confluenceTd" valign="top">
<p><code> &#160; </code></p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code> &#160; </code></p>
</td>
<td class="confluenceTd" colspan="5" rowspan="3" valign="top">
<p><code> To force a virtual power or ground node, add in netlist </code></p>

<p><code> &#160;&#160;&#160;&#160;&#160;&#160;optVPN options ms_vpn=[node_name vpn_voltage] </code></p>

<p><code> &#160;&#160;&#160;&#160;&#160;&#160;optVGND options ms_vgnd=[node_name] </code></p>

<p><code> use keyword auto_vpn if you do not know the vpn_voltage </code></p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code> &#160; </code></p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code> &#160; </code></p>
</td>
</tr>
</tbody></table></div>

<p>In the above report<code> #CC </code>refers to the number of MOS channel connected devices,<code> #BULK </code>refers to the bulk connections,<code> Voltage </code>refers to the node voltage, and<code> Name </code>refers to the node name. In the above example, 6386 MOS drain or sources are connected to a vsource on the node named vdd. The node voltage is 2.5 volts.</p>
<h4 id="UsingxrunforAMSSimulation-AMSSpectreXPSMSDCOperatingPointCalculation">AMS Spectre XPS MS DC Operating Point Calculation</h4>

<p>The Spectre XPS MS mode calculates the DC operating point before performing the transient simulation. By default, the DC operating point for the entire circuit is calculated by Spectre APS. For cases where the Spectre APS operating point calculation takes too long, you can enable the mixed-signal DC calculation - Spectre APS for the analog partition and Spectre XPS for the digital partition, by using the<code> +msdc=ms </code>command-line option, as shown below.</p>

<p><code> xrun spectre &quot;+ms +msdc=ms&quot; input.scs test.v //MS DC </code></p>
<h4 id="UsingxrunforAMSSimulation-Multi-RateIEPartitioninginAMSSpectreXPSMS">Multi-Rate IE Partitioning in AMS Spectre XPS MS</h4>

<p>All the IEs in AMS are simulated at the same rate (time step size) in the APS block. This process may have a major impact on the simulation speed if a design has high-frequency digital clocks between Verilog or SystemVerilog digital context and SPICE blocks.</p>

<p>The Spectre AMS designer simulator with XPS MS mode has been enhanced such that if an IE is connected to an XPS block (also called MS partition), it is computed with the same time step as the MS partition. When there are multiple IEs connected to different MS partitions (or XPS blocks), they are simulated at a different rate. As a result, the time step of an APS block is not limited by such IEs and the simulation can run much faster.</p>

<p>AMS IEs that connect only to the XPS block are tagged as XPS-IEs and are partitioned in XPS block also. AMS<code> inh_conn </code>IEs that have Ain/Aout port connected to an XPS block and power supply port (<code>in </code>port) connected to APS block are also partitioned in XPS. All other AMS IEs are tagged as APS-IE. Verilog-AMS or VHDL-AMS models with no IE remain in APS block.</p>
<h4 id="UsingxrunforAMSSimulation-SimulationDiagnostics"><strong>Simulation Diagnostics</strong></h4>

<p>At times, you need additional debugging information to investigate the performance or convergence-related simulation issues. By default, the simulation log file now contains a presimulation summary and a post-transient simulation summary with suggestions on how to speed up the simulation further. In addition, you can use the Spectre command-line option, <code>+diagnose</code>, to dump additional debugging information into the simulation log file. The following is an example of using the <code>+diagnose</code> option:</p>

<p><code>xrun &#8230; -spectre_args &quot;+aps +diagnose&quot;</code></p>

<p><span>Here, ... denotes other <code>xrun</code> options.</span></p>

<p>The <code>+diagnose</code> option automatically enables the AHDL linter feature, and outputs the following additional information to the log file:</p>
<ul><li>Convergence-related information for time steps less than <code>1ps</code>. This can be controlled by using the <code>warnminstep</code> option.</li><li>A summary containing statistics about time steps, nodes with convergence issues, and node or device activity information.</li></ul><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">The <code>+diagnose</code> option has minimal impact on the simulation time, however, it generates a lot of information and may not be appropriate for general use.</div>
</div>

<p>When using <code>spectre_args &quot;+diagnose&quot;</code> you can also specify the <code>+transteps</code> option.&#160;</p>

<p><code>spectre_args &quot;+diagnose +transteps&quot;</code></p>

<p>It prints all the transient steps in diagnostic mode.&#160;</p>
<h3 id="UsingxrunforAMSSimulation-WorkingwithPSpiceNetlistandDeviceModelsmts_spice1059665">Working with PSpice Netlist and Device Models<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-mts_spice"></span>&#160;<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1059665"></span></h3>

<p>AMS Designer, with Spectre solver family (Spectre, Spectre APS, and Spectre XPS Mixed-Signal (MS) mode), supports the PSpice<span style="color: rgb(0,0,0);"> <sup>&#174;</sup> </span>netlist format targeted to include PCB components modeled in the PSpice format into a Spectre integrated circuit simulation. This solution does not support PSpice-only designs. The top-level netlist and control statement need to be defined in Spectre or SPICE format. The recommended approach is to define a subcircuit in PSpice netlist format and instantiate the subcircuit in the Spectre netlist.</p>

<p>For the AMS Designer simulator to support PSpice netlists, use the<code> +mts </code>argument with the<code> -spectre_args </code>option of the <code>xrun</code>/<code>xmsim</code> command:</p>

<p><code> xrun -spectre_args +mts </code></p>

<p>or</p>

<p><code> xmsim -spectre_args +mts</code></p>
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>It is mandatory to specify the<code>&#160;+mts&#160;</code>argument in AMS to support PSpice netlists.</p>
</div>
</div>

<p>After you set<code> -spectre_args +mts </code>, you can include a PSpice netlist in your test bench database, through a Spectre netlist by using the following statement.</p>

<p><code> pspice_include &lt;</code> <code>file</code> <code>&gt; </code>(Spectre format)</p>

<p><code> .pspice_include &lt;</code> <code>file</code> <code>&gt; </code>(SPICE format)</p>

<p>All content of the included<code> file </code>should be in PSpice format. If the file includes additional files, they also should be in PSpice format. Elements and device models used in the PSpice netlist are simulated using PSpice default values and equations.</p>

<p>The Spectre PSpice feature does not support digital PSpice elements and PSpice encryption. Spectre encryption is recommended, if encryption is required</p>
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>AMS Designer with the UltraSim solver does not support the PSPICE netlist in the AMSD test bench.</p>
</div>
</div>
<h2 id="UsingxrunforAMSSimulation-MigratingfromThree-Steptoxrunmigrate1049795">Migrating from Three-Step to xrun<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-migrate"></span>&#160;<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1049795"></span></h2>

<p>You can run the AMS Designer simulator using <code>xrun</code> or the&#160;<a href="Getting_Started_with_the_AMS_Designer_Simulator.html">three-step method</a>. The following information can help you to migrate from the three-step method to using<code> xrun.</code></p>
<div class="table-wrap"><table border="1" cellpadding="5" cellspacing="0" class="wrapped confluenceTable" style="width: 648.0px;"><colgroup><col /><col /></colgroup><tbody><tr><th class="confluenceTh" valign="middle" width="182">
<p>File/Information for Three-Step</p>
</th><th class="confluenceTh" valign="middle" width="466">
<p>...for xrun</p>
</th></tr>
<tr><td class="confluenceTd" valign="top">
<p><code> cds.lib </code>(required)</p>
</td>
<td class="confluenceTd" valign="top">
<p>Unnecessary (remove or convert to<code> xrun </code>options)</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code> worklib </code>(required)</p>
</td>
<td class="confluenceTd" valign="top">
<p>Unnecessary (remove or convert to<code> xrun </code>options)</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code> hdl.var </code>(optional)</p>
</td>
<td class="confluenceTd" valign="top">
<p>Unnecessary (remove or convert to<code> xrun </code>options)</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p>connect modules and connect rules</p>
</td>
<td class="confluenceTd" valign="top">
<p>Use the <code><a href="Using_an_amsd_Block.html#UsinganamsdBlock-1051785">ie</a> </code>statement in an<code> amsd </code>block</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p>model path</p>
</td>
<td class="confluenceTd" valign="top">
<p>Include device model files, optionally with a model section specifier, in a control file along with your<code> amsd </code>block For example:</p>

<p><code>* AMS control file -- amsdControl.scs <br />include &quot;./source/design.scs&quot;&#160;&#160;&#160;//analog netlist <br />include &quot;./models/model.scs&quot;&#160;&#160;&#160;&#160;//device model files <br />include &quot;./models/diode.scs&quot; section=dio <br />// diode.scs is the model file; &quot;dio&quot; is the section to use <br />include &quot;./models/pmos1.scs&quot; section=nom <br />// pmos1.scs is the model file; &quot;nom&quot; is the section to use <br />include &quot;./analogControl.scs&quot;&#160;&#160;&#160;//analog control file <br />
            <br />//amsd blockamsd{<br />&#160;&#160;&#160;&#160;&#160;&#160;portmap subckt=pll_top autobus=yes<br />&#160;&#160;&#160;&#160;&#160;&#160;config cell=pll_top use=spice<br />&#160;&#160;&#160;&#160;&#160;&#160;ie vsup=2.0<br />&#160;&#160;&#160;&#160;&#160;&#160;} </code></p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-propspath prop.cfg </code></p>
</td>
<td class="confluenceTd" valign="top">
<p>Specifying a <code>prop.cfg</code> is no longer supported; therefore, you must convert to <a href="Using_an_amsd_Block.html">using an amsd block</a>. <span>See &quot;</span><a href="Appendix_F__Migrating_to_an_amsd_Block_from_prop.cfg.html">Migrating to an amsd Block from prop.cfg</a><span>&quot;.</span></p>

<p>Alternatively, you can instruct the internal translator to convert your <code>prop.cfg</code> file to an amsd block file, <code>prop.cfg.scs</code>, by setting the AMSCB environment variable. See information about the<a href="Using_an_amsd_Block.html#UsinganamsdBlock-1052440"> AMSCB environment variable</a> in &quot;<a href="Using_an_amsd_Block.html#UsinganamsdBlock-1038666">Using an amsd Block</a>&quot;.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p>Tcl probes</p>
</td>
<td class="confluenceTd" valign="top">
<p>No change</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p>analog control file</p>
</td>
<td class="confluenceTd" valign="top">
<p>Specify the analog control file directly on the <code><a href="#UsingxrunforAMSSimulation-1038257">xrun</a></code> command line; you do not need to use the <code><a href="#UsingxrunforAMSSimulation-1064137">-analogcontrol</a> </code>option; include one or more <span style="color: rgb(0,0,255);"> <a href="Using_an_amsd_Block.html">amsd blocks</a> </span>in this file.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p>discipline</p>
</td>
<td class="confluenceTd" valign="top">
<p>Optional; if you do not specify a discipline (using the <code><a href="#UsingxrunforAMSSimulation-1064237">-discipline</a></code> command-line option to <code><a href="#UsingxrunforAMSSimulation-1044107">xrun</a></code>), the default discipline is logic ; see also the mode specifier on the <code><a href="Using_an_amsd_Block.html#UsinganamsdBlock-1051785">ie</a></code> statement.</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p>timescale</p>
</td>
<td class="confluenceTd" valign="top">
<p>No change</p>
</td>
</tr>
<tr><td class="confluenceTd" valign="top">
<p><code>-ams </code>option (required)</p>
</td>
<td class="confluenceTd" valign="top">
<p>Unnecessary (remove);<code> xrun </code>recognizes AMS input files <a href="#UsingxrunforAMSSimulation-1041592">by their extensions</a>.</p>
</td>
</tr>
</tbody></table></div>

<p>Here is an example of a three-step example that you can simplify using<code> xrun</code>:</p>
<div class="table-wrap"><table border="0" cellpadding="4" cellspacing="0" class="wrapped confluenceTable" style="width: 648.0px;"><colgroup><col /><col /></colgroup><tbody><tr><th class="confluenceTh" valign="top" width="324">
<p>Three-step example:</p>
</th><th class="confluenceTh" valign="top" width="324">
<p><code> xrun </code>equivalent:</p>
</th></tr>
<tr><td class="confluenceTd" valign="top">
<p><code> xmvlog -ams \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-cdslib cds.lib \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;./source/digital/*.v<br />
            <br />xmelab worklib.testbench \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;connectLib.ConnRules_18V_full \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-cdslib cds.lib \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-hdlvar hdl.var \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-snapshot top:snapshot \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-amsf \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-timescale 1ns/100ps \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-discipline logic \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;amsd.scs \<br />
            <br />xmsim top:snapshot \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-cdslib cds.lib \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-analogcontrol top.scs \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-input probe.tcl \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-simcompat hspice </code></p>
</td>
<td class="confluenceTd" valign="top">
<p><code> xrun  ./source/digital/*.v \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;./amscf.scs \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-amsf \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-timescale 1ns/100ps \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-input probe.tcl </code></p>
</td>
</tr>
</tbody></table></div>
<h2 id="UsingxrunforAMSSimulation-ExamplesUsingxrunforAMSSimulation1039756">Examples Using xrun for AMS Simulation<span class="confluence-anchor-link" id="UsingxrunforAMSSimulation-1039756"></span></h2>

<p>You can specify different file types on the<code> xrun </code>command line.<code> xrun </code>uses the file extension to determine the file type, such as Verilog (<code>.v</code>) , Verilog-AMS (<code>.vams</code>), and analog (<code>.scs</code>). For example, the following<code> xrun </code>command will run the AMS Designer simulation using the Spectre solver:</p>

<p><code> xrun top.v test1.vams test.scs </code></p>

<p>This single<code> xrun </code>command is equivalent to the following three commands:</p>

<p><code> xmvlog -ams top.v test1.vams xmelab -snap mysnapshot top xmsim -ana test.scs mysnapshot </code></p>

<p>See also &quot;<a href="#UsingxrunforAMSSimulation-migrate">Migrating from Three-Step to xrun</a>.&quot;</p>

<p>To specify an AMS Designer simulation using the UltraSim solver, an analog control file called<code> test.scs</code>, and an<code> amsdcb.scs </code>control file, type the following<code> xrun </code>command:</p>

<p><code> xrun -amsfastspice test.scs amsdcb.scs test.vams </code></p>

<p>This single <code>xrun</code>&#160;command is equivalent to the following three commands (from the three-step approach for compilation, elaboration, and simulation):</p>

<p><code> xmvlog -ams test.vams<br /> xmelab -amsfastspice -snapshot work.top:module amsd.scs&#160;top <br />xmsim -analogcontrol test.scs work.top:module</code></p>
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>You can shorten these commands as follows:</p>

<p><code>xmvlog -ams test.vams <br />xmelab -amsf -snap work.top:module amsd.scs top <br />xmsim -ana test.scs work.top:module</code></p>
</div>
</div>

<p>To specify an AMS Designer simulation using the APS solver, type the following<code> xrun </code>command:</p>

<p><code> xrun -solver aps top.v test1.vams test.scs </code></p>

<p>This single<code> xrun </code>command is equivalent to the following three commands:</p>

<p><code> xmvlog -ams top.v test1.vams xmelab -snap mysnapshot top xmsim -solver aps -ana test.scs mysnapshot </code></p>

<p>See also&#160;<a href="#UsingxrunforAMSSimulation-1049795">&quot;Migrating from Three-Step to xrun</a>.&quot;</p>

                    </div>
<br /><br /></div>
<footer xmlns:html="http://www.w3.org/1999/xhtml"><nav class="navigation"><b><em><a href="Real_Number_Modeling.html" id="prev" title="Real_Number_Modeling">Real_Number_Modeling</a></em></b><b><em><a href="Using_the_AMS_Designer_Simulator_for_Design_Verification.html" id="nex" title="Using_the_AMS_Designer_Simulator_for_Design_Verification">Using_the_AMS_Designer_Simulat ...</a></em></b></nav><div>
          For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2019, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved.
        </div>
</footer><br xmlns:html="http://www.w3.org/1999/xhtml" /></body></html>