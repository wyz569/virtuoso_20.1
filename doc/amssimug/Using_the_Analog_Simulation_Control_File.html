
<html><head><title>Using the Analog Simulation Control File</title>
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="jaini" />
<meta name="CreateDate" content="2019-11-04" />
<meta name="CreateTime" content="1572864901" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the Virtuoso AMS Designer simulator, a mixed-signal simulator that supports the Verilog-AMS and VHDL-AMS language standards." />
<meta name="DocTitle" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Using the Analog Simulation Control File" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="FileType" content="Chapter" />
<meta name="Keyword" content="amssimug" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2019-11-04" />
<meta name="ModifiedTime" content="1572864901" />
<meta name="NextFile" content="Specifying_Controls_for_the_Analog_Solvers.html" />
<meta name="Group" content="Analog Mixed-Signal Simulation" />
<meta name="Platform" content="Functional Verification" />
<meta name="PrevFile" content="Getting_Started_with_the_AMS_Designer_Simulator.html" />
<meta name="Product" content="Xcelium" />
<meta name="ProductFamily" content="Functional Verification" />
<meta name="ProductVersion" content="19.09" />
<meta name="RightsManagement" content="Copyright 2012-2019 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide -- Using the Analog Simulation Control File" />
<meta name="Version" content="19.09" />
<meta name="Renderer" content="WIKI" />
<meta name="SpaceKey" content="amssimug2003" />
<meta name="confluence-version" content="6.13.3" />
<meta name="ecms-plugin-version" content="03.30.005" />

        
        <link href="styles/site.css" rel="stylesheet" type="text/css" />
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    

    </head><body style="background-color: #FFFFFF;"><!-- Begin Buttons --><header xmlns:html="http://www.w3.org/1999/xhtml"><div class="docHeadr">Product Documentation<img src="images/Cadence-Logo.jpg" /></div>
<nav class="blueHead"><ul><li><a class="content" href="amssimugTOC.html">Contents</a></li><li><a class="prev" href="Getting_Started_with_the_AMS_Designer_Simulator.html" title="Getting_Started_with_the_AMS_Designer_Simulator">Getting_Started_with_the_AMS_D ...</a></li><li style="float: right;"><a class="viewPrint" href="amssimug.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="Specifying_Controls_for_the_Analog_Solvers.html" title="Specifying_Controls_for_the_Analog_Solvers">Specifying_Controls_for_the_An ...</a></li></ul></nav></header><!-- End Buttons --><div xmlns:html="http://www.w3.org/1999/xhtml" style="font-size:14px;line-height:1.42857142857;margin:20px 0 0 0;font-weight:bold;"><center>Spectre AMS Designer and Xcelium Simulator Mixed-Signal User Guide<br />Product Version 19.09, September 2019</center></div>
<div xmlns:html="http://www.w3.org/1999/xhtml" style="margin-left:5%;">
<p></p>

<p></p>
<div id="main-header">
                    
                    
                                                <div style="width: 100%; font-size: 32px; text-align: left;               font-weight: bold;">4</div>
<h1 style="margin: 4px 0 4px;"><span>Using the Analog Simulation Control File</span></h1>

                    
                </div>
<div class="wiki-content group" id="main-content">
                    
<p><span class="confluence-anchor-link" id="UsingtheAnalogSimulationControlFile-1038666"></span></p>

<p>The analog simulation control file is an ASCII text file containing commands that control the behavior of the analog solvers. It must not contain any subcircuit or model definitions or other Spectre/SPICE commands. The analog simulation control file must have <code>.scs</code>&#160;as the file extension in order to establish the Spectre language as the default language for the file. Commands in the analog simulation control file apply to <code>xmsim</code>&#160;(or to the simulation phase of <code>xrun</code>). See&#160;<a href="Specifying_Controls_for_the_Analog_Solvers.html#SpecifyingControlsfortheAnalogSolvers-1033389">&quot;Specifying Controls for the Analog Solvers&quot;</a>&#160;for information about the statements you can use in the analog simulation control file.</p>

<p>See also the following topics:</p>

<p></p>
<div class="toc-macro rbtoc1572864884838">
<ul class="toc-indentation">
<li><a href="#UsingtheAnalogSimulationControlFile-spectreLangspectreLang1052197UsingSpectreLanguageStatementsintheAnalogSimulationControlFile">Using Spectre Language Statements in the Analog Simulation Control File</a></li>
<li><a href="#UsingtheAnalogSimulationControlFile-UsingUltraSimStatementsintheAnalogSimulationControlFileultrasimStatementsultrasimStatements1052227">Using UltraSim Statements in the Analog Simulation Control File</a></li>
<li><a href="#UsingtheAnalogSimulationControlFile-SwitchingLanguagesintheAnalogSimulationControlFilesimulatorLangsimulatorLang1052243">Switching Languages in the Analog Simulation Control File</a></li>
<li><a href="#UsingtheAnalogSimulationControlFile-PassingtheAnalogSimulationControlFiletoxmsimorxrunanalogcontrolanalogcontrol1050439">Passing the Analog Simulation Control File to xmsim or xrun</a></li>
</ul>
</div>
<h2 id="UsingtheAnalogSimulationControlFile-spectreLangspectreLang1052197UsingSpectreLanguageStatementsintheAnalogSimulationControlFile"><span class="confluence-anchor-link" id="UsingtheAnalogSimulationControlFile-spectreLang"></span><span class="confluence-anchor-link" id="UsingtheAnalogSimulationControlFile-spectreLang"></span><span class="confluence-anchor-link" id="UsingtheAnalogSimulationControlFile-1052197"></span>Using Spectre Language Statements in the Analog Simulation Control File</h2>

<p>The Spectre language is the default language for the file. You must always make the first line of the file as a comment, with slashes at the beginning. In the remainder of the file, you can use both Spectre and UltraSim control statements. Because the simulator uses Spectre lookup rules for both kinds of control statements, it is sensitive to the case of sub-circuit, instance, port, node, and vector names.</p>
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>Stand-alone Spectre always assumes the first line of the top-level netlist to be a comment line, whereas AMS does not do so. Therefore, you must explicitly mark the first line of the SPICE file as a comment. Otherwise, it will result in an error.</p>
</div>
</div>

<p>For example, consider the following analog simulation control file contents. Notice that the first line is a comment, with slashes at the beginning. You might use the first line to label your control file. The Spectre-language statements that follow specify the data format and the stop time to use.</p>

<p><code> //Control File 3c<br />saveNodes options rawfmt=sst2<br />timeDom tran stop=5n </code></p>

<p>See&#160;<a href="Specifying_Controls_for_the_Analog_Solvers.html#SpecifyingControlsfortheAnalogSolvers-1033389">&quot;Specifying Controls for the Analog Solvers&quot;</a>&#160;for more information.</p>
<h2 id="UsingtheAnalogSimulationControlFile-UsingUltraSimStatementsintheAnalogSimulationControlFileultrasimStatementsultrasimStatements1052227">Using UltraSim Statements in the Analog Simulation Control File<span class="confluence-anchor-link" id="UsingtheAnalogSimulationControlFile-ultrasimStatements"></span><span class="confluence-anchor-link" id="UsingtheAnalogSimulationControlFile-ultrasimStatements"></span><span class="confluence-anchor-link" id="UsingtheAnalogSimulationControlFile-1052227"></span></h2>

<p>You cannot have active UltraSim statements in an analog simulation control file that is meant for the Spectre solver. One way to handle this restriction is to comment out lines that do not apply to the solver you are using.</p>

<p>Alternatively, if you write your UltraSim control statements using the following format, you can use the same analog simulation control file for both the UltraSim and Spectre solvers: The UltraSim solver recognizes and acts upon statements of this form while the Spectre solver ignores them without warning.</p>

<p><code>*ultrasim: UltraSim_statement </code></p>

<p>For example, consider the two additional statements at the end of the following analog simulation control file. Both the Spectre and the UltraSim solvers recognize the <code>save</code>&#160;statement. The last statement is an UltraSim statement placed in a comment so that you can use this file with the Spectre solver, too.</p>

<p><code> //Control File 5c -- The first line is always a comment the slashes are optionalsaveNodes options rawfmt=sst2</code></p>

<p><code>timeDom tran stop=5n<br />save top.a.b.c<br />*ultrasim: .probe tran v(*) depth=2 </code></p>

<p>If you write the last line without the <code>*ultrasim:</code>&#160;prefix,</p>

<p><code> .probe tran v(*) depth=2 </code></p>

<p>you cannot use the file with the Spectre solver.</p>

<p>See also</p>
<ul><li><a href="Specifying_Controls_for_the_Analog_Solvers.html#SpecifyingControlsfortheAnalogSolvers-1064646"> UltraSim Solver Control Statements</a>&#160;for information about control statements you can use with the UltraSim solver</li></ul><ul><li><a href="#UsingtheAnalogSimulationControlFile-1052243"> Switching Languages in the Analog Simulation Control File</a>&#160;for some restrictions that apply to using control statements with the UltraSim solver</li></ul><h2 id="UsingtheAnalogSimulationControlFile-SwitchingLanguagesintheAnalogSimulationControlFilesimulatorLangsimulatorLang1052243">Switching Languages in the Analog Simulation Control File<span class="confluence-anchor-link" id="UsingtheAnalogSimulationControlFile-simulatorLang"></span><span class="confluence-anchor-link" id="UsingtheAnalogSimulationControlFile-simulatorLang"></span><span class="confluence-anchor-link" id="UsingtheAnalogSimulationControlFile-1052243"></span></h2>

<p>Although Cadence recommends that you put all your analog control file statements in the Spectre language section of the analog simulation control file, you can switch to the SPICE language by typing the following statement at that point in the file:</p>

<p><code> simulator lang=spice </code></p>

<p>You cannot use Spectre language statements in a SPICE language section of the control file, but you can use the uncommented form of UltraSim statements. When you set the simulator language to SPICE, the simulator uses UltraSim look-up rules: The simulator is insensitive to the case of node and hierarchical names, keywords, parameters, units, and the contents of<code> .vec </code>and<code> .vcd</code>/<code>.evcd</code>&#160;files, especially the node names.</p>

<p>You can force the software to use Spectre lookup rules so that the simulator is sensitive to the case of node and hierarchical names but insensitive to the case of keywords, parameters, and units by specifying the<code> lookup </code>option on the&#160;<code>simulator lang</code>&#160;line as follows:</p>

<p><code> simulator lang=spice lookup=spectre </code></p>

<p>You must specify <code>lookup=spectre</code>&#160;when you use&#160;<code>.meas</code>,&#160;<code>.probe</code>, and <code>.print</code>&#160;SPICE commands and you must use the full hierarchical node name in these commands. For example, if you have a top-level module, <code>myTop</code>, in which there is a node, <code>myNode</code>, you specify your <code>.meas</code>&#160;statement in the analog simulation control file as follows:</p>

<p><code> simulator lang=spice lookup=spectre<br /> .meas myMeasure max v(myTop.myNode) </code></p>

<p>At any point where you want to change back to the Spectre language, type the following statement in the file:</p>

<p><code> simulator lang=spectre </code></p>

<p><span class="confluence-anchor-link" id="UsingtheAnalogSimulationControlFile-restrictionsUltraSim"></span>In the analog simulation control file, you can use the Spectre language statements described in the &quot;Control Statements&quot; chapter of the<span style="color: rgb(0,0,0);"><em> Spectre Circuit Simulator and Accelerated Parallel Simulator User Guide</em>.</span> You can also use the UltraSim&#160;<a href="Specifying_Controls_for_the_Analog_Solvers.html#SpecifyingControlsfortheAnalogSolvers-1064646">simulation and control statements</a>&#160;described in the<span style="color: rgb(0,0,255);"> <a class="message-url" href="../UltraSim_User/UltraSim_Chap2.html#simconstate">Virtuoso UltraSim Simulator User Guide</a>.</span> The following exceptions apply:</p>
<ul><li>The UltraSim solver does not support <code>options save.</code> Instead, use&#160;<code>.probe.</code></li></ul><ul><li>You can use the&#160;<code>save</code>&#160;statement with both the Spectre and UltraSim solvers.</li></ul><h2 id="UsingtheAnalogSimulationControlFile-PassingtheAnalogSimulationControlFiletoxmsimorxrunanalogcontrolanalogcontrol1050439">Passing the Analog Simulation Control File to xmsim or xrun<span class="confluence-anchor-link" id="UsingtheAnalogSimulationControlFile-analogcontrol"></span><span class="confluence-anchor-link" id="UsingtheAnalogSimulationControlFile-analogcontrol"></span><span class="confluence-anchor-link" id="UsingtheAnalogSimulationControlFile-1050439"></span></h2>

<p>You can specify the analog control file directly on the <code><span><a href="Using_xrun_for_AMS_Simulation.html#UsingxrunforAMSSimulation-irunCommand">xrun</a></span></code>&#160;command line. For example, to pass an analog control file called <code>adc.scs</code> to <code>xrun</code> to compile, elaborate, and simulate a design contained in a file called <code>sar6bit.v</code>, type the following:</p>

<p><code> xrun adc.scs sar6bit.v </code></p>

<p>To pass the analog simulation control file to <code>xmsim</code>, you must use the <code>-analogcontrol</code>&#160;command-line option:</p>

<p><code>xmsim -analogcontrol&#160; <em>analogControlFileName</em> &#8230;</code></p>

<p>So, to pass an analog control file called <code>adc.scs</code>&#160;to<code> xmsim</code>&#160;to compile, elaborate, and simulate a design contained in a file called<code> sar6bit.v</code>, type the following:</p>

<p><code> xmsim -analogcontrol adc.scs sar6bit.v <br /></code></p>

                    </div>
<br /><br /></div>
<footer xmlns:html="http://www.w3.org/1999/xhtml"><nav class="navigation"><b><em><a href="Getting_Started_with_the_AMS_Designer_Simulator.html" id="prev" title="Getting_Started_with_the_AMS_Designer_Simulator">Getting_Started_with_the_AMS_D ...</a></em></b><b><em><a href="Specifying_Controls_for_the_Analog_Solvers.html" id="nex" title="Specifying_Controls_for_the_Analog_Solvers">Specifying_Controls_for_the_An ...</a></em></b></nav><div>
          For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2019, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved.
        </div>
</footer><br xmlns:html="http://www.w3.org/1999/xhtml" /></body></html>