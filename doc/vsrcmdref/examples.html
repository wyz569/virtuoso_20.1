
<html><head><title>Using Tcl</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="parula" />
<meta name="CreateDate" content="2020-09-07" />
<meta name="CreateTime" content="1599478777" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes how to use Virtuoso Space-based Router Tcl commands." />
<meta name="DocTitle" content="Virtuoso Space-based Router Command Reference" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Using Tcl" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="vsrcmdref" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-09-07" />
<meta name="ModifiedTime" content="1599478777" />
<meta name="NextFile" content="properties.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="environ.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Space-based Router Command Reference -- Using Tcl" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="vsrcmdrefICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="vsrcmdrefTOC.html">Contents</a></li><li><a class="prev" href="environ.html" title="Environment Variables">Environment Variables</a></li><li style="float: right;"><a class="viewPrint" href="vsrcmdref.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="properties.html" title="Inspecting Properties">Inspecting Properties</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Space-based Router Command Reference<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>22
<a id="pgfId-1034567"></a><a id="51094"></a></h1>
<h1>
<a id="pgfId-1034568"></a><hr />
<a id="32741"></a>Using Tcl<hr />
</h1>

<p>
<a id="pgfId-1034569"></a>Tcl is used to run Virtuoso<sup>&#174;</sup> Routing Integrated Development Environment (Routing IDE) and Cadence<sup>&#174;</sup> Space-based Router and Chip Optimizer. All commands performed by the tool, from either the GUI or from command line input, are logged as T<a id="marker-1034870"></a>cl commands in the T<a id="marker-1035115"></a>ranscript window. The logged commands can be replayed to duplicate the session. Tcl Core commands are supported and you can also write Tcl scripts for use with Virtuoso Routing IDE or Space-based Router and Chip Optimizer. </p>
<p>
<a id="pgfId-1034617"></a>This chapter describes the following: </p>
<ul><li>
<a id="pgfId-1034572"></a><a href="examples.html#61722">Loading and Running Tcl Scripts</a></li><li>
<a id="pgfId-1034573"></a><a href="examples.html#77739">Examples</a></li><li>
<a id="pgfId-1040976"></a><a href="examples.html#64754">This example uses the set </a><code>inst_rp</code><a href="examples.html#64754">, found in the previous example, and searches within that set for instances that match the given expression. The found set is saved in the variable </a><code>inst_rp_regB</code><a href="examples.html#64754"> and then is highlighted in orange.</a></li></ul>



<h2>
<a id="pgfId-1034547"></a><a id="61722"></a>Loading and Running Tcl Scripts</h2>
<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1034614"></a>
To run a T<a id="marker-1034871"></a>cl script, you must first load it.</div>
<h4>
<a id="pgfId-1034577"></a>Loading Tcl Scripts</h4>
<ul><li>
<a id="pgfId-1034578"></a>To load a Tcl script, you must source it from the command window.<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1034579">
<a id="pgfId-1034579"></a>source <code><em>script_file_name</em></code> </pre></li></ul>

<h4><em>
<a id="pgfId-1034580"></a>Examples</em></h4>

<p>
<a id="pgfId-1034812"></a>The following example loads a Tcl script from the directory where you started the tool.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034584"></a>source myscript.Tcl</pre>

<p>
<a id="pgfId-1034822"></a>The following example loads a Tcl script from your home directory.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034606"></a>source ~/myscript.Tcl</pre>

<p>
<a id="pgfId-1034828"></a>The following example loads a Tcl script from your PC&#8217;s F: drive.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034611"></a>source f:/projectdir/myscript.Tcl</pre>
<h4>
<a id="pgfId-1034629"></a>Running Tcl Scripts</h4>

<p>
<a id="pgfId-1034630"></a>You can run T<a id="marker-1034874"></a>cl scripts from the command line or from a bin<a id="marker-1034751"></a>dkey. </p>

<ul><li>
<a id="pgfId-1034634"></a>To run a Tcl script from the command line, type the script name followed by required arguments.</li></ul>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034640"></a><code><em>        script_file_name </em></code>[<code><em>arguments</em></code>]</pre>
<h4><em>
<a id="pgfId-1034642"></a>Example</em></h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034645"></a>search_design NAND2 50</pre>
<h2>
<a id="pgfId-1034646"></a><a id="77739"></a>Examples</h2>

<p>
<a id="pgfId-1034651"></a>A convenient methodology for creating T<a id="marker-1034872"></a>cl scripts is to copy the desired set of commands from the transcript into a file and modify the file as needed, adding arguments and a procedural interface.</p>
<p>
<a id="pgfId-1034658"></a>The following examples use a combination of Tcl Core commands and Space-based Router and Chip Optimizer commands.</p>

<h4>
<a id="pgfId-1034662"></a><a id="70833"></a>Example 1 - Finding and Highlighting a Net Using a Single Command</h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034663"></a>add_highlight -color &quot;orange&quot; -set [find_net -name A*]</pre>

<p>
<a id="pgfId-1034664"></a>This example passes the output of the <code>find_net</code><a id="marker-1034882"></a> to the <code>-set</code> parameter of the <code>add_highlight</code><a id="marker-1034883"></a> command.</p>

<h4>
<a id="pgfId-1034665"></a><a id="38297"></a>Example 2 - Finding and Highlighting an Instance Using a Stored Variable</h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034666"></a>set inst_I7 [find_instance -name I7]<br />add_highlight -color &quot;red&quot; -set $inst_I7</pre>

<p>
<a id="pgfId-1034668"></a>This example stores the result of the <code>find_instance</code><a id="marker-1034889"></a> command in a variable <code>inst_I7</code> and then passes the variable contents as the value of the <code>-set</code> parameter in the <code>add_highlight</code> command.</p>

<h4>
<a id="pgfId-1034669"></a>Example 3 - Finding and Highlighting an Instance (Master) Using a Stored Variable</h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034670"></a>set master_IOPAD_1 [find_instance_of -lib myproject -cell IOPAD_1 -view abstract]<br />add_highlight -color &quot;blue&quot; -set $master_IOPAD_1</pre>

<p>
<a id="pgfId-1034672"></a>This example find instances whose masters match the expression. The results are stored and are then passed to the <code>add_highlight</code> command.</p>

<h4>
<a id="pgfId-1034673"></a>Example 4 - Creating a Procedure to Manipulate Display Levels</h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034674"></a># This sets the start and the stop display levels for the active window.<br /># By default it repaints the window after being set.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034916"></a>proc changeDisplayLevel {p_start p_stop {p_repaint 1}} {</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034917"></a># Get the active window</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034680"></a>    set active_window [getvar gui.active_window]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034682"></a>    # Build up the string for the active window</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034683"></a>    set active_window_string [format &quot;%s%d&quot; &quot;window&quot; $active_window]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034684"></a>    # Build up the string to set the start and end display levels</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034685"></a>    set end_string [format &quot;gui.%s.end_level&quot; $active_window_string]<br />    set start_string [format &quot;gui.%s.start_level&quot; $active_window_string]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034689"></a>    # Set the start and end display levels</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034690"></a>    setvar $start_string $p_start<br />    setvar $end_string $p_stop</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034693"></a>    # Repaint if desired</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034694"></a>    if {$p_repaint == 1} {<br />        refresh -window_id $active_window<br />    }</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034697"></a>}</pre>

<p>
<a id="pgfId-1034698"></a>This procedure sets the start and stop display levels for the active window. It can be bound to a bindkey or invoked from the command line after loading. The third argument is optional and specifies whether a screen refresh should be performed. The following example sets the start and end display levels to 1 and 5, respectively, and does not refresh the screen.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034709"></a>changeDisplayLevel 1 5</pre>
<h4>
<a id="pgfId-1034755"></a>Example 5 - Finding and Highlighting Instances Matching a Pattern Name Using a Stored Variable</h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034753"></a>set inst_rp [find_instance -name rp*]<br />add_highlight -color &quot;green&quot; -set $inst_rp</pre>

<p>
<a id="pgfId-1034766"></a>This example looks for all instances with names starting with <code>rp</code>. The found set is saved in the variable <code>inst_rp</code> and then is highlighted in green.</p>

<h4>
<a id="pgfId-1034769"></a>Example 6 - Finding and Highlighting a Subset of a Set Using Stored Variables</h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1034767"></a>set inst_rp_regB [find_instance -set $inst_rp -name rp/rebB*]<br />add_highlight -color &quot;orange&quot; -set $inst_rp_regB</pre>

<p>
<a id="pgfId-1034776"></a>This example uses the set <code>inst_rp</code>, found in the previous example, and searches within that set for instances that match the given expression. The found set is saved in the variable <code>inst_rp_regB</code> and then is highlighted in orange.<a id="64754"></a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="environ.html" id="prev" title="Environment Variables">Environment Variables</a></em></b><b><em><a href="properties.html" id="nex" title="Inspecting Properties">Inspecting Properties</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>