
<html><head><title>Getting Started</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="komal" />
<meta name="CreateDate" content="2020-08-25" />
<meta name="CreateTime" content="1598366648" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes how to use Virtuoso Multi-Patterning Technology with advanced node designs." />
<meta name="DocTitle" content="Virtuoso Multi-Patterning Technology User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Getting Started" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="vmptuser" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-08-25" />
<meta name="ModifiedTime" content="1598366648" />
<meta name="NextFile" content="PreColoring.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="intro.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Multi-Patterning Technology User Guide -- Getting Started" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="vmptuserICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="vmptuserTOC.html">Contents</a></li><li><a class="prev" href="intro.html" title="Introduction">Introduction</a></li><li style="float: right;"><a class="viewPrint" href="vmptuser.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="PreColoring.html" title="Net-Based Pre-Coloring Flow">Net-Based Pre-Coloring Flow</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Multi-Patterning Technology User Guide<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>2
<a id="pgfId-1065082"></a></h1>
<h1>
<a id="pgfId-1076146"></a><hr />
<a id="25571"></a>Getting Started<hr />
</h1>

<p>
<a id="pgfId-1073898"></a>The following topics are included in this chapter:</p>
<ul><li>
<a id="pgfId-1076122"></a><a href="gettingStarted.html#53936">Prerequisites</a><ul><li>
<a id="pgfId-1095520"></a><a href="gettingStarted.html#28821">Specifying the Number of Masks Per Layer</a></li><li>
<a id="pgfId-1095524"></a><a href="gettingStarted.html#84272">Specifying Same-Mask and Diff-Mask Spacing Constraints</a></li><li>
<a id="pgfId-1097170"></a><a href="gettingStarted.html#37784">Specifying Coloring Purposes</a></li><li>
<a id="pgfId-1097189"></a><a href="gettingStarted.html#34653">Example of ASCII Technology File Data for MPT</a></li></ul></li><li>
<a id="pgfId-1097193"></a><a href="gettingStarted.html#10955">Customizing Your Environment</a></li></ul>






<h2>
<a id="pgfId-1097195"></a><a id="53936"></a>Prerequisites</h2>
<h3>
<a id="pgfId-1090789"></a><a id="28821"></a>Specifying the Number of Masks Per Layer</h3>

<p>
<a id="pgfId-1089681"></a>By default, there is one mask per layer. For layers that support more than one mask, you <strong>must</strong> specify the number of masks in a column of the DFII ASCII technology file <code>techLayers</code> section.</p>
<p>
<a id="pgfId-1093918"></a>When there is more than one mask for a layer, the masks are represented by colors in Virtuoso:</p>
<ul><li>
<a id="pgfId-1093934"></a>Color1 (<code>mask1Color</code>) </li><li>
<a id="pgfId-1093935"></a>Color2 (<code>mask2Color</code>) </li><li>
<a id="pgfId-1093936"></a>Color3 (<code>mask3Color</code>) </li><li>
<a id="pgfId-1095215"></a>Color4 (<code>mask4Color</code>) </li><li>
<a id="pgfId-1095272"></a>Color5 (<code>mask5Color</code>) </li><li>
<a id="pgfId-1095299"></a>Color6 (<code>mask6Color</code>) </li><li>
<a id="pgfId-1095376"></a>Color7 (<code>mask7Color</code>) </li><li>
<a id="pgfId-1095322"></a>Color8 (<code>mask8Color</code>) </li><li>
<a id="pgfId-1093937"></a>No color (<code>gray</code> or <code>grayColor</code>)</li></ul>








<p>
<a id="pgfId-1093979"></a>The color choices for a layer are dependent on the number of masks that have been set for the layer in the technology file.</p>
<p>
<a id="pgfId-1094979"></a>For an example of how to set the number of masks for a layer in an ASCII technology file, refer to <a href="gettingStarted.html#34653">Example of ASCII Technology File Data for MPT</a>.</p>

<h3>
<a id="pgfId-1094985"></a><a id="84272"></a>Sp<a id="MPTconstraints"></a>ecifying Same-Mask and Diff-Mask Spacing Constraints</h3>

<p>
<a id="pgfId-1098505"></a>For active color management, same-mask and different mask (diff-mask) spacing constraints must be set in the technology database. Table <a href="gettingStarted.html#51830">2-1</a> lists the supported constraints and parameters for mask coloring. </p>

<p>
<a id="pgfId-1098583"></a></p>
<table class="webflareTable" id="#id1098509">
<caption style="text-align:left;"><p>
</p><h4>Table 2-1
<a id="pgfId-1098512"></a><a id="51830"></a>Same-Mask and Diff-Mask Spacing Constraints</h4></caption>
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098518"></a>Spacing Check</p>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098520"></a>Constraint</p>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098522"></a>Constraint Parameters</p>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098524"></a>Side-to-Side</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098526"></a><h-hot><a actuate="user" class="URL" href="../ascitechconstr/constr_spacing_oneLayer.html#minSpacing_oneLayer" show="replace" xml:link="simple">minSpacing</a></h-hot> </p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098528"></a>&#39;sameMask</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="2">
<p>
<a id="pgfId-1098530"></a>Corner-to-Corner</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098532"></a><h-hot><a actuate="user" class="URL" href="../ascitechconstr/constr_spacing_oneLayer.html#minSpacing_oneLayer" show="replace" xml:link="simple">minSpacing</a></h-hot> (PRL&lt;0)</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098534"></a>&#39;sameMask</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098538"></a><h-hot><a actuate="user" class="URL" href="../ascitechconstr/constr_spacing_oneLayer.html#minCornerSpacing_oneLayer" show="replace" xml:link="simple">minCornerSpacing</a></h-hot></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098540"></a>&#39;sameMask</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="2">
<p>
<a id="pgfId-1098542"></a>End-to-Edge</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098544"></a><h-hot><a actuate="user" class="URL" href="../ascitechconstr/constr_spacing_oneLayer.html#minEndOfLineSpacing" show="replace" xml:link="simple">minEndOfLineSpacing</a></h-hot></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098546"></a>&#39;sameMask<br />&#39;diffMask</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098550"></a><h-hot><a actuate="user" class="URL" href="../ascitechconstr/constr_spacing_oneLayer.html#minEndOfLineExtensionSpacing" show="replace" xml:link="simple">minEndOfLineExtensionSpacing</a></h-hot></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098552"></a>&#39;sameMask</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098554"></a>Edge-to-edge</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098556"></a><h-hot><a actuate="user" class="URL" href="../ascitechconstr/constr_spacing_oneLayer.html#minSpanLengthSpacing" show="replace" xml:link="simple">minSpanLengthSpacing</a></h-hot></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098558"></a>&#39;sameMask</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098560"></a>Joint corner-to-joint corner</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098562"></a><h-hot><a actuate="user" class="URL" href="../ascitechconstr/constr_spacing_oneLayer.html#minJointCornerSpacing" show="replace" xml:link="simple">minJointCornerSpacing</a></h-hot></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098564"></a>&#39;sameMask</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098566"></a>End-to-corner or edge</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098568"></a><h-hot><a actuate="user" class="URL" href="../ascitechconstr/constr_spacing_oneLayer.html#endOfLineKeepout" show="replace" xml:link="simple">endOfLineKeepout</a></h-hot></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098570"></a>&#39;mask1 | &#39;mask2 | &#39;mask3</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098572"></a>Via-to-Via</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098574"></a><h-hot><a actuate="user" class="URL" href="../ascitechconstr/constr_via.html#minViaSpacing_oneLayer" show="replace" xml:link="simple">minViaSpacing</a></h-hot></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098576"></a>&#39;sameMask</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098578"></a>Cut class-to-cut class</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098580"></a><h-hot><a actuate="user" class="URL" href="../ascitechconstr/constr_via.html#minCutClassSpacing_oneLayer" show="replace" xml:link="simple">minCutClassSpacing</a></h-hot></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098582"></a>&#39;sameMask</p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1098585"></a>For detailed information on these constraints, refer to <em><a actuate="user" class="URL" href="../ascitechconstr/ascitechconstrTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Technology Data Constraints Reference</a></em>.</p>
<p>
<a id="pgfId-1097041"></a>For an example of same-mask spacing constraints in an ASCII technology file, refer to <a href="gettingStarted.html#34653">Example of ASCII Technology File Data for MPT</a>.</p>

<h3>
<a id="pgfId-1097046"></a><a id="37784"></a>Specifying Coloring Purposes</h3>

<p>
<a id="pgfId-1097439"></a>By default, coloring will be applied only to shapes on the <code>drawing</code> and <code>pin</code> purposes, all user-defined purposes, and purposes for which one of these is the parent purpose. A shape on any other predefined purpose will not be colored unless its purpose is specified by the <a href="envars.html#76052"><code>coloredPurposeTypes</code> environment variable. Alternatively, if the </a><a href="envars.html#48670"><code>explicitColoredPurposes</code></a> environment variable is a non-empty string, coloring will be applied only to shapes on the purposes specified by that environment variable; in this case, the <a href="envars.html#76052"><code>coloredPurposeTypes</code> environment variable will be ignored. For the list of predefined purposes, see <h-hot><a actuate="user" class="URL" href="../ascitechfile/chap3.html#customFill" show="replace" xml:link="simple">Predefined Purposes</a></h-hot></a> in <em><a actuate="user" class="URL" href="../ascitechfile/ascitechfileTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Technology Data ASCII Files Reference</a></em>.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1099987"></a>If the MPT constraint group is defined, the purposes specified in the <code><a href="envars.html#76052"></a><code>coloredPurposeTypes</code><code></code></code> and <code><a href="envars.html#48670"></a><code>explicitColoredPurposes</code><code></code></code> environment variables are not considered for coloring. Even if no valid purposes are defined in the constraint group definition, the default purposes are considered for coloring and environment variables are not considered.</div>

<h3>
<a id="pgfId-1097051"></a><a id="34653"></a>Example of ASCII Technology File Data for MPT</h3>

<p>
<a id="pgfId-1097052"></a>In this example, </p>
<ul><li>
<a id="pgfId-1097053"></a>The number of masks per layer is set for each layer that has more than one mask.</li><li>
<a id="pgfId-1097054"></a>The member constraint groups, <code>minEndOfLineSpacingAndSameMaskCG</code>, <code>minSpacingTableAndSameMaskCG</code>, and <code>minViaSpacingAndSameMaskCG,</code> are referenced in the <strong>foundry</strong> constraint group.</li></ul>

<p>
<a id="pgfId-1097055"></a>First, the number of masks per layer is set.</p>

<p>
<a id="pgfId-1097061"></a></p>
<div class="webflare-div-image">
<img width="668" height="134" src="images/gettingStarted-2.gif" /></div>

<p>
<a id="pgfId-1097062"></a>Next, the member constraint groups are created.</p>
<p>
<a id="pgfId-1097063"></a>The <code>minEndOfLineSpacingAndSameMaskCG</code> member group sets the <code>minEndOfLineSpacing</code> constraint for end-to-end and end-to-side same-mask spacing ANDed with the foundry <code>minEndOfLineSpacing</code> rule.</p>
<p>
<a id="pgfId-1097085"></a></p>

<div class="webflare-div-image">
<img width="668" height="419" src="images/gettingStarted-3.gif" /></div>

<p>
<a id="pgfId-1097086"></a>The <code>minSpacingTableAndSameMaskCG</code> member group sets the <code>minSpacing</code> constraint for side-to-side and corner-to-corner same-mask spacing ANDed with the foundry <code>minSpacing</code> rules. </p>

<p>
<a id="pgfId-1097116"></a></p>
<div class="webflare-div-image">
<img width="668" height="491" src="images/gettingStarted-4.gif" /></div>

<p>
<a id="pgfId-1097117"></a>The <code>minViaSpacingAndSameMaskCG</code> member group sets the <code>minViaSpacing</code> constraint for via-to-via same-mask spacing ANDed with the foundry <code>minViaSpacing</code> rules. </p>

<p>
<a id="pgfId-1097143"></a></p>
<div class="webflare-div-image">
<img width="668" height="230" src="images/gettingStarted-5.gif" /></div>

<p>
<a id="pgfId-1097144"></a>Finally, the member groups are specified in the foundry constraint group.</p>
<p>
<a id="pgfId-1097145"></a>;;; Specification of member constraint groups in the foundry constraint group</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1097146"></a>;( group                    [override] )<br />;( -----    ------------ )<br />( &quot;foundry&quot;          nil<br />   memberConstraintGroups(<br />    ; listed in order of precedence<br />    &quot;<strong>minEndOfLineSpacingAndSameMaskCG</strong>&quot;<br />    &quot;<strong>minSpacingTableAndSameMaskCG</strong>&quot;<br />    &quot;<strong>minViaSpacingAndSameMaskCG</strong>&quot;<br />    ); memberConstraintGroups</pre>
<h2>
<a id="pgfId-1097148"></a><a id="10955"></a>Customizing Your Environment</h2>

<p>
<a id="pgfId-1095698"></a>There are a number of factors that determine how data will be displayed and handled, and which Virtuoso Multi-Patterning Technology GUI elements will appear. These factors can be set using environment variables, SKILL functions, and the Multiple Patterning Options form.</p>
<p>
<a id="pgfId-1097526"></a>Shapes can be colored two ways:</p>
<ul><li>
<a id="pgfId-1098186"></a>Manually using the Virtuoso tools described in <a href="InteractiveColoring.html#65261">Interactive Coloring in Layout</a></li><li>
<a id="pgfId-1098196"></a>Automatically using the multiple patterning color engine<br />
<a id="pgfId-1098293"></a>The color engine can automatically color connected shapes on the same layer and change the color of shapes to avoid same-mask spacing violations.</li></ul>


<p>
<a id="pgfId-1098170"></a>This section includes the following topics:</p>
<ul><li>
<a id="pgfId-1096817"></a><a href="gettingStarted.html#37082">Enabling the Multiple Patterning Color Engine</a><ul><li>
<a id="pgfId-1096827"></a><a href="gettingStarted.html#10608">Setting the Coloring Method</a></li></ul></li><li>
<a id="pgfId-1097920"></a><a href="gettingStarted.html#72017">Using the Multiple Patterning Options Form</a></li><li>
<a id="pgfId-1097933"></a><a href="gettingStarted.html#29394">Customizing Displayed Coloring</a></li></ul>




<h3>
<a id="pgfId-1095671"></a><a id="37082"></a><a id="enableDPT"></a>Enabling the Multiple Patterning Color Engine</h3>

<p>
<a id="pgfId-1098340"></a>By default, the color engine is not enabled.</p>
<p>
<a id="pgfId-1098350"></a>To use the color engine:</p>

<ol><li>
<a id="pgfId-1098351"></a>Do one of the following: <ul><li>
<a id="pgfId-1098352"></a>Type the following in the CIW or in your <code>.cdsinit</code> file:</li></ul><br /><pre class="webflare-pre-block webflare-courier-new" id="#id1095570">
<a id="pgfId-1095570"></a><code>mptActivate( t )</code></pre><ul><li>
<a id="pgfId-1095571"></a>Use the Multiple Patterning toolbar, as described in <a href="InteractiveColoring.html#76475">Turning the Multiple Patterning Color Engine On and Off</a>.</li></ul></li><li>
<a id="pgfId-1095578"></a>Set the coloring method, as described in <a href="gettingStarted.html#10608">Setting the Coloring Method</a>.</li></ol>








<h4>
<a id="pgfId-1095581"></a><a id="10608"></a><a id="SettingtheColorModel"></a>Se<a id="SettingTheColoringMethod"></a>tting the Coloring Method</h4>

<p>
<a id="pgfId-1095582"></a>The coloring method applies when the multiple patterning color engine is enabled and can be set globally for a session, and by layer for a technology database or a cellview. The valid coloring methods are: <em>interactive</em> and <em>managed</em>. For both of these methods, the color engine automatically colors connected shapes on the same layer. When the coloring method is <em>managed</em>, the color engine can also change the color of shapes to avoid same-mask spacing violations.</p>

<h4><em>
<a id="pgfId-1095583"></a>Global Coloring Method</em></h4>

<p>
<a id="pgfId-1095584"></a>To set the global coloring method for the session, do one of the following:</p>

<ul><li>
<a id="pgfId-1095585"></a>Type the following in the CIW input line or in your <code>.cdsinit</code> file:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1095587">
<a id="pgfId-1095587"></a><a href="../sklayoutref/mpt.html#mptSetDefaultColoringMethod">mptSetDefaultColoringMethod</a>( <code><em>t_coloringMethod </em></code>)</pre>
<a id="pgfId-1095588"></a>where <span class="webflare-courier-new" style="white-space:pre"><em>t_coloringMethod</em></span> is <code>&quot;interactive&quot;</code> or <code>&quot;managed&quot;</code>.<br />
<a id="pgfId-1095589"></a>For example,<pre class="webflare-pre-block webflare-courier-new" id="#id1095590">
<a id="pgfId-1095590"></a>mptSetDefaultColoringMethod( <code><em>&quot;</em></code>managed&quot; )</pre></li><li>
<a id="pgfId-1095593"></a>Specify the <em>Default Coloring Method</em>, as described in <a href="gettingStarted.html#72017">Using the Multiple Patterning Options Form</a>.</li></ul>







<h4><em>
<a id="pgfId-1095595"></a>L<a id="SetLayerColoringMethod"></a>ayer Coloring Method</em></h4>

<p>
<a id="pgfId-1095596"></a>To set the coloring method for a layer, </p>

<ul><li>
<a id="pgfId-1095597"></a>Type the following in the CIW input line or in your <code>.cdsinit</code> file.<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1095599">
<a id="pgfId-1095599"></a><a href="../sklayoutref/mpt.html#mptSetLayerColoringMethod">mptSetLayerColoringMethod</a>( <code><em>d_objID l_layers t_coloringMethod </em></code>) </pre>
<a id="pgfId-1095600"></a>where <span class="webflare-courier-new" style="white-space:pre"><em>d_objID</em></span> is the object identifier for the cellview or the technology database, <span class="webflare-courier-new" style="white-space:pre"><em>l_layers</em></span> is a list of layers, and <span class="webflare-courier-new" style="white-space:pre"><em>t_coloringMethod</em></span> is <code>&quot;interactive&quot;</code> or <code>&quot;managed&quot;</code>.</li></ul>




<h4>
<a id="pgfId-1095601"></a>Coloring Method Precedence</h4>

<ul><li>
<a id="pgfId-1095602"></a>By default, the global coloring method is used for all layers. </li><li>
<a id="pgfId-1098468"></a>The layer coloring method for the technology database takes precedence over the global coloring method.</li><li>
<a id="pgfId-1095603"></a>The layer coloring method for a cellview takes precedence over the layer coloring method for the technology database. </li></ul>



<h4>
<a id="pgfId-1095604"></a>Getting the Coloring Method</h4>

<p>
<a id="pgfId-1095606"></a>To get the global default coloring method, see the <em>Default Coloring Method</em>, as described in <a href="gettingStarted.html#72017">Using the Multiple Patterning Options Form</a>, or use the <a href="../sklayoutref/mpt.html#mptGetDefaultColoringMethod">mptGetDefaultColoringMethod</a> SKILL function.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1095607"></a><code><em>t_coloringMethod</em></code> = mptGetDefaultColoringMethod() </pre>

<p>
<a id="pgfId-1095608"></a>where <span class="webflare-courier-new" style="white-space:pre"><em>t_coloringMethod</em></span> is <code>&quot;interactive&quot;</code> or <code>&quot;managed&quot;</code>.</p>
<p>
<a id="pgfId-1095610"></a>To get the coloring method for a layer, use the <a href="../sklayoutref/mpt.html#mptGetLayerColoringMethod">mptGetLayerColoringMethod</a> SKILL function.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1095611"></a><code><em>t_coloringMethod</em></code> = mptGetLayerColoringMethod( <code><em>d_cellviewID t_layerName </em></code>) </pre>

<p>
<a id="pgfId-1095612"></a>where <span class="webflare-courier-new" style="white-space:pre"><em>d_cellviewID</em></span> is the object identifier for the cellview, <span class="webflare-courier-new" style="white-space:pre"><em>t_layerName</em></span> is the layer name and <span class="webflare-courier-new" style="white-space:pre"><em>t_coloringMethod</em></span> is <code>&quot;interactive&quot;</code> or <code>&quot;managed&quot;</code>.</p>
<p>
<a id="pgfId-1095613"></a>To get the coloring method for the session, the design, and the layers for which the coloring method is set, use the <a href="../sklayoutref/mpt.html#mptGetLayerColoringMethod">mptGetLayerColoringMethod</a> SKILL function.</p>
<p>
<a id="pgfId-1095615"></a>In the following example, the output is shown in blue.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1095616"></a>mptGetLayerColoringMethod( cv<code><em> </em></code>) </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1095617"></a>Session coloring method : interactive<br />Design coloring : interactive<br />Layer Metal2: managed<br />t</pre>
<h3>
<a id="pgfId-1097733"></a><a id="72017"></a>Us<a id="UsingMPOptions"></a>ing the Multiple Patterning Options Form</h3>

<p>
<a id="pgfId-1097734"></a>To change the default multiple patterning environment variable settings:</p>

<ol><li>
<a id="pgfId-1097735"></a>Choose <em>Options &#8211; Multiple Patterning</em>.<br />
<a id="pgfId-1097737"></a>The M<a id="_mptGuiMptOptionsForm"></a>ultiple Patterning Options form appears. <br />
<a id="pgfId-1097741"></a><div class="webflare-div-image">
<img width="631" height="237" src="images/gettingStarted-6.gif" /></div><div class="webflare-information-macro webflare-macro-tip">
<a id="pgfId-1097742"></a>
Hover the pointer over a field to see the tooltip for the field.</div></li><li>
<a id="pgfId-1099073"></a>Choose the <em>Default Coloring Method.</em><ul><li>
<a id="pgfId-1097743"></a><em>Connected shapes only (interactive)</em></li><li>
<a id="pgfId-1097744"></a><em>Connected shapes &amp; color spacing rules (managed)</em></li></ul><br />
<a id="pgfId-1097967"></a>The coloring method applies only when the color engine is enabled. For both interactive and managed coloring methods, the color engine automatically colors connected shapes on the same layer. When the coloring method is <em>managed</em>, the color engine can also change the color of shapes to avoid same-mask spacing violations. For information on how this setting affects coloring, see <a href="InteractiveColoring.html#10735">Using the Multiple Patterning Color Engine</a>.</li><li>
<a id="pgfId-1097745"></a>Choose the <em>Default Shape Assignment.</em><ul><li>
<a id="pgfId-1097746"></a><em>gray</em>: Shapes are not colored.</li><li>
<a id="pgfId-1097747"></a><em>layerDefault</em>: Shapes are assigned to the default color for the layer.</li><li>
<a id="pgfId-1097748"></a><em>random</em>: Shapes are randomly assigned to a valid mask color for the layer.</li><li>
<a id="pgfId-1097749"></a><em>asIs</em>: <ul><li>
<a id="pgfId-1099101"></a>Shapes with a color assignment are unchanged unless a color violation exists. If a color violation exists, the color engine can change the color of a shape.</li><li>
<a id="pgfId-1099121"></a>Shapes without a color assignment but that are same-mask spacing or less from another same-layer shape are colored using the layer default color, if set, or randomly colored. Otherwise, gray shapes remain gray.</li></ul></li></ul></li><li>
<a id="pgfId-1097750"></a>Choose whether to <em>Maintain color while copying.</em><br />
<a id="pgfId-1097751"></a>When enabled, the coloring information from the source objects is copied <em>as-is</em> to the corresponding destination objects when copying or using Make Cell.</li><li>
<a id="pgfId-1097752"></a>Choose whether to <em>Propagate locks to connected shapes.</em><br />
<a id="pgfId-1097753"></a>When enabled, locks are automatically propagated to connected shapes when the lock is initiated from the Multiple Patterning toolbar. For more information on this option, see <a href="InteractiveColoring.html#74710">Color Locking on Connected Shapes</a>.</li><li>
<a id="pgfId-1097754"></a>To specify <em>Advanced Options</em>, click the expand (triangle) button.<br />
<a id="pgfId-1097755"></a>The <em>Advanced Options</em> appear.<br />
<a id="pgfId-1097759"></a><div class="webflare-div-image">
<img width="631" height="298" src="images/gettingStarted-8.gif" /></div><ol><li>
<a id="pgfId-1099020"></a>Choose <em>Don&#8217;t color Pcells</em> to prevent the recoloring of Pcells when running <em>ReColor All</em> or <em>Update Color</em> from the Multiple Patterning toolbar or using the <a href="../sklayoutref/mpt.html#mptReColor">mptReColor</a> or <a href="../sklayoutref/mpt.html#mptUpdateColor">mptUpdateColor</a> SKILL function. </li><li>
<a id="pgfId-1099022"></a>Choose <em>Recolor readOnly cellviews</em> to recolor read-only cellviews when running <em>ReColor All</em> or <em>Update Color</em> from the Multiple Patterning toolbar or using the <a href="../sklayoutref/mpt.html#mptReColor">mptReColor</a> or <a href="../sklayoutref/mpt.html#mptUpdateColor">mptUpdateColor</a> SKILL function. If not selected, only editable cellviews are recolored by those Multiple Patterning toolbar and SKILL functions.</li><li>
<a id="pgfId-1097763"></a>Choose <em>Allow shifting of locked shapes</em> to allow shifting of color-locked shapes. By default, shapes must be unlocked before shifting colors.</li><li>
<a id="pgfId-1097764"></a>Choose <em>Override lock on connected shapes</em> to allow color-locked shapes to change color to avoid color conflicts with connected shapes when a lock is initiated from the Multiple Patterning toolbar. By default, color-locked shapes cannot change color to avoid color conflicts. For more information on this option, see <a href="InteractiveColoring.html#74710">Color Locking on Connected Shapes</a>.</li><li>
<a id="pgfId-1098592"></a>Choose <em>Propagate locks while editing</em> to automatically propagate locks to connected shapes on the same layer while editing. When this option is disabled and shapes are connected while editing (for example, when a shape is moved to connect to another shape), only the color of the shape can be propagated. When this option is enabled, the color state (lock) can also be propagated. For more information on this option, see <a href="InteractiveColoring.html#74710">Color Locking on Connected Shapes</a>.</li><li>
<a id="pgfId-1101246"></a>Choose <em>Delete color on connected shapes</em> to delete the color on the shapes connected to the selected shape</li><li>
<a id="pgfId-1097765"></a>Specify <em>Display Color Filter Size</em> for the minimum shape size, in pixels, for which the color of the shape will be displayed. The color of shapes smaller than this size will not be displayed.</li><li>
<a id="pgfId-1097766"></a>Specify <em>Hierarchy Stop Level</em> for the level to which shapes will be considered when coloring. A value of <code>1</code> considers only top-level and level-1 shapes. A value of <code>0</code> considers only shapes on the current level.</li></ol></li><li>
<a id="pgfId-1097768"></a>Click <em>OK</em> or <em>Apply</em>.</li></ol>















































<p>
<a id="pgfId-1098676"></a>The environment variables that are supported by the Multiple Patterning Options form are listed in the following table.</p>
<table class="webflareTable" id="#id1098677">
<caption style="text-align:left;"><p>
</p><h4>Table 2-2
<a id="pgfId-1098680"></a><a id="25081"></a>Multiple Patterning Options Mapping to Environment Variables</h4></caption>
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1098686">
<a id="pgfId-1098686"></a>Field</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1098688">
<a id="pgfId-1098688"></a>Environment Variable</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1098690">
<a id="pgfId-1098690"></a>Default</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098692"></a><em>Default Coloring Method</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098697"></a><a href="envars.html#46408">defaultColoringMethod</a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098699"></a><code>connectedShapes</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098701"></a><em>Default Shape Assignment</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098706"></a><a href="envars.html#58419">unclusteredShapeColor</a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098708"></a><code>asIs</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098710"></a><em>Maintain color while copying</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098715"></a><a href="envars.html#26319">copyMPAttributes</a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098717"></a><code>nil </code>(OFF)</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098719"></a><em>Propagate locks to connected shapes</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098724"></a><a href="envars.html#32602">propagateLocksToConnectedShapes</a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098726"></a><code>nil</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098728"></a><em>Don&#8217;t color Pcells</em><a id="31155"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098733"></a><a href="envars.html#17697">dontColorPCells</a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098735"></a><code>nil</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098737"></a><em>Recolor readOnly cellviews</em><a id="29400"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098742"></a><a href="envars.html#58122">reColorReadOnlyCellView</a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098744"></a><code>t</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098746"></a><em>Allow shifting of locked shapes</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098751"></a><a href="envars.html#26277">allowLockShiftOverride</a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098753"></a><code>nil</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098755"></a><em>Override lock on connected shapes</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098760"></a><a href="envars.html#89006">overrideLockOnConnectedShapes</a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098762"></a><code>nil</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098764"></a><em>Propagate locks while editing</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098769"></a><a href="envars.html#30497"><code>autoPropagateLock</code></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098771"></a><code>nil</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098773"></a><em>Display Color Filter Size</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098778"></a><a href="envars.html#68287">coloringFilterSize</a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098780"></a><code>5.0</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098782"></a><em>Hierarchy Stop Level</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098787"></a><a href="envars.html#80451">extractorStopLevel</a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1098789"></a><code>1</code></p>
</td>
</tr>
</tbody></table>
<p>
<a id="pgfId-1098802"></a>For more information on other MPT environment variables, see <a href="envars.html#79230">List of Virtuoso MPT Environment Variables</a>.</p>

<h3>
<a id="pgfId-1096680"></a><a id="29394"></a>Customizing Displayed Coloring</h3>

<p>
<a id="pgfId-1096681"></a>The default coloring is shown in <a href="InteractiveColoring.html#64529">Color Representations</a>. You can customize the coloring for Multiple Patterning data by defining color display packets that are sub-packets for the layer-purpose pair (LPP).</p>

<ol><li>
<a id="pgfId-1096682"></a>In the <code>techDisplays</code> section of the ASCII technology file, specify the packet name of the layer-purpose pair of interest.</li><li>
<a id="pgfId-1096683"></a>Use the following names for the sub-packets in the <strong>display.drf</strong> file, where the coloring information is specified.<br /><table class="webflareTable" id="#id1096684">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1096686"></a>&lt;packet_name&gt;</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1096688"></a>Display packet for the uncolored LPP</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1096690"></a>&lt;packet_name&gt;<code>_c1</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1096692"></a>Display packet for <code>mask1Color</code> unlocked LPP</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1096694"></a>&lt;packet_name&gt;<code>_c2</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1096696"></a>Display packet for <code>mask2Color</code> unlocked LPP</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1096698"></a>&lt;packet_name&gt;<code>_c1L</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1096700"></a>Display packet for <code>mask1Color</code> locked LPP</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1096702"></a>&lt;packet_name&gt;<code>_c2L</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1096704"></a>Display packet for <code>mask2Color</code> locked LPP</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1096706"></a>&lt;packet_name&gt;<code>_black</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1096708"></a>Display packet for a <code>blackColor</code> blockage object</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1096710"></a>&lt;packet_name&gt;<code>_multi</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1096712"></a>Display packet for a <code>multiColor</code> blockage object</p>
</td>
</tr>
</tbody></table><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1096714"></a>Not all sub-packets are required. Since only blockage objects can be assigned <code>blackColor</code> or <code>multiColor</code>, only blockage display packets should define <code>_black</code> and <code>_multi</code> sub-packets. Blockages also cannot be color locked, so <code>_c1L</code> and <code>_c2L</code> sub-packets for a blockage display style are not needed.</div></li></ol>





<h4><em>
<a id="pgfId-1099201"></a><a id="39142"></a>Dis<a id="mptDisiplayingColoredShapes"></a>playing Colored Shapes</em></h4>

<p>
<a id="pgfId-1099215"></a>When custom coloring is specified, colored shapes are displayed using the merged colored and uncolored display packets. In the following example, the uncolored packet and the mask1Color unlocked packet are shown graphically with the resultant colored shape.</p>

<p>
<a id="pgfId-1099234"></a></p>
<div class="webflare-div-image">
<img width="668" height="132" src="images/gettingStarted-9.gif" /></div>

<p>
<a id="pgfId-1096715"></a>To display colored shapes using only the colored display packets, set the <a href="envars.html#70730">mergeColoredPacket</a> environment variable to <code>nil</code>. </p>

<h4><em>
<a id="pgfId-1099275"></a>Example</em></h4>

<p>
<a id="pgfId-1096716"></a>In the ASCII technology file,</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1096717"></a>techDisplays(<br />;( LayerName Purpose  Packet &#8230;)<br /> ( Metal1    drawing  M1_drawing  &#8230;)<br /> ( Metal1    blockage M1_blockage &#8230;)<br /> ( Via1      drawing  V1_drawing  &#8230;)<br />  &#8230;<br /> ) ;techDisplays</pre>

<p>
<a id="pgfId-1096718"></a>In the <code>display.drf</code>,</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1096719"></a>drDefinePacket(<br />;(DispName PacketName      Stipple     LineStyle  Fill   Outline [FillStyle])<br /> (display  M1_drawing        hLine     solid      blue   blue    outlineStipple)<br /> (display  M1_drawing_c1     stipple0  solid      red    red     outlineStipple)<br /> (display  M1_drawing_c2     stipple0  solid      blue   green   outlineStipple)<br /> (display  M1_drawing_c2L    stipple0  thickLine  green  green   outlineStipple)<br /> (display  M1_blockage       hLine     solid      blue   blue    outlineStipple)<br /> (display  M1_blockage_c1    hLine     solid      blue   red     outlineStipple)<br /> (display  M1_blockage_c2    hLine     solid      blue   iceblue outlineStipple)<br /> (display  M1_blockage_black hLine     solid      blue   lilac   outlineStipple)<br /> (display  M1_blockage_multi hLine     solid      blue   purple  outlineStipple)<br /> (display  V1_drawing        solid     thickLine  orange orange  X)<br /> (display  V1_drawing_cl     solid     thickLine  orange red     outlineStipple)<br /> (display  V1_drawing_c2     solid     thickLine  orange green   outlineStipple)<br /> &#8230;<br /> )</pre>

<p>
<a id="pgfId-1099875"></a>There is no display packet specified for <code>M1_drawing_c1L</code>. Therefore, the default mask1Color locked display packet is used which has a thick red outline with no stipple.</p>
<p>
<a id="pgfId-1090178"></a>The graphical representations for shapes using this <code>display.drf</code> for the two <a href="envars.html#70730">mergeColoredPacket</a> environment variable settings are shown below.</p>

<p>
<a id="pgfId-1099411"></a></p>
<div class="webflare-div-image">
<img width="668" height="467" src="images/gettingStarted-10.gif" /></div>
<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="intro.html" id="prev" title="Introduction">Introduction</a></em></b><b><em><a href="PreColoring.html" id="nex" title="Net-Based Pre-Coloring Flow">Net-Based Pre-Coloring Flow</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>