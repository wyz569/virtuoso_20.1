
<html><head><title>Coloring in Layout</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="komal" />
<meta name="CreateDate" content="2020-08-25" />
<meta name="CreateTime" content="1598366656" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes how to use Virtuoso Multi-Patterning Technology with advanced node designs." />
<meta name="DocTitle" content="Virtuoso Multi-Patterning Technology User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Coloring in Layout" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="vmptuser" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-08-25" />
<meta name="ModifiedTime" content="1598366656" />
<meta name="NextFile" content="CheckingAndFixing.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="PreColoring.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Multi-Patterning Technology User Guide -- Coloring in Layout" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="vmptuserICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="vmptuserTOC.html">Contents</a></li><li><a class="prev" href="PreColoring.html" title="Net-Based Pre-Coloring Flow">Net-Based Pre-Coloring Flow</a></li><li style="float: right;"><a class="viewPrint" href="vmptuser.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="CheckingAndFixing.html" title="Checking and Fixing Multiple Patterning Violations in Layout">Checking and Fixing Multiple P ...</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Multi-Patterning Technology User Guide<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>4
<a id="pgfId-1102007"></a>  </h1>
<h1>
<a id="pgfId-1102009"></a><hr />
<a id="54101"></a>Coloring in Layout<hr />
</h1>

<p>
<a id="pgfId-1108999"></a>There are several ways to color shapes in the layout. Shapes can be colored manually, as described in <a href="InteractiveColoring.html#65261">Interactive Coloring in Layout</a>, or automatically <a href="InteractiveColoring.html#10735">Using the Multiple Patterning Color Engine</a>. In track-based routing, shapes are colored based on their position relative to colored tracks, as described in <a href="InteractiveColoring.html#53380">Track-Based Coloring</a>. </p>
<p>
<a id="pgfId-1121310"></a>The following topics are included in this chapter:</p>
<ul><li>
<a id="pgfId-1109003"></a><a href="InteractiveColoring.html#65261">Interactive Coloring in Layout</a></li><li>
<a id="pgfId-1089358"></a><a href="InteractiveColoring.html#92873">Using the Multiple Patterning Toolbar</a></li><li>
<a id="pgfId-1126104"></a><a href="InteractiveColoring.html#10735">Using the Multiple Patterning Color Engine</a></li><li>
<a id="pgfId-1099270"></a><a href="InteractiveColoring.html#53380">Track-Based Coloring</a></li><li>
<a id="pgfId-1127971"></a><a href="InteractiveColoring.html#46536">Migrating from the Multiple Patterning Assistant</a></li><li>
<a id="pgfId-1073926"></a><a href="InteractiveColoring.html#78497">Saving and Restoring Data</a></li><li>
<a id="pgfId-1073930"></a><a href="InteractiveColoring.html#49827">Limitations</a></li></ul>







<h2>
<a id="pgfId-1098853"></a><a id="65261"></a>In<a id="InteractiveColoringinLayout"></a>teractive Coloring in Layout</h2>

<p>
<a id="pgfId-1123218"></a>Several Virtuoso tools can be used to color shapes and view coloring in Layout:</p>
<ul><li>
<a id="pgfId-1127992"></a><a id="40164"></a>Palette Assistant<ul><li>
<a id="pgfId-1125360"></a><a href="InteractiveColoring.html#76283">Creating Colored Shapes</a></li><li>
<a id="pgfId-1125400"></a><a href="InteractiveColoring.html#33649">Controlling the Visibility and Selectability of Colored Data</a></li></ul><br />
<a id="pgfId-1125414"></a>For more information, see <a actuate="user" class="URL" href="../vlehelp/chap3.html#paletteMPT" show="replace" xml:link="simple">MPT Support</a> in <em><a actuate="user" class="URL" href="../vlehelp/vlehelpTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Layout Suite L User Guide</a></em>.</li><li>
<a id="pgfId-1107485"></a><a id="97377"></a>Property Editor<ul><li>
<a id="pgfId-1125439"></a><a href="InteractiveColoring.html#66702">Inspecting Colored Data</a></li><li>
<a id="pgfId-1125452"></a><a href="InteractiveColoring.html#13125">Coloring Existing Shapes</a></li><li>
<a id="pgfId-1125499"></a><a href="InteractiveColoring.html#32205">Color Locking</a></li></ul><br />
<a id="pgfId-1107495"></a>For more information, see <a actuate="user" class="URL" href="../vlehelp/leWSP.html#wsp_InteractiveColor" show="replace" xml:link="simple">Interactively Setting Color on a Selected Object</a> in <em><a actuate="user" class="URL" href="../vlehelp/vlehelpTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Layout Suite L User Guide</a></em>.</li><li>
<a id="pgfId-1120536"></a><a id="80578"></a>Dynamic Selection Assistant<ul><li>
<a id="pgfId-1125480"></a><a href="InteractiveColoring.html#66702">Inspecting Colored Data</a></li></ul><br />
<a id="pgfId-1125512"></a>For more information, see <a actuate="user" class="URL" href="../vlehelp/appE.html#dynamicSelectionAssistant" show="replace" xml:link="simple">Dynamic Selection</a> in <em><a actuate="user" class="URL" href="../vlehelp/vlehelpTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Layout Suite L User Guide</a></em>.</li><li>
<a id="pgfId-1107590"></a><a id="72388"></a>Multiple Patterning Toolbar<ul><li>
<a id="pgfId-1128048"></a><a href="InteractiveColoring.html#64714">Showing and Hiding Color</a></li><li>
<a id="pgfId-1128039"></a><a href="InteractiveColoring.html#13125">Coloring Existing Shapes</a><a href="../vlehelp/chap2.html#showSelInfo"></a></li><li>
<a id="pgfId-1125597"></a><a href="InteractiveColoring.html#54299">Color Shifting</a></li><li>
<a id="pgfId-1128098"></a><a href="InteractiveColoring.html#10420">Recoloring Selected Colors</a></li><li>
<a id="pgfId-1128074"></a><a href="InteractiveColoring.html#32205">Color Locking</a></li><li>
<a id="pgfId-1128063"></a><a href="InteractiveColoring.html#46173">Removing Color from Shapes</a></li></ul><br />
<a id="pgfId-1125574"></a>For more information, refer to <a href="InteractiveColoring.html#92873">Using the Multiple Patterning Toolbar</a>.</li><li>
<a id="pgfId-1137732"></a><a id="24380"></a>Show Selection Info Toolbar<ul><li>
<a id="pgfId-1137746"></a><a href="InteractiveColoring.html#66702">Inspecting Colored Data</a></li></ul><br />
<a id="pgfId-1137797"></a>For more information, refer to <a actuate="user" class="URL" href="../vlehelp/chap2.html#showSelInfo" show="replace" xml:link="simple">Displaying Preselect and Selected Object Information</a> in <em><a actuate="user" class="URL" href="../vlehelp/vlehelpTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Layout Suite L User Guide</a></em>.</li><li>
<a id="pgfId-1132597"></a>Virtuoso Space-based Router<br />
<a id="pgfId-1148372"></a>For information on creating colored wires and buses, see <a actuate="user" class="URL" href="../weuser/interactiveColoredRouting.html#firstpage" show="replace" xml:link="simple">Interactive Colored Routing</a>&#160;in <em><a actuate="user" class="URL" href="../weuser/weuserTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Interactive and Assisted Routing User Guide</a></em>.<br />
<a id="pgfId-1148368"></a>(message URL ../weuser/interactiveColoredRouting.html#firstpage)</li></ul>


























<div class="webflare-information-macro webflare-macro-video">
<a id="pgfId-1137538"></a>
For an overview of this feature, see <a actuate="user" class="URL" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1Od0000002JiXAEA0&amp;pageName=ArticleContent&amp;sq=005d0000001T3PSAA0" show="replace" xml:link="simple">Basic Interactive (Manual) Coloring</a>.</div>

<p>
<a id="pgfId-1123943"></a>The advanced coloring features are available only when the multiple patterning color engine is enabled and are dependent on the coloring method (interactive or managed).</p>

<p>
<a id="pgfId-1124041"></a></p>
<table class="webflareTable" id="#id1124009">
<caption style="text-align:left;"><p>
</p><h4>Table 4-1
<a id="pgfId-1124012"></a><a id="34883"></a>Advanced Coloring Features (Color Engine ON)</h4></caption>
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1124018">
<a id="pgfId-1124018"></a>Feature</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1124020">
<a id="pgfId-1124020"></a>Interactive</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1124022">
<a id="pgfId-1124022"></a>Managed</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1124026"></a><a href="InteractiveColoring.html#23580">Hierarchical Coloring of Connected Shapes</a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1124029"></a>Automatic</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1124031"></a>Automatic</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1124036"></a><a href="InteractiveColoring.html#72944">Automatic Color Shifting</a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1124038"></a>no</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1124040"></a>Yes, based on same-mask constraint settings </p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1143694"></a>For more information, refer to <a href="InteractiveColoring.html#10735">Using the Multiple Patterning Color Engine</a>.</p>

<h3>
<a id="pgfId-1143695"></a><a id="64529"></a>Color Representations</h3>

<p>
<a id="pgfId-1143699"></a>Table <a href="InteractiveColoring.html#81546">4-2</a> shows the default color representations for the first four masks. Shapes without color assignments are considered to be &#8220;gray&#8221; and are shown with no outline by default.</p>

<p>
<a id="pgfId-1143790"></a></p>
<table class="webflareTable" id="#id1143700">
<caption style="text-align:left;"><p>
</p><h4>Table 4-2
<a id="pgfId-1143703"></a><a id="81546"></a>Default Colors</h4></caption>
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1143715"></a>Color1 <br />mask1Color<br />(red outline)</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1143717"></a>Color2 <br />mask2Color<br />(green outline)</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1143719"></a>Color3 <br />mask3Color<br />(yellow outline)</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1143721"></a>Color4 <br />mask4Color<br />(blue outline)</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1143723"></a>Description</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1143725"></a>Outline Style</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1143732"></a><img width="99" height="62" src="images/InteractiveColoring-3.gif" /></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1143739"></a><img width="99" height="62" src="images/InteractiveColoring-4.gif" /></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1143746"></a><img width="99" height="62" src="images/InteractiveColoring-5.gif" /></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1143753"></a><img width="99" height="62" src="images/InteractiveColoring-6.gif" /></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1143755"></a>Unlocked</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1143757"></a>Thin line</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1143764"></a><img width="99" height="62" src="images/InteractiveColoring-7.gif" /></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1143771"></a><img width="99" height="62" src="images/InteractiveColoring-8.gif" /></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1143778"></a><img width="99" height="62" src="images/InteractiveColoring-9.gif" /></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1143785"></a><img width="99" height="62" src="images/InteractiveColoring-10.gif" /></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1143787"></a>Locked</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1143789"></a>Thick line</p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1143793"></a>For information on how to change mask colors and outline styles, refer to <a href="gettingStarted.html#29394">Customizing Displayed Coloring</a>.</p>

<h3>
<a id="pgfId-1143796"></a><a id="76283"></a>Creating Colored Shapes</h3>

<p>
<a id="pgfId-1122298"></a>To add colored shapes to a design, follow the instructions in <h-hot><a actuate="user" class="URL" href="../vlehelp/chap3.html#drawingShapesColor" show="replace" xml:link="simple">Drawing Shapes with Color</a></h-hot> in <em><a actuate="user" class="URL" href="../vlehelp/vlehelpTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Layout Suite L User Guide</a></em>.</p>

<h3>
<a id="pgfId-1128529"></a><a id="33649"></a>Co<a id="mptVewColoredData"></a>ntrolling the Visibility and Selectability of Colored Data</h3>

<p>
<a id="pgfId-1128530"></a>You can control the visibility and selectability of data by layer, color, and color state in the <em>Layers</em> panel of the <a href="InteractiveColoring.html#40164">Palette Assistant</a> when <em>MPT Support</em> is enabled. </p>

<p>
<a id="pgfId-1123383"></a></p>
<div class="webflare-div-image">
<img width="668" height="295" src="images/InteractiveColoring-11.gif" /></div>

<p>
<a id="pgfId-1132212"></a>For more information, see <h-hot><a actuate="user" class="URL" href="../vlehelp/chap3.html#layersassistant" show="replace" xml:link="simple">Layers Panel</a></h-hot> in <em><a actuate="user" class="URL" href="../vlehelp/vlehelpTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Layout Suite L User Guide</a></em>.</p>
<p>
<a id="pgfId-1122495"></a>You can also show or hide color globally <a href="InteractiveColoring.html#92873">Using the Multiple Patterning Toolbar</a>, as described in <a href="InteractiveColoring.html#64714">Showing and Hiding Color</a>.</p>

<p>
<a id="pgfId-1122566"></a></p>
<div class="webflare-div-image">
<img width="668" height="257" src="images/InteractiveColoring-12.gif" /></div>
<h3>
<a id="pgfId-1122502"></a><a id="66702"></a>In<a id="mptInspectingColoredData"></a>specting Colored Data</h3>

<p>
<a id="pgfId-1122616"></a>There are several ways to inspect the color and color state of shapes:</p>
<ul><li>
<a id="pgfId-1128566"></a>The <a href="InteractiveColoring.html#24380">Show Selection Info Toolbar</a> (<em>Window</em> <em>&#8211; Toolbars &#8211; Show Selection Info</em>) shows the color and color state of preselect and selected objects.</li><li>
<a id="pgfId-1137759"></a>The <a href="InteractiveColoring.html#97377">Property Editor</a> (<em>Edit &#8211; Basic &#8211; Properties</em> [Q]) shows the color and color state of <em>selected objects</em> and <em>vias</em> in the canvas in the <em>MPT Coloring</em> box of the form.<br />
<a id="pgfId-1123701"></a><div class="webflare-div-image">
<img src="images/propEditor.gif" /></div>
<a id="pgfId-1122631"></a>For vias, the color and color state (represented by a locked or unlocked icon) for the metal and cut layers are shown.<br />
<a id="pgfId-1123744"></a><div class="webflare-div-image">
<img src="images/propEditor_via.gif" /></div></li><li>
<a id="pgfId-1123734"></a>The <a href="InteractiveColoring.html#80578">Dynamic Selection Assistant</a> (<em>Window</em> &#8211; <em>Assistants</em> &#8211; <em>Dynamic Selection</em>) shows the color and color state for <em>objects under the cursor</em> in the canvas. This is useful in densely-populated areas of the canvas.<br />
<a id="pgfId-1122666"></a><div class="webflare-div-image">
<img src="images/dynamicSelection.gif" /></div></li><li>
<a id="pgfId-1122997"></a>SKILL functions<br />
<a id="pgfId-1123039"></a>The following SKILL functions query the color and color state of hierarchical (occurrence) shapes:<br /><table class="webflareTable webflareTableIndent" id="#id1122977">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1122979">
<a id="pgfId-1122979"></a>SKILL Function</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1122981">
<a id="pgfId-1122981"></a>Description</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1122984"></a><a href="../skdfref/mpt.html#dbColorShapeQuery2">dbColorShapeQuery2</a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1122986"></a>Returns a list of all shapes in a given region with the color, the color state, and whether the color was set by hierarchical color locking.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1122989"></a><a href="../skdfref/mpt.html#dbGetColoredOccShapes">dbGetColoredOccShapes</a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1122991"></a>Returns a list of colored occurrence shapes with the color, and whether the color is locked for each shape. Only shapes that were colored using hierarchical color locking are included in the list.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1122994"></a><a href="../skdfref/mpt.html#dbGetShapeEffectiveColor">dbGetShapeEffectiveColor</a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1122996"></a>Returns the color information for an individual occurrence shape. The color information includes the color, and two Boolean values indicating whether the color is locked and whether the shape was colored by hierarchical color locking.</p>
</td>
</tr>
</tbody></table><br />
<a id="pgfId-1123013"></a>These SKILL functions can query the color for occurrence shapes:<br /><table class="webflareTable webflareTableIndent" id="#id1122998">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1123000">
<a id="pgfId-1123000"></a>SKILL Function</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1123002">
<a id="pgfId-1123002"></a>Description</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1123005"></a><a href="../skdfref/mpt.html#dbColorShapeQuery">dbColorShapeQuery</a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1123007"></a>Returns a list of all the shapes in a given region and their effective colors.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1123010"></a><a href="../skdfref/mpt.html#dbGetShapeColor">dbGetShapeColor</a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1123012"></a>Returns the assigned color of the specified shape. </p>
</td>
</tr>
</tbody></table></li></ul>





















<h3>
<a id="pgfId-1122969"></a><a id="13125"></a>Coloring Existing Shapes</h3>

<p>
<a id="pgfId-1122650"></a>There are several ways to change the color of shapes:</p>
<ul><li>
<a id="pgfId-1122709"></a>Use the <a href="InteractiveColoring.html#97377">Property Editor</a> to change the color and color state of selected objects and vias in the canvas.<br />
<a id="pgfId-1122444"></a><div class="webflare-div-image">
<img src="images/propEditor.gif" /></div></li><li>
<a id="pgfId-1123724"></a>Use the <a href="InteractiveColoring.html#72388">Multiple Patterning Toolbar</a> for the following:<ul><li>
<a id="pgfId-1123826"></a><a href="InteractiveColoring.html#54299">Color Shifting</a> shifts the color for unlocked shapes.</li><li>
<a id="pgfId-1123836"></a><a href="InteractiveColoring.html#32205">Color Locking</a> locks and unlocks the color assigned to shapes.</li><li>
<a id="pgfId-1124156"></a><a href="InteractiveColoring.html#10420">Recoloring Selected Colors</a> updates color information for changed data or the entire design.</li><li>
<a id="pgfId-1124523"></a><a href="InteractiveColoring.html#46173">Removing Color from Shapes</a> removes color by layer or for the entire design.</li></ul></li><li>
<a id="pgfId-1123791"></a>Use the multiple patterning color engine to color or recolor a design, as described in <a href="InteractiveColoring.html#10735">Using the Multiple Patterning Color Engine</a>.</li></ul>











<h3>
<a id="pgfId-1122722"></a><a id="32205"></a>Color Locking</h3>

<p>
<a id="pgfId-1133664"></a>In layout, there are two types of color locks that can be assigned to a shape:</p>
<ul><li>
<a id="pgfId-1134123"></a>The color state for a top-level shape indicates whether the color is locked or unlocked. A <code>lock</code> color state is also called a <strong>dbLock</strong>. For more information, see <a href="InteractiveColoring.html#26376">Color Attribute Locking</a>.</li><li>
<a id="pgfId-1134157"></a>A <strong>hierarchical color lock</strong> (HCL) on an occurrence shape assigns a locked color to the shape from a higher level of the hierarchy. For more information, see <a href="InteractiveColoring.html#95177">Hierarchical Color Locking</a>.</li></ul>

<p>
<a id="pgfId-1133900"></a>By default, both of these methods operate on selected shapes. You can also operate on the selected shapes and shapes that are connected to them on the same layer, as described in <a href="InteractiveColoring.html#74710">Color Locking on Connected Shapes</a>.</p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1139275"></a>
New shapes created by functions such as copy, move, and MakeCell, will not inherit the color attributes of the original shape. When shapes are moved to connect to locked shapes, locks are not propagated automatically. To change the default behavior, see <a href="InteractiveColoring.html#74710">Color Locking on Connected Shapes</a>.</div>

<p>
<a id="pgfId-1133904"></a>In addition, colors can be locked on shapes, vias, and blockages using SKILL functions, as described in <a href="mptSKILL.html#81583">Virtuoso SKILL Functions for MPT</a>.</p>
<p>
<a id="pgfId-1133848"></a>There is a special process for <a href="InteractiveColoring.html#41749">Color Locking Support for Synchronous Clones</a>.</p>

<h4>
<a id="pgfId-1111095"></a><a id="26376"></a>Color Attribute Locking</h4>

<p>
<a id="pgfId-1133726"></a>To lock the color on top-level shapes, you set the color state for the shape to <code>lock</code> using one of the following:</p>
<ul><li>
<a id="pgfId-1134005"></a>Property Editor, as described in <a actuate="user" class="URL" href="../vlehelp/leWSP.html#wsp_InteractiveColor" show="replace" xml:link="simple">Interactively Setting Color on a Selected Object</a> in <em><a actuate="user" class="URL" href="../vlehelp/vlehelpTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Layout Suite L User Guide</a></em>.</li><li>
<a id="pgfId-1134033"></a>Multiple Patterning toolbar, as described in <a href="InteractiveColoring.html#59138">Locking and Unlocking Colors</a>.</li></ul>

<p>
<a id="pgfId-1134074"></a>The outline around the shape reflects the assigned color attribute, as shown in <a href="InteractiveColoring.html#64529">Color Representations</a>. </p>

<h4>
<a id="pgfId-1111143"></a><a id="HierarchicalColorLocking"></a><a id="95177"></a>Hierarchical Color Locking</h4>

<p>
<a id="pgfId-1143043"></a>To lock the color of shapes inside an instance, you must use <strong>hierarchical color locking</strong> (HCL). The outline around locked hierarchical shapes is the same as for top-level shapes, as shown in <a href="InteractiveColoring.html#64529">Color Representations</a>. HCL is layer-based, not net-based. You can use the Dynamic Selection Assistant to view the color and color state of shapes under the cursor, as described in <a href="InteractiveColoring.html#66702">Inspecting Colored Data</a>.</p>
<p>
<a id="pgfId-1143050"></a>Hierarchical color locks are preserved when a Pcell is remastered and when Pcells are abutted. For more information, see <a href="InteractiveColoring.html#40592">Preserving Hierarchical Color Locks on Pcells</a>.</p>

<h4>
<a id="pgfId-1113750"></a><a id="74710"></a>Co<a id="mptColorLockConnectedShapes"></a>lor Locking on Connected Shapes</h4>

<p>
<a id="pgfId-1139189"></a>By default, color attribute locking and HCL operate only on selected shapes. There are two ways to propagate locks to connected shapes: </p>
<ul><li>
<a id="pgfId-1139192"></a>Use <em>Propagate Locks</em> in the Multiple Patterning toolbar, as described in <a href="InteractiveColoring.html#63049">Propagating Locks</a>.</li><li>
<a id="pgfId-1139194"></a>Set the appropriate options in the Multiple Patterning Options form to automatically propagate locks <strong>when the color engine is on</strong>:<ul><li>
<a id="pgfId-1139196"></a>The following options influence locking that is initiated from the Multiple Patterning toolbar (<em>Lock Current</em>, <em>Lock Color</em><em>x, Lock All</em>):<ul><li>
<a id="pgfId-1139197"></a><em>Propagate Locks to Connected Shapes </em>extends the color locking to unlocked shapes that are connected to the selected shapes on the same layer<em>.</em></li><li>
<a id="pgfId-1139198"></a><em>Propagate Locks to Connected Shapes</em> with <em>Override Lock on Connected Shapes</em> extends the color locking to the locked and unlocked shapes that are connected to the selected shapes on the same layer. <br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1168716"></a>The <em>Lock Current</em> option lets you select the instance and locks the current shape. All shapes inside the instance are locked. The values specified by the <a href="envars.html#20874">enableHCLCreation<code></code></a> and <a href="envars.html#79237">enableHCLCreationOnPcells<code></code></a> environment variables are followed.</div></li></ul></li><li>
<a id="pgfId-1139199"></a>This option influences locking while editing (for example, when adding, moving, or stretching a shape, or assigning a locked color using the Property Editor):<ul><li>
<a id="pgfId-1139200"></a><em>Propagate Locks During Editing</em> extends the color locking to unlocked shapes that are connected to the selected shapes on the same layer. The following figure shows the results after a color locked shape is moved to connect to another shape.<br /><ffi2-fig-frame-in-2 id="#id1142326">
<a id="pgfId-1142326"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img width="567" height="381" src="images/InteractiveColoring-18.gif" /></div></li></ul></li></ul>
<a id="pgfId-1138858"></a>For more information on setting these options, see <a href="gettingStarted.html#72017">Using the Multiple Patterning Options Form</a>. <br />
<a id="pgfId-1134858"></a>The difference between hierarchical color locking with <em>Propagating Locks to Connected Shapes</em> disabled (default) versus enabled is illustrated in the figure below.<br /><strong class="webflare-fig-line-height">Figure 4-1
<a id="pgfId-1134820"></a><a id="42818"></a>Hierarchical Color Locking Default Versus Propagating Locks</strong>
<a id="pgfId-1136300"></a><div class="webflare-div-image">
<img width="631" height="302" src="images/InteractiveColoring-19.gif" /></div></li></ul>

















<h4>
<a id="pgfId-1139061"></a><a id="41749"></a>C<a id="colorCloneSupport"></a>olor Locking Support for Synchronous Clones</h4>

<p>
<a id="pgfId-1143022"></a>To change the color state of a shape in a synchronous clone, you must <em>Edit In Place</em> the synchronous clone.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1147535"></a>You can delete all colors inside synchronous clones from the top level. It is not mandatory to <em>Edit In Place</em> the synchronous clones when deleting all colors.</div>
<p>
<a id="pgfId-1146821"></a>For more information, see <h-hot><a actuate="user" class="URL" href="../vxlhelp/chap6.html#colorSyncClone" show="replace" xml:link="simple">Coloring Synchronization Support for Synchronous Clones</a></h-hot> in <em>Virtuoso Layout Suite XL User Guide</em>.</p>

<h4>
<a id="pgfId-1143026"></a><a id="40592"></a>P<a id="HCLonPcell"></a>reserving Hierarchical Color Locks on Pcells</h4>

<p>
<a id="pgfId-1143027"></a>Hierarchical color locks operate on top-level and hierarchical (<em>occurrence</em>) shapes and are preserved when a Pcell is remastered and when Pcells are abutted. </p>

<h3>
<a id="pgfId-1143019"></a><a id="54299"></a>Co<a id="colorShifting"></a>lor Shifting</h3>

<p>
<a id="pgfId-1113798"></a>For layers with more than one mask, shapes can be assigned to a specific mask color. The mask for a shape can be manually shifted through the available masks using the Multiple Patterning toolbar, as described in <a href="InteractiveColoring.html#41565">Shifting Colors</a>.</p>

<p>
<a id="pgfId-1113878"></a></p>
<div class="webflare-div-image">
<img width="668" height="418" src="images/InteractiveColoring-20.gif" /></div>
<h4>
<a id="pgfId-1136616"></a><a id="37849"></a>S<a id="shiftingColorsOnInstances"></a>hifting Colors on Instances</h4>

<p>
<a id="pgfId-1137254"></a>Virtuoso MPT supports <em>instance</em> color shifting by layer. The following table lists the layer shift types that are available:</p>
<table class="webflareTable" id="#id1137255">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1137257">
<a id="pgfId-1137257"></a>Layer Shift Type</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1137259">
<a id="pgfId-1137259"></a>Description</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1137261"></a>noShift</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1137263"></a>Colors are not shifted on this layer</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1137265"></a>shift1Shift</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1137267"></a>(2-mask and 3-mask layers only) Shift colors by one.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1137269"></a>shift2Shift</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1137271"></a>(3-mask layers only) Shift colors by two.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1137273"></a>fixedMask1Shift</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1137275"></a>(3-mask layers only) Shapes with mask1Color are not changed; shift mask2Color to mask3Color, and mask3Color to mask2Color.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1137277"></a>fixedMask2Shift</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1137279"></a>(3-mask layers only) Shapes with mask2Color are not changed; shift mask1Color to mask3Color, and mask3Color to mask1Color.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1137281"></a>fixedMask3Shift</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1137283"></a>(3-mask layers only) Shapes with mask3Color are not changed; shift mask1Color to mask2Color, and mask2Color to mask1Color.</p>
</td>
</tr>
</tbody></table>
<p>
<a id="pgfId-1136875"></a>Gray or uncolored shapes in an instance are not affected by layer shifts on the instance. </p>
<p>
<a id="pgfId-1136647"></a>The following table shows the effective color for a shape on a three-mask layer based on its original mask color and the layer shift that is applied to the instance.</p>
<table class="webflareTable" id="#id1136648">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1136650">
<a id="pgfId-1136650"></a>Original Mask Color</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1136652">
<a id="pgfId-1136652"></a>noShift</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1136654">
<a id="pgfId-1136654"></a>shift1Shift</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1136656">
<a id="pgfId-1136656"></a>shift2Shift</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1136658">
<a id="pgfId-1136658"></a>fixedMask1
Shift</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1136660">
<a id="pgfId-1136660"></a>fixedMask2
Shift</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1136662">
<a id="pgfId-1136662"></a>fixedMask3
Shift</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136664"></a>mask1Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136666"></a>mask1Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136668"></a>mask2Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136670"></a>mask3Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136672"></a>mask1Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136674"></a>mask3Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136676"></a>mask2Color</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136678"></a>mask2Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136680"></a>mask2Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136682"></a>mask3Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136684"></a>mask1Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136686"></a>mask3Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136688"></a>mask2Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136690"></a>mask1Color</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136692"></a>mask3Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136694"></a>mask3Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136696"></a>mask1Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136698"></a>mask2Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136700"></a>mask2Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136702"></a>mask1Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136704"></a>mask3Color</p>
</td>
</tr>
</tbody></table>
<p>
<a id="pgfId-1136776"></a></p>

<div class="webflare-div-image">
<img width="668" height="163" src="images/InteractiveColoring-21.gif" /></div>

<p>
<a id="pgfId-1136777"></a>Use the SKILL functions in the following table to initialize, set, retrieve, and clear the layer shift information on a cellview:</p>
<table class="webflareTable" id="#id1136778">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1136780">
<a id="pgfId-1136780"></a>SKILL Function</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1136782">
<a id="pgfId-1136782"></a>Description</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136784"></a><h-hot><a actuate="user" class="URL" href="../skdfref/mpt.html#dbCellViewInitForLayerShifting" show="replace" xml:link="simple">dbCellViewInitForLayerShifting</a></h-hot></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136786"></a>Initializes the layer shift information for the specified cellview.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1137032"></a><h-hot><a actuate="user" class="URL" href="../skdfref/mpt.html#dbCellViewUpdateLayerShifts" show="replace" xml:link="simple">dbCellViewUpdateLayerShifts</a></h-hot></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1137034"></a>Creates or rebuilds the layer shift information cache using the layers that are in the tech bound to the specified cellview. As a result, the layer shift information on the instances in the cellview is removed.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136788"></a><h-hot><a actuate="user" class="URL" href="../skdfref/mpt.html#dbCellViewAreLayerShiftsValid" show="replace" xml:link="simple">dbCellViewAreLayerShiftsValid</a></h-hot></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136790"></a>Indicates whether the layer shift information on the instances in the specified cellview is synchronized with the layers and color information in the bound tech.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136792"></a><h-hot><a actuate="user" class="URL" href="../skdfref/mpt.html#dbCellViewClearLayerShifts" show="replace" xml:link="simple">dbCellViewClearLayerShifts</a></h-hot></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136794"></a>Clears the layer shift information from all the instances in the specified cellview.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136796"></a><h-hot><a actuate="user" class="URL" href="../skdfref/mpt.html#dbCellViewHasLayerShifts" show="replace" xml:link="simple">dbCellViewHasLayerShifts</a></h-hot></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136798"></a>Indicates whether layer shift information is present on any instance in the specified cellview.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136804"></a><h-hot><a actuate="user" class="URL" href="../skdfref/mpt.html#dbInstGetLayerShifts2" show="replace" xml:link="simple">dbInstGetLayerShifts2</a></h-hot></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136806"></a>Returns a list of shifts that are applied to the layers in the master of the specified instance. </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136808"></a><h-hot><a actuate="user" class="URL" href="../skdfref/mpt.html#dbInstHasLayerShifts" show="replace" xml:link="simple">dbInstHasLayerShifts</a></h-hot></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136810"></a>Indicates whether layer color shifts are specified on the instance.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136812"></a><h-hot><a actuate="user" class="URL" href="../skdfref/mpt.html#dbInstSetLayerShifts2" show="replace" xml:link="simple">dbInstSetLayerShifts2</a></h-hot></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136814"></a>Sets layer shifts on an instance.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136816"></a><h-hot><a actuate="user" class="URL" href="../skdfref/mpt.html#dbInstClearLayerShifts" show="replace" xml:link="simple">dbInstClearLayerShifts</a></h-hot></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1136818"></a>Removes all the layer shifting information from the specified instance.</p>
</td>
</tr>
</tbody></table>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1136819"></a>
To set the shift type for an instance, you must first initialize the layer shift information for the cellview by using <a actuate="user" class="URL" href="../skdfref/mpt.html#dbCellViewUpdateLayerShifts" show="replace" xml:link="simple">dbCellViewUpdateLayerShifts</a> or <a actuate="user" class="URL" href="../skdfref/mpt.html#dbCellViewInitForLayerShifting" show="replace" xml:link="simple">dbCellViewInitForLayerShifting</a>.</div>
<h4><em>
<a id="pgfId-1137015"></a>Example</em></h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1136820"></a>cv = geGetEditCellView()<br />dbCellviewUpdateLayerShifts( cv )<br />I2 = dbFindAnyInstByName( cv &quot;I2&quot; )<br />I3 = dbFindAnyInstByName( cv &quot;I3&quot; )<br />shiftVals = list(list(&quot;Metal2&quot; &quot;fixedMask1Shift&quot;) list(&quot;Metal3&quot; &quot;shift2Shift&quot;))<br />dbInstSetLayerShifts2( I2 shiftVals )<br />dbInstSetLayerShifts2( I3 shiftVals )</pre>

<p>
<a id="pgfId-1137167"></a>Sets the layer shift for <code>Metal2</code> to <code>fixedMask1Shift</code> and for <code>Metal3</code> to <code>shift2Shift</code> for instances <code>I2</code> and <code>I3</code> of the current edit cellview.</p>

<h3>
<a id="pgfId-1165012"></a><strong>Pre-defined Setup Driven MPT Flows</strong><a id="predefinedMPTFlow"></a></h3>

<p>
<a id="pgfId-1164991"></a>You can now easily setup the MPT engine with pre-defined MPT flows. You can use SKILL functions, <a href="../sklayoutref/mpt.html#mptGetFlowSettings">mptGetFlowSettings</a>, <a href="../sklayoutref/mpt.html#mptGetFlowNames">mptGetFlowNames</a>, <a href="../sklayoutref/mpt.html#mptSetFlow">mptSetFlow</a>,&#160;&#160;<a href="../sklayoutref/mpt.html#mptDefineFlow">mptDefineFlow</a>, <a href="../sklayoutref/mpt.html#mptCheckFlow">mptCheckFlow</a>, and <a href="../sklayoutref/mpt.html#mptReportCurrentSettings">mptReportCurrentSettings</a> to define the MPT flows.</p>

<h2>
<a id="pgfId-1121790"></a><a id="92873"></a>Us<a id="usingMPTtoolbar"></a>ing the Multiple Patterning Toolbar</h2>

<p>
<a id="pgfId-1121810"></a>To show the Multiple Patterning toolbar, do one of the following:</p>

<ul><li>
<a id="pgfId-1121820"></a>Choose <em>Window</em> &#8211; <em>Toolbars</em> &#8211; <em>Multiple Patterning</em> from the layout window menu bar.</li><li>
<a id="pgfId-1141298"></a>Access the Multiple Patterning workspace, as described in <a href="InteractiveColoring.html#95719">Using the Multiple Patterning Workspace</a>.</li></ul>


<p>
<a id="pgfId-1141391"></a>The Multiple Patterning toolbar appears in the toolbar section of the Virtuoso workspace and can be moved in the workspace like other Virtuoso toolbars. </p>

<p>
<a id="pgfId-1141444"></a></p>
<div class="webflare-div-image">
<img width="667" height="170" src="images/InteractiveColoring-22.gif" /></div>

<p>
<a id="pgfId-1128350"></a>You use the Multiple Patterning toolbar for the following functions:</p>

<p>
<a id="pgfId-1128440"></a> </p>
<table class="webflareTable" id="#id1128351">
<caption style="text-align:left;"><p>
</p><h4>Table 4-3
<a id="pgfId-1128353"></a>Multiple Patterning Toolbar Icons and Functions</h4></caption>
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128359"></a>Toolbar Icon</p>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128361"></a>Function</p>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128363"></a>For information on this function, refer to:</p>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128370"></a><img width="107" height="27" src="images/InteractiveColoring-23.gif" /></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128372"></a>Color Engine Switch</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128377"></a><a href="InteractiveColoring.html#76475">Turning the Multiple Patterning Color Engine On and Off</a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128384"></a><img width="107" height="27" src="images/InteractiveColoring-24.gif" /></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128386"></a>Show/Hide Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128391"></a><a href="InteractiveColoring.html#64714">Showing and Hiding Color</a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128396"></a><img width="107" height="31" src="images/InteractiveColoring-25.gif" /></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128398"></a>Shift Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128403"></a><a href="InteractiveColoring.html#41565">Shifting Colors</a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128408"></a><img src="images/newMPTToolbar_updateColor.gif" /></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128410"></a>ReColor</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128415"></a><a href="InteractiveColoring.html#10420">Recoloring Selected Colors</a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128420"></a><img src="images/newMPTToolbar_lock_menu.gif" /></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128422"></a>Lock Color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128427"></a><a href="InteractiveColoring.html#59138">Locking and Unlocking Colors</a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128432"></a><img src="images/newMPTToolbar_delete.gif" /></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128434"></a>Delete Colors</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1128439"></a><a href="InteractiveColoring.html#46173">Removing Color from Shapes</a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1135498"></a><img src="images/newMPTToolbar_stitch.gif" /></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1135500"></a>Stitch/Unstitch</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1135502"></a><a href="InteractiveColoring.html#65283">Using Stitch and UnStitch</a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1132718"></a><img width="107" height="27" src="images/InteractiveColoring-30.gif" /></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1132720"></a>Markers to Mask</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1132722"></a><a href="InteractiveColoring.html#95540">Converting Markers to Mask Colors</a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1157607"></a><img width="107" height="27" src="images/InteractiveColoring-31.gif" /></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1157609"></a>Checks</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1157611"></a><a href="InteractiveColoring.html#70943">Checking Colors</a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1151016"></a><img width="107" height="28" src="images/InteractiveColoring-32.gif" /></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1151018"></a>Last Operation Status and Color Query</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1151020"></a><a href="InteractiveColoring.html#60396">Viewing the Last Operation Status and Probing the Color Source</a></p>
</td>
</tr>
</tbody></table>
<h4>
<a id="pgfId-1124597"></a><a id="95719"></a>Using the Mu<a id="MPWorkspace"></a>ltiple Patterning Workspace</h4>

<p>
<a id="pgfId-1141563"></a>The Multiple Patterning workspace can be accessed by one of the following methods:</p>
<ul><li>
<a id="pgfId-1141587"></a>Choose <em>Window</em> &#8211; <em>Workspaces</em> &#8211; <em>MultiPatterning</em> from the layout window menu bar.</li><li>
<a id="pgfId-1141588"></a>Choose <em>MultiPatterning</em> from the drop-down list box in the Workspaces toolbar.<br />
<a id="pgfId-1142031"></a><div class="webflare-div-image">
<img src="images/workspaceToolbar.gif" /></div></li></ul>





<p>
<a id="pgfId-1141700"></a>The layout window is configured with the assistant panes and toolbars that are useful for MPT designs, as shown in the figure below. The Multiple Patterning toolbar is highlighted in red in this figure.</p>

<p>
<a id="pgfId-1141646"></a></p>
<div class="webflare-div-image">
<img width="670" height="609" src="images/InteractiveColoring-34.gif" /></div>

<p>
<a id="pgfId-1141681"></a>For information on workspaces and how to customize them, see <h-hot><a actuate="user" class="URL" href="../wincfg/wincfgsUsing.html#firstpage" show="replace" xml:link="simple">Working with Workspaces</a></h-hot> in <em><a actuate="user" class="URL" href="../wincfg/wincfgTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Design Environment User Guide</a></em>.</p>

<h4>
<a id="pgfId-1141554"></a>Sh<a id="ShowingMPTCommand"></a>owing the Active Multiple Patterning Toolbar Command</h4>

<p>
<a id="pgfId-1137443"></a>The status banner <em>Cmd</em> field in the bottom-right corner of the layout window shows the active command for post-select actions initiated from the Multiple Patterning toolbar. For information on these post-select actions, see <a href="InteractiveColoring.html#15659">Post-Select Locking and Unlocking</a> and <a href="InteractiveColoring.html#46173">Removing Color from Shapes</a>.</p>

<h4>
<a id="pgfId-1137432"></a><a id="76475"></a>Turning the Multiple Patterning Color Engine On and Off <img width="93" height="49" src="images/InteractiveColoring-35.gif" /></h4>

<p>
<a id="pgfId-1124598"></a>By default, the multiple patterning color engine is OFF. </p>
<p>
<a id="pgfId-1124599"></a>When the color engine is off, coloring is not changed when shapes are added, moved, or changed. For more information, see <a href="InteractiveColoring.html#10735">Using the Multiple Patterning Color Engine</a>.</p>
<p>
<a id="pgfId-1124600"></a>To change the current state of the multiple patterning color engine:</p>

<ul><li>
<a id="pgfId-1124601"></a>Click the <em>Engine Switch</em> icon.<br />
<a id="pgfId-1124619"></a><div class="webflare-div-image">
<img width="656" height="111" src="images/InteractiveColoring-36.gif" /></div></li></ul>


<h4><em>
<a id="pgfId-1132150"></a><a id="29699"></a>W<a id="colorEngineActivated"></a>hen the Color Engine Is Activated </em></h4>

<p>
<a id="pgfId-1132151"></a>When the color engine is activated and outdated coloring is detected in the current cellview, the A<a id="mptAutoUpdateColor"></a>utomatic UpdateColor dialog box appears. </p>

<p>
<a id="pgfId-1132156"></a></p>
<div class="webflare-div-image">
<img src="images/autoUpdateColor1.gif" /></div>
<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1132160"></a>
Cadence recommends that you run the color update to ensure that coloring is up to date before further edits are performed. Otherwise, you might see unusual behavior when editing a design with outdated color information. </div>

<ol><li>
<a id="pgfId-1133163"></a>(Optional) Click the <em>Always remember my choice </em>checkbox. <br />
<a id="pgfId-1133167"></a>When disabled, the <a href="envars.html#77025"><code>updateColorOnActivate</code> environment variable is set to <code>ask</code></a>, which causes this dialog box to appear each time any outdated coloring is detected in the current cellview, and the color engine is activated. When enabled, the <a href="envars.html#77025"><code>updateColorOnActivate</code> environment variable is set according to the choice in the next step.</a></li><li>
<a id="pgfId-1132161"></a>Choose one of the following:<ul><li>
<a id="pgfId-1133032"></a><em>Yes</em> <br />
<a id="pgfId-1133048"></a>Updates colors through the hierarchy. If <em>Always remember my choice</em> is enabled, the <a href="envars.html#77025"><code>updateColorOnActivate</code></a> environment variable is set to <code>always</code> causing future color updates to occur automatically when the outdated coloring is detected and the color engine is activated.</li><li>
<a id="pgfId-1133087"></a><em>No</em> <br />
<a id="pgfId-1133099"></a>Color is not updated. If <em>Always remember my choice</em> is enabled, the <a href="envars.html#77025"><code>updateColorOnActivate</code></a> environment variable is set to <code>never</code>, You will need to manually update colors, as described in <a href="InteractiveColoring.html#10420">Recoloring Selected Colors</a>. </li><li>
<a id="pgfId-1132164"></a><em>Cancel</em><br />
<a id="pgfId-1133131"></a>Color is not updated. The <a href="envars.html#77025"><code>updateColorOnActivate</code> environment variable is set to <code>ask</code></a>.</li></ul></li></ol>













<h4>
<a id="pgfId-1132138"></a><a id="64714"></a>Showing and Hiding Color <img width="93" height="37" src="images/InteractiveColoring-38.gif" /></h4>

<p>
<a id="pgfId-1128120"></a>By default, mask colors are displayed on visible layer-purposes. </p>
<p>
<a id="pgfId-1128125"></a>To change the show/hide color setting:</p>

<ul><li>
<a id="pgfId-1128126"></a>Click the <em>Show/Hide Color </em>icon.<br />
<a id="pgfId-1128144"></a><div class="webflare-div-image">
<img width="656" height="125" src="images/InteractiveColoring-39.gif" /></div></li></ul>


<h4>
<a id="pgfId-1124624"></a><a id="41565"></a>Shifting Colors <img width="54" height="49" src="images/InteractiveColoring-40.gif" /></h4>

<p>
<a id="pgfId-1124625"></a>To change the color of a shape or a set of shapes: </p>
<ol><li>
<a id="pgfId-1124626"></a>Select the shapes in the layout.</li><li>
<a id="pgfId-1124627"></a>Click the <em>Shift Colors</em> icon. <br />
<a id="pgfId-1124628"></a>Shapes on layers with more than one mask will shift through colors, as described in <a href="InteractiveColoring.html#54299">Color Shifting</a>.</li></ol>


<p>
<a id="pgfId-1137147"></a>For information on color shifting instances, see <a href="InteractiveColoring.html#37849">Shifting Colors on Instances</a>.</p>

<h4><em>
<a id="pgfId-1135201"></a>C<a id="mptColorShiftingLockedShapes"></a>olor Shifting Locked Shapes</em></h4>

<p>
<a id="pgfId-1135202"></a>By default, color shifting is not permitted on locked shapes. There are multiple patterning options for changing this behavior:</p>
<ul><li>
<a id="pgfId-1135203"></a><em>Allow Shifting of Locked Shapes </em>permits color shifting on individual locked shapes.</li><li>
<a id="pgfId-1135204"></a><em>Allow Shifting of Locked Shapes </em>with<em> Override Lock on Connected Shapes</em> and <em>Propagate Locks to Connected Shapes</em> permit color shifting on connected locked shapes on the same layer.</li></ul>

<p>
<a id="pgfId-1135207"></a>For more information on setting these options before shifting colors, see <a href="gettingStarted.html#72017">Using the Multiple Patterning Options Form</a>.</p>

<h4>
<a id="pgfId-1124637"></a><a id="10420"></a>Recolor<a id="recolorSelectedColors"></a>ing Selected Colors <img src="images/dptToolBarUpdateColor.gif" /></h4>

<p>
<a id="pgfId-1124638"></a>When you first open a design that has not been colored, or for which the color information is out of date, use one of the following methods to update color: </p>
<ul><li>
<a id="pgfId-1138035"></a><a href="InteractiveColoring.html#81590">Recoloring Selected Shapes</a><br />
<a id="pgfId-1138036"></a>Use this to recolor specific shapes (for example, shapes in a region).</li><li>
<a id="pgfId-1165759"></a><em><a href="InteractiveColoring.html#17687">Recoloring Visible Area</a><em></em></em><br />
<a id="pgfId-1165751"></a>Use this method to recolor the shapes in the visible area.</li><li>
<a id="pgfId-1124642"></a><em><a href="InteractiveColoring.html#66287">Recolor All</a><em></em></em><a id="11909"></a><br />
<a id="pgfId-1165702"></a>Use this method when you load a design that has never been colored, is out of date, or was colored using an early software version. By default, designs are not automatically colored when opened.<br /><div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1127771"></a>
For all these methods, the resulting color is dependent on the current coloring method (interactive or managed), and the environment variable settings. The color engine does not need to be ON to update color using these methods.</div></li></ul>








<p>
<a id="pgfId-1127933"></a>To determine whether the color information is out of date, see <a href="InteractiveColoring.html#95008">Checking the Color Status of a Design</a>.</p>
<p>
<a id="pgfId-1143155"></a>Coloring can be slow for large designs. You can interrupt the coloring process by pressing the <code>Ctrl</code> + <code>C</code> keys. </p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1143004"></a>
When coloring is interrupted, the data is left in an unknown state. </div>
<h4><em>
<a id="pgfId-1143127"></a><a id="95008"></a>Ch<a id="checkingDesignColorStatus"></a>ecking the Color Status of a Design</em></h4>

<p>
<a id="pgfId-1143128"></a>There are two ways to check the color status of a design:</p>
<ul><li>
<a id="pgfId-1143129"></a>Finding the outdated cellviews<br />
<a id="pgfId-1143131"></a>Use the <a actuate="user" class="URL" href="../sklayoutref/mpt.html#mptGetOutdatedDesigns" show="replace" xml:link="simple">mptGetOutdatedDesigns</a> SKILL function to get a list of the cellviews in the hierarchy for which the coloring is outdated. You can optionally include the outdated layers for each cellview in the returned list.</li><li>
<a id="pgfId-1143132"></a>Finding the up-to-date cellviews<br />
<a id="pgfId-1143134"></a>Use the <a actuate="user" class="URL" href="../sklayoutref/mpt.html#mptGetUpToDateDesigns" show="replace" xml:link="simple">mptGetUpToDateDesigns</a> SKILL function to get a list of the cellviews in the hierarchy for which the coloring is up to date.</li></ul>




<h4><em>
<a id="pgfId-1143006"></a><a id="87824"></a>Controlling the Recoloring of Read-only Cells and Pcells</em></h4>

<p>
<a id="pgfId-1143007"></a>When you are recoloring or updating color, you must consider how read-only cells and Pcells are treated. Although these can be recolored, the coloring cannot be saved.</p>
<ul><li>
<a id="pgfId-1142743"></a>If your design contains read-only cellviews:<ul><li>
<a id="pgfId-1142744"></a>If there are read-only cellviews that are not fully colored, enable the <em><a href="gettingStarted.html#29400"></a><em>Recolor readOnly cellviews</em><em></em></em> option (this is the default setting) to permit recoloring of the read-only cellviews in memory. This will determine the colorability of the design, but the coloring in memory for the read-only cellviews cannot be saved.</li><li>
<a id="pgfId-1142745"></a>If the read-only cellviews are fully colored, you can disable the <em><a href="gettingStarted.html#29400"></a><em>Recolor readOnly cellviews</em><em></em></em><em> </em>option. The existing color in the read-only cellviews will be used but those cellviews will not be recolored. This can reduce the recoloring processing time. </li><li>
<a id="pgfId-1142985"></a>If you wish to save the coloring for the read-only cellviews, you must first make them editable. You can make them editable in <a href="InteractiveColoring.html#47388">step 3</a> of the <em><a href="InteractiveColoring.html#66287">Recolor All</a><em></em></em> procedure below.</li></ul></li><li>
<a id="pgfId-1142992"></a>If your design contains Pcells:<ul><li>
<a id="pgfId-1142996"></a>By default, when the <em><a href="gettingStarted.html#31155"></a><em>Don&#8217;t color Pcells</em><em></em></em> option is disabled, Pcell shapes will be recolored in memory. This will determine the colorability of the design, but the coloring for the Pcells cannot be saved.</li><li>
<a id="pgfId-1142972"></a>If you fully color the Pcell shapes directly in the Pcell code or using CDF parameters, you should enable the <em><a href="gettingStarted.html#31155"></a><em>Don&#8217;t color Pcells</em><em></em></em> option. Existing color in the Pcells will be recognized but the Pcells will not be recolored, thus reducing the recoloring processing time.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1142930"></a>To save Pcell coloring in the design, you must either use express Pcells or apply <a href="InteractiveColoring.html#95177">Hierarchical Color Locking</a> to save the coloring at the instance level. </div></li></ul></li></ul>









<p>
<a id="pgfId-1141870"></a>For more information on setting these options, see <a href="gettingStarted.html#72017">Using the Multiple Patterning Options Form</a>.</p>

<h4><em>
<a id="pgfId-1138078"></a><a id="81590"></a>Re<a id="mptRecolorFromSelShapes"></a>coloring Selected Shapes</em></h4>

<p>
<a id="pgfId-1165631"></a>You can update the color of selected shapes by using the <em>ReColor Selected</em> option. To update the color of selected shapes, use the <a href="../sklayoutref/mpt.html#mptReColorFromShapes">mptReColorFromShapes</a> SKILL function. The color of the shapes connected to the shapes in the list will also be updated. Additionally, if the coloring method is <code>managed</code>, then the color of the shapes that are within the same-mask spacing of the shapes in the list will be updated, according to the clustering algorithm described in <a href="InteractiveColoring.html#72944">Automatic Color Shifting</a>.</p>

<h4><em>
<a id="pgfId-1165659"></a><a id="17687"></a>Re<a id="mptRecolorFromSelShapes"></a>coloring Visible Area</em></h4>

<p>
<a id="pgfId-1165653"></a>You can update the color of shapes in the visible area using the <em>ReColor Visible Area</em> option.</p>

<h4><em>
<a id="pgfId-1127784"></a><a id="66287"></a>Rec<a id="recolorAll"></a>olor All</em></h4>

<p>
<a id="pgfId-1142910"></a>By default, <em>Recolor All</em> will clear all colors, then color the entire design. This is useful for determining if the design is colorable. If your design contains read-only cellviews or Pcells, refer to <a href="InteractiveColoring.html#87824">Controlling the Recoloring of Read-only Cells and Pcells</a> to ensure that these are handled appropriately.</p>
<p>
<a id="pgfId-1142142"></a>To recolor all data:</p>
<ol><li>
<a id="pgfId-1142066"></a>Choose <em>ReColor All </em>from the <em>Recolor Selected </em>drop-down list.<br />
<a id="pgfId-1127792"></a>The R<a id="_mptGuiRecolorAllColorsForm"></a>ecolor form appears.<br />
<a id="pgfId-1166073"></a><div class="webflare-div-image">
<img width="632" height="154" src="images/InteractiveColoring-42.gif" /></div></li><li>
<a id="pgfId-1166044"></a>You can select <em>Current CellView</em>, <em>Outdated Cells</em>, or <em>all</em>. <br />
<a id="pgfId-1166177"></a>When you select the <em>Current CellView</em> option, the shapes in the current cellview are recolored.<br />
<a id="pgfId-1166281"></a>The <em>Outdated Cells</em> option, instantiates an uncolored cell in a design that is already colored. This method runs faster than the <em>all</em> option, for cases when only part of the data is out of date because valid color information is not recomputed.<br />
<a id="pgfId-1166861"></a>The <em>all</em> option recolors all the cells. <br />
<a id="pgfId-1166872"></a>You can use the <a href="envars.html#46705"><code>reColorGUIScope</code> environment variable to set and query the <em>ReColor </em></a>options.<br />
<a id="pgfId-1166390"></a><br />
<a id="pgfId-1166007"></a><div class="webflare-div-image">
<img width="631" height="542" src="images/InteractiveColoring-43.gif" /></div>
<a id="pgfId-1166041"></a><br />
<a id="pgfId-1127812"></a>When the <em>Recolor readOnly Cellviews</em> option is enabled, the default advisory shows the following:<br />
<a id="pgfId-1166507"></a><div class="webflare-div-image">
<img width="631" height="64" src="images/InteractiveColoring-44.gif" /></div></li><li>
<a id="pgfId-1133480"></a><a id="47388"></a>(Optional) If there are read-only cells in the hierarchy for which you want to save the coloring, click <em>Open All for Edit</em> to make them editable.</li><li>
<a id="pgfId-1127818"></a>Click <em>Run</em>. <br />
<a id="pgfId-1127871"></a>The design is recolored based on the coloring method setting. See <a href="CheckingAndFixing.html#16221">Checking for Multiple Patterning Violations</a> to determine if there are any colorability issues. </li></ol>
























<p>
<a id="pgfId-1127885"></a>The equivalent SKILL function is <a href="../sklayoutref/mpt.html#mptReColor">mptReColor</a>.</p>
<p>
<a id="pgfId-1148657"></a>A progress bar appears if the <em>Recolor All </em>option or <a href="../sklayoutref/mpt.html#mptReColor">mptReColor</a> option takes longer than a few seconds to complete. This provides a view of the progress of the recoloring task. It also gives you the choice to cancel the recolor command.</p>

<p>
<a id="pgfId-1149138"></a></p>
<div class="webflare-div-image">
<img width="659" height="86" src="images/InteractiveColoring-45.gif" /></div>
<h4>
<a id="pgfId-1124714"></a><a id="14684"></a><a id="59138"></a><a id="LockingandUnlockingColors"></a>Locking and Unlocking Colors <img src="images/newMPTToolbar_lock_menu.gif" /></h4>

<p>
<a id="pgfId-1124715"></a>When using the Multiple Patterning toolbar, the type of color locking performed is dependent on whether the shapes have already been selected. </p>
<p>
<a id="pgfId-1124724"></a>To lock or unlock the color on a shape or a set of shapes, or the entire design in the layout:</p>
<ol><li>
<a id="pgfId-1124725"></a>Click the <em>Lock Colors</em> icon in the Multiple Patterning toolbar. </li><li>
<a id="pgfId-1124726"></a>Choose the desired action from the drop-down list.<br />
<a id="pgfId-1130614"></a><div class="webflare-div-image">
<img width="631" height="267" src="images/InteractiveColoring-47.gif" /></div>
<a id="pgfId-1131211"></a><table class="webflareTable webflareTableIndent" id="#id1131087">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1131089">
<a id="pgfId-1131089"></a>Action</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1131091">
<a id="pgfId-1131091"></a>Shapes are preselected</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1131093">
<a id="pgfId-1131093"></a>Shapes are NOT preselected </span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1131098"></a><em>Lock Current<br />Lock Color1<br />Lock Color2<br />Lock Color3<br />Lock Color4</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1131100"></a>Locks the selected shapes to the specified color using <a href="InteractiveColoring.html#26376">Color Attribute Locking</a>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1131102"></a>Locks the selected shapes to the specified color as shapes are selected. For information, refer to <a href="InteractiveColoring.html#15659">Post-Select Locking and Unlocking</a>.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1131158"></a><em>Unlock</em> </p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1131160"></a>Sets the color state for the selected shapes to <code>unlock</code>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1131162"></a>Unlocks the color of shapes as shapes are selected. For information, refer to <a href="InteractiveColoring.html#15659">Post-Select Locking and Unlocking</a>.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">

<p>
<a id="pgfId-1131415"></a><em>Lock all </em></p>

</td>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-1131172"></a>Locks all the colored shapes at the top level or at the current editing hierarchy level (top level), as described in <a href="InteractiveColoring.html#31387">Lock and Unlock All</a>.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1131182"></a><em>Unlock all</em></p>
</td>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-1131184"></a>Unlocks all the colored shapes at the top level or at the current editing hierarchy level (top level), as described in <a href="InteractiveColoring.html#31387">Lock and Unlock All</a>.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1131194"></a><em>Propagate Locks</em></p>
</td>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-1131196"></a>Propagates locks for connected shapes, same color groups, and net-based pre-colored shapes, as described in <a href="InteractiveColoring.html#63049">Propagating Locks</a>. You can also propagate locks automatically when the color engine is on and you set certain Multiple Patterning Options, as described in <a href="InteractiveColoring.html#74710">Color Locking on Connected Shapes</a>.</p>
</td>
</tr>
</tbody></table></li></ol>







<p>
<a id="pgfId-1131079"></a>Locked shapes have a bold outline. For a description of the colors and color styles used to indicate locking, refer to <a href="InteractiveColoring.html#64529">Color Representations</a>. For more information on color locking, refer to <a href="InteractiveColoring.html#32205">Color Locking</a>. </p>

<h4><em>
<a id="pgfId-1129721"></a><a id="15659"></a>Po<a id="postSelectLockAndUnlock"></a>st-Select Locking and Unlocking </em></h4>

<p>
<a id="pgfId-1136122"></a>If no shapes were preselected, the cursor becomes a <em>probe in the layout window</em>, indicating that <em>post-select</em> mode is active. The status banner <em>Cmd</em> field at the bottom-right corner of the window shows the active command (<em>Lock Current, Lock Color1, Lock Color2, Lock Color3, Lock Color4</em>, or <em>Unlock</em>). Click shapes in the canvas to lock or unlock them.</p>
<ul><li>
<a id="pgfId-1129723"></a>Lock<br />
<a id="pgfId-1129724"></a>Shapes at the current editing hierarchy level are locked by setting their color state. Shapes at a lower level of the hierarchy are set with a hierarchical color lock at the current level except when a lock is already set at the lower level. You can also prevent hierarchical color locking on sub-level shapes by setting the <a href="envars.html#20874"><code>enableHCLCreation</code> environment variable to <code>nil</code></a>.</li><li>
<a id="pgfId-1129725"></a>Unlock<br />
<a id="pgfId-1129726"></a>Color attribute locks and hierarchical color locks at the current editing hierarchy level will be removed. If a shape is locked at a different level of the hierarchy, it will remain locked. </li></ul>



<p>
<a id="pgfId-1129727"></a>If visible and active shapes on more than one colorable layer exist under the probe, a pop-up menu appears. Choose the layer-purpose pair for the shape that you want locked or unlocked. Figure <a href="InteractiveColoring.html#26500">4-2</a> shows an example of post-select locking in the layout.</p>

<p><strong>Figure 4-2
<a id="pgfId-1124866"></a><a id="26500"></a>Example of Post-Select Locking with Shapes on Multiple Colorable Layers</strong></p>
<ffi2-fig-frame-in-2 id="#id1124884">
<a id="pgfId-1124884"></a></ffi2-fig-frame-in-2>
<div class="webflare-div-image">
<img width="668" height="285" src="images/InteractiveColoring-48.gif" /></div>
<h4><em>
<a id="pgfId-1124887"></a><a id="31387"></a>Lo<a id="lockUnlockAll"></a>ck and Unlock All</em></h4>

<p>
<a id="pgfId-1143552"></a>You can lock and unlock all colors for all layers or only specified layers.</p>
<p>
<a id="pgfId-1143553"></a>To lock or unlock all colors, </p>
<ol><li>
<a id="pgfId-1143554"></a>Choose <em>Lock All</em> or <em>Unlock All</em> in the <em>Lock Colors</em> drop-down list of the Multiple Patterning toolbar.<br />
<a id="pgfId-1143557"></a>The L<a id="_mptGuiLockingAllColorsForm"></a>ock All or U<a id="_mptGuiUnlockAllColorsForm"></a>nlock All form appears.<br />
<a id="pgfId-1143568"></a><div class="webflare-div-image">
<img width="631" height="147" src="images/InteractiveColoring-49.gif" /></div></li><li>
<a id="pgfId-1143569"></a>(Optional) To lock or unlock colors only on specific layers:<ol><li>
<a id="pgfId-1143570"></a>Disable <em>All</em>.</li><li>
<a id="pgfId-1143571"></a>Click the expansion button to show the <em>Selected Layers</em> list, if it is not visible.</li><li>
<a id="pgfId-1143572"></a>Choose the layers.</li></ol></li><li>
<a id="pgfId-1143573"></a>Click <em>OK</em> or <em>Apply</em>.</li></ol>










<p>
<a id="pgfId-1143574"></a>For <em>Lock All</em>, uncolored shapes cannot be locked. </p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1168261"></a>The <em>Lock All</em> option locks all the shapes inside the synchronous clones from the top- level. While locking, the colors are also modified so that all the synchronous clone colors are synchronized.</div>
<p>
<a id="pgfId-1143575"></a>For <em>Unlock All</em>, top-level shapes with color attribute locks (<code>dbLocks</code>) become unlocked with their current color. Hierarchical color locks (HCLs) at the current editing hierarchy level will be removed.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1168492"></a>If <em>Unlock All</em> option is selected, the values specified for the environment variables, <a href="envars.html#13469">lockAllHCLPolicy<code></code></a>, <a href="envars.html#20874">enableHCLCreation<code></code></a>, and <a href="envars.html#79237">enableHCLCreationOnPcells<code></code></a> are ignored and top-level shapes with color attribute locks become unlocked with their current color. </div>
<p>
<a id="pgfId-1143657"></a>The following example, mask1Color HCL is applied to the first and third shape of the instance, followed by <em>Unlock All</em>.</p>

<p>
<a id="pgfId-1143382"></a></p>
<div class="webflare-div-image">
<img width="668" height="565" src="images/InteractiveColoring-50.gif" /></div>

<p>
<a id="pgfId-1124922"></a>You can also use the <a href="../sklayoutref/mpt.html#mptLockAll">mptLockAll</a> and <a href="../sklayoutref/mpt.html#mptUnlockAll">mptUnlockAll</a> SKILL functions to lock and unlock colored shapes.</p>

<h4><em>
<a id="pgfId-1143624"></a><a id="63049"></a>P<a id="PropagatingLocks"></a>ropagating Locks <img src="images/DPIconPropagateLocks.gif" /></em></h4>

<p>
<a id="pgfId-1124923"></a>Lock propagation does the following:</p>
<ul><li>
<a id="pgfId-1124924"></a>Color locked shapes are identified. Then, all the shapes connected to the locked shapes on the same layer are locked to the same color throughout the hierarchy, from the current to the bottom level. </li><li>
<a id="pgfId-1124927"></a>All shapes in critical nets that were pre-colored in schematic, as described in <a href="PreColoring.html#77843">Net-Based Pre-Coloring Flow</a>, will be locked to their current colors. </li></ul>

<p>
<a id="pgfId-1124933"></a>By default, lock propagation operates on all layers, but can be limited to specific layers.</p>
<p>
<a id="pgfId-1124934"></a>To propagate locks:</p>
<ol><li>
<a id="pgfId-1124935"></a>Choose <em>Propagate Locks </em>in the <em>Lock Colors</em> drop-down list of the Multiple Patterning toolbar.<br />
<a id="pgfId-1124937"></a>The P<a id="_mptGuiPropagateLocksForm"></a>ropagate Locks form appears.<br />
<a id="pgfId-1124950"></a><div class="webflare-div-image">
<img width="631" height="147" src="images/InteractiveColoring-52.gif" /></div></li><li>
<a id="pgfId-1124951"></a>(Optional) To propagate locks only on specific layers:<ol><li>
<a id="pgfId-1124952"></a>Disable <em>All</em>.</li><li>
<a id="pgfId-1124953"></a>Click the expansion button to show the <em>Selected Layers</em> list if it is not visible.</li><li>
<a id="pgfId-1124954"></a>Choose the layers.</li></ol></li><li>
<a id="pgfId-1124955"></a>Click <em>OK</em> or <em>Apply</em>.</li></ol>










<p>
<a id="pgfId-1124957"></a>You can also use the <a href="../sklayoutref/mpt.html#mptPropagateLocks">mptPropagateLocks</a> SKILL function to propagate locks in the entire hierarchy.</p>

<div class="webflare-information-macro webflare-macro-video">
<a id="pgfId-1137670"></a>
For an overview of this feature, see <a actuate="user" class="URL" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1Od0000002JjEIEA0&amp;pageName=ArticleContent&amp;sq=005d0000001T3PSAA0_2017116193237966" show="replace" xml:link="simple">Lock Propagation</a>.</div>
<h4>
<a id="pgfId-1125241"></a><a id="46173"></a>Re<a id="mptRemovingColor"></a>moving Color from Shapes <img src="images/newMPTToolbar_removeColor.gif" /></h4>

<p>
<a id="pgfId-1125249"></a>To remove color from shapes in the layout:</p>
<ol><li>
<a id="pgfId-1125250"></a>Click the <em>Delete Colors</em> icon on the Multiple Patterning toolbar. </li><li>
<a id="pgfId-1125274"></a>Choose one of the following from the drop-down list:<br />
<a id="pgfId-1136402"></a><div class="webflare-div-image">
<img width="631" height="164" src="images/InteractiveColoring-54.gif" /></div><ul><li>
<a id="pgfId-1125275"></a><em>Delete Color</em><ul><li>
<a id="pgfId-1125276"></a>If the selected set is not empty, removes the locked and unlocked colors from the shapes in the selected set, including HCL-colored shapes in the selected instances.</li><li>
<a id="pgfId-1137337"></a>If there are no shapes selected in the layout, the remove color cursor (arrow with three dots) appears when the layout window is active. The status banner <em>Cmd</em> field at the bottom-right corner of the window shows <em>Delete Color</em>. Click shapes in the current editing hierarchy level to remove their color.<br /><ffi2-fig-frame-in-2 id="#id1125283">
<a id="pgfId-1125283"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img width="569" height="56" src="images/InteractiveColoring-55.gif" /></div><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1169069"></a>In the post-selection mode, when you select the <em>Delete Colors</em> option, if a layer is not visible in the Palette, the color of the shapes of this layer are not deleted.</div></li></ul></li><li>
<a id="pgfId-1125284"></a><em>Delete All Colors</em><br />
<a id="pgfId-1125286"></a>The D<a id="_mptGuiDeleteAllColorsForm"></a>elete All Colors form appears. <br /><ffi2-fig-frame-in-2 id="#id1125290">
<a id="pgfId-1125290"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img src="images/DeleteAllColorsForm.gif" /></div></li></ul></li></ol>


















<h4><em>
<a id="pgfId-1125292"></a><a id="14193"></a>Using the Delete All Colors Form</em></h4>

<p>
<a id="pgfId-1125293"></a>In the Delete All Colors form:</p>
<ol><li>
<a id="pgfId-1125294"></a>Choose one of the following:<ul><li>
<a id="pgfId-1125295"></a><em>Delete </em>&#8211;<em> Unlocked colors</em> <br />
<a id="pgfId-1125296"></a>Removes the unlocked colors from shapes and vias at the current editing hierarchy level, and from instance shapes that were colored using hierarchical color locking (HCL).</li><li>
<a id="pgfId-1125297"></a><em>Delete </em>&#8211;<em> Locked and unlocked colors</em><br />
<a id="pgfId-1125298"></a>Removes locked and unlocked colors from shapes and vias at the current editing hierarchy level, and from instance shapes that were colored using HCL.</li></ul></li><li>
<a id="pgfId-1125299"></a>Choose the layers for color removal.<ul><li>
<a id="pgfId-1125300"></a><em>All</em><br />
<a id="pgfId-1125301"></a>Removes color from all layers.</li><li>
<a id="pgfId-1125302"></a><em>Selected Layers</em><br />
<a id="pgfId-1125303"></a>Turn off <em>All</em> and show the list of <em>Selected Layers</em> by clicking the expand icon.<br /><ffi2-fig-frame-in-2 id="#id1125312">
<a id="pgfId-1125312"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img width="606" height="125" src="images/InteractiveColoring-57.gif" /></div>
<a id="pgfId-1125313"></a>Select the required layer from the <em>Selected Layers </em>list. Click and drag to select more than one consecutive layer. Hold down the <code>Ctrl</code> key and click to select/deselect a layer without changing the selection of the other layers. Hold down the <code>Shift</code> key and click to select all the layers between, including the last selected layer and the currently selected layer. </li></ul></li><li>
<a id="pgfId-1125314"></a>Click <em>OK</em> or <em>Apply</em>.<br />
<a id="pgfId-1125315"></a>The colors are removed from shapes as specified by the Delete All Colors form selections. </li></ol>























<h4><em>
<a id="pgfId-1125317"></a>Tu<a id="_mptGuiDesactivateEngine"></a>rning Off the Color Engine When Removing Colors</em></h4>

<p>
<a id="pgfId-1125321"></a>If the color engine is on when you are <a href="InteractiveColoring.html#46173">Removing Color from Shapes</a>, the shapes can be recolored by the color engine after the color is removed. When this condition exists, the Deactivate Color Engine dialog appears (before color is removed) that lets you turn off the color engine to prevent recoloring.</p>

<p>
<a id="pgfId-1125325"></a></p>
<div class="webflare-div-image">
<img src="images/deleteColorsEngineOff.gif" /></div>
<ul><li>
<a id="pgfId-1125326"></a>Click <em>Yes</em> to turn off the color engine and prevent recoloring, or <em>No</em> to keep the color engine on.</li></ul>
<h4>
<a id="pgfId-1135554"></a><a id="65283"></a><a id="UsingStitchandUnStitch"></a>Using Stitch and UnStitch <img src="images/newMPTToolbar_stitch.gif" /></h4>

<p>
<a id="pgfId-1135555"></a>Stitch is a method that can be used to fix color conflicts by breaking one shape into two overlapping &#8220;stitched&#8221; shapes, each assigned to a different mask. </p>
<p>
<a id="pgfId-1135556"></a>UnStitch is used to remove stitches.</p>

<p>
<a id="pgfId-1135572"></a></p>
<table class="webflareTable" id="#id1135557">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1135562"></a><img src="images/DPIconStitch.gif" /></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1135564"></a>Enable Stitch mode.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1135569"></a><img src="images/DPIconUnStitch.gif" /></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1135571"></a>Enable UnStitch mode.</p>
</td>
</tr>
</tbody></table>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1135573"></a>By default, the <em>Stitch</em> toolbar is hidden. Some processes do not support stitching. If your process supports stitching, you can show the <em>Stitch</em> toolbar by setting the <a href="envars.html#32015"><code>hideStitchingTools</code> environment variable to <code>nil</code></a>.</div>
<p>
<a id="pgfId-1135579"></a>For detailed information on how to use stitch mode, refer to <a href="CheckingAndFixing.html#78590">Using Stitch for Multiple Patterning Violations</a>.</p>

<h4>
<a id="pgfId-1132855"></a><a id="95540"></a>C<a id="ConvertingMarkerstoMaskColors"></a>onverting Markers to Mask Colors <img src="images/DPIconMarkersToMaskColors.gif" /></h4>

<p>
<a id="pgfId-1132856"></a>Some imported stream files create duplicate shapes to represent coloring, one for the shape and the other for the color marker shape. Before using the color engine, the imported data of this type must be converted using the <a href="../sklayoutref/mpt.html#mptMarkersToMaskColors">mptMarkersToMaskColors</a> SKILL function. The Multiple Patterning toolbar also provides a convenient way to perform this conversion.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1132858"></a>By default, the <em>Markers to Mask </em>icon is not visible in the Multiple Patterning toolbar. To display the icon, you must set the <a href="envars.html#12658"><code>enableMarkersToMaskColors</code></a> environment variable:</div>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1132862"></a>envSetVal(&quot;mpt&quot; &quot;enableMarkersToMaskColors&quot; &#39;boolean t)</pre>

<p>
<a id="pgfId-1132863"></a>To convert the color markers to mask colors:</p>
<ol><li>
<a id="pgfId-1132864"></a>Click the <em>Markers to Mask </em>icon.<br />
<a id="pgfId-1132866"></a>The <a id="mptMarkersToMaskColorsGUI"></a>M<a id="_mptGuiMarkersToMasksForm"></a>arkers to Mask Colors form appears.<br />
<a id="pgfId-1132870"></a><div class="webflare-div-image">
<img width="635" height="387" src="images/InteractiveColoring-63.gif" /></div></li><li>
<a id="pgfId-1132871"></a>Choose the <em>Drawing Purpose</em>.</li><li>
<a id="pgfId-1132872"></a>Choose the <em>Mask1 Marker Purpose</em>. </li><li>
<a id="pgfId-1132873"></a>Choose the <em>Mask2 Marker Purpose.</em></li><li>
<a id="pgfId-1132965"></a>Choose the <em>Mask3 Marker Purpose.</em></li><li>
<a id="pgfId-1144883"></a>Choose the <em>Mask4 Marker Purpose.</em><br />
<a id="pgfId-1144829"></a>The purposes apply only to layers with more than two mask colors.</li><li>
<a id="pgfId-1144820"></a>Select <em>Lock Shapes</em> to lock the color state on shapes.</li><li>
<a id="pgfId-1144945"></a>Select <em>Remove Marker Shapes </em>to remove the marker purpose shapes.</li><li>
<a id="pgfId-1144959"></a>Select <em>Run Recolor All</em> to recolor all cellviews.</li><li>
<a id="pgfId-1146235"></a>Select <em>Save Cellviews</em> to automatically save the modified cellviews in the hierarchy.</li><li>
<a id="pgfId-1132874"></a>Click <em>OK</em>. </li></ol>
















<p>
<a id="pgfId-1132820"></a>Shapes are merged from the drawing purpose and the marker purposes through the hierarchy so that the shapes on the drawing purpose remain with the expected mask color assignment. You can also do the conversion using <a href="../sklayoutref/mpt.html#mptMarkersToMaskColors">mptMarkersToMaskColors</a>, described in <em>Virtuoso Layout Suite SKILL Reference</em>.</p>

<h4>
<a id="pgfId-1157815"></a><a id="70943"></a>Che<a id="checkingColors"></a>cking Colors <img width="61" height="33" src="images/InteractiveColoring-64.gif" /></h4>

<p>
<a id="pgfId-1160265"></a>You can use the options in the <em>Checks</em> drop-down list to perform color checks in the design. You can use the following options to check for potential color conflicts in the design:</p>
<ul><li>
<a id="pgfId-1160595"></a><a href="InteractiveColoring.html#12918">Hierarchical Color Locking Check</a> </li><li>
<a id="pgfId-1160629"></a><a href="InteractiveColoring.html#87053">Violation Checks</a></li><li>
<a id="pgfId-1160780"></a><a href="InteractiveColoring.html#27658">Methodology Compliance</a></li></ul>



<h4>
<a id="pgfId-1124689"></a><a id="12918"></a>H<a id="hclcheck"></a>ierarchical Color Locking Check</h4>

<p>
<a id="pgfId-1124690"></a>As mentioned in <a href="InteractiveColoring.html#32205">Color Locking</a> section, there are two types of color locks that can be assigned to a shape: the color state (dbLock) and hierarchical color locks (HCL).</p>
<p>
<a id="pgfId-1134256"></a>While a shape can have only one dbLock, it could potentially have multiple HCLs applied from various levels of the hierarchy. A color conflict exists when there are multiple locked color assignments for a shape.</p>
<p>
<a id="pgfId-1134240"></a>To check for potential color conflicts related to color locking:</p>
<ol><li>
<a id="pgfId-1124691"></a>Choose <em>Hierarchical Color Locking Check</em> from the <em>Checks</em> drop-down list.<br />
<a id="pgfId-1143838"></a>The number of conflicting coloring locks is reported in the CIW. Annotation markers will appear in the canvas where the conflicts were found.</li><li>
<a id="pgfId-1143839"></a>Choose <em>Window</em> &#8211; <em>Assistants</em> &#8211; <em>Annotation Browser</em> to open the Annotation Browser and inspect the conflicts listed on the <em>Misc</em> tab in the <em>MPT</em> grouping.<br />
<a id="pgfId-1124697"></a><div class="webflare-div-image">
<img width="631" height="283" src="images/InteractiveColoring-65.gif" /></div>
<a id="pgfId-1124698"></a>Potential conflicts include:<ul><li>
<a id="pgfId-1124699"></a><em>HCL in hierarchy over HCL in hierarchy</em><br />
<a id="pgfId-1143853"></a>There are hierarchical color locks of different/same colors at different levels of the hierarchy for a shape.</li><li>
<a id="pgfId-1124701"></a><em>HCL over dbLock shape in hierarchy</em><br />
<a id="pgfId-1124702"></a>There is a hierarchical color lock on a shape that is also locked in the cell master.</li><li>
<a id="pgfId-1124703"></a><em>HCL over shape in locked via</em><br />
<a id="pgfId-1124704"></a>There is a hierarchical color lock on a shape that is part of a locked or partially locked via.</li></ul></li><li>
<a id="pgfId-1124708"></a>Resolve conflicts by <a href="InteractiveColoring.html#46173">Removing Color from Shapes</a>.</li></ol>





















<h4><em>
<a id="pgfId-1164051"></a>Resolving HCL Conflicts through the Annotation Browser</em></h4>

<p>
<a id="pgfId-1164115"></a>You can resolve HCL conflicts using Annotation Browser. You can resolve the errors one at a time or as a group.</p>
<p>
<a id="pgfId-1164119"></a>To resolve HCL conflicts:</p>
<ol><li>
<a id="pgfId-1164121"></a>Select the conflict or group of conflicts in the Annotation Browser.</li><li>
<a id="pgfId-1164122"></a>Select <em>Fix</em> from the context-sensitive menu.<br />
<a id="pgfId-1164451"></a><div class="webflare-div-image">
<img width="631" height="601" src="images/InteractiveColoring-66.gif" /></div></li></ol>





<p>
<a id="pgfId-1164124"></a>After the fix, HCLs at the current editing level are cleared and the marker is deleted. For HCLs inside the hierarchy, a message is printed in the CIW specifying the resolution of the error. However, in this case, the marker is not deleted.</p>

<div class="webflare-information-macro webflare-macro-video">
<a id="pgfId-1141985"></a>
For a video overview of this feature, see <a actuate="user" class="URL" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1Od0000007MSsTEAW&amp;pageName=ArticleContent&amp;sq=005d0000001T41wAAC_201711335315124" show="replace" xml:link="simple">Using the Hierarchical Color Locking Check</a> on Cadence Online Support.</div>
<h4>
<a id="pgfId-1159129"></a><a id="87053"></a>Violation Check<a id="violationChecks"></a>s</h4>

<p>
<a id="pgfId-1158050"></a>You can perform color checks using the <em>Checks</em> option on the Multiple Patterning toolbar.</p>
<p>
<a id="pgfId-1158511"></a>To perform color checks:</p>
<ol><li>
<a id="pgfId-1157824"></a>Click the <em>Checks </em>icon or choose <em>Violation Checks </em>from the <em>Checks</em> drop-down list.<br />
<a id="pgfId-1158693"></a><div class="webflare-div-image">
<img width="664" height="254" src="images/InteractiveColoring-67.gif" /></div></li><li>
<a id="pgfId-1159365"></a>Select the <em>Type </em>of color checks that you need to perform. You can select any or all the options: <em>Color Shorts</em>,<em> Uncolored Shapes</em>, <em>Unlocked Shapes</em>, or <em>Colorability</em>.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1168072"></a>The <em>Colorability </em>option checks if the objects in the design can be colored.</div></li><li>
<a id="pgfId-1159366"></a>Choose the <em>Scope: Current Editable Cellview</em>, <em>Current Visible Area</em>, or <em>Area</em>. The <em>Current Editable Cellview</em> checks the current cellview. This option is selected by default. The <em>Current Visible Area </em>checks area of the design that is currently visible. The <em>Area </em>checks the area that you select in the design. </li><li>
<a id="pgfId-1159367"></a>Select the <em>Layers: All </em>or <em>Selected Layers</em>.</li></ol>










<p>
<a id="pgfId-1157806"></a>The Verify Process Rules Summary is displayed in the CIW.</p>

<h4>
<a id="pgfId-1159863"></a><a id="27658"></a>Methodology Complia<a id="complianceChecker"></a>nce</h4>

<p>
<a id="pgfId-1159904"></a>The methodology compliance checker lets you verify that your design matches the desired coloring flow. It flags discrepancies between the design data and the multiple patterning flow setup. For example, it flags shapes having coloring information whereas based on the MPT setup they should have been not colorable. </p>
<p>
<a id="pgfId-1162394"></a>The methodology compliance checker checks for the following:</p>
<ul><li>
<a id="pgfId-1162464"></a>Colored LPPs: Flags any shape that is colored even if it is not part of the colored LPPs.</li><li>
<a id="pgfId-1162487"></a>Hierarchical Color Locks: The hierarchical color locks are checked using the environment variables, <a href="envars.html#20874">enableHCLCreation<code></code></a>, <a href="envars.html#79237">enableHCLCreationOnPcells<code></code></a>, <a href="envars.html#37583">globalColorShiftingPolicy<code></code></a>, and <a href="envars.html#85058">globalColorShiftingPolicyForPcells<code></code></a>.</li></ul>

<p>
<a id="pgfId-1162181"></a>A short summary of the discrepancies is reported in the CIW. A report is also created with details about each error at the current hierarchy level and inside the hierarchy. A marker is also created for each current level error. You can also view the marker in the Annotation Browser.</p>

<p>
<a id="pgfId-1162520"></a></p>
<div class="webflare-div-image">
<img width="664" height="80" src="images/InteractiveColoring-68.gif" /></div>

<p>
<a id="pgfId-1163328"></a>You can use the environment variable <a href="envars.html#11405"><h-hot>complianceCheckerReport</h-hot><code></code></a> to specify the file name and location of the methodology compliance checker report. The environment variable, <a href="envars.html#80646"><h-hot>complianceCheckerLimit</h-hot><code></code></a>, is used to specify the maximum number of violations that are reported by the methodology compliance checker.</p>

<h3>
<a id="pgfId-1151151"></a><a id="60396"></a>Viewing the Last Operation S<a id="lastOperation"></a>tatus and Probing the Color Source <img width="61" height="33" src="images/InteractiveColoring-69.gif" /></h3>

<p>
<a id="pgfId-1155213"></a>This section describes the options to view the last operation status and probing the color source.</p>

<h4>
<a id="pgfId-1155148"></a>Viewing the Last Operation Status</h4>

<p>
<a id="pgfId-1151662"></a>The color of the last operation status icon on the Multiple Patterning toolbar depicts the status of the last coloring operation. The colors depict the following:</p>
<ul><li>
<a id="pgfId-1153548"></a>Blue: Indicates the last coloring operation was successful</li><li>
<a id="pgfId-1153654"></a>Red: Indicates the last coloring operation failed</li><li>
<a id="pgfId-1153713"></a>Yellow: Indicates that some operations were interrupted</li></ul>


<p>
<a id="pgfId-1165337"></a>When you click the red status button, temporary markers are generated on the violating shapes. You can click the marker on the shape to get more information about the coloring problem, as shown in the figure below.</p>

<p>
<a id="pgfId-1165359"></a></p>
<div class="webflare-div-image">
<img width="664" height="352" src="images/InteractiveColoring-70.gif" /></div>

<p>
<a id="pgfId-1165447"></a>Once you have analyzed the problem, you can press the <code>Esc</code> key to return to the normal mode and clear the temporary markers.</p>

<h3>
<a id="pgfId-1154215"></a>Probing Color Source</h3>

<p>
<a id="pgfId-1154252"></a>You can probe the color source and mark the color information on hierarchical color locks, clusters or layer shifts. </p>

<h4>
<a id="pgfId-1151812"></a>Probe Color Source</h4>

<p>
<a id="pgfId-1152370"></a>The <em>Probe Color Source</em> option displays the color information of the probed object. To display the color information for an object, choose <em>Probe Color Source </em>from the <em>Last Operation </em>drop-down list of the Multiple Patterning toolbar.</p>
<p>
<a id="pgfId-1167240"></a>The following information is displayed:</p>
<ul><li>
<a id="pgfId-1152900"></a>Basic Shape Information</li><li>
<a id="pgfId-1152929"></a>Effective Color and Lock State</li><li>
<a id="pgfId-1152977"></a>Cluster or Layer Shift</li><li>
<a id="pgfId-1153009"></a>Original Shape</li></ul>



<p>
<a id="pgfId-1167075"></a>The original shape information displays <code>uncolored</code>, <code>colored</code>, <code>trackColored</code>, <code>netclassPrecolored</code>, <code>userLocked</code>, and <code>systemLocked</code>. The <code>userLocked</code> or <code>systemLocked</code> are displayed at the level of the HCL. For locked via layers, this information is displayed at the level of the original shape.</p>
<p>
<a id="pgfId-1167244"></a>When editing in place, the color information displayed is at the level of edit in place. An EIP suffix is appended at the level that is closest to the edit in place level. When the <a href="envars.html#53472"><h-hot>drawSurroundingOn</h-hot><code></code></a> environment variable is set to <code>t</code>, the color information is displayed at the top-level with the <code>EIP</code> suffix appended at the edit in place level. If the <a href="envars.html#53472"><h-hot>drawSurroundingOn</h-hot><code></code></a> environment variable is set to <code>nil</code>, the color information is displayed as if the probe is at the edit in place level. Also, no <code>EIP</code> suffix is appended.</p>

<h4>
<a id="pgfId-1151892"></a>Mark Co<a id="markColorInfo"></a>lor Info</h4>

<p>
<a id="pgfId-1151964"></a>You can use the <em>Mark Color Info</em> option to place markers where hierarchical color locks have been dropped and on instances with color shifts. The color shifts could be cluster or layer shifts.</p>
<p>
<a id="pgfId-1153888"></a>To mark the color information:</p>
<ol><li>
<a id="pgfId-1153889"></a>Choose <em>Mark Color Info </em>from the <em>Last Operation </em>drop-down list of the Multiple Patterning toolbar.<br />
<a id="pgfId-1153892"></a>The Mark Color Information form appears.<br />
<a id="pgfId-1154599"></a><div class="webflare-div-image">
<img width="668" height="209" src="images/InteractiveColoring-71.gif" /></div></li><li>
<a id="pgfId-1154603"></a>Select the <em>Type: HCL</em>, <em>Cluster Shift</em>, or <em>Layer Shift</em>.</li><li>
<a id="pgfId-1154604"></a>Choose the <em>Scope: Current Editable Cellview</em>, <em>Current Visible Area</em>, or <em>Area</em>. </li><li>
<a id="pgfId-1154605"></a>Select the <em>Layers: All </em>or <em>Selected Layers</em>.</li><li>
<a id="pgfId-1154818"></a>Click <em>OK</em>. </li></ol>









<p>
<a id="pgfId-1154838"></a>The Mark Color Info Summary is displayed in the CIW.</p>

<h4>
<a id="pgfId-1151914"></a>Mark Variant Cells</h4>

<p>
<a id="pgfId-1152176"></a>You can use the <em>Mark Variant Cells</em> option to place markers on instances that will generate potential variants after XStream Out. It depends on the <code>layerMap</code> file and if unlocked, colors are streamed out.</p>
<p>
<a id="pgfId-1154928"></a>To mark variant cells, choose <em>Mark Variant Cells </em>from the <em>Last Operation </em>drop-down list of the Multiple Patterning toolbar.</p>
<p>
<a id="pgfId-1154940"></a>The variant cells summary is displayed in the CIW.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1166645"></a>The via variants will be ignored in the variant cells summary report.</div>

<h4>
<a id="pgfId-1151938"></a>Mark doNotColor Cells</h4>

<p>
<a id="pgfId-1152286"></a>You can use the <em>Mark doNotColor Cells</em> option to place markers on instances with cells that have the <code>mptDontColor</code> property. These cells are skipped by the coloring engine during recoloring. The <code>mptDontColor</code> property only affects the recoloring of the master. It does ot prevent color shifting at the instance level. For example, there is an instance <code>I1</code> of <code>Cell1</code> in the top design. If you set the <code>mptDontColor</code> property on <code>I1</code> or <code>Cell1</code>, and recolor the entire hierarchy, <code>Cell1</code> master is not recolored. However, color shifting of instance <code>I1</code> is not prevented.</p>

<h2>
<a id="pgfId-1125655"></a><a id="10735"></a>Us<a id="mptColoringEngine"></a>ing the Multiple Patterning Color Engine</h2>

<p>
<a id="pgfId-1125659"></a>When the multiple patterning color engine is enabled, the coloring method specifies advanced methodologies that will be used to color shapes. Two coloring methods are available: <em>interactive</em> and <em>managed</em>. Features supported by these methods are described in the following sections:</p>
<ul><li>
<a id="pgfId-1125663"></a><a href="InteractiveColoring.html#23580">Hierarchical Coloring of Connected Shapes</a></li><li>
<a id="pgfId-1125667"></a><a href="InteractiveColoring.html#72944">Automatic Color Shifting</a></li></ul>

<p>
<a id="pgfId-1129503"></a>To use the multiple pattering color engine, follow the procedure in <a href="gettingStarted.html#37082">Enabling the Multiple Patterning Color Engine</a> for turning on the color engine and setting the coloring method.</p>

<div class="webflare-information-macro webflare-macro-video">
<a id="pgfId-1137616"></a>
For an overview of this feature, see <a actuate="user" class="URL" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1Od0000002Jj6cEAC&amp;pageName=ArticleContent&amp;sq=005d0000001T3PSAA0_2017116193246629" show="replace" xml:link="simple">Dynamic Coloring Utilities (Interactive and Managed)</a>.</div>
<h3>
<a id="pgfId-1128805"></a><a id="23580"></a>Hierarchical Coloring of Connected Shapes</h3>

<p>
<a id="pgfId-1125670"></a>When the multiple patterning color engine is enabled, connected shapes form a cluster that is managed by the color engine. Color is automatically propagated on the layer through the hierarchy when shapes are added to the cluster, either by creating new shapes or by moving or stretching existing shapes. </p>

<p>
<a id="pgfId-1125750"></a></p>
<div class="webflare-div-image">
<img width="668" height="175" src="images/InteractiveColoring-72.gif" /></div>

<p>
<a id="pgfId-1125751"></a>When color is inherited from another shape, the color can be reversed using Undo. However, movement in the reverse direction will not automatically undo the color inheritance. </p>
<p>
<a id="pgfId-1125752"></a>Color assignment is cost-based with priority given to fewer color changes when there is a conflict.</p>

<p>
<a id="pgfId-1125952"></a></p>
<div class="webflare-div-image">
<img width="668" height="483" src="images/InteractiveColoring-73.gif" /></div>
<h3>
<a id="pgfId-1125954"></a><a id="72944"></a>A<a id="mptAutomaticColorShifting"></a>utomatic Color Shifting</h3>

<p>
<a id="pgfId-1125955"></a>When the color engine is enabled and the coloring method is <strong>managed</strong>, coloring is managed actively. As shapes and instances are added, removed, changed, or moved, those objects and neighboring objects will be colored according to the clustering algorithm. Automatic color shifting is performed on shapes, instances, and vias when objects are within same-mask spacing apart. Shapes that are greater than same-mask spacing from any another shape are not color shifted. </p>
<p>
<a id="pgfId-1137905"></a>You cannot shift colors in a managed mode cluster if any of the shapes in the cluster is locked, except when <em>Allow Shifting of Locked Shapes</em> is enabled. For more information on setting this option, see <a href="gettingStarted.html#72017">Using the Multiple Patterning Options Form</a>.</p>

<p><strong>Figure 4-3
<a id="pgfId-1125956"></a>Double Patterning Cluster Coloring Example</strong></p>
<p>
<a id="pgfId-1126026"></a></p>
<div class="webflare-div-image">
<img width="668" height="143" src="images/InteractiveColoring-74.gif" /></div>

<p>
<a id="pgfId-1126027"></a>For layers supporting three masks, the color engine will assign an unresolved color shape to mask3Color.</p>

<p><strong>Figure 4-4
<a id="pgfId-1126028"></a>Multi-Patterning Cluster Coloring Example</strong></p>
<p>
<a id="pgfId-1155646"></a></p>
<div class="webflare-div-image">
<img width="668" height="143" src="images/InteractiveColoring-75.gif" /></div>
<h3>
<a id="pgfId-1155651"></a>Color Shifting for Cells</h3>

<p>
<a id="pgfId-1155652"></a>You can add the <code>colorShiftingPolicy</code> property to a cell master to override the shift types that the coloring engine can use to fix coloring conflicts. </p>

<a id="pgfId-1155900"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
colorShiftingPolicy &quot;string&quot; &quot;cluster | layer | none&quot;</pre>

<ul><li>
<a id="pgfId-1155940"></a><code>cluster</code>: Cluster references are created.</li><li>
<a id="pgfId-1155941"></a><code>layer</code>: Only layer shifts are used on the instances of the cell. Cluster references are not created.</li><li>
<a id="pgfId-1155942"></a><code>none</code>: Instances of the cell are not shifted. Cluster references are not created.</li></ul>


<p>
<a id="pgfId-1126093"></a>When the <code>colorShiftingPolicy</code> property is not set, the <a href="envars.html#37583"><h-hot>globalColorShiftingPolicy</h-hot><code></code></a> environment variable is used to control the color shift type. </p>
<p>
<a id="pgfId-1156183"></a>To create the property on a cell master, use the following command:</p>

<a id="pgfId-1156246"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
dbCreateProp(cv &quot;colorShiftingPolicy&quot; &quot;string&quot; &quot;none&quot; )</pre>

<p>
<a id="pgfId-1156186"></a>The settings are set at the session or cell level. The property overrides the global settings when the property is set.</p>
<p>
<a id="pgfId-1156327"></a>Some examples of usage of this property are listed below:</p>

<a id="pgfId-1156355"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
globalColorShiftingPolicy = &quot;none&quot;</pre>

<p>
<a id="pgfId-1156460"></a>CELL1 has the <code>colorShiftingPolicy</code> property set to <code>layer</code>.</p>
<p>
<a id="pgfId-1156357"></a>In the above example, instances of CELL1 are layer shifted.</p>

<a id="pgfId-1156359"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
globalColorShiftingPolicy = &quot;layer&quot;</pre>

<p>
<a id="pgfId-1156565"></a>CELL1 has the <code>colorShiftingPolicy</code> property set to <code>none</code>.</p>
<p>
<a id="pgfId-1156361"></a>In the above example, instances of CELL1 cannot be shifted.</p>

<h2>
<a id="pgfId-1143078"></a><a id="53380"></a><a id="Track_based_Coloring"></a>Track-Based Coloring</h2>

<p>
<a id="pgfId-1098938"></a>To use track-based coloring, you must create track patterns that assign mask colors in the layout. Shapes will be colored based on their position relative to the tracks. The Virtuoso wire editor can snap wires to tracks.</p>
<p>
<a id="pgfId-1114623"></a>There are two methods for creating colored tracks in the layout:</p>
<ul><li>
<a id="pgfId-1115013"></a>Track Patterns<br />
<a id="pgfId-1115014"></a>Track patterns specify the routing layer, direction, and offset. The spacing between tracks is fixed. The color pattern can be customized.</li><li>
<a id="pgfId-1114635"></a>Width Spacing Patterns (WSP)<br />
<a id="pgfId-1114661"></a>WSPs create a <em>correct by construction</em> non-uniform routing grid with pre-defined width and color constraints. This methodology supports the creation of a global grid and one or more regions, where the grid for each region can be different from the global grid for increased flexibility and productivity with complex designs. For information on creating grids using WSPs, see <a actuate="user" class="URL" href="../vwspuser/PatternAssistant.html#firstpage" show="replace" xml:link="simple">Using Width Spacing Patterns </a>in <em><a actuate="user" class="URL" href="../vwspuser/vwspuserTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Width Spacing Patterns User Guide</a></em>.</li></ul>



<p>
<a id="pgfId-1099642"></a>To route wires on tracks with more than one mask per layer: </p>
<ol><li>
<a id="pgfId-1101654"></a>Create colored track patterns using one of these methods:<ul><li>
<a id="pgfId-1115050"></a><a href="InteractiveColoring.html#24494">Creating Colored Tracks Using Track Patterns</a></li><li>
<a id="pgfId-1115069"></a><a href="InteractiveColoring.html#67007">Creating Colored Tracks Using Width Spacing Patterns</a></li></ul></li><li>
<a id="pgfId-1138319"></a>Turn on the multiple patterning color engine, as described in <a href="InteractiveColoring.html#76475">Turning the Multiple Patterning Color Engine On and Off</a>.</li><li>
<a id="pgfId-1138328"></a>Create wires snapped to tracks, as described in <a actuate="user" class="URL" href="../weuser/wire.html#snapToTrack" show="replace" xml:link="simple">Creating Wires Snapped to Track Patterns</a> in <em><a actuate="user" class="URL" href="../weuser/weuserTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Interactive and Assisted Routing User Guide</a></em>.<br />
<a id="pgfId-1138108"></a>The guidelines for coloring shapes are described in <a href="InteractiveColoring.html#57389">Coloring Shapes that Overlap Colored Tracks</a>.</li></ol>






<h3>
<a id="pgfId-1138512"></a><a id="57389"></a>Co<a id="mptTrackColoring"></a>loring Shapes that Overlap Colored Tracks</h3>

<p>
<a id="pgfId-1138513"></a>By default, shapes inherit the color of a track depending on the track type and position of the shape relative to the track:</p>
<ul><li>
<a id="pgfId-1138514"></a>For track patterns, the color of the track is inherited only if the centerline of the shape is aligned with the centerline of the track, as shown below.<br /><div class="webflare-div-image">
<img width="635" height="103" src="images/InteractiveColoring-76.gif" /></div></li><li>
<a id="pgfId-1138524"></a>For WSP tracks, the color of the track is inherited only if the centerline of the wire or pathSeg and its edges align with the track&#8217;s centerline and edges. For polygons and rectangles, color inheritance requires that the bounding box of the shape aligns with the track&#8217;s edges and that the minimal length for the bounding box in the x or y direction equals the width of the track.<br /><div class="webflare-div-image">
<img width="635" height="127" src="images/InteractiveColoring-77.gif" /></div></li></ul>







<p>
<a id="pgfId-1138541"></a>To change the default behavior so that all the shapes overlapping a colored track inherit the track&#8217;s color, regardless of the alignment, set the <a href="envars.html#11432"><h-hot>trackColoringOnlySnappedShapes</h-hot><code></code></a> environment variable to <code>nil</code>.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1138577"></a>envSetVal(&quot;mpt&quot; &quot;trackColoringOnlySnappedShapes&quot; &#39;boolean nil)</pre>

<p>
<a id="pgfId-1138613"></a>For WSP tracks, you can restrict the coloring inheritance to <em>active</em> colored WSP tracks by setting the <a href="envars.html#48580"><h-hot>onlyCheckActiveWSP</h-hot><code></code></a> environment variable to <code>t</code>.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1138640"></a>envSetVal(&quot;mpt&quot; &quot;onlyCheckActiveWSP&quot; &#39;boolean t)</pre>
<h3>
<a id="pgfId-1115106"></a><a id="67007"></a>Creating Colored Tracks Using Width Spacing Patterns</h3>

<p>
<a id="pgfId-1115116"></a>To set up colored tracks using width spacing patterns (WSPs):</p>
<ol><li>
<a id="pgfId-1115123"></a>Follow the instructions in <a actuate="user" class="URL" href="../vwspuser/PatternAssistant.html#prepWSP" show="replace" xml:link="simple">Preparing to Use Width Spacing Patterns</a> to set the pattern-related constructs, purposes, and display packets in the technology file, and set the display resource file.</li><li>
<a id="pgfId-1115133"></a>Use the Track Pattern Assistant to choose the WSPs for the global area and regions in the canvas. For information, see <a actuate="user" class="URL" href="../vwspuser/PatternAssistant.html#wsp_TPAssistant" show="replace" xml:link="simple">Working with the Track Pattern Assistant</a>.</li></ol>


<h3>
<a id="pgfId-1115097"></a><a id="24494"></a>Cre<a id="tracksByTrackPatterns"></a>ating Colored Tracks Using Track Patterns</h3>

<p>
<a id="pgfId-1115098"></a>For each track pattern, you must specify the routing layer, track pattern direction, starting position with respect to the origin, spacing between tracks, and the total number of tracks. You can optionally assign a name to the track pattern, and customize the color pattern.</p>
<p>
<a id="pgfId-1102975"></a>Color patterns can be specified using one of the following:</p>
<ul><li>
<a id="pgfId-1103135"></a>A mask color (<code>R</code> for mask1Color and <code>G</code> for mask2Color; uppercase and lowercase characters are accepted)</li><li>
<a id="pgfId-1103136"></a>An alternating color pattern (for example, <code>&quot;RG&quot;</code> or <code>&quot;GR&quot;</code>)</li><li>
<a id="pgfId-1103137"></a>A sequence of mask colors (for example, <code>&quot;RGR&quot;</code>)</li><li>
<a id="pgfId-1103105"></a>Repeating patterns given in compact notation &quot;(<span class="webflare-courier-new" style="white-space:pre"><em>pattern</em></span>)^<span class="webflare-courier-new" style="white-space:pre"><em>count</em></span>&quot;<br />
<a id="pgfId-1103007"></a>where <span class="webflare-courier-new" style="white-space:pre"><em>pattern</em></span> is a sequence of mask colors and <span class="webflare-courier-new" style="white-space:pre"><em>count</em></span> is an integer representing the number of times the sequence is repeated. For example, <code>&quot;(RG)^3(R)^8&quot;</code> is equivalent to <code>&quot;RGRGRGRRRRRRRR&quot;</code>.</li></ul>




<p>
<a id="pgfId-1102335"></a>To control the display of track patterns in the layout view, refer to <a href="InteractiveColoring.html#22039">Displaying Track Patterns in Layout</a>.</p>
<p>
<a id="pgfId-1099354"></a>To create colored track patterns:</p>

<ul><li>
<a id="pgfId-1099390"></a>Choose <em>Create &#8211; P&amp;R Objects &#8211; Track Patterns</em> in the layout window.<br />
<a id="pgfId-1099416"></a>Refer to <a actuate="user" class="URL" href="../vlehelp/appA.html#trackPatternEditor" show="replace" xml:link="simple">Track Pattern Editor Form</a> for information on using this form.</li></ul>


<p>
<a id="pgfId-1098984"></a>The following examples illustrate how track patterns are created:</p>
<ul><li>
<a id="pgfId-1098988"></a><a href="InteractiveColoring.html#86255">Defining a Track Pattern with Alternating Colors</a></li><li>
<a id="pgfId-1098992"></a><a href="InteractiveColoring.html#26880">Defining a Track Pattern with a Color Pattern</a></li><li>
<a id="pgfId-1098996"></a><a href="InteractiveColoring.html#17248">Defining Multiple Track Patterns for a Single Layer</a></li></ul>



<p><strong>Example 4-1
<a id="pgfId-1098998"></a><a id="86255"></a>Defining a Track Pattern with Alternating Colors</strong></p>

<p>
<a id="pgfId-1099000"></a>This example creates horizontal tracks on the <code>Metal2</code> layer, spaced 0.25 user units apart, with the first track offset 100 user units from the origin, as shown in Figure <a href="InteractiveColoring.html#57706">4-5</a>. The first track is <code>mask1Color</code>, the second is <code>mask2Color</code>, and so on, alternating colors (&quot;RG&quot;) until 6 tracks have been created. </p>

<p>
<a id="pgfId-1101035"></a></p>
<div class="webflare-div-image">
<img width="668" height="313" src="images/InteractiveColoring-78.gif" /></div>
<p><strong>Figure 4-5
<a id="pgfId-1099005"></a><a id="57706"></a>Illustration of a Track Pattern with Alternating Colors</strong></p>
<p>
<a id="pgfId-1099086"></a></p>
<div class="webflare-div-image">
<img width="668" height="227" src="images/InteractiveColoring-79.gif" /></div>
<p><strong>Example 4-2
<a id="pgfId-1099088"></a><a id="26880"></a>Defining a Track Pattern with a Color Pattern </strong></p>

<p>
<a id="pgfId-1099090"></a>This example creates vertical tracks on the <code>Metal1</code> layer, spaced 0.2 user units apart, with the first track at the origin. The tracks are assigned to color masks in this sequence: <code>mask2Color</code>, <code>mask1Color</code>, <code>mask2Color</code>. The color track pattern is repeated until 8 tracks have been created, as shown in Figure <a href="InteractiveColoring.html#34380">4-6</a>.</p>

<p>
<a id="pgfId-1101088"></a></p>
<div class="webflare-div-image">
<img src="images/trackPatternEditorM1v.gif" /></div>
<p><strong>Figure 4-6
<a id="pgfId-1102955"></a><a id="34380"></a>Illustration of a Track Pattern with a Color Pattern</strong></p>
<p>
<a id="pgfId-1099175"></a></p>
<div class="webflare-div-image">
<img width="668" height="162" src="images/InteractiveColoring-81.gif" /></div>
<p><strong>Example 4-3
<a id="pgfId-1099177"></a><a id="17248"></a>Defining Multiple Track Patterns for a Single Layer</strong></p>

<p>
<a id="pgfId-1099179"></a>This example creates horizontal and vertical tracks on the <code>Metal2</code> layer, spaced 0.1 user units apart with the first track offset 0.15 user units from the origin in both directions. The tracks are assigned to alternating color masks, starting with <code>mask1Color</code> for the horizontal tracks, and <code>mask2Color</code> for the vertical tracks. Sixteen (16) tracks are created in each direction, as shown in Figure <a href="InteractiveColoring.html#42267">4-7</a>.</p>

<p>
<a id="pgfId-1101137"></a></p>
<div class="webflare-div-image">
<img src="images/trackPatternEditorM1_multi.gif" /></div>
<p><strong>Figure 4-7
<a id="pgfId-1099183"></a><a id="42267"></a>Illustration of Multiple Track Patterns for a Single Layer</strong></p>
<p>
<a id="pgfId-1099205"></a></p>
<div class="webflare-div-image">
<img width="668" height="484" src="images/InteractiveColoring-83.gif" /></div>
<h3>
<a id="pgfId-1102351"></a><a id="22039"></a>D<a id="DisplayingTrackPatternsinLayout"></a>isplaying Track Patterns in Layout</h3>

<p>
<a id="pgfId-1102352"></a>To show or hide all the track patterns or track patterns by layer, follow the procedure in <h-hot><a actuate="user" class="URL" href="../vlehelp/chap6.html#displayTracks" show="replace" xml:link="simple">Displaying Track Patterns</a></h-hot> in <em><a actuate="user" class="URL" href="../vlehelp/vlehelpTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Layout Suite L User Guide</a></em>. All track patterns that are set visible in the Palette assistant are drawn in the active layout cellview.</p>

<h3>
<a id="pgfId-1138476"></a><a id="99415"></a>Assigning Track Patterns to Nets</h3>

<p>
<a id="pgfId-1138471"></a>To route a net on specific tracks, follow the procedures in these sections:</p>
<ul><li>
<a id="pgfId-1101485"></a><a href="InteractiveColoring.html#79333">Assigning Track Patterns to Constraint Groups</a></li><li>
<a id="pgfId-1101532"></a><a href="InteractiveColoring.html#16738">Applying Constraint Groups to Nets</a></li></ul>


<h4>
<a id="pgfId-1101505"></a><a id="79333"></a>Assigning Track Patterns to Constraint Groups</h4>

<p>
<a id="pgfId-1099775"></a>After creating the track patterns, assign them as constraints to a constraint group for track-based routing, in the same way you use spacing and width constraints to define spacing and width characteristics. </p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1101518"></a>
Only the named track patterns can be assigned to a constraint group.</div>

<p>
<a id="pgfId-1099870"></a>To assign track patterns to constraint groups:</p>

<ul><li>
<a id="pgfId-1099886"></a>Use the Process Rule Editor from the Constraint Manager to add track pattern constraints to a constraint group.<br />
<a id="pgfId-1099888"></a>Refer to <em><a actuate="user" class="URL" href="../constraints/constraintsTOC.html" show="replace" xml:link="simple">Virtuoso Unified Custom Constraints User Guide</a></em> for information on accessing the Constraint Manager, starting the Process Rule Editor, creating a constraint group, and creating a new process rule.</li></ul>



<p><strong>Example 4-4
<a id="pgfId-1100122"></a><a id="36238"></a>Assigning track patterns to a constraint group</strong></p>

<ol><li>
<a id="pgfId-1100194"></a>Follow the procedure &#8220;<em><a actuate="user" class="URL" href="../constraints/pre.html#preStart" show="replace" xml:link="simple">Starting the Process Rule Editor</a></em>&#8221; in <em><a actuate="user" class="URL" href="../constraints/constraintsTOC.html" show="replace" xml:link="simple">Virtuoso Unified Custom Constraints User Guide</a></em> to start the Process Rule Editor.</li><li>
<a id="pgfId-1099209"></a>(Optional) Create a new constraint group.</li><li>
<a id="pgfId-1100519"></a>In the Browser, click the name of the constraint group.<br />
<a id="pgfId-1100256"></a><div class="webflare-div-image">
<img src="images/pre_pick_cg.gif" /></div></li><li>
<a id="pgfId-1100249"></a>In the <em>Create Process Rule</em> field, choose <em>Track Pattern</em> from the drop-down list, then click the plus (+) button.<br />
<a id="pgfId-1100280"></a><div class="webflare-div-image">
<img src="images/pre_pick_tp.gif" /></div></li><li>
<a id="pgfId-1100166"></a>With the track pattern selected in the Browser, click the Value tab at the bottom of the form.</li><li>
<a id="pgfId-1100310"></a>Choose the <em>Layer</em> for the tracks from the drop-down list.</li><li>
<a id="pgfId-1100359"></a><a id="65425"></a>In the <em>trackPattern</em> field, specify the name of the track pattern.<br />
<a id="pgfId-1100386"></a><div class="webflare-div-image">
<img src="images/pre_tp_value.gif" /></div><div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1100657"></a>
If more than one track pattern is needed for the layer (for example, when the layer has bidirectional tracks), all the track patterns must be specified in a single track pattern constraint. To do this, separate the track pattern names using a plus (+) with no added spaces (for example, <code>M1_hor_1x+M1_ver_1x</code>).</div></li><li>
<a id="pgfId-1100646"></a>Click <em>Update.</em><br />
<a id="pgfId-1100424"></a>The Browser is updated with the layer name and track pattern.<br />
<a id="pgfId-1100434"></a><div class="webflare-div-image">
<img src="images/pre_tp_done.gif" /></div></li></ol>
























<h4>
<a id="pgfId-1100893"></a><a id="16738"></a>Applying Constraint Groups to Nets</h4>

<p>
<a id="pgfId-1101541"></a>After adding track patterns to a constraint group, you can now apply the constraint group to a net. The net will be routed on the specified tracks if you enable snapping to track patterns.</p>

<p><strong>Example 4-5
<a id="pgfId-1100894"></a>Applying a constraint group to a net</strong></p>

<ol><li>
<a id="pgfId-1100853"></a>In the Navigator assistant, select the net.<br />
<a id="pgfId-1100899"></a><div class="webflare-div-image">
<img src="images/tp_net_sel.gif" /></div></li><li>
<a id="pgfId-1100866"></a>In the Process Rule Editor <em>Apply Constraint Group</em> section, choose the constraint group with the track pattern from the drop-down list, then click the <em>Apply</em> button.<br />
<a id="pgfId-1100927"></a><div class="webflare-div-image">
<img src="images/tp_net_cg.gif" /></div>
<a id="pgfId-1100824"></a>The constraint group appears in the browser. Expand the constraint group to view the included constraints.<br />
<a id="pgfId-1100959"></a><div class="webflare-div-image">
<img src="images/tp_net_done.gif" /></div></li></ol>














<p>
<a id="pgfId-1143928"></a>The net can now be routed on the specified tracks using the Virtuoso wire editor, as described in <h-hot><a actuate="user" class="URL" href="../weuser/wire.html#snapToTrack" show="replace" xml:link="simple">Creating Wires Snapped to Track Patterns</a></h-hot> in <em><a actuate="user" class="URL" href="../weuser/weuserTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Interactive and Assisted Routing User Guide</a></em>.</p>

<h4>
<a id="pgfId-1144759"></a>Constraint Group Support to De<a id="constraintSupport"></a>fine Colored LPPs</h4>

<p>
<a id="pgfId-1143953"></a>The coloring engine uses the constraint group with <code>virtuosoMPTSetup</code> as a constraint group definition in the technology file to determine the colored layer-purpose pairs. When a valid constraint group is found in the technology file, the colored layer-purpose pairs are defined according to the definition in the constraint group.</p>
<p>
<a id="pgfId-1144515"></a>You can use the environment variable, <a href="envars.html#59127"><h-hot>mptConstraintGroup</h-hot><code></code></a>, to specify the constraint group to be used to determine colored LPPs.</p>
<p>
<a id="pgfId-1144134"></a>The <code>validLayers</code> constraint lets you restrict the colored layers. The example below shows the use of the <code>validLayers</code> constraint to limit the colored layers to one or more specific layer-purpose pairs.</p>

<p>
<a id="pgfId-1145303"></a></p>
<div class="webflare-div-image">
<img width="652" height="103" src="images/InteractiveColoring-91.gif" /></div>

<p>
<a id="pgfId-1145086"></a>In the above example:</p>
<ul><li>
<a id="pgfId-1145099"></a>M1: All purposes are colorable</li><li>
<a id="pgfId-1145070"></a>V1: All purposes are colorable</li><li>
<a id="pgfId-1145071"></a>M2: Only <code>pin</code> purpose is colorable</li></ul>


<p>
<a id="pgfId-1145417"></a>The <code>validPurposes</code> constraint lets you define the colored purposes by including or excluding a set of purposes for a layer. The example below shows the use of the <code>validPurposes</code> constraint.</p>

<p>
<a id="pgfId-1145434"></a></p>
<div class="webflare-div-image">
<img width="652" height="134" src="images/InteractiveColoring-92.gif" /></div>

<p>
<a id="pgfId-1145133"></a>In the above example:</p>
<ul><li>
<a id="pgfId-1145138"></a>M1: Only <code>pin</code> purpose is colorable</li><li>
<a id="pgfId-1145208"></a>M2: Only <code>drawing</code> purpose is colorable</li></ul>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1146077"></a>The <code>validPurposes</code> constraint only applies to layers specified in the <code>validLayers</code> constraint. It does not apply to layer-purpose pairs specified in the <code>validLayers</code> constraint. This is the reason in the above example, only the drawing <code>purpose</code> is colorable and <code>pin</code> purpose is not colorable.</div>
<p>
<a id="pgfId-1146092"></a>The <code>excludeLPPs</code> constraint lets you exclude LPPs from the colorable layer-purpose pair list derived from the combination of <code>validLayers</code> and <code>validPurposes</code> constraints.</p>

<p>
<a id="pgfId-1145770"></a></p>
<div class="webflare-div-image">
<img width="652" height="148" src="images/InteractiveColoring-93.gif" /></div>

<p>
<a id="pgfId-1145758"></a>In the above example:</p>
<ul><li>
<a id="pgfId-1145956"></a>M1: Only <code>drawing</code> purpose is colorable</li><li>
<a id="pgfId-1145948"></a>M2: No purpose is colorable</li></ul>

<p>
<a id="pgfId-1145937"></a>In case the constraint group, <code>virtuosoMPTSetup</code>, is not found in the technology file, the layers with the number of masks more than one are considered as colorable layers.</p>
<p>
<a id="pgfId-1146330"></a></p>
<p>
<a id="pgfId-1146334"></a>The coloring engine uses the default colors specified in the <code>layerDefaultColor</code> constraint in the technology file defined in the MPT constraint group. </p>

<p>
<a id="pgfId-1146699"></a></p>
<div class="webflare-div-image">
<img width="652" height="163" src="images/InteractiveColoring-94.gif" /></div>

<p>
<a id="pgfId-1146703"></a>In the above example:</p>
<ul><li>
<a id="pgfId-1146704"></a><code>mask2</code> is defined as default color for M1</li><li>
<a id="pgfId-1146705"></a><code>mask1</code> is defined as default color for M2</li></ul>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1146466"></a>The default color set to gray is implies an undefined default color.</div>

<h2>
<a id="pgfId-1143934"></a><a id="46536"></a>Mig<a id="mptMigrateAssistant"></a>rating from the Multiple Patterning Assistant</h2>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1139465"></a>The Multiple Patterning assistant was removed in the base release of ICADV12.3. </div>
<p>
<a id="pgfId-1140961"></a>You can access the Multiple Patterning assistant functions by using other Virtuoso tools and functions, as shown in the table below.</p>
<table class="webflareTable" id="#id1140962">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1140970">
<a id="pgfId-1140970"></a>Multiple Patterning Assistant Functionality</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1140972">
<a id="pgfId-1140972"></a>Alternative Method</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1140974">
<a id="pgfId-1140974"></a>For more information, refer to:</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1140976"></a>Toolbar functions, showing and hiding color</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1140978"></a>Multiple Patterning toolbar</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1140983"></a><a href="InteractiveColoring.html#92873">Using the Multiple Patterning Toolbar</a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1140985"></a>Show the color and color state of the selected shapes</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1140987"></a>Selection Info toolbar,<br />Property Editor,<br />Dynamic Selection Assistant</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1140992"></a><a href="InteractiveColoring.html#66702">Inspecting Colored Data</a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1140994"></a>Showing and hiding shapes based on their color properties</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1140996"></a>Palette Assistant with <em>MPT Support</em> enabled</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1141000"></a><a href="InteractiveColoring.html#33649">Controlling the Visibility and Selectability of Colored Data</a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1141003"></a>Working with color groups</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1141005"></a>SKILL functions</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1141010"></a><a href="mptSKILL.html#30027">Relationship Coloring</a></p>
</td>
</tr>
</tbody></table>

<h2>
<a id="pgfId-1141013"></a><a id="78497"></a>Saving and Restoring Data</h2>

<p>
<a id="pgfId-1074994"></a>Coloring information is saved with the data OpenAccess multi-patterning format and restored when the data is reloaded. </p>

<h2>
<a id="pgfId-1074999"></a><a id="49827"></a>Limitations</h2>

<p>
<a id="pgfId-1075000"></a>Virtuoso MPT is specifically targeted for interactive drawing of a layout and operates best on only a few hundred shapes or objects. Scripts that create a large number of shapes will run slowly.</p>
<p>
<a id="pgfId-1075001"></a>If pre-coloring is not used and/or colors are not locked for interactive/batch coloring, then the displayed colors do not represent mask assignments. For these cases, sign-off and mask making should be done by a batch mode geometry processing tool such as Cadence Physical Verification System. These tools can be used to address issues such as balancing the densities of the masks. </p>
<p>
<a id="pgfId-1088866"></a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="PreColoring.html" id="prev" title="Net-Based Pre-Coloring Flow">Net-Based Pre-Coloring Flow</a></em></b><b><em><a href="CheckingAndFixing.html" id="nex" title="Checking and Fixing Multiple Patterning Violations in Layout">Checking and Fixing Multiple P ...</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>