
<html><head><title>Net-Based Pre-Coloring Flow</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="komal" />
<meta name="CreateDate" content="2020-08-25" />
<meta name="CreateTime" content="1598366657" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes how to use Virtuoso Multi-Patterning Technology with advanced node designs." />
<meta name="DocTitle" content="Virtuoso Multi-Patterning Technology User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Net-Based Pre-Coloring Flow" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="vmptuser" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-08-25" />
<meta name="ModifiedTime" content="1598366657" />
<meta name="NextFile" content="InteractiveColoring.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="gettingStarted.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Multi-Patterning Technology User Guide -- Net-Based Pre-Coloring Flow" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="vmptuserICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="vmptuserTOC.html">Contents</a></li><li><a class="prev" href="gettingStarted.html" title="Getting Started">Getting Started</a></li><li style="float: right;"><a class="viewPrint" href="vmptuser.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="InteractiveColoring.html" title="Coloring in Layout">Coloring in Layout</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Multi-Patterning Technology User Guide<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>3
<a id="pgfId-1065082"></a></h1>
<h1>
<a id="pgfId-1076146"></a><hr />
<a id="77843"></a>Net-Based Pre-Coloring Flow<hr />
</h1>

<p>
<a id="pgfId-1076147"></a>This chapter describes the pre-coloring flow for identifying the critical nets in the schematic to be routed on one mask for each layer.</p>
<p>
<a id="pgfId-1078582"></a>The following sections are included:</p>
<ul><li>
<a id="pgfId-1078593"></a><a href="PreColoring.html#53424">Overview</a></li><li>
<a id="pgfId-1078607"></a><a href="PreColoring.html#75051">Requirements</a></li><li>
<a id="pgfId-1078636"></a><a href="PreColoring.html#73158">Identifying the Critical Nets</a></li><li>
<a id="pgfId-1078647"></a><a href="PreColoring.html#70249">Assigning the Pre-Coloring Constraints</a></li><li>
<a id="pgfId-1078658"></a><a href="PreColoring.html#21262">Viewing Pre-Colored Nets in Layout</a></li><li>
<a id="pgfId-1078680"></a><a href="PreColoring.html#44896">Streaming Out Pre-Colored Nets</a></li></ul>






<h2>
<a id="pgfId-1077511"></a><a id="53424"></a>Overview</h2>

<ul><li>
<a id="pgfId-1077528"></a>In the schematic view, critical nets are identified and placed in a <em>net class</em>. </li><li>
<a id="pgfId-1080687"></a>Pre-coloring and spacing constraints are assigned to a reflexive constraint group (Within Group) for the net class.</li><li>
<a id="pgfId-1080688"></a>The pre-coloring and spacing constraints from the schematic for the net class must be propagated to the layout to ensure that critical nets use the constraint settings for coloring in layout.</li><li>
<a id="pgfId-1080689"></a>During stream out, shapes for the pre-colored nets are locked to their current color, based on the pre-coloring and spacing constraints. </li></ul>



<p>
<a id="pgfId-1081169"></a>The pre-coloring flow steps are described in the following sections:</p>
<ul><li>
<a id="pgfId-1081179"></a><a href="PreColoring.html#73158">Identifying the Critical Nets</a></li><li>
<a id="pgfId-1081196"></a><a href="PreColoring.html#70249">Assigning the Pre-Coloring Constraints</a></li><li>
<a id="pgfId-1081210"></a><a href="PreColoring.html#21262">Viewing Pre-Colored Nets in Layout</a></li><li>
<a id="pgfId-1081224"></a><a href="PreColoring.html#44896">Streaming Out Pre-Colored Nets</a></li></ul>




<div class="webflare-information-macro webflare-macro-video">
<a id="pgfId-1082079"></a>
For a video overview of this feature, see <a actuate="user" class="URL" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1Od000000058sTEAQ&amp;pageName=ArticleContent&amp;sq=005d0000001T41wAAC_20171134243029" show="replace" xml:link="simple">Using the Net-Based Pre-Coloring Flow</a> on Cadence Online Support.</div>
<h2>
<a id="pgfId-1077588"></a><a id="75051"></a>Requirements</h2>

<p>
<a id="pgfId-1077617"></a>There must at least two masks set for a routing layer in the technology file. For more information, refer to <a href="gettingStarted.html#28821">Specifying the Number of Masks Per Layer</a>.</p>

<h2>
<a id="pgfId-1080736"></a><a id="73158"></a>Identifying the Critical Nets</h2>

<p>
<a id="pgfId-1077633"></a>In the schematic view,</p>
<ol><li>
<a id="pgfId-1077640"></a>Select one or more nets.</li><li>
<a id="pgfId-1077650"></a>Open the Constraint Manager assistant by choosing <em>Window &#8211; Assistants &#8211; Constraint Manager.</em></li><li>
<a id="pgfId-1077657"></a>In the <em>Constraint Creation</em> pull-down menu of the Constraint Manager toolbar, choose <em>Routing &#8211; Net Class</em>.<br />
<a id="pgfId-1079443"></a>A new net class containing the selected nets appears in the constraint view.</li></ol>




<h2>
<a id="pgfId-1077675"></a><a id="70249"></a>As<a id="sameMaskPreColoring"></a>signing the Pre-Coloring Constraints</h2>

<p>
<a id="pgfId-1079719"></a>In the Constraint Manager constraint view, set the following in the <em>Within Group</em> for the net class that contains the critical nets:</p>
<ul><li>
<a id="pgfId-1079958"></a>Spacing constraints and/or pre-coloring spacing constraint groups </li><li>
<a id="pgfId-1079959"></a><em>Same Mask</em> pre-coloring constraint <code>true</code> specifies that all the shapes for the nets in the net class must be on the same mask for each routing layer.</li><li>
<a id="pgfId-1079960"></a>(optional) <em>Mask Name</em> ensures that shapes will be on the specified color mask for each routing layer for the nets in the net class.</li></ul>


<p>
<a id="pgfId-1079930"></a>For details, see <h-hot><a actuate="user" class="URL" href="../constraints/appA.html#wsp_colorMaskCritical" show="replace" xml:link="simple">Specifying the Color Mask for Critical Nets in Schematic</a></h-hot> in <em><a actuate="user" class="URL" href="../constraints/constraintsTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Unified Custom Constraint User Guide</a></em>.</p>

<h2>
<a id="pgfId-1077951"></a><a id="21262"></a>Viewing Pre-Colored Nets in Layout</h2>
<h3>
<a id="pgfId-1080489"></a>Updating Layout Constraints</h3>

<p>
<a id="pgfId-1080843"></a>To update constraints in the layout to match those set in the schematic, do one of the following in the layout view:</p>
<ul><li>
<a id="pgfId-1080491"></a>Choose<em> Connectivity &#8211; Update &#8211; Layout Constraints</em> on the menu bar.</li><li>
<a id="pgfId-1080860"></a>Click <em>Update Layout Constraints</em> on the Constraint Manager toolbar.<br /><div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1080492"></a>
The layout constraints must be updated whenever the schematic <em>Same Mask</em> or <em>Mask Name</em> setting is changed in the Constraint Manager GUI and when the related constraints are changed using SKILL. </div></li></ul>




<p>
<a id="pgfId-1077965"></a>Tools, such as the Virtuoso color engine and router, will honor the <em>Same Mask</em> pre-coloring and spacing constraints for the special net class.</p>

<h3>
<a id="pgfId-1080578"></a>Same Ma<a id="mptSameMaskPrecoloring"></a>sk Pre-Coloring</h3>

<p>
<a id="pgfId-1080579"></a>When the <em>Same Mask</em> pre-coloring constraint is <code>true</code> and the <em>Mask Name</em> pre-coloring constraint is <code>any</code> for a net class, all the shapes on the same routing layer for the nets in the net class are assigned to the same color mask. If the <code>propagateAnySameMaskState</code><a id="propagateAnySameMaskState"></a> environment variable is set to <code>t</code>, then all the shapes on the same routing layer for the nets in the net class are locked when one shape is locked. By default, locks are not propagated. Figure <a href="PreColoring.html#34733">3-1</a> shows examples of net classes consisting of one and two nets with <em>Same Mask</em> t<code>rue</code>. All shapes on Metal2 appear on the same color mask for all the nets of the net class. </p>
<p>
<a id="pgfId-1079648"></a>When the <em>Same Mask</em> pre-coloring constraint is <code>true</code> and the <em>Mask Name</em> pre-coloring constraint is other than <code>any</code>, all the shapes on the same routing layer for the nets in the special net class are assigned to the specified <em>Mask Name</em> color and the color state is <em>locked</em>.</p>

<p><strong>Figure 3-1
<a id="pgfId-1078013"></a><a id="34733"></a>Same Mask Pre-Coloring Examples</strong></p>
<p>
<a id="pgfId-1078290"></a></p>
<div class="webflare-div-image">
<img width="668" height="380" src="images/PreColoring-4.gif" /></div>
<h2>
<a id="pgfId-1078004"></a><a id="44896"></a>Streaming Out Pre-Colored Nets</h2>

<p>
<a id="pgfId-1080551"></a>During stream out, shapes for the pre-colored nets are locked to their current color, based on the spacing constraints and the pre-coloring method. </p>
<p>
<a id="pgfId-1079264"></a>To stream out pre-colored nets, follow the procedure in <a href="DataIO.html#46411">Exporting Stream Files with Coloring</a>.</p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="gettingStarted.html" id="prev" title="Getting Started">Getting Started</a></em></b><b><em><a href="InteractiveColoring.html" id="nex" title="Coloring in Layout">Coloring in Layout</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>