
<html><head><title>Parameterized Cell Functions</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="TopicTags" content="TRUE" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="sumehta" />
<meta name="CreateDate" content="2020-08-19" />
<meta name="CreateTime" content="1597904004" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes SKILL functions used to create parameterized cells." />
<meta name="DocTitle" content="Virtuoso Parameterized Cell SKILL Reference" />
<meta name="DocType" content="SKILL Reference" />
<meta name="FileTitle" content="Parameterized Cell Functions" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="skpcellref" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-08-19" />
<meta name="ModifiedTime" content="1597904004" />
<meta name="NextFile" content="graphicalFunctions.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="preface.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Parameterized Cell SKILL Reference -- Parameterized Cell Functions" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="skpcellrefICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="skpcellrefTOC.html">Contents</a></li><li><a class="prev" href="preface.html" title="Preface">Preface</a></li><li style="float: right;"><a class="viewPrint" href="skpcellref.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="graphicalFunctions.html" title="Graphical Parameterized Cell Functions">Graphical Parameterized Cell F ...</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Parameterized Cell SKILL Reference<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>1
<a name="pgfId-962694"></a></h1>
<h1>
<a name="pgfId-962695"></a><hr />
Parameterized Cell Functions<hr />
</h1>

<p>
<a name="pgfId-948225"></a>This chapter provides information about creating parameterized cells (Pcells) using Cadence<sup>&#174;</sup> SKILL language instead of using the graphical user interface. It includes safety rules for creating SKILL Pcells, information about Pcell master cells and submaster cells, and descriptions of supported <code>pc</code> functions.</p>
<p>
<a name="pgfId-967242"></a>Most of the supported <code>pc</code> SKILL functions listed in this chapter correspond to the commands available only through the graphical user interface, and they can only be used to create Pcells for the graphical Pcell environment. However, there are four <code>pc</code> Pcell functions that you can use within the body of SKILL Pcell code:</p>
<ul><li>
<a name="pgfId-967246"></a><code><a href="skillPcellFunctions.html#18726">pcExprToString</a><code></code></code></li><li>
<a name="pgfId-967250"></a><code><a href="graphicalFunctions.html#87522">pcFix</a><code></code></code></li><li>
<a name="pgfId-967254"></a><code><a href="graphicalFunctions.html#34474">pcRound</a><code></code></code></li><li>
<a name="pgfId-967258"></a><code><a href="skillPcellFunctions.html#11121">pcTechFile</a><code></code></code></li></ul>



<p>
<a name="pgfId-967268"></a>To read more about pc functions that you can use within Pcell code, see <a href="skillPcellFunctions.html#41194">Recommended, Supported SKILL Functions for Pcells</a>. For a description of the four <code>pc</code> Pcell functions listed above, see <a href="skillPcellFunctions.html#41832">pc Functions for SKILL Pcell Code</a>, later in this chapter.</p>
<div class="webflare-information-macro webflare-macro-note">
<a name="pgfId-951107"></a>We recommend using Virtuoso<sup>&#174;</sup> relative object design (ROD) functions in your Pcell code. ROD is a high-level language for defining layout connectivity, geometries, and the relationships between them. For information about ROD, see the <em><a actuate="user" class="URL" href="../roduser/roduserTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Relative Object Design User Guide</a></em>.</div>
<p>
<a name="pgfId-954676"></a>This section contains the following information:</p>
<p>
<a name="pgfId-956293"></a><h-hot><a href="skillPcellFunctions.html#36379"></a><xrefstd>Safety Rules for Creating SKILL Pcells<h-hot /></xrefstd></h-hot></p>
<p>
<a name="pgfId-956297"></a><h-hot><a href="skillPcellFunctions.html#14023"></a><xrefstd>Calling SKILL Procedures from within Pcells<h-hot /></xrefstd></h-hot></p>
<p>
<a name="pgfId-966591"></a><a href="skillPcellFunctions.html#44908">Using Macros in Pcell SKILL Code</a></p>
<p>
<a name="pgfId-966361"></a><a href="skillPcellFunctions.html#90417">Physical Limits for Functions</a></p>
<p>
<a name="pgfId-956301"></a><h-hot><a href="skillPcellFunctions.html#41194"></a><xrefstd>Recommended, Supported SKILL Functions for Pcells<h-hot /></xrefstd></h-hot></p>
<p>
<a name="pgfId-956313"></a><a href="skillPcellFunctions.html#12837">About Pcell Super and Submaster Cells</a></p>
<p>
<a name="pgfId-956321"></a><a href="skillPcellFunctions.html#41832">pc Functions for SKILL Pcell Code</a></p>

<h2>
<a name="pgfId-956674"></a><a name="36379"></a>Safety Rules for <a name="marker-956671"></a>Creating <a name="marker-956672"></a>SKILL <a name="safetyrules"></a>Pcells<a name="safetyRules"></a></h2>

<p>
<a name="pgfId-956675"></a>This section provides important rules for creating SKILL Pcells, including which functions are safe to use and what to avoid.</p>

<div class="webflare-information-macro webflare-macro-warning">
<a name="pgfId-951809"></a>
If you use <a name="marker-954614"></a>SKILL functions<a name="marker-954615"></a> that are unsupported or not intended for use in Pcells, your Pcell code will be liable to fail when you try to translate your design to a format for use with a non-Virtuoso Cadence application or third-party application.</div>

<p>
<a name="pgfId-952192"></a>The purpose of creating a Pcell is to <em>automate the creation of data</em>. Pcells should be designed as standalone entities, independent of the environment in which they are created and independent of the variety of environments in which you or someone else might want to use them. An environment can react to a Pcell, but Pcell code should not react to, interact with, or be dependent on an environment.</p>
<p>
<a name="pgfId-954458"></a>Although it is possible to create Pcells that depend on something in your current or local environment, and that use either unsupported or unrecommended functions, your Pcell code is likely to fail when you try to translate it for us in a different environment. And although it is possible to <a name="marker-956022"></a>load, read, and <a name="marker-956025"></a>write to files in the UNIX file system from within a Pcell, do not do so. You cannot control the file permission settings in other locations, so reading or writing from a Pcell can cause the Pcell to fail in other directories, other environments, and during evaluation by translators.</p>
<p>
<a name="pgfId-954513"></a>Functions that are not supported for use by customers within SKILL Pcells usually belong to specific applications (tools); they are unknown to other environments, to other tools, and to data translators. For example, if you create a Pcell in the <code>icfb</code> environment and include place-and-route functions, the Pcell will fail in the layout environment. Also, application-specific functions that are not supported for customer use can disappear or change without notice.</p>
<p>
<a name="pgfId-952313"></a>Create Pcells using only the recommended, supported functions. You can identify them by their prefixes. However, you can also use all of the basic SKILL language functions defined in the <em><a actuate="user" class="URL" href="../sklangref/sklangrefTOC.html#firstpage" show="replace" xml:link="simple">Cadence SKILL Language Reference</a></em>; these functions do not have prefixes. To use only recommended, supported, documented functions, follow the rules in this section.</p>

  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Calling SKILL Procedures from within Pcells

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-955952"></a><a name="14023"></a>Calling SKILL<a name="marker-956041"></a> Procedures from within Pcells</h3>

<p>
<a name="pgfId-955953"></a>You can call your own SKILL procedures from within Pcells. However, the code in procedures called by Pcells must follow all of the safety rules described in this section. The safety rules apply to all code that is evaluated when the system evaluates a Pcell, and that includes SKILL procedures called by the Pcell.</p>
<p>
<a name="pgfId-955954"></a>Called procedures are not compiled with the Pcell, so you must make sure they are loaded before the system evaluates the Pcell. You can do this by <a name="marker-956042"></a>attaching the code files to your library; then the system automatically loads the procedures the first time it accesses the library.</p>
<p>
<a name="pgfId-969632"></a>For information about how to attach code files to a library, see &#8220;<h-hot><a actuate="user" class="URL" href="../pcellref/howtopackage.html#firstpage" show="replace" xml:link="simple">How to Package a Pcell</a></h-hot>&#8221; in the <em>Virtuoso Parameterized Cell Reference</em>.</p>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Using Macros in Pcell SKILL Code

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-966597"></a><a name="44908"></a>Using Macros<a name="marker-966594"></a> in Pcell <a name="marker-966595"></a>SKILL <a name="marker-966596"></a>Code</h3>

<p>
<a name="pgfId-966615"></a>Macros in Pcells are only expanded one level. You can include macros that do not reference or contain other macros (are not nested) in your Pcell SKILL code, and they will be expanded successfully.</p>
<p>
<a name="pgfId-966616"></a>To include a nested macro in a Pcell, it is recommended that you use an explicit function call in the Pcell code section of the <code>pcDefinePCell</code> function, and make sure that the function is defined and available (loaded) prior to any evaluation of the Pcell. This is usually done by including the function in your <code>libInit.il</code> file. If you do not use this method for nested macros, the nested code is treated as an undefined function, causing the Pcell evaluation to fail.</p>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Physical Limits for Functions

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-966347"></a><a name="90417"></a>Physical Limits for <a name="marker-966346"></a>Functions</h3>

<p>
<a name="pgfId-966348"></a>You can avoid creating a Pcell that is too large to be processed or displayed by not exceeding the physical limitations for SKILL functions. The following section is copied from the <em><a actuate="user" class="URL" href="../sklanguser/chap3.html#firstpage" show="replace" xml:link="simple">Cadence SKILL Language User Guide, Chapter 3</a></em>, &#8220;Creating Functions in SKILL&#8221;:</p>
<p>
<a name="pgfId-966350"></a>The following physical limitations exist for functions:</p>
<ul><li>
<a name="pgfId-974151"></a>Total number of <em>required</em> arguments is less than 65536</li><li>
<a name="pgfId-974152"></a>Total number of <em>keyword/optional</em> arguments is less than 255</li><li>
<a name="pgfId-974153"></a>Total number of local variables in a <code>let</code> is less than 65536</li><li>
<a name="pgfId-966354"></a>Total number of local variables in a let must be less than 65536</li><li>
<a name="pgfId-967550"></a>Max size of code vector is less than 1GB</li></ul>




<p>
<a name="pgfId-974188"></a>By default, code vectors are limited to functions that can compile less than 32KB words. This translates roughly into a limit of 20000 lines of SKILL code per function. The maximum number of arguments limit of 32KB is mostly applicable in the case when functions are defined to take an <span class="webflare-courier-new" style="white-space:pre"><em>@rest</em></span> argument or in the case of <span class="webflare-courier-new" style="white-space:pre"><em>apply</em></span> called on an argument list longer than 32KB elements.</p>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Recommended, Supported SKILL Functions for Pcells

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-952136"></a><a name="41194"></a>Recommended, <a name="marker-954616"></a>Supported <a name="marker-954624"></a>SKILL Functions for Pcells<a name="supportedPcellFunctions"></a></h3>

<p>
<a name="pgfId-951286"></a>When you create SKILL routines within Pcells, use only the following functions:</p>
<ul><li>
<a name="pgfId-952942"></a>The SKILL functions documented in the <em><a actuate="user" class="URL" href="../sklangref/sklangrefTOC.html#firstpage" show="replace" xml:link="simple">Cadence SKILL Language Reference</a></em>; for example, <code>car</code>, <code>if</code>, <code>foreach</code>, <code>sprintf</code>, <code>while</code>.</li><li>
<a name="pgfId-958168"></a>SKILL functions from the following families:<br />
<a name="pgfId-958169"></a><code>db      dd      cdf
rod     tech    abe
cst     tx
</code></li><li>
<a name="pgfId-952921"></a>The following four <code>pc</code> SKILL functions, which are documented in this chapter: <br />
<a name="pgfId-952922"></a><code><a href="skillPcellFunctions.html#18726">pcExprToString</a><code></code>             <a href="graphicalFunctions.html#87522">pcFix</a><code></code></code><br />
<a name="pgfId-952957"></a><code><a href="graphicalFunctions.html#34474">pcRound</a><code></code>                    <a href="skillPcellFunctions.html#11121">pcTechFile</a><code></code></code><br />
<a name="pgfId-951579"></a>You can use only these four <code>pc</code> SKILL functions because<ul><li>
<a name="pgfId-952662"></a>Most supported <code>pc</code> functions correspond to the graphical user interface commands. You can use them to create Pcells in the graphical Pcell environment, but you cannot use them in the body of SKILL Pcell code.</li><li>
<a name="pgfId-952663"></a>Both the Pcell graphical user interface and the Pcell compiler are coded using <code>pc</code> SKILL functions. You cannot use the graphical user interface or compiler functions at all.</li></ul><br />
<a name="pgfId-953026"></a>For a description of the four <code>pc</code> SKILL functions you can use in the body of Pcell code, see <a href="skillPcellFunctions.html#41832">&#8220;pc Functions for SKILL Pcell Code&#8221;</a>.</li></ul>










<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Finding Supported SKILL Functions

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-953032"></a><a name="42738"></a>Finding <a name="marker-954704"></a>Supported<a name="marker-954627"></a> SKILL <a name="marker-954626"></a>Functions<a name="findSupportedFunctions"></a></h3>

<p>
<a name="pgfId-953033"></a>You can use either the <code>listFunctions</code> command or the Cadence Finder quick reference tool to list supported functions. But remember, you cannot use most supported functions within your Pcell code.</p>
<div class="webflare-information-macro webflare-macro-note">
<a name="pgfId-952715"></a>In releases prior to 4.4.3, the <code>listFunctions</code> command displayed a list of all SKILL functions. Starting with release 4.4.3, the <code>listFunctions</code> command displays only <a name="marker-954692"></a>public SKILL functions. <em>Public SKILL functions</em><a name="marker-952685"></a><a name="marker-952687"></a> are supported by Cadence for use by customers. If you are using a software release prior to 4.4.3 and use the <code>listFunctions</code> command to display Pcell functions, the list returned is misleading because it includes <code>pc</code> functions used to code the graphical user interface and compiler.</div>
<p>
<a name="pgfId-949521"></a>You can use the Finder tool to quickly check which SKILL functions are documented and supported for the <code>db</code>, <code>dd</code>, <code>cdf</code>, <code>rod</code>, and <code>tech</code> SKILL families. </p>

<h4>
<a name="pgfId-953023"></a>Using the Finder Tool<a name="marker-954628"></a></h4>

<p>
<a name="pgfId-953024"></a>To use the Finder tool, follow the steps below.</p>
<ol><li>
<a name="pgfId-949474"></a>Start the Finder by doing one of the following:<ul><li>
<a name="pgfId-949470"></a>From within the Cadence Design Framework II product (DFII), choose <em>Tools &#8211; SKILL Development </em>and click <em>Finder</em>.</li><li>
<a name="pgfId-949471"></a>In a UNIX window, type <code>cdsFinder</code>.</li></ul></li><li>
<a name="pgfId-949478"></a>To display the supported SKILL functions,<ul><li>
<a name="pgfId-949479"></a>For <em>Searching</em>, select <em>All Available Finder Data</em>. </li><li>
<a name="pgfId-949480"></a>For <em>Search String</em>, click <em>at beginning</em>.</li><li>
<a name="pgfId-949481"></a>In the data entry area below <em>Search String</em>, type the function prefix. For example, type <code>tech</code>.</li><li>
<a name="pgfId-949486"></a>Click <em>Search</em>.<br />
<a name="pgfId-954474"></a>All of the supported, documented SKILL functions for the prefix you entered appear in alphabetical order in the <em>Matches</em> field.</li></ul></li><li>
<a name="pgfId-954475"></a>To see the arguments and a short description for a function that is listed in the <em>Matches</em> field, click the function name.<br />
<a name="pgfId-954463"></a>The syntax and a brief description of the selected function appear in the Descriptions window. You might need to scroll up to see the syntax.</li><li>
<a name="pgfId-954466"></a>If necessary, scroll up to see the syntax.<br />
<a name="pgfId-954488"></a>For functions that have keyword-value pairs for arguments, each argument probably wraps to the next line.</li><li>
<a name="pgfId-954467"></a>If the arguments are wrapping, make the Finder window wider by stretching the lower-left corner.</li><li>
<a name="pgfId-954462"></a>Before selecting another function, click the <em>Clear</em> button.</li></ol>

















<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Using print Functions in a Pcell

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-958022"></a><a name="41177"></a>Using print Functions in a Pcell</h3>

<p>
<a name="pgfId-958023"></a>You cannot print or generate output from a Pcell, as it causes the Pcell evaluation to fail. However, you can bypass the system processing for print functions by using the <code>fprintf</code> or <code>println</code> function to print directly to <code>stdout</code> (standard output) in the format shown below:</p>

<pre class="webflare-courier-new codeContent">
<a name="pgfId-958024"></a><code>fprintf( stdout ... )</code></pre>
<pre class="webflare-courier-new codeContent">
<a name="pgfId-958025"></a>println( <code><em>variable</em></code> stdout )</pre>

<p>
<a name="pgfId-958026"></a>where <span class="webflare-courier-new" style="white-space:pre"><em>variable</em></span> is your variable name. For example</p>

<pre class="webflare-courier-new codeContent">
<a name="pgfId-958027"></a>fprintf( stdout &quot;myVariable = %L \n&quot; myVariable )</pre>
<h4>
<a name="pgfId-958028"></a>Using printf or println in a Pcell</h4>

<p>
<a name="pgfId-958029"></a>If you use the <code>printf</code> or <code>println</code> function in a Pcell, the output is treated as an error. In a cellview, errors are indicated by flashing markers. You can query the error in the cellview, change your Pcell code to fix the error, and recompile your Pcell.</p>
<p>
<a name="pgfId-958030"></a>To query markers, do the following:</p>
<ol><li>
<a name="pgfId-958031"></a>Choose <em>Verify &#8211; Markers &#8211; Explain</em>.</li><li>
<a name="pgfId-958032"></a>Click a flashing marker.<br />
<a name="pgfId-958096"></a>A dialog box appears, showing the text printed from the Pcell by the <code>printf</code> or <code>println</code> function.</li></ol>



<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Enclosing the Body of Code in a let or prog for Local Variables

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-958102"></a><a name="14170"></a>Enclosing the Body of Code in a let or prog for Local Variables</h3>

<p>
<a name="pgfId-958049"></a>When you use local variables in the body of SKILL Pcell code in a <h-hot><a href="graphicalFunctions.html#pcDefPcell">pcDefinePCell</a></h-hot> statement, be sure to enclose the Pcell code in a <code>let</code> or <code>prog</code> statement, and define all variables used in the Pcell code at the beginning of the <code>let</code> or <code>prog</code> statement. Defining variables as part of a <code>let</code> or <code>prog</code> prevents conflicts with variables used by the Pcell compiler. Using <code>let</code> gives faster performance than <code>prog</code>; <code>prog</code> allows multiple exits while <code>let</code> exits only at its end. </p>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=What to Avoid When Creating Pcells

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-951622"></a><a name="14505"></a>What to Avoid <a name="marker-951621"></a>When <a name="marker-954629"></a>Creating Pcells</h3>

<p>
<a name="pgfId-954593"></a>When creating a Pcell, do not use functions with prefixes other than <code>db</code>, <code>dd</code>, <code>cdf</code>, <code>rod</code>, and <code>tech</code>. Although it is possible to call procedures with other prefixes from within a Pcell, you will not be able to view the Pcell in a different environment or translate it into the format required by another database. Most translators, including the physical design translators, can translate only basic SKILL functions; the four <code>pc</code> functions; and functions in the SKILL families <code>db</code>, <code>dd</code>, <code>cdf</code>, <code>rod</code>, and <code>tech</code>.</p>
<p>
<a name="pgfId-954594"></a>Specifically, <strong>do not </strong>use functions with application-specific prefixes such as <code>ael</code>, <code>abs</code>, <code>de</code>, <code>ge</code>, <code>hi</code>, <code>las</code>, <code>le</code>, <code>pr</code>, and <code>sch</code>. Procedures in any application-specific family are at a higher level of functionality than can be used in a Pcell safely. For example, if you create a Pcell using <code>le</code> functions, the Pcell works only in environments that include the Virtuoso layout editor. You cannot use a translator to export your design from the DFII database. </p>
<p>
<a name="pgfId-952386"></a>When a translator cannot evaluate a function, one of the following happens:</p>
<ul><li>
<a name="pgfId-952539"></a>The <a name="marker-954631"></a>translator fails and issues an <code>undefined function</code> error message.</li><li>
<a name="pgfId-952543"></a>The <a name="marker-954638"></a>translator continues, issues a warning message, and translates the data incorrectly. </li></ul>

<p>
<a name="pgfId-952382"></a>To make your design translate successfully, you must resolve undefined functions in Pcells. You can do this by flattening the Pcells, which results in a loss of hierarchy and parameterization, or by rewriting the Pcell code to eliminate the undefined functions.</p>

<div class="webflare-information-macro webflare-macro-information">
<a name="pgfId-951126"></a>
Here are <a name="marker-954645"></a>more important rules for creating Pcells. In your <a name="marker-951124"></a>Pcell code, </div>

<ul><li style="list-style-type: none;background-image: none;"><ul><li>
<a name="pgfId-951127"></a>Do not prompt the user for input.</li><li>
<a name="pgfId-951916"></a>Do not generate messages; message output is interpreted as an error.</li><li>
<a name="pgfId-951128"></a>Do not load, read, or write to files in the UNIX file system.</li><li>
<a name="pgfId-951137"></a>Do not run any external program that starts another process.</li><li>
<a name="pgfId-950941"></a>If you need to drive external programs to calculate cell shapes, you can do this in SKILL. Use CDF callback procedures to save the resulting list of coordinate pairs in a string, and then pass the string as input to a SKILL Pcell. <br />
<a name="pgfId-950968"></a>This method has the advantage that the external program needs to be called only once per instance, not each time the design is opened. For more information about callback procedures, refer to &#8220;<a actuate="user" class="URL" href="../pcellref/graphicalPcells.html#CDF" show="replace" xml:link="simple">Using the Component Description Format</a>&#8221; in the <em>Virtuoso Parameterized Cell Reference</em>.</li><li>
<a name="pgfId-958063"></a>Do not generate output with <code>print</code> functions, except as described in <a href="skillPcellFunctions.html#41177">&#8220;Using print Functions in a Pcell&#8221;</a>.</li></ul></li></ul>








<p>
<a name="pgfId-956000"></a>For more information about creating SKILL Pcells, also see</p>
<ul><li>
<a name="pgfId-956018"></a>The &#8220;<a actuate="user" class="URL" href="../pcellref/skillPcells.html#firstpage" show="replace" xml:link="simple">Creating SKILL Parameterized Cells</a>&#8221; chapter in the <em>Virtuoso Parameterized Cell Reference</em></li><li>
<a name="pgfId-956058"></a>How to use relative object design functions (with the prefix <code>rod</code>) to create geometry for Pcells in the <em><a actuate="user" class="URL" href="../roduser/roduserTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Relative Object Design User Guide</a></em></li></ul>


<!-- [TOPIC_END] -->
<h2>
<a name="pgfId-956062"></a><a name="12837"></a>About Pcell Super and Submaster Cells<a name="mastersubmastercells"></a></h2>

<p>
<a name="pgfId-950464"></a>The master<a name="marker-951900"></a> cell of a Pcell has two levels: a (<a name="marker-951901"></a>super)<a name="marker-951902"></a> master cell in the database and one or more temporary submaster cells in virtual memory. The Parameterized Cell software creates one <a name="marker-951904"></a>submaster<a name="marker-951905"></a> cell in virtual memory for each unique set of parameter values assigned to an instance of the (super) master cell.</p>

<p>
<a name="pgfId-958111"></a></p>
<div class="webflare-div-image">
<img width="676" height="230" src="images/skillPcellFunctions-4.gif" /></div>

<p>
<a name="pgfId-949320"></a>A submaster cell resides in virtual memory for the duration of your editing session and is accessible by all cellviews. When you create an instance in a cellview, and a submaster with the same parameter values already exists in virtual memory, no new submaster is generated; the new instance references the existing submaster cell.</p>
<p>
<a name="pgfId-951707"></a>When you close all cellviews that reference a particular submaster cell, the database software automatically <a name="marker-951894"></a>purges<a name="marker-951887"></a> (removes<a name="marker-951897"></a>) the referenced submaster cell from virtual memory but does not remove the master Pcell from your disk. </p>
<p>
<a name="pgfId-951722"></a>When you edit an editing session by exiting the Cadence software, the database software automatically purges (removes) all submaster cells from virtual memory. Purging does not remove master Pcells from your disk.</p>

  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Using the SKILL Operator ~> with Pcells

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-951495"></a><a name="28474"></a>Using the SKILL Operator ~&gt; with Pcells<a name="skillOp"></a></h3>

<p>
<a name="pgfId-950624"></a>When you use the SKILL <a name="marker-950622"></a><a name="marker-950623"></a>operator <code>~&gt;</code> to access information about the master cell of a Pcell instance, you must look two levels above the instance. If you look at only one level above, you access information about the Pcell submaster.</p>
<p>
<a name="pgfId-950625"></a>For example, for the instance <code>I1</code> of the Pcell master <code>mux2</code>, you retrieve the database identity (<code>dbId</code>) of the <code>mux2</code> Pcell master with the following statement:</p>

<pre class="webflare-courier-new codeContent">
<a name="pgfId-950626"></a>I1~&gt;master~&gt;superMaster</pre>

<p>
<a name="pgfId-950627"></a>But if you use the statement</p>

<pre class="webflare-courier-new codeContent">
<a name="pgfId-950628"></a>I1~&gt;master</pre>

<p>
<a name="pgfId-952590"></a>you retrieve the <span class="webflare-courier-new" style="white-space:pre"><em>dbId</em></span> for the Pcell submaster.</p>

<!-- [TOPIC_END] -->
<h2>
<a name="pgfId-952731"></a><a name="41832"></a>pc Functions for SKILL Pcell Code<a name="pcSkillForPcells"></a></h2>

<p>
<a name="pgfId-956734"></a>When you create SKILL routines within Pcells, use only the following <code>pc</code> functions:</p>
<ul><li>
<a name="pgfId-956738"></a><code><a href="skillPcellFunctions.html#18726">pcExprToString</a><code></code></code></li><li>
<a name="pgfId-966634"></a><code><a href="skillPcellFunctions.html#11121">pcTechFile</a><code></code></code></li><li>
<a name="pgfId-966653"></a><code><a href="graphicalFunctions.html#87522">pcFix</a><code></code></code></li><li>
<a name="pgfId-966657"></a><code><a href="graphicalFunctions.html#34474">pcRound</a><code></code></code></li></ul>



<div class="webflare-information-macro webflare-macro-note">
<a name="pgfId-966637"></a>See <code>pcRound</code> and <code>pcFix</code> under &#8220;Graphic Parameterized Cell SKILL Functions&#8221;.</div>

  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=pcExprToString

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-954992"></a><a name="18726"></a>pcExprTo<a name="pcExprToString"></a>String</h3>
<a name="pgfId-955233"></a><a name="marker-955231"></a><a name="marker-955232"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
<code>pcExprToString</code>( 
<code><em>g_ilExpr
</em></code>)
=&gt; <code><em>t_string</em></code><code></code></pre>
<h4>
<a name="pgfId-955235"></a>Description</h4>

<p>
<a name="pgfId-952762"></a>Converts a SKILL expression to a string. The Pcell compiler uses this function to create labels that display the value of an expression as a string enclosed in quotes.</p>

<h4>
<a name="pgfId-952865"></a>Argument</h4>
<table class="webflareTable" id="#id971269">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-971271"></a><span class="webflare-courier-new" style="white-space:pre"><em>g_ilExpr</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-971273"></a>SKILL expression you want to convert to a string.</p>
</td>
</tr>
</tbody></table>
<h4>
<a name="pgfId-954757"></a>Value Returned</h4>
<table class="webflareTable" id="#id971282">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-971284"></a><span class="webflare-courier-new" style="white-space:pre"><em>t_string</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-971286"></a>The string equivalent of the SKILL expression, enclosed in quotes. If the value of the expression is <code>nil</code> or an error occurred, an empty string is returned.</p>
</td>
</tr>
</tbody></table>
<h4>
<a name="pgfId-954808"></a>Example</h4>

<p>
<a name="pgfId-955439"></a>For the following expression, the system retrieves the value of the minimum width rule for the <code>metal1</code> layer from the technology file and then converts that value to a string enclosed in quotes.</p>

<pre class="webflare-courier-new codeContent">
<a name="pgfId-955440"></a>pcExprToString( techGetSpacingRule( tfId &quot;minWidth&quot; &quot;metal1&quot; ) )</pre>
<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=pcTechFile

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-958122"></a><a name="15430"></a><a name="11121"></a>pcTec<a name="pcTechFile"></a>hFile</h3>
<a name="pgfId-952890"></a><a name="marker-952888"></a><a name="marker-952889"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
<code>pcTechFile</code>( 
<code><em>g_expression</em></code> 
)
=&gt; <code><em>g_result</em></code></pre>
<h4>
<a name="pgfId-952892"></a>Description</h4>

<p>
<a name="pgfId-955661"></a>Evaluates an expression contained in a string. The Pcell compiler uses this function as an envelope around stretch expressions that access information from a technology file. This function prevents any symbols used in the technology file access expression from being defined as parameters of the Pcell.</p>

<h4>
<a name="pgfId-955664"></a>Argument</h4>
<table class="webflareTable" id="#id971291">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-971293"></a><span class="webflare-courier-new" style="white-space:pre"><em>g_expression</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-971295"></a>The expression you want the system to evaluate when the Pcell containing the expression is evaluated.</p>
</td>
</tr>
</tbody></table>
<h4>
<a name="pgfId-971306"></a>Value Returned</h4>
<table class="webflareTable" id="#id971311">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-971313"></a><span class="webflare-courier-new" style="white-space:pre"><em>g_result</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-971315"></a>The value that resulted from evaluating the expression. If an error occurs, look in the CIW or at the <code>CDS.log</code> file for a message about the error.</p>
</td>
</tr>
</tbody></table>
<h4>
<a name="pgfId-971308"></a>Example</h4>

<p>
<a name="pgfId-955376"></a>In the following statement, the symbol <code>minWidth</code> is used only during evaluation of the expression; it is not treated as a Pcell parameter:</p>

<pre class="webflare-courier-new codeContent">
<a name="pgfId-955416"></a>pcTechFile( llp~&gt;minWidth )</pre>

<p>
<a name="pgfId-955417"></a>where <code>llp</code> is an internal variable, <code>~&gt;</code> is an operator, and <code>minWidth</code> is recognized by the system as a symbol. </p>
<p>
<a name="pgfId-955819"></a>If you did not use the <code>pcTechFile</code> function, the system would assume that <code>minWidth</code> is a Pcell parameter.</p>
<p>
<a name="pgfId-972524"></a></p>

<!-- [TOPIC_END] -->

<p>
<a name="pgfId-973187"></a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="preface.html" id="prev" title="Preface">Preface</a></em></b><b><em><a href="graphicalFunctions.html" id="nex" title="Graphical Parameterized Cell Functions">Graphical Parameterized Cell F ...</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>