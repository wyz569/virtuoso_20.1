
<html><head><title>Interactive Colored Routing (ICADVM20.1 Only)</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="parula" />
<meta name="CreateDate" content="2020-09-18" />
<meta name="CreateTime" content="1600423205" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the capabilities to provide efficient ways to interactively route connections in order to meet critical design constraints and rules." />
<meta name="DocTitle" content="Virtuoso Interactive and Assisted Routing User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Interactive Colored Routing (ICADVM20.1 Only)" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="weuser" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-09-18" />
<meta name="ModifiedTime" content="1600423205" />
<meta name="NextFile" content="wsp.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Layout" />
<meta name="PrevFile" content="metaldensity.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Interactive and Assisted Routing User Guide -- Interactive Colored Routing (ICADVM20.1 Only)" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="weuserICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="weuserTOC.html">Contents</a></li><li><a class="prev" href="metaldensity.html" title="Managing Metal Density">Managing Metal Density </a></li><li style="float: right;"><a class="viewPrint" href="weuser.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="wsp.html" title="Supporting Width Spacing Patterns (ICADVM20.1 Only)">Supporting Width Spacing Patte ...</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Interactive and Assisted Routing User Guide<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>10
<a id="pgfId-1095402"></a></h1>
<h1>
<a id="pgfId-1095405"></a><hr />
<a id="44786"></a><a id="15289"></a>Interactive Colored Routing (ICADVM20.1 Only)<hr />
</h1>

<p>
<a id="pgfId-1159263"></a>As technology advances and allows smaller transistors, layout designers want to create more complex circuits with an increasing number of geometries on the same silicon die. As a result, double- or triple- (and soon n-tuple) patterning techniques that rely on coloring information are being widely used for processes below 20nm. These techniques allow a layout designer to place geometries as close as possible to each other. Interactive colored routing is an enhancement that Virtuoso offers in this direction.</p>
<p>
<a id="pgfId-1159251"></a>This chapter describes how to set options for interactive colored routing.</p>
<ul><li>
<a id="pgfId-1045503"></a><a href="interactiveColoredRouting.html#44910">Interactive Coloring for Create Wire</a><ul><li>
<a id="pgfId-1168898"></a><a href="interactiveColoredRouting.html#12003">Creating a Colored Wire</a></li><li>
<a id="pgfId-1149075"></a><a href="interactiveColoredRouting.html#40752">Inserting Via on Colored Wires</a></li><li>
<a id="pgfId-1148349"></a><a href="interactiveColoredRouting.html#92947">Tapping Colored Objects</a></li></ul></li><li>
<a id="pgfId-1168916"></a><a href="interactiveColoredRouting.html#60911">Interactive Coloring for Create Bus</a><ul><li>
<a id="pgfId-1168927"></a><a href="interactiveColoredRouting.html#20235">Creating a Bus in an Empty Space</a></li><li>
<a id="pgfId-1168938"></a><a href="interactiveColoredRouting.html#78103">Creating a Bus by Tapping Pins</a></li><li>
<a id="pgfId-1168949"></a><a href="interactiveColoredRouting.html#61932">Creating a Bus While Working with Colored WSPs</a></li></ul></li><li>
<a id="pgfId-1180457"></a><a href="interactiveColoredRouting.html#23916">Interactive Coloring for Create Stranded Wire</a><ul><li>
<a id="pgfId-1180620"></a><a href="interactiveColoredRouting.html#89870">Specifying the Color Mode in Stranded Wire</a></li><li>
<a id="pgfId-1180722"></a><a href="interactiveColoredRouting.html#41063">Changing the Color of Stranded Wire</a></li><li>
<a id="pgfId-1180737"></a><a href="interactiveColoredRouting.html#93500">Changing the Stranded Wire Color Mode</a></li><li>
<a id="pgfId-1180752"></a><a href="interactiveColoredRouting.html#90654">Creating a Stranded Wire by Tapping Pins</a></li><li>
<a id="pgfId-1180766"></a><a href="interactiveColoredRouting.html#51021">Creating a Stranded Wire While Working with Colored WSPs</a></li><li>
<a id="pgfId-1183666"></a><a href="interactiveColoredRouting.html#37805">Avoiding Shorts with Existing Blockages on Colored WSPs</a></li></ul></li><li>
<a id="pgfId-1216833"></a><a href="interactiveColoredRouting.html#24768">Supporting End-to-End Spacing for Colored Shapes</a></li><li>
<a id="pgfId-1176592"></a><a href="interactiveColoredRouting.html#23980">Interactive Coloring for the Stretch Command with Colored WSPs</a></li><li>
<a id="pgfId-1223156"></a><a href="interactiveColoredRouting.html#41542">Color Locks While Editing a Wire</a></li><li>
<a id="pgfId-1173796"></a><a href="interactiveColoredRouting.html#22171">Inserting TrimMetal Layers in Interactive Colored Routing</a><ul><li>
<a id="pgfId-1182407"></a><a href="interactiveColoredRouting.html#38698">Supporting Colored TrimMetal Layers</a></li><li>
<a id="pgfId-1182388"></a><a href="interactiveColoredRouting.html#58321">Supporting Colored TrimMetal Layers for the Stretch Command</a></li><li>
<a id="pgfId-1184966"></a><a href="interactiveColoredRouting.html#86099">Supporting Colored TrimMetal Layers for Create Bus</a></li><li>
<a id="pgfId-1193489"></a><a href="interactiveColoredRouting.html#79128">Supporting Patch Metal Shapes</a></li></ul></li></ul>























<h2>
<a id="pgfId-1168834"></a><a id="44910"></a>Interactive Coloring fo<a id="createwire_coloring"></a>r Create Wire</h2>

<p>
<a id="pgfId-1168855"></a>Interactive wire editing supports Palette MPT (Multi-Patterning Technology) feature and lets you create wires with layer, color, and lock state information.</p>

<div class="webflare-information-macro webflare-macro-video">
<a id="pgfId-1190154"></a>
To view the demonstration on interactive coloring for create wire, see <a actuate="user" class="URL" href="https://support.cadence.com/apex/ArticleAttachmentPortal?pageName=ArticleContent&amp;id=a1O0V000007Mpj6UAC" show="replace" xml:link="simple">Interactive Colored Routing - Part1 (Using the Create Wire Command)</a> video.</div>
<h3>
<a id="pgfId-1151648"></a><a id="12003"></a><a id="20nmwireeditor"></a><a id="57216"></a><a id="19726"></a><a id="78351"></a><a id="23594"></a><a id="84883"></a><a id="coloredwires"></a>Creating a Colored Wire</h3>

<p>
<a id="pgfId-1159790"></a>The steps to create a colored wire are as follows:</p>
<ol><li>
<a id="pgfId-1159792"></a>Enable<em> MPT Support</em> in the Palette assistant. For more information, see <a actuate="user" class="URL" href="../vlehelp/chap3.html#paletteMPT" show="replace" xml:link="simple">MPT Support</a> in the Virtuoso Layout Suite documentation.</li><li>
<a id="pgfId-1156053"></a>(Optional) Select the <em>MPT</em> checkbox.</li><li>
<a id="pgfId-1162932"></a>Set as active a layer-purpose pair with the required color and lock status.<br />
<a id="pgfId-1162933"></a>Notice that the icons listed in the Color (C) column for each layer-purpose pair provide color as well as lock information.<br />
<a id="pgfId-1162964"></a><div class="webflare-div-image">
<img width="635" height="307" src="images/interactiveColoredRouting-3.gif" /></div></li><li>
<a id="pgfId-1145248"></a>Create a wire. The color and lock state are automatically set for the shape, as shown in the following figure.<br />
<a id="pgfId-1151921"></a><div class="webflare-div-image">
<img width="635" height="265" src="images/interactiveColoredRouting-4.gif" /></div></li></ol>












<p>
<a id="pgfId-1151922"></a>While creating a wire, you can reset the color and lock state of the wire by selecting a layer-purpose pair with another maskColor and lock state from the Palette, as shown in the following figure.</p>

<p>
<a id="pgfId-1148887"></a></p>
<div class="webflare-div-image">
<img width="668" height="573" src="images/interactiveColoredRouting-5.gif" /></div>
<h3>
<a id="pgfId-1160145"></a><a id="viasoncoloredwires"></a><a id="40752"></a>Inserting Via on Colored Wires</h3>

<p>
<a id="pgfId-1162475"></a>You can insert a via while creating a colored wire by selecting <em>Via up to &lt; layer name&gt;</em> from the <em>Create Single Wire</em> context-sensitive menu. By default, the via top and bottom shapes inherit the color information from the wire being drawn. Similarly, the via inherits the color lock status from the wire being drawn.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1156138"></a>The via cut shapes are kept uncolored (gray) and their color cannot be changed using the Palette MPT feature. </div>
<p>
<a id="pgfId-1162061"></a>The following figure shows an example where you create a wire on <code>M1</code> metal layer with <code>mask1Color</code>, and then insert an <code>M1-M2</code> via by selecting <em>Via Up To M2</em>. The <code>M2</code> via shape and the wire on <code>M2</code> both have <code>mask1Color</code> color set. The active layer in the Palette is reset to <code>Metal2 drawing</code>, which is the output layer of the inserting via.</p>

<p>
<a id="pgfId-1161995"></a></p>
<div class="webflare-div-image">
<img width="668" height="685" src="images/interactiveColoredRouting-6.gif" /></div>

<p>
<a id="pgfId-1161860"></a>By using the Palette MPT options, you can change the color and lock status of a via before you place it. This changes the color and lock information of the output layer of the via enclosure. The following figures show that the active layer in the Palette is reset to <code>Metal2 drawing</code>, which is the output layer of the inserting via. It also shows a change in the via color and lock state from <code>mask1Color unlock </code>to <code>mask2Color lock</code>.</p>

<p>
<a id="pgfId-1161871"></a></p>
<div class="webflare-div-image">
<img width="668" height="719" src="images/interactiveColoredRouting-7.gif" /></div>

<p>
<a id="pgfId-1153748"></a>After placing the via, you can continue to create a wire starting from the via on the changed metal layer. The wire inherits the color of the output layer of the via. You can see that the new wire is created in <code>mask2Color</code> with lock state in the following figure. </p>

<p>
<a id="pgfId-1149383"></a></p>
<div class="webflare-div-image">
<img src="images/12.2_wirecolorchangefromvia.gif" /></div>

<p>
<a id="pgfId-1158899"></a>Similarly, after the via has been placed, you can change the color and lock information from the Palette for both the output layer via enclosure and the wire currently being drawn. The following figure shows that the color information of the output layer via enclosure and the new pathSeg on the <code>M3</code> layer has changed from <code>mask2Color</code> to <code>mask3Color</code>.</p>

<p>
<a id="pgfId-1158904"></a></p>
<div class="webflare-div-image">
<img src="images/12.2_wireandviacolorchange.gif" /></div>
<h3>
<a id="pgfId-1148827"></a><a id="92947"></a><a id="tappingcoloredobjects"></a>Tapping C<a id="tapcoloredobjects"></a>olored Objects</h3>

<p>
<a id="pgfId-1196404"></a>The tapping behavior of an object is dependent on the <em>Auto Tap Wire</em> option in the Layout Editor Options form. If the <em>Auto Tap Wire </em>option is deselected, the wire inherits the color and lock status of the active layer in the palette, independent of the locked status of the starting shape. However, if the <em>Auto Tap Wire </em>option is selected, the wire inherits the color and lock status from the starting shape. There is no precedence of the locked status from the palette anymore. In addition, if you want to change the color or the lock status of the wire that you have started from an existing object, you can do it after clicking the starting object and then choose another color or locked status from the palette.</p>
<p>
<a id="pgfId-1149139"></a>This section covers the tapping behavior of various colored objects.</p>
<ul><li>
<a id="pgfId-1149148"></a><a href="interactiveColoredRouting.html#30073">Tapping from Colored Wires</a></li><li>
<a id="pgfId-1149163"></a><a href="interactiveColoredRouting.html#70756">Tapping from Colored Pins</a></li><li>
<a id="pgfId-1149249"></a><a href="interactiveColoredRouting.html#49027">Tapping from Colored Width Spacing Patterns (WSPs)</a></li></ul>



<h4>
<a id="pgfId-1149122"></a><a id="30073"></a>Tapping from Colored Wires</h4>

<p>
<a id="pgfId-1148828"></a>Interactive wire editing supports automatic tapping from colored wires. When you create a wire from an existing wire, the new wire taps and inherits the width, color information, layer-purpose pair, and net information of the source wire. The lock status of the new wire is inherited from the existing wire if it is in the locked state. </p>
<p>
<a id="pgfId-1187685"></a>The following figure displays an example where a new wire is created from an existing wire where the lock state of the existing wire is unlocked but the lock state in the Palette is locked. In this case, the tapped wire inherits the lock state from the Palette.</p>

<p>
<a id="pgfId-1187603"></a></p>
<div class="webflare-div-image">
<img width="668" height="627" src="images/interactiveColoredRouting-10.gif" /></div>
<h4>
<a id="pgfId-1157329"></a><a id="70756"></a>Tapping from Colored Pins</h4>

<p>
<a id="pgfId-1157880"></a>Interactive wire editing supports automatic tapping from colored pins. When you create a wire from an existing pin that has a color assigned to it, the wire automatically inherits the width, color information, layer-purpose pair, and net information of the source pin. The lock information that is selected in the Palette is considered.</p>
<p>
<a id="pgfId-1187441"></a>The following figure displays an example where a wire is created by tapping an existing pin <code>(M2 drw, mask2Color)</code>. In this case, the wire is created on <code>M2 drw</code> and has <code>mask2Color</code>. You can see that the Palette layer information has changed from <code>M1 drw</code> to<code> M2 drw</code> and the color has changed from <code>mask1Color</code> to <code>mask2Color</code>.</p>

<p>
<a id="pgfId-1157312"></a></p>
<div class="webflare-div-image">
<img width="668" height="775" src="images/interactiveColoredRouting-11.gif" /></div>

<p>
<a id="pgfId-1157314"></a>If you now create a wire from a pin on <code>M1 drw</code> with <code>mask1Color</code>, the wire automatically inherits the layer and color information from the pin and the color information in the Palette changes, as shown in the following figure.</p>

<p>
<a id="pgfId-1150716"></a></p>
<div class="webflare-div-image">
<img width="668" height="753" src="images/interactiveColoredRouting-12.gif" /></div>

<p>
<a id="pgfId-1160438"></a>However, when you create a wire from a pin with color set to gray, it is created with the color that is currently set as active in the Palette, but on the same layer as the pin, that is, the wire inherits only the layer information from the pin. The following figure shows wires created from the two pins that are on different metal layers when the pin color is set to gray.</p>

<p>
<a id="pgfId-1185908"></a></p>
<div class="webflare-div-image">
<img width="668" height="221" src="images/interactiveColoredRouting-13.gif" /></div>
<a id="pgfId-1160444"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
</pre>
<h4>
<a id="pgfId-1160446"></a><a id="49027"></a>Tapping from Colored Width Spacing Patterns (WSPs)</h4>

<p>
<a id="pgfId-1160420"></a>When you create a wire from a WSP that has a color assigned to it, the wire taps and inherits the width, color information, and layer-purpose pair from the WSP, as shown in the following figure.</p>

<p>
<a id="pgfId-1160452"></a></p>
<div class="webflare-div-image">
<img src="images/12.2_WSPColor.gif" /></div>

<p>
<a id="pgfId-1160453"></a>In this scenario, you cannot change the color of the wire from the Palette; the color of the WSP overrides the color that is currently set as active in the Palette. However, if the WSP does not have a color assigned to it, the wire is created with the color information from the Palette. In addition, the wire does not inherit the unlock state of the colored WSP. It inherits the color lock status from the Palette. For example, if the color lock state is changed in the Palette, the wire automatically inherits the new lock state from the Palette, as shown in the following figure.</p>

<p>
<a id="pgfId-1189847"></a></p>
<div class="webflare-div-image">
<img width="668" height="507" src="images/interactiveColoredRouting-15.gif" /></div>
<h2>
<a id="pgfId-1165294"></a><a id="71713"></a><a id="coloredDRCchecks"></a><a id="60911"></a>Interactive <a id="interactiveBusColoredRouting"></a>Coloring for Create Bus</h2>

<p>
<a id="pgfId-1165295"></a>The <em>Create Bus </em>command supports interactive coloring and lets you create a single layer bus with color and lock state information. You can create a colored bus starting in an empty space or by tapping the objects, such as pins, pathSegs and buses, and colored WSPs.</p>
<ul><li>
<a id="pgfId-1169792"></a><a href="interactiveColoredRouting.html#20235">Creating a Bus in an Empty Space</a><ul><li>
<a id="pgfId-1172364"></a><a href="interactiveColoredRouting.html#31916">Specifying the Bus Color Mode</a></li></ul></li><li>
<a id="pgfId-1169806"></a><a href="interactiveColoredRouting.html#78103">Creating a Bus by Tapping Pins</a></li><li>
<a id="pgfId-1169816"></a><a href="interactiveColoredRouting.html#61932">Creating a Bus While Working with Colored WSPs</a></li></ul>




<h3>
<a id="pgfId-1165928"></a><a id="20235"></a>Creating a Bus in an Empty Space</h3>

<p>
<a id="pgfId-1165929"></a>To create a bus with color in an empty space in the layout:</p>
<ol><li>
<a id="pgfId-1165888"></a>Enable<em> MPT Support </em>in the Palette assistant. For more information, see <a actuate="user" class="URL" href="../vlehelp/chap3.html#paletteMPT" show="replace" xml:link="simple">MPT Support</a> in the Virtuoso Layout Suite documentation.</li><li>
<a id="pgfId-1163708"></a>Set as active a layer-purpose pair with the required color and lock status. </li><li>
<a id="pgfId-1163643"></a>Choose <em>Create &#8211; Wiring &#8211; Bus</em> to run the <em>Create Bus</em> command. </li><li>
<a id="pgfId-1169987"></a>Click in an empty space in the canvas to start creating the bus. The control wire acquires the color and lock state from the active layer in the Palette. The color of the other bus bits depends on the bus color mode, which can be set to <em>uniform</em> or <em>optimized</em>. For more information about bus color mode, see <a href="interactiveColoredRouting.html#31916">Specifying the Bus Color Mode</a>. In the figure below, the bus is colored based on the <em>optimized</em> mode, starting from a control wire with <code>mask1Color, Unlock</code>.<br />
<a id="pgfId-1170000"></a><div class="webflare-div-image">
<img width="635" height="337" src="images/interactiveColoredRouting-16.gif" /></div></li></ol>






<h4>
<a id="pgfId-1182944"></a><a id="31916"></a>Specifying the B<a id="buscolormode"></a>us Color Mode</h4>

<p>
<a id="pgfId-1182945"></a>You can use the options available on the <em>Use Color Mode</em> menu to control the color mode of the bus. To access the color mode options, right-click the bus being created and point to <em>Use Color Mode</em>. You can either select the <em>optimized</em> or the <em>uniform</em> color mode.</p>

<p>
<a id="pgfId-1171562"></a></p>
<div class="webflare-div-image">
<img width="668" height="376" src="images/interactiveColoredRouting-17.gif" /></div>
<h4><em>
<a id="pgfId-1171564"></a>Uniform Color Mode</em></h4>

<p>
<a id="pgfId-1171565"></a>When <em>uniform</em> is selected, all bus bits are assigned the same mask color as that of the control wire. The mask color assigned to the control wire and other bus bits is the same as the active layer in the Palette. The spacing between two adjacent bus bits on the same mask is determined by <code>minSpacing(sameMask)</code>. The following figure shows the bus bits in the <em>uniform</em> color mode.</p>

<p>
<a id="pgfId-1171569"></a></p>
<div class="webflare-div-image">
<img src="images/12.2ISR_colormode_uniform.gif" /></div>
<h4><em>
<a id="pgfId-1171570"></a>Optimized Color Mode</em></h4>

<p>
<a id="pgfId-1171571"></a>When you select <em>optimized</em> color mode, the control wire acquires the same mask color as that specified for the active layer in the Palette. The other bus bits acquire the following coloring pattern:</p>
<ul><li>
<a id="pgfId-1171572"></a>The bus bits above the control wire acquire the mask color as <code>maskColor(controlWire)+1</code>, <code>maskColor(contorlWire)+2</code>, and so on. This pattern continues until the highest mask color available for the selected layer-purpose pair is assigned to a bus bit. The pattern is then repeated starting at the mask color of control wire. </li><li>
<a id="pgfId-1171573"></a>The bus bits below the control wire acquire the mask color as <code>maskColor(controlWire)-1</code>, <code>maskColor(contorlWire)-2</code>, and so on. If the control wire has the lowest available mask color assigned to it, then the bus bits below the control wire are colored starting with the highest mask color available for the layer on which the bus is being placed. The pattern is then repeated for the remaining bus bits.</li></ul>

<p>
<a id="pgfId-1172261"></a>In <em>optimized</em> color mode, the spacing between two adjacent bus bits on different masks is determined by <code>minSpacing(diffMask)</code>. The <em>optimized</em> is the default color mode.</p>
<p>
<a id="pgfId-1171574"></a>Let us consider an example where the active layer-purpose pair is <code>Metal4 Drawing</code> and the control wire is assigned <code>mask1Color</code>. The highest available mask color for <code>Metal4 Drawing</code> is <code>mask4Color</code>. </p>
<p>
<a id="pgfId-1171575"></a>The following figure shows the color pattern that is assigned to the bus bits in a bus with 10 bits.</p>

<p>
<a id="pgfId-1171599"></a></p>
<div class="webflare-div-image">
<img width="668" height="284" src="images/interactiveColoredRouting-19.gif" /></div>
<h4>
<a id="pgfId-1171811"></a><a id="38884"></a>Changing Bus Color Mode</h4>

<p>
<a id="pgfId-1171812"></a>When the bus color mode is changed, the bus bits are recolored. The spacing between the bus bits is recomputed based on the bus color mode that is set. The following figure shows how the color and the spacing of bus bits changes when the color mode is changed from <em>optimized</em> to <em>uniform</em>.</p>
<p>
<a id="pgfId-1171722"></a></p>

<div class="webflare-div-image">
<img width="668" height="710" src="images/interactiveColoredRouting-20.gif" /></div>
<h4>
<a id="pgfId-1171538"></a>Changing Color of Bus Bits </h4>

<p>
<a id="pgfId-1166694"></a>While creating a bus, you can apply a different mask color to the control wire, which, in turn, resets the color of the remaining bits in the bus. You can do this by resetting the active layer-purpose pair in the Palette to a different mask color, which resets the color and lock information of the control wire and also of the remaining bus bits. You can also reapply the color mode, if required.</p>
<p>
<a id="pgfId-1169406"></a>The following figure shows the change in color and lock state in the <em>optimized</em> bus color mode. You can see here that the control wire has acquired the color and lock state of the layer-purpose pair that is now set as active in the Palette.</p>

<p>
<a id="pgfId-1169423"></a></p>
<div class="webflare-div-image">
<img width="668" height="573" src="images/interactiveColoredRouting-21.gif" /></div>

<p>
<a id="pgfId-1167143"></a>The following figure shows the change in color and lock state when <em>uniform</em> bus color mode is selected: </p>

<p>
<a id="pgfId-1167160"></a></p>
<div class="webflare-div-image">
<img width="668" height="635" src="images/interactiveColoredRouting-22.gif" /></div>
<h3>
<a id="pgfId-1167427"></a><a id="78103"></a>Creating a Bus by Tapping Pins</h3>

<p>
<a id="pgfId-1167419"></a>Interactive bus coloring supports automatic tapping when you start creating a bus from a set of existing pins. To create a bus starting from a set of pins:</p>
<ol><li>
<a id="pgfId-1167891"></a>Choose <em>Create</em> &#8211; <em>Wiring</em> &#8211; <em>Bus</em>.</li><li>
<a id="pgfId-1167892"></a>Select the required pins/pathSegs.</li></ol>

<p>
<a id="pgfId-1167872"></a>When you create a bus starting from an existing set of pins that have color assigned to them, each bus bit automatically inherits the width, color information, layer-purpose pair information, and net information from the tapped pins. As shown in the following example, the bus bits inherit the color and lock state information from the tapped pins and the spacing between bus bits. The layer-purpose pair in the Palette is reset with the color and lock state information of the control wire.</p>

<p>
<a id="pgfId-1165695"></a></p>
<div class="webflare-div-image">
<img width="668" height="636" src="images/interactiveColoredRouting-23.gif" /></div>
<h4>
<a id="pgfId-1170108"></a><a id="20071"></a>Changing Color of Bus Bits by Tapping from Pins</h4>

<p>
<a id="pgfId-1170182"></a>When you start creating a bus by tapping existing colored pins, you cannot change the color of the control wire and other bus bits by selecting another layer-purpose pair with a different mask color. You can however switch between locked and unlocked states of the same mask color.</p>
<p>
<a id="pgfId-1170114"></a>To change the mask color of the control wire and other bus bits while creating a bus by tapping pins, you need to first insert a via. To change the mask color of the control wire and bus bits:</p>
<ol><li>
<a id="pgfId-1170138"></a>Insert a via by selecting <em>Via up to &lt; layer name&gt;</em> from the <em>Create Bus</em> context-sensitive menu. <br />
<a id="pgfId-1170146"></a>By default, the via and the via top and bottom shapes inherit the color and lock information from the control wire of the bus being drawn. The active layer in the Palette is reset to <code>Metal2 drawing</code>, <code>lock</code> which is the output layer of the via that is inserted on the control wire, as shown in the following figure.<br />
<a id="pgfId-1170235"></a><div class="webflare-div-image">
<img width="635" height="340" src="images/interactiveColoredRouting-24.gif" /></div></li><li>
<a id="pgfId-1170224"></a>To change the mask color of the control wire and other bus bits, select another layer-purpose pair with a different mask color from the Palette.<br />
<a id="pgfId-1170299"></a>If you change the mask color of the bus bits before placing a via, the color and lock information of the output layer of the via enclosure is accordingly updated. The following figures show that when you select <code>Metal2 drawing mask2Color</code> as the active layer from the Palette, the output layer of the via on the control wire is automatically reset to <code>mask2Color</code>. It also shows a change in the via color and lock state from <code>mask1Color</code>, <code>lock</code> to <code>mask2Color</code>, <code>unlock</code>.<br />
<a id="pgfId-1169513"></a><div class="webflare-div-image">
<img width="635" height="662" src="images/interactiveColoredRouting-25.gif" /></div>
<a id="pgfId-1170352"></a>You can also change the mask color of the control wire and the other bus bits after placing the via by resetting another layer-purpose pair as active in the Palette. The following figure shows how the mask color of the control wire and the via placed on it is updated when you change the active layer-purpose pair to<code> mask2Color, unlock</code>. The color of the other bus bits is also updated based on the mask color of the control wire and the color mode.<br />
<a id="pgfId-1170360"></a><div class="webflare-div-image">
<img width="635" height="392" src="images/interactiveColoredRouting-26.gif" /></div></li></ol>















<h4>
<a id="pgfId-1170354"></a><a id="56491"></a>Changing Bus Color Mode from Tapped Pins</h4>

<p>
<a id="pgfId-1170355"></a>To change the color mode of the bus bits that are created from the tapped pins or objects, use the <em>Use Color Mode</em> option available on the <em>Create Bus</em> context-sensitive menu. The<em> Use Color Mode</em> option is disabled until the first via is inserted. The via insertion ensures a change in the layer-purpose pair and enables the <em>Use Color Mode</em> option. To change the bus color mode and color of the bus starting from the existing pins:</p>
<ol><li>
<a id="pgfId-1167963"></a>Choose <em>Create</em> &#8211; <em>Wiring</em> &#8211; <em>Bus</em>.</li><li>
<a id="pgfId-1167964"></a>Select the required pins or objects.</li><li>
<a id="pgfId-1167986"></a>Right-click the bus that is being created. The <em>Create Bus</em> context-sensitive menu is displayed.</li><li>
<a id="pgfId-1167993"></a>Select <em>Via Up to &lt;layer_name&gt;</em> to insert the via.<br />
<a id="pgfId-1168491"></a><div class="webflare-div-image">
<img src="images/12.2ISR_ColorBus_viaup.gif" /></div></li><li>
<a id="pgfId-1168432"></a>The <em>Use Color Mode</em> option is now enabled. </li><li>
<a id="pgfId-1172166"></a>Right-click the bus being created and point to <em>Use Color Mode</em>. Then, select <em>optimized</em> or <em>uniform</em>. For more information on color mode, see <a href="interactiveColoredRouting.html#31916">Specifying the Bus Color Mode</a>.<br />
<a id="pgfId-1169591"></a>The following figure shows how the bus bits get displayed when the color mode is selected as <em>uniform</em><code>.</code><br />
<a id="pgfId-1168678"></a><div class="webflare-div-image">
<img src="images/12.2ISR_colorbus_colormodechange.gif" /></div>
<a id="pgfId-1168679"></a>When you again change the bus color mode from <em>uniform</em> to <em>optimized</em>, the bus bits get displayed as shown in the following figure.<br />
<a id="pgfId-1169633"></a><div class="webflare-div-image">
<img src="images/12.2ISR_colorbus_colormodechange_cycle.gif" /></div>
<a id="pgfId-1169626"></a>The <em>Use Color Mode</em> option is disabled after a bend is created in the bus, as shown in the following figure.<br />
<a id="pgfId-1172380"></a><div class="webflare-div-image">
<img src="images/12.2ISR_disabledmenu.gif" /></div></li></ol>























<h3>
<a id="pgfId-1172382"></a>Creating a Bus While Working with Colored <a id="61932"></a>WSPs</h3>

<p>
<a id="pgfId-1172383"></a>When you create a bus by tapping a Width Spacing Pattern (WSP) that has a color assigned to it, the bus bits inherit the color from the colored routing pattern, as shown in the following figure. The spacing between adjacent bus bits is also inherited from the routing pattern. The layer-purpose pair in the Palette is updated based on the layer and the direction in which the bus is created.</p>

<p>
<a id="pgfId-1169118"></a></p>
<div class="webflare-div-image">
<img width="668" height="686" src="images/interactiveColoredRouting-31.gif" /></div>

<p>
<a id="pgfId-1169010"></a>When you start creating a bus from an existing routing pattern, the bus bits inherit the color of the colored track under them. As a result, you cannot change the color of the bus bits by selecting another layer with a different mask color from the Palette. You can however switch between locked and unlocked states of the same mask color. For more information on color change of bus bits, see <a href="interactiveColoredRouting.html#20071">Changing Color of Bus Bits by Tapping from Pins</a>.</p>
<p>
<a id="pgfId-1171459"></a>You can change the bus color mode of bus bits while creating a bus from an existing WSP. Changing the bus color mode allows bus bits to be created on the closest track according to their color. The following figure shows how the bus bits get displayed when the color mode is changed to <em>uniform</em>. </p>

<p>
<a id="pgfId-1169065"></a></p>
<div class="webflare-div-image">
<img width="668" height="454" src="images/interactiveColoredRouting-32.gif" /></div>

<p>
<a id="pgfId-1169161"></a>The following figure displays the bus bits when the color mode is changed to <em>optimized</em>.</p>

<p>
<a id="pgfId-1169201"></a></p>
<div class="webflare-div-image">
<img width="668" height="430" src="images/interactiveColoredRouting-33.gif" /></div>

<p>
<a id="pgfId-1169202"></a>For more information about how to change the color mode of bus bits, see <a href="interactiveColoredRouting.html#56491">Changing Bus Color Mode from Tapped Pins</a>.</p>

<h2>
<a id="pgfId-1172335"></a>Performing DRC Colored Checks</h2>

<p>
<a id="pgfId-1172336"></a>Using DRD Notify and Enforce, you can perform interactive DRC colored checks on wires and that carry dynamic coloring information. This helps check for violations between two wires or via enclosures with same or different color information. For example, the following figure shows a <code>minSpacing (same mask)</code> violation between the top horizontal wire and the via enclosure, both of which have <code>mask1Color</code>.</p>

<p>
<a id="pgfId-1172340"></a></p>
<div class="webflare-div-image">
<img width="668" height="434" src="images/interactiveColoredRouting-34.gif" /></div>

<p>
<a id="pgfId-1172341"></a>Similarly, the following figure shows a <code>minSpacing (diff mask)</code> violation between the top horizontal wire with <code>mask1Color</code> and the via enclosure with <code>mask2Color</code>.</p>

<p>
<a id="pgfId-1214746"></a></p>
<div class="webflare-div-image">
<img src="images/12.2LA4_minSpacingviolation.gif" /></div>
<h2>
<a id="pgfId-1180096"></a><a id="23916"></a>Interactive Co<a id="interactivecoloring_stranded"></a>loring for Create Stranded Wire</h2>

<p>
<a id="pgfId-1180097"></a>The <em>Create Stranded Wire </em>command supports interactive coloring and lets you create a stranded wire with color and lock state information. The control wire acquires the color and lock state from the active layer in the Palette. The color of the other strands in the stranded wire depends on the color mode, which can be set to <em>uniform</em> or <em>optimized</em>. </p>

<h3>
<a id="pgfId-1180099"></a><a id="89870"></a>Specifying the Co<a id="strandedcolormode"></a>lor Mode in Stranded Wire</h3>

<p>
<a id="pgfId-1181494"></a>You can use the options available on the <em>Use Color Mode</em> menu to control the color mode of the stranded wire. To access the color mode options, right-click the stranded wire being created and point to <em>Use Color Mode</em>. You can either select the <em>optimized</em> or the <em>uniform</em> color mode.</p>

<p>
<a id="pgfId-1180106"></a></p>
<div class="webflare-div-image">
<img width="668" height="346" src="images/interactiveColoredRouting-36.gif" /></div>
<h4>
<a id="pgfId-1180107"></a>Uniform Color Mode</h4>

<p>
<a id="pgfId-1180108"></a>When <em>uniform</em> is selected, all stranded wires are assigned the same mask color as that of the control wire. The mask color assigned to the control wire and other stranded wires is the same as the active layer in the Palette. The spacing between stranded wires on the same mask color is determined by <code>minSpacing(sameMask)</code>. The default color mode is <em>uniform</em>. The following figure shows the stranded wires in the <em>uniform</em> color mode with <code>minSpacing (sameMask</code>).</p>

<p>
<a id="pgfId-1180112"></a></p>
<div class="webflare-div-image">
<img src="images/12.3ISR9_strandwire_colormode_uniform.gif" /></div>
<h4>
<a id="pgfId-1180113"></a>Optimized Color Mode</h4>

<p>
<a id="pgfId-1180114"></a>When you select <em>optimized</em> color mode, the control wire acquires the same mask color as that specified for the active layer in the Palette. The other stranded wires acquire the following coloring pattern:</p>
<ul><li>
<a id="pgfId-1180115"></a>The stranded wires above the control wire acquire the mask color as <code>maskColor(controlWire)+1</code>, <code>maskColor(contorlWire)+2</code>, and so on. This pattern continues until the highest mask color available for the selected layer-purpose pair is assigned to the stranded wire. The pattern is then repeated starting at the mask color of control wire. </li><li>
<a id="pgfId-1180116"></a>The stranded wires below the control wire acquire the mask color as <code>maskColor(controlWire)-1</code>, <code>maskColor(contorlWire)-2</code>, and so on. If the control wire has the lowest available mask color assigned to it, then the stranded wires below the control wire are colored starting with the highest mask color available for the layer on which the stranded wire is being placed. The pattern is then repeated for the remaining stranded wires.</li></ul>

<p>
<a id="pgfId-1180117"></a>In <em>optimized</em> color mode, the spacing between two adjacent stranded wires on different masks is determined by <code>minSpacing(diffMask)</code>. This color mode is more compact than the <em>uniform</em> color mode as the <code>diffmask</code> spacing is always smaller than the <code>samemask</code> spacing.</p>
<p>
<a id="pgfId-1180118"></a>Let us consider an example where the active layer-purpose pair is <code>Metal4 Drawing</code> and the control wire is assigned <code>mask1Color</code>. The highest available mask color for <code>Metal4 Drawing</code> is <code>mask4Color</code>. </p>

<p>
<a id="pgfId-1180122"></a></p>
<div class="webflare-div-image">
<img src="images/12.3ISR9_strandwire_colormode_cycle.gif" /></div>
<h3>
<a id="pgfId-1180123"></a><a id="41063"></a>Changing the Color of Stranded Wire </h3>

<p>
<a id="pgfId-1180124"></a>While creating a stranded wire, you can apply a different mask color to the control wire, which, in turn, resets the color of the stranded wire. When you change the mask color of the stranded wire before placing a via, the color and lock information of the complete stranded wire is updated as there is no layer change. </p>

<p>
<a id="pgfId-1180131"></a></p>
<div class="webflare-div-image">
<img width="668" height="547" src="images/interactiveColoredRouting-39.gif" /></div>

<p>
<a id="pgfId-1180132"></a>You can also change the mask color of the control wire and the stranded wire after placing the via by resetting another layer-purpose pair as active in the Palette. In this case the change of the active colored layer is applied only in the last section of stranded wire on the same layer.</p>
<p>
<a id="pgfId-1181516"></a>The following figure shows how the mask color of the control wire and the last section of the stranded wire is updated when you change the active layer-purpose pair to<code> mask3Color, lock</code>. </p>

<p>
<a id="pgfId-1180136"></a></p>
<div class="webflare-div-image">
<img width="668" height="546" src="images/interactiveColoredRouting-40.gif" /></div>
<h3>
<a id="pgfId-1180137"></a><a id="93500"></a>Changing the Stranded Wire Color Mode</h3>

<p>
<a id="pgfId-1180138"></a>When the color mode is changed, the stranded wire is recolored. The spacing between the stranded wire is recomputed based on the color mode that is set. In stranded wire, the color mode can only be changed only when a via is dropped. The change of the color mode is applied only in the last section of stranded wires (parallels pathSegs between a bend), as shown in the following figure.</p>

<p>
<a id="pgfId-1180142"></a></p>
<div class="webflare-div-image">
<img width="668" height="524" src="images/interactiveColoredRouting-41.gif" /></div>

<p>
<a id="pgfId-1180143"></a>You cannot change the color mode in a stranded wire after a bend if there is no layer change, as shown in the following figure.</p>

<p>
<a id="pgfId-1180147"></a></p>
<div class="webflare-div-image">
<img width="668" height="310" src="images/interactiveColoredRouting-42.gif" /></div>
<h3>
<a id="pgfId-1180149"></a><a id="90654"></a>Creating a Stranded Wire by Tapping Pins</h3>

<p>
<a id="pgfId-1180150"></a>Interactive coloring supports automatic tapping when you start creating a stranded wire from an existing pin. To create a stranded wire starting from a pin:</p>
<ol><li>
<a id="pgfId-1180151"></a>Choose <em>Create</em> &#8211; <em>Wiring</em> &#8211; <em>Stranded Wire</em>.</li><li>
<a id="pgfId-1180152"></a>Select the required pin.</li></ol>

<p>
<a id="pgfId-1180153"></a>When you create a stranded wire starting from an existing pin that has color assigned to it, each stranded wire automatically inherits the width, color information, layer-purpose pair information, and net information from the tapped pin. As shown in the following example, each stranded wire inherits the color and lock state information from the tapped pin. </p>

<p>
<a id="pgfId-1180157"></a></p>
<div class="webflare-div-image">
<img width="668" height="218" src="images/interactiveColoredRouting-43.gif" /></div>

<p>
<a id="pgfId-1180158"></a>To change the color mode of the stranded wire that is created from the tapped pin, insert a via and then use the <em>Use Color Mode</em> option available on the <em>Create Stranded Wire </em>context-sensitive menu. The<em> Use Color Mode</em> option is disabled until the first via is inserted, as shown in the following figure.</p>

<p>
<a id="pgfId-1180162"></a></p>
<div class="webflare-div-image">
<img width="668" height="308" src="images/interactiveColoredRouting-44.gif" /></div>

<p>
<a id="pgfId-1180163"></a>The via insertion ensures a change in the layer-purpose pair and enables the <em>Use Color Mode</em> option. To change the color mode and color of the stranded wire starting from the existing pin:</p>
<ol><li>
<a id="pgfId-1180164"></a>Choose <em>Create</em> &#8211; <em>Wiring</em> &#8211; <em>Stranded Wire</em>.</li><li>
<a id="pgfId-1180165"></a>Select the required pins or objects.</li><li>
<a id="pgfId-1180166"></a>Right-click the stranded wire that is being created. The <em>Create Stranded Wire </em>context-sensitive menu is displayed.</li><li>
<a id="pgfId-1180167"></a>Select <em>Via Up/Down to &lt;layer_name&gt;</em> to insert the via. The <em>Use Color Mode</em> option is now enabled. </li><li>
<a id="pgfId-1180168"></a>Place the mouse pointer on <em>Use Color Mode</em>. Then, select <em>optimized</em> or <em>uniform</em>. For more information on color mode, see <a href="interactiveColoredRouting.html#89870">Specifying the Color Mode in Stranded Wire</a>.<br />
<a id="pgfId-1180172"></a>The following figure shows how the stranded wire get displayed when the color mode is set to <em>optimized</em>. The layer-purpose pair in the Palette is reset with the color and lock state information of the control wire.<br />
<a id="pgfId-1180176"></a><div class="webflare-div-image">
<img width="635" height="434" src="images/interactiveColoredRouting-45.gif" /></div></li></ol>








<h3>
<a id="pgfId-1180178"></a><a id="51021"></a>Creating a Stranded Wire While Working with Colored WSPs</h3>

<p>
<a id="pgfId-1180179"></a>When you create a stranded wire by tapping a Width Spacing Pattern (WSP) that has a color assigned to it, the stranded wire inherits the color from the colored routing pattern, as shown in the following figure. The spacing between each strand is also inherited from the routing pattern. The layer-purpose pair in the Palette is updated based on the layer and the direction in which the stranded wire is created.</p>

<p>
<a id="pgfId-1180183"></a></p>
<div class="webflare-div-image">
<img src="images/12.3ISR9_strandwire_WSP.gif" /></div>

<p>
<a id="pgfId-1180184"></a>When you start creating a stranded wire from an existing routing pattern, each stranded wire inherits the color of the colored track on which it sits. As a result, you cannot change the color of the stranded wire by selecting another layer with a different mask color from the Palette. You can, however, switch between locked and unlocked states of the same mask color. For more information on changing the color of a stranded wire, see <a href="interactiveColoredRouting.html#90654">Creating a Stranded Wire by Tapping Pins</a>.</p>
<p>
<a id="pgfId-1180188"></a>You can change the color mode of the stranded wire while creating a stranded wire from an existing WSP. Changing the color mode allows the stranded wire to be created on the closest track based on color. The following figure shows how the stranded wire is displayed when the color mode is changed to <em>uniform</em>. </p>

<p>
<a id="pgfId-1180192"></a></p>
<div class="webflare-div-image">
<img src="images/12.3ISR9_uniformcolormode_stranded.gif" /></div>

<p>
<a id="pgfId-1180193"></a>The following figure displays the stranded wire when the color mode is changed to <em>optimized</em>. The stranded wire inherits the nearest track spacing.</p>

<p>
<a id="pgfId-1180197"></a></p>
<div class="webflare-div-image">
<img src="images/12.3ISR9_strandwire_WSP_cycle.gif" /></div>

<p>
<a id="pgfId-1180200"></a>For more information about how to change the color mode of stranded wire, see <a href="interactiveColoredRouting.html#90654">Creating a Stranded Wire by Tapping Pins</a>.</p>

<h3>
<a id="pgfId-1183064"></a><a id="37805"></a>Avoiding Shorts with <a id="avoidblockage_coloredWSP"></a>Existing Blockages on Colored WSPs</h3>

<p>
<a id="pgfId-1183398"></a>The stranded routing skips tracks to avoid creating a short with an existing blockage on colored WSPs.</p>

<h4>
<a id="pgfId-1184072"></a>Example Scenarios for Avoiding Shorts with Existing Blockages on Colored WSPs</h4>

<p>
<a id="pgfId-1184203"></a>This section illustrates some of the possible scenarios, with different requirements, on how a stranded wire skips the track on which a blockage appears and accordingly adjusts to the next nearest track that does not have any blockage when MPT is enabled and stranded wires are colored.</p>

<h4><em>
<a id="pgfId-1183291"></a><a id="77488"></a>Scenario 1</em></h4>

<p>
<a id="pgfId-1183464"></a>Blockage exists on layer <code>Metal2</code> with net name <code>A,</code> and the color mode is <em>optimized</em>.</p>
<ol><li>
<a id="pgfId-1183293"></a>Enable<em> MPT Support</em> in the Palette assistant. For more information, see <a actuate="user" class="URL" href="../vlehelp/chap3.html#paletteMPT" show="replace" xml:link="simple">MPT Support</a> in the Virtuoso Layout Suite documentation.</li><li>
<a id="pgfId-1183294"></a>(Optional) Select the <em>MPT</em> check box.</li><li>
<a id="pgfId-1183295"></a>Set a layer-purpose pair with the required color and lock status as active.</li><li>
<a id="pgfId-1183296"></a>Choose <em>Create</em> &#8211; <em>Wiring</em> &#8211; <em>Stranded Wire</em> and press <code>F3</code>.</li><li>
<a id="pgfId-1183297"></a>Specify <code>B</code> in the <em>Net Name</em> field.</li><li>
<a id="pgfId-1183298"></a>Use the options available on the <em>Use Color Mode</em> menu to control the color mode of the stranded wire. To access the color mode options, right-click the stranded wire being created and point to <em>Use Color Mode</em>. </li><li>
<a id="pgfId-1183299"></a>Choose the <em>optimized</em> color mode.</li><li>
<a id="pgfId-1183300"></a>Move the stranded wire being created in the direction in which a blockage with net name <code>A</code> appears.</li></ol>







<p>
<a id="pgfId-1183301"></a>The stranded wire with net name <code>B</code> skips the track that has blockage with net name <code>A</code> and accordingly adjusts to the next nearest colored track, which follows the <em>optimized</em> color mode.</p>

<p>
<a id="pgfId-1183305"></a></p>
<div class="webflare-div-image">
<img width="668" height="488" src="images/interactiveColoredRouting-49.gif" /></div>
<h4><em>
<a id="pgfId-1183306"></a>Scenario 2</em></h4>

<p>
<a id="pgfId-1183481"></a>Blockage exists on <code>Metal2</code> layer with net name <code>A</code>, and the color mode is changed from <em>optimized</em> to <em>uniform</em> or conversely, from <em>uniform</em> to <em>optimized</em>.</p>
<ol><li>
<a id="pgfId-1183307"></a>Perform steps 1 through 7 in <a href="interactiveColoredRouting.html#77488">Scenario 1</a>.</li><li>
<a id="pgfId-1184890"></a>Select the <em>uniform</em> color mode.</li><li>
<a id="pgfId-1184891"></a>Move the stranded wire being created in the direction in which a blockage with net name <code>A</code> appears.</li></ol>


<p>
<a id="pgfId-1183310"></a>In this case, the stranded wire with net name <code>B</code> skips the track that has blockage with net name <code>A</code> and accordingly adjusts to the next nearest colored track, which follows the <em>uniform</em> color mode.</p>

<p>
<a id="pgfId-1183314"></a></p>
<div class="webflare-div-image">
<img width="668" height="457" src="images/interactiveColoredRouting-50.gif" /></div>

<p>
<a id="pgfId-1183315"></a>Let us now see some scenarios when the colored stranded wires along with the vias are slided. The behavior of the stranded wire depends on the color mode that is selected.</p>

<h4><em>
<a id="pgfId-1183316"></a>Scenario 3</em></h4>

<p>
<a id="pgfId-1183575"></a>When the color mode is <em>optimized</em> and the blockage with net name <code>A </code>exists on the <code>Metal3</code> layer. The stranded wire is created from an empty space on the <code>Metal2</code> layer and changes the direction by inserting vias. </p>
<ol><li>
<a id="pgfId-1183548"></a>Perform steps 1 through 7 in <a href="interactiveColoredRouting.html#77488">Scenario 1</a>.</li><li>
<a id="pgfId-1183325"></a>Choose the <em>Via Up</em> or <em>Via Down</em> option from the <em>Create Stranded Wire</em> context-sensitive menu to insert a via on the stranded wire.<br />
<a id="pgfId-1183326"></a>When the via is inserted, the direction of the stranded wire is changed.</li><li>
<a id="pgfId-1183327"></a>Move the stranded wire in the direction in which <code>Metal3</code> blockage with net name <code>A</code> appears.</li><li>
<a id="pgfId-1183328"></a>To slide the current section of the stranded wire, hold the <code>Ctrl+Shift</code> keys and move the mouse pointer to the right or left of the current position. </li></ol>




<p>
<a id="pgfId-1183329"></a>In this case, the stranded wire with net name <code>B</code> skips the track that has a blockage with net name <code>A</code> and accordingly adjusts to the next nearest colored track, which follows the <em>optimized</em> color mode.</p>

<p>
<a id="pgfId-1183333"></a></p>
<div class="webflare-div-image">
<img width="668" height="198" src="images/interactiveColoredRouting-51.gif" /></div>

<p>
<a id="pgfId-1183334"></a>In the same scenario, you can also increase the spacing between the stranded wires and slide the wires. Use the <code>Ctrl+3</code> bindkey to increase the spacing between the stranded wires. The stranded wire with net name <code>B</code> skips the track that has a blockage with net name <code>A</code> and accordingly adjusts to the next nearest colored track, which follows the <em>optimized</em> color mode.</p>

<p>
<a id="pgfId-1213177"></a></p>
<div class="webflare-div-image">
<img width="668" height="303" src="images/interactiveColoredRouting-52.gif" /></div>

<p>
<a id="pgfId-1213187"></a>Similarly, use the <code>Ctrl+4</code> bindkey to decrease the spacing between the stranded wires. The decreased spacing snaps the stranded wires to adjacent WSP track. However, after decreasing the spacing between stranded wires, the stranded wires create shorts with other shapes. To avoid short violations and the blockage, again increase the spacing between the stranded wires. This can be done by resetting the spacing value in the Create Stranded Wire form and then use the slider to enhance results of the stranded wires.</p>

<h4><em>
<a id="pgfId-1183339"></a>Scenario 4</em></h4>

<p>
<a id="pgfId-1184789"></a>When the color mode changes from <em>optimized</em> to <em>uniform</em> and the blockage with net name <code>A </code>exists on the <code>Metal3</code> layer. The stranded wire is created from an empty space on <code>Metal2</code> layer and changes the direction by inserting vias. </p>
<ol><li>
<a id="pgfId-1184793"></a>Perform steps 1 through 6 in <a href="interactiveColoredRouting.html#77488">Scenario 1</a>. </li><li>
<a id="pgfId-1184794"></a>Select the <em>uniform</em> color mode.</li><li>
<a id="pgfId-1183342"></a>Choose the <em>Via Up</em> or <em>Via Down</em> option from the <em>Create Stranded Wire</em> context-sensitive menu to insert a via on the stranded wire.<br />
<a id="pgfId-1183343"></a>When the via is inserted, the direction of the stranded wire is changed.</li><li>
<a id="pgfId-1183344"></a>Move the stranded wire in the direction in which <code>Metal3</code> blockage with net name <code>A</code> appears.</li><li>
<a id="pgfId-1183345"></a>To slide the current section of the stranded wire, hold the <code>Ctrl+Shift</code> keys and move the mouse pointer to the right or left of the current position. </li></ol>





<p>
<a id="pgfId-1183346"></a>In this case, the stranded wire with net name <code>B</code> skips the track that has a blockage with net name <code>A</code> and accordingly adjusts to the next nearest colored track, which follows the <em>uniform</em> color mode.</p>

<p>
<a id="pgfId-1183637"></a></p>
<div class="webflare-div-image">
<img width="668" height="233" src="images/interactiveColoredRouting-53.gif" /></div>

<p>
<a id="pgfId-1183638"></a>In the same scenario, you can also increase the spacing between the stranded wires and slide the wires. Use the <code>Ctrl+3</code> bindkey to increase the spacing between the stranded wires. The stranded wire with net name <code>B</code> skips the track that has a blockage with net name <code>A</code> and accordingly adjusts to the next nearest colored track, which follows the <em>uniform</em> color mode.</p>

<p>
<a id="pgfId-1215802"></a></p>
<div class="webflare-div-image">
<img width="668" height="301" src="images/interactiveColoredRouting-54.gif" /></div>
<h2>
<a id="pgfId-1173747"></a><a id="24768"></a>Supporting End-t<a id="coloredSpacing"></a>o-End Spacing for Colored Shapes</h2>

<p>
<a id="pgfId-1216153"></a>The <code>minEndOfLineSpacing</code> constraint provides the capability to define the end-of-line spacing for <code>sameMask</code> and <code>diffMask</code>. However, a color-specific <code>sameMask</code> spacing is not defined in the <code>minEndOfLineSpacing</code> constraint. To describe the color-specific <code>sameMask</code> spacing, the <code>minSideSpacing</code> constraint is considered and for this spacing to correspond to <code>minEndOfLineSpacing</code>, use the <code>mask1</code>, <code>mask2</code>, and <code>mask3</code> parameters with <code>samemask</code> in the <code>minSideSpacing</code> constraint.</p>
<p>
<a id="pgfId-1214830"></a>When the <em>Create Wire</em>, <em>Create Stranded Wire</em>, or the <em>Create Bus</em> command is run, a white halo surrounding the active wires displays. This halo determines <code>minSpacing</code>, <code>minEndOfLineSpacing</code>, and some other violations. In order to show the <code>samemask</code> spacing for <code>mask1</code>, <code>mask2</code>, and <code>mask3</code> separately, additional markers appear according to the mask color of the wire. If the wire is of <code>mask1</code> color, a <code>mask1</code> arrow appears at the end of active wire. Similarly, if the wire is of <code>mask2</code> or <code>mask3</code> color, a <code>mask2</code> or a <code>mask3</code> arrow appear sat the end of the active wire. The existing white halo determines the spacing for different mask colors. The following figure shows an example when a bus is created on the <em>Metal2</em> layer, which is in the horizontal direction.</p>

<p>
<a id="pgfId-1218047"></a></p>
<div class="webflare-div-image">
<img width="668" height="314" src="images/interactiveColoredRouting-55.gif" /></div>
<h2>
<a id="pgfId-1176020"></a><a id="23980"></a>Interactive Coloring for the Stretch Command with Colored WSPs</h2>

<p>
<a id="pgfId-1176124"></a>The <em>Stretch </em>command supports interactive coloring and lets you edit a wire and via with color and lock state information that has been earlier created by tapping objects, such as pins, pathSegs and buses, or colored WSPs. As the wire or via is dragged interactively, its color is inherited from the colored track the stretch command snaps the wire or via to. However, the lock state of the wire or via remains unchanged.</p>

<h2>
<a id="pgfId-1221495"></a><a id="41542"></a>Color Locks While Editing a Wire</h2>

<p>
<a id="pgfId-1221543"></a>While editing an existing wire by either create wire or moving or stretching, the system lock is automatically set to a user lock.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1222505"></a>The system lock is set using the <em>Lock Color</em> icon on the <em>Multiple Patterning </em>toolbar, whereas a user lock is set using the <em>MPT</em> feature of the Palette Assistant.</div>
<p>
<a id="pgfId-1221677"></a>When merging an existing wire, which has system lock, by either create wire or by stretching, merges with a wire having user lock, the resultant merged wire is considered as a new wire and sets the system lock to user lock. </p>

<p>
<a id="pgfId-1222407"></a></p>
<div class="webflare-div-image">
<img width="668" height="63" src="images/interactiveColoredRouting-56.gif" /></div>

<p>
<a id="pgfId-1221918"></a>Similarly, editing an existing wire by create wire or stretch, which has system lock, results in a wire having user lock.</p>

<p>
<a id="pgfId-1222485"></a></p>
<div class="webflare-div-image">
<img width="668" height="73" src="images/interactiveColoredRouting-57.gif" /></div>

<p>
<a id="pgfId-1222046"></a>Again, stretching or moving a whole pathSeg that has system lock results in a pathSeg with user lock.</p>

<p>
<a id="pgfId-1222494"></a></p>
<div class="webflare-div-image">
<img width="668" height="250" src="images/interactiveColoredRouting-58.gif" /></div>
<h2>
<a id="pgfId-1176024"></a><a id="trimMetalLayer"></a><a id="22171"></a>Inserting TrimMetal Layers in Interactive Colored Routing</h2>

<p>
<a id="pgfId-1174944"></a><code>TrimMetal</code> is a physical layer where trim shapes are inserted. In some process technologies, these metal layers are used to trim portions of a metal layer. This enables routing with much smaller end-of-line spacing that would otherwise be impossible. This is denoted in the GDSII data that is sent to the fabrication and checked by DRC, as shown in the following figure.</p>

<p>
<a id="pgfId-1179754"></a></p>
<div class="webflare-div-image">
<img width="668" height="345" src="images/interactiveColoredRouting-59.gif" /></div>

<p>
<a id="pgfId-1179755"></a>Interactive colored routing supports automatic insertion of trim metal layers when the&#160;&#160;<code>trimShape</code> constraint is present in the technology file. In such case, DRD checks the <code>trimShape</code> constraint and transmits the trim shape information to the Wire Editor. In addition, interactive routing commands supports trim insertion only when <em>MPT Support</em> in the Palette assistant is enabled. For more information, see <a href="../ascitechconstr/constr_misc.html#trimShape">trimShape</a> in Virtuoso&#174; Technology Data Constraint Reference.</p>
<p>
<a id="pgfId-1197823"></a>The Wire Editor then creates and modifies the wires and inserts the trim shapes, as follows:</p>
<ul><li>
<a id="pgfId-1173365"></a>At the end of wires when two wires are precisely aligned.</li><li>
<a id="pgfId-1173403"></a>On a layer-purpose pair, which depends on the layer and color of the wire for advanced nodes. </li><li>
<a id="pgfId-1182789"></a>Only if the distance between the two wires is less than or equal to the <code>exceptSpacing</code> value given in the <code>trimShape</code> constraint defined in the technology file.</li></ul>


<p>
<a id="pgfId-1195043"></a>In addition, prBoundary also impacts trim creation and insertion. If there is a prBoundary at the top-level, the trim shapes are inserted between pathSegs if the pathSegs are within the PR boundary. No trim shape is inserted between pathSeg out of the prBoundary, Whe n the prBoundary is deleted, the <em>Stretch</em> and <em>Create Wire</em> commands create trim shapes between the pathSegs. However, if there is no prBoundary at the top-level, there is no restriction for trim creation at the top-level.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1182790"></a>The <em>Create Stranded Wire</em> command does not support interactive trimMetal layer insertion.</div>
<p>
<a id="pgfId-1182791"></a>The trim, bridge, and patch shapes are inserted interactively when the wire is created. Under the trim shape, there is a bridge shape on the metal layer. The width of the bridge shape is the same as that of the wire. There is also a patch shape on the metal layer that extends to already existing wires to the trim shape. The patch shape is inserted between the trim shape and the far end of the already existing wire.</p>
<p>
<a id="pgfId-1181216"></a>The following figure shows an already existing wire and the new wire being created. After the new wire is placed, it results in inserting trim, bridge, and patch shapes. The patch shapes are represented by extensions on wires.</p>

<p>
<a id="pgfId-1178752"></a></p>
<div class="webflare-div-image">
<img width="668" height="234" src="images/interactiveColoredRouting-60.gif" /></div>

<p>
<a id="pgfId-1178824"></a>Similarly, the following figure shows an example where a wire with inserted vias already exists and a new wire with inserted vias is being created.The trim, bridge, and patch shapes get inserted after the new wire along with the inserted vias is placed, as shown in the following figure.</p>

<p>
<a id="pgfId-1178828"></a></p>
<div class="webflare-div-image">
<img width="668" height="331" src="images/interactiveColoredRouting-61.gif" /></div>

<p>
<a id="pgfId-1178829"></a>Another example, which is a special case, is when the <code>exceptSpacing</code> value is set to <code>0</code>, then trim and bridge shapes are inserted at all wire ends, as shown in the following figure.</p>

<p>
<a id="pgfId-1176826"></a></p>
<div class="webflare-div-image">
<img src="images/12.3ISR9_trimshape_atwireend.gif" /></div>

<p>
<a id="pgfId-1180532"></a>If you create another wire next to the existing wire with trim shapes at the wire end, the middle trim shape is merged and we get three trim shapes for the two wires that are created next to each other.</p>

<p>
<a id="pgfId-1180539"></a></p>
<div class="webflare-div-image">
<img src="images/12.3ISR9_trimshape_at2wireend.gif" /></div>
<h3>
<a id="pgfId-1178456"></a><a id="38698"></a>Supporting Colored <a id="colorTrimLayer"></a>TrimMetal Layers</h3>

<p>
<a id="pgfId-1178457"></a>The trim layer can be defined in the technology file. You can assign color to a trim layer and specify that a trim layer with a given color should cut a routing layer with that color. As a result, trim shapes are automatically assigned the correct color when they are added during interactive routing. For more information, see <h-hot><a actuate="user" class="URL" href="../ascitechconstr/constr_misc.html#trimShape" show="replace" xml:link="simple">Virtuoso Technology Data ASCII Files Reference</a></h-hot> manual.</p>
<p>
<a id="pgfId-1182575"></a></p>
<p>
<a id="pgfId-1182166"></a>For example, <code>CM1</code> layer with mask1 color cuts <code>Metal1</code> with mask1color. Similarly, <code>CM1</code> layer with mask2 color cuts <code>Metal1</code> with mask2 color, as shown in the following figures.</p>

<p>
<a id="pgfId-1182176"></a></p>
<div class="webflare-div-image">
<img width="668" height="364" src="images/interactiveColoredRouting-64.gif" /></div>
<p>
<a id="pgfId-1176851"></a></p>
<div class="webflare-div-image">
<img width="691" height="400" src="images/interactiveColoredRouting-65.gif" /></div>
<h3>
<a id="pgfId-1182216"></a><a id="58321"></a>Supporting Colore<a id="trimShapeStretch"></a>d TrimMetal Layers for the Stretch Command</h3>

<p>
<a id="pgfId-1182200"></a>The <em>Stretch </em>command supports automatic insertion of trim metal layers between two existing wires when one of them is being stretched. After the new wire is stretched, it results in insertion of trim, bridge, and patch shapes. The patch shapes are represented by extensions on wires, as shown in the following figure.</p>

<p>
<a id="pgfId-1182446"></a></p>
<div class="webflare-div-image">
<img width="668" height="229" src="images/interactiveColoredRouting-66.gif" /></div>

<p>
<a id="pgfId-1182295"></a>For more information, see <a href="interactiveColoredRouting.html#22171">Inserting TrimMetal Layers in Interactive Colored Routing</a>.</p>
<p>
<a id="pgfId-1182513"></a>When you retract the stretched wire, the trim shape is removed, as shown in the following figure</p>

<p>
<a id="pgfId-1204522"></a></p>
<div class="webflare-div-image">
<img width="668" height="194" src="images/interactiveColoredRouting-67.gif" /></div>
<h4>
<a id="pgfId-1204531"></a>Selecting and Stretching a Trim Shape</h4>

<p>
<a id="pgfId-1204532"></a>When a trim shape is fully selected and there is only one selected trim shape, the trim insertion is deactivated to allow the <em>Stretch</em> command to move the trim shape and keep the abutted pathSegs connected. This is possible only if the <code>weTrimInsertion</code> environment variable is enabled. The following figure displays how the trim shape keeps the pathSeg connected when the trim shape is selected and stretched.</p>

<p>
<a id="pgfId-1204536"></a></p>
<div class="webflare-div-image">
<img width="668" height="418" src="images/interactiveColoredRouting-68.gif" /></div>
<h3>
<a id="pgfId-1183806"></a><a id="86099"></a>Supporting Colore<a id="trimShapeCreateBus"></a>d TrimMetal Layers for Create Bus</h3>

<p>
<a id="pgfId-1183807"></a>The <em>Create Bus </em>command supports automatic insertion of trim metal layers between an already existing bus and the new bus being created. After the new bus is placed, it results in insertion of trim, bridge, and patch shapes. The patch shapes are represented by extensions on buses, as shown in the following figure.</p>

<p>
<a id="pgfId-1183811"></a></p>
<div class="webflare-div-image">
<img width="668" height="393" src="images/interactiveColoredRouting-69.gif" /></div>

<p>
<a id="pgfId-1183815"></a>For more information, see <a href="interactiveColoredRouting.html#22171">Inserting TrimMetal Layers in Interactive Colored Routing</a>.</p>

<h3>
<a id="pgfId-1186974"></a><a id="79128"></a>Supporting Patc<a id="patchShapes"></a>h Metal Shapes</h3>

<p>
<a id="pgfId-1190434"></a>In Virtuoso, interactive routing represents the patch as an extension to the pathSeg that abuts the trim shape. The created and modified pathSegs, which are abutted to the inserted trims are flagged. This allows Innovus to quickly translate the oaDataBase to its internal database. However, If the abutted pathseg to a trim is not correctly flagged, Innovus does not generate the trim in its internal database and the trim does not appear in Innovus window.</p>
<p>
<a id="pgfId-1188474"></a>For a given pathSeg, a patch is represented by two end styles (begin and end), both, none, or by any one of the ends. The patch type can be any of the following: <code>notPatch</code>, <code>beginStyle</code>, <code>endStyle</code>, <code>bothStyle</code>, <code>beginFull</code>, <code>endFull</code>, <code>bothFull</code>.</p>
<p>
<a id="pgfId-1189356"></a>The following scenarios illustrate the different patch types that can be inserted on a pathSeg.</p>
<ul><li>
<a id="pgfId-1190476"></a>The patch type is <code>beginStyle</code>.<br />
<a id="pgfId-1192061"></a>In this case, the trim shape exists at the begining with a variable extension of pathSeg.<br />
<a id="pgfId-1190605"></a><div class="webflare-div-image">
<img width="633" height="286" src="images/interactiveColoredRouting-70.gif" /></div></li><li>
<a id="pgfId-1192203"></a>The patch type is <code>endStyle</code>.<br />
<a id="pgfId-1192204"></a>In this case, the trim shape exists at the end with a variable extension of pathSeg.<br />
<a id="pgfId-1192208"></a><div class="webflare-div-image">
<img width="633" height="324" src="images/interactiveColoredRouting-71.gif" /></div></li><li>
<a id="pgfId-1192191"></a>The patch type is <code>beginFull</code>.<br />
<a id="pgfId-1192596"></a>In this case, the trim shape exists at the begining of the pathSeg with no variable extension (truncate style). The space between a trim shape on one end and the pathSeg in Figure A is filled with a patch shape (pathSeg2), as shown in Figure B below.<br />
<a id="pgfId-1192412"></a><div class="webflare-div-image">
<img width="633" height="335" src="images/interactiveColoredRouting-72.gif" /></div></li><li>
<a id="pgfId-1192695"></a>The patch type is <code>endFull</code>.<br />
<a id="pgfId-1192758"></a>In this case, the trim shape exists at the end of the pathSeg with no variable extension (truncate style). The space between a trim shape on one end and the pathSeg in Figure A is filled with a patch shape (pathSeg2), as shown in Figure B below.<br />
<a id="pgfId-1192744"></a><div class="webflare-div-image">
<img width="633" height="375" src="images/interactiveColoredRouting-73.gif" /></div></li><li>
<a id="pgfId-1192828"></a>The patch type is <code>bothStyle</code>.<br />
<a id="pgfId-1190569"></a>In this case, the trim shape exists both at the begin and at the end of the pathSeg. The space between the trim shape at the begin and end of the pathSeg in Figure A is filled with patch shapes (pathSeg2 and pathSeg3), as shown in Figure B. The patch shapes are added with variable extension.<br />
<a id="pgfId-1192900"></a><div class="webflare-div-image">
<img width="633" height="242" src="images/interactiveColoredRouting-74.gif" /></div></li><li>
<a id="pgfId-1192883"></a>The patch type is <code>bothFull</code>.<br />
<a id="pgfId-1190632"></a>In this case, the trim shape exists both at the begin and at the end of the pathSeg. The space between the trim shape at the begin and end of the pathSeg in Figure A is filled with patch shapes (pathSeg2 and pathSeg3), as shown in Figure B. The patch shapes are added with truncate style at both ends.<br />
<a id="pgfId-1190570"></a><div class="webflare-div-image">
<img width="633" height="147" src="images/interactiveColoredRouting-75.gif" /></div></li><li>
<a id="pgfId-1190571"></a>When the patch type is <code>notPatch</code> <br />
<a id="pgfId-1191905"></a>In this case, the pathSeg line ends and does not have trim shapes. The following figure shows the noPatch patch type.<br />
<a id="pgfId-1201502"></a><div class="webflare-div-image">
<img width="633" height="275" src="images/interactiveColoredRouting-76.gif" /></div></li></ul>








































<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="metaldensity.html" id="prev" title="Managing Metal Density">Managing Metal Density </a></em></b><b><em><a href="wsp.html" id="nex" title="Supporting Width Spacing Patterns (ICADVM20.1 Only)">Supporting Width Spacing Patte ...</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>