
<html><head><title>Working with Buses</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="parula" />
<meta name="CreateDate" content="2020-09-18" />
<meta name="CreateTime" content="1600423189" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the capabilities to provide efficient ways to interactively route connections in order to meet critical design constraints and rules." />
<meta name="DocTitle" content="Virtuoso Interactive and Assisted Routing User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Working with Buses" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="weuser" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-09-18" />
<meta name="ModifiedTime" content="1600423189" />
<meta name="NextFile" content="strandedwire.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Layout" />
<meta name="PrevFile" content="vias.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Interactive and Assisted Routing User Guide -- Working with Buses" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="weuserICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="weuserTOC.html">Contents</a></li><li><a class="prev" href="vias.html" title="Working with Vias">Working with Vias</a></li><li style="float: right;"><a class="viewPrint" href="weuser.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="strandedwire.html" title="Working with Stranded Wires">Working with Stranded Wires</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Interactive and Assisted Routing User Guide<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>5
<a id="pgfId-1221937"></a></h1>
<h1>
<a id="pgfId-1221978"></a><hr />
<a id="44786"></a><a id="15289"></a>Working with Buses<hr />
</h1>

<p>
<a id="pgfId-1221979"></a>You can create a bus in the Virtuoso Layout Suite by using the <em>Create &#8211; Wiring &#8211; Bus</em> command. All wires of the bus, referred to as bus bits, are created on the same layer. When you change the bus layer, all bus bits change to the same layer. A bus now supports a mixture of assigned and unassigned nets, as well as repeated nets. Consider an example, where a bus has five bits bus such as: </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1198398"></a>bit0 = net &#8220;a&#8221;, bit1 = net &#8220;b&#8221;, bit2 = unassigned net, bit3 = net &#8220;c&#8221;, bit4 = unassigned net</pre>

<p>
<a id="pgfId-1198399"></a>The corresponding bundle notation is as follows</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1198400"></a>&#8220;a&#8221; + &#8220;,&#8221; + &#8220;b&#8221; + &#8220;,&#8221; + &#8220;&#8221; + &quot;,&quot; + &#8220;c&#8221; + &#8220;,&#8221; &#8220;&#8221; = &#8220;a,b,,c,&#8221;. </pre>

<p>
<a id="pgfId-1117526"></a>This means the bus supports a mixture of assigned and unassigned nets.</p>
<p>
<a id="pgfId-1126175"></a>Another example, where a bus has three bits such as:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1126186"></a>bit0 = net &quot;a&quot;, bit1 = net &quot;b&quot;, bit2 = net &quot;a&quot;</pre>

<p>
<a id="pgfId-1126193"></a>The corresponding bundle notation is as follows</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1126215"></a>&quot;a&quot; + &quot;,&quot; + &quot;b&quot; + &quot;,&quot; + &quot;a&quot; = &quot;a,b,a&quot;.</pre>

<p>
<a id="pgfId-1126222"></a>This means the bus supports repeated nets.</p>
<p>
<a id="pgfId-1083807"></a>For creating a bus, ensure that the technology file contains the minimum information, such as complete foundry rules, and that the non-default or override constraint groups, if any, are specified in the <h-hot><a actuate="user" class="URL" href="../autouser/appD.html#wireAssistant" show="replace" xml:link="simple">Wire Assistant</a></h-hot> or in the <a href="appA.html#74134">Create Bus Form</a>. A wiring constraint group (<code>virtuosoDefaultSetup</code> or <code>LEFDefaultRouteSpec</code>) that defines the valid layers and the vias allowed for routing must be present in the technology file.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1064397"></a>In some cases, the pointer is prevented from moving to a location where the bus would necessarily have violations. This is because the wires within the set are intended to be correct by construction.</div>
<p>
<a id="pgfId-1068957"></a>You can either directly refer to the procedure described in <a href="buses.html#39971">Creating a Bus</a>. </p>
<p>
<a id="pgfId-1223390"></a>This chapter covers the following topics:</p>
<ul><li>
<a id="pgfId-1068964"></a><a href="buses.html#82347">Creating a Bus Constraint</a></li><li>
<a id="pgfId-1070635"></a><a href="buses.html#33596">Autopicking Bus Bits</a></li><li>
<a id="pgfId-1068986"></a><a href="buses.html#39971">Creating a Bus</a></li><li>
<a id="pgfId-1222161"></a><a href="buses.html#82212">Restarting a Bus From Existing Routes</a></li><li>
<a id="pgfId-1070090"></a><a href="buses.html#99502">Using the Control Wire</a></li><li>
<a id="pgfId-1222150"></a><a href="buses.html#96373">Editing a Bus</a></li><li>
<a id="pgfId-1226683"></a><a href="buses.html#61345">Avoiding Shorts with Existing Blockages for Create Bus</a></li><li>
<a id="pgfId-1223405"></a><a href="buses.html#97700">Supporting Multi-Layer Bus</a></li></ul>








<h2>
<a id="pgfId-1064398"></a><a id="82347"></a>Creating <a id="busConstraint"></a>a Bus Constraint</h2>

<p>
<a id="pgfId-1069000"></a>You can create a bus constraint by using the <em>Constraint Manager</em> and the <em>Search</em> assistant. The bus constraint helps to group all nets to be routed as a bus. The <em>Create Bus </em>command recognizes the bus constraint. The <em>Create Bus </em>command starts routing the bus if you start digitization from any one of the bus pins. This feature is also known as autopicking the bus bits. For more information, see <a href="buses.html#33596">Autopicking Bus Bits</a>.</p>
<p>
<a id="pgfId-1083918"></a>The <em>Constraint Manager</em> is available only XL tier onwards. So you can use the bus constraint for creating a bus only XL tier onwards. For information about how to create a bus in L tier, see <a href="buses.html#39971">Creating a Bus</a>.</p>
<p>
<a id="pgfId-1076218"></a>To create a bus constraint in In Layout XL and higher tiers by using the <em>Constraint Manager</em>:</p>
<ol><li>
<a id="pgfId-1069082"></a>From the layout cellview, choose <em>Window &#8211; Assistants &#8211; Constraint Manager</em>.<br />
<a id="pgfId-1069083"></a>The <em>Constraint Manager</em> assistant opens.</li><li>
<a id="pgfId-1069084"></a>From the layout cellview, select <em>Window &#8211; Assistants &#8211; Navigator</em>.<br />
<a id="pgfId-1069085"></a>The <em>Navigator</em> assistant opens.</li><li>
<a id="pgfId-1069086"></a>From the <em>Navigator</em> assistant, select several nets that you want to route as a bus. Alternatively, you can also search for nets in the design by using the <em>Search</em> assistant.</li><li>
<a id="pgfId-1069171"></a>In the <em>Constraint Manager</em> assistant, click on the arrow next to the <em>Constraint Generator</em> icon.<br />
<a id="pgfId-1069208"></a><div class="webflare-div-image">
<img width="544" height="118" src="images/buses-2.gif" /></div></li><li>
<a id="pgfId-1069200"></a>Select <em>Routing &#8211; Bus</em>.<br />
<a id="pgfId-1069244"></a><div class="webflare-div-image">
<img width="544" height="396" src="images/buses-3.gif" /></div></li><li>
<a id="pgfId-1069310"></a>Expand the created constraint to verify the selected nets are part of the bus.<br />
<a id="pgfId-1224072"></a><div class="webflare-div-image">
<img width="544" height="207" src="images/buses-4.gif" /></div></li></ol>


















<h2>
<a id="pgfId-1070833"></a><a id="33596"></a>Autopicking Bus Bits</h2>

<p>
<a id="pgfId-1076346"></a>When a selected net is part of a bus constraint, autopick determines the other nets of that bus constraint on the same layer as the picked net and adds one object of each net to the pick set. If there are pre-routed nets from pins and instPins, autopick picks these wires as well and creates duplicate wires on top of the pre-existing wires.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1076486"></a>Autopick does not support pre-existing wires or dangling wires even if the associated nets are part of the bus constraint.</div>
<p>
<a id="pgfId-1071423"></a>For information about how to create a bus constraint, see <a href="buses.html#82347">Creating a Bus Constraint</a>.</p>
<p>
<a id="pgfId-1071462"></a>If you start the <em>Create Bus </em>command and click a single pin that belongs to a bus constraint, the command automatically enables bus mode. In the example below, a bus constraint is defined on <code>netx&lt;0&gt;</code>, <code>netx&lt;1&gt;</code>, and <code>netx&lt;2&gt;</code>.</p>

<p>
<a id="pgfId-1122951"></a></p>
<div class="webflare-div-image">
<img width="668" height="373" src="images/buses-5.gif" /></div>

<p>
<a id="pgfId-1122952"></a>After starting the <em>Create Bus </em>command, if you click on <code>pin x&lt;0&gt;</code>, autopick adds <code>pin x&lt;1&gt;</code> and <code>pin x&lt;2&gt;</code>to the pick set.</p>

<p>
<a id="pgfId-1122956"></a></p>
<div class="webflare-div-image">
<img src="images/616_pg204.gif" /></div>

<p>
<a id="pgfId-1071020"></a>If you area select <code>pin x&lt;0&gt;</code>, <code>pin x&lt;1&gt;</code>, and <code>pin x&lt;2&gt;</code>, then <code>pin x&lt;0&gt; </code>and <code>pin x&lt;1&gt;</code>, being part of the bus constraint, start routing in the bus mode. The other pins are not picked even though they were included in area selection because it does not belong to the bus.</p>
<p>
<a id="pgfId-1076695"></a>Autopick does not pick instPins that belong to different instances. For example, nets <code>A</code>, <code>B</code> and <code>C</code> are part of a bus constraint. Nets <code>A</code> and <code>B</code> have associated instPins on the instance <code>I0</code> and net <code>C</code> has the associated instPin on the instance <code>I1</code>. In this case, autopick on net <code>A</code> from instPin on instance <code>I0</code> will pick and draw wire for net <code>B</code> on instance <code>I0</code>. Autopick will not pick instPin on net <code>C</code> as it belongs to a different instance <code>I1</code>, even though net C belongs to the same bus constraint as nets <code>A</code> and <code>B</code>.</p>
<p>
<a id="pgfId-1071507"></a>To remove nets from an autopicked bus while the <em>Create Bus</em> command is running, keep the <code>Ctrl</code> key pressed and click on the required pins. To add nets to a bus while the <em>Create Bus</em> command is running, keep the <code>Shift</code> key pressed and click on the required pins. In the above example, to route only <code>neta</code> and <code>netb</code>, keep the <code>Ctrl</code> key pressed and click on <code>pind</code> to remove it from the pick set.</p>
<p>
<a id="pgfId-1071077"></a>The <em>Create Bus</em> command uses the following criteria to determine the objects that are autopicked:</p>
<ul><li>
<a id="pgfId-1071203"></a>Autopicked instance or top-level pins have the following same parameters as the clicked instance or top-level pin:<ul><li>
<a id="pgfId-1071149"></a>Direction &#8211; in, out, or inout</li><li>
<a id="pgfId-1071237"></a>instTerms on different nets</li></ul></li><li>
<a id="pgfId-1071249"></a>Autopicked objects are on the same LPP as the clicked object.</li><li>
<a id="pgfId-1232051"></a>Connectivity is assigned to all nets.</li><li>
<a id="pgfId-1232094"></a>Number of bends should be same for all selected wires.</li></ul>







<p>
<a id="pgfId-1086132"></a>In a set of objects that can be autopicked, preference is given to objects in the following order:</p>
<ul><li>
<a id="pgfId-1086133"></a>Aligned instPins (x or y axis)</li><li>
<a id="pgfId-1086134"></a>Closest instPins</li><li>
<a id="pgfId-1086135"></a>instPins with the same access direction (top, bottom, left, right)</li></ul>


<p>
<a id="pgfId-1071116"></a>If autopick fails to find adequate objects, you might need to complete the pick set manually.</p>

<h2>
<a id="pgfId-1070977"></a><a id="39971"></a>C<a id="creatingBus"></a>reating a Bus</h2>

<p>
<a id="pgfId-1083634"></a>You can start creating buses from the following starting points:</p>
<ul><li>
<a id="pgfId-1083635"></a>From a point in free space</li><li>
<a id="pgfId-1083636"></a>From existing pins</li><li>
<a id="pgfId-1084035"></a>From pre-existing bus pre-routes (see <a href="buses.html#82212">Restarting a Bus From Existing Routes</a>)</li></ul>


<p>
<a id="pgfId-1084039"></a>To create multiple floating wires, see <a href="wire.html#79208">Creating a Floating Wire</a>. </p>
<p>
<a id="pgfId-1084040"></a>To create a bus:</p>
<ol><li>
<a id="pgfId-1083652"></a>Launch Virtuoso Layout Suite. </li><li>
<a id="pgfId-1083656"></a>Select <em>Create &#8211; Wiring &#8211; Bus </em>or click on the icon <img width="34" height="33" src="images/buses-7.gif" />
 on the <em>Create</em><span> toolbar.</span><br />
<a id="pgfId-1230731"></a>When you start the <em>Create Bus</em> command in Layout EXL, the <em>Interactive Routing Bindkeys</em> hint box is displayed at the top-left corner of the layout canvas. The hint box describes the most useful bindkeys and shortcuts for the <em>Create Bus</em> command.<br />
<a id="pgfId-1230735"></a><div class="webflare-div-image">
<img width="633" height="194" src="images/buses-8.gif" /></div></li><li>
<a id="pgfId-1083660"></a>Press <code>F3</code>.<br />
<a id="pgfId-1083987"></a>The <a href="appA.html#74134">Create Bus Form</a> opens.</li><li>
<a id="pgfId-1083688"></a>From the <em>Layers</em> assistant, select a layer on which you want to create the bus.</li><li>
<a id="pgfId-1064496"></a>Specify the values in the <em>Number of Bits</em>, <em>Bit Spacing</em>, and <em>Width fields</em>.</li><li>
<a id="pgfId-1084097"></a>To start creating a bus in the empty space in the design display area:<ol><li>
<a id="pgfId-1092370"></a>Click at a point in the design display area to digitize the bus.</li><li>
<a id="pgfId-1084109"></a>Continue to digitize the bus and create bends.</li><li>
<a id="pgfId-1084134"></a>Press <code>Enter</code> to finish creating the bus.</li></ol></li><li>
<a id="pgfId-1083679"></a>To create a bus that has connectivity in the empty space in the design display area:<ol><li>
<a id="pgfId-1084176"></a>In the <em>Create Bus</em> form, in the <em>Net Name</em> field, specify the list of net names separated by commas or spaces.<br />
<a id="pgfId-1084277"></a>You can also specify net names in bus notation. For example, if you specify bus&lt;0:3&gt; in the <em>Net Name</em> field and start bus creation in free space, the bus wires are created on the nets bus&lt;0&gt;, bus&lt;1&gt;, bus&lt;2&gt;, bus&lt;3&gt;.<br />
<a id="pgfId-1084320"></a>If the nets specified in the <em>Net Name</em> field do not exist in the design, the nets are created. Using this method, you can create floating buses.</li><li>
<a id="pgfId-1084203"></a>Select the <em>Create Bus Constraint</em> check box if you want a bus constraint to be created automatically for the picked or the specified nets.</li><li>
<a id="pgfId-1092198"></a>Click at a point in the design display area to digitize the bus.</li><li>
<a id="pgfId-1084204"></a>Continue to digitize the bus and create bends.</li><li>
<a id="pgfId-1084205"></a>Press <code>Enter</code> to finish creating the bus.</li></ol></li><li>
<a id="pgfId-1084168"></a>To start creating a bus from existing pins, use one of the following methods to select multiple pins:<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1085691"></a>The Bus is created using the <em>Create &#8211; Wiring &#8211; Bus </em>command only. The <em>Create &#8211; Wiring &#8211; Wire</em> command creates single wires and cannot be used to create buses. </div><ol><li>
<a id="pgfId-1084362"></a>Selecting Multiple Pins<br />
<a id="pgfId-1084418"></a>When you area-select multiple pins that are on the same layer but different nets, the pin nets are used for creating the bus wires; the pin nets are populated in the <em>Net Name</em> field in the <em>Create Bus</em> form. <br />
<a id="pgfId-1084440"></a>The starting pins can be I/O pins or Soft Block pins. You can area-select level-0 pin shapes or visible level-1 instPins (The <em>Instance Pins</em> check box should be selected on the <em>Display Options</em> form). You can also start routing related nets in bus mode when top-level pin shapes are pre-selected.<br />
<a id="pgfId-1084363"></a>If the pins are on different layers, the <em>Create Bus</em> command begins wires from the routing layer that has the most number of pins. If some of the selected multiple pins are on the same net, then routing begins from only one pin on the net.</li><li>
<a id="pgfId-1200473"></a>Adding Pins to the Selection<br />
<a id="pgfId-1200474"></a>Select a single pin and <code>Shift</code> + click to add additional pins to the selection.<br />
<a id="pgfId-1200475"></a>In both the above methods, you can use the <code>Ctrl</code> and <code>Shift</code> keys to remove objects from the selection.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1084499"></a>The pin is removed only from the picked set; the originally selected set remains intact. You can use the <code>Ctrl</code> and <code>Shift</code> keys only before the first digitized point. To modify the selected set after the first point is digitized, press <code>Esc</code>.</div></li><li>
<a id="pgfId-1072784"></a>Autopicking Pins Belonging to a Bus Constraint (In Layout XL and higher tiers)<br />
<a id="pgfId-1084784"></a>By creating a bus constraint, you can define the nets to be routed as a bus. Clicking one of the bus pins starts routing all the bus nets in bus mode. For more information, see <a href="buses.html#82347">Creating a Bus Constraint</a> and <a href="buses.html#33596">Autopicking Bus Bits</a>. Even pre-selecting a bus pin that belongs to a bus constraint and then starting the <em>Create Bus</em> command starts routing all the bus pins that belong to the same bus constraint. For more information about creating a bus from existing routes, see <a href="buses.html#82212">Restarting a Bus From Existing Routes</a>.</li><li>
<a id="pgfId-1108400"></a>Adding Instance Terminals<br />
<a id="pgfId-1108438"></a>When you select an instance terminal, the wire editor tries to find if there are qualify terminals from other instances that can be used for the bus. The Create bus selects all the qualify terminals from either horizontal or vertical which ever has more qualified terminal. Following are the qualify terminals:<ul><li>
<a id="pgfId-1108442"></a>The instance master of the qualify terminal must be the same instance master of the picking terminal.</li><li>
<a id="pgfId-1108444"></a>The qualify terminal must be the same terminal on the qualify instance as the picked terminals on the instance of the picked terminals.</li><li>
<a id="pgfId-1108447"></a>The qualify terminal must intersect with either horizontal or vertical extent regions of the picked terminal.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1108766"></a>The bus wires start at pin centers.</div></li></ul></li></ol></li><li>
<a id="pgfId-1072797"></a>Right-click to display the <a href="appA.html#10652">Create Bus Context-Sensitive Menu</a>.<br />
<a id="pgfId-1085400"></a>If required, choose <a href="appA.html#64473">Use Width</a> from the context-sensitive menu to switch the control wire function to one of the extreme wires or the center wire of the bus. For information about control wires, see <a href="buses.html#73611">Using the Control Wire</a>.</li><li>
<a id="pgfId-1107628"></a>You can change width and spacing overrides at any time while creating or reshaping a bus. If you select the <em>Default Constraints</em> option from the <em>Use Spacing</em> menu, then the spacing after the bend is the <code>minSpacing</code> as shown in the figure below. The default width is based on the <code>minWidth</code> and the default spacing value is based on the <code>minSpacing</code> constraint for each layer that can be used for routing.<br />
<a id="pgfId-1064417"></a><div class="webflare-div-image">
<img width="635" height="315" src="images/buses-9.gif" /></div></li><li>
<a id="pgfId-1064418"></a> Select <em>Gather/Spread </em>from the <em>Use Spacing </em>menu of the <a href="appA.html#10652">Create Bus Context-Sensitive Menu</a> to gather or spread bus wires before the first bend of wires.<br />
<a id="pgfId-1064419"></a>If you select <em>Gather/Spread Bus</em>, the bus wires are surrounded by a dotted box called the bus cursor. Individual wires are gathered or spread inside this box, which can be moved to any desired location. Jogs are added and the wires are gathered to the minimum spacing rule or specified spacing value. The command on the context-sensitive menu toggles to <em>Cancel Gather/Spread</em>.<br />
<a id="pgfId-1100471"></a>If you select <em>Gather/Spread Bus </em>repeatedly and one of the times no gather action is performed because the <em>Bit Spacing</em> field in the form is not modified, then the <em>Create Bus</em> command restores the wire spacing that was used before the previous gather operation. For example, if you start creating a bus from pins that are non-uniformly spaced and <em>Bit Spacing</em> is <code>0</code>, and select <em>Gather/Spread Bus </em>from the <em>Create Bus</em> context-sensitive menu, the wires are gathered to minSpacing. Click and drag to pass the obstruction. If you select <em>Gather/Spread Bus </em>again without changing the <em>Bit Spacing</em> value, the  command restores the spacing that was used before the previous spacing, that is, the pin spacing will be restored.<br />
<a id="pgfId-1100532"></a>When routing a bus, each time you move the pointer, the locations of the last pathSeg leading up the pointer are computed. If you select <em>Cancel Gather/Spread Wires</em> and the wires are not fanned out to a via pattern, only one segment leads to the pointer for each wire. If you select <em>Gather/Spread Bus</em>, jogs are added to the pathSegs to bring them closer together if they are spaced farther than the minimum spacing.<br />
<a id="pgfId-1064421"></a>Pressing <code>Backspace</code> removes the jogs and the wires are not gathered or spread. <br />
<a id="pgfId-1064425"></a><div class="webflare-div-image">
<img src="images/616_pg209.gif" /></div></li><li>
<a id="pgfId-1064426"></a>To change the spacing between multiple wires, press <code>F3</code> to open <em>Create Bus</em> form. In the <em>Bit Spacing</em> field of the <em>Create Bus</em> form, specify the new spacing value. You can also change the spacing with the <em>Use Spacing</em> menu or the Wire Assistant.<br />
<a id="pgfId-1064427"></a>The spacing is updated from the last digitized point.</li><li>
<a id="pgfId-1219895"></a>If required, change the bus wire width in the <em>Width</em> field in the <em>Create Bus</em> form or select the appropriate option from the <em>Use Width</em> menu on the <a href="appA.html#97169">Create Single Wire Context-Sensitive Menu</a>. <br />
<a id="pgfId-1219899"></a>The width is updated from the last digitized point. </li><li>
<a id="pgfId-1219900"></a>To remove the last segment of a wire, use <code>Backspace</code>. <br />
<a id="pgfId-1064443"></a>Bus editing supports <em>Undo</em>, <em>Redo</em>, and <code>Backspace.</code><br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1064444"></a>Do not draw wires back over previously drawn wires.</div></li><li>
<a id="pgfId-1064447"></a>To change layers and add vias or to fan vias out to connect to the vias, see <a href="vias.html#41870">Changing Layers and Selecting Vias</a>.</li><li>
<a id="pgfId-1064452"></a>You can finish creating the bus at any point by double clicking or by pressing <code>Enter</code>. The bus ends at the pointer location.<br />
<a id="pgfId-1083710"></a>You can check the connectivity of the bus bits by using the <em>Edit Properties</em> form or the <em>Property Editor</em> assistant.</li></ol>


















































































<p>
<a id="pgfId-1087248"></a>For finishing the bus connections automatically, see <a href="assisted.html#29139">Finishing Connections</a>.</p>

<h2>
<a id="pgfId-1070046"></a><a id="82212"></a>Re<a id="restartBus"></a>starting a Bus From Existing Routes</h2>

<p>
<a id="pgfId-1124974"></a>You can use the <em>Create Bus</em> command to restart a bus by picking the end-point of any of the floating bus wires that are on nets belonging to the same bus constraint. You can restart a bus with wires on different purposes but same metal layer. </p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1124982"></a>While restarting a bus, If a via is created, then the via purpose is changed according to the layer purpose of the connected wire.</div>
<p>
<a id="pgfId-1124976"></a>To restart an existing bus, where the bus wires belong to a bus constraint:</p>
<ol><li>
<a id="pgfId-1103781"></a>Choose <em>Create &#8211; Wiring &#8211; Bus.</em><br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1103782"></a>In L, you can autopick nets of a bus constraint that has been created in XL.</div></li><li>
<a id="pgfId-1103783"></a>Click at the end-point of any of the bus wires.<br />
<a id="pgfId-1084869"></a>All the bus wires start routing on the same layer.</li></ol>





<p>
<a id="pgfId-1085846"></a>To restart an existing bus, where the bus wires do not belong to a bus constraint, use the wire tie-out method, as described below:</p>
<ol><li>
<a id="pgfId-1085127"></a>Choose <em>Create &#8211; Wiring &#8211; Bus.</em></li><li>
<a id="pgfId-1085876"></a>Pick bus wires by area-selecting all the wires of the bus.<br />
<a id="pgfId-1085142"></a>The Select Via form opens.For more information, refer to <a href="appA.html#27267">Using the Select Via Form</a>.</li><li>
<a id="pgfId-1085162"></a>Select the appropriate via for changing the bus to the required layer.</li><li>
<a id="pgfId-1085172"></a>Specify the required via alignment.</li><li>
<a id="pgfId-1085227"></a>Digitize the via.<br />
<a id="pgfId-1085264"></a>The <em>Select Via</em> form closes.</li><li>
<a id="pgfId-1085179"></a>Continue routing and digitizing the bus.<br />
<a id="pgfId-1085149"></a>The following figures shows a wire tie-out.<br />
<a id="pgfId-1084816"></a><div class="webflare-div-image">
<img src="images/616_pg209.gif" /></div><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1119246"></a>Wire tie-out works only if the distance between the centers of consecutive wires is large enough to create the required vias without creating a spacing violation.</div></li></ol>












<h2>
<a id="pgfId-1119505"></a><a id="73611"></a><a id="99502"></a>Usi<a id="usingControlWire"></a>ng the Control Wire</h2>

<p>
<a id="pgfId-1070047"></a>In the set of multiple wires, one of the wire segments is called the control wire. In a bus, it stands out as being the probed/highlighted wire segment with a small yellow box at the end of the wire segment. By default, the center wire is the control wire.</p>

<p>
<a id="pgfId-1074187"></a></p>
<div class="webflare-div-image">
<img width="668" height="308" src="images/buses-12.gif" /></div>

<p>
<a id="pgfId-1074176"></a>The control wire serves as a pivot point as the multiple wires are dragged into routing position. The other wires of the selected bus set follow the control wire at appropriate spacing.</p>
<p>
<a id="pgfId-1070052"></a>You can toggle the control wire role to one of the extreme wires of the selected bus. When creating or editing multiple wires, you can cycle the control wire role to the Top-Middle-Bottom (in a horizontal bus) or Left-Middle-Right (in a vertical bus) wires by selecting the <em>Cycle Control Wire</em> option from the <a href="appA.html#10652">Create Bus Context-Sensitive Menu</a>.</p>

<p>
<a id="pgfId-1070057"></a></p>
<div class="webflare-div-image">
<img width="668" height="373" src="images/buses-13.gif" /></div>

<p>
<a id="pgfId-1070058"></a>The wire segment assigned as the control wire continues to function as the control wire even if you select the <em>Backup Point </em>option from the context menu during multiple wire editing. The control wire, however, defaults to the middle wire if you add or remove (<code>Ctrl</code> + click) any wire segment to/from the bus.</p>
<p>
<a id="pgfId-1070059"></a>For example, in the following figure, the middle wire is the control wire.</p>

<p>
<a id="pgfId-1070063"></a></p>
<div class="webflare-div-image">
<img src="images/616_pg211.gif" /></div>

<p>
<a id="pgfId-1070064"></a>Right-click to select the <em>Cycle Control Wire</em> option from the context menu or press Control + Shift + X. The probing/highlighting and the yellow box passes on to the next possible control wire, which is the left one here.</p>

<p>
<a id="pgfId-1070068"></a></p>
<div class="webflare-div-image">
<img src="images/616_pg212.gif" /></div>

<p>
<a id="pgfId-1070069"></a>Again, select the <em>Cycle Control Wire</em> option from the context menu or press the combination Control + Shift + X. It probes/highlights the right wire as the control wire.</p>

<p>
<a id="pgfId-1070073"></a></p>
<div class="webflare-div-image">
<img src="images/616_pg213.gif" /></div>

<p>
<a id="pgfId-1070074"></a>When multiple wires are turned on the same layer, the control wire serves as the pivot point for turning the bus and determining the route. The following figures illustrate this.</p>

<p>
<a id="pgfId-1074553"></a></p>
<div class="webflare-div-image">
<img width="668" height="725" src="images/buses-17.gif" /></div>

<p>
<a id="pgfId-1074534"></a>For best results, move the pointer over the yellow box at the end of the control wire when digitizing points for multiple wires. This reduces conflicts and allows better control of wire placement.</p>
<p>
<a id="pgfId-1085500"></a>Flightlines are drawn from the current edited or created wires to the closest targets. Flightlines in a bus are controlled by the flightline starting from the control wire. The flightline from the control wire always targets the closest object, called the control target. Flightlines from other bus wires target pins that belong to the same instance and are of the same type or LPP as the control target. If no preferred choice target can be determined based on the control target, the closest object is chosen as the target.</p>
<p>
<a id="pgfId-1085501"></a>In the example below, wire on <code>netc</code> is the control wire and its control target is an instPin of the instance <code>busSub</code>. Instance pins on <code>neta</code> and <code>netb</code> of the instance <code>busSub</code> are not the closest targets for the wires on <code>neta</code> and <code>netb</code> but they belong to the same instance as the control target. Therefore, flightlines of wires on <code>netx&lt;2&gt;</code> and <code>netx&lt;1&gt;</code> are also drawn to <code>busSub</code> instead of being drawn to <code>I1</code>.</p>

<p>
<a id="pgfId-1085505"></a></p>
<div class="webflare-div-image">
<img src="images/616_pg216.gif" /></div>

<p>
<a id="pgfId-1102619"></a>If, however, wire on <code>netb</code> is the control wire, as shown below, the only appropriate targets for wires on <code>neta</code> and <code>netc</code> are their respective closest targets. For wire on <code>neta</code>, it is the instPin <code>a</code> of instance <code>I1</code>. For wire on <code>netc</code>, the closest target is the instPin <code>c</code> of instance <code>busSub</code>.</p>

<p>
<a id="pgfId-1102623"></a></p>
<div class="webflare-div-image">
<img src="images/616_pg217.gif" /></div>
<h2>
<a id="pgfId-1130177"></a><a id="96373"></a>Editing a B<a id="editbus"></a>us</h2>

<p>
<a id="pgfId-1130178"></a>In the IC6.1.6 ISR3 release, a new <em>Edit</em> &#8211; <em>Wiring</em> &#8211;<em> Bus</em> command has been introduced. The Edit Bus command is available only in Layout XL and higher tiers. Using the Edit Bus command, you can interactively change the width and spacing gap for the selected parts of a bus. The selected bus must consist of a set of parallel wires with the same number of bends. You can edit different and separate portions of a bus, several bits, or the entire bus depending on the selection. Only the selected parts of a bus can be modified while the unselected parts can be edited in certain cases to ensure valid connectivity. The Wire Assistant Bus Bit table is used to set up new width and spacing, either on individual bus bit, or on all the selected bus bits. You can also change the control wire using the Wire Assistant Bus Bit table. The control wire is the reference wire, which remains at the same location and the wires around the control wire are adjusted accordingly. The computation of the edited width and spacing is done from the control wire.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1128821"></a>You cannot change the width and spacing gap of the bus segments that are directly connected to pins.</div>
<p>
<a id="pgfId-1128822"></a>To edit the width or spacing of the selected part of a bus, perform the following steps:</p>
<ol><li>
<a id="pgfId-1126473"></a>Choose <em>Edit</em> &#8211; <em>Wiring</em> &#8211; <em>Bus</em>. The Wire Assistant opens automatically, displaying the Bus Bit table in the <em>Bus</em> tab of the <em>Override Constraints</em> section. If the Wire Assistant is already opened, the Bus Bit table is automatically updated and displays the net name as <em>unassign</em> and <em>N/A</em> in the columns when there is no bus selected, as shown in the following figure.<br />
<a id="pgfId-1126481"></a><div class="webflare-div-image">
<img width="668" height="536" src="images/buses-20.gif" /></div>
<a id="pgfId-1126482"></a>However, if the bus is selected before running the <em>Edit</em> &#8211; <em>Wiring</em> &#8211; <em>Bus </em>command, the net name corresponding to each selected bus bit appears in the Bus Bit table as shown in the figure below.<br />
<a id="pgfId-1224481"></a><br /><div class="webflare-div-image">
<img width="633" height="429" src="images/buses-21.gif" /></div>
<a id="pgfId-1129358"></a><div class="webflare-div-image">
<img width="668" height="527" src="images/buses-22.gif" /></div>
<a id="pgfId-1129554"></a>The above figure shows the <em>Various</em> value in the <em>Width</em> and <em>Gap</em> columns of the Bus Bit table.The <em>Various</em> value in the <em>Width</em> and <em>Gap</em> columns of the Bus Bit table appears  when the width of all the selected bus bits is not the same or when the spacing between all the selected bus bits is not the same.<br />
<a id="pgfId-1129555"></a>The <em>Various</em> also appears when the width of the selected segments of the bus bit are different, The following figure shows <em>Various</em> appearing on the line net.<br />
<a id="pgfId-1129568"></a><div class="webflare-div-image">
<img src="images/616ISR_EditBUSBit_Various.gif" /></div>
<a id="pgfId-1129569"></a>Also note that in the selected bus bits, the bus bit with net name <code>c</code> is considered as a control wire. <br />
<a id="pgfId-1130202"></a><div class="webflare-div-image">
<img width="668" height="371" src="images/buses-24.gif" /></div>
<a id="pgfId-1130189"></a>You can change the control wire by clicking the net name in the <em>Net</em> column of the Bus Bit table. The following figure shows the changed control wire of the selected bus.<br />
<a id="pgfId-1126502"></a><div class="webflare-div-image">
<img width="668" height="470" src="images/buses-25.gif" /></div>
<a id="pgfId-1126503"></a>You can also change the control wire using the <em>Cycle Control Wire</em> option in the Edit Bus context-sensitive menu. For more information, refer to, <a href="appA.html#73797">Edit Bus Context-Sensitive Menu</a>.</li><li>
<a id="pgfId-1126507"></a>To change the width, specify the new value in the <em>Width</em> column corresponding to the net name of the bus bit. For example, if you want to change the width of bus bit with net name <code>d</code>, specify the new value in the <em>Width</em> column corresponding to net name <code>d</code>. The following figure shows how the width of the net name <code>d</code> is changed and the spacing between the edited bus bit and the adjacent bus bits is preserved. <br />
<a id="pgfId-1126516"></a><div class="webflare-div-image">
<img width="668" height="690" src="images/buses-26.gif" /></div>
<a id="pgfId-1126517"></a>Also, once the width of one bus bit is modified, the  common <em>Width</em> field of the Bus Bit table displays <em>Various</em> as the different width values are not homogeneous anymore.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1126518"></a>The via is accordingly resized to adjust the new bus bit width.</div>
<a id="pgfId-1126519"></a>You can also change the width of all the selected bus bits. To change the width of all selected bus bits, specify the new width value in the <em>Width</em> column next to <em>All Nets</em>. When you specify the new width value, the width of all the selected bus bits is automatically updated and the spacing between the edited bus bits is automatically adjusted, if necessary, to avoid DRC violations. The following figure shows the edited width of the selected bus bits and the adjusted spacing between them.<br />
<a id="pgfId-1126531"></a><div class="webflare-div-image">
<img width="668" height="697" src="images/buses-27.gif" /></div><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1126532"></a>The vias are resized as per the edited width of all the selected bus bits.</div></li><li>
<a id="pgfId-1126533"></a>To change the spacing between two selected bits of a bus, specify the new spacing value in the <em>Gap</em> column between the two bus bits. For example, if you want to change the spacing between the bus bits with net name <code>c</code> and <code>d</code>, specify the new spacing value in the <em>Gap</em> column between the net name <code>c</code> and <code>d</code>. The following figure shows how the spacing gets adjusted between the edited bus bits. <br />
<a id="pgfId-1126547"></a><div class="webflare-div-image">
<img width="668" height="674" src="images/buses-28.gif" /></div>
<a id="pgfId-1126548"></a>Also, once the spacing between the two bus bits is modified, the spacing between all the selected bus bits is not the same and the common <em>Gap </em>field of the Bus Bit table displays <em>Various</em>.<br />
<a id="pgfId-1126549"></a>You can also change the spacing between all the selected bus bits. To change the spacing between all the selected bus bits, specify the new spacing value in the <em>Gap</em> column next to <em>All Nets</em>. The following figure shows how the spacing gets adjusted between all the selected bus bits.<br />
<a id="pgfId-1226609"></a><div class="webflare-div-image">
<img width="668" height="673" src="images/buses-29.gif" /></div></li></ol>





















































<h2>
<a id="pgfId-1226621"></a><a id="61345"></a>Avoiding S<a id="avoidingshorts_createbus"></a>horts with Existing Blockages for Create Bus</h2>

<p>
<a id="pgfId-1226622"></a>The <em>Create Bus</em> command has been enhanced to avoid creating a short with an existing blockage by skipping tracks. To route the net without a short, the <em>Create Bus</em> command uses the next nearest track that does not have a blockage. For more information, see <a href="strandedwire.html#37456">Avoiding Shorts with Existing Blockages</a> described for the <em>Create Stranded Wire</em> command.</p>

<h2>
<a id="pgfId-1222426"></a><a id="97700"></a>Supporting Multi-Layer Bus</h2>

<p>
<a id="pgfId-1222455"></a>The multi-layer bus functionality is available only in Layout XL and higher tiers. With multi-layer bus support, you can create and digitize the bits of a bus on different metal layers. A multi-layer bus can be created from the following starting points:</p>
<ul><li>
<a id="pgfId-1222456"></a>Existing pins</li><li>
<a id="pgfId-1222460"></a>Existing bus pre-routes (see <a href="buses.html#82212">Restarting a Bus From Existing Routes</a>)<br /><div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1222461"></a>
You cannot create a multi-layer bus starting in an empty space. This is because you need to define the layer for each bus bit. For a single-layer bus, the bus is automatically drawn on the layer set as active in the Palette.</div></li></ul>




<p>
<a id="pgfId-1222462"></a>This section describes the following multi-layer bus functionality. </p>
<ul><li>
<a id="pgfId-1222466"></a><a href="buses.html#90573">Creating a Multi-Layer Bus from Existing Pins</a></li><li>
<a id="pgfId-1222470"></a><a href="buses.html#59407">Creating a Multi-Layer Bus from an Empty Space</a></li><li>
<a id="pgfId-1222474"></a><a href="buses.html#59811">Transitioning Capabilities in a Multi-Layer Bus</a></li><li>
<a id="pgfId-1222478"></a><a href="buses.html#76323">Stacked Wires within Multi-Layer Bus</a></li><li>
<a id="pgfId-1222482"></a><a href="buses.html#84019">Transitioning Capabilities in a Wire Stack within a Multi-Layer Bus</a></li><li>
<a id="pgfId-1222486"></a><a href="buses.html#26381">Customizing Multi-Layer Bus Transition</a></li></ul>






<h3>
<a id="pgfId-1222488"></a><a id="90573"></a>Creating a Multi-Layer Bus from Existing Pins</h3>

<p>
<a id="pgfId-1222489"></a>To create a multi-layer bus starting from pins located on different metal layers:</p>
<ol><li>
<a id="pgfId-1222493"></a>Choose <em>Create</em> &#8211; <em>Wiring</em> &#8211; <em>Bus</em> or click on the <em>Create Bus</em> icon <img width="34" height="33" src="images/buses-31.gif" /><span> on the </span><em>Create</em><span> toolbar.</span></li><li>
<a id="pgfId-1222497"></a>Right-click anywhere in the canvas to display the <a href="appA.html#10652">Create Bus Context-Sensitive Menu</a>. </li><li>
<a id="pgfId-1222498"></a>Choose <em>Multi-Layer Bus Selection</em>. If this option is not selected, the bus is created on a single metal layer even if the selected pins are on different metal layers.<br />
<a id="pgfId-1222502"></a><div class="webflare-div-image">
<img src="images/12.2ISR_multilayerbus_option.gif" /></div></li><li>
<a id="pgfId-1222503"></a>To start creating a bus by digitizing pins on different metal layers, select the required pins in the layout design.</li><li>
<a id="pgfId-1222504"></a>Use the options available on the <em>Use Spacing</em> submenu to specify the spacing between the bus bits. The spacing between the bus bits of the multi-layer bus is based on <em>Default Constraints</em>, <em>Source Objects</em>, <em>Target Objects</em>, and <em>Gather/Spread</em>. By default, the <em>Source Objects</em> option is selected. You can change the spacing between the bus bits on different metal layers at any time while creating or reshaping a bus. <br />
<a id="pgfId-1222509"></a><div class="webflare-div-image">
<img width="635" height="425" src="images/buses-33.gif" /></div><ul><li>
<a id="pgfId-1222510"></a>Source Objects<br />
<a id="pgfId-1222511"></a>When selected, the spacing between the bus bits on different metal layers is adjusted to align with the spacing of the source object. The following figure shows the spacing between the bus bits when <em>Source Objects</em> is selected.<br /><ffi2-fig-frame-in-2 id="#id1222518">
<a id="pgfId-1222518"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img width="635" height="349" src="images/buses-34.gif" /></div></li><li>
<a id="pgfId-1222519"></a>Default Constraints<br />
<a id="pgfId-1222520"></a>When selected, the bus bits are abutted because no minimum spacing exist in between the bus bits on two different layers. The following figure shows that the bus bits of different metal layers are abutted and there is no space in between the bus bits. <br /><ffi2-fig-frame-in-2 id="#id1222527">
<a id="pgfId-1222527"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img width="668" height="563" src="images/buses-35.gif" /></div></li><li>
<a id="pgfId-1222528"></a>Target Objects<br />
<a id="pgfId-1222529"></a>When selected, the spacing between the bus bits on different metal layers is adjusted to align with the spacing of the target object. The following figure shows the spacing between the bus bits when <em>Target Objects</em> is selected.<br /><ffi2-fig-frame-in-2 id="#id1222533">
<a id="pgfId-1222533"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img src="images/12.2ISR_UseTargetSpacing.gif" /></div></li><li>
<a id="pgfId-1222534"></a>Gather/Spread<br />
<a id="pgfId-1222535"></a>To change the spacing between the bus bits that are in the same direction before a bend is inserted, use <em>Gather/Spread</em>. Alternatively, you can press the <code>Ctrl+Shift+G</code> keys. <br />
<a id="pgfId-1222536"></a>When gathered, the bus bits are spaced with minimum spacing in order to minimize the space used. After the bus bits are gathered, the adjacent bus bits on different layers are abutted; whereas, the adjacent bus bits on the same layer are evenly spaced at a distance equal to the minimum spacing defined for that layer. In the following figure, you can see a bus with the bits gathered.<br /><ffi2-fig-frame-in-2 id="#id1222543">
<a id="pgfId-1222543"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img width="668" height="422" src="images/buses-37.gif" /></div></li></ul>
<a id="pgfId-1222544"></a>When spread, the bus bits are spaced out and placed with the same spacing as that applied before the gather operation or with the same spacing as that of the target objects. In the following figure, you can see that the bus bits are spread with the same spacing as that applied before the gather.<br />
<a id="pgfId-1222551"></a><div class="webflare-div-image">
<img width="668" height="409" src="images/buses-38.gif" /></div></li><li>
<a id="pgfId-1222552"></a>Use one of the following methods to complete the creation of a multi-layer bus, <ol><li>
<a id="pgfId-1222553"></a><em>Auto Terminate</em><br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1222554"></a>For automatic termination of a multi-layer bus, the <em>Auto Terminate</em> option available in the Create Bus form and the <em>Interactive</em> section of the Wire Assistant must be selected.</div>
<a id="pgfId-1222555"></a>Place the control wire to overlap the target pin, and then double-click or press <code>Enter</code> to terminate the bus.<br />
<a id="pgfId-1222556"></a>The bus bits are placed automatically at the required spacing. The following figure shows a multi-layer bus that is placed using <em>Auto terminate</em>.<br /><ffi2-fig-frame-in-2 id="#id1222560">
<a id="pgfId-1222560"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img src="images/12.2ISR_MultilayerBus_AutoTerminate.gif" /></div></li><li>
<a id="pgfId-1222561"></a><em>Target Objects</em><br />
<a id="pgfId-1222562"></a>The <em>Use Spacing &#8211; Targets Objects</em> option helps prevent jogs, which get added when a bus is placed using <em>Auto Terminate</em>. The following figure shows that the spacing between the bus bits is adjusted based on the spacing between the target pins when the multi-layer bus creation is complete.<br /><ffi2-fig-frame-in-2 id="#id1222573">
<a id="pgfId-1222573"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img width="668" height="408" src="images/buses-40.gif" /></div></li><li>
<a id="pgfId-1222574"></a><em>Finish Bus</em> <br />
<a id="pgfId-1222575"></a>Use the <em>Finish Bus </em>command to complete a multi-layer bus if the order of the source and target pins is the same. If the order is different, the bus bits are not routed properly. To properly route the bus bits when the order of the source and target pins is different, use the <em>Finish Trunk</em> command. The following figure shows a multi-layer bus placed using the <em>Finish Bus</em> command.<br /><ffi2-fig-frame-in-2 id="#id1222579">
<a id="pgfId-1222579"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img src="images/12.2ISR_Multilayerbus_FinishBus.gif" /></div></li><li>
<a id="pgfId-1222580"></a><em>Finish Trunk</em> <br />
<a id="pgfId-1222581"></a>When the bus bits are routed, the twigs and trunks get inserted automatically to appropriately route the bus bits to the target pins that are in different order. The following figure shows a multi-layer bus placed using the <em>Finish Trunk</em> command. All the twigs are created on <code>Metal2 </code>to complete the routing of the bus bits to the target pins that are in a different order.<br /><ffi2-fig-frame-in-2 id="#id1222585">
<a id="pgfId-1222585"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img width="668" height="404" src="images/buses-42.gif" /></div></li></ol></li></ol>






























































<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1222586"></a>You can check the connectivity of the bus bits by using the Edit Properties form or the <em>Property Editor</em> assistant.</div>
<p>
<a id="pgfId-1222587"></a>You can switch the bus bits between layers, but you can do this only after inserting a via. For more information, see <a href="buses.html#59811">Transitioning Capabilities in a Multi-Layer Bus</a>.</p>
<p>
<a id="pgfId-1222591"></a>You can also specify a pattern for the vias in a multi-layer bus. The via pattern in a multi-layer bus is similar to the one supported for a single-layer bus. For more information, see <h-hot><a actuate="user" class="URL" href="../weuser/appA.html#selectViaPattern" show="replace" xml:link="simple">Via Pattern</a></h-hot>.</p>

<h3>
<a id="pgfId-1222595"></a><a id="59407"></a>Creating a Multi-La<a id="multilayerbus_emptyspace"></a>yer Bus from an Empty Space</h3>

<p>
<a id="pgfId-1222596"></a>To create a multi-layer bus starting from an empty space:</p>
<ol><li>
<a id="pgfId-1222600"></a>Choose <em>Create</em> &#8211; <em>Wiring</em> &#8211; <em>Bus</em> or click on the <em>Create Bus</em> icon <img src="images/CreateBusicon.gif" /><span> on the </span><em>Create</em><span> toolbar.</span></li><li>
<a id="pgfId-1222601"></a>Press <code>F3</code>.<br />
<a id="pgfId-1222605"></a>The <a href="appA.html#74134">Create Bus Form</a> opens.</li><li>
<a id="pgfId-1222606"></a>Select the <em>Custom Layer Pattern</em> check box to enable a customized layer pattern for creating a multi-layer bus.</li><li>
<a id="pgfId-1222607"></a>Specify a pattern for creating a multi-layer bus in the <em>Custom Layer Pattern</em> combo box. The specified pattern is added to the drop-down list, along with other available patterns.<br />
<a id="pgfId-1222608"></a>You can also select an existing available pattern from the <em>Custom Layer Pattern</em> combo box. The specified custom layer pattern is repeated to adjust the number of bits that have been specified for the multi-layer bus. This happens when the number of bus bits is more than the number of layers specified in the pattern.<br />
<a id="pgfId-1222613"></a><div class="webflare-div-image">
<img width="633" height="570" src="images/buses-44.gif" /></div>
<a id="pgfId-1222616"></a>For more information on how to define a custom layer pattern, see <a href="buses.html#48530">Defining a Custom Layer Pattern</a>.</li><li>
<a id="pgfId-1222618"></a>To start creating a digitized multi-layer bus in an empty space, click in the design display area. <br />
<a id="pgfId-1222619"></a>The following figure illustrates how a multi-layer bus is created with eight bus bits and a custom layer pattern defined using only four bits (<code>Metal1 Metal2) (Metal2 Metal3)</code>. In this case, the custom layer pattern is repeated, (<code>Metal1 Metal2) (Metal2 Metal3) (Metal1 Metal2) (Metal2 Metal3)</code>, to adjust the number of bits that have been specified for the multi-layer bus.<br />
<a id="pgfId-1222623"></a><div class="webflare-div-image">
<img src="images/12.3ISR10_multilayerbus_emptyspace.gif" /></div></li><li>
<a id="pgfId-1222627"></a>Right-click to display the <a href="appA.html#10652">Create Bus Context-Sensitive Menu</a>.<br />
<a id="pgfId-1222631"></a>Use the options available on the <em><a href="appA.html#64473">Use Width</a><em></em></em> submenu to specify the width of the multi-layer bus bits. <br />
<a id="pgfId-1222632"></a>Similarly, use the options available on the <em>Use Spacing</em> submenu to specify the spacing between the stacks in a multi-layer bus.<br />
<a id="pgfId-1222635"></a>For more information about multi-layer bus support, see <a href="buses.html#97700">Supporting Multi-Layer Bus</a>.</li><li>
<a id="pgfId-1222637"></a>You can move the bus bits up or down one or multiple layers. However, you can do this only after inserting a via. To do this:<ol><li>
<a id="pgfId-1222638"></a>Start the <em>Create Bus</em> command.</li><li>
<a id="pgfId-1222639"></a>Start creating a multi-layer bus by clicking at a point in an empty space in the design display area.</li><li>
<a id="pgfId-1222640"></a>Right-click and select <em>Via Up T</em>o <em>&lt;layer name&gt;</em> or <em>Via Down</em> <em>To &lt;layer name&gt;</em> to move the bus bits up or down a layer, respectively. The following figure shows an example in which vias are inserted for a multi-layer bus and the bus bits on different metal layers move up to a higher metal layer when <em>Via Up</em> To <em>&lt;layer name&gt; </em>is selected.<br /><ffi2-fig-frame-in-2 id="#id1222644">
<a id="pgfId-1222644"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img width="604" height="329" src="images/buses-46.gif" /></div>
<a id="pgfId-1222645"></a>You can also move all the bus bits to the same layer, and then switch back to a multi-layer configuration. For more information, see <a href="buses.html#24139">Switching Bus Bits to a Previously Used Multi-Layer Configuration</a>.</li></ol></li><li>
<a id="pgfId-1222649"></a>Press <code>Enter</code> to complete the multi-layer bus creation.</li></ol>
































<h4>
<a id="pgfId-1222652"></a><a id="48530"></a><a id="customlayerpattern_define"></a>Defining a Custom Layer Pattern</h4>

<p>
<a id="pgfId-1222653"></a>You can define a custom layer pattern for creating a multi-layer bus starting from an empty space. </p>
<p>
<a id="pgfId-1222654"></a>The custom layer pattern is a string. The syntax to define a custom layer pattern is:</p>

<a id="pgfId-1222655"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
(layerName1 [purposeName1] layerName2 [purposeName2] ...) [(layerName3 [purposename3]) ...]</pre>

<p>
<a id="pgfId-1222656"></a>In this format, each bus bit is defined with a layer name or a layer-purpose pair name. For example, if the pattern is defined as <code>(Metal1 drawing) (Metal2 drawing)</code>, the first bus bit in a two-bit bus is routed on layer-purpose pair <code>Metal1 drawing</code> and the other bus bit is routed on layer-purpose pair <code>Metal2 drawing</code>. </p>
<p>
<a id="pgfId-1222657"></a>If an error occurs while defining&#160;&#160;a custom layer pattern, such as parenthesis mismatch (extra &#39;(&#39; or &#39;)&#39; ), unknown layer name, unknown purpose name, or purpose name specified before layer name, a warning message is displayed. The following figure shows an example of the type of message that is displayed.</p>

<p>
<a id="pgfId-1222661"></a></p>
<div class="webflare-div-image">
<img src="images/12.3ISR10_multilayerbus_message.gif" /></div>

<p>
<a id="pgfId-1222662"></a>The following are some of the formats in which a custom layer pattern can be defined for a multi-layer bus.</p>
<ul><li>
<a id="pgfId-1222663"></a>A custom layer pattern with non-stacked bus bits on different metal layers. For example, <code>Metal1 Metal2 Metal3</code>. <br />
<a id="pgfId-1222664"></a>The following figure shows an example with three bus bits and the custom layer pattern defined as <code>Metal1 Metal2 Metal3</code>. In this case, the defined pattern has single bus bits on three different metal layers.<br />
<a id="pgfId-1222668"></a><div class="webflare-div-image">
<img width="633" height="501" src="images/buses-48.gif" /></div></li><li>
<a id="pgfId-1222669"></a>Multiple layer names specifying a combination of non-stacked and stacked bus bits. For example, <code>Metal1 Metal2 (Metal2 Metal3)</code>or <code>Metal1 (Metal2 Metal3) Metal3</code>. <br />
<a id="pgfId-1222670"></a>The following figure shows an example with four bits and the custom layer pattern is combination of non-stacked and stacked bus bits <code>Metal1 Metal2 (Metal2 Metal3)</code>. In this case, the defined pattern has single bus bits on two different metal layers and a stack of two bus bits.<br />
<a id="pgfId-1222674"></a><div class="webflare-div-image">
<img width="633" height="419" src="images/buses-49.gif" /></div></li><li>
<a id="pgfId-1222675"></a>Multiple layer-purpose pairs enclosed in parenthesis. This defines stacked wires where centerlines overlap each other. For example, <code>(Metal1 Metal2 Metal3)</code> defines a stack of three bus bits. <br />
<a id="pgfId-1222676"></a>The following figure shows an example with three bus bits and the custom layer pattern that is defined consists of three layer names <code>(Metal1 Metal2 Metal3)</code>. In this case, a stack of three bus bits is created.<br />
<a id="pgfId-1222680"></a><div class="webflare-div-image">
<img width="633" height="373" src="images/buses-50.gif" /></div></li><li>
<a id="pgfId-1222681"></a>A custom layer pattern with multiple stacks. For example, <code>(Metal1 Metal3) (Metal2 Metal4)</code> defines a pattern having two stacks and each stack consisting of two-bit pattern.<br />
<a id="pgfId-1222682"></a>The following figure shows an example with eight bits and the custom layer pattern consists of two stacks <code>(Metal1 Metal3) (Metal2 Metal4)</code>. This custom layer pattern defines two stacks, each with a two-bit pattern. However, the four stacks that are seen is because of the repetition.<br />
<a id="pgfId-1222686"></a><div class="webflare-div-image">
<img width="633" height="391" src="images/buses-51.gif" /></div></li></ul>






















<h3>
<a id="pgfId-1222688"></a><a id="59811"></a>Transitioning Capabilities in a Multi-Layer Bus</h3>

<p>
<a id="pgfId-1222689"></a>You can move the bus bits up or down one or multiple layers at a time. However, you can do this only after inserting a via. You can also move all the bus bits to the same layer, and then switch back to a multi-layer configuration.</p>

<h4>
<a id="pgfId-1222690"></a>Switching Bus Bits between Layers</h4>

<p>
<a id="pgfId-1222691"></a>You can switch the bus bits between layers by moving up or down one or multiple layers. </p>
<ol><li>
<a id="pgfId-1222692"></a>Start the <em>Create Bus</em> command.</li><li>
<a id="pgfId-1222693"></a>Click and drag to select the required pins.</li><li>
<a id="pgfId-1222694"></a>Right-click the bus being created and select <em>Via Up T</em>o <em>&lt;layer name&gt;</em> or <em>Via Down</em> <em>To &lt;layer name&gt;</em> to move the bus bits up or down a layer, respectively.<br />
<a id="pgfId-1222695"></a>The following figures shows an example where the bus bits on <code>Metal1</code> move up to <code>Metal2</code> and the bus bits on <code>Metal3</code> move up to <code>Metal4</code> when <em>Via Up</em> To <em>&lt;layer name&gt; </em>is selected <br />
<a id="pgfId-1225315"></a><div class="webflare-div-image">
<img width="633" height="439" src="images/buses-52.gif" /></div>
<a id="pgfId-1222706"></a>Similarly, in the following figure, you can see an example in which the bus bits on <code>Metal2</code> move down one layer to <code>Metal1</code> and the bus bits on <code>Metal4</code> move down to <code>Metal3</code> when <em>Via Down To &lt;layer name&gt; </em>is selected.<br />
<a id="pgfId-1225425"></a><div class="webflare-div-image">
<img width="633" height="438" src="images/buses-53.gif" /></div></li></ol>











<h4>
<a id="pgfId-1222717"></a>Switching Bus Bits to a Target Layer</h4>

<p>
<a id="pgfId-1222718"></a>You can add vias to the layer of the target objects. The target objects are all the objects that are pointed to by the flightlines when the <em>Create Bus</em> command is run. However, if the flightline option in the Wire Assistant is off, then vias are not added.</p>
<ol><li>
<a id="pgfId-1222719"></a>Start the <em>Create Bus</em> command.</li><li>
<a id="pgfId-1222720"></a>Click and drag to select the required pins.</li><li>
<a id="pgfId-1222721"></a>Right-click the bus being created and select <em>Via T</em>o <em>Target Layer</em> to move the bus bits to the layer of the target objects. The following figures shows an example where the bus bits on <code>Metal1</code> move up to <code>Metal4</code> as <code>Metal4</code> is the layer of the target objects. Similarly, the bus bit on <code>Metal</code> 2 and <code>Metal3</code> move to <code>Metal3</code> and <code>Metal2,</code> respectively, as they are the layer of the target objects.<br />
<a id="pgfId-1222725"></a><div class="webflare-div-image">
<img src="images/617ISR_multilayerbus_viatotargetlayers.gif" /></div>
<a id="pgfId-1222726"></a>When a bus bit is already on the same layer as its target object layer, then no via is added for that bus bit. If all bus bits are already on the same layer as their respective target objects, then a via is not added and a message is displayed in CIW as follows:
&quot;WARNING* (LE-105035): Already on specified layer.&quot;<br />
<a id="pgfId-1222731"></a><div class="webflare-div-image">
<img width="635" height="358" src="images/buses-55.gif" /></div></li></ol>










<h4>
<a id="pgfId-1222733"></a><a id="52323"></a>Switching Bus Bits to the Same Layer </h4>

<p>
<a id="pgfId-1222734"></a>To move all bus bits to the same layer:</p>
<ol><li>
<a id="pgfId-1222735"></a>Start the <em>Create Bus</em> command.</li><li>
<a id="pgfId-1222736"></a>Start creating the bus by digitizing the pins.</li><li>
<a id="pgfId-1222737"></a>Right-click the bus being created and point to <em>Via</em>.</li><li>
<a id="pgfId-1222738"></a>Click <em>Select Via</em> or press the <code>Spacebar</code> key.<br />
<a id="pgfId-1222739"></a>The Select Via form appears.</li><li>
<a id="pgfId-1222740"></a>In the form, select the metal layer to which you want to move all the bus bits. In the following figure, all the bus bits are moved to <code>Metal5</code>.<br />
<a id="pgfId-1222748"></a><div class="webflare-div-image">
<img width="668" height="524" src="images/buses-56.gif" /></div></li></ol>








<h4>
<a id="pgfId-1222750"></a><a id="24139"></a>Switching Bus Bits to a Previously Used Multi-Layer Configuration</h4>

<p>
<a id="pgfId-1222751"></a>Switching the bus bits between a multi-layer configuration and the same metal layer or a target layer provides an easy way to tunnel the bus on one layer, and then quickly switch back to the multi-layer configuration.</p>
<p>
<a id="pgfId-1222752"></a>For example, create a bus starting from the bus bits on <code>Metal1</code>, <code>Metal2</code>, and <code>Metal3</code>, and then select <em>Via Up T</em>o <em>&lt;layer name&gt; </em>to move the bus bits up a layer.<em> </em>The vias are inserted and the bus bits on <code>Metal1</code>, <code>Metal2</code>, and <code>Metal3</code> are placed on <code>Metal2</code>, <code>Metal3</code>, and <code>Metal4</code>, respectively. If you next select the <em>Revert To Previous Multi-Layer Bus </em>option from the <em>Via</em> submenu, vias are inserted and the bus bits switch back to <code>Metal1</code>, <code>Metal2</code>, and <code>Metal3</code>, as shown in the following figure. </p>

<p>
<a id="pgfId-1222762"></a></p>
<div class="webflare-div-image">
<img width="668" height="306" src="images/buses-57.gif" /></div>

<p>
<a id="pgfId-1222763"></a>If you once again select <em>Revert To Previous Multi-Layer Bus</em>, the bus bits switch back to <em>Metal2</em>, <em>Metal3</em>, and <em>Metal4</em>, as shown in the following figure.</p>
<p>
<a id="pgfId-1222771"></a></p>

<div class="webflare-div-image">
<img width="668" height="335" src="images/buses-58.gif" /></div>

<p>
<a id="pgfId-1222772"></a>In the same way, when you move all the bus bits to the same layer, you can revert to the multi-layer bus configuration. In the following figure, you can see that the bus bits on <code>Metal5</code> have moved back to the original multi-layer configuration.</p>

<p>
<a id="pgfId-1230076"></a></p>
<div class="webflare-div-image">
<img width="668" height="355" src="images/buses-59.gif" /></div>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1222779"></a>The <em>Revert to Previous Multi-layer Bus</em> option is disabled once you have moved back to the original multi-layer configuration from the single layer. </div>
<p>
<a id="pgfId-1222780"></a>The behavior of the bus bits is based on the control wire. You can cycle the control wire through middle, top, and bottom bits based on the current layer the bus bits are on. This is similar to the cycle control feature in a single-layer bus. For more information, see <a href="buses.html#73611">Using the Control Wire</a>.</p>

<h3>
<a id="pgfId-1222786"></a><a id="76323"></a>Stacked Wires within<a id="stackedwires"></a> Multi-Layer Bus</h3>

<p>
<a id="pgfId-1222787"></a>You can create a wire stack by physically stacking pins or wires belonging to adjacent layers on top of each other. This ensures that the metal shapes across all wires in the wire stack coincide. Wires in a wire stack have the same origin and the centerline of the wires in the wire stack should completely overlap. </p>
<p>
<a id="pgfId-1222788"></a>To create a wire stack within a multi-layer bus, you need to start from existing stacked pins or wires. You can create a wire stack with completely overlapping wires or pins on different metal layers. For example, a wire stack is created when a pin on <code>Metal1</code> layer overlaps with the pins on <code>Metal2</code> and <code>Metal3</code> layers, as shown in the following figure.</p>

<p>
<a id="pgfId-1222792"></a></p>
<div class="webflare-div-image">
<img src="images/617ISR_stackedwires.gif" /></div>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1222793"></a>You cannot create a wire stack starting in an empty space.</div>
<p>
<a id="pgfId-1222794"></a>When creating a wire stack, the wires remain stacked throughout. For example, the wires remain stacked at the first bend and even when you change the wire spacing. However, the spacing between wire stacks changes.</p>
<p>
<a id="pgfId-1222795"></a>The spacing between the wire stacks is based on the <em>Source Objects</em>, <em>Default Constraints</em>, <em>Gather/Spread</em>, and <em>Overrides by layer</em> options. These options are available in the <em>Use Spacing</em> submenu. By default, the spacing between the wire stacks is adjusted to align with the spacing of the source objects, as shown in the following figure.</p>

<p>
<a id="pgfId-1222801"></a></p>
<div class="webflare-div-image">
<img width="668" height="264" src="images/buses-61.gif" /></div>

<p>
<a id="pgfId-1222802"></a>You can adjust the spacing between the wire stacks by selecting the other options available on the <em>Use Spacing</em> submenu. For example, when you select the <em>Default Constraints</em> option, the wire stacks are abutted based on minSpacin<code>g</code>. The spacing between the wire stacks is set to the largest of all <code>minSpacing</code> values specified for the metal layers involved in the wire stack, as shown in the following figure.</p>

<p>
<a id="pgfId-1222809"></a></p>
<div class="webflare-div-image">
<img width="668" height="364" src="images/buses-62.gif" /></div>

<p>
<a id="pgfId-1222810"></a>The spacing between the wire stacks is also maintained when they are gathered or spread. The following figure shows how the spacing between the wire stacks is adjusted based on whether they are gathered or spread.</p>

<p>
<a id="pgfId-1222818"></a></p>
<div class="webflare-div-image">
<img width="668" height="255" src="images/buses-63.gif" /></div>

<p>
<a id="pgfId-1222819"></a>The spacing between the wire stacks can also be specified by using the <em>Overrides by layer</em> option in the <em>Use Spacing</em> submenu. When the <em>Overrides by layer</em> option is selected, the spacing between the wire stacks is set to the largest of all spacing values specified for the metal layers in the width and spacing table on the <em>Net</em> tab in the Wire Assistant, as shown in the following figure.</p>

<p>
<a id="pgfId-1222828"></a></p>
<div class="webflare-div-image">
<img width="668" height="483" src="images/buses-64.gif" /></div>

<p>
<a id="pgfId-1222829"></a>You can complete creating wire stacks either in an empty space or at a destination pin.</p>
<ul><li>
<a id="pgfId-1222830"></a>In an empty space<br />
<a id="pgfId-1222831"></a>When the wire stacks are completed in an empty space, floating wire stacks are created, as shown in the following figure.<br />
<a id="pgfId-1222835"></a><div class="webflare-div-image">
<img src="images/616ISR_finish_emptyspace.gif" /></div></li><li>
<a id="pgfId-1222836"></a>At a destination pin<br />
<a id="pgfId-1222837"></a>When wire stacks end at destination pins, they take the spacing from the destination pins, which applies only in the last section of the wire stacks, as shown in the following figure.<br />
<a id="pgfId-1222841"></a><div class="webflare-div-image">
<img src="images/616ISR_finish_destinationpin.gif" /></div></li></ul>










<h3>
<a id="pgfId-1222844"></a><a id="84019"></a><a id="stackWireViaInsertion"></a>Transitioning Capabilities in a Wire Stack within a Multi-Layer Bus</h3>

<p>
<a id="pgfId-1222845"></a>While creating a wire stack from stacked pins or from already existing stacked wires, you can now insert vias to the wire stacks. You can move a wire stack up or down one or multiple layers at a time by inserting a via. Wires in a wire stack have the same origin and the centerline of the wires in the wire stack completely overlaps even after the wire stack moves up or down. You can also move all the bus bits to the same layer, and then switch back to a multi-layer configuration. </p>

<h4>
<a id="pgfId-1222846"></a>Transitioning a Wire Stack between Layers</h4>

<p>
<a id="pgfId-1222847"></a>You can transition a wire stack between layers by moving up or down to one or multiple layers. To do this:</p>
<ol><li>
<a id="pgfId-1222848"></a>Start the <em>Create Bus</em> command.</li><li>
<a id="pgfId-1222849"></a>Click and drag to select the required stacked pins.</li><li>
<a id="pgfId-1222850"></a>Right-click the wire stack being created and select <em>Via Up T</em>o <em>&lt;layer name&gt;</em> or <em>Via Down</em> <em>To &lt;layer name&gt;</em> to move the wire stack up or down a layer, respectively. The following figures shows an example where vias are inserted for each wire stack and the wire stacks on different metal layers move up a higher metal layer when <em>Via Up</em> To <em>&lt;layer name&gt; </em>is selected. After inserting a via, the multi-layer bus continues in the straight direction.<br />
<a id="pgfId-1222854"></a><div class="webflare-div-image">
<img src="images/617ISR6_stackwire_straight.gif" /></div>
<a id="pgfId-1222855"></a>You can create a bend but cannot change the metal layer at the same time, as shown in the following figure.<br />
<a id="pgfId-1222859"></a><div class="webflare-div-image">
<img src="images/617ISR6_stackedwire_bend.gif" /></div>
<a id="pgfId-1222860"></a>Similarly, in the following figure, you can see an example in which the wire stacks on higher metal layers move down a metal layer when <em>Via Down</em> To <em>&lt;layer name&gt; </em>is selected.<br />
<a id="pgfId-1222865"></a><div class="webflare-div-image">
<img width="635" height="293" src="images/buses-69.gif" /></div></li></ol>















<h4>
<a id="pgfId-1222866"></a>Transitioning a Wire Stack to a Target Layer</h4>

<p>
<a id="pgfId-1222867"></a>You can add vias to the layer of the target objects. The target objects are all the objects that are pointed to by the flightlines when the <em>Create Bus</em> command is run. However, if the <em>Show Flightline</em> option in the Wire Assistant is off, then vias are not added.</p>
<ol><li>
<a id="pgfId-1222868"></a>Start the <em>Create Bus</em> command.</li><li>
<a id="pgfId-1222869"></a>Click and drag to select the required stacked pins.</li><li>
<a id="pgfId-1222870"></a>Right-click the wire stack being created and select <em>Via T</em>o <em>Target Layer</em> to move the wire stack to the layer of the target wire stack. The following figures shows an example where the wire stack on <code>Metal3</code> movesup to <code>Metal4</code> because <code>Metal4</code> is the layer of the target wire stack. <br />
<a id="pgfId-1222875"></a><div class="webflare-div-image">
<img width="635" height="155" src="images/buses-70.gif" /></div></li></ol>





<h4>
<a id="pgfId-1222876"></a>Transitioning a Wire Stack to the Same Layer </h4>

<p>
<a id="pgfId-1222877"></a>To move the wire stack to the same layer:</p>
<ol><li>
<a id="pgfId-1222878"></a>Start the <em>Create Bus</em> command.</li><li>
<a id="pgfId-1222879"></a>Start creating the wire stack by digitizing the stacked pins.</li><li>
<a id="pgfId-1222880"></a>Right-click the wire stack being created and point to <em>Via</em>.</li><li>
<a id="pgfId-1222881"></a>Click <em>Select Via</em> or press the <code>Spacebar</code> key.<br />
<a id="pgfId-1222882"></a>The Select Via form appears.</li><li>
<a id="pgfId-1222883"></a>In the form, select the metal layer to which you want to move the wire stack. When moving to the same layer, the bus bits in the wire stack are spread, such that there are no spacing violations. In the following figure, all the bus bits are moved to <code>Metal5</code> and the spacing between the bus bits is adjusted to avoid the spacing violations.<br />
<a id="pgfId-1222892"></a><div class="webflare-div-image">
<img width="635" height="532" src="images/buses-71.gif" /></div></li></ol>








<h4>
<a id="pgfId-1222893"></a>Switching Wire Stack to a Previously Used Multi-Layer Configuration</h4>

<p>
<a id="pgfId-1222894"></a>When the wire stack is switched between layers by moving up or down one or multiple layers or by moving to a target layer, same metal layer. you can revert back to a previous multi-layer bus configuration. </p>
<p>
<a id="pgfId-1222895"></a>When you start creating a bus from stacked pins, and then select <em>Via Up T</em>o <em>&lt;layer name&gt;,</em> vias are inserted for each wire stack and the wire stack moves up to a higher metal layer. If you now select the <em>Revert To Previous Multi-Layer Bus </em>option from the <em>Via</em> submenu, vias are inserted again and the bus bits switch back to the previous multi-layer configuration of the wire stack, as shown in the following figure. </p>

<p>
<a id="pgfId-1222904"></a></p>
<div class="webflare-div-image">
<img width="668" height="198" src="images/buses-72.gif" /></div>

<p>
<a id="pgfId-1222905"></a>If you once again select <em>Revert To Previous Multi-Layer Bus</em>, the wire stack again switches back to previously used multi-layer configuration, as shown in the following figure.</p>

<p>
<a id="pgfId-1222914"></a></p>
<div class="webflare-div-image">
<img width="668" height="167" src="images/buses-73.gif" /></div>

<p>
<a id="pgfId-1222915"></a>In case of a wire stack on the same layer, you can revert to the previously used multi-layer bus configuration. When you revert to the previously used multi-layer configuration, same spacing between the wire stacks is retained and you continue with the bus bits that are spread. If you now make a bend and click and continue to create a multi-layer bus, the bus bits are gathered and you move back to the multi-layer wire stack configuration.</p>

<p>
<a id="pgfId-1222924"></a></p>
<div class="webflare-div-image">
<img width="668" height="471" src="images/buses-74.gif" /></div>
<h3>
<a id="pgfId-1222927"></a><a id="26381"></a>Customizing <a id="wemultilayercustomtransition"></a>Multi-Layer Bus Transition</h3>

<p>
<a id="pgfId-1222928"></a>You can define customized SKILL procedures to create complex multi-layer bus transition patterns as explained below.</p>

<h4>
<a id="pgfId-1222929"></a>Defining a SKILL Procedure</h4>

<p>
<a id="pgfId-1222930"></a>To define the layers to which the bus bits should be transitioned, you can write a SKILL procedure that returns the list of layers to transition to. When you define the procedure, you need to assign a name to it. The named procedure is then called by the system when you click the associated option from the <em>Via</em> submenu or use the assigned bindkey. </p>
<p>
<a id="pgfId-1222931"></a>The SKILL procedure that you define must have two arguments, the first is the <code>cellViewId</code> and the second is a list of net and associated layers (<code>netId</code> and <code>LayerNum</code>); for example, <code>list(list(netId1 layer1) list(netId2 layer2))</code>. The <code>cellViewId</code> is used to extract the layer name from the technology file, which makes a layer transition independent of the technology file, and <code>netLayerPairs</code> can be used to extract the layers the bus bits are on currently and to specify the layers to which the bus bits would move.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1222932"></a>It is not mandatory to use the <code>cellViewId</code> and the <code>netLayerPairs</code> inside the SKILL procedure. However, they must be a part of the arguments list.</div>
<p>
<a id="pgfId-1222933"></a>The following example defines a procedure that switches bus bits from the input metal layer to <code>Metal1</code> and <code>Metal2</code>. The input metal layer is the layer on which the bus bit is&#160;&#160;currently drawn.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222934"></a>(procedure (alternate_Metal1Metal2 cellViewId netLayerPairs) </pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222935"></a>    (let ()         </pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222936"></a>        (list &quot;Metal1&quot; &quot;Metal2&quot;) </pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222937"></a>    ) </pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222938"></a>) </pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1222939"></a>** The cellViewId and netLayerPairs are automatically provided by the application when the procedure is called.<br />** alternate_Metal1Metal2 is the name of the procedure, which is a user-defined value.</pre>

<p>
<a id="pgfId-1222940"></a>The procedure returns a list of valid layer names or valid layer numbers. The second net of the list provided by the system moves to the second layer number or layer name provided by the procedure. This means that the order defined in the procedure is maintained and the list returned by the procedure is read by the application in the same order. For example:</p>
<p>
<a id="pgfId-1222941"></a>List of list of <code>netId</code> and <code>LayerId</code> given by the application is <code>netOne Metal1, netTwo Metal2,&#8230;., netX MetalX</code>.</p>
<p>
<a id="pgfId-1222942"></a>List of <code>LayerId</code> given by the procedure is <code>Metal3, Metal4, &#8230;., MetalX</code>.</p>
<p>
<a id="pgfId-1222943"></a>Then, by default <code>netOne</code> moves to <code>Metal3</code>, <code>netTwo</code> to <code>Metal4</code>, and so on.</p>
<p>
<a id="pgfId-1222944"></a>The following are some additional examples that explain how the SKILL procedures to customize layer transition in a multi-layer bus can be defined.</p>

<h4><em>
<a id="pgfId-1222945"></a><strong><em>Example1</em></strong></em></h4>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222946"></a>(procedure (pattern_M1M2M3 cellViewId netLayerPairs)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222947"></a>    (let ()</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222948"></a>        (list &quot;Metal1&quot; &quot;Metal2&quot; &quot;Metal3&quot;)    </pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222949"></a>    )</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222950"></a>) </pre>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1222951"></a></pre>
<p>
<a id="pgfId-1222964"></a></p>
<div class="webflare-div-image">
<img width="668" height="345" src="images/buses-75.gif" /></div>

<p>
<a id="pgfId-1222965"></a>When this SKILL procedure is run, bus bits switch to <code>Metal1</code>, <code>Metal2</code>, and <code>Metal3</code>, irrespective of the input metal layer of the bus bit. This alternate transition of bus bits applies to the complete bus whatever is its size.</p>

<h4><em>
<a id="pgfId-1222966"></a><strong><em>Example2</em></strong></em></h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1222967"></a> (procedure (viaUpTwice cellViewId args)</pre>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222968"></a>    (let (techFileId netLayerPair layerNum newLayerName newLayerNum layerName</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222969"></a>             result)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222970"></a>        result = nil</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222971"></a>        techFileId = (techGetTechFile cellViewId)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222972"></a>        (foreach netLayerPair args</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222973"></a>            layerNum = (cadr netLayerPair)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222974"></a>            layerName = (techGetLayerName techFileId layerNum)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222975"></a>            newLayerName = layerName</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222976"></a>            (case layerName</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222977"></a>                (&quot;Metal1&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222978"></a>                    newLayerName = &quot;Metal3&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222979"></a>                )</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222980"></a>                (&quot;Metal2&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222981"></a>                    newLayerName = &quot;Metal4&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222982"></a>                )</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222983"></a>                (&quot;Metal3&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222984"></a>                    newLayerName = &quot;Metal5&quot;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222985"></a>                )</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222986"></a>            )</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222987"></a>            result = (tconc result newLayerName)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222988"></a>        )</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222989"></a>        (car result)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222990"></a>    )</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1222991"></a>) </pre>
<p>
<a id="pgfId-1222992"></a>The following figure shows the output when this SKILL procedure is run:</p>
<ul><li>
<a id="pgfId-1222993"></a>All bits on <code>Metal1</code> move up to <code>Metal3</code></li><li>
<a id="pgfId-1222994"></a>All bits on <code>Metal2</code> move up to <code>Metal4</code> </li><li>
<a id="pgfId-1222995"></a>All bits on <code>Metal3</code> move up to <code>Metal5</code> </li><li>
<a id="pgfId-1222996"></a>Bus bits on other metal layers remain unchanged<br />
<a id="pgfId-1223000"></a><div class="webflare-div-image">
<img width="668" height="324" src="images/buses-76.gif" /></div></li></ul>






<h4><em>
<a id="pgfId-1223001"></a><strong><em>Example 3</em></strong></em></h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223002"></a>(procedure (stitchM1M2M3M4ToM2M1M4M3 cellViewId args)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223003"></a>    (let (techFileId netLayerPair layerNum newLayerName newLayerNum layerName</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223004"></a>             result)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223005"></a>        result = nil</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223006"></a>        techFileId = (techGetTechFile cellViewId)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223007"></a>        (foreach netLayerPair args</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223008"></a>            layerNum = (cadr netLayerPair)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223009"></a>            layerName = (techGetLayerName techFileId layerNum)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223010"></a>            newLayerName = layerName</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223011"></a>            (case layerName</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223012"></a>                (&quot;Metal1&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223013"></a>                    newLayerName = &quot;Metal2&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223014"></a>                )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223015"></a>                (&quot;Metal2&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223016"></a>                    newLayerName = &quot;Metal1&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223017"></a>                )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223018"></a>                (&quot;Metal3&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223019"></a>                    newLayerName = &quot;Metal4&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223020"></a>                )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223021"></a>                (&quot;Metal4&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223022"></a>                    newLayerName = &quot;Metal3&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223023"></a>                )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223024"></a>            )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223025"></a>            result = (tconc result newLayerName)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223026"></a>        )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223027"></a>        (car result)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223028"></a>    )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1223029"></a>)</pre>

<p>
<a id="pgfId-1223030"></a>The following figure shows the output when this SKILL procedure is run:</p>
<ul><li>
<a id="pgfId-1223031"></a>All bits on <code>Metal1</code> move up to <code>Metal2</code></li><li>
<a id="pgfId-1223032"></a>All bits on <code>Metal2</code> move to <code>Metal1</code> </li><li>
<a id="pgfId-1223033"></a>All bits on <code>Metal3</code> move up to <code>Metal4</code></li><li>
<a id="pgfId-1223034"></a>All bits on <code>Metal4</code> move to <code>Metal3</code> </li><li>
<a id="pgfId-1223035"></a>Bus bits on other metal layers remain unchanged<br />
<a id="pgfId-1223039"></a><div class="webflare-div-image">
<img width="668" height="344" src="images/buses-77.gif" /></div></li></ul>







<h4>
<a id="pgfId-1223040"></a>Customizing the Create Bus Context-Sensitive Menu</h4>

<p>
<a id="pgfId-1223041"></a>You can include the SKILL procedure that you define as an option on the <em>Via</em> submenu in the <em>Create Bus</em> context-sensitive menu and assign a bindkey to it. You can then quickly access and run the procedure by using the bindkey or by clicking the associated option from the submenu.</p>
<p>
<a id="pgfId-1223042"></a>The <em>How to define custom transitions</em> options available on the <em>Via</em> submenu provides information about how you can customize the multi-layer bus functionality.</p>

<p>
<a id="pgfId-1223047"></a></p>
<div class="webflare-div-image">
<img width="668" height="378" src="images/buses-78.gif" /></div>

<p>
<a id="pgfId-1223048"></a> To add the SKILL procedure as an option on the <em>Via</em> submenu, use the <a href="../sklayoutref/wire.html#weAddCustomTransitionMenuItem">weAddCustomTransitionMenuItem</a> SKILL API. You can add multiple procedures to the <em>Via</em> submenu, which are placed one below the other, as shown in the following figure. </p>

<p>
<a id="pgfId-1223053"></a></p>
<div class="webflare-div-image">
<img width="668" height="638" src="images/buses-79.gif" /></div>

<p>
<a id="pgfId-1223054"></a>To remove an option from the <em>Via</em> submenu, use the <a href="../sklayoutref/wire.html#weRemoveCustomTransitionMenuItem">weRemoveCustomTransitionMenuItem</a> SKILL API. The following figure shows the customized menu after an existing option is removed.</p>

<p>
<a id="pgfId-1223059"></a></p>
<div class="webflare-div-image">
<img width="668" height="192" src="images/buses-80.gif" /></div>

<p>
<a id="pgfId-1223060"></a>To retrieve the list of customized options added to the <em>Via</em> submenu, use the <a href="../sklayoutref/wire.html#weGetCustomTransitionMenuItems">weGetCustomTransitionMenuItems</a> SKILL API. The following figure shows a list of customized options added to the <em>Via</em> submenu.</p>
<p>
<a id="pgfId-1222447"></a></p>

<div class="webflare-div-image">
<img width="668" height="438" src="images/buses-81.gif" /></div>
<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="vias.html" id="prev" title="Working with Vias">Working with Vias</a></em></b><b><em><a href="strandedwire.html" id="nex" title="Working with Stranded Wires">Working with Stranded Wires</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>