
<html><head><title>Working with Vias</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="parula" />
<meta name="CreateDate" content="2020-09-18" />
<meta name="CreateTime" content="1600423228" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the capabilities to provide efficient ways to interactively route connections in order to meet critical design constraints and rules." />
<meta name="DocTitle" content="Virtuoso Interactive and Assisted Routing User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Working with Vias" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="weuser" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-09-18" />
<meta name="ModifiedTime" content="1600423228" />
<meta name="NextFile" content="buses.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Layout" />
<meta name="PrevFile" content="wire.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Interactive and Assisted Routing User Guide -- Working with Vias" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="weuserICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="weuserTOC.html">Contents</a></li><li><a class="prev" href="wire.html" title="Working with Wires">Working with Wires</a></li><li style="float: right;"><a class="viewPrint" href="weuser.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="buses.html" title="Working with Buses">Working with Buses</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Interactive and Assisted Routing User Guide<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>4
<a id="pgfId-1174505"></a></h1>
<h1>
<a id="pgfId-1174508"></a><hr />
<a id="44786"></a><a id="15289"></a>Working with Vias<hr />
</h1>

<p>
<a id="pgfId-1222982"></a><a id="1060007"></a>Via<a id="usingVias"></a> definitions must exist in the technology file in order to be available for interactive and assisted routing. </p>
<p>
<a id="pgfId-1063546"></a>This chapter describes the following topics:</p>
<ul><li>
<a id="pgfId-1063550"></a><a href="vias.html#73921">Specifying a Valid Via List</a></li><li>
<a id="pgfId-1102914"></a><a href="vias.html#36452">Specifying Via Parameters Calculation Mode</a></li><li>
<a id="pgfId-1063554"></a><a href="vias.html#41870">Changing Layers and Selecting Vias</a></li><li>
<a id="pgfId-1134495"></a><a href="vias.html#88802">Inserting Vias Automatically</a></li><li>
<a id="pgfId-1066191"></a><a href="vias.html#38510">Fanning Out Wires to Vias</a></li><li>
<a id="pgfId-1063566"></a><a href="vias.html#66069">Using Via Assistance</a></li><li>
<a id="pgfId-1063570"></a><a href="vias.html#52040">Creating an Array of Vias</a></li><li>
<a id="pgfId-1063571"></a><a href="vias.html#12724">Stacking Vias</a></li><li>
<a id="pgfId-1232330"></a><a href="vias.html#48230">Changing Via Cut Color</a></li></ul>








<p>
<a id="pgfId-1113674"></a>In 20nm, the <code>cdsGenVias</code> are supported by wire editor. For more information, refer to <a href="../ascitechfile/chap7.html#cdsViaDevice">cdsViaDevice</a>.</p>

<h2>
<a id="pgfId-1063573"></a><a id="73921"></a>Specifying a Valid Via List</h2>

<p>
<a id="pgfId-1223179"></a>The vias that are available for wire editing and creation are determined from the <em>Via</em> constraint group specified in the <em>Create Via</em> section in the <h-hot><a actuate="user" class="URL" href="../vlehelp/appA.html#layoutEditorOptionsCreateVia" show="replace" xml:link="simple">Layout Editor Options form</a></h-hot>. Only the vias specified in the <code>validVia</code> list in the selected constraint group will be used when creating wires. See <a href="technology.html#15448">Constraint Groups</a>for more information about defining constraint groups.</p>
<p>
<a id="pgfId-1223184"></a>In addition to standard and custom viaDefs, the interactive and assisted routing commands, such as <em>Create Wire</em>, <em>Point to Point</em>, <em>Guided Routing</em>, and <em>Finish Wire,</em> support standard and custom via variants.</p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1223185"></a>Interactive routing commands does not support table-based <code>validVia</code> constraints.</div>

<p>
<a id="pgfId-1223187"></a>For information about adding customized vias to the technology file, see <h-hot><a actuate="user" class="URL" href="../ascitechfile/chap7.html#firstpage" show="replace" xml:link="simple">Technology File Via Definitions and Via Specifications</a></h-hot> in the <em><a actuate="user" class="URL" href="../ascitechfile/ascitechfileTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Technology Data ASCII Files Reference</a></em>.</p>

<h2>
<a id="pgfId-1223190"></a><a id="36452"></a>Specifying Via Parameters Calculation Mode</h2>

<p>
<a id="pgfId-1223191"></a>For creating a via and the via enclosure explanation, the interactive and assisted routing commands, such as <em>Create Wire</em>, <em>Point to Point</em> routing, <em>Guided</em> <em>Routing</em>, and <em>Finish Wire</em>, use the <em>Via Parameters Calculation mode</em> that is specified in the <em>Wire Editing </em>section of the <h-hot><a actuate="user" class="URL" href="../vlehelp/appA.html#layoutEditorOptionsCreateVia" show="replace" xml:link="simple">Layout Editor Options form</a></h-hot>. Depending on the via calculation mode, the results of the assisted routing commands are changed.</p>
<ul><li>
<a id="pgfId-1223193"></a>When <em>Min Rules &amp; ViaDef</em> is specified, the interactive and assisted routing commands use the larger via parameter value found in the minimum rules and the viaDef.</li><li>
<a id="pgfId-1223194"></a>When <em>Minimum Rules</em> is specified, the interactive and assisted routing commands use via parameter values from the minimum rule set. If a parameter value is not found in the minimum rules, value from the viaDef is used.</li><li>
<a id="pgfId-1223195"></a>When <em>ViaDef Defaults</em> is specified, the interactive and assisted routing commands use via parameter values from the viaDef which are legal. Whenever a parameter value in the viaDef is less than the minimum rule, a warning is issued and the value of the minimum rule is used instead.</li></ul>



<h2>
<a id="pgfId-1223198"></a><a id="41870"></a>Changing <a id="chgLayerAddVia"></a>Layers and Selecting Vias</h2>

<p>
<a id="pgfId-1223202"></a>For more information about creating wires, see <a href="wire.html#22844">Creating Wires</a>.</p>
<p>
<a id="pgfId-1223203"></a>You can now change a layer at any time during interactive routing. While creating a wire, you can change the layer after dropping a via or a via stack by selecting outgoing wire layer in the Palette Assistant. To change the wire layer while creating a wire:</p>
<p>
<a id="pgfId-1223207"></a>I) Use the <a href="appA.html#36233">Rotate Via(s) Cut Pattern</a> and <em>Via Down to &lt;layer name&gt;</em> commands on the <a href="appA.html#97169">Create Single Wire Context-Sensitive Menu</a> when the <em>Create Wire</em> or <em>Create Bus</em> command is active:</p>
<ol><li>
<a id="pgfId-1223211"></a>Start the <em>Create Wire</em> command.</li><li>
<a id="pgfId-1223212"></a>Start creating the wire by digitizing the wire points.</li><li>
<a id="pgfId-1223213"></a>Right-click to select <em>Via Up</em>to <em>&lt;layer name&gt;</em> or <em>Via Down</em> <em>to &lt;layer name&gt;</em> to change the wire layer to a higher or lower layer, respectively.</li><li>
<a id="pgfId-1223214"></a>Continue digitizing points on the new layer.<br />
<a id="pgfId-1223282"></a><div class="webflare-div-image">
<img width="635" height="195" src="images/vias-2.gif" /></div></li><li>
<a id="pgfId-1223283"></a>Complete the command by pressing <code>Esc</code>.<br />
<a id="pgfId-1223284"></a>Notice that the center of layer enclosures of the created vias coincides the intersecting centerlines at the endpoints of the two wire pathSegs on different layers. This is shown in the figures below. The first figure shows a zoomed-in view of point 7 of the wire above and the second figure shows the zoomed-in view of point 9.<br />
<a id="pgfId-1223294"></a><div class="webflare-div-image">
<img width="635" height="330" src="images/vias-3.gif" /></div></li></ol>













<p>
<a id="pgfId-1223301"></a>II) By using the <a href="appA.html#89302">Select Via</a> command on the <a href="appA.html#97169">Create Single Wire Context-Sensitive Menu</a> when the <em>Create Geometric Wire</em>, <em>Create Wire</em> or <em>Create Bus</em> command is active:</p>
<ol><li>
<a id="pgfId-1223302"></a>Start the <em>Create Wire</em> command.</li><li>
<a id="pgfId-1223303"></a>Start creating the wire by digitizing the wire points.</li><li>
<a id="pgfId-1223304"></a>Right-click to select <em>Select Via</em> or press the <code>Spacebar</code> key.<br />
<a id="pgfId-1223305"></a>The Select Via form appears.</li><li>
<a id="pgfId-1223306"></a>In the first column, click the target layer button to select the layer you want to change the wire to.<br />
<a id="pgfId-1223307"></a>The via in the second column is selected by default when you click the corresponding target layer. <br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1223308"></a>If you select a different via from the cyclic field, click the target layer again to confirm the layer selection.</div>
<a id="pgfId-1223309"></a>If you move the pointer to the layout window now, a preview of the via appears. The <em>Select Via</em> form remains open until you digitize the via.<br />
<a id="pgfId-1223314"></a><div class="webflare-div-image">
<img width="635" height="709" src="images/vias-4.gif" /></div>
<a id="pgfId-1223319"></a><div class="webflare-div-image">
<img width="635" height="683" src="images/vias-5.gif" /></div></li><li>
<a id="pgfId-1223320"></a>While the <em>Select Via</em> form is open, you can click other target layers.<br />
<a id="pgfId-1223321"></a>Clicking more than one target layer until a via is digitized creates a via stack. At this point, you can do one of the following:<ol><li>
<a id="pgfId-1223322"></a>To change the vias in the via stack, click other target layers.</li><li>
<a id="pgfId-1223323"></a>To remove the via stack, click the current layer button. All vias from the pathSeg end being dragged are removed.</li></ol></li><li>
<a id="pgfId-1223324"></a>To specify the via definition and <code>cutClass</code>, click the <em>Options</em> button. The Select Via Options form appears as shown in the following figure. For more information about the override variant parameters, cut class and the via definition values, see <em>Override Variant</em> <em>Parameters</em>, <em>Cut Class</em> and <em>Via Definitions</em> in the <em><a actuate="user" class="URL" href="../vlehelp/appA.html#createViaOptionsForm" show="replace" xml:link="simple">Create Via Options Form</a></em> in the Virtuoso Layout Suite documentation<em>.</em><br />
<a id="pgfId-1223329"></a><div class="webflare-div-image">
<img src="images/617ISR8_selectviaoptionsform.gif" /></div></li><li>
<a id="pgfId-1223330"></a>In the <em>Select Via</em> form, click the <em>Rotate Via(s) Cut Pattern </em>button to rotate the via shape.</li><li>
<a id="pgfId-1223331"></a>In the <em>Via Alignment</em> section, select the <em>Automatic</em> check box. The <em>Via Alignment</em> options are also available on the right-click context menu.Notice that the via now aligns to one side of the existing pathSeg.<br />
<a id="pgfId-1223336"></a><div class="webflare-div-image">
<img width="635" height="676" src="images/vias-7.gif" /></div>
<a id="pgfId-1223341"></a><div class="webflare-div-image">
<img width="635" height="674" src="images/vias-8.gif" /></div></li><li>
<a id="pgfId-1223342"></a>In the design window, click at a point to digitize the via location.<br />
<a id="pgfId-1223343"></a>The <em>Select Via</em> form closes. Notice the change in the via alignment with respect to the existing pathSeg when you move the pointer to either direction of the pathSeg.</li><li>
<a id="pgfId-1223344"></a>Digitize a few wire points.</li><li>
<a id="pgfId-1223345"></a>Right-click to select <em>Select Via</em> or press the <code>Spacebar</code> key.<br />
<a id="pgfId-1223346"></a>The Select Via form appears.</li><li>
<a id="pgfId-1223347"></a>In the first column, click the target layer button to indicate the layer you want to change the wire to. In the second column, select one of the available vias from the cyclic field.</li><li>
<a id="pgfId-1223348"></a>In the <em>Override</em> section, click one of the custom alignment buttons. The <em>Via Alignment</em> options are also available on the right-click context menu. Alternatively, you can press the <code>Ctrl</code> key and scroll the mouse wheel up or down to cycle through the via alignment values.<br />
<a id="pgfId-1223352"></a><div class="webflare-div-image">
<img src="images/616_SelectVia_override1.gif" /></div></li><li>
<a id="pgfId-1223353"></a>In the design display area, click at a point to digitize the via location.<br />
<a id="pgfId-1223354"></a>The <em>Select Via</em> form closes. Notice the via alignment stays constant with respect to the existing pathSeg when you move the pointer to either direction of the pathSeg.</li><li>
<a id="pgfId-1223355"></a>Digitize a few wire points.</li><li>
<a id="pgfId-1223356"></a>Complete the command by pressing <code>Esc</code>.<br />
<a id="pgfId-1223357"></a>The figure below shows the resultant of using automatic and custom via alignment options.<br />
<a id="pgfId-1223370"></a><div class="webflare-div-image">
<img width="635" height="227" src="images/vias-10.gif" /></div></li></ol>


















































<p>
<a id="pgfId-1223371"></a>If only one layer and one via are available for selection, you can press the <code>Spacebar</code> key to place the vias. The layer changes to the only available layer. If the current routing layer has more than one layer available for selection, the Select Via form opens where you can choose a layer or via type. For more information, refer to <a href="appA.html#27267">Using the Select Via Form</a>.</p>

<h2>
<a id="pgfId-1223377"></a><a id="autoviainsert"></a><a id="88802"></a>Inserting Vias Automatically</h2>

<p>
<a id="pgfId-1223378"></a>The <em>Create Wire</em> command now supports automatic insertion of vias. When a wire which is being created overlaps with same net of wires and between wire and a top-level pin or instance pin, a via is inserted automatically.</p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1223379"></a>
The <em>Create Wire</em> command supports automatic via insertion only when the <a href="appB.html#29887">weAutoDropViaForOverlaps<code></code></a> environment variable is set to <code>t</code>.</div>

<p>
<a id="pgfId-1225306"></a><strong>I)</strong> By using the Create Wire command.</p>
<ol><li>
<a id="pgfId-1223383"></a>To start the <em>Create Wire</em> command, choose <em>Create &#8211; Wiring &#8211; Wire</em>.</li><li>
<a id="pgfId-1223384"></a>While creating the wire press F3. The Create Wire form appears.</li><li>
<a id="pgfId-1223385"></a>In the Create Wire form, specify the net name in the <em>Net Name</em> field. </li><li>
<a id="pgfId-1223386"></a>After the connectivity for the wire is specified, create the wire on the <code>Metal1</code> layer.</li><li>
<a id="pgfId-1223387"></a>Now, select <code>Metal2</code> layer and again start the <em>Create Wire</em> command.</li><li>
<a id="pgfId-1223388"></a>Specify the same net connectivity for the wire created on <code>Metal2</code> layer as you had specified for the wire created on <code>Metal1</code> layer in the <em>Net Name</em> field of the Create Wire form.</li><li>
<a id="pgfId-1223389"></a>Now, create the wire on the <code>Metal2</code> layer such that it overlaps the wire created on <code>Metal1</code> layer. A via is inserted automatically on the overlap wires of the same net, as shown in the following figure.<br />
<a id="pgfId-1224804"></a><div class="webflare-div-image">
<img src="images/616ISR5_autoviainsertion.gif" /></div>
<a id="pgfId-1223394"></a>A via stack is inserted when a wire on <code>Metal1</code> layer overlaps with the wire on <code>Metal3</code> layer. The following figure shows the via stack created on <code>Metal1-Metal3</code> layer.<br />
<a id="pgfId-1224842"></a><div class="webflare-div-image">
<img src="images/616ISR5_autoviastackinsertion.gif" /></div></li></ol>















<p>
<a id="pgfId-1223399"></a>When a wire on <code>Metal1</code> layer collinear overlaps with a wire on <code>Metal3</code> layer on the same net, a via is inserted automatically and is stretched so that the overlap area is filled with via cuts.</p>

<p>
<a id="pgfId-1223403"></a></p>
<div class="webflare-div-image">
<img src="images/616ISR5_autoviastretch.gif" /></div>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1223404"></a>The <em>Allow Loops</em> setting is considered while inserting the via automatically. This option is available in the <a href="appA.html#99011">Layout Editor Options Form</a>.</div>

<p>
<a id="pgfId-1223408"></a>Similarly, a via is automatically inserted on a top-level pin or an instance pin when a wire intersets or overlaps the pin. The following figure shows the via stack created between <code>Metal1-Metal4</code> layer when a wire on <code>Metal1</code> layer overlaps with the top-level pin on <code>Metal4</code> layer.</p>

<p>
<a id="pgfId-1223412"></a></p>
<div class="webflare-div-image">
<img src="images/616ISR_autovia_wire-pin.gif" /></div>

<p>
<a id="pgfId-1223413"></a><strong>II)</strong> By using the <em>Create Bus</em> command</p>
<p>
<a id="pgfId-1225468"></a>The <em>Create Bus</em> command also supports automatic insertion of vias. When a bus that is being created overlaps with same net of bus bits and between bus and a top-level pin or an instance pin, a via is inserted automatically. The following figure shows an example when a via is automatically inserted between the bus on <code>Metal1-Metal2</code> layer when a bus being created on <code>Metal1</code> layer overlaps with the bus that exists on <code>Metal2</code> layer.</p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1223414"></a>The vias in <em>Create Bus</em> are added only if there are no violations.</div>

<p>
<a id="pgfId-1223418"></a></p>

<div class="webflare-div-image">
<img src="images/616ISR_autovia_CreateBus.gif" /></div>

<p>
<a id="pgfId-1223419"></a>You can slide the bus bits along with the vias. To slide the bus bits, hold the <code>Shift+Ctrl</code> keys and move the mouse pointer to the right or left of the current position. The following figure shows the change in the via position when the bus bits slides from left to the right.</p>

<p>
<a id="pgfId-1223423"></a></p>
<div class="webflare-div-image">
<img width="668" height="421" src="images/vias-17.gif" /></div>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1223424"></a>The bus bits can also slide across tracks.</div>

<p>
<a id="pgfId-1225545"></a><strong>III)</strong> By using the <em>Stretch</em> command.</p>
<p>
<a id="pgfId-1223425"></a>The Stretch command also supports automatic insertion of vias. The following figures shows that when stretching a wire which overlaps with same net of wires, a via is inserted automatically. </p>

<p>
<a id="pgfId-1223429"></a></p>
<div class="webflare-div-image">
<img src="images/616ISR_stretchwires_viainsertion.gif" /></div>
<h2>
<a id="pgfId-1223431"></a><a id="38510"></a>Fanning Out Wires to Vias</h2>

<p>
<a id="pgfId-1223432"></a>When wires are at the minimum wire spacing but the via spacings are larger, the wires can either be fanned out to connect to the vias in the specified <h-hot><a actuate="user" class="URL" href="../weuser/appA.html#selectViaPattern" show="replace" xml:link="simple">pattern</a></h-hot> or can be back tracked to intersect the previous segment in the wire. This is controlled by using the <em>Fan Out to Vias</em> command on the <a href="appA.html#22235">Use Spacing</a> sub-menu on the <a href="appA.html#10652">Create Bus Context-Sensitive Menu</a>.</p>

<h2>
<a id="pgfId-1223441"></a><a id="66069"></a>Using Via Assistance</h2>

<p>
<a id="pgfId-1223442"></a>Via assistant helps determine a legal via site location where you can add a via during routing and not violate design clearance rules. </p>

<p>
<a id="pgfId-1223446"></a></p>
<div class="webflare-div-image">
<img width="604" height="239" src="images/vias-19.gif" /></div>

<p>
<a id="pgfId-1223447"></a>To enable via assistance:</p>
<ul><li>
<a id="pgfId-1223448"></a>The <em>Create Via </em>constraint group in the <em>Options &#8211; Editor</em> form must contain the constraints <code>horizontalPitch</code> and <code>verticalPitch</code>. For example, <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1223449">
<a id="pgfId-1223449"></a>routingGrids(
     ( horizontalPitch       &quot;metal1&quot;   2.4 )
     ( verticalPitch         &quot;metal1&quot;   2.4 ) 
</pre></li><li>
<a id="pgfId-1223450"></a><em>Interactive Mode</em> must be set to <em>Enforce</em> in the <em>Options &#8211; DRD Edit </em>form. </li><li>
<a id="pgfId-1223451"></a>The last digitized point of the wire being routed must be off the routing grid. </li></ul>




<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1223452"></a>Via assistance does not apply to multiple wire editing and is available only to pathSegs in In Layout XL and higher tiers (<em>Create Geometric Wire</em> and <em>Create Wire</em> commands). </div>
<h2>
<a id="pgfId-1223454"></a><a id="52040"></a>Creating an Array of Vias</h2>

<p>
<a id="pgfId-1223455"></a>The spacing of cut layers and the minimum number of cuts allowed in a via array can be defined in the technology file. For more information, see <a href="../ascitechconstr/constr_via.html#viaSpacing">viaSpacing</a> and <a href="../ascitechconstr/constr_numCut.html#minNumCut">minNumCut</a>. </p>
<p>
<a id="pgfId-1223458"></a>Only standard vias can be automatically arrayed to the width of the wire. The number of rows and columns in the array are determined by the width of the wire. The following example display standard via arrays placed on wires. </p>
<p>
<a id="pgfId-1223459"></a>The figure below shows an array of standard vias placed at a ninety degree intersection of layers. </p>

<p>
<a id="pgfId-1223463"></a></p>
<div class="webflare-div-image">
<img width="635" height="212" src="images/vias-20.gif" /></div>

<p>
<a id="pgfId-1223464"></a>The software determines the number of cuts that are required based on the width of the wire. The technology file standard via definition allows you to specify the default number of cuts for a via, however, this value is overridden by the number of columns and rows needed for the width of the wire currently being created. For example, if the default number of cuts is 2x2 but the wire width is less than the width of a 2x2 via array, a single via cut is placed on the wire. </p>

<h2>
<a id="pgfId-1223467"></a><a id="12724"></a>Stacking <a id="stackVia"></a>Vias</h2>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1223468"></a>To move individual vias in a stack you must use the <em>Move</em> command. The <em>Move</em> command un-stacks vias.</div>

<p>
<a id="pgfId-1223469"></a>The via stacking limit for specified layers and the minimum area allowed for stacked vias can be defined in the technology file. For more information, see <a href="../ascitechconstr/constr_via.html#viaStackingLimits">viaStackingLimits</a>. </p>
<p>
<a id="pgfId-1223471"></a>To stack vias, do the following:</p>
<ol><li>
<a id="pgfId-1223472"></a>Choose <em>Create &#8211; Wiring &#8211; Wire</em>.</li><li>
<a id="pgfId-1223473"></a>From the right-click context menu, choose <em>Select Via.</em><br />
<a id="pgfId-1223475"></a>The <em><a actuate="user" class="URL" href="../weuser/appA.html#selectViaForm" show="replace" xml:link="simple">Select Via form</a></em> appears, which displays all the available vias and routing layers that can be reached from the current routing layer.</li><li>
<a id="pgfId-1223476"></a>Set the default via for each layer. For each layer, choose the desired via for a target layer from the cyclic field beside each layer. <br />
<a id="pgfId-1223477"></a>You can change any number of defaults before clicking on a layer button. You can also raise the <em>Select Via</em> form, change the default vias and click OK without selecting a via. <br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1223478"></a>In most cases your design rules require you to place vias with extended overlaps when stacking vias. If the <code>minArea</code> constraint is set in the technology file, a via with enclosures that meet the <code>minArea</code> constraint requirements is placed for intermediate vias. See <a href="vias.html#93732">Minimum Area Rules</a>. </div></li><li>
<a id="pgfId-1223482"></a>From the <em>Select Via</em> form select the desired nonadjacent layer.<br />
<a id="pgfId-1223483"></a>To cancel any pending vias, click the current layer button. You can rotate pending vias by pressing the right mouse button. This is reflected in the button prompt text in the CIW and on the layout window.</li><li>
<a id="pgfId-1223484"></a>Move the pointer and click to place the via stack. <br />
<a id="pgfId-1223485"></a>Via stacking adheres to the stack via depth rule, <code>maxStackVias</code>.</li></ol>










<h3>
<a id="pgfId-1223537"></a><a id="30359"></a><a id="38471"></a>Inserting Multi-Layer Stack Via</h3>

<p>
<a id="pgfId-1223538"></a>The Create Wire lets you instantiate the multi-layer stack via and allows the wire to exit on any layer of the stack via.</p>
<p>
<a id="pgfId-1223539"></a>To create multi-layer stack via, do the following:</p>
<ol><li>
<a id="pgfId-1223540"></a>Choose <em>Create &#8211; Wiring &#8211; Wire</em>.</li><li>
<a id="pgfId-1223541"></a>Start creating the wire by digitizing the wire points.</li><li>
<a id="pgfId-1223542"></a>Right-click to select <em>Via Up T</em>o <em>&lt;layer name&gt;</em> or <em>Via Down</em> <em>To &lt;layer name&gt;</em> to change the wire layer to a higher or lower layer, respectively. </li><li>
<a id="pgfId-1223543"></a>Move the pointer and click to place the via. <br />
<a id="pgfId-1223544"></a>The following figure shows how the <code>M1-M2</code> via is inserted.<br />
<a id="pgfId-1223548"></a><div class="webflare-div-image">
<img width="633" height="399" src="images/vias-21.gif" /></div>
<a id="pgfId-1223549"></a>You can also insert a via stack between the metal layers. Consider a case when a stacked via is created between <code>metal1</code> and <code>metal4</code> layers. The stacked via includes the <code>metal2</code> and <code>metal3</code> layers as well. In this case, you start a wire on <code>metal1</code> then do <em>Via Down To</em> and select <code>metal4</code>. The <code>M1-M4</code> via is inserted. After you insert the via, you can choose the desired target layer on which the wire should exit. To do this. select the target layer from the Palette. The following figures shows a scenario where a <code>M1-M4</code> via is inserted but the wire exits on the <code>metal3</code> layer.<br />
<a id="pgfId-1223553"></a><div class="webflare-div-image">
<img width="633" height="593" src="images/vias-22.gif" /></div></li></ol>












<h3>
<a id="pgfId-1223487"></a><a id="93732"></a>Minimum Area Rules</h3>

<p>
<a id="pgfId-1223488"></a>Extended overlaps (vias with the area of the bottom layer expanded) for stacked vias are used to satisfy minimum area rules (MAR) for intermediate metal. </p>

<p>
<a id="pgfId-1223535"></a></p>
<div class="webflare-div-image">
<img width="668" height="338" src="images/vias-23.gif" /></div>
<h2>
<a id="pgfId-1073672"></a><a id="48230"></a>Changing Via Cut Color</h2>

<p>
<a id="pgfId-1228439"></a>You can now manually change the via cut color for interactive routing commands. The via cut color is supported only for single cut via and for single via stack.</p>
<p>
<a id="pgfId-1228647"></a>To enable via cut coloring, specify the <a href="appB.html#43089"><h-hot>enableCutColorSupport (ICADVM20.1 Only)</h-hot><code></code></a> environment variable. When the environment variable is specified, the <em>Cycle Cut Color</em> option is available in the <em>Create Wire</em>, <em>Create Bus</em>, and <em>Create Stranded Wire</em> context-sensitive menu.</p>
<p>
<a id="pgfId-1228553"></a>To change the via cut color:</p>
<ol><li>
<a id="pgfId-1229028"></a>Choose <em>Create &#8211; Wiring &#8211; Wire</em>.</li><li>
<a id="pgfId-1229588"></a>From the <em>Layers</em> assistant, select a layer on which you want to create the wire.</li><li>
<a id="pgfId-1229590"></a>To start creating a wire, click at a point in the design display area to digitize the wire.</li><li>
<a id="pgfId-1229698"></a>Right-click and select <em>Via Up T</em>o <em>&lt;layer name&gt;</em> or <em>Via Down</em> <em>To &lt;layer name&gt;</em> to insert a via. </li><li>
<a id="pgfId-1230144"></a>To change the via cut color, place the mouse pointer on the <em>Via</em> option in the <em>Create Wire</em> context-sensitive menu. The <em>Via</em> submenu is displayed.</li><li>
<a id="pgfId-1229321"></a>Click the <em>Cycle Cut Color</em> option. The cycle color option is used to change the via cut color. The specified pattern is not affected.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1230860"></a>The color of the via is changed depending on the mask colors available in the technology file.</div>
<a id="pgfId-1229397"></a>The following figure shows that the via cut color is changed in the via that has been inserted on the wire.<br />
<a id="pgfId-1229914"></a><div class="webflare-div-image">
<img width="633" height="520" src="images/vias-24.gif" /></div></li></ol>











<p>
<a id="pgfId-1229505"></a>Similarly, you can also change the via cut color for the <em>Create Bus</em> command. For Create Bus, the via matrix is a row of cut classes. Following are the available via cut color patterns.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1232495"></a>;; alternate row:&#160;&#160;row</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1232496"></a>;; alternate col:&#160;&#160;col or colunm</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1232497"></a>;; chessboard: chess or chessboard</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1232498"></a>;; all others value or no value give uniform cut pattern</pre>
<p>
<a id="pgfId-1230572"></a></p>
<div class="webflare-div-image">
<img width="668" height="282" src="images/vias-25.gif" /></div>

<p>
<a id="pgfId-1231717"></a>The <em>Create Stranded Wire</em> command also supports via cut coloring. By default, via cut pattern is uniform. However, you can change the cut pattern by specifying the <a href="appB.html#55026">weViaCutColorPatterns (ICADVM20.1 Only)</a> environment variable. For example:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1231836"></a>envSetVal(&quot;layout&quot; &quot;weViaCutColorPatterns&quot; &#39;string &quot;Via2 row : Via3 col&quot;)</pre>

<p>
<a id="pgfId-1231815"></a>The following figure shows the via cut pattern for the <em>Create Stranded Wire</em> command, where <code>Via2</code> follows the row pattern and <code>Via3</code> follows the column pattern.</p>

<p>
<a id="pgfId-1231146"></a></p>
<div class="webflare-div-image">
<img width="668" height="221" src="images/vias-26.gif" /></div>

<p>
<a id="pgfId-1231327"></a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="wire.html" id="prev" title="Working with Wires">Working with Wires</a></em></b><b><em><a href="buses.html" id="nex" title="Working with Buses">Working with Buses</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>