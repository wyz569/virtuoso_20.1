
<html><head><title>Supporting Width Spacing Patterns (ICADVM20.1 Only)</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="parula" />
<meta name="CreateDate" content="2020-09-18" />
<meta name="CreateTime" content="1600423274" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the capabilities to provide efficient ways to interactively route connections in order to meet critical design constraints and rules." />
<meta name="DocTitle" content="Virtuoso Interactive and Assisted Routing User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Supporting Width Spacing Patterns (ICADVM20.1 Only)" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="weuser" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-09-18" />
<meta name="ModifiedTime" content="1600423274" />
<meta name="NextFile" content="vrf.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Layout" />
<meta name="PrevFile" content="interactiveColoredRouting.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Interactive and Assisted Routing User Guide -- Supporting Width Spacing Patterns (ICADVM20.1 Only)" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="weuserICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="weuserTOC.html">Contents</a></li><li><a class="prev" href="interactiveColoredRouting.html" title="Interactive Colored Routing (ICADVM20.1 Only)">Interactive Colored Routing (I ...</a></li><li style="float: right;"><a class="viewPrint" href="weuser.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="vrf.html" title="Supporting Virtuoso RF (ICADVM20.1 EXL Only)">Supporting Virtuoso RF (ICADVM ...</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Interactive and Assisted Routing User Guide<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>11
<a id="pgfId-1221937"></a></h1>
<h1>
<a id="pgfId-1222374"></a><hr />
<a id="44786"></a><a id="15289"></a>Supporting Width Spacing Patterns (ICADVM20.1 Only)<hr />
</h1>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1142365"></a><a id="30289"></a>Requires Virtuoso Advanced Node Option for Layout (95511) license.</div>

<p>
<a id="pgfId-1144840"></a><a id="wsp_wireEdit"></a>Wire editing has been enhanced to support snap pattern definitions called <a actuate="user" class="URL" href="../ascitechfile/chap4.html#wsp_widthSpacingSnapPatternDefs" show="replace" xml:link="simple">widthSpacingSnapPatternDefs</a>. The width spacing pattern (WSP) definitions used with <code>widthSpacingSnapPatternDef</code> are stored either in the technology database or the design database. When a width spacing snap pattern definition is enabled as a global grid through a <code>snapGridVertical</code> or <code>snapGridHorizontal</code> constraint, global WSP-based editing is supported in wire editor. In addition, wire editing allows individual regions in a cellview to use different WSPs instead of the global grid. To create a region, see <h-hot><a actuate="user" class="URL" href="../vwspuser/PatternAssistant.html#wsp_TPAssistant" show="replace" xml:link="simple">Creating Width Spacing Pattern Regions</a></h-hot>. The <code>widthSpacingSnapPatternDef</code> defined in a region need not be used as a global grid in the cellview.</p>
<p>
<a id="pgfId-1145006"></a>Furthermore, wire editing allows multiple width spacing snap pattern definitions to share the same LPP. This means that an LPP of a region does not directly identify a unique width spacing snap pattern definition. Therefore, a new string attribute can be associated with a region to determine the width spacing snap pattern definition with which it is associated. To set the <code>widthSpacingSnapPatternDef</code> to be used for a region, see <h-hot><a actuate="user" class="URL" href="../skdfref/wsp.html#dbSetPatternRegionWidthSpacingSnapPatternDefName" show="replace" xml:link="simple">dbSetPatternRegionWidthSpacingSnapPatternDefName</a></h-hot>. </p>
<p>
<a id="pgfId-1222411"></a>This chapter describes the following width spacing pattern features.</p>
<ul><li>
<a id="pgfId-1144430"></a><a href="wsp.html#21111">Width Spacing Pattern Display in Wire Editing</a><ul><li>
<a id="pgfId-1141008"></a><a href="wsp.html#26842">Dynamic Display</a></li><li>
<a id="pgfId-1141022"></a><a href="wsp.html#90853">Alpha Blending</a></li></ul></li><li>
<a id="pgfId-1152748"></a><a href="wsp.html#83006">allowedWireTypes Support</a></li><li>
<a id="pgfId-1140989"></a><a href="wsp.html#72158">Snapping Behavior in WSP During Wire Editing</a><ul><li>
<a id="pgfId-1141039"></a><a href="wsp.html#60494">Enabling Wire Snapping</a></li><li>
<a id="pgfId-1141053"></a><a href="wsp.html#38130">Snapping of Wire in Width Spacing Patterns</a></li><li>
<a id="pgfId-1141072"></a><a href="wsp.html#38162">Automatic Via Insertion during Wire Snapping</a></li><li>
<a id="pgfId-1154441"></a><a href="wsp.html#38266">Snapping on WSP for Assisted Routing Commands</a></li></ul></li><li>
<a id="pgfId-1141090"></a><a href="wsp.html#70975">Working with Width Spacing Patterns During Wire Editing</a><ul><li>
<a id="pgfId-1141105"></a><a href="wsp.html#76177">Switching Patterns Dynamically</a></li><li>
<a id="pgfId-1235908"></a><a href="wsp.html#62999">Crossing Region Boundaries</a></li><li>
<a id="pgfId-1141119"></a><a href="wsp.html#93722">Wire Editor Gravity</a></li></ul></li><li>
<a id="pgfId-1139812"></a><a href="wsp.html#94061">Automatic Switching of the Active Pattern Across Regions</a></li><li>
<a id="pgfId-1139890"></a><a href="wsp.html#16172">Working with Selected Sets of Wires</a></li><li>
<a id="pgfId-1140199"></a><a href="wsp.html#41189">Nested WSP Regions</a></li><li>
<a id="pgfId-1231170"></a><a href="wsp.html#28921">Supporting pathSegs with Different WSPs across Regions</a></li><li>
<a id="pgfId-1140226"></a><a href="wsp.html#72662">Wire Editor Hierarchy Support</a></li><li>
<a id="pgfId-1152806"></a><a href="wsp.html#57159">Pattern Flipping Support</a></li></ul>



















<h2>
<a id="pgfId-1139629"></a><a id="21111"></a>Width Spacing Pat<a id="wspdisplay"></a>tern Display in Wire Editing</h2>

<p>
<a id="pgfId-1148271"></a>When using width spacing patterns, it is essential that you are able to visualize the available tracks and their respective widths in the canvas. Therefore, the following display enhancements have been made available for WSP.</p>
<ul><li>
<a id="pgfId-1139634"></a><a href="wsp.html#26842">Dynamic Display</a></li><li>
<a id="pgfId-1144096"></a><a href="wsp.html#90853">Alpha Blending</a></li></ul>


<h3>
<a id="pgfId-1151780"></a><a id="26842"></a><a id="wsp_dynamicdisplay"></a><a id="dynamicdisplay"></a>Dynamic Display</h3>

<p>
<a id="pgfId-1151781"></a>Dynamic display is visible in wire editing only when the <em>Snap Pattern </em>option is selected from the <em>Wires</em> drop-down list in the Layout Editor Options form and the reference object is snapable to the WSP grid. The dynamic display feature facilitates the display of accessible or valid tracks. This feature displays the tracks based on the current layer-purpose pair, active pattern, <code>minWidth</code> constraints, <code>wireType</code> constraints, and regions. The dynamic display also displays the valid tracks of upper and lower layers.</p>
<p>
<a id="pgfId-1139643"></a>During wire creation and editing, the active pattern in the applicable WSP track is displayed in the design automatically as soon as the <em>Create Wire</em> command is invoked. While creating a wire, the corresponding WSP grid for the selected layer is displayed, even if the visibility of the grid is turned off in the <em>Grids</em> panel of the Palette assistant.</p>
<p>
<a id="pgfId-1139670"></a>The following figure shows the display of tracks when the <em>Create Wire</em> command is invoked.</p>

<p>
<a id="pgfId-1235251"></a></p>
<div class="webflare-div-image">
<img width="668" height="674" src="images/wsp-2.gif" /></div>
<h4>
<a id="pgfId-1139679"></a>Dynamic Display for Colored <a id="dynamicdisplay_tracks"></a>snapPatternDef Tracks </h4>

<p>
<a id="pgfId-1235335"></a>During wire creation, for <code>snapPattern</code> the even and odd tracks are displayed in alternate colors based on the packets defined in the display resource (.drf) file. The track immediately to the right of the anchor point gets the regular packet. The track after that gets the override packet. </p>

<p>
<a id="pgfId-1236647"></a></p>
<div class="webflare-div-image">
<img width="668" height="269" src="images/wsp-3.gif" /></div>
<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1235558"></a>
This feature applies only to Snap Pattern Definition (SPDef) objects and not to Width Spacing Snap Pattern Definition (WSSPDef) objects.</div>
<h3>
<a id="pgfId-1139682"></a><a id="90853"></a>Alpha <a id="alphablending"></a>Blending</h3>

<p>
<a id="pgfId-1139683"></a>During wire creation and editing, there is a transparent display of the current track and upper and lower layer tracks in the design as soon as a layer is selected in the <em>Layers</em> panel of the Palette assistant and the <em>Create Wire</em> command is invoked. This is known as alpha blending. This feature helps you to visualize the layer on which a wire is being created. The following figure shows the alpha blending display when the <code>Metal2</code> layer is selected in the Layers panel of the Palette assistant and the Create Wire command is invoked.</p>

<p>
<a id="pgfId-1139693"></a></p>
<div class="webflare-div-image">
<img width="668" height="231" src="images/wsp-5.gif" /></div>

<p>
<a id="pgfId-1139694"></a>The transparency at different levels for the track fill or the track outline, is controlled by several environment variables. For more information about the alpha blending environment variables, see <h-hot><a actuate="user" class="URL" href="../vlehelp/leWSP.html#firstpage" show="replace" xml:link="simple">Support for Alpha Blending</a></h-hot>.</p>

<h3>
<a id="pgfId-1224746"></a><a id="82462"></a>Customizing Display of WSP Tracks<a id="WSPCustomStipple"></a></h3>

<p>
<a id="pgfId-1224747"></a>To visually differentiate and easily identify some WSP tracks, you can now customize stipple patterns. You can define a display packet and attach it to a WSP track. The following figure shows WSPs when a display packet is defined for a WSP track and when it is undefined (and a default display packet is used). </p>

<p>
<a id="pgfId-1224751"></a></p>
<div class="webflare-div-image">
<img width="668" height="268" src="images/wsp-6.gif" /></div>

<p>
<a id="pgfId-1224753"></a>For more information, see <a href="../ascitechfile/chap4.html#wsp_widthSpacingPattern">widthSpacingPatterns</a> in the Virtuoso Technology Data ASCII Files Reference. Also, see <a href="../sktechfile/chap14.html#techCreateWidthSpacingPattern">techCreateWidthSpacingPattern</a> and <a href="../sktechfile/chap14.html#techCreateWidthSpacingPatternWithColor">techCreateWidthSpacingPatternWithColor</a>, and <a href="../sklayoutref/layout.html#wspCreateWSP">wspCreateWSP</a> SKILL APIs.</p>

<h2>
<a id="pgfId-1152510"></a><a id="83006"></a><a id="allowedWireTypesSupport"></a>allowedWireTypes Support</h2>

<p>
<a id="pgfId-1152512"></a>The wire editing supports the new <code>allowedWireTypes</code> constraint. When the <code>allowedWireTypes</code> constraint is set on a net in a design, then wire editing on that net conforms to the constraint rules and only shows and snaps to the tracks whose <code>wireType</code> matches the value of the constraint.</p>

<h2>
<a id="pgfId-1152445"></a><a id="wspsnapping"></a><a id="72158"></a>Snapping Behavior in WSP During Wire Editing</h2>
<h3>
<a id="pgfId-1140369"></a><a id="60494"></a>Enabling Wire Snapping<a id="ff_SettingDirectionSP"></a></h3>

<p>
<a id="pgfId-1140370"></a>To enable snapping of wires, you can specify the <em>Wire Snapping</em> options in the Layout Editor Options form.</p>
<ol><li>
<a id="pgfId-1140371"></a>Choose <em>Options &#8211; Editor</em>.</li><li>
<a id="pgfId-1140372"></a>In the Layout Editor Options form, the <em>Snap Pattern Snapping </em>option is selected by default. Select the <em>Snap Pattern</em> option from the <em>Wires</em> drop-down list in the <em>Wire Snapping</em> group box. When the <em>Snap Pattern</em> option is selected, the <em>Enforce</em> and <em>Instance Pins Patterns </em>check boxes are automatically enabled.<br />
<a id="pgfId-1140377"></a><div class="webflare-div-image">
<img width="635" height="193" src="images/wsp-7.gif" /></div></li><li>
<a id="pgfId-1151627"></a>Select the <em>Enforce</em> check box if you want the wire to inherit the width and the direction of the active WSP pattern. When the <em>Enforce</em> check box is selected, the wire is snapped to the centerline of the track pattern. Also, the wire inherits the width of the active WSP pattern and the direction in which the wire is created is the same as the direction of the track pattern. By default, the <em>Enforce</em> check box is selected.<br />
<a id="pgfId-1151689"></a>However, if the <em>Enforce</em> check box is deselected, while the wire is snapped to the centerline of the track pattern, the width of the wire is the default width and there is no restriction on the direction in which the wire is snapped. <br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1151728"></a>The <em>Enforce</em> check box is only enabled when the <em>Wires</em> option is either set to <em>Track Pattern</em> or <em>Snap Pattern</em>.</div>
<a id="pgfId-1151629"></a>Also, the width associated with a WSP track can be set to <code>0</code>. Wire Editor supports the track that has <code>0</code> width. The track with <code>0</code> width is similar to the trackPattern use model; where any wire width can be used for a track. In addition, you can press the <code>Ctrl</code> + <code>Shift</code> key and scroll the mouse wheel up or down to dynamically change the width of a wire.</li><li>
<a id="pgfId-1140379"></a>To view the patterns that are available in an instance, select the <em>Instance Pin Patterns</em> check box. When this option is selected, you can view the active pattern of the instance. However, if this option is deselected, the active pattern of the top level is visible even in the instance.</li></ol>











<h3>
<a id="pgfId-1140381"></a><a id="38130"></a>Snapping of Wire in Width Spacing Patterns</h3>

<p>
<a id="pgfId-1140382"></a>During wire creation, the valid track patterns of a layer are displayed. Also, only the tracks corresponding to the current layer and a layer above or below it are shown.</p>
<p>
<a id="pgfId-1140383"></a>When a wire is created on a metal layer, the track magnet automatically pulls the wire towards the track intersection and the wire is snapped to the nearest track of the active pattern. In addition, the created wire inherits the width and direction of the track to which it is snapped, as shown in the following figure.</p>

<p>
<a id="pgfId-1140387"></a></p>
<div class="webflare-div-image">
<img src="images/12.2_wiresnapping_1.gif" /></div>
<b>Important:</b><br />
<a id="pgfId-1140388"></a>


<p>
<a id="pgfId-998398"></a>Also, while snapping, the Create Wire command follows the tracks and lets you create a jog by remaining in the same metal layer even if there are only horizontal tracks on a metal layer and vice versa. The wire is created as a Z-shape, where the first and last pathSeg are in the preferred routing direction and the middle pathSeg is in the non-preferred routing direction. This is only possible when the <code>weEnforceDirFromRoutingPattern</code> variable is set to <code>nil</code>. However, the automatic via insertion is disabled when the environment variable <code>weEnforceDirFromRoutingPattern</code> is set to <code>nil</code>. In addition, a via can be created only in the preferred direction and not in the non-preferred direction.</p>

<p>
<a id="pgfId-1239844"></a></p>
<div class="webflare-div-image">
<img width="668" height="315" src="images/wsp-9.gif" /></div>

<p>
<a id="pgfId-1144030"></a>While creating a wire on a defined region, the wire is snapped to the closest strip lines on the routing direction. The high-level steps that are followed for snapping a wire to the width spacing patterns are listed below:</p>
<ul><li>
<a id="pgfId-1144031"></a>Specify the width spacing pattern definition defined in the ASCII technology file.</li><li>
<a id="pgfId-1144032"></a>Specify the name of the layer, typically the <em>Active </em>layer, on which a wire will snap.</li><li>
<a id="pgfId-1188037"></a>Create a wire.</li></ul>


<p>
<a id="pgfId-1226113"></a>Also, while creating a wire, orthogonal WSP grid constraint defined in the technology file automatically adjusts the wire with a truncate extension value so that the begins and ends points of a wire are on the grids. The snapping points that are applicable to both upper and lower are visible as dots, as shown in the following figure. </p>

<p>
<a id="pgfId-1226117"></a></p>
<div class="webflare-div-image">
<img width="668" height="157" src="images/wsp-10.gif" /></div>

<p>
<a id="pgfId-1228154"></a>However, when the snapping points are either applicable to lower or upper, then the <code>orthogonalWSPGrid</code> is represented by a small triangle, as shown in the following figure,</p>

<p>
<a id="pgfId-1228158"></a></p>
<div class="webflare-div-image">
<img width="668" height="137" src="images/wsp-11.gif" /></div>

<p>
<a id="pgfId-1226118"></a>In addition, the via enclosure of intermediate layers extend to align to the grid defined by <code>orthogonalWSPGrid</code>.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1226119"></a>spacings(</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1226120"></a>        (orthogonalWSPGrid &quot;M2&quot; &quot;M1WSP&quot;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1226121"></a>    ) ; spacing</pre>

<p>
<a id="pgfId-1226122"></a>In the above example, a wire is created On <code>M1</code> layer and a stack via up to <code>M3</code> is added. The via enclosure on <code>M2</code> is extended to align the WSP grid on <code>M1</code>.</p>

<p>
<a id="pgfId-1226123"></a></p>
<div class="webflare-div-image">
<img width="668" height="307" src="images/wsp-12.gif" /></div>
<div class="webflare-information-macro webflare-macro-video">
<a id="pgfId-1188038"></a>
For a short demonstration on how WSPs are used to control wire creation and routing, see <a actuate="user" class="URL" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1Od0000002JkKuEAK&amp;pageName=ArticleContent&amp;sq=005d0000001T3tEAAS" show="replace" xml:link="simple">Create Wires on WSP</a>.</div>

<p>
<a id="pgfId-1226257"></a>Now, you can define <code>orthogonalWSPGrid</code> constraint in the local region which is different from the one that is defined in the global region. </p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1228247"></a>When you are creating a local region with orthogonal <code>WSSPDef</code>, it requires that the primary layer has a standard routing <code>WSSPDef</code> selected as well.</div>

<p>
<a id="pgfId-1226245"></a>The <code>orthogonalWSPGrid</code> constraint in the local region overrides the <code>orthogonalWSPGrid</code> constraint defined in the global region.</p>
<p>
<a id="pgfId-1227202"></a>When the local end grid of a region differs from the local end grid of the global region, the wire snaps to the orthogonal grid near the boundary instead of the boundary of the region. This implies that the yellow cursor is not allowed to be placed near the boundary.</p>

<p>
<a id="pgfId-1227020"></a></p>
<div class="webflare-div-image">
<img width="668" height="288" src="images/wsp-14.gif" /></div>
<h3>
<a id="pgfId-1140394"></a><a id="38162"></a>Automatic Via Insertion during Wire Snapping</h3>

<p>
<a id="pgfId-1140395"></a>During wire creation, the track magnet snaps to the intersection of the upper or lower layer tracks. When you click on the track intersection, a via is automatically placed using the active width spacing pattern and the wire then changes direction and moves in the perpendicular direction, as shown in the following figure.</p>

<p>
<a id="pgfId-1140399"></a></p>
<div class="webflare-div-image">
<img src="images/12.2_autoviainsertion.gif" /></div>

<p>
<a id="pgfId-1140400"></a>You can also place a via before clicking on a track intersection by using the <em>Via up to &lt;layer name&gt;</em> and <em>Via Down to &lt;layer name&gt;</em> options in the <em>Create Single Wire</em> context-sensitive menu. In this case, the wire always snaps at the track intersection, as shown in the following figure.</p>

<p>
<a id="pgfId-1140411"></a></p>
<div class="webflare-div-image">
<img width="668" height="387" src="images/wsp-16.gif" /></div>

<p>
<a id="pgfId-1154206"></a>After the via is automatically placed, one of the metal layers is selected by default if the tracks of the lower and upper layers coincide. However, you can switch between the valid tracks of the upper and lower layers by selecting the <em>Cycle Snapping Layer</em> option in the <em>Use Width Spacing Pattern</em> submenu. </p>
<p>
<a id="pgfId-1154207"></a>In the following set of figures, Figure A shows that the wire is created on <code>Metal4</code>, and when the via is placed on the track intersection, <code>Metal5</code> is selected as the default layer. </p>
<p>
<a id="pgfId-1140414"></a>Figure B displays the switch between the selected layers when the <em>Cycle Snapping Layer </em>option is clicked and <code>Metal3</code> layer is now selected.</p>

<p>
<a id="pgfId-1140430"></a></p>
<div class="webflare-div-image">
<img width="668" height="625" src="images/wsp-17.gif" /></div>

<p>
<a id="pgfId-1140431"></a>If the tracks of the lower and upper layers do not coincide, which means that the active pattern on the upper layer is different from that in the lower layer, then the layer at the track intersection is picked. However, you can slide the wire across the tracks to automatically change the layer and the corresponding via using the <code>Ctrl+Shift</code> bindkey. The following figure displays how the wire slides across the tracks and changes the layer and the corresponding via.</p>

<p>
<a id="pgfId-1140442"></a></p>
<div class="webflare-div-image">
<img width="668" height="510" src="images/wsp-18.gif" /></div>

<p>
<a id="pgfId-1141824"></a>It also allows you to change the tracks on the same layer. The layer changes when the tracks are not aligned. If the tracks are aligned, the previous layer is preserved.</p>

<h3>
<a id="pgfId-1154472"></a><a id="38266"></a>Snap<a id="wspassisted"></a>ping on WSP for Assisted Routing Commands</h3>

<p>
<a id="pgfId-1154488"></a>To complete creation of the wire or bus automatically, use the <em>Finish Wire</em> command available on the <a href="appA.html#97169">Create Single Wire Context-Sensitive Menu</a> or the <em>Finish Bus</em> command available on the <a href="appA.html#10652">Create Bus Context-Sensitive Menu</a>, respectively.&#160;&#160;In the Layout Editor Options form, when you select the wire snapping option, <em>Snap Pattern</em>, the <em>Finish Wire</em> and <em>Finish Bus</em> commands snap the segments and vias to the active width spacing pattern track. The new segment inherits the width of the track it overlaps, as shown in the following figure. </p>

<p>
<a id="pgfId-1154613"></a></p>
<div class="webflare-div-image">
<img src="images/617ISR1_FinishWire_1.gif" /></div>

<p>
<a id="pgfId-1155112"></a>In addition, when the MPT support is enabled in Palette, the wire segment also inherits the color and lock information of the active width spacing pattern track, as shown in the following figure.</p>

<p>
<a id="pgfId-1155024"></a></p>
<div class="webflare-div-image">
<img src="images/617ISR1_FinishWire_color.gif" /></div>

<p>
<a id="pgfId-1155025"></a>The following figure is an example of the <em>Finish Bus</em> command inheriting the width of the track it overlaps.</p>

<p>
<a id="pgfId-1154686"></a></p>
<div class="webflare-div-image">
<img src="images/617ISR1_FinishBus.gif" /></div>
<h2>
<a id="pgfId-1154532"></a><a id="70975"></a>Working with Width Spacing Patterns During Wire Editing</h2>

<p>
<a id="pgfId-1148770"></a>The <em>Use Width Spacing Pattern</em> option in the <em>Create Single Wire</em> context-sensitive menu lets you perform the following tasks.</p>
<ul><li>
<a id="pgfId-1234779"></a><a href="wsp.html#76177">Switching Patterns Dynamically</a></li><li>
<a id="pgfId-1235113"></a><a href="wsp.html#62999">Crossing Region Boundaries</a></li><li>
<a id="pgfId-1140515"></a><a href="wsp.html#93722">Wire Editor Gravity</a></li></ul>


<p>
<a id="pgfId-1140516"></a>The following figure shows the <em>Use Width Spacing Pattern</em> option in the <em>Create Single Wire</em> context-sensitive menu.</p>

<p>
<a id="pgfId-1233846"></a></p>
<div class="webflare-div-image">
<img width="668" height="260" src="images/wsp-22.gif" /></div>
<h3>
<a id="pgfId-1234797"></a><a id="76177"></a>Switching Patterns Dynamically</h3>

<p>
<a id="pgfId-1235952"></a>Pattern switiching happens dynamically letting you cross region boundaries only if the WSP track on which you started creating the wire has allowed WSP tracks. </p>
<p>
<a id="pgfId-1234921"></a>When <em>Dynamic Pattern Switching </em>is enabled, it checks to ensure that the pathSeg you started on a track in one region can cross a region boundary. The target region should have a track that is a member of the allowed WSP patterns in the other regions. </p>

<p>
<a id="pgfId-1235143"></a></p>
<div class="webflare-div-image">
<img width="668" height="263" src="images/wsp-23.gif" /></div>

<p>
<a id="pgfId-1235133"></a>For example:</p>
<ul><li>
<a id="pgfId-1234903"></a>consider that a region is defined with only a <code>stdCell</code> pattern. The <code>stdCell</code> pattern is the currently active pattern of the other region. </li><li>
<a id="pgfId-1238243"></a>consider that the global region has two patterns: <code>1X</code> and <code>stdCell</code>. In this region, <code>1X</code> is the currently active pattern. <br />
<a id="pgfId-1237112"></a><div class="webflare-div-image">
<img width="668" height="334" src="images/wsp-24.gif" /></div></li></ul>





<p>
<a id="pgfId-1234893"></a>Now, start a wire on a wide track of the <code>stdCell</code> pattern in the region. Without dynamic pattern switching, <code>1X</code> being the currently active pattern, the wire can be drawn only within the region. However, with dynamic pattern switching enabled, the wire can cross the region-to-global boundary. Even though <code>1X</code> is the currently active pattern, the wide track with the <code>stdCell</code> pattern in the global region lets the wire cross the region. Hence, the pattern is dynamically switched from <code>1X</code> to <code>stdcell</code> in the global region without changing its currently active pattern. </p>

<p>
<a id="pgfId-1236538"></a></p>
<div class="webflare-div-image">
<img width="668" height="211" src="images/wsp-25.gif" /></div>

<p>
<a id="pgfId-1237528"></a>If you start a wire from a global region with <code>1x</code> as the currently active pattern, then even with dynamic pattern switching enabled, the wire cannot cross the global-region boundary. This is because <code>1X</code> is the currently active pattern in the global region, which is not the allowed WSP pattern in the other region. Therefore, the wire is unable to cross the global-region boundary.</p>

<p>
<a id="pgfId-1237900"></a></p>
<div class="webflare-div-image">
<img width="668" height="335" src="images/wsp-26.gif" /></div>

<p>
<a id="pgfId-1235014"></a>Environment Variable: <a href="appB.html#81333">enableDynamicPatternSwitching (ICADVM20.1 Only)</a></p>

<h3>
<a id="pgfId-1140521"></a><a id="62999"></a>Crossing <a id="crossBoundaries"></a>Region Boundaries</h3>

<p>
<a id="pgfId-1233890"></a>When a wire is created on global and local regions with non matching WSPs, the wire is not allowed to span the region and terminates at the region boundary.</p>
<p>
<a id="pgfId-1234569"></a>Using the <em>Allow Crossed-region Off Track Wires</em> option in the <em>Use Width Spacing Pattern </em>menu in the <em>Create Single Wire</em> context-sensitive menu, you can ignore the region boundary and continue routing across regions. </p>

<p>
<a id="pgfId-1234735"></a></p>
<div class="webflare-div-image">
<img width="668" height="263" src="images/wsp-27.gif" /></div>

<p>
<a id="pgfId-1236224"></a>When the <em>Allow Crossed-region Off Track Wires</em> option is selected, it lets a wire cross regions, regardless of it being on track or off track and the patterns for secondary regions. The end point of the wire can be across a region boundary such that it is off track or on track with a different color and width. When the option is unselected and the WSP tracks are not identical, the pathSeg stops at local region boundaries.</p>

<p>
<a id="pgfId-1236373"></a></p>
<div class="webflare-div-image">
<img width="668" height="346" src="images/wsp-28.gif" /></div>

<p>
<a id="pgfId-1234516"></a>Environment Variable: <a href="appB.html#21718">allowOffTrackForCrossRegion (ICADVM20.1 Only)</a></p>

<h3>
<a id="pgfId-1140639"></a><a id="89459"></a><a id="93722"></a>Wire Edito<a id="wspgravity"></a>r Gravity</h3>

<p>
<a id="pgfId-1140640"></a>In order to ease the creation of local interconnect wires and to control the magnetic force to track intersections, use the <em>Gravity</em> option in the <em>Use Width Spacing Pattern </em>menu of the <em>Create Single Wire</em> context-sensitive menu. Using the <em>Gravity</em> options, you can control how the cursor gravitates towards track and snap pattern intersections.</p>

<p>
<a id="pgfId-1140644"></a></p>
<div class="webflare-div-image">
<img src="images/12.2_UsePattern_Gravity.gif" /></div>

<ul><li>
<a id="pgfId-1140645"></a>When set to <em>Min</em>, there is no snapping on track and snap pattern intersections and the mouse pointer gravitates pixel by pixel, as shown in the figure below.<br />
<a id="pgfId-1140658"></a><div class="webflare-div-image">
<img width="631" height="215" src="images/wsp-30.gif" /></div></li><li>
<a id="pgfId-1140659"></a>When set to<strong> </strong><em>Standard</em>, the wire snaps on the track and snap pattern intersections if the mouse pointer projection on the track axis is around the intersection.<br />
<a id="pgfId-1140670"></a><div class="webflare-div-image">
<img width="631" height="219" src="images/wsp-31.gif" /></div></li><li>
<a id="pgfId-1140671"></a>When set to <em>Max</em>, the wire always snaps on the track and snap pattern intersections, as shown in the following figure.<br />
<a id="pgfId-1140682"></a><div class="webflare-div-image">
<img width="631" height="198" src="images/wsp-32.gif" /></div></li></ul>













<h2>
<a id="pgfId-1139720"></a><a id="94061"></a>Automatic Switchin<a id="wspautoswitching"></a>g of the Active Pattern Across Regions</h2>

<p>
<a id="pgfId-1139721"></a>Wire editing provides you the flexibility of automatically switching patterns when crossing regions. You can switch an active pattern of a local region to the active pattern of the global region, even if the active pattern of the local region is not the default but is one of the allowed patterns. </p>
<p>
<a id="pgfId-1139722"></a>The following figure shows that <code>minWidth</code> is the active pattern on <code>Metal2</code> layer for the global region and <code>2XWidth</code> is the active pattern of the local region. However, because <code>2XWidth</code> is an allowed pattern in the local region, you are able to create a wire starting from the global region and continuing to extend it in the local region.</p>

<p>
<a id="pgfId-1139731"></a></p>
<div class="webflare-div-image">
<img width="668" height="309" src="images/wsp-33.gif" /></div>

<p>
<a id="pgfId-1139732"></a>However, if an active pattern of a local region is not an allowed pattern in the global region, then you cannot create a wire across the two regions. The wire is snapped at the boundary of the region. The following figure shows that a wire is created on <code>Metal2</code> layer in the global region for which the default active pattern is <code>2XWidth</code>. The <code>2XWidth</code> is not an allowed pattern in the local region. Therefore, the wire is not able to cross across regions and is snapped at the boundary of the local region. </p>

<p>
<a id="pgfId-1149479"></a></p>
<div class="webflare-div-image">
<img width="668" height="298" src="images/wsp-34.gif" /></div>

<p>
<a id="pgfId-1149480"></a>If the local and global regions have different active and allowed patterns on a metal layer, you can change the active and allowed patterns of a region while creating a wire. For example, a local region has <code>2XWidth</code> as the active pattern and the global region has <code>minWidth</code> as the only allowed pattern on <code>Metal2</code> layer. Once you start creating a wire, you can change the active and allowed patterns of a region using the <em>Width Spacing Pattern</em> assistant. When you change the allowed patterns of a region and make the patterns available for the other region, you can traverse through and continue to create a wire in the other region as well. </p>
<p>
<a id="pgfId-1139743"></a>The following figure shows that you can create a wire starting from a local region, which has a <code>2xWidth</code> pattern, and continue to create the wire in the global region for which you have changed the allowed patterns.</p>

<p>
<a id="pgfId-1229174"></a></p>
<div class="webflare-div-image">
<img width="668" height="257" src="images/wsp-35.gif" /></div>
<h2>
<a id="pgfId-1139855"></a><a id="37703"></a><a id="16172"></a>Working with Select<a id="wspwiregroup"></a>ed Sets of Wires</h2>

<p>
<a id="pgfId-1139856"></a>In wire editing, when multiple wires are selected and are moved, copied, or stretched, all the selected wires move together as a group. The wire that is closest to the point clicked on the layout canvas is highlighted and becomes the leader as shown in the following figure. From the selected set, only the leader is snapped to its corresponding grid. The remaining wires in the selected set move by the same distance but are not snapped to their corresponding grid.</p>

<p>
<a id="pgfId-1139864"></a></p>
<div class="webflare-div-image">
<img width="668" height="323" src="images/wsp-36.gif" /></div>
<h2>
<a id="pgfId-1139918"></a><a id="41189"></a>Nested<a id="nestedregions"></a> WSP Regions</h2>

<p>
<a id="pgfId-1139919"></a>A WSP region can have a local <code>widthSpacingSnapPatternDef</code> and not just the global <code>widthSpacingSnapPatternDef</code>. The Wire Editor can display and use the patterns of&#160;&#160;WSP regions embedded inside other WSP regions. Several regions can be nested in one and within one another.</p>
<p>
<a id="pgfId-1139920"></a>The following are special cases of partially and fully overlapping regions that you can come across while creating wires.</p>
<ul><li>
<a id="pgfId-1223339"></a><a href="wsp.html#32025">Region R1 Partially Overlaps Another Region R2</a></li><li>
<a id="pgfId-1223370"></a><a href="wsp.html#13974">Two Regions Overlap With the Exact Same Boundary</a></li><li>
<a id="pgfId-1223531"></a><a href="wsp.html#85194">Region R1 Partially Overlaps Another Region R2 With the Same Width Spacing Pattern</a></li><li>
<a id="pgfId-1223538"></a><a href="wsp.html#74354">Region R1 is Fully Enclosed in Another Region R2</a></li></ul>




<h3>
<a id="pgfId-1139921"></a><a id="32025"></a>Region R1 Partially Overlaps Another Region R2</h3>

<p>
<a id="pgfId-1139922"></a>The region R1 has <code>WSP1</code> as the active pattern and the region R2 has <code>WSP2</code> as the active pattern. When the <em>Create Wire</em> command is invoked, the region R1 will have <code>WSP1</code> pattern and region R2 will have <code>WSP2</code> pattern. However, the overlap area of the two regions does not have any pattern available and displays a blank area. Also, a wire cannot be created and snapped inside the overlapping region. </p>

<p>
<a id="pgfId-1139932"></a></p>
<div class="webflare-div-image">
<img width="669" height="295" src="images/wsp-37.gif" /></div>
<h3>
<a id="pgfId-1139933"></a><a id="13974"></a>Two Regions Overlap With the Exact Same Boundary</h3>

<p>
<a id="pgfId-1154331"></a>The two regions R1 and R2 have the exact same boundary and completely overlap each other. When the <em>Create Wire</em> command is invoked, the pattern of each region is displayed in the overlapped region. You can now create a wire on any of the WSP pattern displayed in the two exactly coincident regions on the same layer. Therefore, snapping is possible to either region&#8217;s WSP active pattern.</p>

<p>
<a id="pgfId-1139944"></a></p>
<div class="webflare-div-image">
<img width="668" height="202" src="images/wsp-38.gif" /></div>
<h3>
<a id="pgfId-1139945"></a><a id="85194"></a>Region R1 Partially Overlaps Another Region R2 With the Same Width Spacing Pattern</h3>

<p>
<a id="pgfId-1139946"></a>When two regions R1 and R2 partially overlap and use the same active pattern, there is no pattern in the overlapping region. The active pattern is valid only where the two regions, R1 and R2, do not overlap each other.</p>

<p>
<a id="pgfId-1139956"></a></p>
<div class="webflare-div-image">
<img width="668" height="320" src="images/wsp-39.gif" /></div>
<h3>
<a id="pgfId-1139957"></a><a id="74354"></a>Region R1 is Fully Enclosed in Another Region R2</h3>

<p>
<a id="pgfId-1139958"></a>Region R1 has <code>2xWidth</code> as the active pattern and region R2 has <code>WSP1</code> as the active pattern. When region R2 is fully enclosed within region R1, on invoking the <em>Create Wire</em> command, the dynamic display shows the active pattern of each region as shown in the following figure. In other words, <code>WSP1</code> is available inside region R2 and <code>2Xwidth</code> is available in region R1 where R2 is not overlapping (R1-R2). </p>

<p>
<a id="pgfId-1154083"></a></p>
<div class="webflare-div-image">
<img width="666" height="431" src="images/wsp-40.gif" /></div>

<p>
<a id="pgfId-1154084"></a>When a wire is created inside the enclosed region (R2), snapping and wire creation is possible only inside the enclosed region. However, if a similar pattern is available in the enclosing region (R1), the wire can cross the region boundary and continue snapping in region R1.</p>
<p>
<a id="pgfId-1154085"></a>Similarly, if a wire starts from the enclosing region (R1), it stops at the enclosed region (R2) boundary. If a similar pattern is available in the enclosed region (R2), the wire can cross the boundary and continue snapping in the enclosed region (R2).</p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1139972"></a>There is no limitation on the number of regions that can be nested.</div>
<h2>
<a id="pgfId-1139752"></a><a id="28921"></a>Supporting pathSegs with<a id="differentWSP"></a> Different WSPs across Regions</h2>

<p>
<a id="pgfId-1229266"></a>Wire editing provides an environment variable, <a href="appB.html#21718">allowOffTrackForCrossRegion (ICADVM20.1 Only)</a>, which when set to <code>t</code> provides the flexibility to cross the region boundaries even when the WSPs (and allowed WSPs) do not match. This means that the two regions have different WSPs, which is not supported when the switching of active patterns across regions is automatic. </p>
<p>
<a id="pgfId-1231888"></a>In such cases, the pathSeg acquires all properties from the start point and allows the end point to cross region boundaries. The following figure shows that the pathSeg crosses the region when the two regions having the same WSP pattern are overlapped and there is an empty track space in between.</p>

<p>
<a id="pgfId-1229459"></a></p>
<div class="webflare-div-image">
<img width="668" height="389" src="images/wsp-41.gif" /></div>

<p>
<a id="pgfId-1230255"></a>Crossing the boundary region is also possible when there are two abutted regions with different WSPs. The following figure shows that the pathSeg crosses the regions for which the tracks do not match.</p>

<p>
<a id="pgfId-1231256"></a></p>
<div class="webflare-div-image">
<img width="668" height="458" src="images/wsp-42.gif" /></div>

<p>
<a id="pgfId-1230954"></a>Another case in which wire editing lets the pathSeg cross the region boundaries is when one of the two regions is a global region, which implies that there is only one local region. The following figure shows that the pathSeg crosses from a local region to a global region that does not have any defined WSP.</p>

<p>
<a id="pgfId-1230958"></a></p>
<div class="webflare-div-image">
<img width="668" height="426" src="images/wsp-43.gif" /></div>
<h2>
<a id="pgfId-1140006"></a><a id="72662"></a>Wire Edit<a id="wsphierarchy"></a>or Hierarchy Support</h2>

<p>
<a id="pgfId-1140007"></a>By default, the width spacing patterns of pins are not available as instance pin patterns. Consequently, the global width spacing pattern is available in the instance on a metal layer. For example, the following figure shows that the global width spacing pattern on <code>Metal2</code> is being considered even though the instance pins have been created using different patterns.</p>

<p>
<a id="pgfId-1140012"></a></p>
<div class="webflare-div-image">
<img width="668" height="440" src="images/wsp-44.gif" /></div>

<p>
<a id="pgfId-1140035"></a>To identify the pattern of the instance pins, select the <em>Instance Pins Patterns</em> check box in the <em>Wire</em> <em>Snapping </em>section of the Layout Editor Options form and then run the <em>Create Wire</em> command. </p>

<p>
<a id="pgfId-1140039"></a></p>
<div class="webflare-div-image">
<img src="images/12.2_instancepins.gif" /></div>

<p>
<a id="pgfId-1140040"></a>When enabled, the width spacing patterns of an instance are considered instead of the width spacing patterns of the enclosing region.</p>
<ul><li>
<a id="pgfId-1140041"></a>The width spacing patterns on the layers below the lowest instance pins layer are not accessible.</li><li>
<a id="pgfId-1140042"></a>On instance pins layers, only the patterns of the instance whose tracks match the instance pins are available within the instance bounding box.</li><li>
<a id="pgfId-1140043"></a>The width spacing patterns of the enclosing region are only available above the highest instance pins layer.</li></ul>


<p>
<a id="pgfId-1140044"></a>When the <em>Instance Pins Patterns </em>check box is selected, the global width spacing pattern on <code>Metal2</code> stops at the instance boundary and the pin width spacing patterns are used to make connections inside the instance. However, in <code>Metal3</code>, the global width spacing pattern is still available in the instance. The pin pattern is available only inside the instance boundary and is not exposed outside the instance boundary, as shown in the following figure. Also, the instance pin pattern allows to connect to the pattern of the upper layer, which is coming from the global region.</p>

<p>
<a id="pgfId-1140049"></a></p>
<div class="webflare-div-image">
<img width="668" height="491" src="images/wsp-46.gif" /></div>

<p>
<a id="pgfId-1140050"></a>The following are some examples of connections from pins using their own patterns.</p>
<p>
<a id="pgfId-1140051"></a>In this example, you have a <code>Metal2</code> top-level pin and two instances of the same master side by side. The following figure displays the connection that exists between the instance pin and the top-level pin.</p>

<p>
<a id="pgfId-1140056"></a></p>
<div class="webflare-div-image">
<img width="668" height="357" src="images/wsp-47.gif" /></div>

<p>
<a id="pgfId-1140057"></a>If the top-level pin has the same width spacing pattern as that of the instance pin, you can make a direct connection between the instance pin and the top-level pin without changing the metal layer, as shown in the following figure.</p>

<p>
<a id="pgfId-1140062"></a></p>
<div class="webflare-div-image">
<img width="668" height="437" src="images/wsp-48.gif" /></div>

<p>
<a id="pgfId-1140063"></a>You can also make a pin-to-pin connection between the pin on one instance to the pin on the other instance using the pin pattern. </p>

<p>
<a id="pgfId-1140068"></a></p>
<div class="webflare-div-image">
<img width="668" height="375" src="images/wsp-49.gif" /></div>

<p>
<a id="pgfId-1140112"></a>The following are some examples of an instance with pins on several layers.</p>
<p>
<a id="pgfId-1140113"></a>In this example, there is a pin on <code>Metal3</code> and <code>Metal4</code> layer. Therefore, for <code>Metal3</code> and <code>Metal4</code>, the pin instance width spacing pattern can be used. The following figure shows the width spacing pattern of the instance pin on <code>Metal3</code> layer.</p>

<p>
<a id="pgfId-1140119"></a></p>
<div class="webflare-div-image">
<img width="668" height="526" src="images/wsp-50.gif" /></div>

<p>
<a id="pgfId-1140142"></a>Because there is no pin available on <code>Metal2</code> layer and <code>Metal2</code> is lower than the highest, or below the highest metal layer of the instance for which width spacing patterns are available, no width spacing pattern is available inside the instance.</p>

<p>
<a id="pgfId-1140148"></a></p>
<div class="webflare-div-image">
<img width="668" height="589" src="images/wsp-51.gif" /></div>

<p>
<a id="pgfId-1140171"></a>Again, there is no pin available on the <code>Metal5</code> layer and <code>Metal5</code> is higher than the highest, or above the highest metal layer above the instance. Therefore, the global pattern is available inside the instance on <code>Metal5</code>, as shown in the following figure.</p>

<p>
<a id="pgfId-1140177"></a></p>
<div class="webflare-div-image">
<img width="668" height="507" src="images/wsp-52.gif" /></div>
<h2>
<a id="pgfId-1139621"></a><a id="57159"></a>Pattern Flip<a id="we_patternflipping"></a>ping Support</h2>

<p>
<a id="pgfId-1152256"></a>Pattern flipping enables you to flip an existing WSP pattern in alternate periods in a region. WSP pattern flipping can be specified at two levels:</p>
<ul><li>
<a id="pgfId-1152257"></a>On a WSP region</li><li>
<a id="pgfId-1152025"></a>On a WSP global grid </li></ul>

<p>
<a id="pgfId-1152244"></a>For more information, see <h-hot><a actuate="user" class="URL" href="../vwspuser/PatternAssistant.html#wsp_TPAssistant" show="replace" xml:link="simple">Working with the Track Pattern Assistant</a></h-hot>. </p>
<p>
<a id="pgfId-1152284"></a>When a pattern in a region is flipped, a wire created on a track in that region automatically adjusts to the flipped pattern, as shown in the following figure. </p>

<p>
<a id="pgfId-1155325"></a></p>
<div class="webflare-div-image">
<img width="668" height="518" src="images/wsp-53.gif" /></div>

<p>
<a id="pgfId-1155326"></a>If a WSP pattern has a track with offset zero but no track at the top period line, then the track is generated on every period line. In addition, if a WSP pattern has a track with offset zero as well as a track at the top period line, then the pattern should only be used with a flipped repeat mode. In this way only compatible tracks will overlap.</p>
<p>
<a id="pgfId-1155342"></a>If a WSP with offset zero has tracks with different widths at the top and bottom of the period, the pattern can only be flipped. This ensures that the overlapping tracks are compatible and can be merged. </p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="interactiveColoredRouting.html" id="prev" title="Interactive Colored Routing (ICADVM20.1 Only)">Interactive Colored Routing (I ...</a></em></b><b><em><a href="vrf.html" id="nex" title="Supporting Virtuoso RF (ICADVM20.1 EXL Only)">Supporting Virtuoso RF (ICADVM ...</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>