
<html><head><title>Initializing and Planning the Layout</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="spriya" />
<meta name="CreateDate" content="2020-09-16" />
<meta name="CreateTime" content="1600316864" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the features and functionality of the Virtuoso Custom Placer in the ICADV 12.2 release." />
<meta name="DocTitle" content="Virtuoso Automated Device Placement and Routing Flow Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Initializing and Planning the Layout" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="autodevicelayoutflow" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-09-16" />
<meta name="ModifiedTime" content="1600316864" />
<meta name="NextFile" content="Routing.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="GettingStarted.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Automated Device Placement and Routing Flow Guide -- Initializing and Planning the Layout" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="autodevicelayoutflowICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="autodevicelayoutflowTOC.html">Contents</a></li><li><a class="prev" href="GettingStarted.html" title="Introduction to Automated Device Placement and Routing">Introduction to Automated Devi ...</a></li><li style="float: right;"><a class="viewPrint" href="autodevicelayoutflow.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="Routing.html" title="Placing and Routing the Design">Placing and Routing the Design</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Automated Device Placement and Routing Flow Guide<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>2
<a id="pgfId-1065082"></a></h1>
<h1>
<a id="pgfId-1065083"></a><hr />
Initializing and Planning the Layout<hr />
</h1>

<p>
<a id="pgfId-1065631"></a>This section covers the following topics:</p>
<ul><li>
<a id="pgfId-1065677"></a><a href="Place.html#79742">Initializing a Layout</a></li><li>
<a id="pgfId-1070373"></a><a href="Place.html#40456">Generating Constraints and Constraint Groups</a></li><li>
<a id="pgfId-1091208"></a><a href="Place.html#77734">Deriving WSPs and Row Regions</a></li></ul>



<h2>
<a id="pgfId-1065692"></a><a id="79742"></a>Initializi<a id="initialize"></a>ng a Layout</h2>

<p>
<a id="pgfId-1065847"></a>The first step in the automated device placement and routing flow is to initialize your layout view. This involves the following steps.</p>
<ol><li>
<a id="pgfId-1073955"></a>Click <em>Initialize Layout </em>in the Auto Device P&amp;R assistant to open the <em>Initialize</em> tab.<br />
<a id="pgfId-1073961"></a><div class="webflare-div-image">
<img width="668" height="574" src="images/Place-2.gif" /></div></li><li>
<a id="pgfId-1105085"></a>Select <em>Generate</em> to enable the device generation options.</li><li>
<a id="pgfId-1066000"></a>Select <em>Instances</em> to generate all instances from the source schematic.</li><li>
<a id="pgfId-1074417"></a>Select <em>Boundary</em> to generate a PR boundary as per the specified combination of <em>Utilization</em> and <em>Aspect Ratio</em> or <em>Width</em> and <em>Height</em>. <ul><li>
<a id="pgfId-1091817"></a>Utilization and Aspect Ratio: Utilization specifies what percentage of the area within the PR boundary that can be filled with objects. The default is 25 percent. <em>Aspect Ratio </em>specifies the width-to-height ratio of the PR boundary. The default value is 1, which indicates a square boundary. An aspect ratio of 0.5 specifies a boundary twice as high as it is wide. A value of 2 specifies a boundary twice as wide as its height.</li><li>
<a id="pgfId-1091858"></a>Width and Height: <em>Width</em> specifies the exact width of the PR boundary. <em>Height</em> specifies the exact height of the PR boundary. <em>Width</em> can be accessed from the <em>Utility</em> drop-down list and <em>Height</em> from the <em>Aspect Ratio</em> drop-down list.<br /></li></ul></li><li>
<a id="pgfId-1074996"></a>Select <em>Pins to </em>generate all the pins that are present on the selected <em>Pin Layer</em> in the source cellview. The default <em>Pin Layer</em> is the first metal layer in the layer stack.</li><li>
<a id="pgfId-1105324"></a>Select <em>Load</em> to enable the options in the <em>Load</em> section.</li><li>
<a id="pgfId-1105399"></a>Select <em>Pins</em> to load pins from another cellview. Click <em>Browse</em> to select the required cellview in the Library Browser.</li><li>
<a id="pgfId-1105412"></a>Select <em>Boundary</em> to load the PR boundary from another cellview. Click <em>Browse</em> to select the required cellview in the Library Browser.</li><li>
<a id="pgfId-1105607"></a>Select <em>Preserve Existing</em> to enable the options to preserve existing components. </li><li>
<a id="pgfId-1105605"></a>Select <em>Instances</em> to preserve existing instances. Additional instances in the source schematic are incrementally generated in the target layout.</li><li>
<a id="pgfId-1106740"></a>Select <em>Constraints</em> to preserve existing constraints when instances are not regenerated. This option is available only when <em>Instances</em> is selected.</li><li>
<a id="pgfId-1105716"></a>Select <em>Pins</em> to preserve existing pins. Additional pins in the source schematic are incrementally generated in the target layout.</li><li>
<a id="pgfId-1105722"></a>Select <em>Boundary </em>to preserve the existing boundary. The boundary is not regenerated.</li><li>
<a id="pgfId-1105734"></a>Select <em>Row</em> to preserve existing rows. The rows are not regenerated.</li><li>
<a id="pgfId-1074131"></a>Select <em>Update PCell Params</em> to update the parameters of the specified technology file. The PDK settings are loaded to prepare the Pcells to work in the placement and routing flow. Use this option to update the required layout-only Pcell parameters for specific PDKs and environment variables to facilitate placement and routing. </li><li>
<a id="pgfId-1075101"></a>Click <em>Apply</em> to generate the selected objects in the layout canvas. All the instances and pins are generated below the PR boundary.<a id="39546"></a><br />
<a id="pgfId-1094553"></a><div class="webflare-div-image">
<img width="639" height="402" src="images/Place-3.gif" /></div></li></ol>



























<h4><em>
<a id="pgfId-1094557"></a>Environment Variable Settings</em></h4>

<p>
<a id="pgfId-1094559"></a>The following environment variable settings are applied during layout initialization:</p>

<p>
<a id="pgfId-1094600"></a></p>
<table class="webflareTable" id="#id1094740">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1095143"></a>Environment Variable Settings</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1095145"></a>CAE is turned off: </p>
<p>
<a id="pgfId-1095146"></a><code>envSetVal( &quot;layoutXL&quot; &quot;</code><a href="../vxlhelp/chap7.html#constraintAwareEditing">constraintAwareEditing</a><code>&quot; &#39;boolean nil )</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1095148"></a>WSP-aware snapping is turned on:</p>
<p>
<a id="pgfId-1095149"></a><code>envSetVal( &quot;layoutXL.APAssist&quot; &quot;</code><a href="../vplacer/vPlaceEnvars.html#WSPAware">WSPAware</a><code>&quot; &#39;boolean t ) </code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1095151"></a>Modgen regeneration options are turned on:</p>

<p>
<a id="pgfId-1095152"></a><code>envSetVal( &quot;layoutXL.AP&quot; &quot;</code><a href="../vplacer/vPlaceEnvars.html#regenModgenPostProcess">regenModgenPostProcess</a><code>&quot; &#39;boolean t )</code></p>

<p>
<a id="pgfId-1095153"></a><code>envSetVal( &quot;layoutXL&quot; &quot;modgenRegenerateSnapToPlaceRow&quot; &#39;cyclic &quot;WithinRowRegion&quot; ) </code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1095155"></a>Wire Editor Snapping Mode is set to WSP Pattern:</p>
<p>
<a id="pgfId-1095156"></a><code>envSetVal( &quot;layout&quot; &quot;</code><a href="../weuser/appB.html#snapWireGrid">snapWireGrid</a><code>&quot; &#39;cyclic &quot;Snap Pattern&quot; )</code></p>
</td>
</tr>
</tbody></table>
<h2>
<a id="pgfId-1068056"></a><a id="40456"></a>Generating Constra<a id="genConstraints"></a>ints and Constraint Groups</h2>

<p>
<a id="pgfId-1068135"></a>Device groups and constraints are central to the effective placement and routing of custom and analog layouts. After initializing the layout, the next step is to generate the required constraints. The automated device placement and routing flow supports automatic structure recognition using circuit finders, the organization of these structures into device groups, and the creation of corresponding constraints.</p>

<p>
<a id="pgfId-1096247"></a></p>
<div class="webflare-div-image">
<img width="668" height="233" src="images/Place-4.gif" /></div>

<p>
<a id="pgfId-1096198"></a>The automatic device placer and router honor these constraints during design placement and routing. </p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1095521"></a>Automatically created constraints can be overridden by creating groups and constraints manually, which are respected by the automatic tools.</div>
<p>
<a id="pgfId-1089200"></a>To generate constraints:</p>
<ol><li>
<a id="pgfId-1069593"></a>Click <em>Generate Constraints</em> in the Auto Device P&amp;R assistant to display the <em>Constraints</em> tab.<br />
<a id="pgfId-1069598"></a><div class="webflare-div-image">
<img width="668" height="558" src="images/Place-5.gif" /></div></li><li>
<a id="pgfId-1069611"></a>Select the <em>Circuit Finders</em> to be run to identify matching devices and device groups in the design. New topological constraints corresponding to the matching devices and device structures are generated.<br />
<a id="pgfId-1093017"></a>The Auto-Device P&amp;R assistant is pre-loaded with a set of <em>Circuit Finders</em>. Each finder analyzes the source data (schematic cellview) and identifies all devices and device groups that match the given criteria. For example, the finder <em>Instances (Symmetry by Connectivity)</em> identifies all symmetric instances, nets, and pins in the source cellview and groups them into a device group. The finder names have the <code>APR-</code> prefix, which indicates that these finders are customized for the Auto-Device P&amp;R flow. By default, all <em>Circuit Finders</em> are selected. Deselect the ones that you do not want to run. <br />
<a id="pgfId-1105034"></a>You can use <em>Enable All</em> <img src="images/EnableAll.gif" />
, <em>Disable All</em><img src="images/DisableAll.gif" /><span>, and </span><em>Inverse All</em><img src="images/InverseAll.gif" /><span>to select the required circuit finders.</span><br />
<a id="pgfId-1106558"></a>The sequence of the finders determines the sequence in which constraints are listed. You can reorder the finders by dragging them to the desired locations within the list.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1106995"></a>For devices to be added to device groups, they need to be registered for the Circuit Prospector assistant. For more information on device registration, see <a actuate="user" class="URL" href="../constraintsSKILL/constskillFunctions.html#ciRegisterDevice" show="replace" xml:link="simple">Constraint Manager Assistant Customization SKILL Commands</a>.</div>
<a id="pgfId-1106388"></a>The following table describes the circuit finders.<br />
<a id="pgfId-1106445"></a><table class="webflareTable" id="#id1106456">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106458"></a><strong>APR Finders</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106460"></a><strong>Description</strong></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106462"></a><em>APR Differential Pair</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106464"></a>Groups devices that form a differential pair structure.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106466"></a><em>APR Differential Pair - Cross Coupled</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106468"></a>Groups devices that form a cross-coupled differential pair structure.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106470"></a><em>APR Current Mirror</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106472"></a>Groups devices that form a current mirror structure.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106474"></a><em>APR Cascode Current Mirror</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106476"></a>Groups devices that form a cascoded current mirror structure.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106478"></a><em>APR Cascode Series Current Mirror</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106480"></a>Groups devices that form a cascoded series current mirror structure.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106482"></a><em>APR Cascode</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106484"></a>Groups cascoded MOS transistor structures.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106486"></a><em>APR Active Same Size Common Gate and Source</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106488"></a>Groups same-sized devices with the same gate and source connections.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106490"></a><em>APR Active Same Size Common Source</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106492"></a>Groups same-sized devices with the same source connection.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106494"></a><em>APR Active Same Cell M-Factored Device</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106496"></a>Groups active devices with mfactor.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106498"></a><em>APR Active Same Cell Stacked Device</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106500"></a>Groups transistors in series stacks.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106502"></a><em>APR Active Same Cell Iterated Device</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106504"></a>Groups iterated devices.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106506"></a><em>APR Active Same Cell and Size</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106508"></a>Groups active devices with same cell name and size.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106510"></a><em>APR Passive Same Cell and Size</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106512"></a>Groups passive devices with same cell names or the same cell sizes and values.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106514"></a><em>APR User Defined Group</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106516"></a>Groups device groups inside text boxes.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106518"></a><em>APR Instances (Symmetry By Connectivity)</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106520"></a>Groups pairs of instances that are determined to be symmetric based on their connectivity.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106522"></a><em>APR Instances (Symmetry By Connectivity with common source or drain)</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106524"></a>Groups pairs of instances that are determined to be symmetric based on their connectivity with a common source or drain.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106526"></a><em>APR Nets (Symmetry By Connectivity)</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106528"></a>Groups nets that are determined to be symmetric based on their connectivity.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106530"></a><em>APR Pins (Symmetry By Connectivity)</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1106532"></a>Groups pins that are determined to be symmetric based on their connectivity.</p>
</td>
</tr>
</tbody></table><br />
<a id="pgfId-1093655"></a>For more information about circuit finders, see <a actuate="user" class="URL" href="../constraints/chap2.html#finders" show="replace" xml:link="simple">Finders</a> in the <em>Virtuoso Unified Custom Constraints User Guide</em>.</li><li>
<a id="pgfId-1076675"></a>The <em>View and Edit Constraints</em> section lists all existing and new constraints and constraints groups based on the recognized structures. Click the + sign to expand each group. Right-click a constraint in this section to display a shortcut menu.<br />
<a id="pgfId-1092324"></a><div class="webflare-div-image">
<img src="images/Constraints_shortcut.gif" /></div>
<a id="pgfId-1092310"></a>Use the options in the shortcut menu to perform the following tasks:<ul><li>
<a id="pgfId-1092478"></a><em>Zoom</em>: To magnify the selected constraints.</li><li>
<a id="pgfId-1092620"></a><em>Select</em>: To select the constraints to be generated.</li><li>
<a id="pgfId-1092684"></a><em>Unselect</em>: To unselect the constraints that you do not want to generate.</li><li>
<a id="pgfId-1092751"></a><em>Delete Constraint</em>: To delete the constraint from the layout cellview.</li></ul></li><li>
<a id="pgfId-1076261"></a>Click <em>Create Constraints</em> to search for all structures that have been enabled in the Circuit Finders pane following the order in which they are listed. All identified structures are organized in groups or Modgen constraints, along with symmetry information for symmetric structures, and are listed in the Constraint Manager.<br />
<a id="pgfId-1095391"></a><div class="webflare-div-image">
<img width="668" height="321" src="images/Place-10.gif" /></div></li></ol>







  























<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1093907"></a>Structures with members in an already-found group are skipped. </div>
<p>
<a id="pgfId-1095587"></a>Expand the following categories in the View and Edit Constraints pane to view the corresponding entries:</p>
<ul><li>
<a id="pgfId-1095588"></a><em>Grouped Devices</em>: Lists structures for which groups have been created. The selected groups are highlighted in the layout and schematic windows. </li><li>
<a id="pgfId-1095590"></a><em>Symmetry Constraints</em>: Lists the instances, nets, and pins on which symmetry constraints have been created. </li><li>
<a id="pgfId-1095592"></a><em>Unconstrained Devices, Nets and Pins</em>: Lists all unconstrained devices in the layout. You can select the required devices and create groups or symmetry constraints on them by using the options in the shortcut menu.</li></ul>



<h4>
<a id="pgfId-1089329"></a>Related SKILL Functions</h4>

<p>
<a id="pgfId-1094034"></a>You can use the following SKILL functions to instantiate the finders:</p>
<ul><li>
<a id="pgfId-1094035"></a><a actuate="user" class="URL" href="../constraintsSKILL/constskillFunctions.html#ciActiveSameCellAndSizeIterator" show="replace" xml:link="simple">ciActiveSameCellAndSizeIterator</a>: Iterates over all the active same cell and size structures in the cellview and returns a list of corresponding devices. </li><li>
<a id="pgfId-1094036"></a><a actuate="user" class="URL" href="../constraintsSKILL/constskillFunctions.html#ciCascodeSeriesCurrentMirrorIterator" show="replace" xml:link="simple">ciCascodeSeriesCurrentMirrorIterator</a>: Iterates over all cascode series current mirror structures in the cellview and returns a list of corresponding devices.</li><li>
<a id="pgfId-1094037"></a><a actuate="user" class="URL" href="../constraintsSKILL/constskillFunctions.html#ciCommonGateAndSourceIterator" show="replace" xml:link="simple">ciCommonGateAndSourceIterator</a>: Iterates over all common gate and source structures in the cellview and returns a list of corresponding devices. </li><li>
<a id="pgfId-1094038"></a><a actuate="user" class="URL" href="../constraintsSKILL/constskillFunctions.html#ciCommonSourceIterator" show="replace" xml:link="simple">ciCommonSourceIterator</a>: Iterates over all common source structures in the cellview and returns a list of corresponding devices.</li><li>
<a id="pgfId-1094039"></a><a actuate="user" class="URL" href="../constraintsSKILL/constskillFunctions.html#ciHierarchicalSeriesIterator" show="replace" xml:link="simple">ciHierarchicalSeriesIterator</a>: Iterates over all the series structures in the cellview and returns a list of corresponding devices. </li><li>
<a id="pgfId-1094040"></a><a actuate="user" class="URL" href="../constraintsSKILL/constskillFunctions.html#ciCommonGateIterator" show="replace" xml:link="simple">ciCommonGateIterator</a>: Iterates over all common gate structures in the cellview and returns a list of corresponding devices.</li></ul>






<h3>
<a id="pgfId-1097011"></a><a id="54308"></a>Creating a Mo<a id="modgen"></a>dgen</h3>

<p>
<a id="pgfId-1097786"></a>Instead of creating standard constraints, the automated device placement and routing flow lets you create Modgens for the device groups identified by the circuit finders. </p>
<p>
<a id="pgfId-1103572"></a>To create Modgens in the Auto Device P&amp;R assistant: </p>
<ol><li>
<a id="pgfId-1098517"></a>Set the <a href="Envars.html#18456">aprCreateModgens</a> environment variable to <code>t</code> as follows:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1103079">
<a id="pgfId-1103079"></a>envSetVal(&quot;layoutXL.AP&quot; &quot;aprCreateModgens&quot; &#39;boolean t)</pre></li><li>
<a id="pgfId-1098523"></a>Open the <em>Constraints</em> tab of the Auto Device P&amp;R assistant.</li><li>
<a id="pgfId-1098585"></a>Select the circuit finders that you want to run to identify device groups in the design. <br />
<a id="pgfId-1103627"></a>For more information, see <a href="Place.html#40456">Generating Constraints and Constraint Groups</a>.</li><li>
<a id="pgfId-1098668"></a>Click <em>Create Constraints</em>. </li></ol>







<p>
<a id="pgfId-1098330"></a>The newly created Modgens are listed in the <em>View and Edit Constraints</em> section under the various categories.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1106298"></a>When you create constraints on a design, existing Modgens are not automatically deleted. To delete them, right-click the required Modgen on the <em>Constraints</em> tab of the Auto Device P&amp;R assistant and select <em>Delete Constraint</em>.</div>

<h3>
<a id="pgfId-1098743"></a>Editing a Modgen </h3>

<p>
<a id="pgfId-1098805"></a>To edit a Modgen:</p>
<ol><li>
<a id="pgfId-1098947"></a>Expand the required category in the <em>View and Edit Constraints</em> section on the <em>Constraints</em> tab of the Auto Device P&amp;R assistant.</li><li>
<a id="pgfId-1099255"></a>Right-click the required Modgen.</li><li>
<a id="pgfId-1099292"></a>Choose <em>Edit Group</em>. <br />
<a id="pgfId-1103678"></a>The Auto Device Array form is displayed.<br />
<a id="pgfId-1099416"></a><div class="webflare-div-image">
<img width="668" height="629" src="images/Place-11.gif" /></div>
<a id="pgfId-1099420"></a>The Auto Device Array is a unified interface that allows you to quickly create and edit Modgens. The form integrates the key options from the Modgen Placement and Modgen Routing toolbars. For more information, see <a href="AutoDeviceArray.html#49602">Generating Modgens Automatically</a>.</li></ol>









<h2>
<a id="pgfId-1091216"></a><a id="74071"></a><a id="77734"></a>Deriving WSPs and Ro<a id="deriveWSPs"></a>w Regions</h2>

<p>
<a id="pgfId-1103754"></a>Generating grids is an optional task, but is highly recommended to obtain better results. At advanced nodes, grids&#8212;including fins, WSPs, poly snap patterns, and rows&#8212;are important for the optimum placement and routing of custom and analog layouts. While row regions are used for device placement, WSP information is used for device routing and snapping.</p>
<p>
<a id="pgfId-1091219"></a>The automated device placement and routing flow lets you derive WSPs and row regions automatically based on the device footprint, layers, and DRCs, with minimal user input. A row template is created automatically for all devices types, with the WSP period determining the row height. Row regions are created in the layout based on the row templates.</p>
<p>
<a id="pgfId-1103783"></a>Before generating rows and grids, ensure that your designs has a uniform gate length to ensure a uniform poly pitch for device snapping.</p>
<p>
<a id="pgfId-1091220"></a>To derive WSPs and row regions:</p>
<ol><li>
<a id="pgfId-1091221"></a>Click <em>Generate WSPs &amp; Rows</em> in the Auto Device P&amp;R assistant to open the <em>WSP/Row</em> tab.<br />
<a id="pgfId-1091228"></a><div class="webflare-div-image">
<img width="668" height="429" src="images/Place-12.gif" /></div></li><li>
<a id="pgfId-1099652"></a>Select <em>Create Row Region</em> and specify the row height as follows:<ul><li>
<a id="pgfId-1099766"></a><em>Auto compute row height</em>: Automatically calculates the row height based on the maximum instance height and the heights of the gate, source, and drain tracks.</li><li>
<a id="pgfId-1099778"></a><em>Specify row height</em>: Lets you specify a row height value.</li><li>
<a id="pgfId-1099858"></a><em>Use row template</em>: Lets you select an existing row template. Click <em>Browse</em> to display the Select Row Template form.<br />
<a id="pgfId-1100052"></a><div class="webflare-div-image">
<img src="images/SelectRowTemplate.gif" /></div></li></ul><br />
<a id="pgfId-1104160"></a>The name of the selected row template is displayed in the <em>Use row template </em>field.<br />
<a id="pgfId-1091231"></a>The WSP period determines the height of rows in the auto-generated row template. All horizontal tracks have the same period. </li><li>
<a id="pgfId-1096533"></a>Select <em>Create Poly Pattern </em>to generate a poly WSP grid in the selected row region.</li><li>
<a id="pgfId-1100712"></a>Select <em>Create Width Spacing Patterns</em> to generate WSPs in the selected row region and specify the following related details:<ul><li>
<a id="pgfId-1100932"></a><em>Top Layer</em> and <em>Bottom Layer</em>: Specify the routing layer range for which WSPs must be created. WSP tracks are inserted in these and all intermediate layers.</li><li>
<a id="pgfId-1091233"></a><em>#Gate Tracks</em>: Specifies the number of gate tracks to be accommodated within a WSP track period. The default is <code>2</code>. The specified number of gate tracks impacts the WSP period. Gate tracks are required for poly gate routing. </li><li>
<a id="pgfId-1091234"></a><em>Gate Track Width</em>: Specifies the number of gate tracks to be added at the top and bottom of each row. The default value is <code>2</code>, which specifies that two gate tracks are to be added to the top and bottom of each row.</li><li>
<a id="pgfId-1091235"></a><em>Gate Track Spacing</em>: Specifies the spacing between gate tracks. Each WSP track must accommodate the given number of gate tracks of the specified width and spacing. If the specified track width is higher than the default, specify a wider spacing value.</li><li>
<a id="pgfId-1091236"></a><em>S/D Track Width</em> and <em>#S/D Tracks: </em>Specifies the width and the number of source and drain tracks to be accommodated in each WSP track period. Select either <em>S/D Track Width</em> or <em>#S/D Tracks </em>and specify a value. The default value is automatically calculated based on the layer constraints and area of the S/D pins.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1093596"></a>The gate and source/drain parameters specified in this form override the default gate and track width, spacing, and count values.</div></li></ul></li><li>
<a id="pgfId-1091238"></a>Instead of specifying the WSP parameters, you can import a WSP pattern from an existing WSP pattern file. Click <em>Import Width Spacing Patterns </em>to open the <em>Select Patterns</em> form, which lets you choose the required WSP Pattern file.<br />
<a id="pgfId-1101349"></a><div class="webflare-div-image">
<img src="images/SelecrPatterns.gif" /></div>
<a id="pgfId-1101328"></a>Specify the following WSP parameters in the <em>Select Patterns</em> form:<ol><li>
<a id="pgfId-1101377"></a>Select the required <em>Library</em>, <em>Cell</em>, and <em>View</em>. All WSP patterns stored in the selected cellview are listed in the following section.</li><li>
<a id="pgfId-1101442"></a>Select the required WSP pattern in the left panel. The <em>Layer</em>, definition (<em>Def</em>), and pattern (<em>Pat</em>) for the selected WSP are displayed in the right panel.</li><li>
<a id="pgfId-1101682"></a>Click <em>OK</em> to select the required pattern and close the form.</li></ol><br />
<a id="pgfId-1104722"></a>WSP parameters from the selected WSP pattern file are loaded into the related fields on the <em>WSP/Row</em> tab.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1102098"></a>In case of discrepancies between the WSP settings and row region settings, for example, a difference in the offset values, the row region settings are honored.</div></li><li>
<a id="pgfId-1091240"></a>Click <em>Generate</em>. <br />
<a id="pgfId-1104869"></a>WSP grids are generated in the layout canvas as per your specifications.<br />
<a id="pgfId-1089301"></a>The Track Pattern assistant lists all the auto-created WSPs and rows with the APR- prefix to differentiate them from existing WSPs.<br />
<a id="pgfId-1089617"></a><div class="webflare-div-image">
<img src="images/TrackPatternAssistant.gif" /></div><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1091333"></a>Existing WSPs that have no change in their specifications are not regenerated. The last set of auto-generated WSPs are made active.</div></li></ol>















































<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="GettingStarted.html" id="prev" title="Introduction to Automated Device Placement and Routing">Introduction to Automated Devi ...</a></em></b><b><em><a href="Routing.html" id="nex" title="Placing and Routing the Design">Placing and Routing the Design</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>