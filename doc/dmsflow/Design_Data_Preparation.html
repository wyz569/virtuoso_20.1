
<html><head><title>Design Data Preparation</title>
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="leenap" />
<meta name="CreateDate" content="2020-02-20" />
<meta name="CreateTime" content="1582191947" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="" />
<meta name="DocTitle" content="Mixed Signal (MS) Interoperability Guide" />
<meta name="DocType" content="Methodology" />
<meta name="FileTitle" content="Design Data Preparation" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="FileType" content="Chapter" />
<meta name="Keyword" content="dmsflow" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-02-20" />
<meta name="ModifiedTime" content="1582191947" />
<meta name="NextFile" content="Schematic-Driven_Mixed_Signal_Design_Flow.html" />
<meta name="Group" content="" />
<meta name="Platform" content="" />
<meta name="PrevFile" content="Technology_Data_Preparation.html" />
<meta name="Product" content="Virtuoso Layout Suite,Innovus," />
<meta name="ProductFamily" content="Custom IC Design,Digital IC Design," />
<meta name="ProductVersion" content="20.10" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Mixed Signal (MS) Interoperability Guide -- Design Data Preparation" />
<meta name="Version" content="20.10" />
<meta name="Renderer" content="WIKI" />
<meta name="SpaceKey" content="dmsflow201" />
<meta name="confluence-version" content="6.13.3" />
<meta name="ecms-plugin-version" content="03.30.005" />

        
        <link href="styles/site.css" rel="stylesheet" type="text/css" />
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    

    </head><body style="background-color: #FFFFFF;"><!-- Begin Buttons --><header xmlns:html="http://www.w3.org/1999/xhtml"><div class="docHeadr">Product Documentation<img src="images/Cadence-Logo.jpg" /></div>
<nav class="blueHead"><ul><li><a class="content" href="dmsflowTOC.html">Contents</a></li><li><a class="prev" href="Technology_Data_Preparation.html" title="Technology_Data_Preparation">Technology_Data_Preparation</a></li><li style="float: right;"><a class="viewPrint" href="dmsflow.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="Schematic-Driven_Mixed_Signal_Design_Flow.html" title="Schematic-Driven_Mixed_Signal_Design_Flow">Schematic-Driven_Mixed_Signal_ ...</a></li></ul></nav></header><!-- End Buttons --><div xmlns:html="http://www.w3.org/1999/xhtml" style="font-size:14px;line-height:1.42857142857;margin:20px 0 0 0;font-weight:bold;"><center>Mixed Signal (MS) Interoperability Guide<br />Product Version 20.10, March 2020</center></div>
<div xmlns:html="http://www.w3.org/1999/xhtml" style="margin-left:5%;">
<p></p>

<p></p>
<div id="main-header">
                    
                    
                                                <div style="width: 100%; font-size: 32px; text-align: left;               font-weight: bold;">4</div>
<h1 style="margin: 4px 0 4px;"><span>Design Data Preparation</span></h1>

                    
                </div>
<div class="wiki-content group" id="main-content">
                    
<p></p>
<div class="toc-macro rbtoc1582191928708">
<ul class="toc-indentation">
<li><a href="#DesignDataPreparation-SpecialSettings/InstructionsToEnabletheMixed-SignalFlow">Special Settings/Instructions To Enable the Mixed-Signal Flow</a></li>
<li><a href="#DesignDataPreparation-ConvertinganExistingLEF/DEF-basedDesignintoOpenAccess">Converting an Existing LEF/DEF-based Design into OpenAccess</a>
<ul class="toc-indentation">
<li><a href="#DesignDataPreparation-ConvertingaLEF/DEF-baseddesignintoOpenAccessbyusingoaOut">Converting a LEF/DEF-based design into OpenAccess by using oaOut</a></li>
</ul>
</li>
<li><a href="#DesignDataPreparation-MigratingaLEFandFloorplanFile-basedFlowtoOpenAccess">Migrating a LEF and Floorplan File-based Flow to OpenAccess</a></li>
<li><a href="#DesignDataPreparation-RunningInnovusintheOpenAccessMode">Running Innovus in the OpenAccess Mode</a>
<ul class="toc-indentation">
<li><a href="#DesignDataPreparation-InitializingInnovusforImplementingaDigitalBlockinOpenAccess">Initializing Innovus for Implementing a Digital Block in OpenAccess</a></li>
<li><a href="#DesignDataPreparation-InitializingInnovuswiththeOpenAccessDatabaseofaDesignCreatedinVirtuosoXL">Initializing Innovus with the OpenAccess Database of a Design Created in Virtuoso XL</a></li>
</ul>
</li>
<li><a href="#DesignDataPreparation-InteroperabilityofConstraintGroupsandNon-DefaultRulesbetweenVirtuosoandInnovus">Interoperability of Constraint Groups and Non-Default Rules between Virtuoso and Innovus</a></li>
<li><a href="#DesignDataPreparation-GenericGuidelinesToRuntheNetlist-DrivenMixed-SignalFlow">Generic Guidelines To Run the Netlist-Driven Mixed-Signal Flow</a></li>
</ul>
</div>
<h2 id="DesignDataPreparation-SpecialSettings/InstructionsToEnabletheMixed-SignalFlow">Special Settings/Instructions To Enable the Mixed-Signal Flow</h2>
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>Cadence does not support a mixed signal flow that combines LEF and OpenAccess in the same flow. The flows used should be either entirely LEF-based or entirely OpenAccess. The OpenAccess flow has the advantage of full interoperability with Virtuoso, and enables many features such as floorplanning, routing constraint interoperability and Mixed Signal Static timing analysis. The instructions for starting Innovus in the OpenAccess mode are included in this section of the documentation.</p>
</div>
</div>

<p></p>
<ul><li>To facilitate the use of the mixed-signal flow, Cadence has taken steps to prevent problems that could arise from the use of non-interoperable or bad data originating from the Virtuoso platform. Cadence strongly recommends you to use a data and technology checker whenever Virtuoso-created data is to be brought into Innovus. The OpenAccess Database Interoperability Checker (oaDBChecker) provided by Cadence will flag any technology or data-related issues that could cause problems later in the flow. The checker can be run directly from Virtuoso, where it is available as a plugin, or you can manually load the checker in Virtuoso from the Innovus installation hierarchy.&#160;For steps to load the oaDBChecker, refer to the&#160;<a href="OpenAccess_Database_Interoperability_Checker.html">OpenAccess Database Interoperability Checker</a>&#160;chapter.</li></ul><ul><li>
<p>Innovus recognizes pcells already created by Virtuoso. However, it cannot create pcells by itself.</p>
</li><li>
<p>To view pcells in Innovusâ„¢ Implementation System, run the following commands at the UNIX prompt before starting the Innovus session:</p>

<p><code>setenv CDS_ENABLE_EXP_PCELL TRUE</code></p>

<p><code>setenv CDS_EXP_PCELL_DIR &lt;directory path&gt;</code></p>

<p>The default directory name for the pcell cache is&#160;<code>.expressPcells</code>.</p>
</li></ul><ul><li>To import an OpenAccess database created from Virtuoso that contains objects that are not understood by Innovus (such as MPPs), set the following <span class="fontredcadence">variable</span> in Innovus:&#160;<br /><code><span class="fontredcadence">setOaxMode</span> <span class="fontredcadence">-updateMode</span> true</code><br />This setting will retain any objects not understood by Innovus, and will save the objects back to the OpenAccess database that is output from Innovus.&#160;<br /><br />If you are not sure whether the OpenAccess database created from Virtuoso contains objects that are not understood by Innovus, set the following <span class="fontredcadence">variable</span> in Innovus:<br /><code><span class="fontredcadence">setOaxMode</span> <span class="fontredcadence">-updateMode</span> auto</code><br />This setting enables update mode internally&#160;<strong>if</strong>&#160;the software finds&#160;objects that are not supported in Innovus.</li><li>If you are performing power routing in Innovus using&#160;<code><span class="fontredcadence">sroute</span></code>&#160;in the OpenAccess flow, you should control&#160;<code><span class="fontredcadence">sroute</span></code>&#160;so that it does not create custom vias. This is important because saving a design with custom vias in Innovus will require write access to the technology library, and in many cases this library is Read-Only. To prevent&#160;<code><span class="fontredcadence">sroute</span></code>&#160;from creating non-symmetrical vias, you should have this setting in Innovus prior to running&#160;<code><span class="fontredcadence">sroute</span></code>&#160;in your script:<br /><code><span class="fontredcadence">setViaGenMode</span> <span class="fontredcadence">-symmetrical_via_only</span> true</code></li></ul><ul><li>By default, the DEF-based flow is used for invoking Quantus extraction. To use the OpenAccess interface instead for invoking Quantus extraction, set the following <span class="fontredcadence">variable</span> in Innovus:<br /><code><span class="fontredcadence">setExtractRCMode</span> <span class="fontredcadence">-useQrcOAInterface</span> true</code><code><br /></code></li><li>
<p>To create SPECIALNETS for Innovus (nets that would be in the DEF SPECIALNETS section), geometric routes need to be created in Virtuoso. To enable GUI access for creating geometric routes, include the following in the .cdsinit file when working in the Virtuoso environment.</p>

<p><code>; Enable the Create-&gt;Geometric Wire functionality</code></p>

<p><code>envSetVal( &quot;we&quot; &quot;mixedSignalWireEditingEnvironment&quot; &#39;boolean t )</code></p>
</li><li>
<p>Set the compression level of a library, during the library creation process in Innovus, to&#160;<code>0</code>&#160;using the&#160;<code><span class="fontredcadence">setOaxMode</span></code>&#160;command. Innovus supports the compression of theOpenAccess database and does it by default. However, Virtuoso 6.1.5 version does not support a compressed database as the input. So, in order to create an OpenAccess library that can interoperate with Virtuoso 6.1.5, the compression in Innovus needs to be turned off by using the following Innovus command:&#160;<br /><code><span class="fontredcadence">setOaxMode</span> <span class="fontredcadence">-compressLevel</span> 0</code><br />Cellviews written to a library will follow the compression level of the library and not the&#160;<code><span class="fontredcadence">setOaxMode</span> <span class="fontredcadence">-compressLevel</span></code>&#160;setting at the time when the cellview is being created.</p>
</li></ul>
<p></p>
<h2 id="DesignDataPreparation-ConvertinganExistingLEF/DEF-basedDesignintoOpenAccess">Converting an Existing LEF/DEF-based Design into OpenAccess</h2>

<p>You may have a placed and routed Innovus design that you would like to convert to OpenAcess in order to exercise the many interoperability related features of OpenAccess or simply to run the Innovus flow in OpenAccess. Conversion to OpenAccess is possible only if an interoperable mixed-signal OpenAccess (MSOA) PDK has already been created for the particular technology and metal stack used by the design. To convert the Innovus design into OpenAccess, use the following steps:</p>
<ol><li>Restore the existing LEF/DEF-based design:<br /><code><span class="fontredcadence">restoreDesign</span> PNRComplete.dat myDesign</code>&#160;</li><li>Set the&#160;<code>init_lef_file</code>&#160;global variable to null to instruct Innovus that a LEF technology file will not be used in this session:<br /><code><span class="fontredcadence">set init_lef_file</span> &quot;&quot;</code>&#160;</li><li>Specify the OpenAccess technology and standard cell libraries and any OpenAccess macro libraries:<br /><code><span class="fontredcadence">set init_oa_ref_lib</span> {techLib stdcellLib macroLib}</code><br />In this example,&#160;<code>techLib</code>&#160;is the interoperable MSOA PDK, which has been created by merging some of the technology information found in a tech LEF with the base PDK used by Virtuoso, as explained in the&#160;&quot;Implementing an Interoperable/MSOA PDK&quot;<span style="color: rgb(0,0,0);">&#160;section in the <a href="Technology_Data_Preparation.html">Technology Data Preparation</a> chapter</span>.</li><li>Write out the LEF-equivalent information from the LEF/DEF-based design that was loaded into memory using&#160;<code><span class="fontredcadence">restoreDesign</span></code>&#160;in Step 1:<br /><code>write_lef_library before_conversion.lef<br /></code>The file created in this step can be compared to the LEF that will later be created from the OpenAcess representation of the same design. This step is highly recommended as it enables you to detect possible issues with the MSOA PDK, early in the flow. The&#160;<code>write_lef_library</code>&#160;command has an option for writing out only the technology information (using the&#160;<code>-tech_only</code>&#160;option) or the macro data (using the&#160;<code>-macro_only</code>&#160;option). Cadence recommends that both type of data in the LEF be compared; however, if you prefer to compare the DRC rules separately, the command could be run twice, with one option at a time, to create two different files that can later be used for comparison. Note that this command could have also been run directly after the&#160;<code><span class="fontredcadence">restoreDesign</span></code>&#160;command, because the setting of variables after&#160;<code><span class="fontredcadence">restoreDesign</span></code>&#160;does not change the LEF data seen by this command.&#160;</li><li>Save the design into an OpenAccess lib/cell/view format:<br /><code><span class="fontredcadence">saveDesign</span><span class="fontredcadence"> -cellview</span> {myDesignLib myDesign PNRcomplete}</code><br />In this example,&#160;<code>myDesignLib</code>&#160;is the OpenAccess design library that will contain the design data, the specific cell name is&#160;<code>myDesign</code>, and the name of the view is&#160;<code>PNRcomplete</code>. This step would have not been possible without the MSOA tech file that was loaded earlier using the&#160;<code><span class="fontredcadence">set init_oa_ref_lib</span></code>&#160;command in Step 3.</li></ol>
<p>At this point, the LEF/DEF-based design has been saved the design into OpenAccess. Now, you need to make sure that the technology and macro information is the same between the LEF and OpenAccess versions of the design. To do so, you need to restore the converted OpenAccess design in a different session of Innovus and write out the equivalent LEF information so that you can compare it with the LEF written out to the&#160;<code>before_conversion.lef</code>&#160;file in Step 4. To restore the design in a different session, a&#160;<code>cds.lib</code>&#160;file needs to exist in the current working directory where Innvous is getting invoked. This file enables Innovus to find the directory&#160;where the design data is stored. The syntax of the&#160;<code>cds.lib</code>&#160;file could be as follows:</p>

<p><code>DEFINE myDesignLib /usr/A/myDesignLib<br /></code>In this example, the&#160;<code>/usr/A/myDesignLib</code>&#160;directory will contain a directory named&#160;<code>myDesign</code>, which is the top-level cell name in the design.</p>

<p>In a new Innovus session, perform the following steps:</p>
<ol><li>Restore the converted OpenAccess Design:<br /><code><span class="fontredcadence">restoreDesign</span><span class="fontredcadence"> -cellview</span> {myDesignLib myDesign PNRcomplete}</code></li><li>Write out the LEF information from the converted design:<br /><code>write_lef_library after_conversion.lef</code>&#160;<br />This file will contain the LEF data created from the OpenAccess technology and macro information loaded in Innovus when the design is read in using the&#160;<code><span class="fontredcadence">restoreDesign</span></code>&#160;command.</li></ol>
<p>Now, you can run the Unix&#160;<code>diff</code>&#160;command on the&#160;<code>before_conversion.lef</code>&#160;and&#160;<code>after_conversion.lef</code>&#160;files. If the conversion happened correctly, there will be no differences in the two files from a DRC point of view. The two files should also have the same set of macros.</p>

<p>The following differences in the two LEF files will not cause any problems when the design is run in Innovus:</p>
<ul><li>Extra masterslice/implant layers in&#160;<code>after_conversion.lef</code></li><li>Extra vias/sites in&#160;<code>after_conversion.lef</code></li></ul>
<p>If the routing and cut layers are the same between the two LEFs and the DRC rules match, the OpenAccess PDK is in sync with the LEF from a technology point of view.</p>
<h3 id="DesignDataPreparation-ConvertingaLEF/DEF-baseddesignintoOpenAccessbyusingoaOut">Converting a LEF/DEF-based design into OpenAccess by using <span class="fontredcadence">oaOut</span></h3>

<p>You can use the <code><span class="fontredcadence">oaOut</span></code> command in Innovus to send the design data in the OpenAccess format to either Virtuoso or a third party tool capable of reading OpenAcess. For <code><span class="fontredcadence">oaOut</span></code> to work, you need to first create an interoperable MSOA PDK containing the design rules for the specific process used by the design. Follow steps 1 and 2 below to create the technology library to be used in this process:</p>
<ol><li>With the design loaded in Innovus, execute the following two commands:<ol><li><code>write_lef_library -tech_only TECH.lef</code></li><li><code>write_lef_library -macro_only MACRO.lef</code><br />(If the design has no macros, skip this step.)</li></ol></li><li>Run the <code>lef2oa</code>command. <code>lef2oa</code> is a stand-alone UNIX command that is shipped with the Innovus software. You <span>can found it in the Innovus hierarchy:</span><br /><ol><li><code>lef2oa -useFoundryInnovus -lef TECH.lef -lib RapidPDK -techRefs BasePDK</code></li><li><code>lef2oa -lef MACRO.lef -lib RapidPDK</code><br /><span>(If the design has no macros, skip this step.)</span></li><li><code>lef2oa -lef stdcell.lef -lib RapidPDK</code><br />(This will convert the std cell libraries to the OpenAccess format, referencing the technology library.)<br /><br /></li></ol>Here, <code>RapidPDK</code> is the name of the new tech file that will have all the technology information for both Innovus and Virtuoso. <code>BasePDK</code> is the technology file used to run the Virtuoso environment. The above process builds an Incremental Technology Database (ITDB) on top of the existing technology file for Virtuoso.</li><li>Next, create an OpenAccess design library to hold the design data to be sent to Virtuoso by using the following command:<ol><li><code><span class="fontredcadence">createLib</span> myDesignLib <span class="fontredcadence">-referenceTech</span> {RapidPDK}</code></li></ol></li><li>Now, use the <code><span class="fontredcadence">oaOut</span></code> command to convert the design to OpenAccess and save it in the design library that was created in the previous step:<br /><ol><li><code><span class="fontredcadence">oaOut</span> myDesignLib myRoutedDesign layout&#160;<span class="fontredcadence">-refLibs</span> RapidPDK</code><br />(A cell view by the name of <code>myRoutedDesign</code> is created in the design library <code>myDesignLib</code> referencing the technology information in the <code>RapidPDK</code>.)</li></ol></li></ol>
<p></p>
<h2 id="DesignDataPreparation-MigratingaLEFandFloorplanFile-basedFlowtoOpenAccess">Migrating a LEF and Floorplan File-based Flow to OpenAccess</h2>

<p>The main difference between the LEF-based flow and the OpenAccess flow is the use of OpenAccess libraries and cell views instead of the text-based LEF and floorplan files.</p>

<p>Following are the steps to migrate a LEF and Floorplan file-based flow to OpenAccess:</p>
<ol><li>Create&#160;OpenAccess technology and cell libraries that would be compatible for use in Innovus and Virtuoso. You can do so&#160;by creating an Incremental Technology Data Base (ITDB) structure for the interoperable OpenAccess libraries. You will need to have Virtuoso in your path settings.<ol><li>Create an OpenAccess technology library for the technology LEF file using&#160;<code>lef2oa</code>.<br /><code>lef2oa &#8211;lef tech.lef &#8211;lib techLib &#8211;libPath refLibs</code><br />This creates the&#160;<code>LEFDefaultRouteSpec</code>&#160;constraint group in the technology library. The&#160;<code>LEFDefaultRouteSpec</code>&#160;constraint group has all the technology information needed by Innovus.&#160;<br />This also creates the display.drf file with the color and stipple patterns for the layers to be used in the dfII environment.</li><li>Import the MACRO LEF files in a new ITDB with the&#160;<code>techLib</code>&#160;as the reference for the technology.<br /><code>lef2oa &#8211;lef stdcells.lef &#8211;lib cellsLib &#8211;techRefs techLib &#8211;libPath refLibs</code><br />This creates the cell library with the OpenAccess abstract views for the cells while referring the technology information from the&#160;<code>techLib</code>.</li><li>As&#160;<code>lef2oa</code>&#160;does not create bus information in the abstracts, you need to create the bus information in these abstracts using&#160;<code>verilogAnnotate</code>:<br /><code>verilogAnnotate &#8211;verilog stdcells.v &#8211;refLibs cellsLib &#8211;refViews abstract</code><br />This creates the bus and the bus term order, ascending or descending, in the OpenAccess cell views.<br />You will need the verilog stubs for the cells to be used for&#160;<code>verilogAnnotate</code>.&#160;You can use&#160;<code>oa2verilog</code>&#160;to create the verilog stubs in case you do not have them readily available.</li></ol></li><li>Next, create an OpenAccess view for the text floorplan file.&#160;There can be two approaches for the above:<br /><ul><li>Use<code> <span class="fontredcadence">defOut</span></code>&#160;from the LEF-based Innovus database after the .fp&#160;file has been loaded and then use <code>def2oa</code> to create an OpenAccess cellview with the floorplan information.<br /><code><span class="fontredcadence">defOut</span> -routing from_innovus.def</code><br /><code>def2oa &#8211;def from_innovus.def &#8211;lib designLib &#8211;cell top &#8211;view floorplan &#8211;techrefs techLib</code><code><br /></code>This creates an OpenAccess design library with the top cell and the initial seed floorplan view.</li><li>Save OpenAccess directly from Innovus after loading the&#160;<code>.fp</code>&#160;file:<br /><code><span class="fontredcadence">saveDesign</span><span class="fontredcadence"> -cellview</span> {designLib top floorplan}</code><br />The OpenAccess floorplan view cannot be saved from data created using LEF-based libraries. The LEF libraries must be converted to OpenAccess form and the design reloaded using those OpenAccess libraries.</li></ul></li><li>Finally, if you are using the Innovus Foundation Flow, you need to modify some variables in the&#160;<code>setup.tcl</code>&#160;file:<br /><ol><li>Add the following variables in&#160;<code>setup.tcl</code>&#160;so that the OpenAccess data is read in for the technology, cells, and the floorplan:<ul><li><code>set vars(dbs_format) oa</code></li><li><code>set vars(oa_abstract_name) abstract</code></li><li><code>set vars(oa_layout_name) layout</code></li><li><code>set vars(oa_design_lib) designLib</code></li><li><code>set vars(oa_ref_lib) macroLib</code></li><li><code>set vars(oa_fp) &quot;designLib top floorplan&quot;</code></li></ul></li><li>Unset the following variables or remove them from&#160;<code>setup.tcl</code>&#160;to do away with the text LEF and floorplan files:<ul><li><code>set vars (fp_file) top.fp</code></li><li><code>set vars (lef_files) &#8220;&#8221;</code></li></ul></li></ol>After the&#160;<code>setup.tcl</code>&#160;file has been modified as mentioned above, the rest of the scripts and supporting files in the foundation flow can be used as it is for all the flow steps.</li></ol><h2 id="DesignDataPreparation-RunningInnovusintheOpenAccessMode">Running Innovus in the OpenAccess Mode</h2>

<p>In this mode, Innovus needs to use the common PDK described in the previous sections of this document. No LEFs are needed for Innovus to operate in the OpenAccess mode, because both the technology data as well as the standard cell data can be represented in OpenAccess. The design connectivity needed for Innovus in the mixed signal flow could be read from either&#160;a Verilog netlist or an OpenAccess database generated in Virtuoso XL. In Virtuoso XL, the&#160;<em>Generate From Source</em>&#160;command creates a layout view which has the connectivity information in the original &#160;schematics.</p>

<p>In typical mixed signal designs, there may be one or more digital blocks that need to get implemented. If the top level of the design is represented as schematics in Virtuoso, the digital blocks in the design are represented as soft blocks and typically come with Verilog Netlist created from Synthesis. In these cases, Innovus needs to be initialized using the Verilog netlist of the particular block, and later in the flow, the floorplan of the block created in Virtuoso could be read into Innovus using the command&#160;<code><span class="fontredcadence">oaIn</span></code>. This flow is referred to as&#160;<strong>Analog on Top.</strong></p>

<p>In another commonly practiced flow, the entire design (captured as an OpenAccess cellview in Virtuoso) is brought into Innovus for either co-design, analysis, or ECO. In that flow, Innovus can be initialized with the OpenAccess database created by Virtuoso XL, and there is no need to have a Verilog netlist for the top level of the design. This flow is referred to as&#160;<strong>Mixed Signal on Top</strong>.</p>
<h3 id="DesignDataPreparation-InitializingInnovusforImplementingaDigitalBlockinOpenAccess">Initializing Innovus for Implementing a Digital Block in OpenAccess</h3>

<p>The following setting can be used to initialize Innovus for implementing a digital block in OpenAccess. Note that these settings must be made once Innovus is invoked.</p>

<p><code><span class="fontredcadence">set init_abstract_view</span>&#160;<em>abstract</em></code></p>

<p><code><span class="fontredcadence">set init_layout_view</span>&#160;<em>layout</em></code></p>

<p><code><span class="fontredcadence">set init_oa_ref_lib</span> {<em>lib1 lib2 lib3</em>}</code>&#160; &#160;#These are the OpenAccess reference libraries used in the design.&#160;<em><code>lib1</code></em>&#160;could be the OpenAccess library containing the technology information,&#160;<em><code>lib2</code></em>&#160;could be the OpenAccess standard cell library, and&#160;<em><code>lib3</code></em>&#160;could be the OpenAccess reference library that is referencing the technology information in&#160;<em><code>lib1</code></em>, but has additional Vias not present in&#160;<em><code>lib1</code></em>. Note that the first library (in this example,&#160;<em>lib1)&#160;</em>is the source of the technology information for Innovus. It is also acceptable for the first library to either attach or reference the library that contains the actual technology information. For example, if the first library is a standard cell library that either references or attaches the library containing the technology information, the standard cell library is allowed to be the first library listed in the&#160;<code><span class="fontredcadence">set init_oa_ref_lib</span></code>&#160;setting. Users typically include the standard cell library and the pad cell library in&#160;<code><span class="fontredcadence">set init_oa_ref_lib</span></code>, but not the IP block libraries.&#160;</p>

<p><code><span class="fontredcadence">set init_oa_search_lib</span>&#160;{<em>lib1 lib2</em>}</code>&#160;&#160; #The libraries listed here&#160;are loaded only if the design has cell references that do not exist in the libraries specified by&#160;<code><span class="fontredcadence">set init_oa_ref_lib</span></code>. You may have several macro libraries, but some designs may have macros instantiated from only one of these libraries. In this case, you do not want Innovus to load many libraries that are not actually needed by it. Instead, the tool loads only the libraries it needs based on whether the macro is instantiated. Note that this setting is meant for use only when Innovus is being initialized with a Verilog Netlist.&#160;</p>

<p><span><span class="fontredcadence">set init_verilog</span> &lt;</span><em>name of the Verilog netlist representing the digital block being implemented in Innovus</em><span>&gt;</span></p>

<p>Some of the other common settings to start Innovus (not directly related to OpenAccess) are:</p>

<p><code><span class="fontredcadence">set init_mmmc_file</span> &quot;<em>name of the Multi Mode Multi Corner file used for running analysis in the Innovus implementation flow</em>&quot;</code></p>

<p><code><span class="fontredcadence">set init_pwr_net</span> {<em>name of the power net in the design</em>}</code></p>

<p><code><span class="fontredcadence">set init_gnd_net</span> {<em>name of the power net in the design</em>}</code></p>

<p><code><span class="fontredcadence">set init_design_uniquify</span> {true}</code></p>
<h3 id="DesignDataPreparation-InitializingInnovuswiththeOpenAccessDatabaseofaDesignCreatedinVirtuosoXL">Initializing Innovus with the OpenAccess Database of a Design Created in Virtuoso XL</h3>

<p>The following setting can be used to initialize Innovus when the OpenAccess database of a design created in Virtuoso XL is brought into Innovus for the first time. Note that these settings must be made once Innovus is invoked.</p>

<p><span class="fontredcadence">
<p><code>set init_design_netlisttype {OA}</code>&#160;&#160; #This tells Innovus to get the needed connectivity from the OpenAccess database, instead of a Verilog netlist.</p>

<p><code>set init_oa_design_lib {<em>design_lib</em>}</code>&#160;&#160;#This tells Innovus the OpenAccess design library that contains the cellview representing the top level of the design.&#160;</p>

<p><code>set init_oa_design_cell {<em>cellview</em></code>} &#160;#This tells Innovus the name of the OpenAccess cellview representing the top level of the design.</p>

<p><code>set init_oa_design_view {<em>layout</em>}</code>&#160; &#160;#This needs to be set to the name of the view containing the full layout of the cell.&#160;</p>

<p><code>set init_oa_ref_lib {<em>lib1 lib2 lib3</em>}</code>&#160; &#160;#These are the OpenAccess reference libraries used in the design.&#160;<em><code>lib1</code></em>&#160;could be the OpenAccess standard cell library,&#160;<em><code>lib2</code></em>&#160;could be the OpenAccess library containing the technology information, and&#160;<em><code>lib3</code></em>&#160;could be the OpenAccess reference library that is referencing the technology information in&#160;<em><code>lib2</code></em>, but has additional Vias not present in&#160;<code>lib2</code>.</p>
</span></p>

<p>Some of the other common settings to start Innovus and not directly related to OA are:</p>

<p><code><span class="fontredcadence">set init_mmmc_file</span> &quot;<em>name of the Multi Mode Multi Corner file used for running analysis in the Innovus implementation flow</em>&quot;</code></p>

<p><code><span class="fontredcadence">set init_pwr_net</span> {<em>name of the power net in the design</em>}</code></p>

<p><code><span class="fontredcadence">set init_gnd_net</span> {<em>name of the power net in the design</em>}</code></p>

<p><code><span class="fontredcadence">set init_design_uniquify</span> {true}</code></p>

<p><code></code></p>

<p></p>
<h2 id="DesignDataPreparation-InteroperabilityofConstraintGroupsandNon-DefaultRulesbetweenVirtuosoandInnovus">Interoperability of Constraint Groups and Non-Default Rules between Virtuoso and Innovus</h2>

<p>Innovus uses the following guidelines while reading constraint groups (the physical DRC rules) from the OpenAccess database for using them as non-default rules within the same Innovus session:</p>
<ul><li>The OpenAccess constraint group should not be a technology-specific constraint group.</li></ul><ul><li>A constraint group should not have another nested or hierarchical constraint group within it.</li></ul><ul><li>A constraint group should have all valid routing layers defined in it with minimum routing width defined for each layer. All the routing layers should have material type as&#160;<code>metal</code>. You can also use polysilicon layer for routing by attaching the following LEF property:&#160;<br />PROPERTY LEF58_TYPE &quot;TYPE POLYROUTING;&quot;;</li></ul><ul><li>A constraint group should have valid routing vias defined for each pair of routing layer in the&#160;<code>validVia</code>&#160;list.</li></ul>
<p>You can obtain a list of non-default rules using the&#160;<code>dbGet head.rules</code>&#160;command in Innovus.</p>

<p><strong>Note</strong>: If any constraint inside a constraint group has a name starting with&#160;<code>ms</code>,&#160;Innovus treats that group as a mixed-signal constraint group and that group is read as a mixed-signal routing rule.</p>

<p><strong>Note:&#160;</strong>You can confirm the non-default rule by writing the DEF file from an Innovus session, which has the complete definition of non-default rules and the nets using these non-default rules.</p>
<h4 id="DesignDataPreparation-Example"><em>Example</em></h4>

<p><code>- CLK ( PIN CLK )<br />+ SHIELDNET VSS<br />+ NONDEFAULTRULE doublewidth ;</code></p>

<p>For more information about non-default rules in DEF, see the&#160;<a class="message-url" href="../lefdefref/DEFSyntax.html">DEF Syntax</a>&#160;chapter in the&#160;<em>LEF/DEF Language Reference.</em><em></em></p>
<h2 id="DesignDataPreparation-GenericGuidelinesToRuntheNetlist-DrivenMixed-SignalFlow">Generic Guidelines To Run the Netlist-Driven Mixed-Signal Flow</h2>

<p>Consider the following guidelines before running the netlist-driven mixed-signal flow:</p>

<p></p>
<ul><li>Designs can have black boxes, full custom analog blocks, custom digital blocks, and all interoperable custom shapes physically located in the top cell instance. Logical hierarchy in the design netlist is also supported.</li><li>While working in Virtuoso, do not copy a library, cell, or a view in Innovus nor save it by changing the cell name. This can cause problems while reading the changed cell view in Innovus.</li></ul><ul><li>Always use&#160;<code><span class="fontredcadence">restoreDesign</span></code>&#160;to load a design or cellview saved previously from Innovus. This command will ensure that all the variables and side files required to load a database in Innovus are present and you will be able to run all design implementation steps smoothly.</li><li>Use the&#160;<code>init_design&#160;</code>and&#160;<code><span class="fontredcadence">oaIn</span></code>&#160;commands only while creating a new design library or while importing a design for the first time in Innovus.</li></ul><ul><li>The routing layer and its corresponding purpose, for example,&#160;<code>drawing</code>,&#160;<code>pin</code>, and so on, in the OpenAccess database can be interoperated using Innovus. If a pin or net geometry is found for any routing layer on any other purpose at the top level, it will be converted to drawing purpose while interoperating the data using Innovus.</li></ul>
                    </div>
<br /><br /></div>
<footer xmlns:html="http://www.w3.org/1999/xhtml"><nav class="navigation"><b><em><a href="Technology_Data_Preparation.html" id="prev" title="Technology_Data_Preparation">Technology_Data_Preparation</a></em></b><b><em><a href="Schematic-Driven_Mixed_Signal_Design_Flow.html" id="nex" title="Schematic-Driven_Mixed_Signal_Design_Flow">Schematic-Driven_Mixed_Signal_ ...</a></em></b></nav><div>
          For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved.
        </div>
</footer><br xmlns:html="http://www.w3.org/1999/xhtml" /></body></html>