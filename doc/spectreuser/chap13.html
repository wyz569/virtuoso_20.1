
<html><head><title>Postlayout Simulation</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="kamal" />
<meta name="CreateDate" content="2020-06-16" />
<meta name="CreateTime" content="1592307253" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the Spectre Circuit Simulator." />
<meta name="DocTitle" content="Spectre Classic Simulator, Spectre APS, Spectre X, and Spectre XPS User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Postlayout Simulation" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2" />
<meta name="Keyword" content="spectreuser" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-06-16" />
<meta name="ModifiedTime" content="1592307253" />
<meta name="NextFile" content="chap14.html" />
<meta name="Order" content="1" />
<meta name="Group" content="Spectre Simulator" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="chap12.html" />
<meta name="c_product" content="Spectre" />
<meta name="Product" content="Spectre" />
<meta name="ProductFamily" content="Spectre" />
<meta name="ProductVersion" content="19.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre Classic Simulator, Spectre APS, Spectre X, and Spectre XPS User Guide -- Postlayout Simulation" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="Version" content="19.1" />
<meta name="SpaceKey" content="spectreuser191" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="spectreuserTOC.html">Contents</a></li><li><a class="prev" href="chap12.html" title="Device and Circuit Checks">Device and Circuit Checks</a></li><li style="float: right;"><a class="viewPrint" href="spectreuser.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="chap14.html" title="Encryption">Encryption</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Spectre Classic Simulator, Spectre APS, Spectre X, and Spectre XPS User Guide<br />Product Version 19.1, June 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>16
<a id="pgfId-438906"></a></h1>
<h1>
<a id="pgfId-438907"></a><hr />
<a id="38263"></a>Postlayout Simulation<hr />
</h1>

<p>
<a id="pgfId-458294"></a>This chapter consists of the following topics:</p>
<ul><li>
<a id="pgfId-458301"></a><a href="chap13.html#57081">Performance Improvement</a></li><li>
<a id="pgfId-458315"></a><a href="chap13.html#70233">EMIR Analysis</a></li><li>
<a id="pgfId-463864"></a><a href="chap13.html#77377">Parasitic Backannotation of DSPF/SPEF/DPF Files</a></li></ul>



<h2>
<a id="pgfId-511678"></a><a id="57081"></a>Performance Impr<a id="parasitic_reduction"></a>ovement</h2>

<p>
<a id="pgfId-511679"></a>For postlayout designs with RC parasitics, the <code>+postlayout</code> option enables various performance technologies to speed up the simulation, including RC reduction, efficient coupling capacitor handling, DC algorithms optimized for large post-layout circuits, along with other advanced numerical techniques. </p>
<p>
<a id="pgfId-511680"></a>To turn on postlayout simulation technologies, use the following command-line options: </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-510771"></a>% spectre +aps +postlayout ...</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-510783"></a><code>% spectre +aps +postlayout=hpa ...</code></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-511713"></a><code>% spectre +aps +postlayout=upa ...</code></pre>

<p>
<a id="pgfId-511800"></a>The <code>+postlayout</code> option delivers best simulation performance, with acceptable accuracy, for custom digital designs, memory designs, and analog/mixed-signal designs where high simulation precision is not required. <code>+postlayout=hpa</code> provides higher simulation precision for analog/mixed-signal designs. <code>+postlayout=upa</code> delivers the ultimate post-layout simulation accuracy, similar to <code>+postlayout=hpa</code>, but with RC reduction completely disabled.</p>
<p>
<a id="pgfId-511801"></a>Even though not recommended, you can use the <code>+rcnet_fmax=N</code> command-line option to adjust simulation accuracy associated with <code>+postlayout</code>. The unit for <code>N</code> is in GHz and the default value is <code>125</code>. <code>N=25</code> is considered aggressive, whereas<code> N=250</code> is considered conservative. The <code>+rcnet_fmax</code> option not only controls RC reduction accuracy with any local RC net, but also defines the accuracy/performance trade-off of other non-reduction based techniques.</p>
<p>
<a id="pgfId-533943"></a>The <code>+postlayout</code> command-line option enables RC reduction because of which some parasitic RC nodes are reduced. Therefore, if you have specified <code>save</code> statements in the netlist to save all internal RC nodes, some of these nodes are not saved. To save these nodes, set the value of the <code>savefilter</code> option to <code>none</code> in the netlist, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-534365"></a>opt options savefilter=none</pre>

<p>
<a id="pgfId-458480"></a>You can use the <code>preserve_inst</code> option to preserve instances from any component reduction and parasitic reduction, as shown in example below: </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-458481"></a>simulationOptions options preserve_inst=[inst1, inst2, ...] </pre>

<p>
<a id="pgfId-458374"></a><code>inst1</code> and <code>inst2</code> can be the instances of any device or subcircuit; they will not be reduced by APS, or the parasitic reduction technology. </p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-510799"></a>The <code>+parasitics</code> option is now obsolete and should not be used. You can use the <code>+postlayout=legacy</code> option to get the same behavior as <code>+parasitics</code>. In addition, you can use the <code>+postlayout=legacy_rf</code> option for RF designs, which provides the same functionality as the <code>+parasitics=rf</code> option. The <code>+postlayout=legacy</code> and<code> +postlayout=legacy_rf</code> options will be removed in a future release.</div>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-464831"></a>The <code>+postlayout</code> command-line option is available only in Spectre&#174; APS.</div>

<h2>
<a id="pgfId-462553"></a><a id="70233"></a>EMIR Ana<a id="emir"></a>lysis</h2>

<p>
<a id="pgfId-475108"></a>Spectre&#174; APS, and Spectre&#174; XPS provide a powerful transistor-level EMIR solution. The dynamic power net and signal net EMIR capability uses a patented technology and is designed to provide high capacity and high performance EMIR analyses. Within the same flow, Spectre APS can be used for high accuracy EMIR analyses; while Spectre XPS can be deployed for high capacity and high performance EMIR analyses. The Spectre EMIR solution provides a set of advanced features covering power gate support, design resistor EM calculation, macro model generation, black boxing, what-if analysis, and static EMIR analysis. The EMIR flow is fully integrated into Virtuoso&#174; ADE, and the results can be post-processed with <em>Voltusâ„¢-FI Custom Power Integrity Solution </em>(Voltus-Fi XL).</p>
<p>
<a id="pgfId-462555"></a>This section discusses the following:</p>
<ul><li>
<a id="pgfId-462559"></a><a href="chap13.html#62392">Spectre EMIR Technology, Product, and Flow Overview</a></li><li>
<a id="pgfId-521570"></a><a href="chap13.html#64494">Getting Started with Spectre EMIR Analysis</a></li><li>
<a id="pgfId-521592"></a><a href="chap13.html#13555">Establishing an Accuracy Reference and Correlating EMIR Accuracy</a></li><li>
<a id="pgfId-521610"></a><a href="chap13.html#43035">Optimizing EMIR Analysis for Accuracy and Performance</a></li><li>
<a id="pgfId-521628"></a><a href="chap13.html#73763">Power Gate Support</a></li><li>
<a id="pgfId-521646"></a><a href="chap13.html#42145">Handling the Complexity of DSPF/SPEF files</a></li><li>
<a id="pgfId-521664"></a><a href="chap13.html#71161">Advanced Analyses</a></li><li>
<a id="pgfId-521682"></a><a href="chap13.html#42584">Advanced EMIR Features</a></li><li>
<a id="pgfId-462563"></a><a href="chap13.html#18572">Event Triggered EMIR Analysis</a></li><li>
<a id="pgfId-521784"></a><a href="chap13.html#32232">Other Features</a></li></ul>










<h3>
<a id="pgfId-462577"></a><a id="62392"></a>Spectre EMIR Technology, Product, and Flow Overview</h3>
<h4>
<a id="pgfId-486799"></a>Technology Overview</h4>

<p>
<a id="pgfId-462578"></a>In an EMIR flow, a circuit is evaluated together with the parasitic resistor and capacitor network, which models the IR drop or the EM effect. There are two general approaches of solving such a problem:</p>
<ul><li>
<a id="pgfId-462579"></a><strong>Direct EMIR analysis - </strong>When high accuracy is needed, a brute-force simulation of the entire system (circuit plus parasitic resistances and capacitances) can be performed to accurately calculate the EMIR of any net. The EMIR simulation performance and capacity is subject to the limitation of the circuit simulator being used.</li><li>
<a id="pgfId-462580"></a><strong>Iterated EMIR analysis - </strong>In order to conduct EMIR simulation on circuits with much larger power and signal nets within a much shorter time, an alternative is to decouple the nonlinear circuit simulation from the linear RC net analysis. You can iterate the linear RC net analysis by modifying the layout, however, the nonlinear circuit simulation is performed only once. The decoupling of the linear RC nets from the nonlinear circuit is not mathematically equivalent to the original design and certain inaccuracy is introduced; however, you receive the benefit of simulation performance and capacity. <br />
<a id="pgfId-463105"></a><div class="webflare-div-image">
<img width="668" height="315" src="images/chap13-2.gif" /></div></li></ul>





<p>
<a id="pgfId-463106"></a>For high accuracy EMIR analysis of small design blocks, or designs with smaller numbers of RC nets, direct EMIR analysis method based on Spectre APS is recommended. Spectre XPS does not support direct EMIR analysis.</p>
<p>
<a id="pgfId-476843"></a>To gain higher performance and higher capacity on medium-to-large designs, the iterated EMIR analysis method is recommended. Both Spectre APS and Spectre XPS support iterated EMIR analysis.</p>
<p>
<a id="pgfId-479320"></a>The following table shows the EMIR support matrix for different simulation solvers (X indicates that the EMIR method is not supported by the solver):</p>

<p>
<a id="pgfId-512244"></a></p>
<table class="webflareTable" id="#id539807">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="2">
<p>
<a id="pgfId-479329"></a><strong>MMSIM Solver</strong></p>
</td>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-479325"></a><strong>EMIR Analysis</strong></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479331"></a><strong>Direct Method</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479333"></a><strong>Iterated Method</strong></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479335"></a>Spectre</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479337"></a>X</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479339"></a>X</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479341"></a>Spectre APS (<code>+aps</code>)</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479343"></a>Supported</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479345"></a>Supported</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479347"></a>Spectre XPS SPICE (<code>+xps=s</code>)</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479349"></a>X</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479351"></a>Supported</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479353"></a>Spectre XPS MS (<code>+ms</code>)</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479355"></a>X</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479357"></a>Supported</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479359"></a>Spectre XPS SRAM<br />(<code>+xps +cktpreset=sram|sram_pwr</code>)</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479361"></a>X</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479363"></a>Supported</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479365"></a>Spectre XPS Flash <br />(<code>+xps +cktpreset=flash</code>)</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479367"></a>X</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479369"></a>Supported</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-539355"></a>Spectre X</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-539357"></a>Supported</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-539359"></a>Supported (dominated by first stage circuit simulation)</p>
</td>
</tr>
</tbody></table>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-479370"></a>Spectre APS has been qualified and adopted in numerous production runs; therefore, it is recommended that an EMIR evaluation always start with the Spectre APS solver. Once the EMIR flow, methodology, and accuracy compromise are well understood, different XPS solvers, and Spectre X solver can be explored.</div>
<p>
<a id="pgfId-486135"></a>The Spectre EMIR flow requires a complete testbench that contains the DSPF files (with the parasitic and instance sections describing the circuit to be analyzed) stimuli, device models, and so on. The EMIR analysis can be applied to a transient or DC analysis.</p>
<p>
<a id="pgfId-479385"></a>Use the <code>+emir</code> option on the Spectre command line to enable EMIR analysis during circuit simulation. The details of EMIR analysis, such as type of analyses, nets to be analyzed, and output to be created are specified using an EMIR configuration file.</p>
<p>
<a id="pgfId-463109"></a>Using either direct EMIR analysis or iterated EMIR analysis, the circuit simulation is performed first with various voltages and currents being calculated. Next, a standalone tool, <code>emirreport</code>/<code>emirutil</code>, is called to post-process the simulation results and generate the IR and EM reports. By default, the post-processing step is invoked automatically.</p>
<p>
<a id="pgfId-463110"></a>The output of the EMIR analysis is an EMIR text/html report, which lists the EM and/or IR information of all the nets requested. In addition, <em>Voltus-Fi XL</em> can be used to visualize the IR drop and EM current violations in Virtuoso Layout Editor. </p>

<p>
<a id="pgfId-463683"></a></p>
<div class="webflare-div-image">
<img width="668" height="519" src="images/chap13-3.gif" /></div>

<p>
<a id="pgfId-463684"></a>Note that while the Spectre EMIR flow uses the DSPF representation of the designs, it is not dependent on the postlayout backannotation or &quot;stitching&quot; capability. The flow also covers designs with power gates and package models.</p>

<h4>
<a id="pgfId-486228"></a>Product Overview and EMIR Flow</h4>

<p>
<a id="pgfId-486273"></a>The EMIR product consists of the Spectre EMIR simulation and the <em>Voltus-Fi XL</em> visualization. The circuit and the RC network simulation are handled by Spectre EMIR. The result is stored in a binary database which contains the average, rms, max IR drop, and EM values. <em>Voltus-Fi </em>reads the information from the binary database, evaluates whether the currents are above the limits defined in the technology file, and visualizes the results in the layout.</p>

<p>
<a id="pgfId-486274"></a></p>
<div class="webflare-div-image">
<img width="663" height="225" src="images/chap13-4.gif" /></div>

<p>
<a id="pgfId-486402"></a>Different utilities are used to create the IR drop and EM text reports. For advanced node designs for which the technology file format is ICT or <code>qrctechfile</code>, <code>emirreport</code> (or <code>vpsbatch</code>) is used to generate the text report. For older technology nodes which use <code>emdatafile</code> format, <code>emirutil</code> is used to create the text reports.</p>

<h4>
<a id="pgfId-486434"></a>DSPF requirements</h4>

<p>
<a id="pgfId-486450"></a>The Spectre EMIR flow is based on a DSPF representation of the analyzed design. The DSPF file is required to contain all electrical and geometric information needed for EMIR analysis. The following figure shows a representative DSPF netlist with all important information for EMIR being marked in color.</p>

<p>
<a id="pgfId-486482"></a></p>
<div class="webflare-div-image">
<img width="661" height="425" src="images/chap13-5.gif" /></div>
<h4>
<a id="pgfId-486505"></a>EM Rule Support</h4>

<p>
<a id="pgfId-486523"></a>EM rules are defined in DRM, and part of the technology files. The <em>Voltus-Fi </em>- Spectre EMIR solution supports the following technology file formats.</p>
<ul><li>
<a id="pgfId-486525"></a>ICT, ICT-EM (EM rules only)</li><li>
<a id="pgfId-486526"></a><code>qrctechfile</code></li><li>
<a id="pgfId-486527"></a><code>emdatafile</code></li></ul>


<p>
<a id="pgfId-486560"></a>Advanced node technologies require special EM rules that are only supported in ICT/ICT-EM and <code>qrctechfile</code> formats. Refer to the <em>Quantus QRC Techgen Reference Manual</em> for details.</p>
<p>
<a id="pgfId-486562"></a><code>emdatafile</code> format is used for legacy technology nodes. In future, it is expected to be replaced by ICT and <code>qrctechfile</code> format.</p>
<p>
<a id="pgfId-486564"></a>Various Cadence EMIR tools support only subsets of these techfile formats (for example, Voltus does not support ICT file, but supports ICT_em). ICT_em is the only format supported by all Cadence EMIR technologies, Voltus, EAD and Voltus-Fi L and XL.</p>

<h3>
<a id="pgfId-486276"></a><a id="64494"></a>Getting Started with Spectre EMIR Analysis</h3>

<p>
<a id="pgfId-463687"></a>To perform EMIR analysis, first create a complete simulation testbench with the DSPF files containing the postlayout data of the design. Specify the fingered devices in the <code>instance</code> section and the parasitic resistors and capacitors in the <code>net</code> section. Use the <code>dspf_include</code> statement to read the DSPF content, as shown below.</p>
<p>
<a id="pgfId-463689"></a><code>dspf_include &quot;sram.spf&#160;&#160;&#160;&#160; </code>&quot;&#160;&#160;                      (Spectre syntax)</p>
<p>
<a id="pgfId-504715"></a><code>.dspf_include &quot;sram.spf</code>  &quot;&#160;&#160;                     (SPICE syntax)</p>
<p>
<a id="pgfId-521996"></a><code>dspf_include</code> provides special features like port order adjustments, or handling of duplicated subcircuits, which are not available in <code>include</code>/<code>.include</code>. Therefore, <code>include</code>/<code>.include</code> must not be used in the EMIR flow for including the DSPF file.</p>
<p>
<a id="pgfId-529278"></a>Large DSPF files may be split into multiple files, for example, <code>sram.dspf</code>, <code>sram.dspf.1</code>, <code>sram.dspf.2</code>, and so on. If the top-level DSPF file (<code>sram.dspf</code>) is included with the <code>dspf_include</code> statement, Spectre will search for any related file (<code>sram.dspf.1</code>, <code>sram.dspf.2</code>, ...) and read them automatically.</p>
<p>
<a id="pgfId-496022"></a>EMIR analysis can be applied to several subcircuits within the same design. Each block needs to be described with a DSPF file, and each DSPF file needs to be included with the <code>dspf_include</code> statement.</p>
<p>
<a id="pgfId-468276"></a>Setting up a correct postlayout simulation test bench is vital to successful EMIR analysis (see <a href="chap13.html#42145">Handling the Complexity of DSPF/SPEF files</a>).</p>
<p>
<a id="pgfId-486824"></a>Once the testbench is set up, you can perform a regular (non-EMIR) postlayout simulation with the <code>spectre</code> command to ensure that the testbench contains no error, and the circuit behavior is as expected.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-486855"></a>% spectre ++aps=liberal input.scs //Spectre test bench</pre>

<p>
<a id="pgfId-486885"></a>The Spectre command-line options can be used to adjust accuracy and performance. The command above initiates the simulation session with <code>++aps</code> engine and <code>liberal</code> errpreset setting.</p>
<p>
<a id="pgfId-486887"></a>To perform the same simulation with EMIR analysis added, you need to create and include an EMIR control file with the <code>spectre</code> command, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-486889"></a>% spectre&#160;&#160;++aps=liberal&#160;&#160;+emir=emir.conf&#160;&#160;input.scs //Spectre test bench</pre>

<p>
<a id="pgfId-486891"></a>The EMIR analyses is enabled by using the <code>+emir</code> Spectre command-line option. All EMIR-related commands are defined in the EMIR control file.</p>

<h4>
<a id="pgfId-486941"></a>EMIR Control File</h4>

<p>
<a id="pgfId-486951"></a>EMIR analysis is performed based on the first transient analysis statement in the netlist. An EMIR control file contains all the settings and options that are relevant to an EMIR analysis. Some of the options that can be specified using the EMIR control file are: the names of the nets to be analyzed, the type of analyses to be performed, the EMIR analysis time window, choice of direct or iterated methods, settings for RC simulation, location of EM rule file, and so on. </p>
<p>
<a id="pgfId-512349"></a>The following sample control file describes EMIR analysis based on the <code>X1</code> instance. A maximum IR drop analysis is performed on nets <code>VDD</code> and <code>VSS</code>, while RMS-based EM analysis is performed on all nets inside the <code>X1</code> instance. The two-stage iterated method is used, and the current density limits for the EM report are referenced from file <code>./em_dir/40n_emfile.txt</code>. Only one subcircuit instance is allowed for EMIR analysis for a Spectre run. </p>
<p>
<a id="pgfId-504763"></a><strong>Example EMIR control file (emir.config)</strong></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-504764"></a>net name=[X1.VDD X1.VSS] analysis=[vmax iavg]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-504765"></a>net name=[X1.*] analysis=[irms]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-504766"></a>solver method=iterated</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-504767"></a>emirutil techfile=&quot;./em_dir/40n_emfile.txt&quot;</pre>

<p>
<a id="pgfId-504768"></a>The EMIR control file supports the Spectre line continuation character + and comment-line characters * and //.</p>
<p>
<a id="pgfId-487003"></a>The following table summarizes the EMIR control file options:</p>
<p>
<a id="pgfId-463694"></a>The following table summarizes the supported EMIR control file options:</p>

<p>
<a id="pgfId-530697"></a></p>
<table class="webflareTable" id="#id463695">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472259"></a><strong>Keyword</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472261"></a><strong>Option Set</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472263"></a><strong>Explanation</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472265"></a><strong>Default Value</strong></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="2">
<p>
<a id="pgfId-472267"></a><strong>net</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472269"></a><code>name=[instance1.net1 instance1.net2....]</code></p>
<p>
<a id="pgfId-475144"></a><code>or</code></p>
<p>
<a id="pgfId-475151"></a><code>name=[net1 net2...] inst=[inst1]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472271"></a>Defines the nets for which the analysis is performed. <code>instance</code> defines the instance of the subcircuit containing the net. <code>net</code> defines the net name inside the subcircuit instance as it is defined in the <code>DSPF *| NET</code> definition. If the DSPF file is included at the top level, the instance name is not required. Wildcarding is supported for net names but not instance names.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472273"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472277"></a><code>analysis=[imax iavg iavgpos iavgneg iavgabs irms vmax vavg]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472279"></a><code>peakEM</code>, <code>avgEM</code>, <code>avgEM</code> for i&gt;0, <code>avgEM</code> for i&lt;0, <code>avgabsEM</code>, <code>rmsEM</code>, <code>peakIR</code>, <code>avgIR</code>. <code>imax</code>, <code>iavg</code>, <code>iavgabs</code>, <code>irms</code>, and <code>vmax</code> data are always written to the binary database independent of user settings.</p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-484851"></a>If <em>Voltus-Fi </em><code>acpeak</code> analysis is required, then <code>imax</code> and <code>irms</code> analyses need to be enabled in Spectre EMIR.</div>
<p>
<a id="pgfId-534558"></a>imax means max(abs(current waveform))</p>

</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472281"></a><code>iavg, vmax</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-512431"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-512433"></a><code>dut_inst=name</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-512435"></a>This option defines the instance name of the DSPF subcircuit (for example, i0). It is required only if a name mapping is required between ADE net names (for example, <code>i0.i1.i2.net5</code>) and DSPF names (<code>i0.x1/xi2/net5</code>). By default, ADE name is modified by adding a leading <code>X</code> and replacing <code>.</code> with <code>/</code>. The DSPF subcircuit instance name and the leaf-level net name are not impacted. You can use the option <code>spf netxtorprefix=dspf_hier_inst prefix schematic_hier_inst_prefix</code> to customize the mapping.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-512437"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472283"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472285"></a><code>pwrgate=[I1.VDD I1.VDD_INT...]</code></p>
<p>
<a id="pgfId-512996"></a>or</p>
<p>
<a id="pgfId-513000"></a><code>inst=[I1] pwrgate=[VDD VDD_NT...]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472287"></a>Enables power gate handling. You need to specify the power supply net driving the power gate (vsource connected) and the internal power supply net driven by the powergate. If one power supply net drives multiple power gates, then you need to specify one statement with all internal power supply nets. If none of the powergate nets is driven by vsource, then the global statement can be used to define the global net.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472289"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472291"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472293"></a><code>analysis=[sigvmax sigvavg] reftype=[avg max min pin]<br />[findsrc=yes|no][refnode=name][vref=value]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472295"></a><code>analysis=sigvmax</code> - max signal net IR drop.</p>
<p>
<a id="pgfId-472296"></a><code>analysis=sigvavg</code> - avg signal net IR drop.</p>
<p>
<a id="pgfId-472297"></a><code>reftype=avg</code> - reference voltage for IR drop is the average voltage of all subnodes at every time point. This is the default.</p>
<p>
<a id="pgfId-472298"></a><code>reftype=max</code> - reference voltage for IR drop is the maximum voltage of all subnodes at every time point.</p>
<p>
<a id="pgfId-479406"></a><code>reftype=min</code> - reference voltage for IR drop is the minimum voltage of all subnodes at every time point.</p>
<p>
<a id="pgfId-472299"></a><code>reftype=pin findsrc=yes</code> - Reference voltage of IR drop is taken from vsource, which is traced back from <code>*P|</code> node.</p>
<p>
<a id="pgfId-534922"></a><code>reftype=pin</code> <code>findsrc=no</code> - Reference voltage of IR drop is taken from <code>*P|</code> node.</p>
<p>
<a id="pgfId-484352"></a><code>refnode</code> - use the reference voltage from the specified reference node.</p>
<p>
<a id="pgfId-535827"></a><code>vref</code> - use the voltage value as reference and report the value as vmax and not as sigvmax in the report.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472301"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472303"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472305"></a><code>analysis=[ipwc] pwc_threshold=1e-6</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472307"></a>Enables pulse-wise constant EM current calculation for violation visualization. The <code>pwc_threshold</code> option defines the current threshold for finding the start of the pulse. Any value below <code>pwc_threshold</code> is considered as zero. The <code>emirutil_dump_pwc_info=1</code> option generates an ASCII report in the &lt;<span class="webflare-courier-new" style="white-space:pre"><em>name</em></span>&gt;<code>.rpt.pwc</code> file for debugging purpose only.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472309"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487088"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487090"></a><code>name [instance.net1...] r2r_refnet=VSS analysis=[r2rvmin] [r2rvmin_layer=mt1]r2rvmin_refnet_layer=[m2] r2rvmin_tap_inst=[MN1* MN2*] r2rvmin_refnet_tap_inst=[MN3* MN4*] r2rvmin_model=[pch_...] r2rvmin_refnet_model=[nch_...] r2rvmin_bbox=[1.0 1.0 269.5 279.5] r2rvmin_refnet_bbox=[...] r2rvmin_node_report=[on|off] r2rvmin_rule_name=name</code><a id="r2rvmin"></a></p>
<p>
<a id="pgfId-536451"></a>or</p>
<p>
<a id="pgfId-487115"></a><code>pwrgate=[powernet1...] analysis=[r2rvmin]</code></p>
<p>
<a id="pgfId-487097"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487092"></a>Worst case differential (rail-to-rail) IR drop between the specified power supply node and the automatically detected ground node is written to the <code>*.rpt.r2r</code> file. If <code>r2r_refnet</code> is not specified, the ground node is automatically detected. At each time point, the sub node with the highest IR drop is selected for power and ground net and the differential voltage is calculated. The worst case differential IR drop over the EMIR time window is reported and the worst case power and ground waveforms are written to the waveform file. Optional scoping (combined with AND) includes layer names, tap device names, and tap device model names for both power supply node and refnet. A boundary box can be defined for power supply net and refnet.</p>
<p>
<a id="pgfId-536351"></a>Optionally, a name can be assigned to each <code>r2rvmin</code> option. <code>r2rvmin_node_report</code> enables additional report of nodes and XY coordinates (default is off). </p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487094"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-537329"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-537331"></a><code>design_res_models=[name=rhim_m l=... w=... layer=...unit=... term=3]<br />analysis=[iavg irms] </code></p>
<p>
<a id="pgfId-537450"></a><code>design_res_models=[resistor] analysis=[iavg irms]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-537333"></a>Specifies EM analyses for design resistors in the form of subcircuit resistor models (<code>name=...</code>) or resistor primitives (<code>resistor</code>). W and L are optional parameters for mapping of subcircuit resistor subcircuit parameters between DSPF and subcircuit model, unit for W/L, and term that defines the terminal at which the current should be evaluated. The default is one terminal.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-537335"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472311"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472313"></a><code>vref=value</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472315"></a>Defines the optional voltage reference value for <code>vmax</code> and <code>vavg</code> analyses.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472317"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472319"></a><code></code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472321"></a><code>include=file</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472323"></a>Specifies the file name with a list of net names.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472325"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472327"></a><code></code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472329"></a><code>exclude=[netname1 netname2...]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472331"></a>Excludes the specified nets when <code>name=[*]</code> is used.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472333"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472335"></a><strong>solver</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472337"></a><code>method=[auto|direct|iterated|profonly|iteronly | itereco|iterated_split]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472339"></a><code>auto - </code>direct for Spectre APS and Spectre XPS=s; iterated for Spectre XPS (default)|<br /><code>direct - </code>forced direct method, not available for Spectre XPS<br /><code>iterated - </code>forced iterated approach, available for Spectre APS, Spectre XPS=s, and Spectre XPS<br /><code>profonly - </code>iterated flow - circuit profile generation<br /><code>iteronly - </code>iterated flow - RC network iteration (requires solver inputwf=iterated.emirtap.pwl)<br /><code>itereco</code> - iterated flow - RC network iteration with What-If changes defined in the ECO file<br /><code>iterated_split</code> - iterated flow - Same as iterated; however, it runs the first and second stages as separate processes to reduce peak memory usage</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472341"></a><code>auto</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475338"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475340"></a><code>speed=[1|2|3|4|5|6|7|8]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475342"></a>Defines the speed/accuracy trade-off for PN and SN RC network solver.</p>
<p>
<a id="pgfId-475343"></a><code>1</code> - adaptive time step, highest accuracy, lowest speed</p>
<p>
<a id="pgfId-475344"></a><code>5</code> - adaptive time step, lowest accuracy, highest speed</p>
<p>
<a id="pgfId-479441"></a>6 - fixed time step with 2000 steps</p>
<p>
<a id="pgfId-487146"></a>8 - fixed time step with 1000 steps</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475346"></a><code>5</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475157"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475159"></a><code>rcr=[conly|selected|asis]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475161"></a>Defines EMIR RC reduction for the first stage of the iterated method. </p>
<p>
<a id="pgfId-475192"></a><code>conly</code> - use the Conly database.</p>
<p>
<a id="pgfId-475199"></a><code>selected</code> - use the selected RC reduction, if enabled.</p>
<p>
<a id="pgfId-475206"></a><code>asis</code> - use the parser/solver RC reduction, if enabled.</p>
<p>
<a id="pgfId-475213"></a>EMIR RC reduction is performed during parsing. Solver RC reduction, if enabled, is performed additionally.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475163"></a><code>conly</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-504780"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-504788"></a><code>rcr_pwr_netsize=value</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-504790"></a>This option is applicable only when <code>rcr</code> is set to <code>selected</code>. All nets with values equal to or less than the specified value are considered as signal nets using conservative RC reduction. All nets with values more than the specified value are considered as power nets. Power net handling is specified using the <code>rcr_pwr_method</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-504792"></a><code>30000</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-504800"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-504808"></a><code>rcr_pwr_method=[conly|reff]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-504810"></a>Specifies the reduction method for power nets.</p>
<p>
<a id="pgfId-504811"></a><code>conly</code> - C only handling of power nets.</p>
<p>
<a id="pgfId-504813"></a><code>reff</code> - Effective resistance between power supply and tap node is used.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-504816"></a><code>conly</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475165"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475167"></a><code>rcr_net=[name1 name2...]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475169"></a>This option is applicable only when <code>rcr</code> is set to <code>selected</code>. All the specified nets are considered as signal nets. A conservative RC reduction is applied in the first stage. The reduction rate can be adjusted by using the solver option <code>rcr_fmax=</code><span class="webflare-courier-new" style="white-space:pre"><em>value</em></span> (the default value is 20, and the unit is in GHz).</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475171"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475173"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475175"></a><code>c_net=[name1 name2...]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475177"></a>This option is applicable only when <code>rcr</code> is set to <code>selected</code>. All the specified nets use Conly method in the first stage.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475179"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475181"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475183"></a><code>rcr_pwr_net[name1 name2...]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475185"></a>This option is applicable only when <code>rcr</code> is set to <code>selected</code>. All specified power nets use moderate RC reduction. The reduction rate can be adjusted by using the solver option <code>rcr_pwr_fmax=value</code> (the default value is 2, and the unit is in GHz).</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475187"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487173"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487175"></a><code>reff_pwr_net=[name1 name2...]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487177"></a>This option is applicable only when <code>rcr</code> is set to <code>selected</code>. All specified power nets use Reff modeling between pin and tap nodes.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487179"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-513084"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-513086"></a><code>rsnap_reff_pwr_net=[name1 name2...] kept_layer=[layer1 layer2...] snap_layer=[layer1 layer2...]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-513088"></a>This option is applicable only when <code>rcr</code> is set to <code>selected</code>. All power nets specified use a combined Rsnap/Reff modeling between the pin and tap nodes. You need to define either the layers that need to be modeled with Rsnap/Reff (with <code>snap_layer</code>, all non-specified layers are kept), or the layers that should be kept (with <code>kept_layer</code>, all non-specified layers are modeled with Rsnap/Reff).</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-513090"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-535543"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-535545"></a><code>preset=0|1|2</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-535547"></a>Specifies whether or not the solver should be optimized.</p>
<p>
<a id="pgfId-535638"></a>0- Does not optimize the solver</p>
<p>
<a id="pgfId-535683"></a>1 - Performs solver optimization for accuracy</p>
<p>
<a id="pgfId-535757"></a>2 - Performs solver optimization for performance</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-535549"></a><code>0</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475280"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475282"></a><code>tstep=value</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475284"></a>Change the solver to a fixed timestep specified by <span class="webflare-courier-new" style="white-space:pre"><em>value</em></span>. The unit is in seconds.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475286"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479454"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479456"></a><code>min_tstep=value</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479458"></a>Minimum time step for adaptive time step. The unit is in seconds.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479460"></a><code>1ps</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-485797"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-485805"></a><code>maxiters=value</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-485807"></a>Defines the maximum iteration number in the transient stage of RC solver. Value 0 can be used for performance optimization.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-485809"></a><code>100</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487280"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487282"></a><code>rcsolve_multi_proc=[on|off]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487300"></a>If set to <code>on</code>, enables parallel (forked) processes for second stage network solving. You can use the <code>+mt</code> command-line option to specify the maximum number of cores to use. Small-sized nets (&lt; <code>rcsolve_1t_netsize</code>) are solved first with eight forked single-thread processes. Medium-sized nets are solved next with two forked four-thread processes. Large nets (&gt;<code>rcsolve_4t_netsize</code>) are solved with one main process using eight threads.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487286"></a><code>off</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487316"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487318"></a><code>rcsolve_1t_netsize=value</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487320"></a>Specifies the small net threshold value for parallel (forked) processing of second stage network solving.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487322"></a><code>10000</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487324"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487326"></a><code>rcsolve_4t_netsize=value</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487328"></a>Specifies the large net threshold value for parallel (forked) processing of second stage network solving.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487330"></a><code>unlimited</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479462"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479464"></a><code>ignore_tap=[name1 name2...]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479466"></a>Ignores the specified tap devices in dynamic, static EMIR, and SPGS. The specified tap devices are changed to subnodes and do not carry any current. In addition, they are not reported. It applies to only the second stage of the iterated method and is not supported in the direct method. Wildcarding is supported.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479468"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-522065"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-522067"></a><code>save_tapi=filename</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-522069"></a>Create current profile in hierarchical EMIR block-level simulation for later consumption in the top-level EMIR simulation. The current profile is written into <code>&lt;design&gt;.raw/&lt;design&gt;.emirtap/&lt;filename&gt;</code>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-522071"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-538597"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-538599"></a><code>report_tapc=[off|text]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-538601"></a>Report the net and tap device capacitance values for nets being defined in the UTI command. The capacitance report is written to a file with extension <code>rpt_tapc</code>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-538603"></a><code>off</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-522309"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-522311"></a><code>hier_inst_box=1</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-522313"></a>Switch between tap device (0) and port current (1) profile in the hierarchical EMIR flow.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-522315"></a><code>0</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475301"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475303"></a><code>concurrent_ratio=value</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475305"></a>Defines the concurrent tap device handling. The <code>value</code> should be greater than or equal to 0 but less than or equal to 1.</p>
<p>
<a id="pgfId-475310"></a>1 - concurrent</p>
<p>
<a id="pgfId-475317"></a>0 - not concurrent</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-475307"></a><code>1</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-513560"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-513562"></a><code>mosfet_subckt=[name1 name2...]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-513564"></a>Defines the subcircuits describing the complex powergate subcircuits. The first four terminals should connect to MOSFET d, g, s, b, and terminals 0 and 2 should connect to the global and virtual power nets.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-513566"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472353"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472355"></a><code>inputwf=file_name</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472357"></a>Specifies the waveform file that contains the results from circuit simulation when <code>method=iteronly</code> is used.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472359"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-478747"></a>static</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-478749"></a><code>ifile=</code><span class="webflare-courier-new" style="white-space:pre"><em>filename</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-478751"></a>Enables static EMIR analysis. The filename defines the subcircuit instance port currents. Static EMIR analysis cannot be combined with dynamic EMIR analysis.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-478753"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-507139"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-507141"></a><code>exclude=[net=[name1 name2] dev=[name1 name2]]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-507143"></a>Exclude the tap devices from static current distribution. A 0A current is assigned to the specified tap devices. Wildcarding is supported. For example:</p>
<p>
<a id="pgfId-507168"></a><code>exclude=[net=[I1.VDD] dev=[MPM3*]]</code>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-507145"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487368"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487370"></a><code>report_tapi=[true|false]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487372"></a>Enables the printing of individual tap device currents in static EMIR analysis. The current values are written to a file with the extension <code>rpt_tapi</code>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487374"></a><code>false</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472361"></a><strong>emirutil</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472363"></a><code>techfile=&quot;emDataFile&quot; </code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">

<p>
<a id="pgfId-472365"></a>Specifies the EM rule file in the emdatafile, qrctechfile, or ICT file format. </p>
<p>
<a id="pgfId-472366"></a>The EM rule file can be predefined in the configuration file using the <code>EMTECHFILE</code> environment variable or in the <code>.cdsinit</code> file as follows:</p>
<p>
<a id="pgfId-472367"></a><code>envSetVal(&quot;spectre.envOpts&quot; &quot;emTechFile&quot; string &lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>path to the file</em></span><code>&gt;</code></p>
<p>
<a id="pgfId-472368"></a>Case-insensitive layer names are supported for easier match between the DPSF file and emData file.</p>
<p>
<a id="pgfId-504869"></a>The rule file defined in the configuration file has higher priority followed by the rule file specified in <code>.cdsinit</code>.</p>
<p>
<a id="pgfId-472369"></a>Alternatively, you can use the <code>emdatafile=&quot;</code><span class="webflare-courier-new" style="white-space:pre"><em>emDataFile</em></span><code>&quot;</code> option to specify the techfile in the emdata format, <code>qrctechfile</code>=&quot;<span class="webflare-courier-new" style="white-space:pre"><em>qrcTechFile</em></span>&quot; to specify the QRC tech files, and <code>ictfile=&quot;ictfile&quot;</code> to specify the file in ICT format.</p>

</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472373"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487384"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487386"></a><code>layermapfile=&quot;mapfile&quot;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">

<p>
<a id="pgfId-487409"></a>Optional file that defines the mapping between the layer names in the DSPF file and the layer names in the technology file. </p>

</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487390"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-513827"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-513829"></a><code>EMOnlyICTFile=&quot;emOnlyICTfile&quot;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">

<p>
<a id="pgfId-513831"></a>Specifies the file containing only the EM rules. It is usually used in combination with qrcTechFile.</p>

</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-513833"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472375"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472377"></a><code>autorun=[true|false]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472379"></a><code>true</code> - run <code>emirutil</code> automatically after the solver to generate a text report.</p>
<p>
<a id="pgfId-472380"></a><code>false</code> - manually run <code>emirutil</code>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472382"></a><code>true</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472384"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472386"></a><code>report=[text|layout | html]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487433"></a>Defines the type of report created by <code>emirutil</code>.</p>
<p>
<a id="pgfId-487434"></a><code>text</code> - creates only the text report.</p>
<p>
<a id="pgfId-472390"></a><code>layout</code> - creates only the layout violation map.</p>
<p>
<a id="pgfId-472391"></a><code>html</code> - creates the report in html format.</p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-472392"></a>Multiple entries are supported.</div>

</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472394"></a><code>text</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472396"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472398"></a><code>notation=[s|e]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472400"></a>Notation for the text and html reports.</p>
<p>
<a id="pgfId-472401"></a><code>e</code> - engineering scale number (for example, 5.02m)</p>
<p>
<a id="pgfId-472402"></a><code>s</code> - scientific notation (for example, 5.02e-3)</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472404"></a><code>e</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472406"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472408"></a><code>sort_by_net=yes|no</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472410"></a>Report IR and EM results per net, or all nets.</p>
<p>
<a id="pgfId-472411"></a><code>yes</code> - report EMIR results per net.</p>
<p>
<a id="pgfId-472412"></a><code>no</code> - combine EMIR results of all nets into one report.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472414"></a><code>yes</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-530147"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-530149"></a><code>tap_model_report=yes|no</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-530151"></a>Report the device model names for all tap devices in dynamic and static <code>*.rpt_ir</code> and <code>*.spgs</code>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-530153"></a><code>no</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472416"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472418"></a><code>filter_ir_percent=value</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472420"></a>Defines the percentage of nodes being reported starting from the biggest IR drop. For example, <code>filter_ir_percent=5</code> reports the top 5% IR drop nodes in the violation map and text report.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472422"></a><code>no filter</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472424"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472426"></a><code>filter_ir_threshold=value</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472428"></a>Defines the IR voltage drop threshold for the node being reported. For example, <code>filter_ir_threshold=0.01</code> reports all nodes with IR drop above 0.01V.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472430"></a><code>no filter</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-478652"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-478654"></a><code>filter_em_threshold</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-478656"></a>The EM current for resistor is written only to the EM current text report if its RJ value (<code>current_density</code>/<code>current_density_limit</code>) is greater than the value specified.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-478658"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472432"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472434"></a><code>warning_limit=[value warning_type1 warning_type2...]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472436"></a>Defines the maximum number of warnings per EMIR warning message.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472438"></a><code>50</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472440"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472442"></a><code>geounit=</code><span class="webflare-courier-new" style="white-space:pre"><em>value</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472444"></a>Defines the scaling of all DSPF geometry parameters (<code>W</code>, <code>L</code>, <code>X</code>, <code>Y</code>). It applies only to the <code>*|NET</code> section, and not to the <code>instance</code> section. </p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472446"></a><code>1um</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-513989"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-513991"></a><code>geounit_wl=</code><span class="webflare-courier-new" style="white-space:pre"><em>value</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-513993"></a>Defines the scaling of all DSPF geometry parameters <code>W</code> and <code>L</code>. The product of DSPF W/L*geounit_wl is equal to W/L in meters. It only applies to *|NET section and not the instance section. <code>geounit_wl=1e-6</code> means W and L in DSPF are specified in um. <code>geounit_wl=1</code> means W and L in DSPF are specified in m. W/L in the binary database are always stored in um.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-513995"></a><code>1um</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472448"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472450"></a><code>geounit_xy=</code><span class="webflare-courier-new" style="white-space:pre"><em>value</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472452"></a>Defines the scaling of DSPF geometry parameters X and Y. It applies only to the <code>*|NET</code> section, and not to the <code>instance</code> section. geounit_xy=1e-6 means that the X and Y in the DSPF file are specified in um. geounit_xy=1 means that the X and Y in the DSPF file are specified in m. X/Y in the binary database are always stored in um.</p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-472453"></a>If the <code>geounit_XY</code> and <code>geounit</code> options are specified together, the <code>geounit_XY</code> option takes precedence over the <code>geounit</code> option. </div>

</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472455"></a><code>1um</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472466"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472468"></a><code>auto_detect_geounit [true|false]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472470"></a><code>emirutil</code> generates an error message if the <code>X</code>, <code>Y</code> coordinates are outside the range of <code>[-10cm 10cm]</code> and the <code>W</code>, <code>L</code> values are outside the range of <code>[1nm,</code> <code>1mm]</code>. If you intentionally want to keep the out-of-range values, set <code>auto_detect_geounit</code> to <code>false</code> to continue the simulation.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472472"></a><code>true</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487489"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487497"></a><code>violation_map=[failed|all]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487499"></a>Defines the EM violation map to be created.</p>
<p>
<a id="pgfId-487500"></a><code>failed</code> - create map only for resistors with EM violation.</p>
<p>
<a id="pgfId-487501"></a><code>all</code> - create map for all resistors</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487495"></a><code>failed</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472474"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472476"></a><code>via_count=[useR|useArea]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472478"></a>Defines the method used for calculating the via count.</p>
<p>
<a id="pgfId-472479"></a><code>useR</code> - calculation based on via resistance (emdatafile_via_resistance/dspf_via_resistance).</p>
<p>
<a id="pgfId-472480"></a><code>useArea</code> - calculation based on via area (dspf_via_area/emdatafile_via_area).</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472482"></a><code>useR</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-473945"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-473947"></a><code>idirn=[true|false]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-473949"></a>Prints the current direction in the EM report (<em>Current Direction</em> column). For metal resistors, the current direction is printed. That is, <em>W</em> means that the current is flowing from east to west. For via resistors, the current direction from/to layer is printed.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-473951"></a><code>false</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-473953"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-473955"></a><code>ir_in_em [true|false]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-473957"></a>Reports the IR drop for each metal resistor/via in the EM current report (<em>Max_ir</em> column). </p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-473959"></a><code>false</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472484"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472486"></a><code>color_level=number</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472488"></a>Defines the number of colors displayed in the violation map. Default value is 10.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472490"></a><code>10</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472492"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472494"></a><code>iusercalc=&quot;file procedure&quot;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472496"></a>Enables custom current calculation. The file contains the SKILL procedure, which contains the current calculation.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472498"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472500"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472502"></a><code>blech_path_report=&quot;file&quot;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472504"></a>Enables the printing of the blech length path for each metal layer that belongs to the net specified in the <code>file</code>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472506"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-514394"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-514396"></a><code>invalid_res_width</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-514398"></a>Ignores any resistor with R&lt;=0.001. and width &gt;=invalid_res_width, when calculating the path length. In addition, these resistors are not reported in the EM report.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-514400"></a><code>10u</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472508"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472510"></a><code>recovery_factor=value</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472512"></a>Defines the recovery factor for <code>iavg</code> calculation with recovery factor. If specified, then <code>iavg=max(|iavgpos|,|iavgneg|)-recovery_factor*min(|iavgpos|,|iavgneg|)</code>. If not specified, then <code>iavg=iavgpos+iavgneg</code>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472514"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472526"></a><strong>time</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472528"></a><code>window=[start1 stop1 start2 stop2 ...] </code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472530"></a>Time window to which the EMIR analysis is applied. It applies to all nets for which the analysis is defined. Multiple and overlapping windows are supported. An individual report is created for each time window. You can use different time windows for emirutil v/s Spectre simulation.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472532"></a><code>[0 tend]</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479473"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479475"></a><code>window=[start1 stop1 start2 stop2 ...] net=[net1 net2....] output=none</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479477"></a>Black out window. The specified time windows are blacked out from the global EMIR time window. It applies only to the EMIR analysis for the specified nets.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479479"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479499"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479509"></a><code>window=[start1 stop1 start2 stop2 ...] exclude [t1 t2 t3 t4] net=[net1 net2....] output=power filename=&quot;file&quot; [analysis=avg] fmstage=[1|2]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479503"></a>Creates average current report for static EMIR analysis. It reports the average port current for the specified nets for the active time window. The active time window is defined as <em>user-defined window</em> minus e<em>xclude window</em>. The results are written to the specified file. If no file is specified, then a file with the extension <code>avgpwr</code> is created. The average current creation works independently of the dynamic EMIR feature. Average <code>A</code> for two active windows (<code>t1-&gt;t2</code>, <code>t3-&gt;t4</code>) is calculated as: <code>A=(A1+A2)/(t2-t1+t4-t3)</code>. <code>fmstage</code> specifies whether the current should be taken from the first stage (default) or the second stage of EMIR analysis.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479505"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487524"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487526"></a><code>window=[start1 stop1 start2 stop2 ...] exclude [t1 t2 t3 t4] net=[net1 net2....] output=power filename=&quot;file&quot; [analysis=max] fmstage=[1|2]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487528"></a>Creates the peak current report. It reports the peak port current and peak time for the specified nets for the active time window. The active time window is defined as <em>user-defined window</em> minus e<em>xclude window</em>. The results are written to the specified file. If no file is specified, then a file with the extension <code>peakpwr</code> is created. <code>fmstage</code> specifies whether the current should be taken from the first stage (default) or the second stage of EMIR analysis.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487530"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479552"></a>vprobe</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479554"></a><code>net=[net1 net2...]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479556"></a>Enables voltage waveform printing of the selected nets (<code>*|NET</code> in DSPF) for second stage iterated method. Waveforms can be printed only for nets for which IR drop or EM currents are analyzed. The waveform file is located in the <code>*.emirtap-tran</code> directory. Wildcards are supported. The format can be specified using <code>-format uwi -uwifmt &lt;format&gt;</code>.</p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-479618"></a>Waveform printing for direct method and first-stage iterated method can be enabled by using the regular save/.probe statements.</div>

</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479558"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479563"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479565"></a><code>scope=[netonly |taponly | all]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479567"></a>The selected scope.</p>
<p>
<a id="pgfId-479638"></a><code>netonly</code> - save the net pin voltage waveform.</p>
<p>
<a id="pgfId-479655"></a><code>taponly</code> - save all tap node voltage waveforms.</p>
<p>
<a id="pgfId-479662"></a><code>all</code> - save voltage waveforms for net pin, all subnodes, and tap nodes.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479569"></a><code>netonly</code>. If <code>include</code>/<code>exclude</code> is used, then the default is <code>all</code>.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479571"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479573"></a><code>include=[pattern]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479575"></a>Defines the names of subnodes and tap nodes to be included. Wildcards are supported.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479577"></a><code>*</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479579"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479581"></a><code>exclude=[pattern]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479684"></a>Defines names of subnodes and tap nodes to be excluded. Wildcards are supported.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479585"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479587"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479589"></a><code>compression=[no|all]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479591"></a>Enables waveform compression.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479593"></a><code>no</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479598"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479600"></a><code>compreltol=value</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479602"></a>Defines the relative tolerance for waveform compression.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479604"></a><code>1.00E-03</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479606"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479608"></a><code>compvabstol=value</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479706"></a>Defines the absolute voltage tolerance for waveform compression.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479612"></a><code>1.00E-06</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479720"></a>iprobe</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479786"></a><code>net=[net1 net2...]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487622"></a>Enables current waveform printing of the selected nets (<code>*|NET</code> in DSPF) for second stage iterated method. Waveforms can be printed only for nets for which IR drop or EM currents are analyzed. The waveform file is located in the <code>*.emirtap-tran</code> directory. Wildcards are supported. The format can be specified using <code>-format uwi -uwifmt &lt;format&gt;</code>.</p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-479789"></a>Waveform printing for direct method and first-stage iterated method can be enabled by using the regular save/.probe statements.</div>

</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479791"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479728"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479793"></a><code>scope=[netonly|taponly|all]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479795"></a>The selected scope.</p>
<p>
<a id="pgfId-479796"></a><code>netonly</code> - save total pin current, and power gate current, if power gate exists.</p>
<p>
<a id="pgfId-479797"></a><code>taponly</code> - save all tap device currents.</p>
<p>
<a id="pgfId-479798"></a><code>all</code> - save pin currents, power gate currents, and all tap device currents.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479800"></a><code>netonly</code>. If <code>include</code>/<code>exclude</code> is used, then the default is <code>all</code>.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479736"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479802"></a><code>include=[pattern]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479804"></a>Defines names of the resistors to be included. Wildcards are supported.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479806"></a><code>*</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479744"></a></p>
<p>
<a id="pgfId-479753"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479808"></a><code>exclude=[pattern]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479810"></a>Defines names of the resistors to be excluded. Wildcards are supported.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479812"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479762"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479814"></a><code>compression=[no|all]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479816"></a>Enables waveform compression.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479818"></a><code>no</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479770"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479820"></a><code>compreltol=value</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479822"></a>Defines the relative tolerance for waveform compression.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479824"></a><code>1.00E-03</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479778"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479826"></a><code>compvabstol=value</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479828"></a>Defines the absolute current tolerance for waveform compression.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479830"></a><code>1.00E-06</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472534"></a><strong>spf</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472536"></a><code>aliasterm=</code>&quot;<code>alias library_terminal name</code>&quot;</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472538"></a>Alias used when DSPF instance terminal names do not match the cell terminal name in the libraries.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-472540"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479255"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479257"></a><code>check=[on|off]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479259"></a>Enable (<code>on</code>) or disable (<code>off</code>) automatic spfchecker run for creating <code>spfxtorprefix</code> and <code>spfaliasterm</code> configuration settings for the iterated method. Spfchecker can also be enabled by setting the <code>MMSIM_SPF_CHECK</code> environment variable, as follows:</p>
<p>
<a id="pgfId-479853"></a><code>setenv MMSIM_SPF_CHECK 1</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479261"></a><code>off</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487626"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487628"></a><code>rcr_report=[on|off]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487630"></a>Enable net-based Conly/RCR report. The report is written to a file with the extension <code>*.rpt_rcr</code>. The report generation can also be enabled by setting the <code>MMSIM_DSPF_RCR_REPORT</code> environment variable, as follows:</p>
<p>
<a id="pgfId-487648"></a><code>setenv MMSIM_DSPF_RCR_REPPORT 1</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487632"></a><code>off</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-514962"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-514964"></a><code>ignore_pwr_gate_models=[model1...] nets=[pwg_net1 pwg_net2...] from_stage=[1|2]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-514966"></a>All instances of the specified model are removed if their first and third terminals are connected to the specified nets. <code>from_stage=1</code> (default) removes the element from the Spectre database and impacts the first and second stage. <code>from_stage=2</code> keeps the instance in the first stage but removes it from the second stage. The net names must specified in pairs (GPN/VPN or VPN/VPN) and may contain wildcards.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-514968"></a><code>none+C85:F85</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-515490"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-515492"></a><code>ignore_instances=[instance names from DSPF instance_section] from_stage=[0|1|2]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-515494"></a>The specified DSPF instance is removed from EMIR simulation. <code>from_stage =0</code> (default) removes the instance from the Spectre database and impacts the first and second stage. <code>from_stage=1</code> removes the instance from the Spectre database and the RC solver database. <code>from_stage=2</code> removes the instance from the RC solver database only. The instance names may contain wildcards.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-515496"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483766"></a><strong>spgs</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483768"></a><code>net=[net1 net2...] </code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483770"></a>Enables the static power grid solver and defines the power nets to be analyzed. </p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483772"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487657"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487659"></a><code>short_res_layer=[layer1 layer2....]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487661"></a>Optional argument that specifies the DSPF layer that needs to be shorted.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-487663"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-530296"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-530298"></a><code>no_short_res_layer=[layer1 layer2...]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-530300"></a>Optional argument that specifies the DSPF layers that should not be shorted. All other layers are shorted.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-530302"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-530610"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-530612"></a><code>open_res_layer=[layer1 layer2...]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-530614"></a>Cuts the R on the specified layers (creating an open) and keeps the R on all other layers.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-530616"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483777"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483779"></a><code>pwrgate=[powernet1 powernet2...]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483781"></a>Specifies the power gates that need to be analyzed.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483783"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-515901"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-515903"></a><code>filter_moscap=true|false</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-515905"></a>If set to <code>true</code>, tap nodes that connect to MOSFET devices are filtered out.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-515907"></a><code>FALSE</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-533515"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-533517"></a><code>max_rpt=</code><span class="webflare-courier-new" style="white-space:pre"><em>value</em></span><code></code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-533519"></a>Report top value paths only</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-533521"></a><code>infinite</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-533523"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-533525"></a><code>filter_res_threshold</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-533527"></a>Report only the paths that have the resistance value above the specified value.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-533529"></a><code>0</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483785"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483787"></a><code>rshort=</code><span class="webflare-courier-new" style="white-space:pre"><em>value</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483789"></a>Specifies that the resistors with <code>R&lt;rshort</code> need to be shorted during static power grid analysis.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483791"></a><code>0</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-535021"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-535023"></a><code>remove_dangle_res=true|false</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-535025"></a>Removes the dangling resistors.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-535027"></a><code>FALSE</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483793"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483795"></a><code>tap2sub net=&lt;net_name&gt; include=[&lt;tap_name&gt;] exclude=[&lt;tap_name&gt;]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483797"></a>Converts tap to subnodes.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483799"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483801"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483835"></a><code>tap2pin net=&lt;net_name&gt; include=[&lt;tap_name&gt;] exclude=[&lt;tap_name&gt;]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483805"></a>Converts tap to pin.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483807"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483809"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483853"></a><code>sub2tap net=&lt;net_name&gt; include=[&lt;node_name&gt;] exclude=[&lt;node_name&gt;]<br />layer=[m1 m2]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483813"></a>Converts subnode to tap.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483815"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483817"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483865"></a><code>sub2pin net=&lt;net_name&gt; include=[&lt;node_name&gt;] exclude=[&lt;node_name&gt;]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483821"></a>Converts subnode to pin.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483823"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483825"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483877"></a><code>tap2sub net=&lt;net_name&gt; include=[&lt;tap_name&gt;] exclude=[&lt;tap_name&gt;]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483829"></a>Converts tap to subnode</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483831"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483901"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483919"></a><code>pin2sub net=&lt;net_name&gt; include=[&lt;pin_name&gt;] exclude=[&lt;pin_name&gt;]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483905"></a>Converts pin to subnode.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483907"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483909"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483931"></a><code>pin2tap net=&lt;net_name&gt; include=[&lt;pin_name&gt;] exclude=[&lt;pin_name&gt;]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483913"></a>Converts pin to tap.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-483915"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-516012"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-516014"></a><code>test_bench_less=1</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-516016"></a>Enables the simplified SPGS flow only requiring DSPF file and subcircuit instance call or the top-level subcircuit (<code>+top</code>).</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-516018"></a><code>0</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479868"></a><strong>pwr_macro</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479870"></a><code>subckt=name</code></p>
<p>
<a id="pgfId-479880"></a>or</p>
<p>
<a id="pgfId-479887"></a><code>inst=name</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479872"></a>Creates power macro model for all instances of the specified subcircuit or for the specified subcircuit instance.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479874"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479902"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479904"></a><code>port=[name1 name2....]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479906"></a>Specifies the subcircuit ports that are modeled. Wildcards are supported</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479908"></a><code>*</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479910"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479912"></a><code>type=[max|avg|avgabs| rms]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479914"></a>Specifies the type of current to be measured for defining the created port DC source value. Multiple entries are supported.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479916"></a><code>none</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479918"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479920"></a><code>output=[subckt|table]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479922"></a>Specifies the output to be generated.</p>
<p>
<a id="pgfId-479991"></a><code>subckt</code> - generate the subcircuit macro model</p>
<p>
<a id="pgfId-479998"></a><code>table</code> - generate a table with current and capacitance information</p>
<p>
<a id="pgfId-480005"></a>Multiple entries are supported.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479924"></a><code>subckt</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479926"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479928"></a><code>outdir</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479930"></a>Specifies the directory to which the macro models are written.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479932"></a><code>raw</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479960"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479962"></a><code>outname</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479964"></a>Specifies the name for the created macro model files. The file extension is <code>.</code><span class="webflare-courier-new" style="white-space:pre"><em>inst_name</em></span><code>.</code><span class="webflare-courier-new" style="white-space:pre"><em>subckt_name</em></span><code>.type</code>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479966"></a><code>netlist name</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479968"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479970"></a><code>mode=0|1</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479972"></a>Specifies the type of macro model to be generated. </p>
<p>
<a id="pgfId-480035"></a><code>mode=1</code> creates the macro model with what-if branches for resolving potential KCL problems.</p>
<p>
<a id="pgfId-480046"></a><code>mode=0</code> creates the macro model with parallel resistor branch for addressing potential KCL violations.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479974"></a><code>1</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479976"></a><strong>eco</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479978"></a><code>file=&quot;eco_file_name&quot;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479980"></a>Enables What-If analysis and applies the changes defined in the <code>eco_file_name</code>. This option is supported when <code>method=iterated</code> or <code>method=itereco</code>.</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-479982"></a><code>none</code></p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-463761"></a>The EMIR control file supports the Spectre line continuation character <code>+</code>, and the comment lines start with character <code>*</code> or string <code>//</code>. </p>

<h4>
<a id="pgfId-487714"></a>Checking the Progress of EMIR Analysis</h4>

<p>
<a id="pgfId-487728"></a>As the simulation runs, Spectre sends messages to the screen and the simulation log file that show the progress of the simulation and provide statistical information. Following information may be significant to your EMIR analysis when you use the iterated method.</p>

<h4><em>
<a id="pgfId-487760"></a>Hardware configuration and run-time machine loading</em></h4>

<p>
<a id="pgfId-487784"></a>In the beginning of a simulation session, Spectre prints the hardware configuration (physical memory, CPU core specification) and the run-time machine status (available memory, CPU core operating frequency, CPU loading). Since EMIR analysis often involves large-scale designs with gigabytes of data, it is important to ensure that there is sufficient memory available, with CPU operating at full speed (not in power saving mode), and the machine loading is light.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-487820"></a>User: user1 Host: lnx-user1 HostID: CD0A1190&#160;&#160; PID: 26141</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487821"></a>Memory&#160;&#160;available: 10.2268 GB&#160;&#160;physical: 16.6236 GB</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487822"></a>CPU Type:&#160;&#160;      Intel(R) Xeon(R) CPU E5-1650 0 @ 3.20GHz</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487823"></a>          Processor PhysicalID CoreID Frequency Load</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487824"></a>              0         0        0     3192.5     0.3</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487825"></a>              1         0        1     3192.5     0.2</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487826"></a>              2         0        2     3192.5     0.3</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487827"></a>              &#8230;</pre>
<h4><em>
<a id="pgfId-487852"></a>Reading the EMIR Control File</em></h4>

<p>
<a id="pgfId-487862"></a>Spectre reads the EMIR control file before processing the circuit being simulated. All valid EMIR options are reported in the following section:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-487889"></a>Reading EMIR configuration file: &#8230;/iterated.conf</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487891"></a>~~~~~~~~~~~~~~~~~~~~~~~~~~~</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487892"></a>EMIR Analysis Configuration</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487893"></a>~~~~~~~~~~~~~~~~~~~~~~~~~~~</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487895"></a>nets&#160;&#160;          pwrgate = [i1.VDD i1.outp] analysis = [vmax]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487896"></a>nets&#160;&#160;          name = [i1.VSS] analysis = [vmax]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487897"></a>nets&#160;&#160;          name = [i1.*] analysis=[irms iavg]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487898"></a>spf&#160;&#160;           aliasterm = &quot;gpdk090_nmos2v  1=d  2=g  3=s&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487899"></a>&#8230;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487900"></a>emirutil&#160;&#160;      techfile = emDataFile.txt</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487901"></a>solver&#160;&#160;        method = iterated speed = 3</pre>

<p>
<a id="pgfId-487903"></a>If one of the specified EMIR options is not displayed in the summary, check the related warnings, and correct the syntax.</p>

<h4><em>
<a id="pgfId-487881"></a>Processing the DSPF Files</em></h4>

<p>
<a id="pgfId-487932"></a>Spectre processes the DSPF files and prepares a reduced circuit to be simulated. This often includes identifying the power nets and reducing them to only include parasitic capacitors, as well as identifying the signal nets and reducing the parasitic resistors and capacitors according to accuracy requirement.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-487959"></a>Time for Processing DSPF file: CPU = 128.981 ms, elapsed = 60.8708 s (1m&#160;&#160;0.9s).</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487960"></a>Time accumulated: CPU = 167.974 ms, elapsed = 60.8709 s (1m&#160;&#160;0.9s).</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487961"></a>Peak resident memory used = 42 Mbytes.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487962"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487963"></a>Time for Creating Parasitic Database: CPU = 0 s, elapsed = 403.166 us.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487964"></a>Time accumulated: CPU = 170.973 ms, elapsed = 60.874 s (1m&#160;&#160;0.9s).</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-487965"></a>Peak resident memory used = 42.1 Mbytes.</pre>

<p>
<a id="pgfId-516278"></a>All coupling capacitors with <code>C&lt;1e-16</code> are grounded, while others are preserved. The <code>dspf_include</code> option <code>CapacitorSplitThreshold</code> can be used to adjust the value. Direct method and first stage iterated method do not simplify coupling caps. The second stage iterated method includes coupling caps in individual net solving. It biases the other terminal of the coupling cap with a voltage waveform. </p>

<h4><em>
<a id="pgfId-487951"></a>Running the Circuit Simulation to Produce Voltage Profiles</em></h4>

<p>
<a id="pgfId-488005"></a>At this point, with the simplification of power and signal nets, Spectre is ready to simulate the nonlinear circuit and produce voltage profiles needed for iterated EMIR analyses. This step is similar to a regular circuit simulation, where Spectre first parses the circuit, reports circuit inventory, initiates a DC analysis, and finishes the step with a transient analysis.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-488040"></a>Creating probes for EMIR analysis: 36 voltage probes, 0 current probes</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488041"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488042"></a>Time for setting up EMIR tap devices: CPU = 10.0 ms (0h 0m 0s), elapsed = 10.0 ms (0h 0m 0s).</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488043"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488044"></a>Time for setting up EMIR analysis: CPU = 30.0 ms (0h 0m 0s), elapsed = 30.0 ms (0h 0m 0s).</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488045"></a>Peak resident memory used = 0.95 Mbytes</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488046"></a>&#8230;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488047"></a>******************************************************</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488048"></a>Transient Analysis `transient1&#39;: time = (0 s -&gt; 20 ns)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488049"></a>******************************************************</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488050"></a>&#8230;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488051"></a>......9......8......7......6......5......4......3......2......1......0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488052"></a>Number of accepted tran steps =&#160;&#160;           918</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488053"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488054"></a>Initial condition solution time: CPU = 175.973 ms, elapsed = 176.348 ms.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488055"></a>Intrinsic tran analysis time:&#160;&#160;  CPU = 352.946 ms, elapsed = 354.783 ms.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488056"></a>Total time required for tran analysis `transient1&#39;: CPU = 531.918 ms, elapsed = 557.204 ms.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488057"></a>Time accumulated: CPU = 873.866 ms, elapsed = 62.0641 s (1m&#160;&#160;2.1s).</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488058"></a>Peak resident memory used = 65.2 Mbytes.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488059"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488060"></a>Creating EMIR waveform profile &#8230;/iterated.emirtap.pwl</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488061"></a>Time for creating waveform database: CPU = 30.0 ms (0h 0m 0s), elapsed = 40.0 ms (0h 0m 0s).</pre>

<p>
<a id="pgfId-488084"></a>The reported transient time and the accumulated time are important measures to be considered when optimizing performance. The voltage profiles of the tap devices (active devices connecting to the power and signal RC nets) are stored in the pwl files, and used as input for the second stage EMIR simulation.</p>
<p>
<a id="pgfId-488086"></a>This step of EMIR simulation is fully multi-threaded. It uses the number of cores defined by the <code>+mt</code> command-line option.</p>

<h4><em>
<a id="pgfId-488113"></a>Simulating the Parasitic RC Nets</em></h4>

<p>
<a id="pgfId-488131"></a>In the second stage of the iterated EMIR analysis, the power and signal nets are simulated together with the tap devices. During the simulation, the tap device terminal voltages over time is taken from the voltage profiles created in the first stage. In the second stage, nets are solved individually, except for coupled nets, which are solved together. </p>
<p>
<a id="pgfId-488133"></a>The RC network solver writes all IR drop voltage and EM current values to the binary database with the extension <code>emir0_bin</code>. Important log file content is written to the <code>EMIR PARASITICS ANNOTATION SUMMARY</code> section, which provides information on the nets and R/C elements processed. In addition, the number of solved time steps per net, and the elapsed time for the RC solving are essential when optimizing performance.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-488166"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488272"></a>*****************</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488167"></a>EMIR RC Analysis</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488168"></a>*****************</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488169"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488170"></a>Reading EMIR configuration file:&#160;&#160;&#8230;/iterated.emirtap.conf</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488171"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488172"></a>~~~~~~~~~~~~~~~~~~~~~~~~~~~</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488173"></a>EMIR Analysis Configuration</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488174"></a>~~~~~~~~~~~~~~~~~~~~~~~~~~~</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488175"></a>solver&#160;&#160;        method = iteronly inputwf = &#8230;/iterated.emirtap.pwl </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488176"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488177"></a>Maximum grounded vsource value = 2.5v</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488178"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488179"></a>Searching and processing cross coupling capacitors in SPF file</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488180"></a>/grid/cic/nsdpe-2/stefanw/emir/logfile/./adc_sample_hold.dspf</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488181"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488182"></a>.......9......8......7......6......5......4......3......2......1......0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488183"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488184"></a>Cross coupling capacitors found and processed: 0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488185"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488186"></a>Solving coupled nets &quot;VDD outp&quot;: number of nodes = 594, time = (0n -&gt; 20n)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488187"></a>.........9.........8.........7.........6.........5.........4.........3.........2.........1.........0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488188"></a>Total time required for EMIR RC analysis of coupled nets &quot;VDD ... &quot;: CPU = 480.0 ms (0h 0m 0s), elapsed = 240.0 ms (0h 0m 0s).</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488189"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488190"></a>Completed transient analysis up to&#160;&#160;100% at Tue Jan 12 03:53:44 2016</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488191"></a>EMIR RC analysis accumulated time: CPU = 1.4&#160;&#160;s (0h 0m 1s), elapsed = 1.0&#160;&#160;s (0h 0m 1s).</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488192"></a>Peak resident memory used = 68.40 Mbytes.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488193"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488194"></a>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488195"></a>EMIR PARASITICS ANNOTATION SUMMARY</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488196"></a>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488197"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488198"></a>Nets:&#160;&#160;                    parsed            18 processed            18</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488199"></a>Cross coupling capacitors: parsed&#160;&#160;           0 processed             0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488200"></a>Capacitors:&#160;&#160;              parsed             0 processed             0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488201"></a>Resistors:&#160;&#160;               parsed          3052 processed          2933</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488202"></a>Nodes:&#160;&#160;                   parsed          2205 processed          2205</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488203"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488204"></a>Nets annotated with C-only:&#160;&#160;      0  Nets annotated with RC:       18</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488205"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488206"></a>Detailed annotation report written in file &quot;iterated.raw/iterated.emirtap.spfrpt&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488207"></a>0 errors and 28 warnings(fixed errors)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488208"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488209"></a>         Message statistics</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488210"></a>        ===========================</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488211"></a>        Instance section detected                             1</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488212"></a>        Small R/C excluded                                   96</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488213"></a>        Dangling R/C terminal                                28</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488214"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488215"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488216"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488217"></a>Notice from spectre.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488218"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488219"></a>        EMIR binary file &#39;iterated.raw//iterated.emirtap.emir0_bin&#39; is generated (start = 0, stop = 2e-08)..</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488220"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488221"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488222"></a>Number of nets solved = 18</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488223"></a>Number of accepted time steps = 3148 (average 174.889 per net)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488224"></a>Number of rejected time steps = 187 (average 10.3889 per net)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488225"></a>&#8230;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488226"></a>Total time required for EMIR RC analysis: CPU = 1.4&#160;&#160;s (0h 0m 1s), elapsed = 1.0&#160;&#160;s (0h 0m 1s).</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488227"></a>Peak resident memory used = 68.4 Mbytes</pre>

<p>
<a id="pgfId-488280"></a>This step of the EMIR simulation is fully multi-threaded. It uses the number of cores defined by the <code>+mt</code> command-line option.</p>
<p>
<a id="pgfId-488282"></a>After the EMIR data is available in the binary database, another step is performed to create the text reports for IR drop, EM currents, pin currents, and power gate information. The following output shows the related section in the log file (some content is only written to stdout):</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-488310"></a>Creating EMIR report, check &#39;&#8230;/iterated.raw/iterated.emirtap.emirlog&#39; for more information.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488311"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488312"></a> Time usage: elapsed: 150.0 ms (0h 0m 0s), CPU: 90.0 ms (0h 0m 0s)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488313"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488315"></a>Find PDB file (./logfile.emirtap.pdb)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488316"></a>Pin current report ./logfile.emirtap.rpt_pin created.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488317"></a>Power gate report .logfile.emirtap.rpt_pwg created.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488318"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488319"></a>Completed processing EM/IR data up to:10 %</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488320"></a>Completed processing EM/IR data up to:20 %</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488321"></a>Completed processing EM/IR data up to:30 %</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488322"></a>Completed processing EM/IR data up to:40 %</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488323"></a>Completed processing EM/IR data up to:50 %</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488324"></a>Completed processing EM/IR data up to:60 %</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488325"></a>Completed processing EM/IR data up to:70 %</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488326"></a>Completed processing EM/IR data up to:80 %</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488327"></a>Completed processing EM/IR data up to:90 %</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488328"></a>Completed processing EM/IR data up to:100 %</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488329"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488330"></a>text IR report successfully generated.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488331"></a>text EM report successfully generated.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488332"></a>text PIN current report successfully generated.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488333"></a>text Power gate report successfully generated.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488334"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488335"></a>Note, found 4 warning messages, and 4 warnings printed.</pre>

<p>
<a id="pgfId-488123"></a>At the end of the simulation, Spectre reports the total simulation time and peak memory used.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-488384"></a>Aggregate audit (3:53:45 AM, Tue Jan 12, 2016):</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488385"></a>Time used: CPU = 2.38 s, elapsed = 63.3 s (1m&#160;&#160;3.3s), util. = 3.76%.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488386"></a>Time spent in licensing: elapsed = 60.1 s (1m&#160;&#160;0.1s), percentage of total = 94.8%.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-488387"></a>Peak memory used = 68.8 Mbytes.</pre>
<h4>
<a id="pgfId-463782"></a><a id="18315"></a>Viewing EMIR Results</h4>

<p>
<a id="pgfId-463783"></a>Spectre EMIR writes the IR voltage and EM current values to a binary database with the extension <code>emir0_bin</code>. In addition, it automatically calls the <code>emirreport</code> or <code>emirutil</code> binary for creating the text or html reports. </p>
<p>
<a id="pgfId-488414"></a>The textual/html IR drop report (file extension: <code>rpt_ir/rpt_ir.html</code>) lists the voltage drop per net (in the order of largest to smallest), and provides information about the time the maximum IR drop occurred, as well as the layer information and layer coordinates. An example section of an IR drop report is shown in the following figure:</p>

<p>
<a id="pgfId-463809"></a></p>
<div class="webflare-div-image">
<img width="668" height="254" src="images/chap13-6.gif" /></div>

<p>
<a id="pgfId-463810"></a>The EM report (file extension: <code>rpt_em/rpt_em.html</code>) lists the pass/fail results for each resistor segment of a net, and provides information about the resistor name, layer, current, layer width, density (current divided by width), density limit, number of vias required, and the coordinates.</p>

<p>
<a id="pgfId-463826"></a></p>
<div class="webflare-div-image">
<img width="668" height="112" src="images/chap13-7.gif" /></div>

<p>
<a id="pgfId-474072"></a>The EMIR text and html reports can also be created using an existing EMIR binary database using the following command:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-488506"></a>$ emirutil -db aps.emir0_bin -control emir.conf</pre>

<p>
<a id="pgfId-488528"></a>For more information on <code>emirutil</code>/<code>vpsbatch</code> utility for creating the reports, and for the visualization of the EMIR analysis results in the layout, refer to the <em>Voltus-Fi </em>user manual. </p>
<p>
<a id="pgfId-516364"></a>If there are multiple <code>emir0_bin</code> files created by the same Spectre EMIR simulation, it is sufficient to specify only the first binary database file with the <code>-db</code> option. The utility automatically identifies all other binary database files created by the Spectre EMIR simulation.</p>

<h4>
<a id="pgfId-488561"></a>Data Flow</h4>

<p>
<a id="pgfId-488574"></a>The data flow of the iterated EMIR flow is shown in the following flowchart. The first stage EMIR circuit simulation creates the tap device voltage profiles which are stored in the pwl files, and used in the second stage. The second stage RC network solver writes all IR drop and EM current values to a binary database with the extension <code>emir0_bin</code>. This binary database is used by <code>emirutil</code>/<code>emirreport</code> for creating the text/html reports, and by <em>Voltus-Fi </em>to visualize the results in the layout.</p>

<p>
<a id="pgfId-488614"></a></p>
<div class="webflare-div-image">
<img width="663" height="388" src="images/chap13-8.gif" /></div>

<p>
<a id="pgfId-489350"></a>All intermediate and output files are written into the Spectre output (raw) directory. Some files shown in the figure are only created when the related feature is enabled in the EMIR config file. </p>
<p>
<a id="pgfId-489386"></a>If multiple EMIR windows are used in the same EMIR simulation, a set of files is created for each EMIR time window. For example:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-489387"></a>Time window 1: emir0_bin, rpt_ir, rpt_em, &#8230;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-489388"></a>Time window 2: emir1_bin, rpt_ir1, rpt_em1, &#8230;</pre>

<p>
<a id="pgfId-489357"></a>The data flow for the APS direct method is the same except that the intermediate files are not created. Only the iterated method EMIR files have the <code>emirtap</code> file extension.</p>
<p>
<a id="pgfId-489359"></a>Direct method: <code>design.emir0_bin</code>, <code>design.rpt_ir</code>, <code>design.rpt_em</code></p>
<p>
<a id="pgfId-489360"></a>Iterated method: <code>design.emirtap.emir0_bin</code>, <code>design.emirtap.rpt_ir</code>, <code>design.emirtap.rpt_em</code></p>
<p>
<a id="pgfId-489362"></a>For large designs, the intermediate (<code>pwl</code>, <code>pdb</code>) and EMIR database files (<code>emir0_bin</code>) can be compressed by using the <code>eisopt zipfiles=2</code> option in the EMIR config file.</p>

<h3>
<a id="pgfId-504946"></a><a id="13555"></a>Establishing an Accuracy Reference and Correlating EMIR Accuracy</h3>

<p>
<a id="pgfId-504947"></a>To evaluate an EMIR solution and to select the appropriate level of accuracy and performance trade-off, it is important to establish a golden accuracy reference, and be able to correlate EMIR results compared to this reference.</p>

<h4>
<a id="pgfId-504891"></a>Establishing an Accuracy Reference Using the APS Direct Method</h4>

<p>
<a id="pgfId-489493"></a>For evaluating and optimizing the performance and accuracy of Spectre EMIR analysis results, a golden accuracy reference is required. It is recommended to select a representative small-to-medium sized design that can be simulated within reasonable time by using the APS direct method. APS direct method produces accurate EMIR golden accuracy. The following shows an example of APS direct method EMIR config:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-489526"></a>net name=[X1.VDD X1.VSS] analysis=[vmax iavg]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-489527"></a>net name=[X1.*] analysis=[irms]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-489528"></a>solver method=direct</pre>

<p>
<a id="pgfId-489518"></a>When correlating data between iterated and direct method, there is no need for including a technology file since only IR drop and EM current values are compared.</p>

<h4>
<a id="pgfId-489555"></a>Correlating EMIR Accuracy</h4>

<p>
<a id="pgfId-489576"></a>Once the iterated method is run on the same design, you can use the <code>emirutil</code> utility to compare the accuracy of iterated EMIR results with the golden APS direct EMIR results. </p>
<p>
<a id="pgfId-489577"></a>For example, the following command compares the IR drop results for the node <code>vdd</code> between the iterated and direct methods. All <code>vdd</code> tap points with more than 100mV and 1% of the maximum <code>vdd</code> IR drop are reported. The results are written to the file <code>test.erclog</code> in scientific notation.</p>

<a id="pgfId-489578"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
emirutil -i iterated.rpt_ir -r direct.rpt_ir -o test -net &quot;vdd&quot; 
-ir_abstol 100e-6 -ir_reltol 0.01 -maxrpt all -notation s</pre>

<p>
<a id="pgfId-489581"></a>The following is an example of the comparison report:</p>
<p>
<a id="pgfId-489730"></a></p>

<div class="webflare-div-image">
<img width="662" height="437" src="images/chap13-9.gif" /></div>

<p>
<a id="pgfId-489723"></a>Alternatively, a GNUPLOT graph can be generated, as shown below:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-489768"></a>emirutil -i input.emirtap.rpt_em -r input.rpt_em -net VDD -g v-v -o out </pre>

<p>
<a id="pgfId-489761"></a>This command creates a GNUPLOT command file (that is, <code>out_VDD_em_max.plt</code>), and a gnuplot database file (that is, <code>out_VDD_em_max.dat</code>). The plot can be shown in GNUPLOT using the following command.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-489582"></a>gnuplot -persist&#160;&#160;default_VDD_ir_avg.plt</pre>

<p>
<a id="pgfId-505000"></a>The following gnuplot graph compares the IR drop for all nets of the design between iterated and direct method. </p>
<p>
<a id="pgfId-489668"></a></p>

<div class="webflare-div-image">
<img width="659" height="399" src="images/chap13-10.gif" /></div>

<p>
<a id="pgfId-489790"></a>The following table describes the <code>emirutil</code> command-line options.</p>
<table class="webflareTable" id="#id489583">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id489585">
<a id="pgfId-489585"></a>Command-line Option</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id489587">
<a id="pgfId-489587"></a>Description</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489589"></a><code>-i input.emirtap.rpt_em</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489591"></a>Input file with EM or IR data (that is, the iterated method).</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489593"></a><code>-r input.rpt_em</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489595"></a>Reference file with reference to EM or IR data (that is, the direct method).</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489597"></a><code>-g v-v | rele-v |abse-v</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489599"></a>Create gnuplot script and database for gnuplot visualization. </p>
<p>
<a id="pgfId-489600"></a><code>v-v</code> compares the input value with the reference value (default)</p>
<p>
<a id="pgfId-489601"></a><code>rele-v</code> compares the relative error of the input with the reference value</p>
<p>
<a id="pgfId-489602"></a><code>abse-v</code> - compares the absolute error of the input value with the reference value</p>
<p>
<a id="pgfId-489837"></a>You can redirect the output to PNG, JPG, or PS files by using the <code>EMIRUTIL_GPLOT_OUT</code> environment variable as follows:</p>
<p>
<a id="pgfId-489848"></a><code>setenv EMIRUTIL_GPLOT_OUT png|jpg|ps</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489604"></a><code>-gdesp</code> <span class="webflare-courier-new" style="white-space:pre"><em>title_addition</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489606"></a>Add additional information to the gnuplot graph title.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489608"></a><code>-o EM_VSS</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489610"></a>Define the output file name (for example, <code>EM_VSS.erclog</code>).</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489612"></a><code>-print_shell</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489614"></a>If specified, also print the result in the command shell</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489616"></a><code>-net &quot;VDD_AVTR&quot;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489618"></a>The nets to be analyzed. The default is &quot;*&quot;. Use <code>-net all</code> to create a single report for all nets.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489863"></a><code>-comp_exclude &quot;q[*]clk&quot;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489865"></a>The nets to be excluded.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489620"></a><code>-layer</code> <span class="webflare-courier-new" style="white-space:pre"><em>name</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489622"></a>Layers to be analyzed. Default is &quot;*&quot;.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489624"></a><code>-ir_abstol </code><span class="webflare-courier-new" style="white-space:pre"><em>value</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489626"></a>The absolute cut-off value for the IR drop values to be compared. The default is 1 mV.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489628"></a><code>-em_abstol </code><span class="webflare-courier-new" style="white-space:pre"><em>value</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489630"></a>The absolute cut-off value for the EM current values to be compared. The default is 50 uA.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489632"></a><code>-spgs_abstol</code> <span class="webflare-courier-new" style="white-space:pre"><em>value</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489634"></a>The absolute cut-off value for effective resistors to be compared. The default value is 0.1 Ohm.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489636"></a><code>-ir_reltol </code><span class="webflare-courier-new" style="white-space:pre"><em>value</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489638"></a>The relative cut-off value for the IR drop values to be compared. The default is 33.3% of the maximum IR value per net.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489640"></a><code>-em_reltol value</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489642"></a>The relative cut-off value for the EM current values to be compared. The default is 0% of the maximum EM value per net.</p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-489643"></a>Only tap points/resistors with value above the cut-off value and the relative cut-off value are reported.</div>

</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489645"></a><code>-spgs_reltol</code> <span class="webflare-courier-new" style="white-space:pre"><em>value</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489647"></a>The relative cut-off value for effective resistors to be compared. Default is 0% of the max resistor value per net.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489649"></a><code>-maxrpt number</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489651"></a>Report top numbers for absolute and relative errors, per specified nets. The default is 5. For a detailed report containing all tap points/resistors, use the option <code>-maxrpt all</code>.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489653"></a><code>-notation s|e</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489655"></a><code>e</code> is the engineering scale number. For example, 5.02m. This is the default.</p>
<p>
<a id="pgfId-489656"></a><code>s</code> is the scientific notation. For example, 5.02e-3.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489658"></a><code>-c control.txt</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489660"></a>Read the command-line options from the file <code>control.txt</code>.</p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-489661"></a>The same syntax is used in the control file except that the dash (-) is not used.</div>

</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489663"></a><code>-vref voltage|irdrop</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-489665"></a>Defines the reference for IR drop display. </p>
<p>
<a id="pgfId-489666"></a><code>voltage</code> - use node voltage as reference. This is the default.</p>
<p>
<a id="pgfId-489667"></a><code>irdrop</code> - use irdrop as reference.</p>
</td>
</tr>
</tbody></table>
<p>
<a id="pgfId-489669"></a>All <code>emirutil</code> options can also be specified in a control file and included using the <code>-c</code> command-line option. The syntax in the control file does not require the dash.</p>
<p>
<a id="pgfId-489670"></a>The following is an example of specifying the <code>emirutil</code> options in a control file:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-489672"></a>reference=&quot;/home/user/emir/direct/top2.rpt_ir&quot;<br />input=&quot;/home/user/emir/iterated/top2.rpt_ir&quot;<br />output=test<br />net=&quot;vdd avtr&quot;<br />ir_abstol=1e-8<br />ir_reltol=0.01<br />maxrpt=all<br />notation=s<br />print_shell</pre>

<p>
<a id="pgfId-489673"></a>The control file can be used with <code>emirutil</code>, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-489674"></a>emirutil -c control.txt</pre>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-489903"></a>The <code>emirutil</code> can be used not only to compare the direct EMIR analysis results with iterated EMIR analysis results, but also to compare the results of any two EMIR analyses.</div>
<p>
<a id="pgfId-489904"></a>The outcome of the correlation between the iterated and direct methods provides a good understanding of the iterated method accuracy.</p>

<h3>
<a id="pgfId-489928"></a><a id="43035"></a>Optimizing EMIR Analysis for Accuracy and Performance</h3>
<h4>
<a id="pgfId-491324"></a>Understanding the Accuracy Impact and Performance Bottleneck</h4>

<p>
<a id="pgfId-490039"></a>As discussed, the iterated method consists of a first stage circuit simulation with different simulation solver options (APS, XPS), and a second stage RC network solver analysis. Both stages can be optimized for accuracy and performance. The accuracy of the first stage can be improved by keeping some parasitics with the RC reduction option, in place of the default C-only simulation. Once the parasitics going into the first stage circuit simulation are decided, the performance and accuracy of the first stage circuit simulation is completely subject to the choice of simulation solver, and the solver accuracy setting (for example, <code>errpreset</code>, <code>++aps</code>, <code>+dcopt</code>, or <code>+hsfe</code>). In addition, other solvers like XPS SPICE or XPS FastSPICE can be explored. The accuracy and performance trade-off in the second stage is defined by the speed option. A higher value of the speed option means higher performance, and a lower value means higher accuracy. </p>
<p>
<a id="pgfId-490040"></a>The following figure shows the performance numbers for an individual EMIR analysis steps for a large representative design, and the options for trading between accuracy and performance.</p>
<p>
<a id="pgfId-490041"></a></p>

<div class="webflare-div-image">
<img width="667" height="323" src="images/chap13-11.gif" /></div>

<p>
<a id="pgfId-491231"></a>When optimizing performance, it is important to check whether it is the first stage or the second stage that dominates the overall performance. The elapsed time and time steps for each stage are reported in the Spectre log file, as shown below.</p>
<p>
<a id="pgfId-491254"></a></p>

<div class="webflare-div-image">
<img width="663" height="260" src="images/chap13-12.gif" /></div>

<p>
<a id="pgfId-491290"></a>The number of time steps used in the second stage RC simulation should track the first stage circuit simulation to some extent.</p>

<h4>
<a id="pgfId-491317"></a>Performance and Accuracy Trade-Off in the First Stage Circuit Simulation </h4>

<p>
<a id="pgfId-491337"></a>Since the first stage involves circuit simulation, all Spectre-related simulation options can be used for optimizing accuracy or performance. For very large digital and SRAM designs, use the following command-line options to obtain good performance in APS:</p>
<p>
<a id="pgfId-491372"></a><code>++aps=liberal</code> - high performance APS solver with <code>errpreset=liberal</code></p>
<p>
<a id="pgfId-491373"></a><code>+hsfe</code> - hierarchical Spectre parser for improved parsing performance </p>
<p>
<a id="pgfId-491374"></a><code>+dcopt=11</code> - high speed DC operating point calculation</p>
<p>
<a id="pgfId-505105"></a><code>+postlayout=upa</code> - postlayout optimized simulation technology without RC reduction</p>
<p>
<a id="pgfId-491440"></a>Analog and mixed-signal designs typically require higher accuracy. The following options may provide good performance for such designs:</p>
<p>
<a id="pgfId-491441"></a><code>++aps=moderate</code> - high performance APS solver with <code>errpreset=moderate</code></p>
<p>
<a id="pgfId-491442"></a><code>+dcopt</code> - high speed DC operating point calculation</p>
<p>
<a id="pgfId-505133"></a><code>+postlayout=upa</code> - postlayout optimized simulation technology without RC reduction</p>
<p>
<a id="pgfId-491465"></a>Spectre XPS may be used as the faster solver. However, XPS provides less accurate current measurements, therefore, it is recommended to always start an EMIR evaluation performance/accuracy with APS, and move to XPS only if the first stage circuit simulation is the overall performance bottleneck.</p>
<p>
<a id="pgfId-491467"></a>EMIR analysis can be accurate only if the circuit behaves correctly in first stage. Therefore, always check the first stage voltage waveforms for correct circuit behavior, before analyzing EMIR accuracy.</p>
<p>
<a id="pgfId-491421"></a>EMIR accuracy can be significantly improved by changing the first stage from the default C-only method to include some parasitics using the RC reduction option. When this is needed, it is recommended to apply RC reduction to signal nets and leave the power nets to be C-only. You can use the<code> rcr_pwr_netsize</code> option to define signal versus power nets. A typical value is <code>rcr_pwr_netsize=10000</code>, which means that all (power) nets with more than 10000 resistors are processed with C-only while all (signal) nets with less than or equal to 10000 resistors are processed with RC reduction. The default value of the <code>rcr_pwr_netsize</code> option is 30000.</p>
<p>
<a id="pgfId-505162"></a>The accuracy can be further improved by additionally using the RCR or Reff method for the power nets. However, this needs to be performed carefully because power nets can be huge and applying RCR may cause the degrade performance to be similar to the direct method. The recommended approach is to use RCR on the smaller global power nets, and Reff on the larger virtual power nets. This is a very conservative approach and is recommended only for 7nm designs.</p>
<p>
<a id="pgfId-505155"></a>The following figure shows the three methods.</p>

<p>
<a id="pgfId-491564"></a></p>
<div class="webflare-div-image">
<img width="667" height="369" src="images/chap13-13.gif" /></div>

<p>
<a id="pgfId-492268"></a>The method for power nets defined with <code>rcr_pwr_netsize</code> can be set to either <code>Conly</code> (default) or <code>reff</code>.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-522503"></a>solver rcr_pwr_method=[conly | reff]</pre>

<p>
<a id="pgfId-505632"></a>Alternatively, there are options for assigning individual nets to the three categories of nets: </p>
<ul><li>
<a id="pgfId-492289"></a>Conly nets: <code>solver c_net=[name 1 name2...]</code></li><li>
<a id="pgfId-492299"></a>RC reduced signal nets: <code>solver rcr_net=[name1 name2...]</code></li><li>
<a id="pgfId-492306"></a>Aggressive RC reduced power nets: <code>solver rcr_pwr_net=[name1 name2...]</code></li><li>
<a id="pgfId-505698"></a>Reff power nets: <code>solver reff_pwr_net=[name1 name2...]</code></li><li>
<a id="pgfId-522527"></a>Rsnap/Reff power nets: <code>solver rsnap_reff_pwr_net=[name1 name2]</code></li></ul>




<p>
<a id="pgfId-505699"></a>The name-based options support wildcard and have higher priority than the size-based <code>rcr_pwr_netsize</code> setting.</p>
<p>
<a id="pgfId-492432"></a>The accuracy of the RC reduction methods can be adjusted by setting the cut-off frequency.</p>
<ul><li>
<a id="pgfId-505727"></a><code>rcr_fmax=</code><span class="webflare-courier-new" style="white-space:pre"><em>value</em></span> - Cut-off frequency for signal net RC reduction (default is 20GHz)</li><li>
<a id="pgfId-505748"></a><code>rcr_pwr_fmax=</code><span class="webflare-courier-new" style="white-space:pre"><em>value</em></span> - Cut-off frequency for aggressive power net RC reduction (default is 5GHz)</li></ul>


<h4>
<a id="pgfId-492469"></a>Speedi<a id="speeding"></a>ng Up Second Stage RC Simulation</h4>

<p>
<a id="pgfId-492520"></a>The <code>speed</code> option defines the accuracy and performance of the second stage RC network solver. <code>speed=8</code> provides highest performance while <code>speed=1</code> provides highest accuracy. <code>speed=1-5</code> use adaptive time steps while <code>speed=6-8</code> use fixed time steps. </p>

<p>
<a id="pgfId-492536"></a></p>
<div class="webflare-div-image">
<img width="662" height="126" src="images/chap13-14.gif" /></div>

<p>
<a id="pgfId-492798"></a>Analog and mixed-signal designs with high accuracy requirements may use the default <code>speed=5</code>. Further accuracy can be achieved by using<code> speed=2</code> or <code>speed=3</code>. Sometimes, performance can be improved by limiting the minimum time step used. A typical solver setting for analog/mixed signal designs is:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-492830"></a>solver speed =5 min_tstep=5p</pre>

<p>
<a id="pgfId-492891"></a><code>speed=6</code>, or <code>speed=8</code> often deliver sufficient accuracy for large digital or memory designs with less stringent accuracy requirements. However, note that in the second stage, the number of time steps should track the number of time steps in the first stage. </p>
<p>
<a id="pgfId-492921"></a>If a fixed time step other that 1000 or 2000 time steps is required, the <code>tstep</code> option can be used.</p>
<p>
<a id="pgfId-492923"></a>The RC network solving performance can be improved by using multiple (forked) processes in addition to the default multi-threaded processing. Multi-processing can be enabled with the following option:</p>
<p>
<a id="pgfId-492925"></a><code>solver rcsolve_multi_proc=on</code></p>
<p>
<a id="pgfId-492927"></a>When enabled, the total number of cores at any time is defined by the <code>+mt</code> Spectre command-line option. Small nets (<code>&lt;rcsolve_1t_netsize</code>) are solved first with eight forked single-thread processes. Medium nets are solved next with two forked four thread processes. Big nets (<code>&gt;rcsolve_4t_netsize</code>) are solved with one main process using eight threads.</p>
<p>
<a id="pgfId-530933"></a>The overall EMIR performance can be improved by pipelining the first and second stage EMIR solving. By default, the Spectre EMIR flow runs the first and second stages sequentially. However, if both the stages are the dominant parts of the overall EMIR simulation, the second stage solving can be started while the first stage is still running. In the pipelined approach, the second stage solving reads the partial results from the first stage, and calculates the related EMIR data while the first stage continues in the transient simulation. You should define the large time-consuming (power) nets as pipelined nets, while smaller nets can be solved with the regular method. The pipelined processing can be enabled with the following option.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-531152"></a>solver pipeline_nets = [net1 net2 &#8230;]</pre>

<p>
<a id="pgfId-531196"></a>Pipelining is recommended when:</p>
<ul><li>
<a id="pgfId-531198"></a>Both first and second stages are both dominant parts of the overall EMIR simulation time</li><li>
<a id="pgfId-531226"></a>Large net solving dominates the second stage solving</li><li>
<a id="pgfId-531200"></a>Transient time and the EMIR time window are heavily overlapping</li></ul>


<p>
<a id="pgfId-531202"></a>Spectre EMIR uses multiple processes when multi-processing and pipelining are enabled. Job distribution systems like <code>lsf</code>, <code>rsh</code>, and <code>nc</code> can be used to distribute EMIR subprocesses to a server farm.</p>
<p>
<a id="pgfId-492929"></a>The following flowchart describes the overall flow about how to optimize the EMIR accuracy and performance:</p>

<p>
<a id="pgfId-494727"></a></p>
<div class="webflare-div-image">
<img width="664" height="632" src="images/chap13-15.gif" /></div>
<h3>
<a id="pgfId-494729"></a><a id="73763"></a>Power Gate Support</h3>

<p>
<a id="pgfId-494730"></a>Power networks may contain power gates (four-terminal MOSFET device) which enable or disable the power supply in the circuit. These power gates split the power supply RC network into two parts; the RC network driving the power gate, and the RC network being driven by the power gate. These nets are strongly coupled together and they should be simulated together in EMIR analysis.</p>

<p>
<a id="pgfId-494550"></a></p>
<div class="webflare-div-image">
<img width="668" height="319" src="images/chap13-16.gif" /></div>

<p>
<a id="pgfId-494551"></a>To invoke power gating handling, add the power gate setting in the EMIR control file (<code>emir.config</code>), as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-494552"></a>net pwrgate=[vdd vdd_int] analysis=[vmax]</pre>

<p>
<a id="pgfId-494553"></a>Both, the global power supply net <code>vdd</code> driving the power gates, and the virtual internal power supply net <code>vdd_int</code> driven by the power gates, need to be specified in the <code>net</code> statement in any order. Wildcards are supported for internal power supply nets, but not for power supply nets. If one power supply net drives multiple power gates, one statement with all power supply nets needs to be defined, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-494555"></a>net pwrgate=[vdd vdd_int1 vdd_int2] analysis=[vmax]</pre>

<p>
<a id="pgfId-494556"></a>The IR drop report includes both the power supply net in the usual report file name, for example, <code>input.rpt_ir</code> and the internal power supply net is reported in a file, such as <code>input.rpt_pwg</code> or <code>input.emirtap.rpt_pwg</code> for direct and iterated methods respectively. The IR drop for the virtual power net includes the voltage drop on the global power net, the voltage over the power gate, and the voltage drop on the virtual power net. EM analysis is performed as usual, if specified. </p>
<p>
<a id="pgfId-494558"></a>In addition, an important parameter <code>Ton</code> is also reported in the <code>.rpt_pwg</code> file. It reports the time taken to power-up the terminal of the internal power supply net to 95% of the power supply level (VDD). </p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-494559"></a>The parameter <code>Ton</code> can be infinity if the internal power supply level does not reach 95% of VDD. </div>
<p>
<a id="pgfId-494557"></a>Serial power gate structures are supported. For such gate structures, not only the top-level power supply net and the internal supply net, but also the net between the serial power gates needs to be specified.</p>
<p>
<a id="pgfId-516786"></a>Complex power gate subcircuits are supported if the subcircuit terminals 0, 1, 2, 3 connect to the MOSFET terminals d, g, s, b, and if subcircuit terminals 0 and 2 connect to the global and virtual power nets. Other two-terminal devices are allowed in the subcircuit, but controlled elements and current sources inside the subcircuit are not supported. You may manually define the MOSFET subcircuit, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-516923"></a>solver mosfet_subckt=[subckt_name1 &#8230;]</pre>
<h3>
<a id="pgfId-494777"></a><a id="42145"></a>Handling the Complexity of DSPF/SPEF files</h3>
<h4>
<a id="pgfId-494778"></a><a id="61556"></a>SPF Checker</h4>

<p>
<a id="pgfId-494808"></a>The DSPF files are created with parasitic extraction tools like QRC. The content and format of a DSPF file is heavily dependent on the extraction tool and the settings. Often, simulation problems occur due to problems in the DSPF file. </p>
<p>
<a id="pgfId-477185"></a>SPF Checker is a utility which analyses a DSPF file, reports problems which may cause simulation problems, and creates an EMIR configuration file with the recommended mapping statements for EMIR analysis. In addition, it creates a configuration file for the Spectre DSPF parasitic backannotation flow (SPF).</p>
<p>
<a id="pgfId-477186"></a>The SPF checker utility can be located at <code>&lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>install_dir</em></span><code>&gt;/tools.&lt;plat&gt;/bin/spfchecker</code>.</p>
<p>
<a id="pgfId-477187"></a>The SPF checker utility can be run as follows:</p>

<a id="pgfId-477188"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
spfchecker SPF_FILE_NAME[-<strong>d</strong>etail &lt;value&gt;] [-<strong>m</strong>essage &lt;value&gt;] [-<strong>l</strong>og <code><em>LOG_FILE_NAME</em></code>] &#8211;c EMIR_CONF_NAME] [-ckt=subckt_name] [-ctl=<code><em>filename</em></code>] [+lorder licenseList] -force &#8211;<strong>h</strong>elp</pre>
<p>
<a id="pgfId-477242"></a></p>
<table class="webflareTable" id="#id477189">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id477191">
<a id="pgfId-477191"></a>Argument</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id477193">
<a id="pgfId-477193"></a>Description</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477195"></a><code>-dspf</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477197"></a>If the input is in DSPF format (default).</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477199"></a><code>-spef</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477201"></a>If the input is in SPEF format.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-478591"></a><code>-outdir &lt;dir_name&gt;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-478593"></a>Set the output directory for the checker results. Default is <code>.</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477203"></a><code>-detail</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477205"></a>Report detailed information (statistics) for NETs whose subnodes are more than the value specified using <code>-d</code>. Default is 0.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477207"></a><code>-message</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477209"></a>Set the maximum number of messages for each type of error. Default is 50.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477211"></a><code>-log name</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477213"></a>Set the checker log file name. If this argument is not specified, a file with the name<code> SPF_FILE_NAME.chklog</code> is created by default.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477215"></a><code>-c name</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477217"></a>Create the EMIR configuration file. If this argument is not specified, a file with the name <code>SPF_FILE_NAME.emir_conf</code> is created by default.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-478610"></a><code>-opt name</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-478612"></a>Create a back annotation option file. If this argument is not specified, a file with the name <code>SPF_FILE_NAME.stitch_opt </code>is created by default.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477219"></a><code>-ckt subckt</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477221"></a>Define the subcircuit scope. Default is the first subcircuit definition found.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477223"></a><code>+lorder</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477225"></a>Specify the license checkout order. The default checkout order is <code>PRODUCT:MMSIM</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477227"></a><code>-fix name</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477229"></a>Fix the common connection errors and create a new DSPF file.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477231"></a><code>-dump_cc name</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477233"></a>Dump the cross coupling capacitors into the named file</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477235"></a><code>-dump_lvl level</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477237"></a>Set the level to dump the original coupling capacitors. Default is 0.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-480077"></a><code>-force</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-480079"></a>Overwrite the previous SPF checker results.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-494852"></a><code>-ctl file</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-494854"></a>Exclude the parasitic resistors specified in the list. For example, ctl file: spf_ignore_layers = [M1 M2]</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477239"></a><code>-help</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477241"></a>Display help related to the SPF Checker utility.</p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-496045"></a>The SPF checker creates the following files:</p>
<ul><li>
<a id="pgfId-496056"></a><code>test.spf.checklog</code> - Detailed SPF checker log file</li><li>
<a id="pgfId-496063"></a><code>test.spf.spfinfo</code> - DSPF element inventory</li><li>
<a id="pgfId-496070"></a><code>test.spf.emir_conf</code> - Recommended settings for EMIR config file</li><li>
<a id="pgfId-496077"></a><code>test.spf.stitch_opts</code> - Recommended (SPICE format) settings for DSPF back annotation</li></ul>



<p>
<a id="pgfId-477243"></a>For iterated EMIR analysis, it is highly recommended to run the DSPF checker before actual EMIR simulation and include the configuration file created by the checker into the EMIR configuration file. This can be done by either copying the content or using the <code>include</code> statement in the EMIR configuration file, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-477244"></a>include test.spf.emir_conf</pre>

<p>
<a id="pgfId-494862"></a>The SPF checker can also be enabled to run automatically in an EMIR simulation by setting the following option in the EMIR config file:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-494887"></a>spf check=on</pre>
<h4>
<a id="pgfId-477303"></a><a id="14785"></a>Port Order Handling</h4>

<p>
<a id="pgfId-477304"></a>When setting up the EMIR simulation, you need to ensure that the subcircuit port order in the DSPF file matches the port order of the instance call in the top-level netlist. At times, there may be cases where the port order between the top-level instance call and the DSPF subcircuit do not match. For such cases, the following three solutions are available:</p>
<ol><li>
<a id="pgfId-477305"></a>Manually change the port order of the instance call in the top-level netlist to match the port order in the DSPF subcircuit call.</li><li>
<a id="pgfId-477306"></a>When setting up the simulation in ADE, copy the port order from the DSPF file to the CDF <code>termOrder</code> of the related cell and switch the cell view of this cell to the DSPF file using the <em>Specify SPICE source File</em> option. The netlister uses the CDF <code>termOrder</code> and creates the same order in the instance call.</li><li>
<a id="pgfId-477307"></a>Reuse the instance call from the pre-layout schematic netlist, and read in the pre-layout schematic netlist to the DSPF file. In addition, use the <code>.dspf_include</code> option (instead of <code>.include</code>), which provides advanced functionality for port order mapping, as follows.<br /><pre class="webflare-pre-block webflare-courier-new" id="#id484872">
<a id="pgfId-484872"></a>.dpsf_include file.spf  port_order=[spf|sch] extra_port=[true|false] bus_delim=&quot;busdelim_schematic [busdelim_parasitic]&quot; case_sensitive=[true|false]</pre>
<a id="pgfId-477309"></a>If you use <code>.dspf_include</code>, the following rules apply:<ul><li>
<a id="pgfId-477310"></a>The subcircuit description is taken from the DSPF file even if the same subcircuit description is available in the schematic netlist.</li><li>
<a id="pgfId-477311"></a>Depending on the <code>port_order</code> option, the port order of the subcircuit definition is taken from the pre-layout schematic netlist or from the DSPF file subcircuit definition, as shown below.<ul><li>
<a id="pgfId-477312"></a><code>port_order=sch</code> &#8211; (Default). The port order is taken from schematic subcircuit definition. The same port number and names are required. If the schematic subcircuit definition is not available, a warning is issued in the log file, and DSPF port order is used. </li><li>
<a id="pgfId-477313"></a><code>port_order=spf</code> &#8211; The port order is taken from the DSPF subcircuit definition.</li></ul></li><li>
<a id="pgfId-477314"></a>By default, the extra ports in the DSPF or schematic subcircuit definition cause the simulation to stop. However, the <code>extra_port</code> option enables a special handling of extra subcircuit ports.<ul><li>
<a id="pgfId-477315"></a><code>extra_port=false</code> &#8211; (Default) The port number in the schematic and the DSPF file needs to be the same. If not, the simulation will stop.</li><li>
<a id="pgfId-477316"></a><code>extra_port=true</code> &#8211; The extra ports in the DSPF subcircuit call are changed to internal nodes. In addition, the extra ports in the schematic subcircuit definition are connected to nodes with the same name in the DSPF netlist, otherwise, they will be floating. A report is issued in the log file containing information on the subcircuit ports that do not match and how to handle them.</li></ul></li><li>
<a id="pgfId-484328"></a>The <code>bus_delim</code> option enables you to map the bus delimiter between the schematic and DSPF|SPEF files. This option defines the bus delimiter in the schematic netlist, and optionally the bus delimiter in the DSPF file. By default, the bus delimiter of the DSPF file is automatically taken from the DSPF file header (that is, <code>*|BUSBIT []</code> or <code>*|BUS_DELIMITER []</code>). If the bus delimiter is not defined in the parasitic file header, you need to specify it in the <code>dspf_include</code> <code>bus_delim</code> statement. If both are specified, then the parasitic file bus delimiter is taken from the <code>dspf_include</code> <code>bus_delim</code> option.<ul><li>
<a id="pgfId-484283"></a><code>bus_delim=&quot;&lt;&gt;&quot;</code> &#8211; <code>A</code> <code>&lt;1&gt;</code> is mapped to <code>A_1</code> in the DSPF file, if the bus delimiter in the DSPF file header is <code>_</code>.</li><li>
<a id="pgfId-477319"></a><code>bus_delim=&quot;@</code> <code>[]&quot;</code> &#8211; <code>A@1</code> is mapped to <code>A[1]</code> in the DSPF file<code>.</code></li></ul></li><li>
<a id="pgfId-477320"></a>By default, the DSPF file is considered case insensitive (<code>case_sensitive=false</code>). You can set the <code>case_sensitive</code> option to <code>true</code> to make the DSPF file case sensitive.</li><li>
<a id="pgfId-477322"></a>If the net contains multiple *| P split pins, the extra pins are shorted to the primary pin. In the following example, pin <code>VDD%1</code> and <code>VDD%2</code> are shorted to primary pin VDD:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id477323">
<a id="pgfId-477323"></a>*|NET VDD
*|P VDD
*|P VDD%1
*|P VDD%2</pre></li></ul></li></ol>



















<p>
<a id="pgfId-477324"></a>The following table lists the differences between <code>include</code> and <code>dspf_include</code>:</p>

<p>
<a id="pgfId-522814"></a></p>
<table class="webflareTable" id="#id477325">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id477327">
<a id="pgfId-477327"></a>Scenario</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id477329">
<a id="pgfId-477329"></a>include/.include</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id477331">
<a id="pgfId-477331"></a>dspf_include/.dspf_include</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477333"></a>Same subcircuit definition in the schematic netlist and DSPF file</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477335"></a>Default: Error out</p>
<p>
<a id="pgfId-477336"></a>Use <code>duplicate_subckt=warn | ignore</code> to use the last definition</p>
<p>
<a id="pgfId-477337"></a>Subcircuit content from the schematic or DSPF is taken depending on the order of the definition in the netlist</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477339"></a>Subcircuit content from DSPF is taken independent of the order of the subcircuit definition in the netlist</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477341"></a>Port order does not match between the instance call and the DSPF subcircuit definition</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477343"></a>Port order needs to be manually adjusted</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477345"></a>The <code>port_order</code> option can be used to automatically adjust the port order</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477347"></a>Port number in DSPF does not match the port number in the schematic netlist instance call</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477349"></a>Extra ports need to be removed manually</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477351"></a>The <code>extra_port</code> option can be used to automatically handle extra ports.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477353"></a>Multiple DSPF files are included with the same subcircuit definition</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477355"></a>Default: Error out</p>
<p>
<a id="pgfId-477356"></a>Use the <code>duplicate_subckt= warn | ignore</code> to use the last subcircuit definition</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477358"></a>Default: Error out</p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-477359"></a>Duplicated DSPF subcircuit definition is not supported.</div>

</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477362"></a><code>*|NET</code> contains multiple pins</p>
<p>
<a id="pgfId-477363"></a><code>*|NET VDD<br />*|P VDD<br />*|P VDD%1<br />*|P VDD%2</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477365"></a>Pins need to be shorted manually</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-477367"></a>Pins are automatically shorted.</p>
<p>
<a id="pgfId-477368"></a>Pin <code>VDD%1</code> and <code>VDD%2</code> are automatically shorted to pin <code>VDD</code>.</p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-477369"></a>Additionally, <code>dspf_include</code> reads all the DSPF lines starting with <code>* (*|NET, *|I, *|P, *|S)</code>, while <code>include</code> considers all related lines as comments. This enables <code>dspf_include</code> to fix the connectivity of broken nets, which cannot be done with <code>include</code>.</p>

<h4>
<a id="pgfId-471838"></a><a id="15720"></a>SPEF Netlist Support</h4>

<p>
<a id="pgfId-471852"></a>The Spectre EMIR solution also supports SPEF postlayout netlists. Unlike the DSPF files, the SPEF netlist always contains the combination of a schematic netlist with the active devices and the SPEF netlist with the parasitic element information. Mismatches on the subcircuit instance names related to leading X&#39;s are automatically detected and resolved. Use the <code>spef_include</code> statement to include an SPEF file in the schematic netlist, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-471892"></a><code>spef_include &quot;example.spef&quot; inst=&quot;I0&quot;&#160;&#160;      (Spectre Syntax)</code></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-471893"></a><code>.spef_include &quot;example.spef&quot; inst=&quot;I0&quot;&#160;&#160;     (SPICE Syntax)</code></pre>

<p>
<a id="pgfId-471895"></a>The SPEF flow uses the same EMIR control file as in the DSPF flow. You also need to specify the control file on the Spectre command line with the <code>+emir=emir.config</code> statement.</p>

<h3>
<a id="pgfId-494937"></a><a id="71161"></a>Advanced Analyses</h3>
<h4>
<a id="pgfId-465464"></a><a id="67845"></a>Signal Net IR Drop Analysis</h4>

<p>
<a id="pgfId-494954"></a>IR drop analysis (<code>analysis=[vmax vavg]</code>) is typically applied to power nets that are driven by voltage sources, which provides a constant reference voltage over the EMIR window. Spectre EMIR solution also allows IR drop analysis on signal nets (<code>analysis=[sigvmax sigvavg]</code>). Unlike power nets, signal nets are mostly not driven by voltage source. Therefore, defining the reference voltage is difficult. You can use the following methods to define the reference voltage:</p>
<ul><li>
<a id="pgfId-517106"></a><code>reftype=max</code> - Use the maximum voltage of all nodes at each time point.</li><li>
<a id="pgfId-517187"></a><code>reftype=avg</code> - Use the average voltage over all nodes at each time point (default).</li><li>
<a id="pgfId-536877"></a><code>reftype=pin</code> <code>findsrc=true</code> - For the given nets, use the vsource connected to <code>*|P</code> node.</li><li>
<a id="pgfId-536986"></a><code>reftype=pin</code> <code>findsrc=false</code> - For the given nets, use the <code>*|P</code> node as the reference, and not vsource.</li><li>
<a id="pgfId-517280"></a><code>refnode=</code><span class="webflare-courier-new" style="white-space:pre"><em>name</em></span> - Use the specified sub node of <code>*|NET</code> as reference.</li><li>
<a id="pgfId-517350"></a><code>vref=</code><span class="webflare-courier-new" style="white-space:pre"><em>value</em></span> - Use the specified voltage as reference.</li></ul>






<h4><em>
<a id="pgfId-517431"></a>Example</em></h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-517444"></a>net name=[X1.SIG] analysis=[sigvmax] refnode=[SIG:1]</pre>

<p>
<a id="pgfId-517462"></a>In the above example, the signal net IR drop analysis is performed for the nets <code>X1.SIG</code>. The maximum IR drop for all subnodes of this net are reported, and the voltage value of <code>SIG:1</code> is used as the reference voltage.</p>
<p>
<a id="pgfId-465478"></a>When using <code>reftype=max</code> for a net with three subnodes: <code>net1:1 (1V)</code>, <code>net1:2 (2V)</code>, and <code>net1:3 (3V)</code>, the detected reference voltage will be 3V, and the IR drop calculated will be 2V for <code>net1:1</code>, 1V for <code>net1:2</code>, and 0V for <code>net1:3</code>. When using <code>reftype=avg</code> the reference voltage will be 2V, and the IR drop calculated will be 1V for <code>net1:1</code>, 0V for <code>net1:2</code>, and -1V for <code>net1:3</code>. </p>
<p>
<a id="pgfId-480299"></a>The signal net IR drop analysis is automatically changed to a regular IR drop analysis (<code>vmax</code>), if <code>vref=value</code> is specified, or if the net (during the EMIR time window) is driven by a constant voltage source.</p>

<h4>
<a id="pgfId-475665"></a><a id="12346"></a>Design Resistor EM Current Analysis</h4>

<p>
<a id="pgfId-475687"></a>By default, the EM current analysis is only performed on parasitic resistors defined in the RC net section of the DSPF file. If required, Spectre EMIR solution allows EM analysis to be performed for design resistors in the DSPF instance section, as shown below. This analysis can be applied to primitive resistor elements, or resistors defined with subcircuit definitions.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-475689"></a>net design_res_models=[resistor] analysis=[iavg] (primitive resistor)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-475690"></a>net design_res_models=[name=rhim] analysis=[iavg] (resistor subckt rhim)</pre>

<p>
<a id="pgfId-475736"></a>For design resistors, parameters <code>$l</code>, <code>$w</code>, and <code>$lvl</code> are expected to be defined for primitive resistor calls, and <code>l</code> and <code>w</code> for subcircuit resistor calls in the DSPF instance section. When the parameter names are inconsistent in the DSPF file, name mapping rules can be specified in the EMIR configuration file, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-475694"></a>net design_res_models=[name=rhim_m l=lr w=wr] analysis=[iavg]</pre>

<p>
<a id="pgfId-475696"></a>Layer information and units for <code>l</code> and <code>w</code> can be defined in the EMIR configuration file, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-475698"></a>net design_res_models=[name=rhim_m layer=mt1 unit=1] analysis=[iavg]</pre>

<p>
<a id="pgfId-484716"></a>The product of design resistor <code>W/L</code> * <code>unit</code> defines <code>W/L</code> in meter. The default value of <code>unit</code> is 1. </p>
<p>
<a id="pgfId-495955"></a>The EM results related to design resistor are reported in the <code>design.rpt_em</code> file, as shown below.</p>

<p>
<a id="pgfId-475679"></a></p>
<div class="webflare-div-image">
<img width="668" height="78" src="images/chap13-17.gif" /></div>

<p>
<a id="pgfId-495941"></a>If the layer name is not specified, but a resistor model name is defined, then the resistor model name is reported as the layer name.</p>
<p>
<a id="pgfId-537143"></a>By default, Spectre EMIR evaluates the current on the first terminal of the design resistor. However, you can define the index of the design resistor terminal you want the current to be evaluated at, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-537145"></a>net design_res_models=[name=rhim_m term=3] analysis=[iavg]</pre>
<h4>
<a id="pgfId-495076"></a><a id="80850"></a>Static EMIR A<a id="static_emir"></a>nalysis</h4>

<p>
<a id="pgfId-495116"></a>Static EMIR analysis enables you to evaluate IR drop and EM currents based on the specified current consumptions for subcircuit instances without running a transient or DC simulation. The specified currents are distributed to the tap devices based on the width and length ratios of devices in the design. The IR drop and EM current analysis is performed based on the current at each tap device.</p>
<p>
<a id="pgfId-495078"></a>To enable static EMIR analysis, you need to use the <code>static</code> <code>ifile</code> option in the EMIR configuration file, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-495079"></a><code>net name=[I1.VDD I1.VSS] analysis=[vavg iavg]<br />static ifile=&quot;static_currents.txt&quot; </code></pre>

<p>
<a id="pgfId-495080"></a>For static EMIR analysis, <code>vmax</code> and <code>vavg</code> for IR drop and <code>imax</code>, <code>irms</code>, and <code>iavg</code> values for EM currents remain the same, and therefore, just one can be selected in the statement.</p>
<p>
<a id="pgfId-495081"></a>The subcircuit instance currents are defined (in A) in the <code>static_currents.txt</code> file with the subcircuit instance name, subcircuit port name, and the current flowing in the port. This current is distributed to all MOSFET tap devices. No current distribution is done for non-MOSFET tap devices. In that case, these devices are excluded from the block-level based current distribution. The following is an example of the file:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-495127"></a>I1 VDD 0.001<br />I1.I2 VDD 0.005<br />I1.I2/I3 VDD 0.00001<br />I1.I2.I3/I4 VDD 0.000005<br />I1 VSS -0.005<br />I1.MPM1@19 VDD 0                //exclude tap device from current assignment<br />I1.MPM3@15 VDD 0.0001           //define tap device current,exclude from current                                   assignment<br />x0.QQ0 VSS 0.1 b&#160;&#160;              //define current for non-MOSFET device and terminal</pre>

<p>
<a id="pgfId-495083"></a>The accuracy of static EMIR analysis strongly depends on the detailed current information provided in <code>static_ifile</code>. Therefore, it is highly recommended to provide the current consumption for every subcircuit instance.</p>
<p>
<a id="pgfId-495084"></a>The results of static EMIR analysis are written to the same IR drop and EM current text reports, and into the same EM binary database as dynamic EMIR analysis.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-495085"></a>Only one of static or dynamic EMIR analysis can be performed from the same simulation session, and not both. When you run an static EMIR analysis, all other Spectre analyses, such as <code>dc</code> and <code>tran</code> are ignored.</div>
<p>
<a id="pgfId-495086"></a>Static EMIR analysis can also be applied to designs with power gates. For this, you need to specify the <code>pwrgate</code> option, as follows:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-495087"></a>net name=[I1.VDD] analysis=[vavg iavg]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-495088"></a>static ifile=&quot;static_currents.txt&quot; </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-495089"></a>net pwrgate=[I1.VDD I1.VDD_INT] analysis=[vavg iavg]</pre>

<p>
<a id="pgfId-495090"></a>You need to specify the power gate current in the <code>static_currents.txt</code> file, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-495091"></a>I1 VDD 0.001<br />I1 VDD_INT 0.0005</pre>

<p>
<a id="pgfId-495092"></a>The static EMIR current file for the top-level EMIR subcircuit can be generated while running a dynamic EMIR analysis by using the <code>output=power</code> option in the time window statement.</p>

<h4>
<a id="pgfId-495158"></a><a id="21887"></a>Static Power Grid Solver</h4>

<p>
<a id="pgfId-495159"></a>Static Power Grid Solver (SPGS) can be used to calculate pin-to-tap resistances based on the description of a DSPF file and the options set in a EMIR configuration file. The resistances calculated by SPGS are electrically-equivalent resistances, and not the summation of resistors. The calculation assumes that all pins are connected together to form a global pin. After calculation, the resistance between the global pin and all taps is generated and listed based on the significance of their values.</p>
<p>
<a id="pgfId-495160"></a>The definition of pin, subnodes, and taps is defined in the DSPF file, as shown below:</p>

<p>
<a id="pgfId-495167"></a></p>
<div class="webflare-div-image">
<img width="668" height="230" src="images/chap13-18.gif" /></div>

<p>
<a id="pgfId-495168"></a>The static EMIR analysis is enabled with the <code>spgs net=...</code> statement in the EMIR configuration file. The net statement defines the power nets to be analyzed.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-495169"></a>spgs net=[i1.vcc i1.vss]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-495170"></a>spgs pwrgate = [i1.vcc i1.outp]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-537230"></a>spgs maxrpt=200</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-537231"></a>spgs filter_res_threshold=50</pre>

<p>
<a id="pgfId-495173"></a>If the power net contains a power gate, then the <code>pwrgate</code> option needs to be specified. You can optionally use the <code>rshort</code> option to short the resistors in the power net based on their resistor value. In addition, the report can be limited to the top 200 paths, and any path with less than 50 Ohms can be filtered out. </p>
<p>
<a id="pgfId-495174"></a>The SPGS flow requires the DSPF file to be included in the Spectre input file with the <code>dspf_include</code> statement, as shown below. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-495175"></a>dspf_include &quot;pll.spf&quot;</pre>

<p>
<a id="pgfId-495176"></a>The power nets need to be connected to the voltage sources, and the device models need to be defined for the devices in the instance section in the DSPF file. The SPGS feature is run as in the regular EMIR flow, as follows.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-495177"></a>spectre +aps input.scs +emir=spgs.conf</pre>

<p>
<a id="pgfId-495178"></a>The SPGS report provides a list of pin-to-tap node resistors ordered from highest to lowest. The W/L column either show the MOSFET W/L ratio or the NFIN/L ratio.</p>

<p>
<a id="pgfId-495229"></a></p>
<table class="webflareTable" id="#id495180">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-495182"></a><code>Count</code></p>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-495184"></a><code>R</code></p>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-495186"></a><code>W/L</code></p>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-495188"></a><code>(x:y)</code></p>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-495190"></a><code>(x:y) in GDSII</code></p>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-495192"></a><code>name</code></p>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-495194"></a><code>#1</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-495196"></a><code>1920.2579</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-495198"></a><code>5.00</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-495200"></a><code>(1440:366)</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-495202"></a><code>(1440:366)</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-495204"></a><code>xI107/mxP1:BULK</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-495206"></a><code>#2</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-495208"></a><code>1577.1482</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-495210"></a><code>10.00</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-495212"></a><code>(1440:476)</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-495214"></a><code>(1440:476)</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-495216"></a><code>xsvdc/mxP3@3</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-495218"></a><code>#3</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-495220"></a><code>1353.6123</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-495222"></a><code>4.00</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-495224"></a><code>(1440:509)</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-495226"></a><code>(1440:509)</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-495228"></a><code>xsvdc/mxP2:SRC</code></p>
</td>
</tr>
</tbody></table>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-495230"></a>It is recommended to run the SPGS feature separately and not together with any other EMIR analysis. </div>
<p>
<a id="pgfId-495231"></a>SPGS also supports the conversion between pin, tap node, and sub node. The following statements convert tap node <code>MPM3@44:s</code> of net <code>I1.vdd</code> to a pin, and sub node <code>VDD:5</code> to a tap node.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-495232"></a>spgs tap2pin net=[i1.vdd] include=[MPM3@44:s]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-495233"></a>spgs sub2tap net=[i1.vdd] include=[VDD:5]</pre>

<p>
<a id="pgfId-531517"></a>All conversion options are described in the EMIR configuration file option table. The conversion options are processed incrementally. This enables you to first move all tap nodes to subnodes, and to move nodes of interest back to tap nodes.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-531519"></a>spgs tap2sub net=[i1.VSS] include=[VSS:*]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-531520"></a>spgs sub2tap net=[i1.VSS] include=[VSS:82305002 VSS:63148225]</pre>

<p>
<a id="pgfId-495235"></a>SPGS can be applied to signal nets. If the signal net contains a pin definition (<code>*|P</code>), then the effective resistance is calculated starting from the pin. If the signal net does not contain any pin definition, then the resistance calculation is started from the first tap device connection (<code>*|I</code>) for this net in the DSPF file. The conversion options also apply to signal nets.</p>
<p>
<a id="pgfId-517972"></a>By default, the SPGS flow requires the full EMIR simulation setup including the DSPF file, device models, stimuli, and power supply definitions. A higher performance-simplified SPGS flow is available which just requires the DSPF file in addition to either an instance call of the DSPF subcircuit, or a <code>+top</code> using the DSPF subcircuit name. The simplified flow does not require any device models, stimuli, or power supply definitions. It can be enabled with the following option:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-518050"></a>spgs test_bench_less=1</pre>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-518065"></a>The simplified SPGS flow has the limitation that it cannot be applied to designs with power gates. For such requirements, you need to use the full SPGS flow.</div>
<p>
<a id="pgfId-531559"></a>By default, the SPGS flow solves nets in parallel (<code>emirutil rcsolve_multi_proc=on</code>). Individual nets are solved, either with single thread (small nets), or with multi-thread (large nets).</p>

<h3>
<a id="pgfId-495279"></a><a id="42584"></a>Advanced EMIR Features</h3>
<h4>
<a id="pgfId-477658"></a><a id="40325"></a>Blackbox Ha<a id="emir_blackbox"></a>ndling</h4>

<p>
<a id="pgfId-477659"></a>The Spectre EMIR flow supports the blackbox approach, which allows the exclusion of blocks from parasitic extraction and EMIR analysis. These blocks are represented in the simulation with a pre-layout netlist, and have only an instance call and an empty subcircuit definition in the DSPF netlist.</p>

<p>
<a id="pgfId-477712"></a></p>
<div class="webflare-div-image">
<img width="668" height="301" src="images/chap13-19.gif" /></div>

<p>
<a id="pgfId-477713"></a>Blackbox handling is enabled by specifying the subcircuit name after the <code>blackbox</code> keyword in the <code>dspf_include</code> statement, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-477714"></a>.dpsf_include &quot;top.spf&quot;&#160;&#160;&#8230; blackbox=&quot;black_box&quot;</pre>

<p>
<a id="pgfId-480348"></a>For the blackbox subcircuit instances, Spectre takes the port order from the DSPF subcircuit definition, and the content from the schematic (blackbox) subcircuit definition. This behavior is fixed. The <code>port_order</code> option of the <code>dspf_include</code> statement has no impact on the blackbox port order.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-477715"></a>You can specify multiple subcircuits. The <code>extra_port</code> option also applies to the blackbox subcircuit ports. </div>

<h4>
<a id="pgfId-480380"></a><a id="63048"></a>Creating Power Ma<a id="powermacro"></a>cro Models</h4>

<p>
<a id="pgfId-480431"></a>Spectre supports the creation of power macro models that can be used in the Spectre EMIR blackbox simulation flow. These macro models describe the subcircuit port current consumption and capacitive load. They are created in Spectre language and use the subcircuit definition. The macro model creation can be enabled either in a non-EMIR Spectre simulation, or in an Spectre EMIR simulation. Both dc and tran analyses are supported.</p>
<p>
<a id="pgfId-480432"></a>To create macro models, use the <code>pwr_macro</code> statement, as follows:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-480456"></a>pwr_macro subckt=top port=[vdd X&lt;0&gt;] type=[avg rms] outdir=macrodir mode=1&#160;&#160;&#160;&#160;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-480458"></a>pwr_macro inst=i1 port=[*] type=[max] outname=macro output=[subckt table] window=[10n 20n 80n 100n]</pre>

<p>
<a id="pgfId-485838"></a>Where:</p>
<p>
<a id="pgfId-485839"></a><code>subckt</code> - specifies that the macro model is created for all instances of this subcircuit.</p>
<p>
<a id="pgfId-485840"></a><code>inst</code> - specifies that the macro model is created for the specified subcircuit instance.</p>
<p>
<a id="pgfId-485835"></a><code>port</code> - specifies the subcircuit ports that are modeled. Wildcards are supported.</p>
<p>
<a id="pgfId-485830"></a><code>type</code> - specifies the type of current measurement for defining the created port current DC source value. Supported values are <code>max</code>, <code>avg</code>, <code>avgabs</code>, and <code>rms</code>. Multiple entries are supported.</p>
<p>
<a id="pgfId-485821"></a><code>output</code> - specifies the output to be created. If you specify <code>output=subckt</code>, then the subcircuit macro model is created. This is the default. If you specify <code>output=table</code>, then a port current/capacitance table is created.</p>
<p>
<a id="pgfId-485816"></a><code>outdir</code> - specifies the output directory name (relative to simulation directory).</p>
<p>
<a id="pgfId-485817"></a><code>outname</code> - specifies the macro model file name. The file has an extension <code>.inst_name.subckt_name.type</code></p>
<p>
<a id="pgfId-480558"></a><code>mode</code> - <code>mode=1</code> creates the macro model with what/if for separate pull and push currents. This is the default. <code>mode=0</code> creates the macro model with parallel resistors.</p>
<p>
<a id="pgfId-486019"></a><code>window</code> - defines the time window for which the macro model is created. Multiple time windows are supported. One model is created for each time window. The first window has no additional extension. The second window uses 1 as additional extension, the third window uses 2, and so on. For example, <code>*.1.avg</code>, <code>*.2.avg</code>, and so on.</p>
<p>
<a id="pgfId-480626"></a>To create a power macro model in a regular (non-EMIR) Spectre simulation, the <code>pwr_macro</code> statements need to be defined in a configuration file which is read with the Spectre <code>+pwr_macro</code> command-line option. This flow also works in the Spectre EMIR flow.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-480628"></a>spectre +aps +pwr_macro=pwr_macro.conf input.ckt</pre>

<p>
<a id="pgfId-480630"></a>In addition, you can create the macro model in a Spectre EMIR simulation as part of EMIR configuration. In this case, the <code>pwr_macro</code> statements need to be defined in the EMIR configuration file which is included with the <code>+emir</code> command-line option.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-480632"></a>spectre +aps +emir=emir.conf input.ckt </pre>

<p>
<a id="pgfId-480634"></a>The following figure illustrates the macro modeling generation flow. Note that the figure shows only a simplified version of the model.</p>

<p>
<a id="pgfId-480482"></a></p>
<div class="webflare-div-image">
<img width="668" height="268" src="images/chap13-20.gif" /></div>

<p>
<a id="pgfId-481564"></a>The created macro table model is written to a file for which the extension consists of the instance name, the subcircuit name, and the type of analysis of the subcircuit block. If multiple analyses are specified, multiple macro model files are created. For example, for a macro model for instance<code> I1</code> of subcircuit <code>adc_sample_hold</code>, based on average current, the extension <code>.I1.adc_sample_hold.avg</code> will be used. </p>
<p>
<a id="pgfId-481596"></a>Macro models are generated in a regular (non-EMIR) simulation, direct EMIR analysis, and also in the first and second stages (extra <code>emirtap</code> in extension) of iterated EMIR analysis.</p>
<p>
<a id="pgfId-481552"></a>The macro model created is slightly more complex than what is shown in the simplified figure above. Since the model is later used together with other macro models in a full chip simulation, there may be a problem that some of these models feed currents into the same net, but the sum of the currents does not satisfy Kirchhoff&#39;s law. To resolve such problems, the <code>mode=1</code> macro model contains if/else sections that allow you to enable either driving (push) or driven (pull) currents. The following example shows a <code>mode=1</code> macro model for a subcircuit for which <code>vdd</code> and <code>gnd</code> have been extracted:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-481660"></a>// TITLE: Port Current Macro Model with Push and Pull Mode for subckt adc_sample_hold</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481661"></a>simulator lang=spectre</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481662"></a>// BB_MACRO_TOP PARAMETER DEFINITION</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481663"></a>// 0 ... consider push and pull currents, may cause potential KCL problems</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481664"></a>// 1 ... consider pull currents only (positive port current value)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481665"></a>// 2 ... consider push currents only (negative port current value)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481666"></a>// R_BB_MACRO_TOP defines internal serial resistor</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481667"></a>// parameters bb_macro_top=0 r_bb_macro_top=10</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481668"></a>subckt adc_sample_hold outm outp SIDDQ VDD VSS \</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481669"></a>         bias100 hold hold_test inm inm_test inp \</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481670"></a>         inp_test sample sample_test</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481671"></a>parameters bb_macro=bb_macro_top r_bb_macro=r_bb_macro_top</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481672"></a>wrongValue paramtest errorif=(bb_macro != 0 &amp;&amp; bb_macro != 1 &amp;&amp; bb_macro != 2) message=&quot;Unvalid bb_macro parameter value, valid values: 0, 1, 2&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481674"></a>// SIMULATION OF PULL AND PUSH PORT CURRENTS</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481675"></a>if (bb_macro==0) {</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481676"></a>        Rport0 (VDD VDD_int) resistor r=r_bb_macro</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481677"></a>        Iport0 (VDD_int 0) isource  dc=0.00153621</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481678"></a>        Cport0 (VDD 0) capacitor c=8.39577e-12</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481679"></a>        Rport1 (VSS VSS_int) resistor r=r_bb_macro</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481680"></a>        Iport1 (VSS_int 0) isource  dc=-0.00160214</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481681"></a>        Cport1 (VSS 0) capacitor c=1.14779e-12</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481682"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481683"></a>// SIMULATION OF PULL PORT CURRENTS ONLY</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481684"></a>} elseif (bb_macro==1) {</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481685"></a>        Rport0 (VDD VDD_int) resistor r=r_bb_macro</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481686"></a>        Iport0 (VDD_int 0) isource  dc=0.00153621</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481687"></a>        Cport0 (VDD 0) capacitor c=8.39577e-12</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481688"></a>        Rport1 (VSS VSS_int) resistor r=r_bb_macro</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481689"></a>        Vport1 (VSS_int 0) vsource  dc=0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481690"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481691"></a>// SIMULATION OF PUSH PORT CURRENTS ONLY</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481692"></a>} elseif (bb_macro==2) {</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481693"></a>        Rport0 (VDD VDD_int) resistor r=r_bb_macro</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481694"></a>        Vport0 (VDD_int 0) vsource  dc=0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481695"></a>        Rport1 (VSS VSS_int) resistor r=r_bb_macro</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481696"></a>        Iport1 (VSS_int 0) isource  dc=-0.00160214</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481697"></a>        Cport1 (VSS 0) capacitor c=1.14779e-12</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481698"></a>}</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481699"></a>ends adc_sample_hold</pre>

<p>
<a id="pgfId-481735"></a>You can specify the option <code>bb_macro_top</code> in your top-level netlist, and also specify which macro model mode to use. If <code>bb_macro_top</code> is set to 0, then all macro model port currents are activated. If <code>bb_macro_top</code> is set to 1, only pull currents are modeled. If <code>bb_macro_top</code> is set to 2, then only push currents are considered. In addition, the value of serial resistor <code>r_bb_macro_top</code> for current and voltage sources in the macro model needs to be defined at the top level.</p>
<p>
<a id="pgfId-481737"></a>The alternative <code>mode=0</code> macro model overcomes the potential KCL problem by adding a parallel resistor. The value of the parallel resistor and the voltage are extracted from the simulation during which the model is generated. The following example shows the <code>mode=0</code> macro model for the same subcircuit.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-481739"></a>simulator lang=spectre</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481740"></a>pwr_macro_opt options preserve_subckt=[adc_sample_hold]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481741"></a>subckt adc_sample_hold outm outp SIDDQ VDD VSS \</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481742"></a>         bias100 hold hold_test inm inm_test inp \</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481743"></a>         inp_test sample sample_test</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481744"></a>        parameters vavg_VDD=2.5 rmacro_VDD=32.8738</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481745"></a>        Iport0 (VDD 0) isource  dc=0.0015325 - vavg_VDD/rmacro_VDD</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481746"></a>        Cport0 (VDD 0) capacitor c=8.39538e-12</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481747"></a>        Rport0 (VDD 0) resistor  r=rmacro_VDD</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481748"></a>        parameters vavg_VSS=0 rmacro_VSS=216.051</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481749"></a>        Iport1 (VSS 0) isource  dc=-0.00158744 - vavg_VSS/rmacro_VSS</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481750"></a>        Cport1 (VSS 0) capacitor c=1.14816e-12</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481751"></a>        Rport1 (VSS 0) resistor  r=rmacro_VSS</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481752"></a>ends adc_sample_hold</pre>

<p>
<a id="pgfId-481820"></a>In addition to the macro models, you can also generate a table with port current and capacitance values. The values are written to a file with the extension <code>rpt_pwr_macro</code>.</p>

<p>
<a id="pgfId-481853"></a></p>
<table class="webflareTable" id="#id481858">
<tbody><tr>
<th class="webflareTh" colspan="9" rowspan="1">
<p>
<a id="pgfId-481860"></a>------------INST: &quot;I1&quot; SUBCKT &quot;adc_sample_hold&quot;-----------</p>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481878"></a><code>Port</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481880"></a><code>Imax(A)</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481882"></a><code>Iavg(A)</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481884"></a><code>Iavgabs(A)</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481886"></a><code>Irms(A)</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481888"></a><code>Cmax(F)</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481890"></a><code>Cavg(F)</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481892"></a><code>Cavgabs(F)</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481894"></a><code>Crms(F)</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481896"></a>VDD</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481898"></a>0.00315119</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481900"></a>0.00285237</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481902"></a>0.00285237</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481904"></a>0.00285231</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481906"></a>8.55353e-12</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481908"></a>8.54216e-12</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481910"></a>8.542162e-12</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481912"></a>8.54216e-12</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481927"></a>VSS</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481929"></a>-0.00364904</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481931"></a>-0.00299747</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481933"></a>0.00299747</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481935"></a>0.00301076</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481937"></a>1.38952e-12</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481939"></a>1.38169e-12</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481941"></a>1.38169e-12</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481943"></a>1.38169e-12</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481945"></a>...</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481947"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481949"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481951"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481953"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481955"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481957"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481959"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-481961"></a></p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-481982"></a>If the above table exists from a previous simulation, and the table contains all ports of the extracted subcircuit, you can use the following script to create a power macro model using the information from the table:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-481984"></a>tbl2macro test.rpt_pwr_macro -inst I2.I1 -type avg -outdir test_pwr_macro</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-481985"></a>tbl2macro test.rpt_pwr_macro -subckt bus_nand -type avg rms</pre>

<p>
<a id="pgfId-481987"></a>The script is available in the SPECTRE installation (<code>.../tools.lnx86/bin/tbl2macro</code>), and can be used as follows:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-481989"></a>tbl2macro &lt;rpt_pwr_macro&gt; [options]</pre>

<p>
<a id="pgfId-481990"></a><code>-h</code> - Print the help page</p>
<p>
<a id="pgfId-481991"></a><code>-inst &lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>inst_name</em></span><code>&gt;</code> - Name of the instance (OR)</p>
<p>
<a id="pgfId-481992"></a><code>-subckt &lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>subckt_name</em></span><code>&gt;</code> - Name of the subcircuit</p>
<p>
<a id="pgfId-481993"></a><code>-out &lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>out_dir</em></span><code>&gt;</code> - Name of the output directory name (default is .)</p>
<p>
<a id="pgfId-481994"></a><code>-type &lt;list&gt;</code> -- List of <code>max</code>, <code>avg</code>, <code>avgabs</code>, and <code>rms</code> (default is all)</p>
<p>
<a id="pgfId-481995"></a><code>-fmt &lt;spice|spectre&gt;</code> -- Output format (default is <code>spectre</code>)</p>
<p>
<a id="pgfId-481996"></a><code>-mode &lt;0|1&gt;</code> - 0 means parallel resistor model, and 1 means what/if push-and-pull model (default is 1)</p>

<h4>
<a id="pgfId-518172"></a>Hierarchic<a id="hier_emir"></a>al EMIR</h4>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-539545"></a>The Spectre Hierarchical EMIR flow is not available in production yet. It is rather available as part of an early adopter program (EAP). If you are interested in this flow, contact your Cadence support team.</div>
<p>
<a id="pgfId-518195"></a>The hierarchical EMIR flow requires special features in Quantus RC extraction, the Spectre EMIR circuit simulation, and the <em>Voltus-Fi XL </em>visualization. In this section, the Spectre EMIR-related features are described. For a full hierarchical EMIR flow description, refer to the <em>Voltus-Fi </em>user manual.</p>
<p>
<a id="pgfId-518229"></a>The hierarchical EMIR flow combines the top-level DSPF description with one or multiple block-level DSPF descriptions into one hierarchical EMIR simulation. It enables you to customize the connections between top-level and block-level DSPF, and use different block-level abstraction levels for trading in accuracy versus performance. The target of the hierarchical flow is to enable the required EMIR capacity for large designs, which cannot be handled by iterated method. The target accuracy depends on the block-level abstraction being used; however, the hierarchical EMIR accuracy is always less than the iterated method accuracy. In addition, you should include proper block-level current profiles into the top-level simulation. For example, if the block-level current profile was created from a disabled (non-oscillating) PLL simulation, but the top-level simulation expects an enabled (oscillating) PLL, then, the top-level simulation will produce wrong results. Same is true if time windows between top and block level are different, or activities appear at different times in block and top-level simulation.</p>
<p>
<a id="pgfId-518379"></a>The hierarchical EMIR flow in Spectre is enabled by defining the block-level DSPF instances in the <code>dspf_include</code> setup of the top-level DSPF file, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-518415"></a>dspf_include &quot;toplevel.dspf&quot; hier_inst=&quot;XI1 XI2&quot;</pre>

<p>
<a id="pgfId-518431"></a>The connection between the top-level and block-level DSPF is not defined by the subcircuit ports, but by <code>*|I</code> definitions in the top-level DSPF, which define the connection from the top level to block level. Spectre EMIR reports all identified top - block level DSPF connections in the file <code>hier_coupled_nets.txt</code> in the Spectre output directory. The following figure shows an example of such <code>*|I</code> definition.</p>

<p>
<a id="pgfId-518543"></a></p>
<div class="webflare-div-image">
<img width="668" height="409" src="images/chap13-21.gif" /></div>

<p>
<a id="pgfId-518525"></a>The block-level modeling in Spectre EMIR supports three abstraction levels:</p>
<ul><li>
<a id="pgfId-518575"></a>Transistor-level DSPF</li><li>
<a id="pgfId-518598"></a>DSPF with tap device current profile &#8211; tap devices modeled with their current waveform</li><li>
<a id="pgfId-518689"></a>DSPF with subcircuit port current profile &#8211; DSPF subcircuits ports are modeled with the current waveforms.</li></ul>


<p>
<a id="pgfId-518812"></a>Only the transistor-level DSPF block-level approach models the circuit functionality. That is, the oscillation of a PLL. If the current profiles are used, only the current consumption of the tap devices or subcircuit ports are modeled, but the circuit behavior of the block is disabled in the hierarchical EMIR simulation.</p>
<p>
<a id="pgfId-518814"></a>Before a hierarchical EMIR simulation with current profile for tap devices/subcircuit ports is run, the current profile (current waveforms) must be created by running the Spectre EMIR iterated method on this block-level design. The current profile generation is enabled with the following option in the EMIR config file:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-518896"></a>solver save_tapi=DiffOpAmp.tapi</pre>

<p>
<a id="pgfId-518922"></a>It enables the writing of a binary PWL file into the Spectre output directory under the <code>&lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>design</em></span><code>&gt;.emirtap</code> directory, which contains the tap device and subcircuit terminal name, the tap device and subcircuit port current pwl data from the second stage, the average R and C for the tap devices, and the time varying <code>Ron</code> for all power gates. </p>
<p>
<a id="pgfId-518924"></a>The equivalent circuit used for the tap device replacement is shown in the following figure:</p>

<p>
<a id="pgfId-519024"></a></p>
<div class="webflare-div-image">
<img width="581" height="205" src="images/chap13-22.gif" /></div>

<p>
<a id="pgfId-519028"></a>The current profile PWL file is read into the full-chip simulation by specifying the PWL file using <code>dspf_include</code> for the block-level DSPF:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-519030"></a>dspf_include &quot;DiffOpAmp.dspf&quot;&#160;&#160;tapi_pwl=&quot;DiffOpAmp.tapi&quot;</pre>

<p>
<a id="pgfId-519009"></a>Alternatively, you may manually create ASCII pwl current files and include them in the full-chip simulation. This may be useful for modeling port currents, but not for tap device currents. The format of these ASCII files should be the following:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-519105"></a>DC format: AVDD 1e-2</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-519106"></a>PWL format: AVDD 0 1e-2 10ns 1e-2 20ns 1e-2</pre>

<p>
<a id="pgfId-519124"></a>The user-created ASCII pwl current file can be included in the full chip simulation using <code>dspf_include</code> for the block-level DSPF, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-519201"></a>dspf_include &quot;DiffOpAmp.dspf&quot;&#160;&#160;tapi=&quot;DiffOpAmp.pwl&quot;</pre>

<p>
<a id="pgfId-519220"></a>Once the current profile PWL files are generated, all three hierarchical EMIR flows can be simulated. To differentiate between tap device current and port current modeling, the following option can be used:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-519266"></a>solver hier_inst_bbox = 1</pre>

<p>
<a id="pgfId-519288"></a>If the value is set to <code>0</code> (default), then tap device currents are used. If the value is set to <code>1</code>, port currents are used.</p>
<p>
<a id="pgfId-519290"></a>The following figure shows the three hierarchical EMIR flows including the options enabling them.</p>

<p>
<a id="pgfId-519490"></a></p>
<div class="webflare-div-image">
<img width="586" height="276" src="images/chap13-23.gif" /></div>

<p>
<a id="pgfId-519281"></a>Since the block-level PWL current waveform files are binary, you may use the <code>emirutil</code> utility to extract data from the PWL current file.</p>
<ul><li>
<a id="pgfId-519538"></a>List the PWL file content<br /><pre class="webflare-pre-block webflare-courier-new" id="#id519622">
<a id="pgfId-519622"></a>emirutil -listpwl DiffOpAmp.pwl</pre></li><li>
<a id="pgfId-519561"></a>Dump PWL file content<br /><pre class="webflare-pre-block webflare-courier-new" id="#id519651">
<a id="pgfId-519651"></a>emirutil -dumppwl DiffOpAmp.pwl -net iAVSS      //saves AVSS port current waveform</pre><pre class="webflare-pre-block webflare-courier-new" id="#id519666">
<a id="pgfId-519666"></a>emirutil -dumppwl DiffOpAmp.pwl -net vAVSS     // saves AVSS port voltage waveform</pre></li><li>
<a id="pgfId-519584"></a>Create GNUPLOT graph for PWL data     // plot current waveform for <code>MNM0@5</code><br /><pre class="webflare-pre-block webflare-courier-new" id="#id519772">
<a id="pgfId-519772"></a>emirutil -dumppwl DiffOpAmp.pwl -net &#39;iMNM0@5:s&#39; -g</pre><pre class="webflare-pre-block webflare-courier-new" id="#id519787">
<a id="pgfId-519787"></a>gnuplot -p DiffOpAmp.pwl.iMNM0@5:s.plt</pre></li></ul>







<p>
<a id="pgfId-519871"></a>The hierarchical EMIR flow has the following limitations:</p>
<ul><li>
<a id="pgfId-519889"></a>Block-level and top-level simulation setup needs to be consistent &#8211; should have same subcircuit, port, device, and terminal names.</li><li>
<a id="pgfId-519904"></a>Hierarchical flow works only with the iterated method. Direct method is not supported for block-level and top-level hierarchical simulation.</li><li>
<a id="pgfId-519919"></a>Block-level PWL current generation does not show the impact from the top-level environment. It may introduce a large error since the tap device bias and the RC load is different in block-level and top-level simulation. The error will be much bigger than the error in iterated method, but sufficient for top-level verification.<br />
<a id="pgfId-520062"></a><div class="webflare-div-image">
<img width="668" height="170" src="images/chap13-24.gif" /></div></li></ul>






<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-520041"></a>Ensure that the PWL current file used in the top-level hierarchical simulation matches the top-level requirements. If that is not done, the hierarchical EMIR results may be incorrect.</div>
<p>
<a id="pgfId-531833"></a>Static EMIR analysis and static power grid solver (SPGS) works in the hierarchical EMIR flow. They do not require any PWL current file.</p>

<h4>
<a id="pgfId-482268"></a><a id="76703"></a>What-If EM<a id="whatif_emir"></a>IR Analysis</h4>

<p>
<a id="pgfId-482290"></a>The What-If analysis enables you to analyze the impact of potential layout changes without the need for implementing these changes in the layout, and to re-extract the DSPF file. These changes are also called ECO changes.</p>
<p>
<a id="pgfId-482292"></a>The What-If flow is supported in the regular EMIR flow using the direct or iterated method. There is also an incremental iterated flow that uses the <code>itereco</code> method. This flow reuses the circuit simulation results from a previous iterated mode EMIR analysis and reruns just the second stage EMIR analysis. </p>

<p>
<a id="pgfId-482282"></a></p>
<div class="webflare-div-image">
<img width="668" height="255" src="images/chap13-25.gif" /></div>

<p>
<a id="pgfId-482599"></a>The What-If changes are defined in an ECO file which is included in the EMIR configuration file. All ECO changes are relative to the original DSPF content. In one What-If simulation, all changes defined in the ECO file are applied together at once, and then analyzed together in the second stage of the EMIR analysis. </p>
<p>
<a id="pgfId-482600"></a>Multiple incremental ECO runs are supported. For each run, the changes defined in the ECO file are applied to the original DSPF content. Changes from previous ECO runs are not considered. In the incremental What-If analysis, only the nets with ECO changes are analyzed.</p>
<p>
<a id="pgfId-482641"></a>All ECO changes for a specific What-If run are defined in one ECO file which is included in the EMIR configuration file. The following ECO commands are supported.</p>
<ul><li>
<a id="pgfId-482650"></a><code>add_pin net=&lt;net_name&gt; name=[node1 node2 &#8230;]</code></li><li>
<a id="pgfId-482651"></a><code>add_pin net=&lt;net_name&gt; layer=[dspf_layer_name]</code></li><li>
<a id="pgfId-482652"></a><code>delete_pin net=&lt;net_name&gt; name=[node1 node2 &#8230;]</code></li><li>
<a id="pgfId-482653"></a><code>add_cap  net=&lt;net_name&gt; cap=[node1 cvalue1 node2 cvalue2 &#8230;]</code></li><li>
<a id="pgfId-482654"></a><code>add_res net=&lt;net_name&gt; node=&lt;node1 node2&gt; r=&lt;rvalue&gt; (optional: $L, $W, $A, $N,$lvl)</code></li><li>
<a id="pgfId-482655"></a><code>delete_res  net=&lt;net_name&gt; name=&lt;resistor1 resistor2 &#8230;&gt;</code></li><li>
<a id="pgfId-482642"></a><code>scale_res net=&lt;net_name&gt; name=&lt;resistor1 resistor2 &#8230;. &gt; scale=&lt;scalefactor&gt;</code></li></ul>






<p>
<a id="pgfId-482691"></a>Here:</p>
<p>
<a id="pgfId-482701"></a><code>net_name</code> is the name of the net as defined in DSPF <code>*|net</code> statement. Wildcard is not supported.</p>
<p>
<a id="pgfId-482720"></a><code>node1</code> <code>node2</code> ... are the names of pin, sub, or tap nodes. Wildcard is not supported.</p>
<p>
<a id="pgfId-482727"></a><code>cvalue1</code> <code>cvalue2</code>.. are the values of the capacitance to be added. You can use a negative value for reducing net capacitance. The value is a floating number. </p>
<p>
<a id="pgfId-482734"></a><code>rvalue</code> is the value of the resistor to be added. The value is a floating number</p>
<p>
<a id="pgfId-482741"></a><code>resistor1</code> <code>resistor2</code>... are the instance names of the resistors to be deleted or scaled.</p>
<p>
<a id="pgfId-482748"></a><code>scalefactor</code> is the scaling factor. The value is a floating number</p>
<p>
<a id="pgfId-482755"></a><code>dspf_layer_name</code> specifies that the nodes of all resistors on the specified layer are changed to pins.</p>
<p>
<a id="pgfId-482791"></a>The following is an example of an <code>emir.co</code> file:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-482813"></a>add_pin&#160;&#160;  net=[VDD] name=[VDD#9]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-482814"></a>del_res&#160;&#160;  net=[bias1] name=[Rj3652]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-482815"></a>scale_res&#160;&#160;net=[VDD] name=[Rg1 Rg2 Rg3 Rg4] scale=0.5</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-482816"></a>delete_res net=[VDD] name=[Rg5]</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-482817"></a>add_res&#160;&#160;  net=[VDD] node=[VDD#80 VDD#81] r=10 $l=10.0 $w=0.25 $lvl=mt1</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-482818"></a>add_cap&#160;&#160;  net=[VDD] cap=[VDD#80 10e-15 VDD#81 5e-15]</pre>

<p>
<a id="pgfId-482845"></a>When performing a regular iterated method EMIR analysis with What-If, the only change required in the EMIR configuration file is the reference to the ECO file, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-482847"></a>solver method=iterated</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-482848"></a>eco file=&quot;emir.eco&quot;</pre>

<p>
<a id="pgfId-482850"></a>The following statements need to be defined in the EMIR configuration file to enable an incremental What-If EMIR analysis.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-482852"></a>solver method=itereco inputwf=&quot;./input.emirtap.pwl&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-482853"></a>eco file=&quot;emir.eco&quot;</pre>

<p>
<a id="pgfId-482855"></a>In an incremental EMIR analysis, Spectre loads the following database files from the previous EMIR simulation: <code>&lt;netlist&gt;.emirtap.pdb</code>, <code>&lt;netlist&gt;.emirtap.cc</code>, <code>&lt;netlist&gt;.emirtap.pdb_2</code>, and <code>&lt;netlist&gt;.emirtap.pwl</code>. You need to ensure that these files are available in the same directory as the <code>&lt;netlist&gt;.emirtap.pwl</code> file that you define in the solver statement.</p>
<p>
<a id="pgfId-482857"></a>All ECO changes are summarized in the <code>ECO SUMMARY</code> section of the Spectre log file. The What-If EMIR flow generates exactly the same text and binary database output as any other Spectre EMIR simulation. The only difference is that the result file names of the incremental What-If analyses use the filename of the ECO file as prefix. For example, if the ECO file name is <code>emir.eco</code>, then the EM current text report file will be named <code>emir.eco.input.rpt_em</code>.</p>
<p>
<a id="pgfId-482859"></a>The Spectre What-If EMIR flow also supports a pin location file for changing subnodes to pins. This special flow is important when all subnodes in a user-specified layout area should be changed to pins. The following statements can be used in the ECO file for defining the pin location files:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-482861"></a>add_pin net=VDD loc_file=pinloc loc_threshold=0.1</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-482862"></a>add_pin net=VSS loc_file=pinloc_vss loc_threshold=0.1</pre>

<p>
<a id="pgfId-482864"></a>The <code>net</code> statement defines the DSPF net to which the pin location file is applied to, while the <code>loc_threshold </code><img width="16" height="12" src="images/chap13-26.gif" /></p><span>(unit um, default value 0.1) defines the area in which all subnodes are changed to pin. The area is defined with: </span>  <code>&lt;x+<img width="16" height="12" src="images/chap13-28.gif" />
</code><span> , </span>  <code>&lt;y+<img width="16" height="12" src="images/chap13-30.gif" />
</code><span> .</span>
<p>
<a id="pgfId-482866"></a>The pin location files define the x and y coordinates, the layer name, and whether the type is POWER or GROUND. Following is an example of the pin location file for power net VDD:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-482868"></a>#&lt;pad_name&gt; &lt;X_loc&gt; &lt;Y_loc&gt; &lt;metal name-DEF&gt; &lt;POWER or GROUND&gt;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-482869"></a>VDD:2 30.0 103.0 mt3 POWER</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-482870"></a>VDD:3 20.2150 94.2250 mt1 POWER</pre>

<p>
<a id="pgfId-482872"></a>Following is an example of the pin location file for ground net VSS:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-482874"></a>#&lt;pad_name&gt; &lt;X_loc&gt; &lt;Y_loc&gt; &lt;metal name-DEF&gt; &lt;POWER or GROUND&gt;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-482875"></a>VSS:2 15.6000 27.9600 mt1 GROUND</pre>

<p>
<a id="pgfId-520169"></a>Alternatively, all subnodes inside a bounding box may be changed to pins. This can be done by using the following option:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-520230"></a>add_pin net=VDD bbox=[lx ly ux uy] layer=[dspf_layer_name]</pre>

<p>
<a id="pgfId-520245"></a>For example:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-520262"></a>add_pin net=I1.VDD bbox=[20 80 22 86] layer=[mt1]</pre>

<p>
<a id="pgfId-520277"></a>An incremental pin addition is also supported. From a reference node <code>[x,y]</code> incrementally add/subtract <code></code><img width="16" height="12" src="images/chap13-31.gif" /></p><span>x/ </span><pre class="webflare-courier-new codeContent">
<a id="pgfId-520344"></a>add_pin net=VDD layer=metal5 ref_node=[x y] h_x=value h_y=value proxim_abstol=value </pre>

<p>
<a id="pgfId-520362"></a>For example:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-520376"></a>add_pin net=inm layer=mt3 ref_node=[105.0 105.0] h_x=8.0 h_y=-6.0 proxim_abstol=1</pre>
<h3>
<a id="pgfId-520397"></a><a id="18572"></a>Event Triggered EMIR Analysis</h3>

<p>
<a id="pgfId-520436"></a>Spectre EMIR enables you to control the EMIR time windows in the second stage of iterated method by first stage events. A measure statement may be used to define the first stage events, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-520523"></a>.meas tran blkout3 when v(TEST_INP)=&#39;vhi/2.0&#39; td=30n fall=1</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-520524"></a>.meas tran blkout4 param=&#39;blkout3+20n&#39;</pre>

<p>
<a id="pgfId-520519"></a>The created events can be used to define the time windows in the EMIR config file, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-520571"></a>time window=[@blkout3 @blkout4] net=[I101.VDD] output=none</pre>

<p>
<a id="pgfId-520586"></a>If an event is used but not available at the time of evaluation, Spectre EMIR generates an error and the simulation is stopped.</p>

<h3>
<a id="pgfId-495339"></a><a id="32232"></a>Other Features</h3>

<ul><li>
<a id="pgfId-495376"></a>EMIR analysis is performed not only for transient but also for operating point and DC analysis. All measures (for example, avg, rms, and max) are analyzed the same way as in transient EMIR analysis. This is available for both, Spectre APS direct and Spectre APS iterated methods. It is not available for Spectre XPS. If EMIR analysis is applied to a combined DC and transient analysis, then it is applied to both.</li><li>
<a id="pgfId-495368"></a>Probing of parasitic element currents, and parasitic node voltages is supported.</li><li>
<a id="pgfId-495341"></a>Negative resistors in the power and signal nets are properly handled without shorting or removing them.</li><li>
<a id="pgfId-495342"></a><code>alter</code> and <code>altergroup</code> statements are supported when using the direct method. For each <code>alter</code> and <code>altergroup</code> statements, the EMIR analysis is invoked automatically and generates EMIR reports named <code>input_tran1.rpt_ir</code>, <code>input_tran2.rpt_ir</code> and so on.</li><li>
<a id="pgfId-495344"></a>The EMIR flow supports temperature-dependent resistor definitions (TC1, TC2) in the DSPF file<br /><pre class="webflare-pre-block webflare-courier-new" id="#id495345">
<a id="pgfId-495345"></a>RRM14 a#1 a#12 0.516195 TC1=0.00265 TC2=-2.641e-07 &#8230;</pre>
<a id="pgfId-520650"></a>The effective resistor value is calculated using the following equation:<pre class="webflare-pre-block webflare-courier-new" id="#id520665">
<a id="pgfId-520665"></a>R=RNOM*(1 + TC1*(TEMP-TNOM)+ TC2*(TEMP-TNOM)(TEMP-TNOM))</pre>
<a id="pgfId-495346"></a>If TNOM is defined in the DSPF file header with the following statement<pre class="webflare-pre-block webflare-courier-new" id="#id495347">
<a id="pgfId-495347"></a>*|GLOBAL_TEMPERATURE 27</pre>
<a id="pgfId-495348"></a>then TNOM is taken from the DSPF file, otherwise TNOM is taken from the Spectre netlist. TEMP is taken either from <code>dspf_include</code> statement<pre class="webflare-pre-block webflare-courier-new" id="#id520771">
<a id="pgfId-520771"></a>dspf_include &quot;./test.dspf&quot;  temp=100</pre>
<a id="pgfId-520786"></a>or from the TEMP statement in the Spectre netlist.<br />
<a id="pgfId-520790"></a>The DSPF TNOM and the <code>dspf_include</code> TEMP statement impact only the effective DSPF resistor calculation. They do not affect any other Spectre temperature dependency.</li><li>
<a id="pgfId-463830"></a>The EMIR flow supports temperature-dependent EM rules. It reads the circuit temperature from the netlist statement, and applies it to the EM rules. <ul><li>
<a id="pgfId-463831"></a><code>temperature</code> is a predefined keyword in the <code>emData</code> file. It may be used in equations to represent the circuit temperature.</li><li>
<a id="pgfId-463832"></a>If <code>temperature</code> is defined in the <code>emData</code> file, and it does not match the temperature (<code>temp</code> value) in the netlist, an error message is generated.</li><li>
<a id="pgfId-463833"></a>If <code>temperature</code> is not defined in the <code>emData</code> file, the tool uses the temperature defined in the netlist. </li></ul></li><li>
<a id="pgfId-520886"></a>The Spectre EMIR flow can handle inductor elements in both direct and iterated methods. Direct method supports all inductor elements. In iterated method, design inductors are handled in the first stage; inductors inside subcircuit tap devices are handled using their current waveforms from the first stage, package inductors connecting to DSPF subcircuit ports are solved together with the net in the second stage solver, and parasitic inductors (not typical for DSPF) are handled by the second stage solver.</li></ul>



















<h2>
<a id="pgfId-457901"></a><a id="77377"></a>Parasitic Backannotation of <a id="stitching_support"></a>DSPF/SPEF/DPF Files</h2>

<p>
<a id="pgfId-528993"></a>This section covers the following topics:</p>
<ul><li>
<a id="pgfId-457905"></a><a href="chap13.html#41073">Postlayout Simulation Methodologies</a></li><li>
<a id="pgfId-528911"></a><a href="chap13.html#95688">Control Options for Parasitic Backannotation Flow</a></li><li>
<a id="pgfId-457909"></a><a href="chap13.html#95851">Parasitic Backannotation Report</a></li><li>
<a id="pgfId-457921"></a><a href="chap13.html#52808">Some Common Error and Warning Messages Related to Parasitic Backannotation</a></li></ul>




<h3>
<a id="pgfId-457923"></a><a id="41073"></a>Postlayout Simulation Methodologies</h3>

<p>
<a id="pgfId-457924"></a>In general, there are three postlayout simulation methodologies:</p>
<ul><li>
<a id="pgfId-457925"></a>Flat RC Netlist File<br />
<a id="pgfId-457926"></a>A flat netlist containing a large number of elements and devices. For example, the netlist from Quantus QRC extracted view, which is often used in ADE. </li><li>
<a id="pgfId-457927"></a>Hierarchical RC Netlist File<br />
<a id="pgfId-457928"></a>A netlist file that contains a hierarchy of extracted subcircuits. </li><li>
<a id="pgfId-457929"></a>Backannotation of Parasitic Files<br />
<a id="pgfId-457930"></a>DSPF/SPEF/DPF files containing parasitic information. This methodology combines the parasitic information with the pre-layout netlist through backannotation. It enables Spectre to automatically plug in the parasitic elements during simulation. Compared to the flat and hierarchical RC netlist methodologies, the backannotation methodology has the following benefits:<ul><li>
<a id="pgfId-457931"></a>It provides the ability to reuse the pre-layout simulation test-bench. There is no need to change the test-bench setup, save Ocean measurements, and so on.</li><li>
<a id="pgfId-457932"></a>It can perform What-if analysis using selective backannotation.</li></ul><br />
<a id="pgfId-457933"></a>The following figure shows the backannotation flow:<br />
<a id="pgfId-457960"></a><div class="webflare-div-image">
<img width="638" height="245" src="images/chap13-33.gif" /></div></li></ul>











<h3>
<a id="pgfId-457961"></a>Parasitic Backannotation - Concept</h3>
<p>
<a id="pgfId-496138"></a></p>
<div class="webflare-div-image">
<img width="668" height="433" src="images/chap13-34.gif" /></div>

<p>
<a id="pgfId-496183"></a>The simulation database is built upon the pre-layout netlist, as shown in the left of the figure. The parasitics from the parasitic files (DSPF/SPEF/DPF) are backannotated into the database, as shown in the right. The hierarchy and the net names from the pre-layout netlist are retained, and the device models are regenerated according to device parasitic information (DPF/Instance Section from the SPF). The nodes are backannotated with R and C from the SPEF/SPF <code>Net</code> section.</p>

<h3>
<a id="pgfId-496128"></a><a id="95688"></a>Control Options for Parasitic Backannotation Flow</h3>

<p>
<a id="pgfId-496257"></a>The control options for the parasitic backannotation flow can be grouped under four categories:</p>
<ul><li>
<a id="pgfId-496289"></a><a href="chap13.html#48686">Parasitic File Loading Options</a></li><li>
<a id="pgfId-496347"></a><a href="chap13.html#63139">Parsing Options Used in Backannotation</a></li><li>
<a id="pgfId-496303"></a><a href="chap13.html#78703">Selective Backannotation Options</a></li><li>
<a id="pgfId-496313"></a><a href="chap13.html#44841">Backannotation Message Control Options</a></li></ul>



<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-457962"></a>Unlike traditional simulation options, wherein if the same option is specified multiple times, the last one takes precedence, most backannotation options, when specified multiple times, accumulate the assigned values.</div>
<p>
<a id="pgfId-496376"></a>The following table provides a summary of the options:</p>

<p>
<a id="pgfId-496387"></a></p>
<table class="webflareTable" id="#id497040">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id527666">
<a id="pgfId-527666"></a>Category</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id527668">
<a id="pgfId-527668"></a>Option Name</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id527670">
<a id="pgfId-527670"></a>Syntax</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id527672">
<a id="pgfId-527672"></a>Description</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527674"></a><strong>Parasitic File Loading Options</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527676"></a><code>dpf</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527678"></a><code>dpf=&quot;scope filename&quot;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527680"></a>Specifies the name and scope of the DPF file that needs to be backannotated.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527682"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527684"></a><code>spf</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527686"></a><code>spf=&quot;scope filename&quot;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527688"></a>Specifies the name and scope of the SPF file that needs to be backannotated.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527690"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527692"></a><code>spef</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527694"></a><code>spef=&quot;scope filename&quot;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527696"></a>Specifies the name and scope of the SPEF file that needs to be backannotated.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="7">
<p>
<a id="pgfId-527698"></a><strong>Parsing Options</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527700"></a><code>spfswapterm</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527702"></a><code>spfswapterm=&quot;terminal1 terminal2 subcktname&quot;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527704"></a>Specifies the terminals of the subcircuit macro-model that can be swapped.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527708"></a><code>spfxtorprefix</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527710"></a><code>spfxtorprefix=&quot;substring [replacement_substring]&quot;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527712"></a>Specifies the prefix for the device and net names in the DSPF/SPEF/DPF file.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527716"></a><code>spfaliasterm</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527718"></a><code>spfaliasterm=&quot;model|subckt prelayout_term1=spf_alias1 prelayout_term2=spf_alias2 &#8230; prelayout_termN=spf_aliasN&quot;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527720"></a>Specifies an alias for the terminal names of devices. This option is useful when the terminal names of devices in the DSPF/SPEF/DPF files are different from those in the simulation model library.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527724"></a><code>speftriplet</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527726"></a><code>speftriplet=1|2|3</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527728"></a>Specifies which value from the triplet should be used for backannotation in the SPEF file. This option is effective only when the values in the SPEF file are represented as triplets. The default value is 2.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527732"></a><code>spfrcr</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527734"></a><code>spfrcr=0|1</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527736"></a>Specifies whether RC reduction in parasitic backannotation should be enabled. The default value is 1.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527740"></a><code>spfrcrfmax</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527742"></a><code>spfrcrfmax=</code><span class="webflare-courier-new" style="white-space:pre"><em>value</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527744"></a>Defines the maximum frequency for RC reduction performed during parasitic backannotation. The unit is in GHz. The default value is 25.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527748"></a><code>spfinstancesection</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527750"></a><code>spfinstancesection=0|1</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527752"></a>Controls the device parameter backannotation from the instance section of the DSPF file. The default value is 1.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="10">
<p>
<a id="pgfId-527754"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527756"></a><code>spfbusdelim</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527758"></a><code>spfbusdelim=&quot;schematic_busdelim [DSPF_busdelim]&quot;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527760"></a>Allows to map the bus delimiter between schematic and DSPF, SPEF, and cap file. The option defines the bus delimiter in the schematic netlist, and optionally the bus delimiter in the DSPF file. The default value is the bus delimiter taken from the DSPF file.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-532193"></a><code>spfshortpin</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-532195"></a><code>spfshortpin=yes|no</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-532197"></a>Enables or disables the shorting of pins (<code>*|P</code>) for the same net (<code>*|NET</code>). The default value is <code>yes</code>.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527764"></a><code>spfscale</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527766"></a><code>spfscale=value</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527768"></a>Sets the scaling factor of all instances in the parasitic file. The default value is 1.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527772"></a><code>spfcaponly</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527774"></a><code>spfcaponly=0|1</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527776"></a>Specifies whether only capacitors should be backannotated (C-only stitching). The default value is 0.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527780"></a><code>spfreppin</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527782"></a><code>spfreppin=0|1|2|3</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527784"></a>Specifies whether to choose the first instance pin, last instance pin, first instance pin after sorting, or the last instance pin after sorting as the representative node. The default value is 0.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527986"></a><code>spfrepgate</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527988"></a><code>spfrepgate=1</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528054"></a>Picks the first gate pin as representative node. If no gate pin exists, pin selection follows <code>spfreppin</code>. Default is 0 and pin selection follows <code>spfreppin</code>. </p>
<p>
<a id="pgfId-528055"></a>It can be used together with <code>spfreppin</code>, and has higher priority. </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527788"></a><code>sim_opt_probe_spf_node</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527790"></a><code>sim_opt_probe_spf_node=0|1|2|3|4</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527792"></a>Controls the probing of backannotated nodes. The default value is 0.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-532438"></a>sim_opt_spf_probe_mode</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-532440"></a>sim_opt_spf_probe_mode=0|1</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-532442"></a>Controls the probe name for the SPF node.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527796"></a><code>spfhierdelim</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527798"></a><code>spfhierdelim=char</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527800"></a>Changes the spf hierarchical delimiter. The default value is the hierarchical delimiter taken from the DSPF file header.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-534460"></a><code>dpfprefix</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-534462"></a><code>dpfprefix=&quot;m r d x&quot;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-534464"></a>Backannotates all devices with M (mosfet), R (resistor), D (diode), and instance X.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528093"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528095"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528097"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528099"></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="7">
<p>
<a id="pgfId-527810"></a><strong>Selective Backannotation Options</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527812"></a><code>spfcnet</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527814"></a><code>spfcnet=[netname 1 netname2..]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527816"></a>Backannotates the total capacitance of the specified nets.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527820"></a><code>spfcnetfile</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527822"></a><code>spfcnetfile=filename</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527824"></a>Backannotates the total capacitance of the net specified in the given text file, which contains a list of C-only backannotated nets.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527828"></a><code>spfrcnet</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527830"></a><code>spfrcnet=[netname 1 netname2..]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527832"></a>Specifies the name of the net to be backannotated with parasitic resistors and capacitors.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527836"></a><code>spfrcnetfile</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527838"></a><code>spfrcnetfile=filename</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527840"></a>Specifies a text file containing a list of RC backannotated nets.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527844"></a><code>spfnetcmin</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527846"></a><code>spfnetcmin=value</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527848"></a>Selects the nets for backannotation using the value of their total node capacitance.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527852"></a><code>spfskipnet</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527854"></a><code>spfskipnet=[netname 1 netname2..]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527856"></a>Specifies the nets that need to be skipped for backannotation.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527860"></a><code>spfskipnetfile</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527862"></a><code>spfskipnetfile=filename</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527864"></a>Specifies the file containing a list of nets that need to be skipped for backannotation.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527866"></a><strong>Backannotation Control Message Options</strong></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527868"></a><code>spfmsglimit</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527870"></a><code>spfmsglimit=&#39;number [STITCH-ID_1] [STITCH-ID_2]&#39;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-527872"></a>Sets the maximum number of messages (message limit) for a specified message category identifier (STITCH-ID) to be printed in the <code>.spfrpt</code> file. The default value is 50.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-529382"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-529384"></a><code>spfprintlargercnet</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-529386"></a><code>spfprintlargercnet=value</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-529388"></a>Sets the threshold for large RC nets by specifying the number of resistors and capacitors in one net.</p>
</td>
</tr>
</tbody></table>
<h4><em>
<a id="pgfId-457964"></a><a id="48686"></a>Parasitic File Loading Options</em></h4>

<ul><li>
<a id="pgfId-457968"></a><a href="chap13.html#60221">dpf</a></li><li>
<a id="pgfId-457972"></a><a href="chap13.html#42832">spf</a></li><li>
<a id="pgfId-457976"></a><a href="chap13.html#52018">spef</a></li></ul>



<h4><em>
<a id="pgfId-457978"></a><a id="60221"></a>dpf</em></h4>

<p>
<a id="pgfId-457979"></a><strong>Syntax </strong></p>
<p>
<a id="pgfId-497922"></a><em>Spectre format</em></p>

<a id="pgfId-457980"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options dpf=&quot;<code><em>scope</em></code> <code><em>filename</em></code>&quot;</pre>

<p>
<a id="pgfId-457981"></a><em>SPICE format</em></p>

<a id="pgfId-497943"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options dpf=&quot;<code><em>scope</em></code> <code><em>filename</em></code>&quot;</pre>

<p>
<a id="pgfId-497936"></a><strong>Description</strong></p>
<p>
<a id="pgfId-457982"></a>Specifies the DPF file that is to be backannotated and its scope. If you specify this option multiple times, all specified settings are considered. </p>
<p>
<a id="pgfId-457983"></a><strong>Arguments</strong></p>

<p>
<a id="pgfId-457993"></a></p>
<table class="webflareTable" id="#id457984">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-457986"></a><span class="webflare-courier-new" style="white-space:pre"><em>scope</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-457988"></a>Specifies a subcircuit or an instance. When a subcircuit is specified, the DPF file is backannotated with all the instances of that subcircuit. When an instance is specified, the DPF file is backannotated with the specified instance only. Wildcards are supported.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-457990"></a><span class="webflare-courier-new" style="white-space:pre"><em>filename</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-457992"></a>Specifies the name of the DPF file. Multiple DPF files can be specified for backannotation by using the option multiple times. If you specify a DSPF file, only the instance section of the DSPF file is backannotated.</p>
</td>
</tr>
</tbody></table>
<h4>
<a id="pgfId-457994"></a>Example</h4>

<p>
<a id="pgfId-497965"></a><em>Spectre format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-457995"></a>opt1 options dpf=&quot;X1.XPLL PLL.dpf&quot; dpf=&quot;X1.XMEM mem.dpf&quot;</pre>

<p>
<a id="pgfId-498029"></a><em>SPICE format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-498042"></a>.options dpf=&quot;X1.XPLL PLL.dpf&quot; dpf=&quot;X1.XMEM mem.dpf&quot;</pre>

<p>
<a id="pgfId-457996"></a>tells the simulator that the <code>PLL.dpf</code> file is to be backannotated into the <code>X1.XPLL</code> instance and <code>mem.dpf</code> file is to be backannotated into the <code>X1.XMEM</code> instance. </p>

<h4><em>
<a id="pgfId-457998"></a><a id="42832"></a>spf</em></h4>

<p>
<a id="pgfId-457999"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-498061"></a><em>Spectre format</em></p>

<a id="pgfId-458000"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spf=&quot;<code><em>scope</em></code> <code><em>filename</em></code>&quot;</pre>

<p>
<a id="pgfId-498080"></a><em>SPICE format</em></p>

<a id="pgfId-498101"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spf=&quot;<code><em>scope</em></code> <code><em>filename</em></code>&quot;</pre>

<p>
<a id="pgfId-458001"></a><strong>Description</strong></p>
<p>
<a id="pgfId-458002"></a>This option specifies the DSPF file that is to be backannotated and its scope. If you specify this option multiple times, all specified settings are considered.</p>
<p>
<a id="pgfId-458003"></a><strong>Arguments</strong></p>
<p>
<a id="pgfId-458013"></a></p>
<table class="webflareTable" id="#id458004">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-458006"></a><span class="webflare-courier-new" style="white-space:pre"><em>scope</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-458008"></a>Specifies a subcircuit or an instance. When a subcircuit is specified, the DSPF file is backannotated to all the instances of that subcircuit. When an instance is specified, the DSPF file is backannotated to the specified instance only. Wildcards are supported.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-458010"></a><span class="webflare-courier-new" style="white-space:pre"><em>filename</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-458012"></a>Specifies the name of the DSPF file. Multiple DSPF files can be specified for backannotation by using the option multiple times. </p>
</td>
</tr>
</tbody></table>
<p>
<a id="pgfId-498137"></a><strong>Example</strong></p>
<p>
<a id="pgfId-498138"></a><em>Spectre format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-498139"></a>opt1 options&#160;&#160;spf=&quot;mem mem.dspf&quot; </pre>

<p>
<a id="pgfId-498156"></a><em>SPICE format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-498183"></a>.options spf=&quot;mem mem.dspf&quot;</pre>

<p>
<a id="pgfId-458016"></a>tells the simulator to stitch <code>mem.dspf</code> to subcircuit <code>mem</code>. </p>

<h4><em>
<a id="pgfId-458018"></a><a id="52018"></a>spef</em></h4>

<p>
<a id="pgfId-458019"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-498210"></a><em>Spectre format</em></p>

<a id="pgfId-458020"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spef=&quot; <code><em>scope</em></code> <code><em>filename</em></code>&quot;</pre>

<p>
<a id="pgfId-498229"></a><em>SPICE format</em></p>

<a id="pgfId-498250"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spef=&quot; <code><em>scope</em></code> <code><em>filename</em></code>&quot;</pre>

<p>
<a id="pgfId-458021"></a><strong>Description</strong></p>
<p>
<a id="pgfId-458022"></a>Specifies the SPEF file that is to be backannotated and its scope. If you specify this option multiple times, all specified settings are considered.</p>
<p>
<a id="pgfId-458023"></a><strong>Arguments</strong></p>
<p>
<a id="pgfId-458033"></a></p>
<table class="webflareTable" id="#id458024">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-458026"></a><span class="webflare-courier-new" style="white-space:pre"><em>scope</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-458028"></a>Specifies the subcircuit or instance name. When a subcircuit is specified, the SPEF file is backannotated to all the instances of that subcircuit. When an instance is specified, the SPEF file is backannotated to the specified instance only. </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-458030"></a><span class="webflare-courier-new" style="white-space:pre"><em>filename</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-458032"></a>Specifies the name of the SPEF file. Multiple SPEF files can be specified for backannotation by using the option multiple times.</p>
</td>
</tr>
</tbody></table>
<p>
<a id="pgfId-458034"></a><strong>Example</strong></p>
<p>
<a id="pgfId-498269"></a><em>Spectre format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-458035"></a>opt1 options spef=&quot;adc a.spef&quot;</pre>

<p>
<a id="pgfId-498285"></a><em>SPICE format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-498298"></a>.options spef=&quot;adc a.spef&quot;</pre>

<p>
<a id="pgfId-458036"></a>tells the simulator to stitch <code>a.spef</code> to the subcircuit <code>adc</code>. </p>

<h4><em>
<a id="pgfId-458038"></a><a id="63139"></a>Parsing Options Used in Backannotation</em></h4>

<ul><li>
<a id="pgfId-458042"></a><a href="chap13.html#53527">spfswapterm</a></li><li>
<a id="pgfId-458046"></a><a href="chap13.html#77602">spfxtorprefix</a></li><li>
<a id="pgfId-458050"></a><a href="chap13.html#32987">spfaliasterm</a></li><li>
<a id="pgfId-458054"></a><a href="chap13.html#58699">speftriplet</a></li><li>
<a id="pgfId-476012"></a><a href="chap13.html#71623">spfrcr</a></li><li>
<a id="pgfId-476023"></a><a href="chap13.html#51788">spfrcrfmax</a></li><li>
<a id="pgfId-479169"></a><a href="chap13.html#84880">spfinstancesection</a></li><li>
<a id="pgfId-479195"></a><a href="chap13.html#76485">spfbusdelim</a></li><li>
<a id="pgfId-532379"></a><a href="chap13.html#80668">spfshortpin</a></li><li>
<a id="pgfId-503963"></a><a href="chap13.html#66845">spfscale</a></li><li>
<a id="pgfId-503989"></a><a href="chap13.html#71794">spfcaponly</a></li><li>
<a id="pgfId-504011"></a><a href="chap13.html#33949">spfreppin</a></li><li>
<a id="pgfId-510646"></a><a href="chap13.html#47237">sim_opt_probe_spf_node</a></li><li>
<a id="pgfId-533359"></a><a href="chap13.html#69005">sim_opt_spf_probe_mode</a></li><li>
<a id="pgfId-504036"></a><a href="chap13.html#69448">spfhierdelim</a></li><li>
<a id="pgfId-533382"></a><a href="chap13.html#77837">dpfprefix</a></li></ul>
















<h4><em>
<a id="pgfId-458057"></a><a id="55613"></a><a id="53527"></a>spfswapterm</em></h4>

<p>
<a id="pgfId-458058"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-498324"></a><em>Spectre format</em></p>

<a id="pgfId-458059"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spfswapterm=&quot;<code><em>terminal1</em></code> <code><em>terminal2</em></code> <code><em>subcktname</em></code>&quot; </pre>

<p>
<a id="pgfId-498349"></a><em>SPICE format</em></p>

<a id="pgfId-498341"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spfswapterm=&quot;<code><em>terminal1</em></code> <code><em>terminal2</em></code> <code><em>subcktname</em></code>&quot;.</pre>

<p>
<a id="pgfId-458060"></a>Specifies the terminals of a subcircuit macro-model that can be swapped. In general, this is needed when devices are modeled by subcircuits. If you specify this option multiple times, all specified settings are considered. </p>
<p>
<a id="pgfId-458061"></a><strong>Example</strong></p>
<p>
<a id="pgfId-498374"></a><em>Spectre format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-458062"></a>opt1 options spfswapterm= &quot;n1 n2&#160;&#160;nch_mac&quot; </pre>

<p>
<a id="pgfId-498395"></a><em>SPICE format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-498387"></a>.options spfswapterm= &quot;n1 n2&#160;&#160;nch_mac&quot;</pre>

<p>
<a id="pgfId-458063"></a>tells the simulator that terminals <code>n1</code> and <code>n2</code> of subcircuit <code>nch_mac</code> can be swapped.</p>

<h4><em>
<a id="pgfId-458065"></a><a id="77602"></a>spfxtorprefix</em></h4>

<p>
<a id="pgfId-458066"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-498429"></a><em>Spectre syntax</em></p>

<a id="pgfId-458067"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spfxtorprefix=&quot;<code><em>substring</em></code> [<code><em>replacement_substring</em></code>]&quot;</pre>

<p>
<a id="pgfId-498442"></a><em>SPICE syntax</em></p>

<a id="pgfId-498455"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spfxtorprefix=&quot;<code><em>substring</em></code> [<code><em>replacement_substring</em></code>]&quot;</pre>

<p>
<a id="pgfId-458068"></a><strong>Description</strong></p>
<p>
<a id="pgfId-498474"></a>Specifies the prefix for the device and net names in the DSPF/SPEF/DPF file. The device names in the pre-layout netlist and the DSPF/SPEF file often do not match, and this option can be used to match them. If you specify this option multiple times, all specified settings are considered. </p>
<p>
<a id="pgfId-458069"></a><strong>Example</strong></p>
<p>
<a id="pgfId-498487"></a><em>Spectre syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-458070"></a>opt1 options spfxtorprefix=&quot;XM&#160;&#160;X&quot; </pre>

<p>
<a id="pgfId-458071"></a><em>SPICE syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-498513"></a>.options spfxtorprefix=&quot;XM&#160;&#160;X&quot;</pre>

<p>
<a id="pgfId-498500"></a>Considering that <code>XX1/XM1</code> exists in the pre-layout netlist but the corresponding device name in the DSPF file is <code>XMX1/XM1</code>, the above setting changes <code>XM</code> to <code>X</code> for successful backannotation. </p>

<h4><em>
<a id="pgfId-458073"></a><a id="32987"></a>spfaliasterm </em></h4>

<p>
<a id="pgfId-458074"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-498532"></a><em>Spectre format</em></p>

<a id="pgfId-458075"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spfaliasterm=&quot;model|subckt <code><em>prelayout_term1</em></code>=<code><em>spf_alias1</em></code> <code><em>prelayout_term2</em></code>=<code><em>spf_alias2</em></code> &#8230; <code><em>prelayout_termN</em></code>=<code><em>spf_aliasN</em></code>&quot;</pre>

<p>
<a id="pgfId-498545"></a><em>SPICE syntax</em></p>

<a id="pgfId-498558"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spfaliasterm=&quot;model|subckt <code><em>prelayout_term1</em></code>=<code><em>spf_alias1</em></code> <code><em>prelayout_term2</em></code>=<code><em>spf_alias2</em></code> &#8230; <code><em>prelayout_termN</em></code>=<code><em>spf_aliasN</em></code>&quot;</pre>

<p>
<a id="pgfId-458076"></a><strong>Description</strong></p>
<p>
<a id="pgfId-498586"></a>Specifies an alias for the terminal names of devices. This option is useful when the terminal names of devices in DSPF/SPEF/DPF files are different from those in the simulation model library. The terminal names of devices can be different in technology nodes that use subcircuits to model devices. If you specify this option multiple times, all specified settings are considered. </p>
<p>
<a id="pgfId-458077"></a><strong>Example</strong></p>
<p>
<a id="pgfId-498603"></a><em>Spectre format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-458078"></a>opt1 options&#160;&#160;spfaliasterm=&quot;nfet_mac n1=D n2=G n3=S n4=B&quot;</pre>

<p>
<a id="pgfId-498620"></a><em>SPICE format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-498633"></a>.options&#160;&#160;spfaliasterm=&quot;nfet_mac n1=D n2=G n3=S n4=B&quot;</pre>

<p>
<a id="pgfId-458079"></a>tells the simulator that in subcircuit <code>nfet_mac</code>, terminal <code>n1</code> corresponds to terminal <code>D</code> in the DSPF file. Similarly, terminal <code>n1</code> corresponds to terminal <code>G</code>, terminal <code>n3</code> corresponds to terminal <code>S</code>, and terminal <code>n4</code> corresponds to terminal <code>B</code>. </p>

<h4><em>
<a id="pgfId-458081"></a><a id="58699"></a>speftriplet</em></h4>

<p>
<a id="pgfId-458082"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-498652"></a><em>Spectre format</em></p>

<a id="pgfId-458083"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options speftriplet=1|2|3</pre>

<p>
<a id="pgfId-498678"></a><em>SPICE format</em></p>

<a id="pgfId-498691"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options speftriplet=1|2|3</pre>

<p>
<a id="pgfId-458084"></a><strong>Description</strong></p>
<p>
<a id="pgfId-498665"></a>Specifies which value out of the triplet should be used for backannotation in the SPEF file. This option is effective only when the values in the SPEF file are represented as triplets (for example, <code>0.325:0.41:0.495</code>). The default value is <code>2</code>, which means that the second value will be used.</p>
<p>
<a id="pgfId-458085"></a><strong>Example</strong></p>
<p>
<a id="pgfId-498710"></a><em>Spectre format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-458086"></a>name options speftriplet=1</pre>

<p>
<a id="pgfId-498717"></a><em>SPICE format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-498736"></a>.options speftriplet=1</pre>

<p>
<a id="pgfId-458087"></a>tells the simulator to choose the first value for backannotation from the triplet in the SPEF file.</p>

<h4><em>
<a id="pgfId-476030"></a><a id="71623"></a>spfrcr</em></h4>

<p>
<a id="pgfId-476044"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-498755"></a><em>Spectre syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-476057"></a>name options spfrcr = 0 | 1</pre>

<p>
<a id="pgfId-498768"></a><em>SPICE syntax</em></p>

<a id="pgfId-498781"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spfrcr = 0 | 1</pre>

<p>
<a id="pgfId-476087"></a><strong>Description</strong></p>
<p>
<a id="pgfId-498800"></a>Specifies whether RC reduction in parasitic backannotation be enabled. The default value is 1, which enables RC reduction. When <code>spfrcr</code> is set to 0, RC reduction is disabled. This options works independently of the <code>+parasitics</code> option.</p>
<p>
<a id="pgfId-476116"></a><strong>Example</strong></p>
<p>
<a id="pgfId-498842"></a><em>Spectre syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-498843"></a>opt1 options spfrcr = 0 </pre>

<p>
<a id="pgfId-498844"></a><em>SPICE syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-476131"></a>.options spfrcr = 0</pre>

<p>
<a id="pgfId-476123"></a>tells the simulator to disable RC reduction during parasitic backannotation.</p>

<h4><em>
<a id="pgfId-476163"></a><a id="51788"></a>spfrcrfmax</em></h4>

<p>
<a id="pgfId-476164"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-498857"></a><em>Spectre syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-476165"></a>name options spfrcrmax = <code><em>value</em></code></pre>

<p>
<a id="pgfId-498870"></a><em>SPICE syntax</em></p>

<a id="pgfId-498883"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spfrcrmax = <code><em>value</em></code></pre>

<p>
<a id="pgfId-476193"></a><strong>Description</strong></p>
<p>
<a id="pgfId-498902"></a>Defines the maximum frequency for RC reduction performed during parasitic backannotation. The unit is in GHz and the default value is 25GHz.</p>
<p>
<a id="pgfId-476167"></a><strong>Example</strong></p>
<p>
<a id="pgfId-498915"></a><em>Spectre syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-476168"></a>opt1 options spfrcrfmax=10</pre>

<p>
<a id="pgfId-498928"></a><em>SPICE syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-498941"></a>.options spfrcrfmax=10</pre>

<p>
<a id="pgfId-476155"></a>The above statement sets the maximum frequency for parasitic backannotation RC reduction to 10GHz.</p>

<h4><em>
<a id="pgfId-478789"></a><a id="84880"></a>spfinstancesection</em></h4>

<p>
<a id="pgfId-478803"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-498963"></a><em>Spectre Syntax</em></p>

<a id="pgfId-478810"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spfinstancesection = 0 | 1</pre>

<p>
<a id="pgfId-498980"></a><em>SPICE syntax</em></p>

<a id="pgfId-504181"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spfinstancesection = 0 | 1</pre>

<p>
<a id="pgfId-478856"></a><strong>Description</strong></p>
<p>
<a id="pgfId-498993"></a>Controls the device parameter backannotation from the instance section of the DSPF file. If <code>spfinstancesection</code> is turned off (0), the instance section is ignored in backannotation. Default is on (1).</p>
<p>
<a id="pgfId-478858"></a><strong>Example</strong></p>
<p>
<a id="pgfId-499013"></a><em>Spectre syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-478859"></a>opt1 options spfinstancesection=0</pre>

<p>
<a id="pgfId-499026"></a><em>SPICE syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-499039"></a>.options spfinstancesection=0</pre>

<p>
<a id="pgfId-478861"></a>The above statement disables the backannotation of the DSPF instance section device parameters.</p>

<h4><em>
<a id="pgfId-478902"></a><a id="76485"></a>spfbusdelim</em></h4>

<p>
<a id="pgfId-478921"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-499058"></a><em>Spectre syntax</em></p>

<a id="pgfId-478922"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spfbusdelim=&quot;schematic_busdelim [DSPF_busdelim]&quot;</pre>

<p>
<a id="pgfId-499071"></a><em>SPICE syntax</em></p>

<a id="pgfId-499084"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spfbusdelim=&quot;schematic_busdelim [DSPF_busdelim]&quot;</pre>

<p>
<a id="pgfId-479018"></a><strong>Description</strong></p>
<p>
<a id="pgfId-499103"></a>Allows to map the bus delimiter between schematic and DSPF, SPEF, and cap file. The option defines the bus delimiter in the schematic netlist, and optionally the bus delimiter in the DSPF file.</p>
<p>
<a id="pgfId-479021"></a>By default, the bus delimiter of the DSPF file is taken from the DSPF file header (that is, <code>*|BUSBIT []</code>, <code>*|BUS_BIT []</code>, or <code>*|BUS_DELIMITER []</code>).</p>
<p>
<a id="pgfId-484149"></a>If the bus delimiter is not defined in the parasitic file header, you need specify it by using the <code>spfbusdelim</code> option in schematic netlist.</p>
<p>
<a id="pgfId-479076"></a><strong>Example 1</strong></p>
<p>
<a id="pgfId-499116"></a><em>Spectre syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-479078"></a>opt1 options spfbusdelim=&quot;&lt;&gt;&quot;</pre>

<p>
<a id="pgfId-499129"></a><em>SPICE syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-499142"></a>.options spfbusdelim=&quot;&lt;&gt;&quot;</pre>

<p>
<a id="pgfId-479080"></a><code>A&lt;1&gt;</code> is mapped to <code>A_1</code> in the DSPF file, if the bus delimiter in the DSPF file is <code>_</code>.</p>
<p>
<a id="pgfId-479083"></a><strong>Example 2</strong></p>
<p>
<a id="pgfId-499161"></a><em>Spectre syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-479085"></a>opt1 options spfbusdelim=&quot;@ []&quot;</pre>

<p>
<a id="pgfId-499174"></a><em>SPICE syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-499187"></a>.options spfbusdelim=&quot;@ []&quot;</pre>

<p>
<a id="pgfId-478930"></a><code>A@1</code> is mapped to <code>A[1]</code> in the DSPF file.</p>

<h4><em>
<a id="pgfId-532297"></a><a id="80668"></a>spfshortpin</em></h4>

<p>
<a id="pgfId-532298"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-532299"></a><em>Spectre syntax</em></p>

<a id="pgfId-532300"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spfshortpin=yes|no</pre>

<p>
<a id="pgfId-532301"></a><em>SPICE syntax</em></p>

<a id="pgfId-532302"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.option spfshortpin=yes|no</pre>

<p>
<a id="pgfId-532303"></a><strong>Description</strong></p>
<p>
<a id="pgfId-532304"></a>Enables or disables the shorting of pins (<code>*|P</code>) for same net (<code>*|NET</code>). If the value of <code>spfshortpin</code> is set to <code>yes</code>, all <code>*|P</code> pins in the same net section are shorted. If the value is set to <code>no</code>, then pins are not shorted.</p>
<p>
<a id="pgfId-532305"></a><strong>Example</strong></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-532306"></a>opt1 options spfshortpin=no</pre>
<h4><em>
<a id="pgfId-499222"></a><a id="66845"></a>spfscale</em></h4>

<p>
<a id="pgfId-499223"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-499224"></a><em>Spectre syntax</em></p>

<a id="pgfId-499225"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spfscale=value</pre>

<p>
<a id="pgfId-499226"></a><em>SPICE syntax</em></p>

<a id="pgfId-499227"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spfscale=value</pre>

<p>
<a id="pgfId-499228"></a><strong>Description</strong></p>
<p>
<a id="pgfId-499232"></a>Specifies the scaling factor of all instances in the parasitic file. The default value is 1.</p>
<p>
<a id="pgfId-499233"></a><strong>Example</strong></p>
<p>
<a id="pgfId-499269"></a>Consider that the MOSFET width is defined as <code>w=2</code> in the DSPF file.</p>
<p>
<a id="pgfId-499234"></a><em>Spectre format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-499235"></a>opt1 options spfscale=1u</pre>

<p>
<a id="pgfId-499236"></a><em>SPICE syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-499237"></a>.options spfscale=1u</pre>

<p>
<a id="pgfId-499238"></a>Scales the width of the MOSFET to 2u.</p>

<h4><em>
<a id="pgfId-499299"></a><a id="71794"></a>spfcaponly</em></h4>

<p>
<a id="pgfId-499300"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-499301"></a><em>Spectre syntax</em></p>

<a id="pgfId-499302"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spfcaponly=0|1</pre>

<p>
<a id="pgfId-499303"></a><em>SPICE syntax</em></p>

<a id="pgfId-499304"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spfcaponly=0|1</pre>

<p>
<a id="pgfId-499305"></a><strong>Description</strong></p>
<p>
<a id="pgfId-499306"></a>Specifies whether only capacitors need to be backannotated (C-only stitching). The default value is 0 (both R and C are backannotated).</p>
<p>
<a id="pgfId-499307"></a><strong>Example</strong></p>
<p>
<a id="pgfId-499309"></a><em>Spectre format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-499310"></a>opt1 options spfcaponly=1</pre>

<p>
<a id="pgfId-499311"></a><em>SPICE syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-499312"></a>.options spfcaponly=1</pre>

<p>
<a id="pgfId-499291"></a>Tells the simulator to backannotate capacitors only and discard the parasitic resistors.</p>

<h4><em>
<a id="pgfId-499342"></a><a id="33949"></a>spfreppin</em></h4>

<p>
<a id="pgfId-499343"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-499344"></a><em>Spectre syntax</em></p>

<a id="pgfId-499345"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spfreppin=0|1|2|3</pre>

<p>
<a id="pgfId-499346"></a><em>SPICE syntax</em></p>

<a id="pgfId-499347"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spfreppin=0|1|2|3</pre>

<p>
<a id="pgfId-499348"></a><strong>Description</strong></p>
<p>
<a id="pgfId-499349"></a>Specifies whether to choose the first instance pin, last instance pin, first instance pin after sorting, or the last instance pin after sorting as the representative node. Default is 0, which means that the first instance pin is chosen as the representative mode.</p>
<p>
<a id="pgfId-499350"></a><strong>Example</strong></p>
<p>
<a id="pgfId-499351"></a><em>Spectre format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-499352"></a>opt1 options spfreppin=1</pre>

<p>
<a id="pgfId-499353"></a><em>SPICE syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-499354"></a>.options spfreppin=1</pre>

<p>
<a id="pgfId-499334"></a>Tells the simulator to choose the last instance pin as the representative mode.</p>

<h4><em>
<a id="pgfId-510567"></a><a id="47237"></a>sim_opt_probe_spf_node</em></h4>

<p>
<a id="pgfId-510568"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-510569"></a><em>Spectre syntax</em></p>

<a id="pgfId-510570"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options sim_opt_probe_spf_node=0|1|2|3|4</pre>

<p>
<a id="pgfId-510571"></a><em>SPICE syntax</em></p>

<a id="pgfId-510572"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options sim_opt_probe_spf_node=0|1|2|3|4</pre>

<p>
<a id="pgfId-510573"></a><strong>Description</strong></p>
<p>
<a id="pgfId-510574"></a>Controls the probing of backannotated nodes. This option is supported only in Spectre XPS.</p>
<p>
<a id="pgfId-510575"></a><code>0</code> - Do not probe backannotated nodes. This is the default.</p>
<p>
<a id="pgfId-510576"></a><code>1</code> - Probe the instance pins of the SPF net.</p>
<p>
<a id="pgfId-510577"></a><code>2</code> - Probe all instance pins internal nodes of the SPF net.</p>
<p>
<a id="pgfId-510596"></a><code>3</code> - Probe the instance pins of all device gates</p>
<p>
<a id="pgfId-510612"></a><code>4</code> - Probe the instance pins of the primary device gate (skip finger devices)</p>
<p>
<a id="pgfId-510578"></a><strong>Examples</strong></p>
<p>
<a id="pgfId-510579"></a><em>Spectre format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-510580"></a>opt1 options sim_opt_probe_spf_node=1</pre>

<p>
<a id="pgfId-510581"></a><em>SPICE syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-510582"></a>.options sim_opt_probe_spf_node=1</pre>

<p>
<a id="pgfId-510583"></a>tells the simulator to probe the instance pin of the SPF net.</p>

<h4><em>
<a id="pgfId-532787"></a><a id="69005"></a>sim_opt_spf_probe_mode</em></h4>

<p>
<a id="pgfId-532815"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-532833"></a><em>Spectre syntax</em></p>

<a id="pgfId-532834"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options sim_opt_spf_probe_mode=0|1</pre>

<p>
<a id="pgfId-532835"></a><em>SPICE syntax</em></p>

<a id="pgfId-532836"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options sim_opt_spf_probe_mode=0|1</pre>

<p>
<a id="pgfId-532890"></a><strong>Description</strong></p>
<p>
<a id="pgfId-532919"></a>Controls the probe name of spf nodes. This option is supported only in Spectre XPS.</p>
<p>
<a id="pgfId-533007"></a>0 - Flattened node name in <code>&lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>net_name</em></span><code>&gt;#&lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>flatten_nodename</em></span><code>&gt;</code> format.</p>
<p>
<a id="pgfId-533087"></a>1 - Hierarchical node name following the net. This is default.</p>
<p>
<a id="pgfId-533106"></a><strong>Examples</strong></p>
<p>
<a id="pgfId-533129"></a><em>Spectre format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-533130"></a>opt1 options sim_opt_spf_probe_mode=1</pre>

<p>
<a id="pgfId-533131"></a><em>SPICE syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-533132"></a>.options sim_opt_spf_probe_mode=1</pre>

<p>
<a id="pgfId-533172"></a>Tells the simulator to probe signals in format <code>&lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>net_name</em></span><code>&gt;#&lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>flatten_nodename</em></span><code>&gt;</code>. For example, <code>net074#xi0/xi0/xgi1/mna:g</code>. </p>

<h4><em>
<a id="pgfId-499407"></a><a id="69448"></a>spfhierdelim</em></h4>

<p>
<a id="pgfId-499408"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-499409"></a><em>Spectre syntax</em></p>

<a id="pgfId-499410"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spfhierdelim=char</pre>

<p>
<a id="pgfId-499411"></a><em>SPICE syntax</em></p>

<a id="pgfId-499412"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spfhierdelim=char</pre>

<p>
<a id="pgfId-499413"></a><strong>Description</strong></p>
<p>
<a id="pgfId-499414"></a>Specifies the hierarchical delimiter to be used in the SPF file. The default value is &quot;.&quot;</p>
<p>
<a id="pgfId-499415"></a><strong>Example</strong></p>
<p>
<a id="pgfId-499416"></a><em>Spectre format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-499417"></a>opt1 options spfhierdelim=/</pre>

<p>
<a id="pgfId-499418"></a><em>SPICE syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-499419"></a>.options spfhierdelim=/</pre>

<p>
<a id="pgfId-499399"></a>Tells the simulator to use / as the hierarchical delimiter in the SPF file.</p>

<h4><em>
<a id="pgfId-533234"></a><a id="77837"></a>dpfprefix</em></h4>

<p>
<a id="pgfId-533207"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-533208"></a><em>Spectre syntax</em></p>

<a id="pgfId-533209"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options dpfprefix=char</pre>

<p>
<a id="pgfId-533210"></a><em>SPICE syntax</em></p>

<a id="pgfId-533211"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options dpfprefix=char</pre>

<p>
<a id="pgfId-533212"></a><strong>Description</strong></p>
<p>
<a id="pgfId-533213"></a>Backannotates the instances with the leading character(s) specified by this option. The default value is &quot;.&quot;</p>
<p>
<a id="pgfId-533214"></a><strong>Example</strong></p>
<p>
<a id="pgfId-533215"></a><em>Spectre format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-533216"></a>opt1 options dpfprefix=&quot;m x&quot;</pre>

<p>
<a id="pgfId-533217"></a><em>SPICE syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-533218"></a>.options dpfprefix=&quot;m x&quot;</pre>

<p>
<a id="pgfId-533203"></a>Tells the simulator to only backannotate the instances with leading char <code>m</code> or <code>x</code>.</p>

<h4><em>
<a id="pgfId-458089"></a><a id="78703"></a>Selective Backannotation Options</em></h4>

<ul><li>
<a id="pgfId-458093"></a><a href="chap13.html#41146">spfcnet</a></li><li>
<a id="pgfId-458097"></a><a href="chap13.html#79188">spfcnetfile</a></li><li>
<a id="pgfId-458101"></a><a href="chap13.html#15693">spfrcnet</a></li><li>
<a id="pgfId-458105"></a><a href="chap13.html#83545">spfrcnetfile</a></li><li>
<a id="pgfId-458109"></a><a href="chap13.html#49758">spfnetcmin</a></li><li>
<a id="pgfId-458113"></a><a href="chap13.html#87434">spfskipnet</a></li><li>
<a id="pgfId-458117"></a><a href="chap13.html#29951">spfskipnetfile</a></li></ul>







<h4><em>
<a id="pgfId-458119"></a><a id="41146"></a>spfcnet</em></h4>

<p>
<a id="pgfId-458120"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-499550"></a><em>Spectre Syntax</em></p>

<a id="pgfId-458121"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spfcnet=<code><em>netname</em></code></pre>

<p>
<a id="pgfId-499567"></a><em>SPICE syntax</em></p>

<a id="pgfId-499580"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spfcnet=<code><em>netname</em></code></pre>

<p>
<a id="pgfId-458122"></a><strong>Description</strong></p>
<p>
<a id="pgfId-458123"></a>Backannotates the total capacitance of the specified net. All other parasitic components such as parasitic resistors that are associated with this net are ignored. The complete hierarchical net names should be specified. If you specify this option multiple times, all specified settings are considered. </p>
<p>
<a id="pgfId-470724"></a>Backannotation attaches only one grounded capacitor with value computed by the total capacitance (defined in <code>*NET</code> statement in the DSPF file) subtracted by the total capacitance of all cross-coupling capacitors of this net. All terminals of cross-coupling capacitors which are connected to the subnodes of the specified net are reconnected to the node of the net, and their values are subtracted from the total capacitance.</p>
<p>
<a id="pgfId-458124"></a><strong>Example</strong></p>
<p>
<a id="pgfId-499599"></a><em>Spectre format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-458125"></a>opt1 options spfcnet=X1.netA spfcnet=netB</pre>

<p>
<a id="pgfId-499616"></a><em>SPICE format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-499629"></a>.options spfcnet=X1.netA spfcnet=netB</pre>

<p>
<a id="pgfId-458126"></a>tells the simulator to stitch only the total lumped capacitance to nets <code>X1.netA</code> and <code>netB</code>. </p>

<h4><em>
<a id="pgfId-458128"></a><a id="79188"></a>spfcnetfile</em></h4>

<p>
<a id="pgfId-458129"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-499648"></a><em>Spectre syntax</em></p>

<a id="pgfId-458130"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spfcnetfile=<code><em>filename</em></code></pre>

<p>
<a id="pgfId-499665"></a><em>SPICE syntax</em></p>

<a id="pgfId-499678"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spfcnetfile=<code><em>filename</em></code></pre>

<p>
<a id="pgfId-458131"></a><strong>Description</strong></p>
<p>
<a id="pgfId-458132"></a>Specifies a text file, which contains a list of C-only backannotated nets. The format of the text file requires you to specify one net per line. This option stitches the lumped capacitance to the nets specified in the text file, similar to the <code>spfcnet</code> option. Only one file name can be specified per option. If you specify this option multiple times, all specified values are considered. </p>
<p>
<a id="pgfId-458133"></a><strong>Example</strong></p>
<p>
<a id="pgfId-499697"></a><em>Spectre format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-458134"></a>opt1 options spfcnetfile=nets.text</pre>

<p>
<a id="pgfId-499714"></a><em>SPICE syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-499727"></a>.options spfcnetfile=nets.text</pre>

<p>
<a id="pgfId-458135"></a>Considering that the file <code>nets.text</code> contains:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-458136"></a>netA</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-458137"></a>netB</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-458138"></a>netC</pre>

<p>
<a id="pgfId-458139"></a>tells the simulator to stitch lumped total capacitance to <code>netA</code>, <code>netB</code>, and <code>netC</code>. </p>

<h4><em>
<a id="pgfId-458141"></a><a id="15693"></a>spfrcnet</em></h4>

<p>
<a id="pgfId-458142"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-499760"></a><em>Spectre syntax</em></p>

<a id="pgfId-458143"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spfrcnet=<code><em>netname</em></code></pre>

<p>
<a id="pgfId-499777"></a><em>SPICE syntax</em></p>

<a id="pgfId-499790"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spfrcnet=<code><em>netname</em></code></pre>

<p>
<a id="pgfId-458144"></a><strong>Description</strong></p>
<p>
<a id="pgfId-458145"></a>Specifies the name of the net to be backannotated with parasitic resistors and capacitors. The other nets are backannotated with lumped total capacitances. Wildcards are supported and you can specify as many nets as needed. Full hierarchical net names are required.</p>
<p>
<a id="pgfId-458146"></a><strong>Example</strong></p>
<p>
<a id="pgfId-499809"></a><em>Spectre syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-458147"></a>opt1 options spfrcnet=netA</pre>

<p>
<a id="pgfId-499822"></a><em>SPICE syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-499835"></a>.options spfrcnet=netA</pre>

<p>
<a id="pgfId-458148"></a>tells the simulator to stitch <code>netA</code> with parasitic resistors and capacitors. Also, if is the only <code>spfrcnet</code> option specified, backannotate other nets with lumped total capacitance. </p>

<h4><em>
<a id="pgfId-458150"></a><a id="83545"></a>spfrcnetfile </em></h4>

<p>
<a id="pgfId-458151"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-499857"></a><em>Spectre syntax</em></p>

<a id="pgfId-458152"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spfrcnetfile=&quot;<code><em>filename</em></code>&quot;</pre>

<p>
<a id="pgfId-499868"></a><em>SPICE syntax</em></p>

<a id="pgfId-499875"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
options spfrcnetfile=&quot;<code><em>filename</em></code>&quot;</pre>

<p>
<a id="pgfId-458153"></a><strong>Description</strong></p>
<p>
<a id="pgfId-458154"></a>Specifies a text file, which contains a list of RC backannotated nets. The format of the text file requires you to specify one net per line. The net names specified in the file are backannotated with parasitic resistors and capacitors, similar to the <code>spfrcnet</code> option. The other nets are backannotated with lumped total capacitances. Only one file name can be specified per option. </p>
<p>
<a id="pgfId-458155"></a><strong>Example</strong></p>
<p>
<a id="pgfId-499906"></a><em>Spectre syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-458156"></a>opt1 options spfrcnetfile=nets.text</pre>

<p>
<a id="pgfId-499917"></a><em>SPICE syntax</em></p>

<a id="pgfId-499936"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spfrcnetfile=nets.text</pre>

<p>
<a id="pgfId-458157"></a><code>nets.text</code> file contains: </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-458158"></a>netA</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-458159"></a>netB</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-458160"></a>netC</pre>

<p>
<a id="pgfId-458161"></a>tells the simulator to stitch resistance and capacitance to nets <code>netA</code>, <code>netB</code> and <code>netC</code>, and stitch only capacitance to all other nets.</p>

<h4><em>
<a id="pgfId-458163"></a><a id="49758"></a>spfnetcmin</em></h4>

<p>
<a id="pgfId-458164"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-499955"></a><em>Spectre syntax</em></p>

<a id="pgfId-458165"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spfnetcmin=<code><em>value</em></code></pre>

<p>
<a id="pgfId-499972"></a><em>SPICE syntax</em></p>

<a id="pgfId-499979"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spfnetcmin=<code><em>value</em></code></pre>

<p>
<a id="pgfId-458166"></a><strong>Description</strong></p>
<p>
<a id="pgfId-458167"></a>Selects the nets for backannotation using the value of their total node capacitance. If a net&#39;s total node capacitance exceeds the <code>spfnetcmin</code> value, all the parasitics associated with the net are backannotated correctly; otherwise, only the total capacitance is added to the net node.</p>
<p>
<a id="pgfId-458168"></a><strong>Example</strong></p>
<p>
<a id="pgfId-500004"></a><em>Spectre syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-458169"></a>op1 options spfnetcmin=1.0e-16.</pre>

<p>
<a id="pgfId-500015"></a><em>SPICE syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-500028"></a>options spfnetcmin=1.0e-16.</pre>

<p>
<a id="pgfId-458170"></a>tells the simulator to stitch resistance and capacitance on the nets whose total capacitance is more than <code>1.0e-16</code>, and only capacitance for the nets whose total capacitance is less than <code>1.0e-16</code>. </p>

<h4><em>
<a id="pgfId-458172"></a><a id="87434"></a>spfskipnet</em></h4>

<p>
<a id="pgfId-458173"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-500053"></a><em>Spectre syntax</em></p>

<a id="pgfId-458174"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spfskipnet=<code><em>netname</em></code></pre>

<p>
<a id="pgfId-500066"></a><em>SPICE syntax</em></p>

<a id="pgfId-500079"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spfskipnet=<code><em>netname</em></code></pre>

<p>
<a id="pgfId-458175"></a><strong>Description</strong></p>
<p>
<a id="pgfId-458176"></a>Specifies the nets that are to be skipped for backannotation, that is, none of the parasitic components of the nets are backannotated. Wildcards are supported. If you specify this option multiple times, all specified settings are considered.</p>
<p>
<a id="pgfId-458177"></a><strong>Example</strong></p>
<p>
<a id="pgfId-500098"></a><em>Spectre syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-458178"></a>opt1 options spfskipnet=X1.nodeA</pre>

<p>
<a id="pgfId-500115"></a><em>SPICE syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-500128"></a>.options spfskipnet=X1.nodeA</pre>

<p>
<a id="pgfId-458179"></a>tells the simulator to skip backannotation of net <code>X1.nodeA</code>. </p>

<h4><em>
<a id="pgfId-458181"></a><a id="29951"></a>spfskipnetfile </em></h4>

<p>
<a id="pgfId-458182"></a><strong>Syntax </strong></p>
<p>
<a id="pgfId-500147"></a><em>Spectre format</em></p>

<a id="pgfId-458183"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spfskipnetfile=<code><em>filename</em></code></pre>

<p>
<a id="pgfId-500160"></a><em>SPICE format</em></p>

<a id="pgfId-500167"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
options spfskipnetfile=<code><em>filename</em></code></pre>

<p>
<a id="pgfId-458184"></a><strong>Description</strong></p>
<p>
<a id="pgfId-500186"></a>Specifies a text file, which contains the list of nets to be skipped for backannotation. The format of the text file requires you to specify one net per line. Only one file name can be specified per option setting.</p>
<p>
<a id="pgfId-458185"></a><strong>Example</strong></p>
<p>
<a id="pgfId-500199"></a><em>Spectre format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-458186"></a>opt1 options spfskipnetfile=nets.text</pre>

<p>
<a id="pgfId-500212"></a><em>SPICE format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-500219"></a>.options spfskipnetfile=nets.text</pre>

<p>
<a id="pgfId-458187"></a>Considering <code>nets.text</code> file contains:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-458188"></a>netA</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-458189"></a>netB</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-458190"></a>netC</pre>

<p>
<a id="pgfId-458191"></a>tells the simulator to skip nets <code>netA</code>, <code>netB</code> and <code>netC</code> for backannotation.</p>

<h4><em>
<a id="pgfId-458192"></a><a id="44841"></a>Backannotation Message Control Options</em></h4>

<ul><li>
<a id="pgfId-504484"></a><a href="chap13.html#47255">spfmsglimit</a></li><li>
<a id="pgfId-504499"></a><a href="chap13.html#56627">spfprintlargercnet</a></li></ul>


<h4><em>
<a id="pgfId-458193"></a><a id="47255"></a>spfmsglimit</em></h4>

<p>
<a id="pgfId-458194"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-500244"></a><em>Spectre syntax</em></p>

<a id="pgfId-458195"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spfmsglimit=&#39;<code><em>number</em></code> <code><em>STITCH-ID_1</em></code> <code><em>STITCH-ID_2</em></code>&#39;</pre>

<p>
<a id="pgfId-500261"></a><em>SPICE syntax</em></p>

<a id="pgfId-458196"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spfmsglimit=&#39;<code><em>number</em></code> <code><em>STITCH-ID_1</em></code> <code><em>STITCH-ID_2</em></code>&#39;</pre>

<p>
<a id="pgfId-500274"></a><strong>Description</strong></p>
<p>
<a id="pgfId-500293"></a>Sets the maximum number of messages (message limit) for a specified message category identifier (<span class="webflare-courier-new" style="white-space:pre"><em>STITCH-ID</em></span>) to be printed in the <code>.spfrpt</code> file. When a <span class="webflare-courier-new" style="white-space:pre"><em>STITCH-ID</em></span> is not specified, the software assigns the maximum message number limit to all message categories. If you do not specify a <span class="webflare-courier-new" style="white-space:pre"><em>number</em></span>, the software assigns the maximum limit of <code>50</code> (default) messages for each message category.</p>
<p>
<a id="pgfId-458197"></a><strong>Examples</strong></p>
<p>
<a id="pgfId-500306"></a><em>Spectre format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-458198"></a>opt1 options spfmsglimit=&quot;10 STITCH-0010&quot;</pre>

<p>
<a id="pgfId-500319"></a><em>SPICE syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-500332"></a>.options spfmsglimit=&quot;10 STITCH-0010&quot;</pre>

<p>
<a id="pgfId-458199"></a>tells the simulator to print no more than <code>10</code> messages for the <code>STITCH-0010</code> message category. For the other message categories, the default maximum limit of 50 messages will apply. </p>
<p>
<a id="pgfId-458200"></a><em>Spectre syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-500351"></a>opt1 options&#160;&#160;spfmsglimit=&quot;1000000&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-458201"></a>opt2 options spfmsglimit=&quot;5 STITCH-0020&quot;</pre>

<p>
<a id="pgfId-500368"></a><em>SPICE syntax</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-500389"></a>.options&#160;&#160;spfmsglimit=&quot;1000000&quot;</pre>

<p>
<a id="pgfId-500381"></a>.options spfmsglimit=&quot;5 STITCH-0020&quot;</p>
<p>
<a id="pgfId-458202"></a>tells the simulator to print no more than <code>1000000</code> messages for all message categories except <code>STITCH_0020</code> for which no more than <code>5</code> messages will be printed.</p>

<h4><em>
<a id="pgfId-529504"></a><a id="56627"></a>spfprintlargercnet</em></h4>

<p>
<a id="pgfId-529505"></a><strong>Syntax</strong></p>
<p>
<a id="pgfId-529506"></a><em>Spectre format</em></p>

<a id="pgfId-529507"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
name options spfprintlargercnet=<code><em>value</em></code></pre>

<p>
<a id="pgfId-529508"></a><em>SPICE format</em></p>

<a id="pgfId-529509"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
.options spfprintlargercnet=<code><em>value</em></code></pre>

<p>
<a id="pgfId-529510"></a><strong>Description</strong></p>
<p>
<a id="pgfId-529511"></a>Sets the threshold for large RC nets by specifying the number of resistors and capacitors in one net. Spectre XPS writes the large RC net statistics information in the log file. </p>
<p>
<a id="pgfId-529512"></a><strong>Examples</strong></p>
<p>
<a id="pgfId-529513"></a><em>Spectre format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-529514"></a>opt1 options spfprintlargercnet=100</pre>

<p>
<a id="pgfId-529515"></a><em>SPICE format</em></p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-529516"></a>.options spfprintlargercnet=100</pre>

<p>
<a id="pgfId-529517"></a>Spectre XPS reports the large RC nets in the log file, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-529518"></a>Nets with number of RC &gt; 100</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-529519"></a>================================================</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-529520"></a>123&#160;&#160;   out</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-529521"></a>261&#160;&#160;   x1.mid</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-529522"></a>132&#160;&#160;   in</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-529523"></a>3828&#160;&#160; x1.vddp</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-529524"></a>&#8230;&#8230;</pre>

<p>
<a id="pgfId-529450"></a>In the report, the first column is the sum of the number of resistors and capacitors, and the second column is the name of RC net. </p>

<h4><em>
<a id="pgfId-458204"></a><a id="97102"></a>Frequently Asked Question</em></h4>

<p>
<a id="pgfId-458205"></a><strong>Why are the expanded ground capacitors more than the parsed ground capacitors?</strong></p>
<p>
<a id="pgfId-458206"></a>During backannotation, certain cross-coupling capacitors are grounded and these capacitors are counted in the category of expanded ground capacitors. During backannotation, cross-coupling capacitors are grounded if:</p>
<ul><li>
<a id="pgfId-458207"></a>several cross-coupling capacitors attached to net A have no corresponding nets for their second terminal. In this case, all cross-coupling capacitors are lumped to ground as one grounded capacitor. Therefore, expanded grounded capacitors are more than those parsed.</li><li>
<a id="pgfId-458208"></a>net A is erroneous. In this case, all parsed capacitors are discarded and one grounded total capacitor is expanded. </li><li>
<a id="pgfId-458209"></a>a net is backannotated with C-only. In this case, no capacitors are parsed but one total grounded capacitor is expanded.</li></ul>



<h3>
<a id="pgfId-500552"></a><a id="95851"></a>Parasitic Backannotation Report</h3>

<p>
<a id="pgfId-500562"></a>The Spectre log file contains a section <code>PARASITIC BACK-ANNOTATION SUMMARY</code> that displays the following information:</p>

<p>
<a id="pgfId-528434"></a></p>
<div class="webflare-div-image">
<img width="668" height="595" src="images/chap13-35.gif" /></div>

<p>
<a id="pgfId-528449"></a>Description of the fields in the report is given below.</p>

<p>
<a id="pgfId-528506"></a></p>
<table class="webflareTable" id="#id528507">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<span class="tbl-head" id="#id528538">
<a id="pgfId-528538"></a>Field</span>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<span class="tbl-head" id="#id528540">
<a id="pgfId-528540"></a>Description</span>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528542"></a>Nets parsed 1089</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528544"></a>Number of nets in the SPF file.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528546"></a>annotated RC 1081 (99.2%)</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528548"></a>Number of nets that are annotated with R and C.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528593"></a>annotated C-only 0 (0.0%)</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528595"></a>Number of nets that are annotated with C only. </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528597"></a>annotated spfcnet 2 (0.2%)</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528599"></a>Number of nets specified using the <code>spfcnet</code> option.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528601"></a>skipped spfskipnet 4 (0.4%)</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528603"></a>Number of nets specified using the <code>spfskipnet</code> option.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528605"></a>CrossCaps parsed 0</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528607"></a>Number of coupling caps in the SPF file.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528657"></a>annotated 0 (0.0%)</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528659"></a>Number of coupling caps annotated successfully.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528661"></a>grounded 0 (0.0%)</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528663"></a>Number of coupling caps that are grounded for some reason (for example, one terminal is floating).</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528665"></a>Instances parsed 2761</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528667"></a>Number of instances in the Instance section</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528669"></a>annotated 1860 (67.4%)</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528671"></a>Number of instances backannotated.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528721"></a>skipped 901 (32.6%)</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-528723"></a>Number of instances skipped.</p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-500596"></a>Errors and warning messages can be located in the stitching report file <code>.xps.spfrpt</code>.</p>

<h3>
<a id="pgfId-500626"></a><a id="52808"></a>Some Common Error and Warning Messages Related to Parasitic Backannotation</h3>

<p>
<a id="pgfId-500643"></a><strong>ERROR (STITCH-0000)(:12): Node xio.xb1.n3 not found. Net is not expanded.</strong></p>
<p>
<a id="pgfId-500722"></a>This error message is generated when the net name does not match the pre-layout name or the node does not exist. </p>
<p>
<a id="pgfId-500723"></a>To fix the net mismatch issue, use the <code>spfxtorprefix</code> option.</p>
<p>
<a id="pgfId-500724"></a><strong>WARNING(STITCH-0039)(:49): Net x1.mid is skipped due to filtering</strong></p>
<p>
<a id="pgfId-500701"></a>This message is generated when nets are skipped using the <code>spfskipnet</code> option.</p>
<p>
<a id="pgfId-500744"></a>For better performance, ensure that the total capacitance of the nets specified using the <code>spfskipnet</code> option is backannotated.</p>
<p>
<a id="pgfId-500776"></a><strong>WARNING(STITCH-0011)(:32): Only total cap is attached to net net19.</strong></p>
<p>
<a id="pgfId-500801"></a>This message is generated when C-only backannotation is enabled. For better performance, ensure that the total capacitance of the nets specified using the <code>spfcnet</code> option is backannotated.</p>
<p>
<a id="pgfId-500837"></a><strong>WARNING(STITCH-0084)(:13): Cross-coupling capacitor &quot;c12 (1.3e-17)&quot; is lumped to ground (first node not found in the file scope).</strong></p>
<p>
<a id="pgfId-500858"></a>This message is generated when one net of the coupling cap is not found in pre-layout.</p>
<p>
<a id="pgfId-500868"></a><strong>WARNING(STITCH-0039)(:79): Net net46 is skipped because has zero C-only value</strong></p>
<p>
<a id="pgfId-500898"></a>This message is generated when the <code>NET</code> section does not have parasitic capacitance defined.</p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="chap12.html" id="prev" title="Device and Circuit Checks">Device and Circuit Checks</a></em></b><b><em><a href="chap14.html" id="nex" title="Encryption">Encryption</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>