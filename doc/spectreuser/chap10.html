
<html><head><title>Running a Simulation</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="kamal" />
<meta name="CreateDate" content="2020-06-16" />
<meta name="CreateTime" content="1592307229" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the Spectre Circuit Simulator." />
<meta name="DocTitle" content="Spectre Classic Simulator, Spectre APS, Spectre X, and Spectre XPS User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Running a Simulation" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2" />
<meta name="Keyword" content="spectreuser" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-06-16" />
<meta name="ModifiedTime" content="1592307229" />
<meta name="NextFile" content="chap11.html" />
<meta name="Order" content="1" />
<meta name="Group" content="Spectre Simulator" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="chap9.html" />
<meta name="c_product" content="Spectre" />
<meta name="Product" content="Spectre" />
<meta name="ProductFamily" content="Spectre" />
<meta name="ProductVersion" content="19.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre Classic Simulator, Spectre APS, Spectre X, and Spectre XPS User Guide -- Running a Simulation" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="Version" content="19.1" />
<meta name="SpaceKey" content="spectreuser191" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="spectreuserTOC.html">Contents</a></li><li><a class="prev" href="chap9.html" title="Specifying Output Options">Specifying Output Options</a></li><li style="float: right;"><a class="viewPrint" href="spectreuser.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="chap11.html" title="AHDL Linter Checks">AHDL Linter Checks</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Spectre Classic Simulator, Spectre APS, Spectre X, and Spectre XPS User Guide<br />Product Version 19.1, June 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>13
<a id="pgfId-438906"></a></h1>
<h1>
<a id="pgfId-438907"></a><hr />
<a id="38263"></a>Running a Simulation<hr />
</h1>

<p>
<a id="pgfId-450673"></a>This chapter discusses the following topics:</p>
<ul><li>
<a id="pgfId-450685"></a><a href="chap10.html#45434">Running Spectre in 64-Bit</a></li><li>
<a id="pgfId-452960"></a><a href="chap10.html#39687">Starting Simulations</a></li><li>
<a id="pgfId-450830"></a><a href="chap10.html#34495">Checking Simulation Status</a></li><li>
<a id="pgfId-450686"></a><a href="chap10.html#28612">Interrupting a Simulation</a></li><li>
<a id="pgfId-450676"></a><a href="chap10.html#20010">Recovering from Transient Analysis Terminations</a></li><li>
<a id="pgfId-450818"></a><a href="chap10.html#31406">Controlling Command Line Defaults</a></li></ul>






<h2>
<a id="pgfId-452904"></a><a id="45434"></a>Running <a id="64-Bit"></a>Spectre in 64-Bit</h2>

<p>
<a id="pgfId-454070"></a>You can run 64-bit software using any of the following two methods:</p>
<ul><li>
<a id="pgfId-454074"></a><a href="chap10.html#84395">Using the -64 Command Line Option</a></li><li>
<a id="pgfId-454078"></a><a href="chap10.html#64907">Using the CDS_AUTO_64BIT Environment Variable</a><br /><div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-453920"></a>
Before you run 64-bit software, verify that all required patches are installed by running the <em>System Configuration Checking Tool </em>script, <code>checkSysConf</code>. This script is in your local installation of Cadence<sup> </sup>software, at the following location:</div><br /><pre class="webflare-pre-block webflare-courier-new" id="#id453921">
<a id="pgfId-453921"></a><code><em>your_install_dir</em></code>/bin/checkSysConf MMSIM19.1</pre>
<a id="pgfId-453922"></a><code>MMSIM19.1</code> is a parameter expected by the script.<br />
<a id="pgfId-453924"></a>The <em><a actuate="user" class="URL" href="http://sourcelink.cadence.com/docs/files/releases/sys_conf_check/welcome.html" show="replace" xml:link="simple">System Configuration Checking Tool</a></em> is also available on the Cadence Online Support system. All required patches must be installed for the 64-bit executables to work correctly.</li></ul>








<h4>
<a id="pgfId-453959"></a><a id="84395"></a>Using the -64 Command Line Option</h4>

<p>
<a id="pgfId-452905"></a>For example, run Spectre using the following command:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-454044"></a>your_install_dir/bin/spectre -64 mem.scs</pre>
<h4>
<a id="pgfId-454005"></a><a id="64907"></a>Using the CDS_AUTO_64BIT Environment Variable</h4>

<p>
<a id="pgfId-454090"></a>Do the following:</p>

<ol><li>
<a id="pgfId-452913"></a>Set the environment variable <code>CDS_AUTO_64BIT {ALL|NONE|&quot;</code><span class="webflare-courier-new" style="white-space:pre"><em>list</em></span><code>&quot;|INCLUDE: &quot;</code><span class="webflare-courier-new" style="white-space:pre"><em>list</em></span><code>&quot;|EXCLUDE:&quot;</code><span class="webflare-courier-new" style="white-space:pre"><em>list</em></span><code>&quot;}</code>to select 64-bit executables. <br />
<a id="pgfId-452935"></a> <table class="webflareTable" id="#id452914">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-452916"></a><code>ALL</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-452918"></a>Runs all applications as 64-bit, where available. The list of applications available is in:<br /><span class="webflare-courier-new" style="white-space:pre"><em>your_install_dir</em></span><code>/bin/64bit </code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-452920"></a><code>NONE</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-452922"></a>Runs all applications as 32-bit.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-452924"></a><code>&quot;</code><span class="webflare-courier-new" style="white-space:pre"><em>list</em></span><code>&quot;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-452926"></a>Runs only the executables included in the list, where available, as 64-bit. <span class="webflare-courier-new" style="white-space:pre"><em>list</em></span> is a list of case-sensitive executable names delimited by comma(,), semi-colon(;), or colon(:).</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-452928"></a><code>INCLUDE:&quot;</code><span class="webflare-courier-new" style="white-space:pre"><em>list</em></span><code>&quot;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-452930"></a>Runs all applications in the list as 64-bit, where available.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-452932"></a><code>EXCLUDE:&quot;</code><span class="webflare-courier-new" style="white-space:pre"><em>list</em></span><code>&quot;</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-452934"></a>Runs all applications as 64-bit, where available, except the applications in the list.</p>
</td>
</tr>
</tbody></table><br />
<a id="pgfId-452936"></a>Examples: <pre class="webflare-pre-block webflare-courier-new" id="#id452937">
<a id="pgfId-452937"></a>setenv CDS_AUTO_64BIT spectre </pre><pre class="webflare-pre-block webflare-courier-new" id="#id452938">
<a id="pgfId-452938"></a>setenv CDS_AUTO_64BIT EXCLUDE:&quot;si&quot; </pre></li><li>
<a id="pgfId-452941"></a>Run Spectre using the following command:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id452943">
<a id="pgfId-452943"></a><code><em>your_install_dir</em></code>/bin/spectre </pre></li></ol>









<h2>
<a id="pgfId-452898"></a><a id="39687"></a><a id="40392"></a>Starting Simulations</h2>

<p>
<a id="pgfId-438939"></a>To start a simulation, you type the <code>spectre</code> command at the command line with the following syntax:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-438951"></a>spectre +spice <code><em>options</em></code> <code><em>inputfile</em></code> </pre>

<p>
<a id="pgfId-438949"></a>The <code>spectre</code> command starts a simulation of <span class="webflare-courier-new" style="white-space:pre"><em>inputfile</em></span>. The simulation includes any options you request. For a given simulation, the <code>spectre</code> command options override any settings in default environment variables or <code>options</code> statement specifications. </p>
<p>
<a id="pgfId-453544"></a>The <code>+spice</code> option ensures that Spectre is invoked with the SPICE-compatible parser. In addition, it also </p>
<ul><li>
<a id="pgfId-453551"></a>sets tnom and temp to 25C</li><li>
<a id="pgfId-453552"></a>sets parameter inheritance to global rather than the Spectre default of local. This means that global parameter definitions override local ones.</li><li>
<a id="pgfId-453553"></a>sets flags on all device models to be SPICE compatible. </li><li>
<a id="pgfId-453554"></a>enforces .IC statements and initial conditions on elements for DC and OP analyses. By default, Spectre only forces initial conditions if the DC analysis <code>force</code> option is set.</li></ul>



<p>
<a id="pgfId-439603"></a>The following example starts a simulation of the input file <code>test1</code>.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-439641"></a>spectre +spice te<a id="marker-439986"></a><a id="marker-452181"></a><a id="marker-452179"></a><a id="marker-452177"></a><a id="marker-452175"></a>st1</pre>
<h3>
<a id="pgfId-439228"></a>Specifying Simulation Optio<a id="marker-439989"></a><a id="marker-452171"></a>ns</h3>

<p>
<a id="pgfId-438926"></a>Many simulation runs require more complicated instructions than the previous example. Spectre<sup>&#174;</sup> circuit-simulator-run options can be specified in two ways. Which method you use depends on the run option.</p>
<ul><li>
<a id="pgfId-439671"></a>You specify some Spectre options by typing a minus (<code>-</code>) in front of the option. The (<code>-V</code>) in the following example specifies that version information be printed for the simulation of circuit <code>test1</code>.<br /><pre class="webflare-pre-block webflare-courier-new" id="#id439688">
<a id="pgfId-439688"></a>spectre -V test1</pre></li><li>
<a id="pgfId-439695"></a>You activate some Spectre options by typing a plus (<code>+</code>) before the option. You deactivate these options by typing a minus (<code>-</code>) before the option. For example, the following <code>spectre</code> command starts a simulation run for circuit <code>test1</code>. In this simulation, the Spectre simulator sets checkpoints but does not print error messages:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id451711">
<a id="pgfId-451711"></a>spectre +checkpoint -error test1</pre></li></ul>







<p>
<a id="pgfId-452784"></a>Some Spectre options have abbreviations. You can find these abbreviations in <h-hot><a actuate="user" class="URL" href="../spectreref/chap2.html#firstpage" show="replace" xml:link="simple">Chapter 2, &#8220;Spectre Command Options,&#8221;</a></h-hot> of the <em>Spectre Circuit Simulator Reference</em> manual. For example, you can type the previous command as follows:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-438972"></a>spectre +cp -error test1</pre>

<p>
<a id="pgfId-438991"></a>Specific <code>spectre</code> command options are discussed throughout this guide. For a complete list of options and formats, see <h-hot><a actuate="user" class="URL" href="../spectreref/chap2.html#firstpage" show="replace" xml:link="simple">Chapter 2, &#8220;Spectre Command Options,&#8221;</a></h-hot> of the <em>Spectre Circuit Simulator Reference</em> manual.</p>

<h3>
<a id="pgfId-453861"></a>Using License Queuing<a id="marker-452897"></a> </h3>

<p>
<a id="pgfId-455194"></a>You can turn on license queuing by using the <code>lqtimeout</code> command line option:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-455195"></a>spectre +lqtimeout time</pre>

<p>
<a id="pgfId-455196"></a>If a license is not available when you begin a simulation job, the Spectre circuit simulator waits in queue for a license for the specified time. If you specify the value <code>0</code> for this option, the Spectre circuit simulator waits indefinitely for a license. The <code>lqtimeout</code> option ha s no default value for the standalone Spectre circuit simulator. If you invoke Spectre through the Analog Design Environment, the default value for <code>lqtimeout</code> is 900 seconds.</p>
<p>
<a id="pgfId-455197"></a>You can use the <code>lqsleep</code> option to specify the interval (in seconds) at which the Spectre circuit simulator should check for license availability. The default value for <code>lqsleep</code> is 30 seconds. </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-455198"></a>spectre +lqsleep interval</pre>

<p>
<a id="pgfId-455199"></a>For more information on any of the above options, see <code>spectre -h</code>.</p>

<h3>
<a id="pgfId-455475"></a>Suspending a Simulation Automatically When Disk Space is Low</h3>

<p>
<a id="pgfId-455592"></a>You can use the <code>+disk_check</code> command-line option to suspend a simulation when the disk space is lower than the specified threshold. When Spectre finds the available disk space to be less than the specified threshold value, it immediately suspends the simulation and generates a warning message. You can free up the disk space and type <code>kill</code> <code>-s CONT &lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>pid</em></span><code>&gt;</code> at the command line to resume the simulation. However, if you set the option <code>disk_check_autoresume=yes</code> in the <code>options</code> statement, the simulation is resumed automatically once you free up the disk space.</p>
<p>
<a id="pgfId-455584"></a>The threshold value can also be set using the <code>disk_check_thresh</code> option in the <code>options</code> statement, as follows:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-455540"></a>Opts options disk_check_thresh=1E9</pre>

<p>
<a id="pgfId-455562"></a>The above statement sets the disk space threshold value to 1 gigabytes. The default value for the option <code>disk_check_thresh </code>is 1M.</p>

<h3>
<a id="pgfId-455512"></a>Suspending<a id="suspend"></a> and Resuming Licenses</h3>

<p>
<a id="pgfId-455202"></a><a actuate="user" class="URL" href="http://www.adobe.com" show="replace" xml:link="simple">You can direct Spectre to release licenses when suspending a simulation job. This feature is aimed for users of simulation farms, where the licenses in use by a group of lower priority jobs may be needed for a group of higher priority jobs. To enable this feature, simply start Spectre with the </a><code>+lsuspend</code> command line option. Press <code>ctrl+z</code> to suspend the simulation run and release the Spectre license. All licenses are checked in. To resume simulation, press <code>fg</code>. These keystrokes may not work if you have changed the default key bindings. </p>
<p>
<a id="pgfId-455438"></a>You can also use the <code>kill</code> command to suspend and resume the simulation. You can suspend a simulation with <code>kill -s TSTP &lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>pid</em></span><code>&gt;</code>. To resume the simulation, type <code>kill</code> <code>-s CONT &lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>pid</em></span><code>&gt;</code>.</p>
<p>
<a id="pgfId-455206"></a>In Virtuoso<sup>&#174;</sup> Analog Design Environment, the <code>lqtimeout</code> and <code>lqsleep</code> options are controlled by the following options:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-455207"></a>spectre.envOpts lsuspend boolean t</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-455208"></a>spectre.envOpts licQueueTimeOut string&#160;&quot;900&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-455209"></a>spectre.envOpts licQueueSleep string&#160;&quot;30&quot;</pre>
<h3>
<a id="pgfId-452827"></a>Determining Wheth<a id="marker-440028"></a><a id="marker-452161"></a>er a Simulation Wa<a id="marker-439993"></a><a id="marker-452163"></a>s Successful</h3>

<p>
<a id="pgfId-450052"></a>When the Spectre simulator <a id="marker-450050"></a>finishes a simulation<a id="marker-450051"></a>, it sets the shell status variable to one of the following values:</p>

<p>
<a id="pgfId-452987"></a></p>
<table class="webflareTable" id="#id452966">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-452968"></a><code>0</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-452971"></a>If the Sp<a id="marker-452970"></a>ectre simulator completed the simulation normally</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-452973"></a><code>1</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-452976"></a>If the Spe<a id="marker-452975"></a>ctre simulator stopped any analysis because of an error</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-452978"></a><code>2</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-452981"></a>If the Sp<a id="marker-452980"></a>ectre simulator stopped the simulation early because of a Spectre error condition</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-452983"></a><code>3</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-452986"></a>If a Sp<a id="marker-452985"></a>ectre simulation was stopped by you or by the operating system</p>
</td>
</tr>
</tbody></table>
<h2>
<a id="pgfId-453167"></a><a id="34495"></a>Checking Simulation Status<a id="marker-453163"></a><a id="marker-453164"></a><a id="marker-453165"></a><a id="marker-453166"></a></h2>

<p>
<a id="pgfId-452994"></a>If you want to check the status of a simulation during a run, type the following UNIX command:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-438978"></a>% kill -USR1 <code><em>PID</em></code></pre>

<p>
<a id="pgfId-438979"></a><span class="webflare-courier-new" style="white-space:pre"><em>PID</em></span> is the Spectre process identification number, which you can find by activating the UNIX <code>ps</code><a id="marker-440129"></a><a id="marker-452147"></a> uti<a id="marker-440144"></a>lity.</p>
<p>
<a id="pgfId-438980"></a>The Spectre simulator displays the status information on the screen or sends it to standard output if it cannot write to the screen. If you check the status from a remote terminal, the Spectre simulator also writes the status to the <code>SpectreStatus</code><a id="marker-440139"></a> file in the directory from which the Spectre simulator was called. The Spectre simulator deletes this file at termination of the run.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-438911"></a>You can also give Spectre netlist instructions to display some status information. For more information, consult the Spectre online help about the <code>sweep</code> and <code>steps</code> options for the <code>annotate</code> parameter. You can set the <code>annotate</code><a id="marker-440134"></a> parameter for most Spectre analyses.</div>

<h2>
<a id="pgfId-438931"></a><a id="28612"></a>Interrupting a Simulation<a id="marker-440149"></a><a id="marker-452137"></a><a id="marker-452135"></a><a id="marker-452133"></a></h2>

<p>
<a id="pgfId-438959"></a>If you want to stop the Spectre simulator while a simulation is running, do one of the following:</p>
<ul><li>
<a id="pgfId-438983"></a>Send an IN<a id="marker-440150"></a>T signal with your interrupt character. <br />
<a id="pgfId-438973"></a>The interrupt character is usually <code>Control-c</code>. You can get information about the interrupt character for your system with the UNIX <code>stty</code><a id="marker-440153"></a> utility.</li><li>
<a id="pgfId-438984"></a>Send the INT signal with a <code>kill(1)</code><a id="marker-440151"></a> command.</li></ul>


<p>
<a id="pgfId-438985"></a>When you use either of these commands, the Spectre simulator prepares the incomplete output data file for reading by the postprocessor and then stops the simulation.</p>

<div class="webflare-information-macro webflare-macro-warning">
<a id="pgfId-438986"></a>
Do not stop the Spectre simulator with a ki<a id="marker-440152"></a>ll -9 command. This command stops the simulation before the Spectre simulator can prepare the output files for reading by the postprocessor.</div>
<h2>
<a id="pgfId-438947"></a><a id="20010"></a>Recovering <a id="save-restart"></a>from Transient Analysis Term<a id="marker-440175"></a>inations<a id="marker-440154"></a></h2>

<p>
<a id="pgfId-438989"></a>If a transient analysis ends before a successful conclusion, you can recover the work that is completed and restart the analysis. The Spectre simulator needs saved state or checkpoint files to perform this recovery. State files save the current state of the simulation whereas checkpoint files save only the circuit operating point and simulation time at the specified point during the simulation. When re-starting an aborted simulation with a saved state file, convergence issues, glitches, and potential inaccuracies associated with the checkpoint mechanism are prevented. </p>
<p>
<a id="pgfId-453667"></a>You can change the netlist parameters (global, subcircuit, instance), temperature, simulation tolerances, and stop time between savestate and restart. You cannot change the topology and the platform you are running the simulation on. </p>
<p>
<a id="pgfId-453299"></a>This section tells you how to create saved state and checkpoint files. It also tells you how to restart a simulation after a transient analysis termination.</p>

<h3>
<a id="pgfId-453493"></a>Creating Saved State Files</h3>

<p>
<a id="pgfId-453502"></a>You can save the current state of the system periodically during a simulation, so that if the simulation is interrupted, you can re-run the simulation from the last saved point. You can also use the save state feature to run a simulation up to a point, and then re-run the last portion of the simulation several times to investigate how the circuit responds to different stimuli. You can try various accuracy settings for different time periods to get the best performance for your simulation. </p>
<p>
<a id="pgfId-453503"></a>To create a saved state file, </p>
<ol><li>
<a id="pgfId-453504"></a>Enable save state by typing <code>+savestate</code> as a command line argument to the <code>spectre</code> command that starts the simulation. Savestate is enabled by default.</li><li>
<a id="pgfId-453506"></a>Specify the time points and file to save the state to:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id453507">
<a id="pgfId-453507"></a>analysisName tran stop=<code><em>stoptime</em></code> [ [saveperiod=<code><em>time</em></code>] | [savetime=[<code><em>time1</em></code> <code><em>time2</em></code>&#8230;]] | [saveclock=<code><em>clock_time</em></code>] ] [savefile=<code><em>filename</em></code>.srf] </pre>
<a id="pgfId-453508"></a>where <br />
<a id="pgfId-453530"></a> <table class="webflareTable" id="#id453509">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<span class="tbl-head" id="#id453511">
<a id="pgfId-453511"></a>If you specify </span>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<span class="tbl-head" id="#id453513">
<a id="pgfId-453513"></a>Spectre</span>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-453515"></a><code>saveperiod=</code><span class="webflare-courier-new" style="white-space:pre"><em>time </em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-453517"></a>generates a saved state file at the specified transient simulation time interval. Only the last generated saved state file is kept. </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-453519"></a><code>savetime=[</code><span class="webflare-courier-new" style="white-space:pre"><em>time1</em></span><code> </code><span class="webflare-courier-new" style="white-space:pre"><em>time2</em></span>&#8230;<code>]</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-453521"></a>generates a saved state file at each specified time point and suffixes ascending numbers to the file name (<span class="webflare-courier-new" style="white-space:pre"><em>filename</em></span>.srf<span class="webflare-courier-new" style="white-space:pre"><em>#</em></span>) where <span class="webflare-courier-new" style="white-space:pre"><em>#</em></span>=0, 1, 2&#8230;</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-453523"></a><code>saveclock=</code><span class="webflare-courier-new" style="white-space:pre"><em>clock_time</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-453525"></a>generates a saved state file at the specified real time interval. Default value is 30 minutes for Spectre. Spectre APS does not have any time limit for the <code>saveclock</code> period.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-453527"></a>savefile=<span class="webflare-courier-new" style="white-space:pre"><em>filename</em></span>.srf</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-453529"></a>saves the state to the specified file. Default name is <span class="webflare-courier-new" style="white-space:pre"><em>%C</em></span>.<span class="webflare-courier-new" style="white-space:pre"><em>%A</em></span>.srf where <span class="webflare-courier-new" style="white-space:pre"><em>%C</em></span> is the input circuit file name and <span class="webflare-courier-new" style="white-space:pre"><em>%A</em></span> is the analysis name. </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-455055"></a>savefile=<span class="webflare-courier-new" style="white-space:pre"><em>filename</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-455099"></a>saves the state to file <span class="webflare-courier-new" style="white-space:pre"><em>filename@time1</em></span>, <span class="webflare-courier-new" style="white-space:pre"><em>filename@time2</em></span><code> </code>and so on.</p>
<p>
<a id="pgfId-455132"></a>Default name is <span class="webflare-courier-new" style="white-space:pre"><em>%C.%A.srf_@time1</em></span>, <span class="webflare-courier-new" style="white-space:pre"><em>%C.%A.srf_@time2</em></span>... where <span class="webflare-courier-new" style="white-space:pre"><em>%C</em></span> is the input circuit file name and <span class="webflare-courier-new" style="white-space:pre"><em>%A</em></span> is the analysis name.</p>
</td>
</tr>
</tbody></table></li></ol>









<p>
<a id="pgfId-453531"></a>If more than one time point parameter is specified, the Spectre circuit simulator utilizes the parameters in the order as given in the table above &#8211; i.e., <code>saveperiod</code>, <code>savetime</code>, and then <code>saveclock</code>.</p>
<p>
<a id="pgfId-454403"></a>By de<a id="marker-454402"></a>fault, the Spectre simulator creates checkpoint files every 30 minutes during a transient analysis. In the case of Spectre APS, the <code>saveclock</code> period is set to infinity due to which, checkpoint files are not created unless <code>saveclock</code> is specifically set to a smaller value. The Spectre simulator deletes the savestate files when the simulation ends successfully. </p>
<p>
<a id="pgfId-453739"></a>The Spectre simulator attempts to save the state file after QUIT, TERM, INT, or HUP interrupts. After other interrupt signals, the Spectre simulator might be unable to save the state file.</p>

<h3>
<a id="pgfId-453496"></a>Creating checkpoint Files</h3>

<p>
<a id="pgfId-453494"></a>This section talks about the following ways to create checkpoint files:</p>
<ul><li>
<a id="pgfId-439007"></a>Automatically, with defaults and <code>options</code> statement settings</li><li>
<a id="pgfId-439008"></a>From the command line during a simulation</li><li>
<a id="pgfId-439009"></a>For specific analyses with netlist instructions</li></ul>


<p>
<a id="pgfId-439010"></a>This section also tells you how to restart a simulation after a transient analysis termination.</p>

<h4>
<a id="pgfId-439296"></a>Reactivating Automatic Recovery fo<a id="marker-440190"></a>r a Single Simulation</h4>

<p>
<a id="pgfId-438992"></a>If you have deactivated the default setting (by putting the <code>-checkpoint</code> setting in an environment variable), you can reactivate the default value for a given simulation run with the following procedure: </p>
<ul><li>
<a id="pgfId-439012"></a>Type <code>+checkpoint</code><a id="marker-440227"></a><a id="marker-452173"></a> as a command line argument to the <code>spectre</code> command that starts the simulation.</li></ul>

<h4>
<a id="pgfId-439317"></a>Determining How Often the Spectre Simulator Cr<a id="marker-440199"></a>eates Recovery Files</h4>

<p>
<a id="pgfId-438955"></a>If you want to change how often the Spectre simulator creates checkpoint files for a particular simulation, or if you want your checkpoint files saved after a successful completion, you should set the <code>ckptclock</code> parameter of the <code>options</code> statement. For more information about the <code>options</code> statement, consult the parameter listings in the Spectre online help (<code>spectre -h</code>). </p>
<p>
<a id="pgfId-438948"></a>The following <code>options</code> statement tells the Spectre simulator to create checkpoint files every 3 1/2 minutes for all transient analyses in a simulation. (You indicate parameters for <code>ckptclock</code> in seconds.)</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-439002"></a>SetCkptInterval opti<a id="marker-440213"></a>ons ckptclock=210</pre>
<h3>
<a id="pgfId-439344"></a>Creating Recovery Files from<a id="marker-440248"></a> the Command Line</h3>

<p>
<a id="pgfId-438999"></a>You can create a checkpoint file when a transient analysis is running with a UNIX interrupt signal from the command line. </p>
<ul><li>
<a id="pgfId-439005"></a>To create a checkpoint file from the command line, send a <code>USR2</code> signal with a UNIX <code>kill</code> command. <br /><pre class="webflare-pre-block webflare-courier-new" id="#id439857">
<a id="pgfId-439857"></a>kill -USR<a id="marker-440264"></a>2 <code><em>PID</em></code></pre>
<a id="pgfId-439890"></a>(You find the necessary process identification number by running the UNIX <code>ps</code> utility.)</li></ul>




<p>
<a id="pgfId-439006"></a>The Spectre simulator also attempts to write a che<a id="marker-440280"></a>ckpoint file after QUIT, TERM, INT, or HUP interrupts. After other interrupt signals, the Spectre simulator might be unable to write a checkpoint file.</p>

<h3>
<a id="pgfId-439369"></a>Setting Recovery File Specifi<a id="marker-440304"></a><a id="marker-452159"></a>cations for a Single Analysis</h3>

<p>
<a id="pgfId-439001"></a>When you specify a transient analysis, you can also create periodic checkpoint files for that analysis. </p>
<ul><li>
<a id="pgfId-438996"></a>To create periodic checkpoint files for a transient analysis, set the <code>ckptperiod</code><a id="marker-440296"></a><a id="marker-452113"></a> parameter in the transient analysis statement.</li></ul>
<p>
<a id="pgfId-438998"></a>The following example creates a checkpoint every 20 seconds during the transient analysis <code>SineResponse</code>:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-438945"></a>SineResponse tran stop=150u ckptperiod=20</pre>
<h3>
<a id="pgfId-439398"></a>Restarting a Transient Anal<a id="marker-440313"></a><a id="marker-452157"></a>ysis</h3>

<p>
<a id="pgfId-453221"></a>You can restart a transient analysis from the last saved state file or checkpoint file. </p>
<p>
<a id="pgfId-453222"></a>To restart a transient analysis from the last saved state file, do one of the following,</p>
<ul><li>
<a id="pgfId-453226"></a>Add the <code>+recover</code>=[<span class="webflare-courier-new" style="white-space:pre"><em>filename</em></span>] argument to the <code>spectre</code> command line</li><li>
<a id="pgfId-453238"></a>Add the <code>recover</code> argument to the <code>tran</code> statement as follows:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id453246">
<a id="pgfId-453246"></a>analysisName tran recover=<code><em>filename</em></code></pre></li></ul>




<p>
<a id="pgfId-453278"></a>To restart a transient analysis from the last checkpoint file, </p>
<ul><li>
<a id="pgfId-453279"></a>Add the <code>+recover</code> argument to the <code>spectre</code> command line</li></ul>

<h3>
<a id="pgfId-453759"></a>Output Directory after Recovery</h3>

<p>
<a id="pgfId-453768"></a>A new raw directory is created when recovering a saved state. The raw directory name is the same as the run directory name with an index number added, such as *.raw# where # is 0, 1, 2,...</p>
<p>
<a id="pgfId-453766"></a>For example, if the raw directory in the first run is <code>input.raw</code>, the recovered raw directory is <code>input.raw0</code>. The next recovered raw directory is named <code>input.raw0</code> and so on. </p>

<h2>
<a id="pgfId-453286"></a><a id="31406"></a><a id="13363"></a>Controlling Command Line Defaults<a id="marker-453283"></a><a id="marker-453284"></a><a id="marker-453285"></a></h2>

<p>
<a id="pgfId-453287"></a>There are many run options you can specify with either the <code>spectre</code> command or the <code>options</code> statement. The Spectre simulator provides defaults for many of these options, so you can avoid the inconvenience of specifying many options for each simulation. Spectre defaults are satisfactory for most situations, but, if you have specialized needs, you can also set your own defaults. Spectre command line defaults control the following general areas:</p>
<ul><li>
<a id="pgfId-438962"></a>Me<a id="marker-440352"></a><a id="marker-452121"></a>ssages from the Spectre simulator</li><li>
<a id="pgfId-438969"></a>Destin<a id="marker-440360"></a><a id="marker-452119"></a>ation and format of results</li><li>
<a id="pgfId-438990"></a>Default values for the C preproc<a id="marker-440368"></a><a id="marker-452117"></a><a id="marker-452115"></a>essor</li><li>
<a id="pgfId-439014"></a>Default values for perce<a id="marker-440376"></a><a id="marker-452125"></a><a id="marker-452123"></a>nt codes</li><li>
<a id="pgfId-439015"></a>Creating checkp<a id="marker-440384"></a>oints and initiating recoveries</li><li>
<a id="pgfId-439016"></a>Scree<a id="marker-440392"></a>n display</li><li>
<a id="pgfId-439017"></a>Name <a id="marker-440400"></a>of the simulator</li><li>
<a id="pgfId-439018"></a>Simulation envir<a id="marker-440408"></a>onment (such as <code>opus</code>, <code>edge</code>, and so on)</li></ul>








<h3>
<a id="pgfId-439413"></a>Exami<a id="marker-440416"></a>ning the Spectre Simulator Defaults</h3>

<p>
<a id="pgfId-441712"></a>You can identify the various Spectre defaults by consulting the detailed description of <code>spectre</code> command options in the <em><a actuate="user" class="URL" href="../spectreref/chap2.html#firstpage" show="replace" xml:link="simple">Spectre Circuit Simulator Reference</a></em> manual.</p>

<h3>
<a id="pgfId-441714"></a>Setting Yo<a id="marker-441713"></a><a id="marker-452131"></a>ur Own Defaults</h3>

<p>
<a id="pgfId-439022"></a>You can set your own defaults by setting the UNIX environment variables <code>%S_DEFAULTS</code><a id="marker-440435"></a> or <code>SPECTRE_DEFAULTS</code><a id="marker-440445"></a>. In <code>%S_DEFAULTS</code>, <code>%S</code> is replaced by the name of the simulator, so this variable is typically <code>SPECTRE_DEFAULTS</code>. However, the name created by the <code>%S</code> substitution is different if you move the executable to a file with a different name or if you call the program with a symbolic or hard link with a different name. Consequently, you can create multiple sets of defaults, which you identify with different <code>%S</code> substitutions. Initially, the Spectre simulator looks for defaults settings in <code>%S_DEFAULTS</code>. If this variable does not exist, it looks for default settings in <code>SPECTRE_DEFAULTS</code>. </p>
<p>
<a id="pgfId-439023"></a>To set these environm<a id="marker-440470"></a>ent variables, use the following procedure. </p>
<ul><li>
<a id="pgfId-439024"></a>In an appropriate file, such as <code>.cshrc</code><a id="marker-440481"></a> or <code>.login</code><a id="marker-440492"></a>, use the appropriate <a id="marker-440503"></a>UNIX command to create settings for the environment variables <code>%S_DEFAULTS</code> or <code>SPECTRE_DEFAULTS</code>. Format the new default settings like <code>spectre</code> command line arguments and place them in quotation marks.</li></ul>
<p>
<a id="pgfId-439025"></a>The following example changes the default output format from <code>psfbin</code> to <code>psfxl</code>. It also sets an option that is normally deactivated. It sends all messages from the Spectre simulator to a <code>%C:r.log</code> file.</p>
<p>
<a id="pgfId-444935"></a>For <code>csh</code>:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-439026"></a>setenv SPECTRE_DEFAULTS &quot;-format psfxl +log %C:r.log &quot;</pre>

<p>
<a id="pgfId-443794"></a>For <code>sh</code> or <code>ksh</code>:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-445003"></a>SPECTRE_DEFAULTS=&quot; -format psfxl +log %C:r.log &quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-445041"></a>EXPORT SPECTRE_DEFAULTS</pre>
<div class="webflare-information-macro webflare-macro-video">
<a id="pgfId-442861"></a>
To view a demonstration on controlling the Spectre output, see <em><a actuate="user" class="URL" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1Od0000007MVxCEAW&amp;pageName=ArticleContent&amp;sq=005d0000001T3sVAAS_2016122020319656" show="replace" xml:link="simple">Controlling Spectre Outputs Using the Environment Variable Setting</a></em> video.</div>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-455780"></a>Access to this video will depend on the availability of a web browser and a Cadence Online Support account.</div>
<p>
<a id="pgfId-455719"></a>This second example, a typical use of the <code>SPECTRE_DEFAULTS</code> environment variable, tells the Spectre simulator to do the following:</p>
<ul><li>
<a id="pgfId-441259"></a>Write a log file named <span class="webflare-courier-new" style="white-space:pre"><em>cktfile</em></span><code>.out</code>, where <span class="webflare-courier-new" style="white-space:pre"><em>cktfile</em></span> is the name of the input file minus any dot extension.</li><li>
<a id="pgfId-441166"></a>Use the parameter soft limits file in the Cadence<sup>&#174;</sup> software hierarchy.<br /><pre class="webflare-pre-block webflare-courier-new" id="#id441207">
<a id="pgfId-441207"></a>setenv SPECTRE_DEFAULTS &quot;+log %C:r.out +param /cds/etc/spectre/range.lmts&quot; </pre></li></ul>




<p>
<a id="pgfId-442873"></a>You can use the default settings to specify alternative conditions for running the Spectre simulator. Suppose you create the following environment variables:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-442449"></a>setenv SPECTRE_DEFAULTS &quot;+param range.lmts +log %C:r.o -E&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-442470"></a>setenv SPECSIM_DEFAULTS &quot;+param corner.lmts =log %C:r.log \
&#160;&#160;&#160;&#160;-f psfbin&quot;</pre>

<p>
<a id="pgfId-442539"></a>If <code>spectre</code> and <code>specsim</code> are both links to the Spectre executable, and you run the executable as <code>spectre</code><em>,</em> the Spectre simulator does the following:</p>
<ul><li>
<a id="pgfId-442605"></a>Reads the file <code>range.lmts</code> for the parameter limits</li><li>
<a id="pgfId-442625"></a>Directs all messages to the screen <em>and</em> to a log file named after the circuit file with <code>.o</code> appended (see Chapter 13, &#8220;Managing Files,&#8221; for more information about specifying filenames)</li><li>
<a id="pgfId-442631"></a>Runs the C preprocessor</li></ul>


<p>
<a id="pgfId-442540"></a>Running the executable as <code>specsim</code> causes the Spectre simulator to select a different set of defaults and to do the following:</p>
<ul><li>
<a id="pgfId-442737"></a>Read the range limits from the file <code>corner.lmts</code></li><li>
<a id="pgfId-442743"></a>Direct log messages to a file named after the circuit file with <code>.log</code> appended (the <code>=log</code> specification suppresses the log output to the screen)</li><li>
<a id="pgfId-442749"></a>Format output files in binary paramet<a id="marker-451077"></a><a id="marker-452145"></a><a id="marker-452143"></a>er storage format (PSF) </li></ul>



<h3>
<a id="pgfId-439443"></a>References for Additional Information about Specific Defaults </h3>

<p>
<a id="pgfId-439028"></a>In some cases, you need to consult other sections of this book before you can set defaults.</p>
<ul><li>
<a id="pgfId-455695"></a>If you want to set default limits for warning messages about parameter values, consult <a href="chap17.html#26551">Chapter 20, &#8220;Identifying Problems and Troubleshooting,&#8221;</a> to find information about installing Cadence defaults or creating your own range limits file if you need to customize defaults.</li><li>
<a id="pgfId-455699"></a>You can find additional information about percent code defaults in <a href="chap16.html#51257">Description of Spectre Predefined Percent Codes</a>.</li></ul>


<h3>
<a id="pgfId-455702"></a>Overriding Defa<a id="marker-455700"></a><a id="marker-455701"></a>ults </h3>

<p>
<a id="pgfId-441059"></a>You can override defaults in the UNIX environment variables for a given simulation with either <code>spectre</code><a id="marker-441060"></a> command-line arguments or <code>options</code><a id="marker-441061"></a><a id="marker-452139"></a> statement specifications. The <code>spectre</code> command-line arguments also override <code>options</code> statement specifications.</p>

<div class="webflare-information-macro webflare-macro-video">
<a id="pgfId-455811"></a>
To view the demonstration on overriding the defaults, see <em><a actuate="user" class="URL" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1Od0000007MVxqEAG&amp;pageName=ArticleContent&amp;sq=005d0000001T3sVAAS_2016122020319656" show="replace" xml:link="simple">Controlling Spectre Outputs during Run Time</a></em> video. </div>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-455859"></a>Access to this video will depend on the availability of a web browser and a Cadence Online Support account.</div>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="chap9.html" id="prev" title="Specifying Output Options">Specifying Output Options</a></em></b><b><em><a href="chap11.html" id="nex" title="AHDL Linter Checks">AHDL Linter Checks</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>