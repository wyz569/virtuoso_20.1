
<html><head><title>The Spectre X Circuit Simulator</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="kamal" />
<meta name="CreateDate" content="2020-06-16" />
<meta name="CreateTime" content="1592307310" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the Spectre Circuit Simulator." />
<meta name="DocTitle" content="Spectre Classic Simulator, Spectre APS, Spectre X, and Spectre XPS User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="The Spectre X Circuit Simulator" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2" />
<meta name="Keyword" content="spectreuser" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-06-16" />
<meta name="ModifiedTime" content="1592307310" />
<meta name="NextFile" content="spectrexps.html" />
<meta name="Order" content="1" />
<meta name="Group" content="Spectre Simulator" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="spectreaps.html" />
<meta name="c_product" content="Spectre" />
<meta name="Product" content="Spectre" />
<meta name="ProductFamily" content="Spectre" />
<meta name="ProductVersion" content="19.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre Classic Simulator, Spectre APS, Spectre X, and Spectre XPS User Guide -- The Spectre X Circuit Simulator" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="Version" content="19.1" />
<meta name="SpaceKey" content="spectreuser191" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="spectreuserTOC.html">Contents</a></li><li><a class="prev" href="spectreaps.html" title="The Spectre APS Circuit Simulator">The Spectre APS Circuit Simula ...</a></li><li style="float: right;"><a class="viewPrint" href="spectreuser.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="spectrexps.html" title="The Spectre XPS Circuit Simulator">The Spectre XPS Circuit Simula ...</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Spectre Classic Simulator, Spectre APS, Spectre X, and Spectre XPS User Guide<br />Product Version 19.1, June 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>4
<a id="pgfId-1065082"></a></h1>
<h1>
<a id="pgfId-1065083"></a><hr />
<a id="36930"></a>The Spectre X Circuit Simulator<hr />
</h1>

<p>
<a id="pgfId-1087241"></a>Recent technology developments, advanced node adoption, and More than Moore design, have forced analog and custom IC designers to adopt new design practices to benefit from these advancements. These changes have resulted in the need to simulate larger designs with more postlayout parasitics. In addition, many custom IC designs, such as flash memory, MRAM, sensor arrays, and so on, now require SPICE-accurate simulations. To meet these demands, a new SPICE engine with much more performance and capacity than the current generation of circuit simulators is needed. The Cadence&#174; Spectre&#174; X Simulator is the next generation of the Spectre circuit simulator that has been developed to address the need for a simulator capable of simulating the next generation of analog, mixed-signal, and custom IC designs.</p>
<p>
<a id="pgfId-1087292"></a>Spectre X includes two major technologies:</p>
<ul><li>
<a id="pgfId-1087293"></a>Enhanced multi-core simple use model simulation capacity and performance with <code>+preset</code></li><li>
<a id="pgfId-1087288"></a>Highly distributed circuit simulation with <code>+xdp</code></li></ul>

<p>
<a id="pgfId-1088060"></a>This chapter discusses the following topics:</p>
<ul><li>
<a id="pgfId-1088110"></a><a href="spectrex.html#88364">Using the Spectre X +preset Option</a></li><li>
<a id="pgfId-1088142"></a><a href="spectrex.html#60972">Migrating from Spectre APS</a></li><li>
<a id="pgfId-1088149"></a><a href="spectrex.html#88517">Using the Spectre X +xdp Option</a></li></ul>



<h2>
<a id="pgfId-1087325"></a><a id="88364"></a>Using the Spectre X +preset Option</h2>

<p>
<a id="pgfId-1087326"></a>Spectre X provides five high-level <code>+preset</code> options (<code>cx</code>, <code>ax</code>, <code>mx</code>, <code>lx</code>, <code>vx</code>) that allow you to trade off accuracy and performance. These high-level options not only control solver settings, but also enable parasitic optimization after automatically detecting postlayout designs. The <code>cx</code> mode provides the highest accuracy, while the <code>vx</code> mode provides the highest performance. Spectre X ignores the Spectre APS command line options <code>+aps</code>, <code>++aps</code>, <code>+postlayout</code>, <code>+errpreset</code>.</p>
<p>
<a id="pgfId-1087327"></a>To start a Spectre X simulation, type the following at the command line:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1087328"></a>% spectre +preset=mx input.scs</pre>

<p>
<a id="pgfId-1087421"></a>The following provides guidance on the <code>+preset</code> selection options:</p>

<p>
<a id="pgfId-1087875"></a></p>
<table class="webflareTable" id="#id1087662">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1087728">
<a id="pgfId-1087728"></a>Option Name</span>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1087730">
<a id="pgfId-1087730"></a>When to Use...</span>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087732"></a>cx</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087734"></a>when a golden simulation reference is needed</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087736"></a>ax</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087738"></a>for high-precision analog applications</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087769"></a>mx</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087771"></a>for most analog applications (default)</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087773"></a>lx</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087775"></a>for power management and other relaxed analog applications</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087777"></a>vx</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087779"></a>for custom IC verification</p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1087365"></a>Spectre X <code>+preset</code> uses the same multi-core simulation approach and use model as Spectre APS. By default, 8 cores are used.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1087366"></a>% spectre +preset=mx input.scs +mt=4</pre>

<p>
<a id="pgfId-1087367"></a>While postlayout optimization enabled by the <code>+preset</code> settings is sufficient in most cases, there may be designs that require you to adjust, or disable postlayout optimization. You can do this by using the <code>+postlpreset</code> command-line option, which accepts the following values: <code>off</code>, <code>cx</code>, <code>ax</code>, <code>mx</code>, <code>lx</code>, and <code>vx</code>. The <code>+postlpreset</code> command-line option can also be used to enforce postlayout optimization in case Spectre X does not detect the postlayout nature of a design.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1087368"></a>% spectre +preset=mx +postlpreset=cx input.scs</pre>

<p>
<a id="pgfId-1087369"></a>By default, Spectre X ignores the user-specified simulation options that trade-off performance and accuracy. </p>
<ul><li>
<a id="pgfId-1089408"></a>Transient options: <code>errpreset</code>, <code>method</code>, <code>relref</code>, <code>lteratio</code>, <code>maxiters</code></li><li>
<a id="pgfId-1089443"></a>Netlist options: <code>reltol</code>, <code>residualtol</code>, <code>vabstol</code>, <code>iabstol</code>, <code>preserve_inst</code></li></ul>

<p>
<a id="pgfId-1089390"></a>However, you can use the <code>-preset_override</code> command-line option to tell Spectre X to honor the user-specified simulation options, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1087370"></a>% spectre +preset=mx -preset_override input.scs</pre>

<p>
<a id="pgfId-1087371"></a>You can also specify the simulation options as a list, separated by a comma, with the <code>-preset_override</code> command-line option to tell Spectre X to selectively honor only those options and ignore the others, as shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1087372"></a>% spectre +preset=mx -preset_override=reltol, method input.scs</pre>

<p>
<a id="pgfId-1087661"></a>In this release, Spectre X targets transient and DC performance improvements. Although other Spectre analyses and features are supported, they do not benefit on performance. Few analyses are not supported in this release and Spectre X ignores these analyses with a warning.</p>

<h2>
<a id="pgfId-1087925"></a><a id="60972"></a>Migrating from Spectre APS</h2>

<p>
<a id="pgfId-1087961"></a>Experienced users of the Spectre APS simulator may have established a preferred set of simulation options for their design styles. The following table provides guidance on which Spectre X mode to use when migrating from Spectre APS to Spectre X:</p>

<p>
<a id="pgfId-1087364"></a></p>
<table class="webflareTable" id="#id1087330">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087332"></a>APS Setting</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087334"></a><code>+aps</code>/<code>++aps</code></p>
<p>
<a id="pgfId-1087335"></a><code>conservative</code></p>
<p>
<a id="pgfId-1087336"></a><code>+postlayout=upa</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087338"></a><code>+aps</code></p>
<p>
<a id="pgfId-1087339"></a><code>moderate</code></p>
<p>
<a id="pgfId-1087340"></a><code>+postlayout=hpa</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087342"></a><code>++aps</code></p>
<p>
<a id="pgfId-1087343"></a><code>moderate</code></p>
<p>
<a id="pgfId-1087344"></a><code>+postlayout=hpa</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087346"></a><code>+aps</code>/<code>++aps</code></p>
<p>
<a id="pgfId-1087347"></a><code>liberal</code></p>
<p>
<a id="pgfId-1087348"></a><code>+postlayout</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087350"></a>Functional Simulation</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087352"></a>Spectre X</p>
<p>
<a id="pgfId-1087353"></a><code>+preset</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087355"></a><code>CX</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087357"></a><code>AX</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087359"></a><code>MX</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087361"></a><code>LX</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1087363"></a><code>VX</code></p>
</td>
</tr>
</tbody></table>
<h2>
<a id="pgfId-1087374"></a><a id="88517"></a>Using the Spectre X +xdp Option</h2>

<p>
<a id="pgfId-1087375"></a>Spectre X distributed simulation allows more computer cores across multiple computer hosts to further speed up DC and transient run time of large to very large, mainly postlayout circuits. A circuit is considered as large when there are at least 500,000 nodes. It has equivalent convergence and accuracy as Spectre X multi-core simulation. The netlist syntax, device models, analysis setups, and output formats are fully compatible with Spectre X multi-core simulation. </p>
<p>
<a id="pgfId-1088351"></a>In this release Spectre X distributed simulation supports the following:</p>
<ul><li>
<a id="pgfId-1088429"></a>DC, transient, assert, and output</li><li>
<a id="pgfId-1088475"></a>alter (limited support); instance and model parameter alter without topology change is supported</li><li>
<a id="pgfId-1088586"></a>info (limited support); <code>what=inst|oppoint</code> is not supported</li></ul>


<p>
<a id="pgfId-1088657"></a>Other analyses and features will be supported in subsequent releases. If an analysis or feature is not supported, Spectre X ignores it with a warning.</p>
<p>
<a id="pgfId-1087377"></a>Spectre X supports the following methods for job distribution: <code>LSF</code>, <code>SGE</code>, <code>PBS</code>, and <code>rsh</code> (or <code>ssh</code>). The command-line options <code>+preset</code> and <code>+xdp</code> are required to invoke the distributed mode. If any of these options is missing, simulation is not run in distributed mode.</p>
<p>
<a id="pgfId-1087378"></a>You can use the following command to distribute a job using <code>rsh</code> across two hosts, <code>hostA</code> and <code>hostB</code> (with each host using four cores):</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1087379"></a>% spectre +preset=mx +xdp +hosts &quot;hostA:4 hostB:4&quot; /hm/test/input.scs</pre>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1087380"></a>The specified path, for example, <code>/hm/test/input.scs</code>, should be network accessible.</div>
<p>
<a id="pgfId-1087381"></a>By default, <code>rsh</code> is used to start jobs on the specified hosts when <code>LSF</code> is not being used.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1087382"></a>% spectre +preset=mx +xdp=rsh +hosts &quot;hostA:4 hostB:4&quot; /hm/test/input.scs</pre>

<p>
<a id="pgfId-1087383"></a>If you need to use <code>ssh</code> instead of <code>rsh</code>, you must specify the <code>ssh</code> argument with the <code>+xdp</code> option; however, the <code>+hosts</code> argument can remain unchanged.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1087384"></a>% spectre +preset=mx +xdp=ssh +hosts &quot;hostA:4 hostB:4&quot; /hm/test/input.scs</pre>

<p>
<a id="pgfId-1087385"></a>In the LSF use model, it is assumed that Spectre X is started using the LSF job submission command, or a user-specific wrapper. Spectre X automatically detects this and queries LSF for a list of hosts allocated to the job by LSF, and the number of cores allocated on each host. Add the <code>+xdp</code> command-line option to ensure that distributed mode is started.</p>
<p>
<a id="pgfId-1087386"></a>In the following example, the <code>bsub</code> command is used to request eight cores, possibly on different machines. Spectre X automatically uses the allocated cores and machines.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1087387"></a>% bsub -n 8 -q rnd -P myProject -R &quot;OSREL==EE70&quot; &quot;spectre +preset=mx +xdp /hm/test/input.scs =log /hm/test/input.log&quot;</pre>

<p>
<a id="pgfId-1087388"></a>Since the <code>span[host=1]</code> option is not provided on the <code>bsub -R</code> resource string, LSF is not required to get all eight cores on the same machine.</p>
<p>
<a id="pgfId-1087389"></a>Use the following <code>bsub</code> command to request two machines, with four cores on each machine, to run the job in distributed mode: </p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1087390"></a>% bsub -n 8 -q rnd -P myProject -R &quot;OSREL==EE70 &amp;&amp; CPUS&gt;=4) span[ptile=4]&quot; &quot;spectre +preset=mx +xdp /hm/test/input.scs =log /hm/test/input.log&quot;</pre>

<p>
<a id="pgfId-1087391"></a>If you want to use SGE instead of LSF, you can use the following equivalent command:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1087392"></a>% qsub -l nodes=2,ppn=1,tpp=4 -V -cwd &quot;spectre +preset=mx +xdp /hm/test/input.scs =log /hm/test/input.log&quot;</pre>

<p>
<a id="pgfId-1087393"></a>If you want to use PBS instead of LSF, you can use the following equivalent command:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1087394"></a>% qsub -l select=2:ncpus=4 -q rnd -P myProject &quot;spectre +preset=mx +xdp /hm/test/input.scs =log /hm/test/input.log&quot;</pre>
<h4><em>
<a id="pgfId-1087395"></a>Notes on Spectre X Distributed Mode</em></h4>

<ul><li>
<a id="pgfId-1087396"></a>It is recommended to use identical machine configurations for all the hosts, and an equal number of cores on each host for performance testing. </li><li>
<a id="pgfId-1087397"></a>Spectre X distributed mode supports up to 128 cores and can be used to simulate designs containing millions of devices.</li><li>
<a id="pgfId-1087398"></a>When running distributed simulation with <code>ssh</code>, it is recommended to use password-less mode by <code>ssh-keygen</code> to generate private and public key. Copy the public key to remote hosts before starting the simulation.</li><li>
<a id="pgfId-1087399"></a>Spectre APS <code>+dp</code> is no longer supported. Use Spectre X <code>+xdp</code> instead.</li></ul>




<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="spectreaps.html" id="prev" title="The Spectre APS Circuit Simulator">The Spectre APS Circuit Simula ...</a></em></b><b><em><a href="spectrexps.html" id="nex" title="The Spectre XPS Circuit Simulator">The Spectre XPS Circuit Simula ...</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>