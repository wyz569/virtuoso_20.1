
<html><head><title>Example Circuits</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="kamal" />
<meta name="CreateDate" content="2020-06-16" />
<meta name="CreateTime" content="1592307223" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the Spectre Circuit Simulator." />
<meta name="DocTitle" content="Spectre Classic Simulator, Spectre APS, Spectre X, and Spectre XPS User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Example Circuits" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2" />
<meta name="Keyword" content="spectreuser" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-06-16" />
<meta name="ModifiedTime" content="1592307223" />
<meta name="NextFile" content="appB.html" />
<meta name="Order" content="1" />
<meta name="Group" content="Spectre Simulator" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="chap17.html" />
<meta name="c_product" content="Spectre" />
<meta name="Product" content="Spectre" />
<meta name="ProductFamily" content="Spectre" />
<meta name="ProductVersion" content="19.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre Classic Simulator, Spectre APS, Spectre X, and Spectre XPS User Guide -- Example Circuits" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="Version" content="19.1" />
<meta name="SpaceKey" content="spectreuser191" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="spectreuserTOC.html">Contents</a></li><li><a class="prev" href="chap17.html" title="Identifying Problems and Troubleshooting">Identifying Problems and Troub ...</a></li><li style="float: right;"><a class="viewPrint" href="spectreuser.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="appB.html" title="Using Compiled-Model Interface">Using Compiled-Model Interface</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Spectre Classic Simulator, Spectre APS, Spectre X, and Spectre XPS User Guide<br />Product Version 19.1, June 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>A
<a id="pgfId-1008781"></a></h1>
<h1>
<a id="pgfId-1011663"></a><hr />
Example Circuits<hr />
</h1>

<p>
<a id="pgfId-1014261"></a>This appendix contains example netlists for testing the BSIM3v3 standard model.</p>
<ul><li>
<a id="pgfId-1014265"></a><a href="appA.html#22398">Notes on the BSIM3v3 Model</a></li><li>
<a id="pgfId-1014269"></a><a href="appA.html#23424">Spectre Syntax</a></li><li>
<a id="pgfId-1014273"></a><a href="appA.html#10451">SPICE BSIM 3v3 Model</a></li><li>
<a id="pgfId-1014277"></a><a href="appA.html#35402">Spectre BSIM 3v3 Model</a></li><li>
<a id="pgfId-1014281"></a><a href="appA.html#11485">Ring Oscillator Spectre Deck for Inverter Ring with No Fanouts (inverter_ring.sp)</a></li><li>
<a id="pgfId-1014285"></a><a href="appA.html#10518">Ring Oscillator Spectre Deck for Two-Input NAND Ring with No Fanouts (nand2_ring.sp)</a></li><li>
<a id="pgfId-1015194"></a><a href="appA.html#30087">Ring Oscillator Spectre Deck for Three-Input NAND Ring with No Fanouts (nand3_ring.sp)</a></li><li>
<a id="pgfId-1015195"></a><a href="appA.html#42393">Ring Oscillator Spectre Deck for Two-Input NOR Ring with No Fanouts (nor2_ring.sp)</a></li><li>
<a id="pgfId-1015200"></a><a href="appA.html#42719">Ring Oscillator Spectre Deck for Three-Input NOR Ring with No Fanouts (nor3_ring.sp)</a></li><li>
<a id="pgfId-1015210"></a><a href="appA.html#28692">Opamp Circuit (opamp.cir)</a></li><li>
<a id="pgfId-1015211"></a><a href="appA.html#23064">Opamp Circuit 2 (opamp1.cir)</a></li><li>
<a id="pgfId-1015221"></a><a href="appA.html#39498">Original Open-Loop Opamp (openloop.sp)</a></li><li>
<a id="pgfId-1015222"></a><a href="appA.html#32000">Modified Open-Loop Opamp (openloop1.sp)</a></li><li>
<a id="pgfId-1015223"></a><a href="appA.html#24505">Example Model Directory (q35d4h5.modsp)</a></li></ul>














<h2>
<a id="pgfId-1014302"></a><a id="22398"></a>Notes on the BSIM3v3 Model</h2>

<p>
<a id="pgfId-1014305"></a>The Sp<a id="marker-1016436"></a><a id="marker-1016691"></a>ectre<sup>&#174;</sup> circuit simulator supports the standard BSIM 3v3 MOS model (both BSIM 3v3.1 and BSIM 3v3.2) as published by the University of California at Berkeley. Further information about this model can be obtained by using Spectre&#8217;s online help by typing <code>spectre -h bsim3v3</code> at the command line or by consulting the BSIM3 home page at</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014313"></a>www-device.eecs.berkeley.edu/~bsim3/index.html</pre>

<p>
<a id="pgfId-1014314"></a>Spectre does not add proprietary parameters to its implementation of the standard model.</p>

<h2>
<a id="pgfId-1014317"></a><a id="23424"></a>Spectre Syntax</h2>

<p>
<a id="pgfId-1014319"></a>Notes explaining Spectre syntax are included as comments throughout the example netlists. </p>
<p>
<a id="pgfId-1014322"></a>The Spectre circuit simulator reads Spice2G6 input along with its own native format. The model card can therefore be specified in either format. Below is an example of each. Note that the valid parameter list does not change, only the primitive name, level designation, and version/type parameters.</p>
<p>
<a id="pgfId-1014329"></a>Beginning with the 4.4.3 release, the Spectre simulator is compatible with SPICE input language beyond documented SPICE2G6. Contact your local Cadence representative for more details.</p>

<h2>
<a id="pgfId-1014333"></a><a id="10451"></a>SPICE BSIM 3v3 Model</h2>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014336"></a>*model = bsim3v3<br />*Berkeley Spice Compatibility <br />*Lmin= .35 Lmax= 20 Wmin= .6 Wmax= 20<br />.model N1 NMOS<br />+Level=11 <br />+Tnom=27.0<br />+Nch=2.498E+17  Tox=9E-09  Xj=1.00000E-07<br />+Lint=9.36e-8  Wint=1.47e-7<br />+Vth0=.6322  K1=.756  K2=-3.83e-2  K3=-2.612 <br />+Dvt0=2.812  Dvt1=0.462  Dvt2=-9.17e-2 <br />+Nlx=3.52291E-08  W0= 1.163e-6  K3b= 2.233<br />+Vsat=86301.58  Ua=6.47e-9  Ub=4.23e-18  Uc=-4.706281E-11 <br />+Rdsw=650  U0=388.3203  wr=1<br />+A0=.3496967  Ags=.1<br />+B0=0.546  B1= 1 <br />+Dwg=-6.0E-09  Dwb=-3.56E-09  Prwb=-.213<br />+Keta=-3.605872E-02  A1=2.778747E-02  A2=.9 <br />+Voff=-6.735529E-02  NFactor=1.139926  Cit=1.622527E-04 <br />+Cdsc=-2.147181E-05  Cdscb= 0 <br />+Dvt0w=0  Dvt1w=0  Dvt2w=0 <br />+Cdscd=0  Prwg=0 <br />+Eta0=1.0281729E-02  Etab=-5.042203E-03 <br />+Dsub=.31871233 <br />+Pclm=1.114846  Pdiblc1=2.45357E-03  Pdiblc2=6.406289E-03 <br />+Drout=.31871233  Pscbe1=5000000  Pscbe2=5E-09 Pdiblcb=-.234<br />+Pvag=0  delta=0.01<br />+Wl=0  Ww=-1.420242E-09  Wwl =  0 <br />+Wln=0  Wwn=.2613948  Ll=1.300902E-10 <br />+Lw=0  Lwl=0  Lln=.316394  Lwn=0<br />+kt1=-.3  kt2=-.051 <br />+At=22400 <br />+Ute=-1.48 <br />+Ua1=3.31E-10  Ub1=2.61E-19  Uc1=-3.42e-10 <br />+Kt1l=0&#160;&#160;Prt=764.3</pre>
<h2>
<a id="pgfId-1014371"></a><a id="35402"></a>Spectre BSIM 3v3 Model</h2>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014374"></a>*Berkeley Spice Compatibility <br />*Lmin= .35 Lmax= 20 Wmin= .6 Wmax= 20<br />simulator lang=spectre<br />model nch bsim3v3<br />+version=3.1<br />+type=n<br />+tnom=27.0<br />+nch=2.498E+17  tox=9E-09  xj=1.00000E-07<br />+lint=9.36e-8  wint=1.47e-7<br />+vth0=.6322  k1=.756  k2=-3.83e-2  k3=-2.612 <br />+dvt0=2.812  dvt1=0.462  dvt2=-9.17e-2 <br />+nlx=3.52291E-08  w0= 1.163e-6  k3b= 2.233<br />+vsat=86301.58  ua=6.47e-9  ub=4.23e-18  uc=-4.706281e-11 <br />+rdsw=650  u0=388.3203  wr=1<br />+a0=.3496967  ags=.1<br />+b0=0.546  b1= 1 <br />+dwg=-6.0e-09  dwb=-3.56e-09  prwb=-.213<br />+keta=-3.605872e-02  a1=2.778747e-02  a2=.9 <br />+voff=-6.735529e-02  nfactor=1.139926  cit=1.622527e-04 <br />+cdsc=-2.147181e-05  cdscb= 0 <br />+dvt0w=0  dvt1w=0  dvt2w=0 <br />+cdscd=0  prwg=0 <br />+eta0=1.0281729e-02  etab=-5.042203e-03 <br />+dsub=.31871233 <br />+pclm=1.114846  pdiblc1=2.45357e-03  pdiblc2=6.406289e-03 <br />+drout=.31871233  pscbe1=5000000  pscbe2=5e-09 pdiblcb=-.234<br />+pvag=0  delta=0.01<br />+wl=0  ww=-1.420242e-09  wwl =  0 <br />+wln=0  wwn=.2613948  ll=1.300902e-10 <br />+lw=0  lwl=0  lln=.316394  lwn=0<br />+kt1=-.3  kt2=-.051 <br />+at=22400 <br />+ute=-1.48 <br />+ua1=3.31e-10  ub1=2.61e-19  uc1=-3.42e-10 <br />+kt1l=0&#160;&#160;prt=764.3</pre>
<h2>
<a id="pgfId-1014610"></a><a id="11485"></a>Ring Oscillator Spectre Deck for Inverter Ring with No Fanouts (inverter_ring.sp)</h2>

<p>
<a id="pgfId-1016389"></a>This example uses Spectre syntax.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014504"></a>// Ring oscillator Spectre deck for INVERTER ring with no fanouts.<br />simulator lang=spectre<br />global 0 gnd vdd vss </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014508"></a>aliasGnd ( gnd 0 ) vsource type=dc dc=0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014510"></a>// Spectre options to be used<br />SetOption1 options&#160;&#160;iabstol=1.00n audit=full temp=25</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014513"></a>MyAcct1 info what=inst extremes=yes <br />MyAcct2 info what=models extremes=yes <br />MyAcct3 info what=input extremes=yes <br />MyAcct5 info what=terminals extremes=yes <br />MyAcct6 info what=oppoint extremes=yes </pre>
<pr-prog id="#id1014518">
<a id="pgfId-1014518"></a></pr-prog>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014520"></a>// Next section is the subckt for inv<br />subckt inv ( nq a ) <br />m1 ( nq a vdd vdd ) p l=0.35u w=2.60u ad=1.90p pd=6.66u as=1.90p ps=6.66u<br />m2 ( vss a nq vss ) n l=0.35u w=1.10u ad=0.80p pd=3.66u as=0.80p ps=3.66u</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015464"></a>// Interconnect Caps for inv<br />c0 ( a vdd ) capacitor c=1.0824323e-15<br />c1 ( a nq ) capacitor c=3.0044e-16<br />c2 ( nq vss ) capacitor c=5.00186e-16<br />c3 ( nq vdd ) capacitor c=6.913993e-16<br />c4 ( a vss ) capacitor c=8.5372566e-16<br />ends </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014532"></a>// Begin top level circuit definition<br />xinv1 ( 1 90 ) inv<br />xinv2 ( 2 1 ) inv<br />xinv3 ( 3 2 ) inv<br />xinv4 ( 4 3 ) inv<br />xinv5 ( 5 4 ) inv<br />xinv6 ( 6 5 ) inv<br />xinv7 ( 7 6 ) inv<br />xinv8 ( 8 7 ) inv<br />xinv9 ( 9 8 ) inv<br />xinv10 ( 10 9 ) inv<br />xinv11 ( 11 10 ) inv<br />xinv12 ( 12 11 ) inv<br />xinv13 ( 13 12 ) inv<br />xinv14 ( 14 13 ) inv<br />xinv15 ( 15 14 ) inv<br />xinv16 ( 16 15 ) inv<br />xinv17 ( 90 16 ) inv</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014551"></a>// Next couple of lines sets variables for vdd and vss.<br />parameters vdd_S1=3.3<br />parameters vss_S1=0.0<br />vdd_I1 ( vdd gnd ) vsource dc=vdd_S1 <br />vss_I1 ( vss gnd ) vsource dc=vss_S1 </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014557"></a>// Set initial conditions:<br />ic&#160;&#160;2=0 4=0 6=0 8=0 10=0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014560"></a>//  Next line makes the call to the model<br />//  NOTE: The user may utilize the &#39;.lib&#39; syntax with Spectre&#39;s +spp<br />//  command line option if they are using Spectre 4.43 or greater.<br />//  There is also a Spectre native syntax for equivalent <br />// functionality. It is shown in q35d4h5.modsp.</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014566"></a>include &quot;q35d4h5.modsp&quot; section=tt</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014568"></a>// Analysis Statement<br />tempOption options temp=25<br />typ_tran tran step=0.010n stop=35n </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014572"></a>alter_ss altergroup { <br />include &quot;q35d4h5.modsp&quot; section=ss<br />parameters vdd_S1=3.0<br />}</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014577"></a>alterTempTo100 alter param=temp value=100 <br />ss_tran tran step=0.010n stop=35n </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014580"></a>alter_ff altergroup { <br />include &quot;q35d4h5.modsp&quot; section=ff<br />parameters vdd_S1=3.3<br />}</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014585"></a>alterTempTo0 alter param=temp value=0<br />ff_tran tran step=0.010n stop=35n</pre>
<h2>
<a id="pgfId-1014587"></a><a id="10518"></a>Ring Oscillator Spectre Deck for Two-Input NAND Ring with No Fanouts (nand2_ring.sp)</h2>

<p>
<a id="pgfId-1016392"></a>This example uses Spectre syntax.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014617"></a>// Ring oscillator Spectre deck for 2-Input NAND ring with no fanouts.<br />simulator lang=spectre<br />global 0 gnd vdd vss </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014621"></a>aliasGnd ( gnd 0 ) vsource type=dc dc=0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014623"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014624"></a>// Spectre options to be used<br />SetOption1 options&#160;&#160;iabstol=1.00n audit=full </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014627"></a>MyAcct1 info what=inst extremes=yes <br />MyAcct2 info what=models extremes=yes <br />MyAcct3 info what=input extremes=yes <br />MyAcct5 info what=terminals extremes=yes <br />MyAcct6 info what=oppoint extremes=yes </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014633"></a>// Next section is the subckt for na2  ******<br />subckt na2 ( nq a ) <br />m1 ( nq a vdd vdd ) p l=0.35u w=2.70u ad=1.03p pd=3.46u as=1.98p ps=6.86u<br />m2 ( nq vdd vdd vdd ) p l=0.35u w=2.70u ad=1.03p pd=3.46u as=1.98p ps=6.86u<br />m3 ( vss a 6 vss ) n l=0.35u w=1.70u ad=1.25p pd=4.86u as=0.18p ps=1.91u<br />m4 ( nq vdd 6 vss ) n l=0.35u w=1.70u ad=1.25p pd=4.86u as=0.18p ps=1.91u<br />c0 ( a vdd ) capacitor c=1.0512057e-15<br />c1 ( a nq ) capacitor c=7.308e-17<br />c2 ( vdd vss ) capacitor c=6.12359e-16<br />c3 ( nq vss ) capacitor c=5.175377e-16<br />c4 ( nq vdd ) capacitor c=1.1668172e-15<br />c5 ( a vss ) capacitor c=9.530671e-16<br />ends </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014647"></a>// Begin top-level circuit definition<br />xna21 ( 1 90 ) na2<br />xna22 ( 2 1 ) na2<br />xna23 ( 3 2 ) na2<br />xna24 ( 4 3 ) na2<br />xna25 ( 5 4 ) na2<br />xna26 ( 6 5 ) na2<br />xna27 ( 7 6 ) na2<br />xna28 ( 8 7 ) na2<br />xna29 ( 9 8 ) na2<br />xna210 ( 10 9 ) na2<br />xna211 ( 11 10 ) na2<br />xna212 ( 12 11 ) na2<br />xna213 ( 13 12 ) na2<br />xna214 ( 14 13 ) na2<br />xna215 ( 15 14 ) na2<br />xna216 ( 16 15 ) na2<br />xna217 ( 90 16 ) na2</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014666"></a>// Next couple of lines sets variables for vdd and vss.<br />parameters vdd_S1=3.3<br />parameters vss_S1=0.0<br />vdd_I1 ( vdd gnd ) vsource dc=vdd_S1 <br />vss_I1 ( vss gnd ) vsource dc=vss_S1 </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014672"></a>//  Next line initializes nodes within ring<br />ic&#160;&#160;2=0 4=0 6=0 8=0 10=0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014675"></a>include &quot;q35d4h5.modsp&quot; section=tt</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014677"></a> </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014678"></a>// Next line defines transient steps and total simulation time</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014680"></a>tempOption options temp=25<br />tt_tran tran step=0.010n stop=35n </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014683"></a>alter_ss altergroup { <br />include &quot;q35d4h5.modsp&quot; section=ss<br />parameters vdd_S1=3.0<br />}</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014688"></a>alterTempTo100 alter param=temp value=100<br />ss_tran tran step=0.010n stop=35n </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014691"></a>alter_ff altergroup { <br />include &quot;q35d4h5.modsp&quot; section=ss<br />parameters vdd_S1=3.3<br />}</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014696"></a>alterTempTo0 alter param=temp value=0<br />ff_tran tran step=0.010n stop=35n </pre>
<h2>
<a id="pgfId-1014409"></a><a id="30087"></a>Ring Oscillator Spectre Deck for Three-Input NAND Ring with No Fanouts (nand3_ring.sp)</h2>

<p>
<a id="pgfId-1016403"></a>This example uses Spectre syntax.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014717"></a>// Ring oscillator Spectre deck for 3-Input NAND ring with no fanouts.<br />simulator lang=spectre<br />global 0 gnd vdd vss </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014721"></a>aliasGnd ( gnd 0 ) vsource type=dc dc=0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014723"></a>// Simulator options to use<br />SetOption1 options&#160;&#160;iabstol=1.00n audit=full </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014726"></a>MyAcct1 info what=inst extremes=yes <br />MyAcct2 info what=models extremes=yes <br />MyAcct3 info what=input extremes=yes <br />MyAcct5 info what=terminals extremes=yes <br />MyAcct6 info what=oppoint extremes=yes </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014732"></a>// Next section is the subckt for na3p1<br />subckt na3p1 ( nq a ) <br />m1 ( nq a vdd vdd ) p l=0.35u w=2.90u ad=1.10p pd=3.66u as=2.12p ps=7.26u<br />m2 ( nq vdd vdd vdd ) p l=0.35u w=2.90u ad=1.10p pd=3.66u as=1.10p ps=3.66u<br />m3 ( nq vdd vdd vdd ) p l=0.35u w=2.90u ad=2.12p pd=7.26u as=1.10p ps=3.66u<br />m4 ( vss a 7 vss ) n l=0.35u w=2.40u ad=1.75p pd=6.26u as=0.25p ps=2.61u<br />m5 ( 7 vdd 8 vss ) n l=0.35u w=2.40u ad=0.25p pd=2.61u as=0.25p ps=2.61u<br />m6 ( nq vdd 8 vss ) n l=0.35u w=2.40u ad=1.75p pd=6.26u as=0.25p ps=2.61u<br />c0 ( 8 vdd ) capacitor c=1.341e-17<br />c1 ( vdd vss ) capacitor c=9.9445302e-16<br />c2 ( nq vss ) capacitor c=6.287e-16<br />c3 ( nq vdd ) capacitor c=2.0719818e-15<br />c4 ( a vss ) capacitor c=5.3760487e-16<br />c5 ( a vdd ) capacitor c=1.2446956e-15<br />c6 ( a nq ) capacitor c=7.308e-17<br />c7 ( 7 vdd ) capacitor c=2.0115e-17<br />ends </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014749"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014751"></a>// Begin top level circuit definition<br />xna3p11 ( 1 90 ) na3p1<br />xna3p12 ( 2 1 ) na3p1<br />xna3p13 ( 3 2 ) na3p1<br />xna3p14 ( 4 3 ) na3p1<br />xna3p15 ( 5 4 ) na3p1<br />xna3p16 ( 6 5 ) na3p1<br />xna3p17 ( 7 6 ) na3p1<br />xna3p18 ( 8 7 ) na3p1<br />xna3p19 ( 9 8 ) na3p1<br />xna3p110 ( 10 9 ) na3p1<br />xna3p111 ( 11 10 ) na3p1<br />xna3p112 ( 12 11 ) na3p1<br />xna3p113 ( 13 12 ) na3p1<br />xna3p114 ( 14 13 ) na3p1<br />xna3p115 ( 15 14 ) na3p1<br />xna3p116 ( 16 15 ) na3p1<br />xna3p117 ( 90 16 ) na3p1</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014770"></a>// Next couple of lines sets variables for vdd and vss.<br />parameters vdd_S1=3.3<br />parameters vss_S1=0.0<br />vdd_I1 ( vdd gnd ) vsource dc=vdd_S1 <br />vss_I1 ( vss gnd ) vsource dc=vss_S1 </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014776"></a>//  Next line initializes nodes within ring<br />ic&#160;&#160;2=0 4=0 6=0 8=0 10=0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014779"></a>include &quot;q35d4h5.modsp&quot; section=tt</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014780"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014782"></a>// Transient analysis card<br />tempOption options temp=25<br />typ_tran tran step=0.010n stop=35n </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014786"></a>alter_ss altergroup { <br />include &quot;q35d4h5.modsp&quot; section=ss<br />parameters vdd_S1=3.0<br />}</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014791"></a>alterTempTo100 alter param=temp value=100<br />ss_tran tran step=0.010n stop=35n </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014794"></a>myAlter2 altergroup { <br />include &quot;q35d4h5.modsp&quot; section=ff<br />parameters vdd_S1=3.3<br />} </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014799"></a>alterTempTo0 alter param=temp value=0<br />ff_tran tran step=0.010n stop=35n </pre>
<h2>
<a id="pgfId-1014801"></a><a id="42393"></a>Ring Oscillator Spectre Deck for Two-Input NOR Ring with No Fanouts (nor2_ring.sp)</h2>

<p>
<a id="pgfId-1016410"></a>This example uses Spectre syntax.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014825"></a>// Ring oscillator Spectre deck for 2-Input NOR ring with no fanouts.<br />simulator lang=spectre<br />global 0 gnd vdd vss </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014829"></a>aliasGnd ( gnd 0 ) vsource type=dc dc=0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014831"></a>// Spectre options<br />SetOption1 options&#160;&#160;iabstol=1.00n audit=full </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014834"></a>MyAcct1 info what=inst extremes=yes <br />MyAcct2 info what=models extremes=yes <br />MyAcct3 info what=input extremes=yes <br />MyAcct5 info what=terminals extremes=yes <br />MyAcct6 info what=oppoint extremes=yes </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014840"></a>// Next section is the subckt for no2<br />subckt no2 ( nq a ) <br />m1 ( vdd a 6 vdd ) p l=0.35u w=4.80u ad=3.50p pd=11.06u as=0.50p ps=5.01u<br />m2 ( nq vss 6 vdd ) p l=0.35u w=4.80u ad=3.50p pd=11.06u as=0.50p ps=5.01u<br />m3 ( vss a nq vss ) n l=0.35u w=1.20u ad=0.88p pd=3.86u as=0.46p ps=1.96u<br />m4 ( vss vss nq vss ) n l=0.35u w=1.20u ad=0.88p pd=3.86u as=0.46p ps=1.96u<br />c0 ( a vdd ) capacitor c=6.3676066e-16<br />c1 ( a nq ) capacitor c=5.3592e-17<br />c2 ( vdd vss ) capacitor c=5.39538e-16<br />c3 ( nq vss ) capacitor c=8.780327e-16<br />c4 ( nq vdd ) capacitor c=5.577428e-16<br />c5 ( a vss ) capacitor c=1.1100392e-15<br />ends </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014854"></a>// begin top level circuit definition<br />xno21 ( 1 90 ) no2<br />xno22 ( 2 1 ) no2<br />xno23 ( 3 2 ) no2<br />xno24 ( 4 3 ) no2<br />xno25 ( 5 4 ) no2<br />xno26 ( 6 5 ) no2<br />xno27 ( 7 6 ) no2<br />xno28 ( 8 7 ) no2<br />xno29 ( 9 8 ) no2<br />xno210 ( 10 9 ) no2<br />xno211 ( 11 10 ) no2<br />xno212 ( 12 11 ) no2<br />xno213 ( 13 12 ) no2<br />xno214 ( 14 13 ) no2<br />xno215 ( 15 14 ) no2<br />xno216 ( 16 15 ) no2<br />xno217 ( 90 16 ) no2</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014873"></a>// Next couple of lines sets variables for vdd and vss.<br />parameters vdd_S1=3.3<br />parameters vss_S1=0.0<br />vdd_I1 ( vdd gnd ) vsource dc=vdd_S1 <br />vss_I1 ( vss gnd ) vsource dc=vss_S1 </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014879"></a>//  Next line initializes nodes within ring.<br />ic&#160;&#160;2=0 4=0 6=0 8=0 10=0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014882"></a>include &quot;q35d4h5.modsp&quot; section=tt</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014884"></a>// Analysis</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014886"></a>tempOption options temp=25<br />tt_tran tran step=0.010n stop=35n </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014889"></a>ss_alter altergroup { <br />include &quot;q35d4h5.modsp&quot; section=ss<br />parameters vdd_S1=3.0<br />} </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014894"></a>alterTempTo100 alter param=temp value=100<br />ss_tran tran step=0.010n stop=35n </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014897"></a>ff_alter altergroup { <br />include &quot;q35d4h5.modsp&quot; section=ff<br />parameters vdd_S1=3.3<br />}</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014902"></a>alterTempTo0 alter param=temp value=0<br />ff_tran tran step=0.010n stop=35n </pre>
<h2>
<a id="pgfId-1014242"></a><a id="42719"></a>Ring Oscillator Spectre Deck for Three-Input NOR Ring with No Fanouts (nor3_ring.sp)</h2>

<p>
<a id="pgfId-1016417"></a>This example uses Spectre syntax.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014925"></a>// Ring oscillator spectre deck for 3-Input NOR ring with no fanouts.<br />simulator lang=spectre<br />global 0 gnd vdd vss <br />aliasGnd ( gnd 0 ) vsource type=dc dc=0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014930"></a>// Spectre options<br />SetOption1 options&#160;&#160;iabstol=1.00n audit=full rforce=1 temp=25</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014933"></a>MyAcct1 info what=inst extremes=yes <br />MyAcct2 info what=models extremes=yes <br />MyAcct3 info what=input extremes=yes <br />MyAcct5 info what=terminals extremes=yes <br />MyAcct6 info what=oppoint extremes=yes </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014939"></a>// Next section is the subckt for no3<br />subckt no3 ( nq a ) <br />m1 ( vdd a 7 vdd ) p l=0.35u w=3.60u ad=2.63p pd=8.66u as=0.38p ps=3.81u<br />m2 ( 7 vss 8 vdd ) p l=0.35u w=3.60u ad=0.38p pd=3.81u as=0.38p ps=3.81u<br />m3 ( nq vss 8 vdd ) p l=0.35u w=3.60u ad=1.37p pd=4.36u as=0.38p ps=3.81u<br />m4 ( nq vss 9 vdd ) p l=0.35u w=3.60u ad=1.37p pd=4.36u as=0.38p ps=3.81u<br />m5 ( 9 vss 10 vdd ) p l=0.35u w=3.60u ad=0.38p pd=3.81u as=0.38p ps=3.81u<br />m6 ( vdd a 10 vdd ) p l=0.35u w=3.60u ad=2.63p pd=8.66u as=0.38p ps=3.81u<br />m7 ( vss a nq vss ) n l=0.35u w=1.40u ad=1.02p pd=4.26u as=0.53p ps=2.16u<br />m8 ( vss vss nq vss ) n l=0.35u w=1.40u ad=0.53p pd=2.16u as=0.53p ps=2.16u<br />m9 ( vss vss nq vss ) n l=0.35u w=1.40u ad=0.53p pd=2.16u as=1.02p ps=4.26u<br />c1 ( 9 nq ) capacitor c=3.7995e-17<br />c2 ( vdd vss ) capacitor c=1.3996057e-15<br />c3 ( nq vss ) capacitor c=3.1546797e-15<br />c4 ( nq vdd ) capacitor c=5.5551875e-16<br />c5 ( a vss ) capacitor c=1.2907233e-15<br />c6 ( a vdd ) capacitor c=2.1779808e-15<br />c7 ( 10 nq ) capacitor c=2.0115e-17<br />c8 ( a nq ) capacitor c=5.233362e-16<br />ends </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014960"></a>// Begin top-level circuit definition<br />xno31 ( 1 90 ) no3<br />xno32 ( 2 1 ) no3<br />xno33 ( 3 2 ) no3<br />xno34 ( 4 3 ) no3<br />xno35 ( 5 4 ) no3<br />xno36 ( 6 5 ) no3<br />xno37 ( 7 6 ) no3<br />xno38 ( 8 7 ) no3<br />xno39 ( 9 8 ) no3<br />xno310 ( 10 9 ) no3<br />xno311 ( 11 10 ) no3<br />xno312 ( 12 11 ) no3<br />xno313 ( 13 12 ) no3<br />xno314 ( 14 13 ) no3<br />xno315 ( 15 14 ) no3<br />xno316 ( 16 15 ) no3<br />xno317 ( 90 16 ) no3</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014979"></a>// Next couple of lines sets variables for vdd and vss.<br />parameters vdd_S1=3.3<br />parameters vss_S1=0.0<br />vdd_I1 ( vdd gnd ) vsource dc=vdd_S1 <br />vss_I1 ( vss gnd ) vsource dc=vss_S1 </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014985"></a>// Next line initializes nodes within ring<br />ic&#160;&#160;2=0 4=0 6=0 8=0 10=0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014988"></a>include &quot;q35d4h5.modsp&quot; section=tt</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014990"></a>// Analysis<br />tempOption options temp=25<br />typ_tran tran step=0.010n stop=35n </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014994"></a>alter_ss altergroup { <br />include &quot;q35d4h5.modsp&quot; section=ss <br />parameters vdd_S1=3.0 <br />} </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014999"></a>alterTempTo100 alter param=temp value=100<br />ss_tran tran step=0.010n stop=35n</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015002"></a>alter_ff altergroup { <br />include &quot;q35d4h5.modsp&quot; section=ff<br />parameters vdd_S1=3.3<br />} </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015007"></a>alterTempTo0 alter param=temp value=0<br />ff_tran tran step=0.010n stop=35n </pre>
<h2>
<a id="pgfId-1015009"></a><a id="28692"></a>Opamp Circuit (opamp.cir)</h2>

<p>
<a id="pgfId-1016422"></a>This example uses Spectre&#8217;s SPICE syntax.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015033"></a>.subckt opamp 1 2 6 8 9<br />m1 4 2 3 3 nch w=43u l=10u ad=0.3n as=0.3n pd=50u ps=50u<br />m2 5 1 3 3 nch w=43u l=10u ad=0.3n as=0.3n pd=50u ps=50u<br />m3 4 4 8 8 pch w=10u l=10u ad=0.3n as=0.3n pd=20u ps=20u<br />m4 5 4 8 8 pch w=10u l=10u ad=0.3n as=0.3n pd=20u ps=20u<br />m5 3 7 9 9 nch w=38u l=10u ad=0.3n as=0.3n pd=40u ps=40u<br />m6 6 5 8 8 pch w=344u l=10u ad=1.3n as=1.3n pd=350u ps=350u<br />m7 6 7 9 9 nch w=652u l=10u ad=2.3n as=2.3n pd=660u ps=660u<br />m8 7 7 9 9 nch w=38u l=10u ad=0.3n as=0.3n pd=40u ps=40u<br />cc 5 6 4.4p<br />ibias 8 7 8.8u<br />.ends opamp</pre>
<h2>
<a id="pgfId-1015045"></a><a id="23064"></a>Opamp Circuit 2 (opamp1.cir)</h2>

<p>
<a id="pgfId-1016425"></a>This example uses Spectre&#8217;s SPICE syntax.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015049"></a>.subckt opamp 1 2 6 8 9<br />m1 4 2 3 3 nch w=20u l=0.5u ad=0.3n as=0.3n pd=50u ps=50u<br />m2 5 1 3 3 nch w=20u l=0.5u ad=0.3n as=0.3n pd=50u ps=50u<br />m3 4 4 8 8 pch w=20u l=0.5u ad=0.3n as=0.3n pd=20u ps=20u<br />m4 5 4 8 8 pch w=20u l=0.5u ad=0.3n as=0.3n pd=20u ps=20u<br />m5 3 7 9 9 nch w=20u l=0.5u ad=0.3n as=0.3n pd=40u ps=40u<br />m6 6 5 8 8 pch w=20u l=0.5u ad=1.3n as=1.3n pd=350u ps=350u<br />m7 6 7 9 9 nch w=20u l=0.5u ad=2.3n as=2.3n pd=660u ps=660u<br />m8 7 7 9 9 nch w=20u l=0.5u ad=0.3n as=0.3n pd=40u ps=40u<br />cc 5 6 4.4p<br />ibias 8 7 8.8u<br />.ends opamp</pre>
<h2>
<a id="pgfId-1015061"></a><a id="39498"></a>Original Open-Loop Opamp (openloop.sp)</h2>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015074"></a>* Allen &amp; Holmberg, p. 438 - Original Open Loop OpAmp Configuration<br />vinp 1 0 dc 0 ac 1.0<br />vdd 4 0 dc 5.0<br />vss 0 5 dc 5.0<br />vinm 2 0 dc 0<br />cl 3 0 20p<br />x1 1 2 3 4 5 opamp<br />** Bring in opamp subcircuit<br />include &quot;opamp.cir&quot;<br />** Bring in models here<br />.model nch bsim3v3<br />.model pch bsim3v3 type=p<br />.op<br />simulator lang = spectre<br />tf (3 0) xf save=lvlpub nestlvl=1 start=1 stop=1K dec=20<br />simulator lang = spice<br />.dc vinp -0.005 0.005 100u<br />.print dc v(3)<br />.ac dec 10 1 10MEG<br />.print ac vdb(3) vp(3<br />.end</pre>
<h2>
<a id="pgfId-1015095"></a><a id="32000"></a>Modified Open-Loop Opamp (openloop1.sp)</h2>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015107"></a>* Allen &amp; Holmberg, p. 438 - Modified Open Loop OpAmp Configuration<br />vinp 1 0 dc 0 ac 1.0<br />vdd 4 0 dc 5.0<br />vss 0 5 dc 5.0<br />vinm 2 0 dc 0<br />cl 3 0 20p<br />x1 1 2 3 4 5 opamp<br />** Bring in opamp subcircuit<br />include &quot;opamp1.cir&quot;<br />** Bring in models here<br />.model nch bsim3v3<br />.model pch bsim3v3 type=p<br />.op<br />simulator lang = spectre<br />tf (3 0) xf save=lvlpub nestlvl=1 start=1 stop=1K dec=20<br />simulator lang = spice<br />.dc vinp -0.10 0.10 10u<br />.print dc v(3)<br />.ac dec 10 1 10MEG<br />.print ac vdb(3) vp(3)<br />.end</pre>
<h2>
<a id="pgfId-1015128"></a><a id="24505"></a>Example Model Directory (q35d4h5.modsp)</h2>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015140"></a>//example model directory <br />simulator lang = spectre</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015143"></a>library mosmodels<br />section tt<br />model n bsim3v3 tox=1.194e-08<br />model p bsim3v3 type=p tox=7.4e-09<br />endsection</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015149"></a>section ss<br />model n bsim3v3 tox=1.242e-08<br />model p bsim3v3 type=p tox=7.724e-09<br />endsection</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1015154"></a>section ff<br />model n bsim3v3 tox=1.1544e-08<br />model p bsim3v3 type=p tox=7.148e-09<br />endsection<br />endlibrary</pre>
<pr-prog id="#id1015177">
<a id="pgfId-1015177"></a></pr-prog>
<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="chap17.html" id="prev" title="Identifying Problems and Troubleshooting">Identifying Problems and Troub ...</a></em></b><b><em><a href="appB.html" id="nex" title="Using Compiled-Model Interface">Using Compiled-Model Interface</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>