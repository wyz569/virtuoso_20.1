
<html><head><title>Working with Patterns</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="spriya" />
<meta name="CreateDate" content="2020-09-15" />
<meta name="CreateTime" content="1600172397" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the functionality of the Virtuoso Layout Suite GXL cell planner, module generator, and analog placement functionality in the current release." />
<meta name="DocTitle" content="Virtuoso Module Generator User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Working with Patterns" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="modgenuser" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-09-15" />
<meta name="ModifiedTime" content="1600172397" />
<meta name="NextFile" content="EditModgens.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="GettingStarted.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Module Generator User Guide -- Working with Patterns" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="modgenuserICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="modgenuserTOC.html">Contents</a></li><li><a class="prev" href="GettingStarted.html" title="Getting Started">Getting Started</a></li><li style="float: right;"><a class="viewPrint" href="modgenuser.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="EditModgens.html" title="Editing Modgens">Editing Modgens</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Module Generator User Guide<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>2
<a id="pgfId-1032955"></a></h1>
<h1>
<a id="pgfId-1035250"></a><hr />
<a id="84703"></a>Working with Patterns<hr />
</h1>

<p>
<a id="pgfId-1088582"></a>This chapter covers the following topics: </p>
<ul><li>
<a id="pgfId-1086610"></a><a href="ModgenPatterns.html#44632">Using the Modgen Editor Assistants</a><ul><li>
<a id="pgfId-1103972"></a><a href="ModgenPatterns.html#78240">Grid Pattern Editor</a></li><li>
<a id="pgfId-1104001"></a><a href="ModgenPatterns.html#13728">Grid Pattern Mapping</a></li><li>
<a id="pgfId-1104058"></a><a href="ModgenPatterns.html#36479">Working with Presets</a></li></ul></li><li>
<a id="pgfId-1123930"></a><a href="ModgenPatterns.html#31302">Support for Stacks in Modgens</a></li><li>
<a id="pgfId-1103899"></a><a href="ModgenPatterns.html#89994">Specifying Interdigitation Patterns</a><ul><li>
<a id="pgfId-1104103"></a><a href="ModgenPatterns.html#82434">Using the Modgen Pattern Editor</a></li><li>
<a id="pgfId-1104163"></a><a href="ModgenPatterns.html#90018">Specifying Custom Interdigitation</a></li><li>
<a id="pgfId-1104193"></a><a href="ModgenPatterns.html#28745">Setting Up the Custom Interdigitation Pattern File</a></li></ul></li></ul>









<h2>
<a id="pgfId-1103962"></a><a id="44632"></a>Using the Modgen Edit<a id="patternEditAssist"></a>or Assistants</h2>

<p>
<a id="pgfId-1103963"></a>The Modgen Editor provides a grid-based interface that can be used to define custom patterns for placing devices. The following Modgen Editor assistants are available to assist you with the placement of devices in the Modgen Layout Editing window:</p>
<ul><li>
<a id="pgfId-1102870"></a><a href="ModgenPatterns.html#78240">Grid Pattern Editor</a>: View and manipulate the pattern.</li><li>
<a id="pgfId-1102874"></a><a href="ModgenPatterns.html#13728">Grid Pattern Mapping</a>: View and change the mapping of devices.</li></ul>

<p>
<a id="pgfId-1102875"></a>These Modgen Editor Assistants are available as dockable assistants in the Virtuoso<sup>&#174;</sup> Layout Suite XL (VLS XL) layout editor. You can directly access these assistants from the layout canvas, without opening the Modgen Editor.</p>

<p>
<a id="pgfId-1102896"></a></p>
<div class="webflare-div-image">
<img width="668" height="449" src="images/ModgenPatterns-2.gif" /></div>
<div class="webflare-information-macro webflare-macro-video">
<a id="pgfId-1102898"></a>
For more information on how to use these assistants, see the <a actuate="user" class="URL" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1Od0000002JeKKEA0&amp;pageName=ArticleContent&amp;sq=005d0000001T41wAAC_201711342755709" show="replace" xml:link="simple">Using the Modgen Editor Assistants</a> video.</div>
<h3>
<a id="pgfId-1102900"></a><a id="78240"></a>Grid Pattern Editor</h3>

<p>
<a id="pgfId-1102902"></a>When a Modgen is create<a id="gpeGridAsst"></a>d, a table-based (grid) pattern of the selected devices is generated according to the layout. Subsequent changes made to the grid in the Pattern Editor Assistants are synchronized with the layout canvas and vice versa.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1102903"></a>(ICADVM20.1 Layout EAD Only) Modgens are automatically aligned according to the rows, created using the row-based placement utilities, that exist in the layout canvas and are applicable to the Modgen. For more information about the row infrastructure, see <a actuate="user" class="URL" href="../vplacer/Rows.html#firstpage" show="replace" xml:link="simple">Creating Rows</a> in <em>Virtuoso Placer User Guide</em>.</div>
<p>
<a id="pgfId-1102904"></a>The Grid Pattern Editor assistant provides options to quickly specify a pattern for a Modgen layout.</p>
<p>
<a id="pgfId-1102905"></a>Use one of the following methods to specify a grid pattern:</p>
<ul><li>
<a id="pgfId-1102906"></a>Choose a <em>Preset</em> pattern from the drop-down list.<br />
<a id="pgfId-1102910"></a>For more information about preset functions, see <a href="ModgenPatterns.html#36479">Working with Presets</a>.</li><li>
<a id="pgfId-1102913"></a>Specify the grid dimensions in the <em>Size</em> box and press <code>Enter</code>.</li><li>
<a id="pgfId-1102914"></a>Use the interactive functions to manually create a grid pattern. Here is a quick view of the various options in the Grid Pattern Editor:<br />
<a id="pgfId-1102951"></a><div class="webflare-div-image">
<img width="668" height="657" src="images/ModgenPatterns-4.gif" /></div>
<a id="pgfId-1126733"></a>If you have altered the size of columns in the GPE assistant, you can click the <img src="images/AutoFitColumn.gif" /><span>button to auto-fit the columns.</span><br />
<a id="pgfId-1114636"></a>When you select a device instance in the GPE, it is highlighted in the layout canvas.<br /><div class="webflare-information-macro webflare-macro-tip">
<a id="pgfId-1112048"></a>
To enable colored representation of iterated instances in the GPE, choose <em>Abstracted</em> from the <em>Display Mode</em> drop-down list in the Smart Display toolbar. This setting is applicable only to iterated instances.</div></li><li>
<a id="pgfId-1106969"></a>The <em>Text</em> tab lets you enter a textual pattern for the pattern. Click <em>Apply</em> to generate the pattern in the layout canvas.<br />
<a id="pgfId-1106704"></a><div class="webflare-div-image">
<img width="668" height="415" src="images/ModgenPatterns-7.gif" /></div>
<a id="pgfId-1106981"></a>Each row in the <em>Pattern</em> box corresponds to the corresponding row in the Modgen. You can use shortcuts to specify the pattern, for example AA, A2 or (A)2 &#8212; all indicate two instances of device A. Orient indicates the orientation of devices in each row.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1114223"></a>Multi-character symbols such as <code>P1</code> and <code>MN</code> are not supported. Each symbol must be represented by a single character, such as <code>A</code>, <code>a</code>, <code>B</code>, and <code>b</code>.</div></li></ul>






















<p>
<a id="pgfId-1102952"></a>Use the Grid Pattern Editor to perform the following tasks:</p>
<ul><li>
<a id="pgfId-1102953"></a>Resize the Grid: Enter the required grid dimensions in the <em>Size</em> field and press <code>Enter</code>. <br />
<a id="pgfId-1102954"></a>Scenarios:<ul><li>
<a id="pgfId-1102955"></a>If you type 5 x 6 in the <em>Size</em> field, then a grid of 5 rows and 6 columns is generated.</li><li>
<a id="pgfId-1102956"></a>If you type 5 in the <em>Size</em> field, then a grid of 5 rows is generated. The engine calculates the number of columns required to accommodate the instances and creates a suitable grid.</li><li>
<a id="pgfId-1102957"></a>If you type 4r in the <em>Size</em> field, then the engine calculates the number of columns required to accommodate the instances and creates a suitable grid. </li><li>
<a id="pgfId-1102958"></a>If you type 4c in the <em>Size</em> field, then the engine calculates the number of rows required to accommodate the instances and creates a suitable grid. </li></ul><br />
<a id="pgfId-1102960"></a>Devices that are placed on the grid are automatically interdigitated.</li><li>
<a id="pgfId-1117741"></a>Defining Base Patterns and Base Orientations: Use the <em>Base Pattern</em> and <em>Base Orientation</em> fields to specify the interdigitation pattern for instances in the Modgen.<br />
<a id="pgfId-1118351"></a><div class="webflare-div-image">
<img width="668" height="325" src="images/ModgenPatterns-8.gif" /></div>
<a id="pgfId-1118326"></a><div class="webflare-div-image">
<img width="668" height="330" src="images/ModgenPatterns-9.gif" /></div>
<a id="pgfId-1118306"></a>You can then <em>Generate</em> the resulting pattern and modify, if needed. For more information about generating base patterns, see <a href="ModgenPatterns.html#77351">Generating a Base Pattern</a>.</li><li>
<a id="pgfId-1102961"></a>Add New Rows/Columns: Use one of the following methods:<ul><li>
<a id="pgfId-1102965"></a>Using the Add (<img width="33" height="23" src="images/ModgenPatterns-10.gif" />
) button: <span>There are two instances of the button:</span><ul><li>
<a id="pgfId-1102966"></a>Top-right corner: Adds a new column to the bottom of the grid.</li><li>
<a id="pgfId-1102967"></a>Bottom-left corner: Adds a new row to the right of the grid.</li></ul></li><li>
<a id="pgfId-1102968"></a>Using the shortcut (context-sensitive) menu: Use this method to add a new row above a selected row or to add a new column to the right of a selected column. <br />
<a id="pgfId-1102969"></a>1. Select the required row/column.<br />
<a id="pgfId-1102970"></a>2. Right-click and choose <em>Insert Row(s)</em> / <em>Insert Column(s)</em>.</li></ul></li><li>
<a id="pgfId-1102971"></a>Delete Existing Rows/Columns: Use one of the following methods:<ul><li>
<a id="pgfId-1102975"></a>Using the Delete (<img width="33" height="26" src="images/ModgenPatterns-11.gif" />
) button: <span>There are two instances of the button:</span><ul><li>
<a id="pgfId-1102976"></a>Top-right corner: The bottom most column is deleted.</li><li>
<a id="pgfId-1102977"></a>Bottom-left corner: The right most row is deleted.</li></ul></li><li>
<a id="pgfId-1102978"></a>Using the shortcut (context-sensitive) menu: Use this method to delete a selected row/column. <br />
<a id="pgfId-1102979"></a>1. Select the required row/column.<br />
<a id="pgfId-1102980"></a>2. Right-click and choose <em>Delete Row(s)</em> / <em>Delete Column(s)</em>.</li></ul></li><li>
<a id="pgfId-1102981"></a>Toggling between the Display Names of Instances: By default, the cells in the Grid Pattern Editor display the symbols that are mapped to instances in the GPM assistant. Use the following buttons to toggle between symbol names, layout names, schematic names, and orientations:<br />
<a id="pgfId-1103008"></a><div class="webflare-div-image">
<img width="663" height="434" src="images/ModgenPatterns-12.gif" /></div></li><li>
<a id="pgfId-1103009"></a>Moving Instances: You can move one or more instances by dragging and dropping them to their new location either in the Grid Pattern Editor or on the layout canvas. The behavior of the move command depends on the selected mode. Use the <a href="ModgenEnvars.html#90181">moveAsSwap</a> environment variable to select one of the following modes:<ul><li>
<a id="pgfId-1103016"></a>Move as Swap (Default): This mode is switched on when <a href="ModgenEnvars.html#90181">moveAsSwap<code></code></a> is set to <code>t</code>. When instances are moved in this mode, the instances in the source and target cells are swapped. <br />
<a id="pgfId-1115042"></a>Instances that are selected for movement in the GPE are highlighted in the layout canvas.<br />
<a id="pgfId-1103017"></a>Example: <br />
<a id="pgfId-1103018"></a>The source and target instances are swapped as shown below.<br /><ffi2-fig-frame-in-2 id="#id1103033">
<a id="pgfId-1103033"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img width="668" height="142" src="images/ModgenPatterns-13.gif" /></div>
<a id="pgfId-1103034"></a>Similar behavior is observed while moving rows and columns in this mode.</li><li>
<a id="pgfId-1103038"></a>Move as Insert: This mode is switched on when <a href="ModgenEnvars.html#90181">moveAsSwap<code></code></a> is set to <code>nil</code>. When an instance is moved in this mode, the instance first shifts horizontally, and then vertically, until the source location is back-filled.<br />
<a id="pgfId-1114888"></a>Instances that are selected for movement in the GPE are highlighted in the layout canvas.<br />
<a id="pgfId-1103039"></a>Examples: <br />
<a id="pgfId-1103040"></a>Moving an instance horizontally: The source instance is moved to the target location. The other instances are shifted horizontally to fill the empty cell as shown below.<br /><ffi2-fig-frame-in-2 id="#id1103054">
<a id="pgfId-1103054"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img width="668" height="141" src="images/ModgenPatterns-14.gif" /></div>
<a id="pgfId-1103055"></a>Moving an instance diagonally: The source instance is moved to the target location. The other instances are shifted horizontally and then vertically to fill the empty cell as shown below.<br /><ffi2-fig-frame-in-2 id="#id1103066">
<a id="pgfId-1103066"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img width="668" height="145" src="images/ModgenPatterns-15.gif" /></div>
<a id="pgfId-1103067"></a>Moving an entire row: The instances in the source row are moved to the target location. The remaining rows are moved up one step at a time to fill the empty row as shown below.<br /><ffi2-fig-frame-in-2 id="#id1103079">
<a id="pgfId-1103079"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img width="668" height="139" src="images/ModgenPatterns-16.gif" /></div>
<a id="pgfId-1103080"></a>Moving an entire column: The instances in the source column are moved to the target location. The remaining columns are moved horizontally one step at a time to fill the empty column as shown below.<br /><ffi2-fig-frame-in-2 id="#id1103092">
<a id="pgfId-1103092"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img width="668" height="139" src="images/ModgenPatterns-17.gif" /></div></li></ul></li><li>
<a id="pgfId-1115768"></a>Copy-Pasting Instances: You can use the <code>Ctrl</code> + <code>C</code> and the <code>Ctrl</code> + <code>V</code> key combinations to copy and paste instances inside the GPE.</li><li>
<a id="pgfId-1103093"></a>Clear Cells: Select the required cells (individual cells or entire rows/columns). The corresponding instances are highlighted in the layout canvas. Either press <code>Delete</code> or right-click and choose <em>Clear Cell(s)</em>. Deleted instances are highlighted in the Grid Pattern Mapping assistant.</li><li>
<a id="pgfId-1103094"></a>Swap Instances: You can perform the following tasks:<ul><li>
<a id="pgfId-1103095"></a>To swap two cells:</li><li>
<a id="pgfId-1103096"></a>Select the cells in the Grid Pattern Editor.</li><li>
<a id="pgfId-1103097"></a>Right-click and choose <em>Swap Cells</em>.</li><li>
<a id="pgfId-1103098"></a>To swap two rows:</li><li>
<a id="pgfId-1103099"></a>Select the rows in the Grid Pattern Editor.</li><li>
<a id="pgfId-1103100"></a>Right-click and choose <em>Swap Rows</em>.</li><li>
<a id="pgfId-1103101"></a>To swap two columns:</li><li>
<a id="pgfId-1103102"></a>Select the columns in the Grid Pattern Editor.</li><li>
<a id="pgfId-1103103"></a>Right-click and choose <em>Swap Columns</em>.<br /><div class="webflare-information-macro webflare-macro-tip">
<a id="pgfId-1103104"></a>
Use <code>Ctrl+</code>click to select two non-adjacent rows/columns.</div></li></ul></li><li>
<a id="pgfId-1103105"></a>Add Dummies: To add dummies around instances, select the required instances from the <a href="ModgenPatterns.html#78240">Grid Pattern Editor</a>, right-click, and select a direction.<br />
<a id="pgfId-1114014"></a><div class="webflare-div-image">
<img width="668" height="335" src="images/ModgenPatterns-18.gif" /></div>
<a id="pgfId-1113966"></a>The dummies created using this method are backward-compatible with the Modgen dummies creation options. For more information about these options, see <a href="EditModgens.html#74129">Adding Dummy Device Rows or Columns</a>.</li><li>
<a id="pgfId-1103113"></a>Edit Dummies: You can use eit<a id="ConfigDummiesForm"></a>her the Property Editor assistant or the Configure Dummies form to edit the properties of the existing dummies.<br />
<a id="pgfId-1103114"></a>To display the Configure Dummies form, select the dummies in the Grid Pattern Editor, right-click, and select <em>Edit Dummy</em>. The Configure Dummies form is displayed.<br />
<a id="pgfId-1103126"></a><div class="webflare-div-image">
<img width="668" height="461" src="images/ModgenPatterns-19.gif" /></div>
<a id="pgfId-1103127"></a>The Configure Dummies form comprises two panes: <ul><li>
<a id="pgfId-1103128"></a>The left pane&#8212;lists the dummies that are selected in the layout canvas.</li><li>
<a id="pgfId-1103129"></a>The right pane&#8212;displays the <em>Properties</em> and <em>Connectivity</em> information of the dummies selected in the left pane. Use the drop-down list at the top-left side to choose whether the <em>Properties</em>, <em>Connectivity</em>, or both need to be displayed.</li></ul><br />
<a id="pgfId-1103130"></a>You can either select individual dummies or multiple dummies in the left pane and edit their following <em>Properties</em> in the right pane:<br /><span class="indent-as-level2">
<a id="pgfId-1103131"></a>Name: Name of the dummy. If multiple dummies are selected, then <em>(various)</em> is displayed.</span><br /><span class="indent-as-level2">
<a id="pgfId-1103132"></a>Type: Type of dummy. Valid values are: </span><br /><span class="indent-as-level3">
<a id="pgfId-1103133"></a>copy: Uses the dummy parameters and default values of the source instances.</span><br /><span class="indent-as-level3">
<a id="pgfId-1103134"></a>lcv: You can specify the <em>Master</em> <code>lib:cell:view</code> of the dummies.</span><br /><span class="indent-as-level3">
<a id="pgfId-1103135"></a>neighbor: Considers the <code>lib:cell:view</code> of the neighboring device as the master.</span><br /><span class="indent-as-level2">
<a id="pgfId-1103136"></a>Master: Defines the master <code>lib:cell:view</code> when the <em>Type</em> is set to <em>lcv</em>.</span><br /><span class="indent-as-level2">
<a id="pgfId-1103137"></a>Fingers: Number of fingers. Valid values are <em>default </em>from the Pcell, <em>match_src</em> from the reference dummy, and the numeric value found from <em>match_src</em>.</span><br /><span class="indent-as-level2">
<a id="pgfId-1103138"></a>l: Length of the dummies. Valid values are <em>default </em>from the Pcell, <em>match_src</em> from the reference dummy, and the numeric value found from <em>match_src</em>.</span><br /><span class="indent-as-level2">
<a id="pgfId-1103139"></a>w: Width of the dummies. Valid values are <em>default </em>from the Pcell, <em>match_src</em> from the reference dummy, and the numeric value found from <em>match_src</em>.</span><br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1103140"></a>For all above options, when multiple dummies of different <em>values</em> are selected, then value <em>(various) </em>is displayed.</div></li></ul>















































































































<p>
<a id="pgfId-1111616"></a>The default <em>Type</em> is <em>neighbor</em>. Therefore the dummy device parameters length, width, and number of fingers are set as per their neighboring instances or dummies. However, if there are no neighboring instances or dummies, the following environment variables are used to determine the default values:</p>
<ul><li>
<a id="pgfId-1111617"></a><a href="ModgenEnvars.html#51231">modgenDummyWidthOptions<code></code></a></li><li>
<a id="pgfId-1111618"></a><a href="ModgenEnvars.html#30330">modgenDummyLengthValue<code></code></a></li><li>
<a id="pgfId-1111619"></a><a href="ModgenEnvars.html#10882">modgenDummyWidthOptions<code></code></a></li><li>
<a id="pgfId-1111620"></a><a href="ModgenEnvars.html#13828">modgenDummyWidthValue<code></code></a></li><li>
<a id="pgfId-1111621"></a><a href="ModgenEnvars.html#44562">modgenDummyNumFingersOptions<code></code></a></li><li>
<a id="pgfId-1111622"></a><a href="ModgenEnvars.html#60012">modgenDummyNumFingersValue<code></code></a><br />
<a id="pgfId-1103141"></a>Select <em>Connectivity</em> to display the list of connections for Bulk, Drain, Gate, and Source as shown in the figure below. You can edit the net names associated with a terminal by typing the new net name or by choosing another net from the drop-down list.<br />
<a id="pgfId-1103157"></a><div class="webflare-div-image">
<img width="668" height="460" src="images/ModgenPatterns-20.gif" /></div></li></ul>









<h3>
<a id="pgfId-1103160"></a><a id="36479"></a>Working <a id="gridPresets"></a>with Presets</h3>

<p>
<a id="pgfId-1112298"></a>The Grid Pattern Editor assistant provides a set of preset formats, or predefined patters, that can be edited, loaded, and saved. The <em>Preset</em> drop-down list in the Grid Pattern Editor lists the following preset formats:</p>
<ul><li>
<a id="pgfId-1103164"></a>Pattern Preset<ul><li>
<a id="pgfId-1107562"></a>Save and Load: Lets you save a grid pattern to a file and load a preset pattern from a file. For more information, see <a href="ModgenPatterns.html#28552">Saving and Loading Presets</a>.</li><li>
<a id="pgfId-1107475"></a>Common Centroid: Places devices in a grid, while following a common centroid pattern. For more information, see <a href="ModgenPatterns.html#40702">Creating Patterns with a Common Centroid</a>.</li><li>
<a id="pgfId-1107486"></a>Flip Horizontal and Flip Vertical: Flips the selected instances horizontally or vertically, as per the selection. For more information, see <a href="ModgenPatterns.html#58317">Flipping Devices</a>.</li><li>
<a id="pgfId-1107532"></a>Interdigitate: Specifies an interdigitation pattern for devices in a grid pattern. For more information, see <a href="ModgenPatterns.html#50447">Interdigitating Presets</a>.</li></ul></li><li>
<a id="pgfId-1107539"></a>Resistor Preset<ul><li>
<a id="pgfId-1107548"></a>Interdigitate Resistor by Instance: Specifies the interdigitation pattern for devices that are placed in the grid. For more information, see <a href="ModgenPatterns.html#22935">Interdigitating Resistors By Instance Preset</a>.</li><li>
<a id="pgfId-1107630"></a>Interdigitate Resistor by Row/Col: Places similar instances in the same row or column. For more information, see <a href="ModgenPatterns.html#49267">Interdigitating Resistors By Rows and Columns</a>.</li><li>
<a id="pgfId-1107604"></a>Create Resistor Pattern: Define the resistor pattern that must be followed while placing devices in the grid. To edit the resistor preset, select Edit Resistor Pattern. The Edit Resistor Topology form is displayed. For more information, see <a href="ModgenPatterns.html#95120">Creating and Editing Resistor Pattern Presets</a>.</li><li>
<a id="pgfId-1110874"></a>Edit Resistor Pattern: Lets you edit resistor patterns for presets. For more information, see <a href="ModgenPatterns.html#95120">Creating and Editing Resistor Pattern Presets</a>.</li><li>
<a id="pgfId-1116204"></a>Quick Reorient Resistor Pattern: Flips the orientations of the members of a preselected Modgen, either in the design or in the Constraint Manager, to reduce the overall connectivity wire length. The placement of the members is not altered. Corresponding SKILL function: <a actuate="user" class="URL" href="../sklayoutref/modgen.html#gpePresetReorientResistor" show="replace" xml:link="simple">gpePresetReorientResistor</a></li><li>
<a id="pgfId-1107673"></a>Reorient Resistor Pattern: Changes the orientation of the first instance in the design. For more information, see <a href="ModgenPatterns.html#30917">Reorienting Resistors</a>.</li></ul></li></ul>











<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1104464"></a>The default preset values are derived from the active Modgen.</div>
<p>
<a id="pgfId-1103190"></a>You can also define the preset functions that must be displayed in the <em>Preset</em> drop-down list. For more information, see <a href="ModgenPatterns.html#92497">Using the Preset Generator Functions</a>.</p>

<h4>
<a id="pgfId-1103207"></a><a id="76971"></a><a id="28552"></a>Saving and Loa<a id="SaveAndLoad"></a>ding Presets</h4>

<p>
<a id="pgfId-1103208"></a>Select <em>Save and Load </em>from the <em>Pattern Preset</em> drop-down list to display the Save and Load Preset Form.</p>

<p>
<a id="pgfId-1103212"></a></p>
<div class="webflare-div-image">
<img src="images/SaveAndLoadPreset.gif" /></div>

<p>
<a id="pgfId-1107756"></a>Choose to either <em>Save</em> the current grid pattern to the specified <em>File Name,</em> or <em>Load</em> a preset pattern from the specified <em>File Name</em>. Supported file formats are <em>SKILL</em> and <em>Comma Separated Values (.csv)</em>.</p>
<p>
<a id="pgfId-1107757"></a>If you choose to <em>Save</em> in the comma-separated values (CSV) format, you can specify a <em>Pattern Type</em>: </p>
<ul><li>
<a id="pgfId-1107845"></a><em>Symbol: </em>Prints the letter that is mapped to that instance in the Modgen Pattern Map.</li><li>
<a id="pgfId-1107846"></a><em>Schematic Name</em>:<em> </em>Prints instance names from schematic. </li></ul>


<h4><em>
<a id="pgfId-1107871"></a>Understanding the <a id="CSVPreset"></a>CSV Format</em></h4>

<p>
<a id="pgfId-1107872"></a>A CSV file allows data to be saved in a tabular format. As the name suggests, a CSV file comprises character strings that are separated by commas. </p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1103218"></a>
Do not use white spaces to separate symbols or between commas because white spaces within lines are ignored in the CSV file format. However, you can use white space between lines can to delimit sections.</div>

<p>
<a id="pgfId-1103219"></a>There are certain rules to be followed while defining grid patterns in CSV format. In a CSV file:</p>
<ul><li>
<a id="pgfId-1103220"></a>The first section represents the placement of devices, followed by one or more blank lines. The placement of devices can be represented either by a list of schematic names or by a list of symbols that are mapped in the third section of the file. <br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1103221"></a>An unoccupied grid entry is represented by the <code>&quot;-&quot;</code> character. </div></li><li>
<a id="pgfId-1103222"></a>The second section represents the device orientations, followed by one or more blank lines. If orientations are not specified, then the default orientation is <code>&quot;R0&quot;</code>. </li><li>
<a id="pgfId-1103223"></a>The third section represents mapping. The mapping format is <code>&quot;schematic name, symbol&quot;</code>. For dummy devices, use the keyword <code>&quot;dummy&quot;</code> as the schematic name. If the mapping section is not included, then the default is the current GPE mapping.</li></ul>





<p>
<a id="pgfId-1103224"></a>Here is a sample CSV file that contains the three sections:</p>

<p>
<a id="pgfId-1103250"></a></p>
<div class="webflare-div-image">
<img width="668" height="655" src="images/ModgenPatterns-23.gif" /></div>
<h4>
<a id="pgfId-1103252"></a><a id="40702"></a>Creating Patterns with a Co<a id="commonCentroid"></a>mmon Centroid</h4>

<p>
<a id="pgfId-1103253"></a>The common centroid preset lets you place devices in a grid, while following a common centroid pattern. The following diagram depicts how devices are placed:</p>

<p>
<a id="pgfId-1103261"></a></p>
<div class="webflare-div-image">
<img width="663" height="218" src="images/ModgenPatterns-24.gif" /></div>

<p>
<a id="pgfId-1103262"></a>Use the options in the Common Centroid Pattern Form to define a centroid pattern that must be followed while placing devices on the grid. </p>
<ol><li>
<a id="pgfId-1103263"></a>Select the devices to which the common centroid pattern needs to be applied. If no devices are selected, then the pattern is applied to all the devices in the Grid Pattern Editor.</li><li>
<a id="pgfId-1103264"></a>Select <em>Common Centroid Pattern</em> from the <em>Preset</em> drop-down list to display the Common Centroid Pattern Form.<br />
<a id="pgfId-1103271"></a><div class="webflare-div-image">
<img src="images/GPE_Preset_CommonCentroidPattern.gif" /></div></li><li>
<a id="pgfId-1103272"></a>You can either specify the number of <em>Rows</em> and Columns (<em>Cols</em>) to be generated, or select <em>Default</em> to automatically calculate the optimum value. </li><li>
<a id="pgfId-1103273"></a>Specify the common centroid pattern in the <em>Pattern</em> field, which determines the order in which instances are placed in the common centroid pattern.</li><li>
<a id="pgfId-1103274"></a>Click <em>Apply</em>.</li></ol>








<p>
<a id="pgfId-1103275"></a>The following diagram depicts the common centroid pattern for the above specification, which is the default pattern:</p>

<p>
<a id="pgfId-1103293"></a></p>
<div class="webflare-div-image">
<img width="668" height="616" src="images/ModgenPatterns-26.gif" /></div>

<p>
<a id="pgfId-1103294"></a>Dummy devices and blank spaces can also be included in the common centroid pattern. Here are examples of how dummy devices and blank spaces can be inserted:</p>

<p>
<a id="pgfId-1103301"></a></p>
<div class="webflare-div-image">
<img width="668" height="469" src="images/ModgenPatterns-27.gif" /></div>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1103302"></a>In the above pattern, a slightly different pattern is followed - All 16 instances of device B are not placed together. Instead, 8 instances of device B are first placed around the dummy and blank devices, followed by instances of device A. The remaining 8 instances of device B are then placed.</div>

<h4>
<a id="pgfId-1108111"></a><a id="58317"></a>Flipping Devices</h4>

<p>
<a id="pgfId-1108112"></a>You can flip the selected devices either horizontally or vertically. To flip devices:</p>
<ol><li>
<a id="pgfId-1108113"></a>Select the required devices in the Grid Pattern Editor.</li><li>
<a id="pgfId-1108114"></a>Select <em>Flip Horizontal</em> or <em>Flip Vertical</em> from the <em>Presets</em> drop-down list. The selected instances are flipped accordingly.</li></ol>

<p>
<a id="pgfId-1108115"></a>The following diagrams depict how devices are flipped horizontally and vertically:</p>

<p>
<a id="pgfId-1108539"></a></p>
<div class="webflare-div-image">
<img width="668" height="480" src="images/ModgenPatterns-28.gif" /></div>
<h4>
<a id="pgfId-1108540"></a><a id="50447"></a>Interdigitati<a id="interdigitatePreset"></a>ng Presets</h4>

<p>
<a id="pgfId-1108594"></a>The Interdigitate Preset form lets you specify an interdigitation pattern for devices in a grid pattern. </p>
<ol><li>
<a id="pgfId-1108614"></a>Select the required instances. If no instances are selected, then the settings are applied to all the instances on the grid.</li><li>
<a id="pgfId-1108599"></a>Click the <em>Preset</em> drop-down list and choose <em>Interdigitate Preset</em> to display the Interdigitate Preset Form.<br />
<a id="pgfId-1108153"></a><div class="webflare-div-image">
<img src="images/Interdigitate_Preset_Form.gif" /></div><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1108078"></a>You can either directly <em>Apply</em> the defaults or modify the values described below before generating the interdigitation pattern.</div></li><li>
<a id="pgfId-1108222"></a>Specify the number of <em>Rows</em> and <em>Columns</em> in the grid, or choose <em>Auto</em> to automatically determine these values.</li><li>
<a id="pgfId-1108242"></a>Specify the required interdigitation <em>Pattern</em>. </li><li>
<a id="pgfId-1108270"></a>Specify the default <em>Orientation </em>of devices in the grid pattern.</li><li>
<a id="pgfId-1108284"></a>Indicate the grouping behavior - all devices or only the interdigitated devices. Also specify the number to be used for interdigitation in the <em>By</em> field.</li><li>
<a id="pgfId-1108308"></a>Specify the direction of <em>Placement</em> of devices - <em>Horizontal</em> or <em>Vertical</em>.</li><li>
<a id="pgfId-1108636"></a>Click <em>Apply</em>.</li></ol>













<h4>
<a id="pgfId-1108370"></a><a id="22935"></a>Interdigitating Resistors B<a id="interdigitateInstance"></a>y Instance Preset</h4>

<p>
<a id="pgfId-1108371"></a>Use the Interdigitate Resistor by Instance Preset form to specify the interdigitation pattern for devices that are placed in the grid. By default, instances are interdigitated by <code>1</code>. To interdigitate instances in a grid:</p>
<ol><li>
<a id="pgfId-1108372"></a>Select the required instances. If no instances are selected, then the settings are applied to all the instances on the grid.</li><li>
<a id="pgfId-1108373"></a>Select <em>Preset</em> - <em>Interdigitate </em>to display the Interdigitate Resistor By Instance Preset Form.<br />
<a id="pgfId-1108379"></a><div class="webflare-div-image">
<img src="images/GPE_InterdigirateByInstance.gif" /></div></li><li>
<a id="pgfId-1108380"></a>In the <em>Interdigitate by</em> field, specify the integer value based on which instances need to be interdigitated. The default is <code>1</code>. If you set the value to <code>0</code>, then instances are not interdigitated. You can set the value to a higher number.</li><li>
<a id="pgfId-1108381"></a>Edit the custom interdigitation <em>Pattern</em>. Click <em>Update Pattern</em> to apply the interdigitation settings to the active design.</li><li>
<a id="pgfId-1108382"></a>Select the required pattern <em>Topology</em>, which specifies the direction (rows or columns) and orientation of devices.</li><li>
<a id="pgfId-1108383"></a>Click <em>Apply</em>.</li></ol>









<p>
<a id="pgfId-1108384"></a>Here are examples of interdigitation in some designs:</p>

<p>
<a id="pgfId-1108395"></a></p>
<div class="webflare-div-image">
<img width="668" height="687" src="images/ModgenPatterns-31.gif" /></div>
<h4>
<a id="pgfId-1108358"></a><a id="49267"></a>Interdigitating Resistors By Row<a id="InterdigitateByRowCol"></a>s and Columns</h4>

<p>
<a id="pgfId-1109262"></a>Use the Interdigitate Resistor by Row/Col Preset form to place like instances in the same row or column. To do this:</p>
<ol><li>
<a id="pgfId-1109425"></a>Select the required instances. If no instance is selected, the settings are applied to all the instances in the grid.</li><li>
<a id="pgfId-1109263"></a>Select <em>Preset</em> - <em>Interdigitate Resistor by Row/Col </em>to display the Interdigitate Resistor by Row/Col Preset form.<br />
<a id="pgfId-1109991"></a><div class="webflare-div-image">
<img src="images/InterdigitateByRowsCols.gif" /></div>
<a id="pgfId-1109491"></a>Depending on the selected <em>Topology</em>, either <em>Rows</em> or <em>Cols</em> (columns) can be specified. If any of the <em>SRow_*</em> values are selected, the <em>Rows</em> value is fixed and <em>Cols</em> can be specified, and vice versa.</li><li>
<a id="pgfId-1109564"></a>The default <em>Interdigitate by</em> value is 1. You can specify a different value, if required.</li><li>
<a id="pgfId-1110150"></a>Specify the required <em>Pattern</em> and click <em>Update Pattern</em>.</li><li>
<a id="pgfId-1109562"></a>Select the required pattern <em>Topology</em> to specify the direction and orientation of devices.</li><li>
<a id="pgfId-1110315"></a>Click <em>Apply</em> to view results in the Grid Pattern Editor and in the layout canvas.<br />
<a id="pgfId-1110366"></a><div class="webflare-div-image">
<img width="668" height="450" src="images/ModgenPatterns-33.gif" /></div></li></ol>













<h4>
<a id="pgfId-1108555"></a><a id="95120"></a>Creating and Editing Resi<a id="CreateResistor"></a>stor Pattern Presets</h4>

<p>
<a id="pgfId-1103305"></a>Use the options in the Create Resistor Preset Form to define the resistor pattern that needs to be followed while placing devices on the grid. To define a resistor pattern:</p>
<ol><li>
<a id="pgfId-1103306"></a>Select <em>Create Resistor Pattern</em> from the <em>Presets</em> drop-down list to display the Create Resistor Preset Form.<br />
<a id="pgfId-1103313"></a><div class="webflare-div-image">
<img src="images/GPE_CreateResistorPreset.gif" /></div></li><li>
<a id="pgfId-1103314"></a>Specify the number of <em>Rows</em> and Columns (<em>Cols</em>) to be generated. </li><li>
<a id="pgfId-1103315"></a>(Optional) Use <em>Add Dummies</em> to specify whether blank spaces in the grid must be left blank (default) or filled with identical dummy devices. </li><li>
<a id="pgfId-1103316"></a>Specify the resistor pattern in the <em>Pattern</em> field. </li><li>
<a id="pgfId-1103317"></a>Select the required pattern <em>Topology</em>. When an <em>SRow_* </em>value (default) is selected, mfactor and s-factor instances are placed in rows, and instances are placed as per their numbering along the columns, as shown below:<br />
<a id="pgfId-1103325"></a><div class="webflare-div-image">
<img width="668" height="426" src="images/ModgenPatterns-35.gif" /></div>
<a id="pgfId-1103326"></a>When an <em>SCol_*</em> value is selected, instances are placed as per their numbering along the rows, and the mfactor and s-factor instances are placed in columns, as shown below:<br />
<a id="pgfId-1103334"></a><div class="webflare-div-image">
<img width="668" height="259" src="images/ModgenPatterns-36.gif" /></div></li><li>
<a id="pgfId-1103335"></a>Click <em>Apply</em>.</li></ol>


















<p>
<a id="pgfId-1103336"></a>Select <em>Edit Resistor Preset</em> from the <em>Preset</em> drop-down list in the Grid Pattern Editor to display the Edit Resistor Topology Form. Select a different topology to be applied to the pattern (as discussed above).</p>

<p>
<a id="pgfId-1103343"></a></p>
<div class="webflare-div-image">
<img src="images/EditResistor.gif" /></div>
<h4>
<a id="pgfId-1103364"></a><a id="30917"></a>Reorient<a id="reorientResist"></a>ing Resistors</h4>

<p>
<a id="pgfId-1103365"></a>Use the options in the Reorient Resistor Preset form to change the orientation of the first instance in the design. The orientations of the other instances are reset accordingly.</p>
<ol><li>
<a id="pgfId-1103366"></a>Select the required instances. If no instances are selected, then all the instances in the grid are considered.</li><li>
<a id="pgfId-1103367"></a>Select <em>Reorient Resistors</em> from the <em>Preset</em> drop-down list. The Reorient Resistors Preset form is displayed.<br />
<a id="pgfId-1103374"></a><div class="webflare-div-image">
<img src="images/GPE_ReorientResistorsPreset.gif" /></div></li><li>
<a id="pgfId-1103375"></a>The <em>First Instance</em> is selected alphanumerically from the list of available instances.</li><li>
<a id="pgfId-1103376"></a><em>Starting Orient</em> indicates the orientation of the first instance. You can change the value as per your requirement. The <em>Reverse Orient</em> value is changed accordingly.</li><li>
<a id="pgfId-1103377"></a><em>Reverse Orient</em> can be set to either the default reverse orientation or the mirrored orientation of the instance.</li></ol>








<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1103378"></a>At any point, click <em>Update Values</em> to reset all the options to their default values.</div>
<ol><li>
<a id="pgfId-1103379"></a>Click <em>Apply</em>.<br />
<a id="pgfId-1103393"></a><div class="webflare-div-image">
<img width="576" height="248" src="images/ModgenPatterns-39.gif" /></div></li></ol>



<h4>
<a id="pgfId-1103422"></a><a id="92497"></a><a id="96879"></a>Using the Preset Generator Functions</h4>
<p>
<a id="pgfId-1103423"></a>Use the following SKILL functions to manage presets:</p>

<ul><li>
<a id="pgfId-1103425"></a><a actuate="user" class="URL" href="../sklayoutref/modgen.html#gpeRegisterPresetGen" show="replace" xml:link="simple">gpeRegisterPresetGen</a>: Registers preset generator functions. Once registered, these functions are displayed in the <em>Preset</em> drop-down list.</li><li>
<a id="pgfId-1103427"></a><a actuate="user" class="URL" href="../sklayoutref/modgen.html#gpeIsRegisteredPresetGen" show="replace" xml:link="simple">gpeIsRegisteredPresetGen</a>: Checks whether a preset generator function is registered.</li><li>
<a id="pgfId-1103429"></a><a actuate="user" class="URL" href="../sklayoutref/modgen.html#gpeRunPresetGen" show="replace" xml:link="simple">gpeRunPresetGen</a>: Invokes a preset generator function on the active figGroup. The current figGroup is updated according to the preset generator logic.</li><li>
<a id="pgfId-1103431"></a><a actuate="user" class="URL" href="../sklayoutref/modgen.html#gpeIsPresetGenDisplayable" show="replace" xml:link="simple">gpeIsPresetGenDisplayable</a>: Checks whether a preset generator should be displayed in the <em>Preset</em> drop-down list of the Grid Pattern Editor.</li><li>
<a id="pgfId-1103433"></a><a actuate="user" class="URL" href="../sklayoutref/modgen.html#gpeClearPresetGenerators" show="replace" xml:link="simple">gpeClearPresetGenerators</a>: Deletes all the registered preset generator functions from the system.</li><li>
<a id="pgfId-1103435"></a><a actuate="user" class="URL" href="../sklayoutref/modgen.html#gpeUnregisterPresetGen" show="replace" xml:link="simple">gpeUnregisterPresetGen</a>: Unregisters the given preset generator function from the Grid Pattern Editor.</li></ul>






<h3>
<a id="pgfId-1103437"></a><a id="13728"></a>Grid Pattern Mapping</h3>

<p>
<a id="pgfId-1103439"></a>Use the Grid Pattern Map<a id="gpeMappingAsst"></a>ping assistant to view and change the mapping of instances and dummies. The following figure explains the various columns in the Grid Pattern Mapping assistant.</p>

<p>
<a id="pgfId-1103443"></a></p>
<div class="webflare-div-image">
<img width="666" height="280" src="images/ModgenPatterns-40.gif" /></div>

<p>
<a id="pgfId-1103444"></a>Selecting Instances of a Device: When you select a device in the Grid Pattern Mapping assistant, all instances of the device are highlighted in the layout canvas. </p>
<p>
<a id="pgfId-1103445"></a>Sorting Devices: To sort the devices alphabetically, click the header of the column that you want to sort. Alternate clicks sort in ascending and descending order.</p>
<p>
<a id="pgfId-1103446"></a>Remapping Instances: When you change the symbol of a device in the Grid Pattern Mapping assistant, all instances of the device in the <a href="ModgenPatterns.html#78240">Grid Pattern Editor</a> are updated and remapped to the new symbol name.</p>
<p>
<a id="pgfId-1107423"></a>Adding and Removing Instances from Modgens: Use the <img width="29" height="23" src="images/ModgenPatterns-41.gif" /><span> and </span><img width="30" height="25" src="images/ModgenPatterns-42.gif" /><span> buttons to add or remove selected instances from the active Modgen. You can add instances from the layout or schematic cellviews. Corresponding SKILL functions: gpeAddInstance, gpeRemoveInstance</span></p>

<p>
<a id="pgfId-1107348"></a>Updating Modgen Instances: Select the <img src="images/UpdateSandbox.gif" /><span> button to update the connectivity and nets on the instances in the Modgen. The device connectivity, parameters, and multipliers are refreshed from the corresponding schematic cellview.</span></p>

<p>
<a id="pgfId-1126849"></a><strong>Resetting Column Width:</strong> If you have altered the size of columns in the GPM assistant, you can click the <img src="images/AutoFitColumn.gif" />
button to auto-fit the columns.</p>


<p>
<a id="pgfId-1107349"></a>Using the Shortcut Menu: Select a device and use the shortcut menu to perform the following tasks:</p>

<p>
<a id="pgfId-1103454"></a></p>
<div class="webflare-div-image">
<img src="images/GridPatternMapping_Shortcut.gif" /></div>

<ul><li>
<a id="pgfId-1103458"></a>Paste on Grid: Select a few devices in the <a href="ModgenPatterns.html#78240">Grid Pattern Editor</a> before running this command. The selected devices are replaced by the device highlighted in the <a href="ModgenPatterns.html#13728">Grid Pattern Mapping</a> assistant. <br />
<a id="pgfId-1103462"></a>Example: In the following example, <em>Paste on Grid</em> has replaced all the selected instances of device D in the Grid Pattern Editor with device A.<br />
<a id="pgfId-1103467"></a><div class="webflare-div-image">
<img width="631" height="377" src="images/ModgenPatterns-46.gif" /></div></li><li>
<a id="pgfId-1103468"></a>Clear from Grid: All instances of the selected device in the Grid Pattern Mapping assistant are deleted from the Grid Pattern Editor.</li><li>
<a id="pgfId-1103469"></a>Select on Grid: All instances of the selected device in the Grid Pattern Mapping assistant are selected in the Grid Pattern Editor.</li><li>
<a id="pgfId-1103470"></a>Select All Blanks on Grid: All blank instances are selected in the Grid Pattern Editor. Following this command, you can select another device in the Grid Pattern Mapping assistant and choose <em>Paste on Grid</em> from the shortcut menu.<a id="74392"></a></li></ul>









<h2>
<a id="pgfId-1119264"></a><a id="31302"></a>Support for Sta<a id="ModgenStacks"></a>cks in Modgens</h2>

<p>
<a id="pgfId-1119317"></a>(ICADVM20.1 Only) A stack of series-connected devices (stack) is a set of devices that are connected in sequence from the source to drain. The devices in a stack share a common gate connection, bulk connection (if the devices have a bulk terminal), and super-master. In addition, stacks have no external connections to any internal source or drain terminal. The following image depicts a stack in the schematic view.</p>

<p>
<a id="pgfId-1119475"></a></p>
<div class="webflare-div-image">
<img width="544" height="532" src="images/ModgenPatterns-47.gif" /></div>

<p>
<a id="pgfId-1119473"></a>Stacking devices helps achieve circuit performance goals in advanced node PDKs, where the gate lengths for analog devices are more uniform and discrete. A properly arranged stack can be internally abutted to reduce the area of the layout.</p>
<p>
<a id="pgfId-1119320"></a>When a new Modgen is created with the GPE or GPM assistant visible, all stacks within the Modgen are detected, rearranged according to connectivity (if necessary), and their members are abutted. </p>
<p>
<a id="pgfId-1120396"></a>For existing Modgens, stacks are detected only if their devices are arranged and abutted properly. </p>

<p>
<a id="pgfId-1123938"></a></p>
<div class="webflare-div-image">
<img width="668" height="306" src="images/ModgenPatterns-48.gif" /></div>

<p>
<a id="pgfId-1123020"></a>Each abutted stack is represented as a single symbol, as if it were a single device, in the GPE and GPM assistants. The tooltips for these symbols in the GPE and GPM assistants provide information about the constituent stacked devices.</p>
<p>
<a id="pgfId-1124325"></a>Stacks sets that are connected in parallel also share a common symbol.</p>

<p>
<a id="pgfId-1120031"></a></p>
<div class="webflare-div-image">
<img width="570" height="430" src="images/ModgenPatterns-49.gif" /></div>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1122172"></a>Series-connected, unabutted devices with shared gate connectivity are displayed in the GPE and GPM as individual symbols.</div>
<p>
<a id="pgfId-1119329"></a>Dummies that are adjacent to abutted stacks are also stacked and abutted.</p>

<h4><em>
<a id="pgfId-1121359"></a>Related SKILL Functions</em></h4>

<ul><li>
<a id="pgfId-1121907"></a><a actuate="user" class="URL" href="../sklayoutref/modgen.html#gpeStacksCompress" show="replace" xml:link="simple">gpeStacksCompress</a></li><li>
<a id="pgfId-1121396"></a><a actuate="user" class="URL" href="../sklayoutref/modgen.html#gpeStacksAreCompressed" show="replace" xml:link="simple">gpeStacksAreCompressed</a></li><li>
<a id="pgfId-1121398"></a><a actuate="user" class="URL" href="../sklayoutref/modgen.html#gpeStacksUncompress" show="replace" xml:link="simple">gpeStacksUncompress</a></li></ul>



<h4><em>
<a id="pgfId-1120517"></a>Features of Stacks</em></h4>

<ul><li>
<a id="pgfId-1120519"></a>Changing the Orientations of Stacks: A stack may have valid orientations of <code>R0</code>, <code>MX</code>, <code>MY</code>, or <code>R180</code>. The orientation applies to the entire stack; the orientations of the stack members may (or may not) be identical to the orientation of the stack. This means that the absolute orientation of a stack is arbitrary. Therefore, the displayed stack orientation may not always be preserved when the stack is rotated. When a stack is rotated, the orientation is applied to each stacked device individually. <code>MY</code> and <code>R180</code> rotations also result in a left-to-right reversal of the ordering of the stack members.</li><li>
<a id="pgfId-1120527"></a>Naming Stacks: Stacks are named in one of the following ways:<ul><li>
<a id="pgfId-1122229"></a>If a naming pattern is recognized, then its base pattern is used to identify the stack.<br />
<a id="pgfId-1122230"></a>Examples: A stacked named <code>M0</code> is created in the following situations:<ul><li>
<a id="pgfId-1122303"></a>A stack that represents the layout devices <code>M0.0</code>, <code>M0.1</code>, <code>M0.2</code>, and <code>M0.3</code> that are bound to schematic device <code>M0</code> with an s-factor.</li><li>
<a id="pgfId-1122231"></a>A stack that represents iterated layout devices <code>M0&lt;0&gt;</code>, <code>M0&lt;1&gt;</code>, <code>M0&lt;2&gt;</code>, and <code>M0&lt;3&gt;</code>.</li></ul></li><li>
<a id="pgfId-1122224"></a>If a naming pattern is not recognized, then the stack name is based on the name of the first stack member, alphabetically.</li></ul></li><li>
<a id="pgfId-1121139"></a>Adding Dummies: Dummies can be added around stacks.<ul><li>
<a id="pgfId-1121213"></a>Dummies added above or below a stack result in a stack of dummies with the same number of members as the reference stack. </li><li>
<a id="pgfId-1121219"></a>Dummies added to the left or right of a stack result in a single dummy being inserted.</li><li>
<a id="pgfId-1121222"></a>Surround dummies inserts dummy stacks above and below the stack and a single dummy on each side.</li></ul></li><li>
<a id="pgfId-1121245"></a>Using Pattern Presets: Built-in presets, other than the resistor presets, support the use of Modgen sandbox objects in both, the stacked and unstacked formats. Resistor presets support only the unstacked format.</li></ul>














<h2>
<a id="pgfId-1103475"></a><a id="89994"></a><a id="79192"></a>Specifying Interdigitation Patterns<a id="marker-1103474"></a></h2>

<p>
<a id="pgfId-1103476"></a>You have two options for setting up interdigitation. You can specify an interdigitation pattern specific to this module using the Modgen Pattern Editor. The module will, by default, be interdigitated by <code>1</code>, and you do not have to set up interdigitation if you are satisfied with the default. However, you can change the default value by changing the cdsenv variable, <a href="ModgenEnvars.html#98158"><h-hot>modgenInterdigitationFactor</h-hot><code></code></a>. In case no interdigitation in the Modgen is required, you can specify <code>0</code> in the <em>Interdigitate By</em> text box. Therefore, when you make a Modgen, it will not be interdigitated.</p>
<p>
<a id="pgfId-1103483"></a>The environment variable, <a href="ModgenEnvars.html#67519"><h-hot>modgenUseIteratedAsMfactor</h-hot><code></code></a><code> </code>has been introduced that allows Modgen to consider iterated instances, with same or different connectivity, equivalent to an m-factor (multiplier). As a result, the pattern mapping shows the number of instances equivalent to the iterations for each different master.</p>
<p>
<a id="pgfId-1103484"></a>You can also specify custom interdigitation patterns in a file. These patterns will be available on a user, site, or design basis, depending on where it is stored; see the <em><a actuate="user" class="URL" href="../caiuser/caiuserTOC.html#firstpage" show="replace" xml:link="simple">Cadence Application Infrastructure User Guide</a></em> for more information on where to store this file. Each pattern defined in the file is then available from the <em>Pattern Option</em> cyclic field in the Module Generator form. For more information, see <a href="ModgenPatterns.html#28745">Setting Up the Custom Interdigitation Pattern File</a>.</p>

<h3>
<a id="pgfId-1103492"></a><a id="pattern"></a><a id="82434"></a>Using the Modgen Pattern Editor<a id="marker-1103491"></a></h3>

<p>
<a id="pgfId-1103493"></a>In the Modgen Pattern Edi<a id="modgenPattern"></a>tor, you can specify an interdigitation pattern for this module. You can then save this pattern for future use.</p>
<p>
<a id="pgfId-1103494"></a>You have three options for interdigitation. You can specify that the Module Generator automatically interdigitate by a specified integer (see below), you can specify a custom interdigitation pattern (see <a href="ModgenPatterns.html#59655">Specifying Standard Interdigitation</a>).</p>

<div class="webflare-information-macro webflare-macro-tip">
<a id="pgfId-1103498"></a>
The module will, by default, be interdigitated by 1, and you do not have to set up interdigitation if you are satisfied with the default.</div>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1103499"></a>The names in the <em>Pattern Name</em> fields are filtered by the number of schematic and layout instances and the number of rows.</div>

<h4>
<a id="pgfId-1103501"></a><a id="59655"></a>Specifying Standard Interdigitation</h4>

<ol><li>
<a id="pgfId-1103502"></a>Click the <em>Pattern</em> <img src="images/pattern_icon.gif" />
 icon on the toolbar at the top.<br />
<a id="pgfId-1103503"></a>The Modgen Pattern Editor appears.<br />
<a id="pgfId-1103507"></a><div class="webflare-div-image">
<img src="images/mpe1.gif" /></div></li><li>
<a id="pgfId-1103508"></a>For Pattern Option, select the <em>Interdigitate</em> radio button.</li><li>
<a id="pgfId-1103509"></a>In the Interdigitate By field, enter the integer to use for interdigitation.</li><li>
<a id="pgfId-1103510"></a>Click <em>OK</em> to save your settings and dismiss the Modgen Pattern Editor. The Modgen Pattern Editor is dismissed and the module layout is modified based on the specified pattern. Optionally, click <em>Revert</em> to undo all changes in the Modgen Pattern Editor. All fields are reset to the previous successful applied values.<br /><div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1103511"></a>
If you select the <em>Abut All</em> check box, auto abutment is triggered automatically for all devices in a Modgen once the pattern editor has been applied.</div></li></ol>












<h3>
<a id="pgfId-1103514"></a><a id="90018"></a>Specifying Custom Interdigitation<a id="modgenPattern"></a></h3>

<p>
<a id="pgfId-1103515"></a>You can also specify a custom interdigitation pattern. When you specify a custom interdigitation pattern, you can either begin with a base pattern or specify a custom interdigitation pattern from scratch.</p>
<p>
<a id="pgfId-1103516"></a>To begin custom interdigitation:</p>
<ol><li>
<a id="pgfId-1103520"></a>Click the <em>Pattern</em> <img src="images/pattern_icon.gif" />
 icon on the toolbar at the top.<br />
<a id="pgfId-1103524"></a>The <a href="ModgenForms.html#74801">Modgen Pattern Editor<code></code></a> appears.<br />
<a id="pgfId-1103525"></a>The Modgen Pattern form lists all the device instances currently specified in this module generator and maps each one to a letter. You can also specify a dummy device using an asterisk (*) or an empty cell using a dash character (-).</li><li>
<a id="pgfId-1103526"></a>For Pattern Option, select the <em>Customize</em> radio button.<br />
<a id="pgfId-1103531"></a><div class="webflare-div-image">
<img width="605" height="786" src="images/ModgenPatterns-53.gif" /></div>
<a id="pgfId-1103535"></a>You can now either modify the default pattern (see <a href="ModgenPatterns.html#40264">Modifying a Custom Interdigitation</a>) or you can generate a base pattern and modify it if necessary (see <a href="ModgenPatterns.html#77351">Generating a Base Pattern</a>).</li></ol>











<h4><em>
<a id="pgfId-1103539"></a>Specifying Connectivity for Dummies</em></h4>

<p>
<a id="pgfId-1103540"></a>You can specify the connectivity for dummies that are placed in the pattern specification.</p>

<p>
<a id="pgfId-1103545"></a></p>
<div class="webflare-div-image">
<img width="659" height="88" src="images/ModgenPatterns-54.gif" /></div>

<p>
<a id="pgfId-1103546"></a>The <em>Net</em> combo box lists the nets that are connected to objects in the active Modgen. Choose the net to which you want all the dummies in the pattern for the Modgen to be connected. To choose a net that is present in the cellView, but not in the current Modgen, type the net name in the <em>Net</em> combo box. The entry is validated against all existing nets in the current cellView. If a matching net is not available in the current cellView, then a warning message is issued and the net is created.</p>
<p>
<a id="pgfId-1103547"></a>Based on the following algorithm, a default value is selected and displayed in the Net combo box.</p>
<p>
<a id="pgfId-1103551"></a></p>

<div class="webflare-div-image">
<img src="images/DummyNetField.GIF" /></div>

<p>
<a id="pgfId-1103552"></a>Select the <em>Specify Properties </em>check box to enable the options for specifying dummy device properties.</p>
<ol><li>
<a id="pgfId-1103553"></a>From the <em>Fingers</em> cyclic field, choose one of the following:<ul><li>
<a id="pgfId-1103554"></a><em>CDF Default</em> &#8211; The default number of fingers as specified in the CDF is created</li><li>
<a id="pgfId-1103555"></a><em>Same As Neighbor</em> &#8211; The same number of fingers as the neighboring device is created</li><li>
<a id="pgfId-1103556"></a><em>Specify</em> &#8211; You can specify the number of fingers to be created in the box beside the <em>Fingers</em> cyclic field</li></ul></li><li>
<a id="pgfId-1103557"></a>From the <em>Length</em> cyclic field, choose one of the following:<ul><li>
<a id="pgfId-1103558"></a><em>CDF Default</em> &#8211; The default number of fingers as specified in the CDF is created</li><li>
<a id="pgfId-1103559"></a><em>Same As Neighbor</em> &#8211; The length of fingers of the neighboring device is considered</li><li>
<a id="pgfId-1103560"></a><em>Specify</em> &#8211; You can specify the length of fingers in the box beside the <em>Length</em> cyclic field<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1103561"></a>Scale factors can be used to specify the length; for example .1u.</div></li></ul></li><li>
<a id="pgfId-1103562"></a>From the <em>Width </em>cyclic field, choose one of the following:<ul><li>
<a id="pgfId-1103563"></a><em>CDF Default</em> &#8211; The default number of fingers as specified in the CDF is created</li><li>
<a id="pgfId-1103564"></a><em>Same As Neighbor</em> &#8211; The width of fingers of the neighboring device is considered</li><li>
<a id="pgfId-1103565"></a><em>Specify</em> &#8211; You can specify the width of fingers in the box beside the <em>Width</em> cyclic field</li></ul></li></ol>














<p>
<a id="pgfId-1103566"></a>Scale factors can be used to specify the width; for example 200n.</p>
<p>
<a id="pgfId-1103567"></a>The above parameters apply to all dummies in the current pattern. The number of fingers for specific dummies can be overridden specifying a pattern in the Base Pattern field. For example, to set a specific dummy&#39;s number of fingers to 2, type &#39;*:2&#39; in the Base Pattern field. </p>
<p>
<a id="pgfId-1103571"></a>For more information about specifying patterns, see <a href="ModgenPatterns.html#77351">Generating a Base Pattern</a>. </p>
<p>
<a id="pgfId-1103574"></a>For more information about specifying dummy device properties, see <a href="ModgenPatterns.html#31939"></a>.</p>

<h4><em>
<a id="pgfId-1103578"></a><a id="77351"></a>Generating a Base Pattern<a id="marker-1103577"></a></em></h4>

<p>
<a id="pgfId-1103579"></a>You can begin your interdigitation by specifying a base pattern and the number of rows, then generate the resulting pattern and modify it as desired. Base patterns begin at the lower left corner of the grid and proceed left to right until all rows are filled.</p>
<p>
<a id="pgfId-1103580"></a>For example, if you have two devices with an m-factor of four, and you specify two rows with the base pattern of ABBA, you would create the following interdigitation pattern:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103581"></a>A B B A</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103582"></a>A B B A</pre>
<p>
<a id="pgfId-1103583"></a>The base pattern does not have to cover an entire row. If, instead, you specified a base pattern of ABB, the resulting pattern would be as follows:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103584"></a>BBAB</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103585"></a>ABBA</pre>
<p>
<a id="pgfId-1103586"></a>To generate a base pattern:</p>
<ol><li>
<a id="pgfId-1103587"></a>Specify the number of rows to create in the <em>Rows</em> field.</li><li>
<a id="pgfId-1103588"></a>Type the base pattern using the letters mapped to each instance as displayed in the <em>Name Mapping </em>list box in the <em>Base Pattern</em> text box.<br />
<a id="pgfId-1103589"></a>You can also specify dummy devices and empty rows using the values displayed in the Name Mapping list box.<br /><div class="webflare-information-macro webflare-macro-warning">
<a id="pgfId-1103590"></a>
This is a space-separated list; each value must be followed by a space.</div></li><li>
<a id="pgfId-1103591"></a>Click <em>Generate</em>.<br />
<a id="pgfId-1103592"></a>The resulting pattern is displayed in the<em> Base Pattern</em> list box.</li></ol>







<p>
<a id="pgfId-1103593"></a>Repetition Factor for Base Pattern</p>
<p>
<a id="pgfId-1103594"></a>You can also specify a repetition factor to repeat a pattern symbol multiple times in the <em>Base Pattern</em> text using the following syntax:</p>

<a id="pgfId-1103595"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
&lt;pattern symbol&gt;:&lt;repetition count&gt;</pre>

<p>
<a id="pgfId-1103596"></a>Example:</p>
<p>
<a id="pgfId-1103597"></a>If you type <code>A B:8 C</code> in the <em>Base Pattern</em> text box, then the resultant value will be displayed in the following pattern:</p>
<p>
<a id="pgfId-1103598"></a><code>A B B B B B B B B C</code></p>
<p>
<a id="pgfId-1103599"></a>In addition, the repetition factor can also be used in the Base Orientation field. For example, entering <code>R0 MY:8 R0</code> would result in:</p>
<p>
<a id="pgfId-1103600"></a><code>R0 MY MY MY MY MY MY MY MY R0</code></p>
<p>
<a id="pgfId-1103602"></a><strong>Repetition Sequences of Pattern Symbols</strong><a id="patternsym"></a></p>
<p>
<a id="pgfId-1103603"></a>The pattern notation specifies repeating sequences of pattern symbols. This is useful for more complicated patterns required to generate the device configurations, such as common centroid. </p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1103604"></a>A pattern symbol is a single letter, &#39;<code>*</code>&#39; or &#39;<code>-</code>&#39;, which is optionally followed by a number. A pattern sequence contains one or more pattern symbols or pattern expressions concatenated together.</div>
<p>
<a id="pgfId-1103605"></a>In addition, a shorthand for filling out the rows of a pattern has been introduced. In this, if the pattern text has less lines than what is specified in the <em>Rows</em> field of the form, then the lines entered so far gets repeated to fill out the remaining rows. </p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1103606"></a>
The shorthand notation can only be used if the number of schematic devices in the Modgen are less than or equal to 25. This is because if there are more than 25 schematic devices, Modgens generate symbols with numbers concatenated to them, such as <code>A1</code> or <code>B1</code> to make them unique. Therefore, the syntax for the shorthand repetition factor and the syntax to make unique symbols are ambiguous.

Though, you can still specify a repetition factor if there are more than 25 schematic devices, but it must be delimited with a &#39;:&#39;. For example, <code>a2</code> is interpreted as the pattern symbol <code>A2</code> whereas, <code>a:2</code> is interpreted as the pattern symbol <code>A</code> repeated <code>2</code> times.</div>

<p>
<a id="pgfId-1103607"></a>Example 1:</p>
<p>
<a id="pgfId-1103608"></a>To generate a pattern in which each dummy in the middle has two fingers: </p>
<ol><li>
<a id="pgfId-1103609"></a>Type the shorthand notation of the pattern in the expanded <em>Base Pattern</em> text box of the Modgen Pattern Editor. <br />
<a id="pgfId-1103613"></a><div class="webflare-div-image">
<img src="images/ShorthandNotation1.gif" /></div></li><li>
<a id="pgfId-1103614"></a>Click the <em>Apply</em> button.<br />
<a id="pgfId-1103618"></a><div class="webflare-div-image">
<img src="images/ShorthandNotation2.gif" /></div>
<a id="pgfId-1103619"></a>Notice that the shorthand notation in the expanded <em>Base Pattern</em> text box is automatically converted to the corresponding base pattern.</li><li>
<a id="pgfId-1103620"></a>Click <em>OK</em> to save the setting and dismiss the Modgen Pattern Editor.</li></ol>











<p>
<a id="pgfId-1103621"></a><code></code></p>
<p>
<a id="pgfId-1103622"></a>Example 2:</p>
<p>
<a id="pgfId-1103623"></a>If you want to generate the pattern for <code>(b2a2)2</code> and <code>(a2b2)2</code>, where a Modgen has <code>4</code> rows, then the following pattern is generated.</p>
<p>
<a id="pgfId-1103624"></a><code>B B A A B B A A</code></p>
<p>
<a id="pgfId-1103625"></a><code>A A B B A A B B</code></p>
<p>
<a id="pgfId-1103626"></a><code>B B A A B B A A</code></p>
<p>
<a id="pgfId-1103627"></a><code>A A B B A A B B</code></p>

<h4><em>
<a id="pgfId-1103629"></a><a id="40264"></a>Modifying a Custom Interdigitation</em></h4>

<ol><li>
<a id="pgfId-1103630"></a>In the <em>Pattern</em> list box, modify the default pattern, or the pattern generated using a base pattern (see <a href="ModgenPatterns.html#77351">Generating a Base Pattern</a>), using the letters mapped to each instance as displayed in the <em>Name Mapping</em> list box.<br />
<a id="pgfId-1103634"></a>Each row in the Pattern list box maps to a row in the module.<br /><div class="webflare-information-macro webflare-macro-warning">
<a id="pgfId-1103635"></a>
This is a space-separated list; each value must be followed by a space.</div></li><li>
<a id="pgfId-1103636"></a>In the <em>Orientation</em> list box, specify an orientation for each instance in the order in which they are listed in the <em>Pattern</em> list box.<br /><div class="webflare-information-macro webflare-macro-warning">
<a id="pgfId-1103637"></a>
This is a space-separated list; each value must be followed by a space.</div><br />
<a id="pgfId-1103638"></a>For example, if the pattern is A B C D, and you want to specify the following orientations:<br />
<a id="pgfId-1103656"></a><table class="webflareTable webflareTableIndent" id="#id1103639">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103641"></a>A</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103643"></a>R0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103645"></a>B</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103647"></a>R0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103649"></a>C</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103651"></a>R90</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103653"></a>D</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103655"></a>R90</p>
</td>
</tr>
</tbody></table><br />
<a id="pgfId-1103657"></a>Then you would specify the following in the <em>Base Orientation</em> list box: <code>R0 R0 R90 R90</code><br />
<a id="pgfId-1103658"></a>You can also specify the orientation for dummy devices. Dummy devices are represented by an asterisk (*) in the Custom Orientation list box. Consider pattern <code>*AB*</code> with the following orientation:<br />
<a id="pgfId-1103676"></a><table class="webflareTable webflareTableIndent" id="#id1103659">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103661"></a>*</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103663"></a>R180</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103665"></a>A</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103667"></a>R0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103669"></a>B</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103671"></a>R90</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103673"></a>*</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103675"></a>R180</p>
</td>
</tr>
</tbody></table><br />
<a id="pgfId-1103677"></a>Before specifying the base orientation for dummy devices, set the <code>MG_BASE_ORIENT_OVERWRITE_DUMMY</code> shell environment variable to <code>t</code>. Then, specify the following in the <em>Base Orientation</em> list box: <code>R180 R0 R90 R180</code>.<br />
<a id="pgfId-1103678"></a>If you do not set the shell environment variable, then the dummy devices will have the same orientation as their neighboring non-dummy devices. For example, for pattern<code> *AB*</code>, if you specify the orientation as <code>R0 R90</code>, then the orientation of the first dummy device will be <code>R0</code>, and for the last dummy device will be <code>R90</code>.</li><li>
<a id="pgfId-1103679"></a>If there are any errors in the pattern or orientation, use the <em>Revert</em> button to undo the changes. All fields are reset to the previous successful applied values. Now you can made the required edits to the pattern and orientation.</li><li>
<a id="pgfId-1103680"></a>If you want to save this pattern, type the pattern name from the <em>Pattern Name</em> combo box and click the <em>Save </em>button.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1103681"></a>You can also select applicable pattern names for the current Modgen configuration from the <em>Pattern Name</em> combo box.</div>
<a id="pgfId-1103682"></a>Virtuoso saves the pattern to the first writable Modgen.patterns file it can find, based on the Cadence search rules defined in the <em><a actuate="user" class="URL" href="../caiuser/caiuserTOC.html#firstpage" show="replace" xml:link="simple">Cadence Application Infrastructure User Guide</a></em>. If it cannot locate a Modgen.patterns file, it will create one in the current working directory.</li><li>
<a id="pgfId-1103684"></a>Click <em>OK</em>.<br />
<a id="pgfId-1103685"></a>The Modgen Pattern Editor is dismissed and the module layout is modified based on the specified pattern.<br />
<a id="pgfId-1103686"></a>To save the pattern, specify a <em>Pattern Name</em> and click <em>Save</em>. In case you choose to save the pattern, then the changes will not apply across different Modgens, and therefore the pattern file will not be saved.</li></ol>






























<p>
<a id="pgfId-1103687"></a>Specifying pattern Symbols for Devices Connected in Series</p>
<p>
<a id="pgfId-1103688"></a>To differentiate among the individual elements of an s-factored device, you need to specify pattern symbols in the <em>Base Orientation</em> text box using the following syntax:</p>

<a id="pgfId-1103689"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
&lt;pattern symbol&gt;.&lt;integer&gt;</pre>

<p>
<a id="pgfId-1103690"></a>Example:</p>
<p>
<a id="pgfId-1103691"></a>If two resistors <code>R0</code> and <code>R1</code> each have two segments, <code>s0</code> and <code>s1</code>, then you can use <code>A.1</code> to represent <code>R0.s0</code>, <code>A.2 </code>to represent <code>R0.s1</code>. Similarly, <code>B.1</code> to represent <code>R1.s0</code> and <code>B.2</code> to represent <code>R1.s1</code>. The resultant value will be displayed in the following pattern:</p>
<p>
<a id="pgfId-1103692"></a><code>A.1 A.2 B.1 B.2</code></p>

<h4><em>
<a id="pgfId-1103693"></a>Changing the Pattern Name Mappings</em></h4>

<p>
<a id="pgfId-1103694"></a>To change the mapping of pattern names to instance master names, you need to perform the following steps:</p>
<ol><li>
<a id="pgfId-1103695"></a>Select the desired pattern symbol from the left pane of the <em>Name Mapping</em> list box.<br />
<a id="pgfId-1103699"></a><div class="webflare-div-image">
<img src="images/mpe4.gif" /></div></li><li>
<a id="pgfId-1103700"></a>In the right pane of the <em>Name Mapping</em> list box, select the desired instance master.</li><li>
<a id="pgfId-1103701"></a>Click the <em>Map</em> button to complete the mapping. The entries in both panes of the form will update to show the new mapping.</li><li>
<a id="pgfId-1103702"></a>Continue steps 2 to 4 until all pattern symbols are mapped.</li><li>
<a id="pgfId-1103703"></a>Click <em>Done</em>.</li><li>
<a id="pgfId-1103704"></a>Click the <em>OK</em> button for new mapping to take effect.<br /><div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1103705"></a>
If all the iterated instances have the same connectivity, then there is only one pattern symbol to represent them.

For example, if there is an iterated instance, <span class="webflare-courier-new" style="white-space:pre"><em>M1&lt;0:2&gt;</em></span> and all the instances have the same connectivity, then its entry in the name mapping pane is:
<span class="webflare-courier-new" style="white-space:pre"><em>A    M1&lt;0:2&gt;
</em></span>However, if the instances have different connectivity, then entries in the name mapping pane are:

<span class="webflare-courier-new" style="white-space:pre"><em>A    M1&lt;0&gt;
B    M1&lt;1&gt;
C    M1&lt;2&gt;</em></span></div></li></ol>












<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1103706"></a>If the user selects the <em>Customize</em> option and enters a pattern and/or an orientation string in the Pattern text or Orientation text fields, then those strings will be retained such that if the user switches to the Interdigitate mode and back to the Customize mode, then the Pattern and Orientation text fields will reflect the last entered strings. However, if the user clicks the <em>Apply</em> button or changes the number of rows while the Interdigitate option is selected, then these retained strings are discarded and the user must enter new pattern and orientation strings.</div>

<h3>
<a id="pgfId-1103709"></a><a id="28745"></a>Setting Up the Custom Interdigitation Pattern File<a id="marker-1103708"></a></h3>

<p>
<a id="pgfId-1103710"></a>You can specify custom interdigitation patterns in a <em>Modgen.patterns</em> file, which can be stored on a design, user, or site basis (for more information, see the <em><a actuate="user" class="URL" href="../caiuser/caiuserTOC.html#firstpage" show="replace" xml:link="simple">Cadence Application Infrastructure User Guide</a></em>).</p>

<h4>
<a id="pgfId-1103712"></a>Syntax</h4>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1103713"></a>( name &lt;Schematic_inst_num&gt; &lt;layout_inst_num&gt; &lt;row_num&gt;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1103714"></a>( (&lt;row1_pattern_list&gt;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1103715"></a>    (&lt;row2_pattern_list&gt;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1103716"></a>    ...</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1103717"></a>    (&lt;rowN_pattern_list&gt;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1103718"></a>  )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1103719"></a>( (&lt;row1_orient_list&gt;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1103720"></a>    (&lt;row2_orient_list&gt;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1103721"></a>    ...</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1103722"></a>    (&lt;rowN_orient_list&gt;)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1103723"></a>  )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1103724"></a>)</pre>
<h4>
<a id="pgfId-1103725"></a>Parameters</h4>

<p>
<a id="pgfId-1103726"></a>The following table defines the parameters for the custom interdigitation pattern file.</p>

<p>
<a id="pgfId-1103783"></a></p>
<table class="webflareTable" id="#id1103727">
<caption style="text-align:left;"><p>
</p><h4>Table 2-1
<a id="pgfId-1103729"></a>Custom Interdigitation Pattern Parameters</h4></caption>
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1103735">
<a id="pgfId-1103735"></a>Parameter Name</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1103737">
<a id="pgfId-1103737"></a>Parameter Type</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1103739">
<a id="pgfId-1103739"></a>Description</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103741"></a>name</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103743"></a>string</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103745"></a>The name of the pattern.&#160;&#160;&#160;&#160;</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103747"></a>Schematic_inst_num</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103749"></a>integer</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103751"></a>The number of different Pcell masters in the Modgen module.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103753"></a>layout_inst_num</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103755"></a>integer</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103757"></a>The number of instances in the Modgen array.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103759"></a>row_num</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103761"></a>integer</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103763"></a>The number of rows in the Modgen array.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103765"></a>row_pattern_list</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103767"></a>list</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103769"></a>A list composed by the letters that represent the interdigitation of instances; each list represents one row in the array.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103771"></a>row_orient_list</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103773"></a>list</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1103775"></a>A list composed by an orient string representing the orientation of instances; each list represents one row in the array.</p>
<p>
<a id="pgfId-1103776"></a>Orientations are defined using one of the following strings:</p>

<ul><li>
<a id="pgfId-1103777"></a>R0</li><li>
<a id="pgfId-1103778"></a>R90</li><li>
<a id="pgfId-1103779"></a>R180</li><li>
<a id="pgfId-1103780"></a>R270</li><li>
<a id="pgfId-1103781"></a>MX</li><li>
<a id="pgfId-1103782"></a>MY</li></ul>






</td>
</tr>
</tbody></table>
<h4>
<a id="pgfId-1103785"></a><a id="49012"></a>Example</h4>

<p>
<a id="pgfId-1103786"></a>Here are several examples of interdigitation pattern definitions.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103787"></a>( Pattern2</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103788"></a>  2 4 1</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103789"></a>  (</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103790"></a>   (A B B A)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103791"></a>  )</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103792"></a>  (</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103793"></a>   (MX MX MY MY)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103794"></a>  )&#160;&#160;&#160;&#160;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103795"></a>) </pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103796"></a></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103797"></a>( AB_BA</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103798"></a>  2 4 2</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103799"></a>  (</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103800"></a>   (A B)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103801"></a>   (B A)&#160;&#160;&#160;&#160;</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103802"></a>  )</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103803"></a>  (</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103804"></a>   (R0 MX)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103805"></a>   (R0 MX)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103806"></a>  )</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103807"></a> </pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103808"></a>)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103809"></a>( Quad1 </pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103810"></a>  2 8 2</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103811"></a>  (</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103812"></a>   (A B B A)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103813"></a>   (A B B A)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103814"></a>  )</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1103815"></a>)</pre>
<p>
<a id="pgfId-1103820"></a><a id="31939"></a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="GettingStarted.html" id="prev" title="Getting Started">Getting Started</a></em></b><b><em><a href="EditModgens.html" id="nex" title="Editing Modgens">Editing Modgens</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>