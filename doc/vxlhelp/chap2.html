
<html><head><title>Technology File Requirements for Layout XL</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="rishu" />
<meta name="CreateDate" content="2020-09-21" />
<meta name="CreateTime" content="1600741505" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the functionality of the Virtuoso Layout Suite XL connectivity-driven features in the current release." />
<meta name="DocTitle" content="Virtuoso Layout Suite XL: Connectivity Driven Editing User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Technology File Requirements for Layout XL" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="vxlhelp" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-09-21" />
<meta name="ModifiedTime" content="1600741505" />
<meta name="NextFile" content="chap3.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="preface.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Layout Suite XL: Connectivity Driven Editing User Guide -- Technology File Requirements for Layout XL" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="vxlhelpICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="vxlhelpTOC.html">Contents</a></li><li><a class="prev" href="preface.html" title="Preface">Preface</a></li><li style="float: right;"><a class="viewPrint" href="vxlhelp.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="chap3.html" title="Preparing Your Connectivity Source">Preparing Your Connectivity So ...</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Layout Suite XL: Connectivity Driven Editing User Guide<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>1
<a id="pgfId-1014158"></a></h1>
<h1>
<a id="pgfId-1034387"></a><hr />
<a id="12563"></a>Technology File Requirements for Layout XL<hr />
</h1>

<p>
<a id="pgfId-1034427"></a><a id="10872"></a>The Virtuoso&#174; Layout Suite XL layout editor (Layout XL) and other Cadence&#174; layout applications require technology-specific information about your design to be stored in a technology file for the design library.</p>
<p>
<a id="pgfId-1034428"></a>This section describes the Virtuoso technology data requirements for using Layout XL.</p>
<ul><li>
<a id="pgfId-1034432"></a><a href="chap2.html#30341">Layout Editor Rules</a></li><li>
<a id="pgfId-1034436"></a><a href="chap2.html#86959">Layer Definitions</a></li><li>
<a id="pgfId-1034440"></a><a href="chap2.html#12088">Layer Rules</a></li><li>
<a id="pgfId-1034444"></a><a href="chap2.html#42004">Constraint Groups</a></li><li>
<a id="pgfId-1034448"></a><a href="chap2.html#36064">Devices</a></li><li>
<a id="pgfId-1040120"></a><a href="chap2.html#16055">Physical Rules</a></li><li>
<a id="pgfId-1034418"></a><a href="chap2.html#20396">Connectivity Rules</a></li></ul>







<h4>
<a id="pgfId-1034420"></a>Further Reading<a id="14353"></a></h4>

<ul><li>
<a id="pgfId-1018416"></a>For information about creating and editing technology files, see<ul><li>
<a id="pgfId-1018964"></a> <em><a actuate="user" class="URL" href="../techfileuser/techfileuserTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Technology Data User Guide</a></em> </li><li>
<a id="pgfId-1018967"></a><em><a actuate="user" class="URL" href="../ascitechfile/ascitechfileTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Technology Data ASCII Files Reference</a></em> </li><li>
<a id="pgfId-1047056"></a><em><a actuate="user" class="URL" href="../ascitechconstr/ascitechconstrTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Technology Data Constraint Reference</a></em></li></ul></li><li>
<a id="pgfId-1017854"></a>For information about using Cadence SKILL functions to query or update the technology file, see<ul><li>
<a id="pgfId-1018972"></a><em><a actuate="user" class="URL" href="../sktechfile/sktechfileTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Technology Data SKILL Reference</a></em> </li><li>
<a id="pgfId-1018973"></a><em><a actuate="user" class="URL" href="../sklayoutref/lx.html#firstpage" show="replace" xml:link="simple">Virtuoso Layout Suite SKILL Reference</a></em> </li></ul></li></ul>







<h2>
<a id="pgfId-1019117"></a><a id="30341"></a>Layout Editor Rules</h2>

<p>
<a id="pgfId-1019118"></a>The <code>leRules</code> section of the technology file specifies the layers that are listed in the Layer Selection Window (LSW) assistant and the order in which they are listed. For more information, see <em><a actuate="user" class="URL" href="../ascitechfile/ascitechfileTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Technology Data ASCII Files Reference</a></em>.</p>

<h2>
<a id="pgfId-1017954"></a><a id="13034"></a><a id="86959"></a>Layer Definitions</h2>

<p>
<a id="pgfId-1017434"></a>The <code>layerDefinitions</code> section of the technology file defines the layers used in the current technology. All the layers used in your design must be defined in this section. For more information, see &#8220;Technology File Layer Definitions&#8221; in the <em><a actuate="user" class="URL" href="../ascitechfile/ascitechfileTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Technology Data ASCII Files Reference</a></em>.</p>

<h2>
<a id="pgfId-1017260"></a>Layer Rules<a id="12088"></a><a id="layerRules"></a></h2>

<p>
<a id="pgfId-1034470"></a>The <code>layerRules</code> section carries the <code>functions</code> table, which specifies the layers used in the current technology and rules such as the function of each layer, and its <code>maskNumber</code>. Here is an example:</p>
<p>
<a id="pgfId-1034471"></a>Layout XL requires the </p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1044117"></a>functions(<br /> ;( layer          function         [maskNumber] )<br /> ;( -----          --------          ----------  )<br />  ( NWELL          &quot;nwell&quot;           1           )<br />  ( PWELL          &quot;pwell&quot;           2           )<br />  ( DIFF           &quot;diff&quot;            3           )<br />  ( NIMP           &quot;nplus&quot;           6           )<br />  ( PIMP           &quot;pplus&quot;           7           )<br />  ( DIFF2          &quot;pdiff&quot;           8           )<br />  ( DIFF           &quot;diff&quot;            9           )<br />  ( POLY           &quot;poly&quot;            10          )<br />  ( LI             &quot;li&quot;              11          )<br />  ( CONT           &quot;cut&quot;             12          )<br />  ( METAL1         &quot;metal&quot;           13          )<br />  ( VIA1           &quot;cut&quot;             14          )<br />  ( METAL2         &quot;metal&quot;           15          )<br />);functions<br /> </pre>

<h2>
<a id="pgfId-1040547"></a><a id="42004"></a>Constraint <a id="techConstraintGroups"></a>Groups</h2>

<p>
<a id="pgfId-1034924"></a>A constraint group lets you specify the different sets of design constraints to be applied under different design circumstances or for different design objects. This allows the flexibility to experiment with more or less stringent process rules at different stages of the design process.</p>
<p>
<a id="pgfId-1034508"></a>You can group together any set of constraints into a constraint group, which can then be applied to any design associated with the technology library. For more information, see Technology File Constraint Groups and Constraints in the <h-hot><a actuate="user" class="URL" href="../ascitechconstr/ascitechconstrTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Technology Data Constraint Reference</a></h-hot>.</p>

<h3>
<a id="pgfId-1040226"></a><a id="96318"></a>Specifying the Information Require<a id="extractorinfo"></a>d by the Layout XL Connectivity Extractor</h3>

<p>
<a id="pgfId-1040702"></a>If you are using the Layout XL Connectivity Extractor, you must define a <code>virtuosoDefaultExtractorSetup</code> constraint group. For example,</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1047130"></a>constraintGroups(<br /> ; ( group                             [override] )<br /> ; ( -----                              --------  )<br />   ( &quot;virtuosoDefaultExtractorSetup&quot;    nil<br />   ;  layer constraints<br />      interconnect(<br />      ( validLayers    ( Nwell Oxide Nimp Pimp Poly Cont Metal1 Via1 Metall2<br />      Via2 Metal3 )   )<br />      );interconnect<br />     );virtuosoDefaultExtractorSetup<br />);constraintGroups</pre>
<p>
<a id="pgfId-1040788"></a>Layout XL issues message LX-2063 if the constraint group is not defined appropriately. For information on setting the constraint group, see <a href="chap2.html#20396">Connectivity Rules</a>.</p>

<h3>
<a id="pgfId-1049239"></a>Specifying the Information Required for the Virtuoso Photonics Solution (ICADVM20.1 Photonics Only)<a id="48773"></a></h3>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1049272"></a>You need the <code>Virtuoso_Photonics_Option</code> license to use the functionality discussed in this section. For information about obtaining the required license, contact your local Cadence representative.</div>
<p>
<a id="pgfId-1049291"></a>If you are using the Virtuoso Photonics Solution and have the <code>Virtuoso_Photonics_Option</code> license checked out, you can update the technology file to define an additional constraint group:</p>
<ul><li>
<a id="pgfId-1049308"></a><code>virtuosoDefaultOpticalPinSetup</code><br />
<a id="pgfId-1049381"></a>If specified, the <code>virtuosoDefaultOpticalPinSetup</code> constraint group defines the optical layers to use for generating and updating optical pins.<br />
<a id="pgfId-1049552"></a>The <a href="../vxlhelp/appA.html#opticalPinSetup">opticalPinSetup</a> environment variable controls the name of the constraint group to use for determining the optical layers available for pin generation.</li></ul>


<b>Note:</b><br />
<a id="pgfId-1049339"></a>
<ul><li>
<a id="pgfId-1049686"></a>You can also define the <code>virtuosoDefaultElectricalPinSetup</code> constraint group to specify the electrical layers to use for generating and updating electrical pins. To control the name of the constraint group to use for determining the electrical layers available for pin generation, use the <a href="../vxlhelp/appA.html#electricalPinSetup">electricalPinSetup</a> environment variable. </li><li>
<a id="pgfId-1049226"></a>If the <code>virtuosoDefaultOpticalPinSetup</code> or the <code>virtuosoDefaultElectricalPinSetup</code> constraint group is not defined, the <code>validLayers</code> defined in the default Layout XL constraint group, <code>virtuosoDefaultSetup</code>, are used for pin generation.</li></ul>


<h2>
<a id="pgfId-1040808"></a>Devices<a id="36064"></a><a id="symbolicDevices"></a></h2>

<p>
<a id="pgfId-1021548"></a>The two main types of technology devices used in Layout XL are vias and multipart paths.</p>

<h3>
<a id="pgfId-1035099"></a>Specifying <a id="techVias"></a>Vias</h3>

<p>
<a id="pgfId-1035125"></a>Vias are required by the <em>Create &#8211; Via</em> and <em>Create &#8211; Wire</em> commands and by the <em>Routing &#8211; Start Router</em> command. Vias are defined by using <code>standardViaDefs</code>, which are equivalent to the <code>symContactDevices</code> used in previous releases; and <code>customViaDefs</code>, which reference a via cellview.</p>
<p>
<a id="pgfId-1035007"></a>All the vias used in your design must be defined in the <code>viaDefs</code> section of the technology file and listed in the <code>validVias</code> constraint in the <code>virtuosoDefaultExtractorSetup</code> constraint group. Any via cellviews referenced by <code>customViaDefs</code> must also exist.</p>

<div class="webflare-information-macro webflare-macro-tip">
<a id="pgfId-1021080"></a>
For information about how via definitions are used to derive the connectivity rules for Layout XL, see <a href="chap2.html#20396">Connectivity Rules</a>.</div>
<h3>
<a id="pgfId-1018769"></a>Specifying Multipart Paths</h3>

<p>
<a id="pgfId-1039644"></a>Multipart path templates are defined in the <code>multipartPathTemplates</code> section in the technology file. For more information, see &#8220;Technology File Devices&#8221; in the <em><a actuate="user" class="URL" href="../ascitechfile/ascitechfileTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Technology Data ASCII Files Reference</a></em>.</p>

<h2>
<a id="pgfId-1040099"></a>Physical Rules<a id="16055"></a><a id="physicalRules"></a></h2>

<p>
<a id="pgfId-1040100"></a>Physical rules are specified in the <code>foundry</code> constraint group.</p>
<p>
<a id="pgfId-1040101"></a>The minimum requirement for Layout XL is the <code>minWidth</code> constraint which is used by the <em>Create &#8211; Shape &#8211; Path</em> and <em>Create &#8211; Wire</em> commands to determine the minimum width of objects and the default width of a wire. For example, </p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1040113"></a>constraintGroups(<br /> ; ( group                             [override] )<br /> ; ( -----                              --------  )<br />   ( &quot;foundry&#8221;<br />   ;  physical constraints<br />      spacings(<br />      ;( constraint     layer1     layer2     value )<br />      ;( ----------     ------     ------     ----- )<br />       ( minWidth       METAL1                0.02<br />      );spacings<br />     );foundry<br />);constraintGroups<br /></pre>

<h2>
<a id="pgfId-1040115"></a><a id="20396"></a>Con<a id="connRules"></a>nectivity Rules</h2>

<p>
<a id="pgfId-1043033"></a>The connectivity stack is a representation of the extractable layers and the associated electrical connections used by the Layout XL connectivity extractor. The connectivity stack is derived from the following sections of the technology file.</p>

<p>
<a id="pgfId-1043067"></a></p>
<table class="webflareTable" id="#id1043034">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1043036">
<a id="pgfId-1043036"></a>Technology section</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1043038">
<a id="pgfId-1043038"></a>For information, see...</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1043040"></a><code>functions</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1043045"></a><a href="chap2.html#12088">Layer Rules</a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1043047"></a><code>validLayers</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1043052"></a><a href="chap2.html#18630"><h-hot>validLayers</h-hot><code></code></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1047277"></a><code>validPurposes</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1047279"></a><h-hot><a actuate="user" class="URL" href="../vxlhelp/chap2.html#validLPP" show="replace" xml:link="simple">validPurposes</a></h-hot></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1047421"></a><code>excludeLPPs</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1047283"></a><h-hot><a actuate="user" class="URL" href="../ascitechconstr/constr_routing.html#excludeLPPs" show="replace" xml:link="simple">excludeLPPs</a></h-hot></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1043054"></a><code>viaDefs</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1043059"></a><a href="chap2.html#99417"><h-hot>viaDefs</h-hot><code></code></a></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1043061"></a><code>equivalentLayers</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1043066"></a><a href="chap2.html#93809"><h-hot>equivalentLayers</h-hot><code></code></a></p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1041004"></a>To view information about the connectivity stack of a design, see the <h-hot><a actuate="user" class="URL" href="../vxlhelp/appD.html#diagnoseReport" show="replace" xml:link="simple">Diagnostics Report</a></h-hot>, which is available through the <a href="appD.html#62890">Connectivity Tab</a> of the <a href="appD.html#38633">Connectivity</a> form.</p>
<p>
<a id="pgfId-1041062"></a>The default constraint group that is read by the extractor for information about the extractable layers and connections defined using the connectivity stack is <code>virtuosoDefaultExtractorSetup</code>.</p>

<div class="webflare-information-macro webflare-macro-tip">
<a id="pgfId-1041039"></a>
If required, you can change the default constraint group by setting the environment variable, &#8220;<code>layout</code>&#8221; &#8220;<code>setupConstraintGroup</code>&#8221;.</div>
<h3>
<a id="pgfId-1042757"></a><code>functions</code><a id="functions"></a></h3>

<p>
<a id="pgfId-1042792"></a>The functions table specifies the layer functions and assigns mask numbers to the layers. The functions table is defined in the <code>layerRules</code> section of the technology file.</p>
<p>
<a id="pgfId-1044315"></a>See <a href="chap2.html#12088">Layer Rules</a>.</p>

<h3>
<a id="pgfId-1044318"></a><a id="18630"></a>vali<a id="validLayers"></a>dLayers</h3>

<p>
<a id="pgfId-1041123"></a>The <code>validLayers</code> constraint specifies the layers that you want to extract the connectivity through. The layers can be <em>physical</em>, such as metal, poly, and so on, or <em>derived</em>, such as those used to define stop layers and bulk layers. </p>
<p>
<a id="pgfId-1041163"></a>Each physical layer must be defined in the <code>layerRules</code> section of the technology file, whereas each derived layer must be defined in the <code>techDerivedLayers</code> section.</p>
<p>
<a id="pgfId-1041127"></a>Let us consider an example of a <code>validLayers</code> constraint definition that indicates that all the purposes of layers <code>M1, V1</code>,<code> M2</code>,<code> V2</code>, and <code>M3</code> are extractable.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1041192"></a>(validLayers (M1 <code>V1 M2 V2</code> <code>M3))</code></pre>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1041267"></a>
Cadence recommends that you always provide an exhaustive list of extractable layers&#8212;metal, poly, diffusion, implant, well, and cut layers&#8212;in the <code>validLayers</code> constraint. If there are no extractable layers defined in the constraint group, Layout XL is launched with the connectivity extractor disabled.</div>
<h4>
<a id="pgfId-1041396"></a><a id="41810"></a>Specifying Lay<a id="lppforvalidLayers"></a>er-Purpose Pairs in the <code>validLayers</code> Constraint</h4>

<p>
<a id="pgfId-1041397"></a>By default, all purposes of a layer specified in the <code>validLayers</code> constraint are extractable. However, a constraint group can have multiple purposes defined for a layer, forming multiple layer- purpose pairs. You can directly add layer-purpose pairs in the <code>validLayers</code> constraint.</p>
<p>
<a id="pgfId-1041439"></a>For example, the constraint definition <code>validLayers((METAL1 drawing) METAL2)</code> indicates that the only extractable purpose of <code>METAL1</code> is &#8220;<code>drawing</code>&#8221; whereas for <code>METAL2</code>, all the purposes are extractable.</p>
<p>
<a id="pgfId-1046187"></a>If the <code>validLayers</code> constraint definition has both (<code>METAL1 drawing</code>) and <code>METAL1</code> specified, the specification limiting <code>METAL1</code> to <code>drawing</code> purpose is ignored and all the purposes of <code>METAL1</code> are considered extractable.</p>
<p>
<a id="pgfId-1046336"></a>Depending on your requirements, you can set the <code>validLayers</code> constraint on a net or on a design. If you add the constraint in the schematic constraint editor, you can define different <code>validLayers</code> for a specified net.</p>
<p>
<a id="pgfId-1046490"></a>If you set the constraint at the design level, you can restrict the pin layers further than the extract layer level set for Layout XL. This can restrict the pin layers available for creating pins but will continue to extract the design up to the specified extraction level. </p>

<h4>
<a id="pgfId-1046191"></a><a id="13166"></a>Specifying Stop Layer<a id="addingStopLayers"></a>s in the <code>validLayers</code> Constraint</h4>

<p>
<a id="pgfId-1044882"></a>You can also use the <code>validLayers</code> constraint to specify the layers that stop another layer, such as when a transistor is implemented as a single piece of diffusion cut into two parts by a poly shape. The two parts in this case, form the drain and the source of a MOS device and the poly shape forms the transistor gate.</p>
<p>
<a id="pgfId-1041591"></a>A stop layer is defined using a derived layer with a <code>NOT</code> operation between two layers.</p>
<p>
<a id="pgfId-1041604"></a>For accurate connectivity extraction, if the <code>validLayers</code> constraint contains a poly and a diffusion layer, Cadence recommends that you check that the poly is intended to stop the diffusion and the derived layers are appropriately defined in the <code>validLayers</code> constraint. If the constraint is not appropriately defined in the technology file, a warning message is issued and the extractor may report false shorts.</p>
<p>
<a id="pgfId-1041533"></a>Consider the following derived layer definitions in the <code>validLayers</code> constraint:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1041538"></a><code>(StoppedLayer 10001 (Oxide &#39;not Poly))</code></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1041539"></a><code>(validLayers (StoppedLayer))</code></pre>
<p>
<a id="pgfId-1041540"></a>The constraint definition indicates that the:</p>
<ul><li>
<a id="pgfId-1041541"></a><code>Poly</code> and <code>Oxide</code> are extractable layers.</li><li>
<a id="pgfId-1041542"></a><code>Oxide</code> is being stopped by <code>Poly</code>.</li></ul>

<p>
<a id="pgfId-1041543"></a>Consider another example where a layer-purpose pair &#8220;stops&#8221; another purpose pair on the same layer:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1041544"></a><code>(D1 10001 (Metal &#39;select slot))</code></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1041545"></a><code>(StoppedLayer 10002 (Metal &#39;not D1))</code></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1041547"></a><code>(validLayers (StoppedLayer))</code></pre>
<p>
<a id="pgfId-1041548"></a>The constraint definition indicates that the:</p>
<ul><li>
<a id="pgfId-1041549"></a>All purposes of <code>Metal1</code> are extractable.</li><li>
<a id="pgfId-1041550"></a><code>(Metal1 slot)</code> &#8220;stops&#8221; all other purposes of<code> Metal1</code></li></ul>

<p>
<a id="pgfId-1050911"></a>In addition to enabling poly or metal shapes be stopped by shapes on another valid layer, Layout XL supports that standalone cut shapes or cut shapes inside vias be stopped by another shape. For this, the cut layer and the stop layer should be defined in the <code>validLayers</code> constraint.</p>
<p>
<a id="pgfId-1051327"></a>Consider the following derived layer definitions in the <code>validLayers</code> constraint:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1051328"></a><code>(StoppedVia1 10040 ( Via1 &#39;not StopVia1 ))</code></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1051329"></a><code>(validLayers (StoppedVia1))</code></pre>
<p>
<a id="pgfId-1051330"></a>The constraint definition indicates that <code>Via1</code> is being stopped by <code>StopVia1</code>.</p>

<div class="webflare-information-macro webflare-macro-tip">
<a id="pgfId-1049162"></a>
For information on how stop layers can be set at the global level so that all the layout users are benefited by the global settings, see <a href="chap11.html#22373">Setting up the PDK to Improve Layout XL Compliance</a>. </div>
<h4><em>
<a id="pgfId-1051654"></a>Related Topics</em></h4>

<p>
<a id="pgfId-1051680"></a><a href="chap8.html#47049">Support for Cut Shape Trimming</a></p>

<h4>
<a id="pgfId-1041854"></a>Specifying Enclosed Stop Layers in the <code>validLayers</code> Constraint</h4>

<p>
<a id="pgfId-1041855"></a>You can also use the <code>validLayers</code> constraint to specify that the areas defined by a <code>NOT</code> operation should be enclosed by a third layer. To do this, you must add a constraint to the stop layer using the <code>INSIDE</code> operation.</p>
<p>
<a id="pgfId-1041857"></a>Consider the following example:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1041859"></a>(Stopped 10001 (substrate &#39;not Nwell))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1041894"></a>(StoppedWithInsideConstraint 10002 (Stopped &#39;inside Nburied)) </pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1041860"></a>(validLayers (StoppedWithInsideConstraint))</pre>
<p>
<a id="pgfId-1041862"></a>The constraint definition indicates that the:</p>
<ul><li>
<a id="pgfId-1041864"></a><code>Substrate</code>, <code>Nwell</code>, and Nburied are extractable layers</li><li>
<a id="pgfId-1041943"></a>Substrate is being stopped by the <code>Nwell</code> layer</li><li>
<a id="pgfId-1046772"></a>Stopped regions of the substrate must be enclosed within the specified Nburied layer to be electrically insulated from the rest of the substrate</li></ul>



<h4>
<a id="pgfId-1048892"></a>S<a id="39576"></a>pecifying Color-Depe<a id="validLayerColorStop"></a>ndent Stopped and Stop Layers in the <code>validLayers</code> Constraint </h4>

<p>
<a id="pgfId-1048893"></a>To enable defining color-dependent stopped and stop layers, the technology file supports a <code>color</code> operator.</p>
<p>
<a id="pgfId-1046713"></a>Consider the following derived layer definitions:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1046714"></a>techDerivedLayers(</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1046715"></a>  ( D1                1000&#160;&#160;&#160;&#160;(M1 &#39;color mask1Color))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1046716"></a>  ( M1InterConnect    1001&#160;&#160;&#160;&#160;(D1 &#39;not CM1))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1046717"></a>)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1046718"></a>validLayers( (M1InterConnect) )</pre>
<p>
<a id="pgfId-1046719"></a>In the technology file definition of a color-dependent derived layer:</p>
<ul><li>
<a id="pgfId-1046720"></a>The first operand is a layer, such as <code>M1</code>, in the example above.</li><li>
<a id="pgfId-1046721"></a>The second operand is one of the following: <ul><li>
<a id="pgfId-1046722"></a><code>mask1Color</code></li><li>
<a id="pgfId-1046723"></a><code>mask2Color</code></li><li>
<a id="pgfId-1046724"></a><code>grayColor</code> (no color specified)</li><li>
<a id="pgfId-1046725"></a><code>anyColor</code> (color independent)</li></ul><br />
<a id="pgfId-1046726"></a>In the example above, the second operand is <code>mask1Color.</code></li><li>
<a id="pgfId-1046727"></a>The third operand is optional and it applies only to <em>locked</em> or <em>unlocked </em>shapes.</li></ul>







<p>
<a id="pgfId-1049066"></a>In the example above, adding the derived layer <code>M1InterConnect</code> in the <code>validLayers</code> constraint indicates that the <code>M1</code> shapes on <code>mask1</code> are stopped by <code>CM1</code> shapes. Because the third operand is not added, there is no restriction about the lock status of the shapes.</p>
<p>
<a id="pgfId-1049067"></a>Let us consider another derived layer definition:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1046730"></a>techDerivedLayers(</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1046731"></a>  ( D1                1000&#160;&#160;&#160;&#160;(M1 &#39;color mask2Color) &#8216;locked)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1046732"></a>  ( M1InterConnect    1001&#160;&#160;&#160;&#160;(D1 &#39;not CM1))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1046733"></a>)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1046734"></a>validLayers( (M1InterConnect) )</pre>
<p>
<a id="pgfId-1048936"></a>Here, the derived layer indicates that only <em>locked </em><code>M1</code> shapes on <code>mask2</code> are stopped by the <code>CM1</code> shapes.</p>
<p>
<a id="pgfId-1048945"></a>Now, let us consider another example:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048946"></a>D1 1000 (M1 &#39;color mask1Color) &#39;locked)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048947"></a>D2 1001 (CM1 &#39;color mask1Color) &#39;locked)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1048948"></a>D3 1002 (D1 &#39;not D2)</pre>

<p>
<a id="pgfId-1048937"></a>Here, the derived layer indicates that locked <code>M1</code> shapes on <code>mask1</code> are stopped by the locked <code>CM1</code> shapes on <code>mask1</code>.</p>

<h4>
<a id="pgfId-1048939"></a><a id="66907"></a>Specifying Bulk Area Layers in the <code>validLayers</code> Constraint</h4>

<p>
<a id="pgfId-1042025"></a>You can use the <code>validLayers</code> constraint to define the area of a shapeless bulk terminal. The area of a shapeless bulk terminal is determined using an <code>AND</code> operation between the shapes on one layer with the shapes on another layer.</p>
<p>
<a id="pgfId-1042027"></a>Consider the following <code>validLayers</code> constraint definition:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1042030"></a>(BulkLayer 10001 (Oxyde &#39;and Poly))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1042031"></a>(validLayers (BulkLayer))</pre>
<p>
<a id="pgfId-1042033"></a>The constraint definition indicates that:</p>
<ul><li>
<a id="pgfId-1042035"></a>All purposes of <code>Poly</code> and <code>Oxide</code> are extractable</li><li>
<a id="pgfId-1042238"></a>Intersections of <code>Poly</code> and <code>Oxide</code> define the area of the shapeless bulk terminals.</li></ul>


<h4>
<a id="pgfId-1042239"></a>Specifying Substrate Layer in the <code>validLayers</code> Constraint</h4>

<p>
<a id="pgfId-1042240"></a>You can use the <code>validLayers</code> constraint to define the substrate as extractable when the <em>Verify connections to substrate and set well layers as soft</em> option in the Connectivity form &#8211; Connectivity &#8211; Verify tab is enabled.</p>
<p>
<a id="pgfId-1042045"></a>Consider the following derived layer definitions in the <code>validLayers</code> constraint:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1042048"></a>(StoppedSubstrate 10000 (substrate &#39;not Nwell))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1042049"></a>(validLayers (StoppedSubstrate))</pre>
<p>
<a id="pgfId-1042051"></a>The constraint definition indicates that the:</p>
<ul><li>
<a id="pgfId-1042053"></a><code>Nwell</code> and <code>substrate</code> are extractable layers</li><li>
<a id="pgfId-1042211"></a><code>substrate</code> is being stopped by <code>Nwell</code></li><li>
<a id="pgfId-1042252"></a>The polarity of the <code>substrate</code> is p-type since it is stopped by an n-type well layer</li></ul>


<p>
<a id="pgfId-1042270"></a>When the <em>Verify connections to substrate and set well layers as soft</em> option is enabled:</p>
<ul><li>
<a id="pgfId-1042061"></a><code>substrate</code> should be stopped by a well layer. If that is not the case, a warning message is issued and substrate connectivity extraction is disabled.</li><li>
<a id="pgfId-1042298"></a><code>substrate</code> should be stopped by a single well layer. If the substrate is stopped by several well layers of different polarities, a warning message is issued and substrate connectivity extraction is disabled.</li><li>
<a id="pgfId-1042328"></a>To derive the polarity of the substrate, the extractor uses the <code>validLayers</code> constraint definition, which indicates that the substrate should be considered p-type if the stopping well layer is n-type and vice versa. If the substrate is not defined as stopped by a well layer, the extractor considers the standard via definitions in <code>standardViaDefs</code> where the <code>well</code> or <code>substrate</code> is set as <code>substrate.</code> For more information, see <a href="chap2.html#60875">Substrate Layer Connectivity</a>.</li></ul>



<h4><em>
<a id="pgfId-1044439"></a><a id="49962"></a>Compos<a id="composingDerivedLayers"></a>ing Layers</em></h4>

<p>
<a id="pgfId-1044440"></a>A derived layer is composed as the result of a binary operation between two other layers that may be derived or physical. The layers used as operands for the binary operation must be of a lower layer number compared to the layer to be composed. The SELECT operation is the only operation supported by the extractor where the second operand is a &#8220;purpose&#8221; instead of a &#8220;layer&#8221;. If a derived layer with an unsupported operation is processed by the extractor, a warning message is issued.</p>
<p>
<a id="pgfId-1042476"></a>Consider the following definition in the <code>techDerivedLayers</code> section of a technology file.</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1042477"></a><code>(D1 10001 (M1 &#39;select drawing))</code></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1042478"></a><code>(D2 10002 (M2 &#39;select pin))</code></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1042479"></a><code>(D3 10003 (M2 &#39;select drawing))</code></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1042480"></a><code>(D4 10004 (D2 &#39;or D3))</code></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1042481"></a><code>(D5 10005 (D4 &#39;or D1))</code></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1042482"></a><code>(validLayers (D5))</code></pre>
<p>
<a id="pgfId-1042483"></a>Here:</p>
<ul><li>
<a id="pgfId-1042484"></a><code>D5</code> represents the list of physical layers: <code>(M1 drawing)</code>, <code>(M2 pin)</code>, and <code>(M2 drawing)</code>. These physical layers are extractable because <code>D5</code> is defined in the <code>validLayers</code> constraint.</li><li>
<a id="pgfId-1042486"></a><code>D4</code>, <code>D3</code>, <code>D2</code>, <code>and</code> <code>D1</code> are &#8220;intermediate derived layers&#8221;<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1042487"></a>An intermediate derived layer only supports the OR or SELECT operations. If an intermediate derived layer with an <code>AND</code> or <code>NOT</code> operation is processed by the extractor, a warning message is issued.</div></li></ul>



<h4>
<a id="pgfId-1048449"></a>Specifying Laye<a id="validLPP"></a>r Purpose Pairs using the <code>validPurposes</code> constraint</h4>

<p>
<a id="pgfId-1048450"></a>If you are using the Layout XL Connectivity Extractor, you can define the valid layer purpose pairs using the <a href="../ascitechconstr/constr_routing.html#validPurposes">validPurposes</a> constraint that the connectivity extractor should consider. For example:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1048451"></a>constraintGroups(<br /> ; ( group                             [override] )<br /> ; ( -----                              --------  )<br />   ( &quot;virtuosoDefaultExtractorSetup&quot;    nil<br />   ;  layer constraints<br />      interconnect(<br />      ( validLayers(&quot;Metal12&quot; &quot;Poly&quot;)<br />      ( validPurposes &#39;include (&quot;drawing&quot; &quot;pin&quot; &quot;net&quot;) )<br />      );interconnect<br />     );virtuosoDefaultExtractorSetup<br />);constraintGroups</pre>
<p>
<a id="pgfId-1048452"></a>Here, only the following layer-purpose pairs (LPP) are considered extractable:</p>
<ul><li>
<a id="pgfId-1048453"></a><code>Metal12 drawing </code></li><li>
<a id="pgfId-1048454"></a><code>Metal12 pin</code></li><li>
<a id="pgfId-1048455"></a><code>Metal12 net</code></li><li>
<a id="pgfId-1048456"></a><code>Poly drawing</code></li><li>
<a id="pgfId-1048457"></a><code>Poly pin</code></li><li>
<a id="pgfId-1048458"></a><code>Poly net</code></li></ul>





<p>
<a id="pgfId-1048459"></a>You can also use the <code>&#8216;exclude</code> option to exclude an LPP from the valid layer purpose list, as illustrated in the example below:</p>
<p>
<a id="pgfId-1048460"></a>constraintGroups(<br /> ; ( group                             [override] )<br /> ; ( -----                              --------  )<br />   ( &quot;virtuosoDefaultExtractorSetup&quot;    nil<br />   ;  layer constraints<br />      interconnect(<br />      ( validLayers(&quot;Metal12&quot; &quot;Poly&quot;)<br />      ( validPurposes &#39;exclude (&quot;blockage&quot; &quot;boundary&quot;) )<br />      );interconnect<br />     );virtuosoDefaultExtractorSetup<br />);constraintGroups</p>
<p>
<a id="pgfId-1048566"></a>For layers &quot;<code>Metal12</code>&quot; and &quot;<code>Poly</code>&quot;, all purposes other than &quot;blockage&quot; and &quot;boundary&quot; are extractable<code>.</code></p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1048568"></a>Instead of using the <code>&#8216;exclude</code> option, you can also use the <a href="../ascitechconstr/constr_routing.html#excludeLPPs">excludeLPPs</a> constraint to specify the layer purpose pairs to be ignored for extraction.</div>

<h3>
<a id="pgfId-1048571"></a><a id="99417"></a>viaDefs<a id="lceViaDefs"></a></h3>

<p>
<a id="pgfId-1042576"></a>Vias&#8212;both standard and custom&#8212;are defined using the <code>ViaDefs</code> section of the technology file.</p>
<p>
<a id="pgfId-1042579"></a>The connectivity extractor derives the following information from via definitions.</p>
<ul><li>
<a id="pgfId-1042583"></a><a href="chap2.html#62345">Via Layer Connectivity</a></li><li>
<a id="pgfId-1042587"></a><a href="chap2.html#60875">Substrate Layer Connectivity</a></li><li>
<a id="pgfId-1042591"></a><a href="chap2.html#10668">Implant Layer Connectivity</a></li></ul>



<h4>
<a id="pgfId-1042593"></a><a id="62345"></a>Via Layer Connectivity</h4>

<p>
<a id="pgfId-1042594"></a>Via layer connectivity is defined in terms of:</p>
<ul><li>
<a id="pgfId-1042598"></a><a href="chap2.html#54706">Cut Layer Connectivity</a></li><li>
<a id="pgfId-1048642"></a><a href="chap2.html#80321">Local Interconnect Connectivity</a></li></ul>


<h4>
<a id="pgfId-1048643"></a>Related</h4>

<p>
<a id="pgfId-1048650"></a><a href="../vlehelp/appB.html#extractConsiderAllCutLayersInVias">extractConsiderAllCutLayersInVias</a></p>

<h4><em>
<a id="pgfId-1048645"></a><a id="54706"></a>Cut Layer Connectivity</em></h4>

<p>
<a id="pgfId-1042605"></a>Cut layers always connect to the <em>associated pair of layers</em>. For example, for the following via definition:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1042606"></a>(M2_M1 M2 M1 (&quot;V1&quot; 0.1 0.1) (1 1 (0.1 0.1))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1042607"></a>(0.04 0.0) (0.02 0.02) (0.0 0.0) (0.0 0.0) (0.0 0.0))</pre>
<p>
<a id="pgfId-1042608"></a>Layout XL derives the following connectivity stack:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1042609"></a> M2 -&gt; V1 -&gt; M1</pre>

<h4><em>
<a id="pgfId-1042611"></a><a id="80321"></a>Local Interconnect Connectivity</em></h4>

<p>
<a id="pgfId-1042612"></a>Local interconnect layers, which are contact-less metal layers, connect directly to the <em>associated layer</em>. For example, for the following via definition:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1042613"></a>(LI_POLY LI POLY (&quot;LI&quot; 0.1 0.1) (1 1 (0.1 0.1))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1042614"></a>(0.04 0.0) (0.02 0.02) (0.0 0.0) (0.0 0.0) (0.0 0.0))</pre>
<p>
<a id="pgfId-1042615"></a>Layout XL derives the following connectivity stack:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1042616"></a> LI -&gt; POLY</pre>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1042617"></a>In this example, the via definition, <code>LI_POLY</code> is included in the technology file to properly define the connectivity stack.</div>

<h4>
<a id="pgfId-1044678"></a><a id="60875"></a>Substrate Layer Connectivity</h4>

<p>
<a id="pgfId-1044943"></a>A substrate via can be defined using the <code>well/substrate</code> construct in the <code>standardViaDefinition</code>, such as in the example below:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1044669"></a>standardViaDefs(</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1043243"></a>;(viaDefName layer1 layer2 (cutLayer cutWidth cutHeight</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1043244"></a>;[resistancePerCut])</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1043245"></a>;(cutRows cutCol (cutSpace))</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1043246"></a>;(layer1Enc) (layer2Enc);(layer1Offset) (layer2Offset) (origOffset)</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1043247"></a>;[implant1 (implant1Enc) [implant2 (implant2Enc)]])</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1043248"></a>;[<strong>well/substrate</strong>]]])</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1043249"></a>);standardViaDefs</pre>
<p>
<a id="pgfId-1044726"></a>The <code>well/substrate</code> construct can be defined using the keyword <code>substrate</code> or a physical well layer name to allow the connectivity extractor to connect to these using the diffusion defined in the <code>viaDef</code>. When the function of the diffusion is defined as <code>diff</code> instead of <code>ndiff</code> or <code>pdiff</code>, the connection is made through the <code>implant</code> defined in the <code>viaDef</code>.</p>

<h4>
<a id="pgfId-1043231"></a><a id="10668"></a>Implant Layer Connectivity</h4>

<p>
<a id="pgfId-1042628"></a>Implant layers are currently derived only from <code>standardViaDefs</code>; for example,</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1042629"></a>standardViaDefs(<br /> (M1_NWELL Oxide Metal1 (&quot;Cont&quot; 0.12 0.12)<br /> (1 1 (0.16 0.16))<br /> (0.07 0.07) (0.06 0.06) (0.0 0.0) (0.0 0.0) (0.0 0.0)<br /> <strong>Nimp</strong> (0.15 0.15) <strong>Nwell</strong> (0.24 0.24)S)<br />);standardViaDefs</pre>
<p>
<a id="pgfId-1042630"></a>The implant layers are <code>Nimp</code> and <code>Nwell</code>. Often the second implant is used to target a well layer, not as a real implant definition. You can also use a <code>well/substrate</code> construct in such situations to avoid using the second implant. For more information on defining a <code>well/substrate</code> construct, see <a href="chap2.html#60875">Substrate Layer Connectivity</a>.</p>
<p>
<a id="pgfId-1042631"></a>In the example shown above,</p>
<ul><li>
<a id="pgfId-1042632"></a>The implant <code>Nimp</code> gives the <code>Oxide</code> diffusion layer its type (n). Layout XL derives the following layer interconnection stack.<br /><span class="indent-as-level2"><pre class="webflare-pre-block webflare-courier-new" id="#id1042633">
<a id="pgfId-1042633"></a>Metal1 -&gt; Cont -&gt; ( Oxide &amp; Nimp ) -&gt; Nwell (or N-substrate)</pre></span>
<a id="pgfId-1042634"></a>The <code>&amp;</code> relationship shown above means that <code>Oxide</code> connects to the well only if there is some implant around that particular diffusion layer. A via of this type allows Layout XL to propagate the correct connectivity to the substrate of a MOS device from a top-level power or ground <code>Metal1</code>.</li><li>
<a id="pgfId-1042635"></a>Similarly, a via definition with an implant of p-type material might lead to the following layer interconnection stack.<br /><span class="indent-as-level2"><pre class="webflare-pre-block webflare-courier-new" id="#id1042636">
<a id="pgfId-1042636"></a>Metal1 -&gt; Cont -&gt; ( Oxide &amp; Pimp ) -&gt; Pwell (or P-substrate)</pre></span>
<a id="pgfId-1042637"></a>Here the oxide shape is implanted with a p-type implant shape to connect to a p-type well shape.</li></ul>









<p>
<a id="pgfId-1042638"></a>In both the cases, a cut shape will connect to an oxide shape only if there is an implant shape of n-type or a p-type available.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1042640"></a>Some manufacturing processes define diffusion layers that are implicitly implanted by an n-type or p-type material. This is the case when the layer function of the diffusion layer is set to <code>ndiff</code> or <code>pdiff</code> in the <code>functions</code> table in the technology file. In this case, no implant shapes are required. The foundry uses the diffusion layer to create the masks both for diffusion and for n- or p-type implants. The layer interconnection stack is typically defined as:</div>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1043529"></a>Metal1 -&gt; Cont -&gt; Ndiff -&gt; Nwell or N-substrate</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1043531"></a>Metal1 -&gt; Cont -&gt; Pdiff -&gt; Pwell or P-substrate</pre>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1043534"></a>Some manufacturing processes define only one diffusion layer and one implant layer, for example a, n-type diffusion and a p-type implant. In that case, the implant layer has precedence over the implicitly implanted diffusion:</div>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1043536"></a>Metal1 -&gt; Cont -&gt; Ndiff -&gt; Nwell or N-substrate</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1043538"></a>Metal1 -&gt; Cont -&gt; ( Ndiff &amp; Pimp ) -&gt; Pwell or P-substrate</pre>

<h3>
<a id="pgfId-1042642"></a><a id="93809"></a>equivalentLayers</h3>

<p>
<a id="pgfId-1043675"></a>The <code>equivalentLayers</code> rule is used by the connectivity extractor mainly for legacy purpose. It allows two layers to be declared as strictly identical in terms of connectivity. For example, two layers that correspond to two different voltages of a metal can be declared as equivalent using the definition:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1043677"></a>equivalentLayers( ((M1a drawing) (M1b drawing) M1c) )</pre>
<p>
<a id="pgfId-1043679"></a>This indicates that <code>(M1a drawing)</code>, (<code>M1b drawing)</code>, and all the purposes of <code>M1c</code> are in fact the same metal.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1043681"></a>The <code>equivalentLayers</code> rule does not support derived layers. If a derived layer is included in the rule definition, a warning message is issued.</div>

<h3>
<a id="pgfId-1044174"></a>validVias</h3>

<p>
<a id="pgfId-1044188"></a>Cadence recommends not to define a <code>validVias</code> constraint in the <code>virtuosoDefaultExtractorConstraintGroup</code> constraint group as it restricts the via definitions, which are parsed by the extractor to build the connectivity stack. However, in some technologies, such as those containing legacy via definitions, defining the <code>validVias</code> constraint can be useful.</p>

<h3>
<a id="pgfId-1037641"></a>Parallel Connec<a id="parallelConnecivityStacks"></a>tivity Stacks</h3>

<p>
<a id="pgfId-1037642"></a>A parallel connectivity stack is formed when the same cut layer connects a top layer&#8212;a layer with a higher mask number&#8212;to various bottom layers, which are layers with lower mask numbers.</p>
<p>
<a id="pgfId-1038978"></a>In the technology file, a parallel connectivity stack is defined using several <code>viaDefs</code> that have the same cut layer but different bottom layers. </p>
<p>
<a id="pgfId-1039013"></a>A parallel connectivity stack can be represented as:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1039031"></a>via2: Metal2 &lt; MCBOT &lt; MCTOP</pre>
<p>
<a id="pgfId-1039024"></a>To view information about the parallel connectivity stacks in a design, you can access the <h-hot><a actuate="user" class="URL" href="../vxlhelp/appD.html#Diagnostics" show="replace" xml:link="simple">Diagnostics Report</a></h-hot>, which is available through the <a href="appD.html#62890">Connectivity Tab</a> of the Connectivity form.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1038983"></a>A <code>viaDef</code> contains information about the following:</div>
<ul><li>
<a id="pgfId-1035876"></a>Top connecting layer</li><li>
<a id="pgfId-1035903"></a>Cut layer</li><li>
<a id="pgfId-1035910"></a>Bottom connecting layer</li></ul>


<p>
<a id="pgfId-1035917"></a>Depending on the material to which a cut layer connects, a parallel connectivity stack can be formed by:</p>
<ul><li>
<a id="pgfId-1035931"></a><strong>Metal layers</strong><ul><li>
<a id="pgfId-1035948"></a><a href="chap2.html#69157">Metal-Insulator-Metal Capacitor (MIMCAP) Stack</a></li><li>
<a id="pgfId-1035958"></a><a href="chap2.html#63340">Two-Metal Stack</a></li></ul></li><li>
<a id="pgfId-1035941"></a><strong>Poly layers</strong><ul><li>
<a id="pgfId-1035965"></a><a href="chap2.html#41842">Poly-Insulator-Poly Capacitor (PIPCAP) Stack</a></li></ul></li></ul>





<h4>
<a id="pgfId-1036191"></a><a id="69157"></a>Metal-Insulator-Metal Capacitor (MIMCAP) Stack</h4>

<p>
<a id="pgfId-1036392"></a>A Metal-Insulator-Metal Capacitor (MIMCAP) stack uses a cut layer that connects a metal layer of a higher mask number, such as M(n+1), to another metal layer of a lower mask number, such as M(n), and to two intermediate layers. </p>
<p>
<a id="pgfId-1036141"></a>The intermediate layers in such a connectivity stack are used to define capacitors and these layers are defined in the technology file with the <code>mimcap</code> function.</p>
<p>
<a id="pgfId-1036380"></a>The figure below represents a MIMCAP connectivity stack. Here, the cut layer, <code>V2</code>, connects the metal layer, <code>M3</code>, to another metal layer, <code>M2</code>, which has a lower mask number. In addition, the cut layer connects the top metal layer to intermediate metal layers, <code>MCTOP</code> and <code>MCBOT</code>.</p>

<p>
<a id="pgfId-1036240"></a></p>
<div class="webflare-div-image">
<img width="537" height="193" src="images/chap2-4.gif" /></div>

<p>
<a id="pgfId-1036322"></a>In the technology file, the connectivity stack represented above is defined with the <code>viaDefs</code>:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1036323"></a>&quot;M3_M2&quot;: &#160;&#160;&#160;&#160;  M3 -&gt; V2 - &gt; M2</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1036324"></a>&quot;M3_MCTOP&quot;: M3 - &gt; V2 - &gt; MCTOP</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1037598"></a>&quot;M3_MCBOT&quot;: M3 - &gt; V2 - &gt; MCBOT</pre>
<p>
<a id="pgfId-1037599"></a>The corresponding layer function table can be represented as:</p>

<p>
<a id="pgfId-1054046"></a></p>
<div class="webflare-div-image">
<img src="images/mimcapLayerFuncTable.GIF" /></div>

<p>
<a id="pgfId-1037603"></a>Alternatively, the cut in a MIMCAP stack may not stop at another MIMCAP layer but can go all the way down to the bottom metal layer. This means that all the layers between the top and bottom metal layers are connected by the cut shape, as shown in the figure. </p>

<p>
<a id="pgfId-1054419"></a></p>
<div class="webflare-div-image">
<img width="568" height="363" src="images/chap2-6.gif" /></div>

<p>
<a id="pgfId-1054375"></a>For the connections in such a stacked MIMCAP to be correct, all the <code>viaDefs</code> must be present in the <code>validVias</code> constraint of the extractor constraint group. For example, for the connections in the given stacked MIMCAP figure to be correct, the following <code>viaDefs</code> should be present in the <code>validVias</code> example: <code>Top/MIMCAP1</code>, <code>Top/MIMCAP2</code>, <code>Top/Bottom</code>, <code>MIMCAP1/MIMCAP2</code>, <code>MIMCAP1/Bottom</code>, <code>MMCAP2/Bottom</code>.</p>
<p>
<a id="pgfId-1054758"></a>In the technology file, the <code>viaDefs</code> definition of the stacked MIMCAP is:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1054909"></a>&quot;Top_Mimcap1&quot;: Top -&gt; V -&gt; Mimcap1</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1054910"></a>&quot;Top_Mimcap2&quot;: Top -&gt; V -&gt; Mimcap2</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1054911"></a>&quot;Top_Bottom&quot;: Top -&gt; V -&gt; Bottom</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1054912"></a>&quot;Mimcap1_Mimcap2&quot;: Mimcap1 -&gt; V -&gt; Mimcap2</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1054913"></a>&quot;Mimcap1_Bottom&quot;: Mimcap1 -&gt; V -&gt; Bottom</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1054754"></a>&quot;Mimcap2_Bottom&quot;: Mimcap2 -&gt; V -&gt; Bottom</pre>
<p>
<a id="pgfId-1055105"></a>The corresponding layer function table can be represented as:</p>

<p>
<a id="pgfId-1055127"></a></p>
<div class="webflare-div-image">
<img width="648" height="242" src="images/chap2-7.gif" /></div>
<h4>
<a id="pgfId-1037595"></a><a id="63340"></a>Two-Metal Stack</h4>

<p>
<a id="pgfId-1037336"></a>A &#8220;two-metal&#8221; stack uses a cut layer that connects a metal layer of a higher mask number, such as M(n+1), to another metal layer of lower mask number, such as M(n), and to a single intermediate metal layer. </p>
<p>
<a id="pgfId-1036544"></a>The figure below represents a &#8220;two-metal&#8221; connectivity stack. Here, the cut layer, <code>V1</code>, connects the metal layer with a higher mask number, <code>M2</code>, to another metal layer, <code>M1</code>, which has a lower mask number. In addition, the cut layer connects the top metal layer to an intermediate metal layer, <code>MX</code>.</p>

<p>
<a id="pgfId-1036551"></a></p>
<div class="webflare-div-image">
<img width="539" height="205" src="images/chap2-8.gif" /></div>

<p>
<a id="pgfId-1038191"></a>In the technology file, the connectivity stack represented above is defined with the <code>viaDefs</code>:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1036597"></a>&#8220;M2_M1&#8221;: &#160;&#160;&#160;&#160;  M2 - &gt; V1 - &gt; M1</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1036598"></a>&#8220;M2_MX&#8221;: &#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160; M2 - &gt; V1 - &gt; MX</pre>
<p>
<a id="pgfId-1037489"></a>The corresponding layer function table can be represented as:</p>

<p>
<a id="pgfId-1037494"></a></p>
<div class="webflare-div-image">
<img width="317" height="191" src="images/chap2-9.gif" /></div>
<h4>
<a id="pgfId-1036706"></a><a id="41842"></a>Poly-Insulator-Poly Capacitor (PIPCAP) Stack</h4>

<p>
<a id="pgfId-1039976"></a>A Poly-Insulator-Poly Capacitor (PIPCAP) stack uses a cut layer that connects a metal layer to two poly layers. The poly layer at the bottom is routable, whereas the poly at the top is nonroutable and is used to define capacitors. The technology file defines the top poly layer by using the function, <code>pipcap</code>.</p>
<p>
<a id="pgfId-1036879"></a>The figure below represents a PIPCAP connectivity stack. Here, the cut layer, <code>CONT</code>, connects the metal layer, <code>M1</code>, to two poly layers, <code>POLYTOP</code> and <code>POLY</code>. </p>
<p>
<a id="pgfId-1036886"></a></p>

<div class="webflare-div-image">
<img width="557" height="247" src="images/chap2-10.gif" /></div>

<p>
<a id="pgfId-1036818"></a>As displayed in the figure, the cut layer can also connect the metal layer, <code>M1</code>, to the diffusion layer, <code>DIFF</code>. To ensure that the top poly layer does not overlap diffusion, the top poly layer must be enclosed within the bottom poly.</p>
<p>
<a id="pgfId-1039150"></a>In the technology file, the connectivity stack represented above is defined with the <code>viaDefs</code>:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1039151"></a>&#8220;M1_DIFF&#8221;&#160;&#160;&#160;&#160;   :  M1 - &gt; CONT - &gt; DIFF</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1039152"></a>&#8220;M1_POLYTOP&#8221;: &#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;  M1 - &gt; CONT - &gt; POLYTOP</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1039121"></a>&#8220;M1_POLY&#8221;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;: &#160;&#160;&#160;&#160;M1 - &gt; CONT - &gt; POLY</pre>
<p>
<a id="pgfId-1039369"></a>The corresponding layer function table can be represented as:</p>

<p>
<a id="pgfId-1039373"></a></p>
<div class="webflare-div-image">
<img src="images/pipcapLayerFuncTable.GIF" /></div>
<h4><em>
<a id="pgfId-1039375"></a>Illegal Via Connections</em></h4>

<p>
<a id="pgfId-1038538"></a>The extractor checks that the top and bottom layers of a via are effectively connected. If a violation is identified, the extractor creates an &quot;Illegal via connection&quot; marker on the via.</p>
<p>
<a id="pgfId-1037271"></a>Let us consider a MIMCAP parallel connectivity stack as displayed in the figure below. Here, the metal layer <code>M3</code> is connected to metal layers, <code>MCTOP</code>, <code>MCBOT</code>, and <code>M2</code> through the same cut layer, <code>V2</code>.</p>

<p>
<a id="pgfId-1038897"></a></p>
<div class="webflare-div-image">
<img width="472" height="206" src="images/chap2-12.gif" /></div>

<p>
<a id="pgfId-1039385"></a>The <code>viaDefs</code> for the parallel connectivity stack are defined in the technology file as:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1039386"></a>&#8220;M3_M2&#8221; : M3 -&gt; V2 - &gt; M2</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1039387"></a>&#8220;M3_MCTOP&#8221;: M3 - &gt; V2 - &gt; MCTOP</pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1038759"></a>&#8220;M3_MCBOT&#8221;: M3 - &gt; V2 - &gt; MCBOT</pre>
<p>
<a id="pgfId-1038653"></a>In the figure, the via is expected to connect the shape on <code>M3</code> to a shape on <code>MCBOT</code>. But, a shape on <code>MCTOP</code> overlaps the via, preventing the connection. However, due to the overlap with the shape on <code>MCTOP</code>, the via effectively connects the shape on <code>M3</code> to the shape on <code>MCTOP</code>. As this was not the expected connection, the extractor creates an &#8220;illegal via connection&#8221; marker on the via.</p>

<h3>
<a id="pgfId-1046512"></a>FDSOI Connec<a id="fdsoiConnecivityStacks"></a>tivity Stack</h3>

<p>
<a id="pgfId-1046513"></a>An FDSOI (Fully Depleted Silicon-On-Insulator) connectivity stack is formed when a thin, fully depleted Si channel (<code>SOI</code>) and the diffusion (RX) are insulated from the substrate and wells by a buried oxide (<code>box</code>), as shown in the figure below.</p>

<p>
<a id="pgfId-1046519"></a></p>
<div class="webflare-div-image">
<img width="650" height="364" src="images/chap2-13.gif" /></div>

<p>
<a id="pgfId-1046520"></a>The <code>HYBRID</code> layer defines the area where <code>SOI</code> and <code>box</code> are removed such that the diffusion directly connects to the substrate or wells, as shown in the figure above. The wells are laterally insulated by shallow trench isolation (STI), as shown in the figure above.</p>
<p>
<a id="pgfId-1046521"></a>Therefore, the <code>HYBRID</code> layer is defined as a <code>cut</code> layer. <code>viaDefs</code>, as displayed below, are added to the technology file to define that <code>RX</code> can be connected to the well and substrate only through the <code>HYBRID</code> layer. In the example below, RX is an n-implanted diffusion (ndiff) and BP is a p-implant (pplus).</p>

<p class="webflare-indent1">
<a id="pgfId-1046525"></a></p>
<div class="webflare-div-image">
<img width="638" height="73" src="images/chap2-14.gif" /></div>

<p>
<a id="pgfId-1046526"></a>Therefore, the FDSOI connectivity stack can be represented as:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1046527"></a><code>M1 -&gt; CA -&gt; RX</code></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1046528"></a><code>(RX &amp; BP) -&gt; HYBRID -&gt; substrate</code></pre>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-1046529"></a><code>RX -&gt; HYBRID -&gt; NWELL</code></pre>
<p>
<a id="pgfId-1046530"></a>The corresponding layer function table can be represented as:</p>

<p class="webflare-indent1">
<a id="pgfId-1046534"></a></p>
<div class="webflare-div-image">
<img width="305" height="165" src="images/chap2-15.gif" /></div>

<p>
<a id="pgfId-1046535"></a>For routing purposes, the physical via definitions, as defined below, are <code>M1_sub</code> and <code>M1_NW</code>,.</p>

<p class="webflare-indent1">
<a id="pgfId-1046539"></a></p>
<div class="webflare-div-image">
<img width="562" height="88" src="images/chap2-16.gif" /></div>

<p>
<a id="pgfId-1046540"></a>You must set up the <code>validVias</code> constraint in the extractor constraint group, as displayed below, such that the extractor excludes the physical viaDefs <code>M1_sub</code> and <code>M1_NW</code>.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046541"></a>(&quot;virtuosoDefaultExtractorSetup&quot;&#160;&#160;&#160;&#160;nil</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046542"></a>  interconnect(</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046543"></a>    (validLayers (... M1 CA PC RX BP HYBRID NWELL) )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046544"></a>    ( validVias   (... M1_PC M1_RX RX_sub RX_NW) )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046545"></a>  )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046546"></a>)</pre>

<p>
<a id="pgfId-1046547"></a>Similarly, you must set the <code>validVias</code> constraint in the wire editing constraint group, as displayed below, to exclude the viaDefs: <code>M1_RX</code>, <code>RX_sub</code>, and <code>RX_NW</code>.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1046548"></a><code>M1_RX</code>, <code>RX_sub</code>, and <code>RX_NW</code> are not physical viaDefs. These are added in the technology file only to properly define the connectivity stack for the connectivity extractor.</div>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046549"></a>(&quot;virtuosoDefaultSetup&quot;&#160;&#160;&#160;&#160;nil</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046550"></a>  interconnect(</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046551"></a>    (validLayers (... M1 PC) )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046552"></a>    ( validVias   (... M1_PC M1_sub M1_NW) )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046553"></a>  )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1046554"></a>)</pre>

<p>
<a id="pgfId-1046499"></a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="preface.html" id="prev" title="Preface">Preface</a></em></b><b><em><a href="chap3.html" id="nex" title="Preparing Your Connectivity Source">Preparing Your Connectivity So ...</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>