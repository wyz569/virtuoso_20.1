
<html><head><title>Preparing Your Connectivity Source</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="rishu" />
<meta name="CreateDate" content="2020-09-21" />
<meta name="CreateTime" content="1600741506" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the functionality of the Virtuoso Layout Suite XL connectivity-driven features in the current release." />
<meta name="DocTitle" content="Virtuoso Layout Suite XL: Connectivity Driven Editing User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Preparing Your Connectivity Source" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="vxlhelp" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-09-21" />
<meta name="ModifiedTime" content="1600741506" />
<meta name="NextFile" content="chap4.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="chap2.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Layout Suite XL: Connectivity Driven Editing User Guide -- Preparing Your Connectivity Source" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="vxlhelpICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="vxlhelpTOC.html">Contents</a></li><li><a class="prev" href="chap2.html" title="Technology File Requirements for Layout XL">Technology File Requirements f ...</a></li><li style="float: right;"><a class="viewPrint" href="vxlhelp.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="chap4.html" title="Configuring the Physical Hierarchy">Configuring the Physical Hiera ...</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Layout Suite XL: Connectivity Driven Editing User Guide<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>2
<a id="pgfId-1037298"></a></h1>
<h1>
<a id="pgfId-1037299"></a><hr />
<a id="77982"></a>Preparing Your Connectivity Source<hr />
</h1>

<p>
<a id="pgfId-1037810"></a>This chapter <a id="prepschematic"></a>explains how to prepare a schematic connectivity source for your design, which you can then use to generate, place, and route a layout with the Virtuoso&#174; Layout Suite XL layout editor (Layout XL).</p>
<p>
<a id="pgfId-1037811"></a>This chapter covers the following topics.</p>
<ul><li>
<a id="pgfId-1033633"></a><a href="chap3.html#26167">Schematic Design Elements</a></li><li>
<a id="pgfId-1033637"></a><a href="chap3.html#34132">Design Variables</a></li><li>
<a id="pgfId-1033641"></a><a href="chap3.html#10121">One-to-Many Mapping</a> </li><li>
<a id="pgfId-1033649"></a><a href="chap3.html#84322">Properties in Layout XL</a></li><li>
<a id="pgfId-1037248"></a><a href="chap3.html#41017">Pins and Pin Names in Layout XL</a></li></ul>





<h2>
<a id="pgfId-1033668"></a><a id="26167"></a>Schematic Design Elements<a id="PlacingDesignElements"></a></h2>

<p>
<a id="pgfId-1033670"></a>You can use any schematic to generate a layout with Layout XL. However, the process is easier if you</p>
<ul><li>
<a id="pgfId-1033672"></a>Place symbols of devices and pins in the schematic approximately where you want them to be in the layout.<br />
<a id="pgfId-1043532"></a>The <em>Place As In Schematic</em> command lets you place generated layout devices and pins in positions that correspond to the positions of their schematic symbols. If your design carries any unbound instances and pins, these are positioned below the PR boundary.</li><li>
<a id="pgfId-1043533"></a>Use consistent parameter defaults for comparable symbols.<br />
<a id="pgfId-1033675"></a>Layout XL applies the parameters of the symbols to the layout devices.<br /><div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1037821"></a>
Layout XL does not pass to the layout instance CDF parameters that are not evaluated (i.e., that are not AEL expressions) and have <code>cdfParamRec~&gt;storeDefault=nil</code>. These are master parameters and are expected to match for both schematic and layout master. If you require these parameters to be passed, set <code>cdfParamRec-&gt;storeDefault</code> to <code>t</code> for the schematic master parameters.</div></li></ul>






<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1033677"></a>When transferring information from the schematic to the layout, Layout XL flattens the schematic (i.e., expands schematic symbols into corresponding devices) if you provide an <a href="appC.html#21804">lxViewList</a> or an <a href="appC.html#84536">lxStopList</a> to tell Layout XL which view of the lower-level instances to use.</div>
<p>
<a id="pgfId-1033680"></a>Layout XL also supports</p>
<ul><li>
<a id="pgfId-1033682"></a>Design variables. For more information, see <a href="chap3.html#34132">Design Variables</a> </li><li>
<a id="pgfId-1033684"></a>One-to-many mapping. For more information, see <a href="chap3.html#10121">One-to-Many Mapping</a>.</li><li>
<a id="pgfId-1033686"></a>Many-to-many and many-to-one binding.</li></ul>


<p>
<a id="pgfId-1033688"></a>If you are preparing a hierarchical design, you also need to make sure the symbol view of each top-level design element is mapped to the correct layout view of the corresponding layout element for generating the layout.</p>

<h2>
<a id="pgfId-1033691"></a><a id="34132"></a>Design Variables</h2>

<p>
<a id="pgfId-1033694"></a>You can use the following <a id="designVars"></a>design variables with Layout XL.</p>
<ul><li>
<a id="pgfId-1033695"></a><a href="chap3.html#64271">Netlist Processor Expressions</a></li><li>
<a id="pgfId-1033696"></a><a href="chap3.html#43180">Analog Expression Language Expressions</a></li><li>
<a id="pgfId-1033698"></a><a href="chap3.html#69580">Simulation Design Variables</a>.</li></ul>



<h4>
<a id="pgfId-1033700"></a><a id="64271"></a><a id="nlp"></a>Netlist Processor Expressions</h4>

<p>
<a id="pgfId-1033702"></a>Netlist Processor (NLP) expressions are properties that specify parameter values. These expressions are used by the Open Simulation System (OSS) in netlisting. </p>
<p>
<a id="pgfId-1033704"></a>For more information, see the <em><a actuate="user" class="URL" href="../ossref/chap7.html#firstpage" show="replace" xml:link="simple">Open Simulation System Reference</a></em>.</p>
<p>
<a id="pgfId-1042537"></a>Layout XL evaluates CDF parameters that begin with the string &#39;<code>[@</code>&#39; as netlist processor (NLP) expressions regardless of the value of the <code>parseAsCEL</code> environment variable.</p>

<h4>
<a id="pgfId-1033706"></a><a id="43180"></a>Analog Expression Language Expressions</h4>

<p>
<a id="pgfId-1033707"></a>Analog Expression Language (AEL) expressions, such as <code>iPar</code> and <code>pPar</code>, define the value of a parameter as a function of other instance parameters or parameters passed from other levels of hierarchy. If you specify the value of a parameter using an AEL expression, the parameter</p>
<ul><li>
<a id="pgfId-1033710"></a>Must be defined in the component description format (CDF) for the cell of which the symbol is a view.</li><li>
<a id="pgfId-1033711"></a>Must be a string for which <code>parseAsNumber</code> and <code>parseAsCEL</code> properties are set to <code>t</code>.</li><li>
<a id="pgfId-1033712"></a>Must not have a CDF callback (because the evaluation of the expression does not trigger the execution of the callback).</li></ul>


<p>
<a id="pgfId-1033713"></a>If Layout XL detects a parameter value defined with <code>iPar</code>, <code>pPar</code>, or other AEL expressions not defined in the CDF, you see a warning in a message box.</p>

<h4><em>
<a id="pgfId-1041353"></a>Netlisting Mode</em></h4>

<p>
<a id="pgfId-1041350"></a>To ensure that Layout XL always evaluates CDF parameters correctly, make sure that</p>
<ul><li>
<a id="pgfId-1041445"></a>The CDF parameters in question have the <em>parseAsCEL</em> option set to <em>yes</em>.</li><li>
<a id="pgfId-1041448"></a>The <code>CDS_Netlisting_Mode</code> shell environment variable is set to <code>Analog</code> before you launch Layout XL.</li></ul>

<p>
<a id="pgfId-1041451"></a>You can also set <code>CDS_Netlisting_Mode</code> for the current session only. To do this,</p>

<ul><li>
<a id="pgfId-1041356"></a>Type the following commands in the CIW.<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1041321">
<a id="pgfId-1041321"></a>setShellEnvVar(&quot;CDS_Netlisting_Mode=Analog&quot;)
 
cdsSetNetlistMode()
 </pre></li></ul>


<p>
<a id="pgfId-1041330"></a>To check which mode is currently set,</p>

<ul><li>
<a id="pgfId-1041398"></a>Type the following command in the CIW.<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1041332">
<a id="pgfId-1041332"></a>cdsGetNetlistMode()
 </pre></li></ul>


<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1044955"></a>If you have the <code>CDS_Netlisting_Mode</code> shell environment variable set to <code>Digital</code>, Layout XL will not evaluate the CDF parameters by default. But, you can set the <a actuate="user" class="URL" href="../skdfref/cvio.html#dbSearchCDF" show="replace" xml:link="simple">dbSearchCDF</a> SKILL function to <code>t</code> to cause CDF to be searched for parameter values.</div>
<p>
<a id="pgfId-1037869"></a>For more information on <code>CDS_Netlisting_Mode</code>, see <h-hot><a actuate="user" class="URL" href="../ossref/chap3.html#firstpage" show="replace" xml:link="simple">Customizing the Simulation Environment</a></h-hot> in the <em>Open Simulation System Reference</em>.</p>
<p>
<a id="pgfId-1041545"></a>For more information on AEL expressions, see <h-hot><a actuate="user" class="URL" href="../anasimhelp/chap3.html#CDFparams" show="replace" xml:link="simple">Scope of Parameters</a></h-hot> in the <em>Virtuoso Analog Design Environment L User Guide</em>.</p>

<h4>
<a id="pgfId-1041547"></a><a id="69580"></a>Simulation Design Variables</h4>

<p>
<a id="pgfId-1033719"></a>When you use <a id="simVars"></a>simulation design variables to specify the value of a parameter in the circuit, Layout XL uses the value last saved during the simulation of the circuit as the value for the layout implementation.</p>
<p>
<a id="pgfId-1037878"></a>For more information about simulation design variables, see <h-hot><a actuate="user" class="URL" href="../anasimhelp/chap3.html#designVars" show="replace" xml:link="simple">Design Variables and Simulation</a></h-hot> in the <em>Virtuoso Analog Design Environment L User Guide</em>.</p>

<h2>
<a id="pgfId-1033725"></a>Design <a id="constraintsIntro"></a>Constraints</h2>

<p>
<a id="pgfId-1041499"></a>On startup Layout XL transfers all the constraints defined in the schematic view to the layout view, correctly mapping the constraints and their members between the two views.</p>
<p>
<a id="pgfId-1041500"></a>Constraints in the schematic are transferred to the top-level layout view. Constraints that have been created or changed in the schematic but not yet saved are also transferred.</p>
<p>
<a id="pgfId-1041501"></a>Device correspondence information is maintained during the transfer. Logical and physical name bindings are tracked and constraints are updated appropriately to take account of folded instances in the layout.</p>
<p>
<a id="pgfId-1041505"></a>For more information about constraint transfer, see <a href="chap6.html#46697">Constraint Transfer</a>.</p>

<h2>
<a id="pgfId-1041418"></a><a id="10121"></a>One-to-Many Mapping<a id="12many"></a></h2>

<p>
<a id="pgfId-1043801"></a>One-to-many mapping lets you map a single instance or pin in the schematic to multiple instances or pins in the layout. You can implement one-to-many mapping in Layout XL designs using</p>
<ul><li>
<a id="pgfId-1043805"></a><a href="chap3.html#66051">Defining One-to-Many Mapping with Iterated Instances and Bus Pins</a></li><li>
<a id="pgfId-1033732"></a>Using the multiplication factor (<a href="appC.html#35509">mfactor</a>)</li><li>
<a id="pgfId-1035795"></a>Using the series-connected factor (<a href="appC.html#60914">sfactor</a>)</li><li>
<a id="pgfId-1035797"></a><a href="chap10.html#94107">Defining a One-to-Many Device Correspondence</a></li></ul>




<h3>
<a id="pgfId-1035798"></a><a id="66051"></a>Defining One-to-Many Mapping with Iterated Instances and Bus Pins</h3>

<p>
<a id="pgfId-1033740"></a>You can use<a id="iterInst"></a> iterated instances and bus pins to enable one-to-many mapping between pins and devices in the schematic and multiple instances of the pins and devices in the layout.</p>
<p>
<a id="pgfId-1033743"></a>For example, the figure below shows</p>
<ul><li>
<a id="pgfId-1033744"></a>Bus pin <code>SEL&lt;0:1&gt;</code> in the schematic mapped to bus pins <code>SEL&lt;0&gt;</code> and <code>SEL&lt;1&gt;</code> in the layout.</li><li>
<a id="pgfId-1033745"></a>Iterated instance <code>K&lt;0:1&gt;</code> mapped to instances <code>IK(0)|P0</code>, <code>IK(0)|N0</code>, <code>IK(1)|P0</code>, and <code>IK(1)|N0</code> in the layout.<br />
<a id="pgfId-1038687"></a><div class="webflare-div-image">
<img width="665" height="360" src="images/chap3-3.gif" /></div></li></ul>





<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1044325"></a>For more information on iterated instances, see <a actuate="user" class="URL" href="../comphelp/chap3.html#IteratedInstances" show="replace" xml:link="simple">Adding Instances Using an Iterative Expression</a> in the <em>Virtuoso Schematic Editor User Guide</em>.</div>

<h2>
<a id="pgfId-1044476"></a><a id="84322"></a>Properties in Layout XL</h2>

<p>
<a id="pgfId-1038163"></a>Before the Layout XL layout editor can create a layout from a schematic, you must create a layout device for every symbol in the schematic. The layout master of a device or contact can be a fixed cell, a parameterized cell (Pcell), or a device or contact defined in the technology file.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1039903"></a>The default values for any given property must be the same in the schematic and the layout. If the default value of a property differs between the two cellviews, and the property has a value of <code>storeDefault=nil,</code> then when you start the <em>Generate All From Source</em> command, the layout instance is not updated (i.e., the CDF default of the layout is used). This can lead to a parameter mismatch between the layout and the schematic.</div>
<p>
<a id="pgfId-1038166"></a>Pcells are often the most effective because you can assign the dimensions of the device at the time you generate the layout and vary the sizes of a contact each time you place the cell. For more information about Pcells, see the <em><a actuate="user" class="URL" href="../pcellref/pcellrefTOC.html#firstpage" show="replace" xml:link="simple">Virtuoso Parameterized Cell Reference</a></em>.</p>
<p>
<a id="pgfId-1040961"></a>For more information on the properties used by Layout XL, see <a href="appC.html#77912">Layout XL Properties</a>.</p>

<h2>
<a id="pgfId-1037157"></a><a id="41017"></a>Pins<a id="prepPins"></a> and Pin Names in Layout XL</h2>

<p>
<a id="pgfId-1037158"></a>For connectivity assignment tracing and cross-probing to work correctly in Layout XL, the pins and pin names in the layout cellview of a device must match those in the corresponding schematic symbol.</p>

<p>
<a id="pgfId-1037233"></a></p>
<div class="webflare-div-image">
<img width="664" height="300" src="images/chap3-4.gif" /></div>
<h3>
<a id="pgfId-1037234"></a>Extra Pins in the Symbol or Layout Views</h3>

<p>
<a id="pgfId-1041204"></a>Layout XL cannot maintain connectivity for any extra pins in the symbol view because there is no corresponding pin for the device in the layout view.</p>
<p>
<a id="pgfId-1038540"></a>Conversely, Layout XL maintains connectivity for extra pins whose names are global nets (for example, <code>vdd!</code>) in the layout view. It also maintains connectivity for any extra pins in the layout that have their connectivity defined by inherited connections. The inherited connection can be defined relative to the layout instance itself or relative to the schematic hierarchy that ends with the schematic instance corresponding to that layout instance.</p>
<p>
<a id="pgfId-1041265"></a>The look-up order used by Layout XL to determine the net to connect to an extra pin is:</p>

<ol><li>
<a id="pgfId-1044825"></a>Inherited net expression on the layout pin.</li><li>
<a id="pgfId-1044826"></a>Global net &#8212; global attribute or <code>!</code> at the end of the net name.</li><li>
<a id="pgfId-1044788"></a>Property named <code>sub</code>, <code>sub_inh</code>, or <code>bn</code> on the layout master.<ul><li>
<a id="pgfId-1044863"></a>Layout XL uses the value of the property as the substrate net name and connects the extra terminal to that net.</li></ul></li></ol>




<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1037237"></a>Cadence recommends not to place pins where you do not want to make a connection; for example, on a polysilicon layer that covers the gate area of a FET. For more information, see <a href="chap7.html#13369">Adding a Pin</a>.</div>

<h3>
<a id="pgfId-1037258"></a>External Connections</h3>

<p>
<a id="pgfId-1041207"></a>You can also define pins to be connected externally to the design.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1038560"></a>The commands in the <em>Connectivity &#8211; Pins</em> submenu let you connect pins in four different ways.</div>
<ul><li>
<a id="pgfId-1038561"></a><em>Must Connect</em> connects selected pins in a net externally at a higher level of the hierarchy.</li><li>
<a id="pgfId-1038562"></a><em>Strongly Connected</em> connects selected pins within the device. By default, pins are connected internally (strongly).</li><li>
<a id="pgfId-1038563"></a><em>Weakly Connected</em> connects selected pins in a limited external connection to avoid specific internal connections (typically ones with high-resistance paths).</li><li>
<a id="pgfId-1038564"></a><em>Pseudo Parallel Connect</em> connects selected instance terminals on the same net within an instance as though they were connected externally; that is, they are defined as a connection but need never be physically connected.</li></ul>



<p>
<a id="pgfId-1037264"></a>For more information about must-connect pins, strongly connected pins, weakly connected pins, and pseudoparallel connected pins, see <h-hot><a actuate="user" class="URL" href="../vlehelp/chap10.html#firstpage" show="replace" xml:link="simple">Using Connectivity</a></h-hot> in the <em>Virtuoso Layout Suite XL: Basic Editing User Guide</em>.</p>
<p>
<a id="pgfId-1037266"></a>To permute pins, see <a href="appC.html#64631">permuteRule</a>.</p>
<p>
<a id="pgfId-1037267"></a>If you are using parameterized cells and want to give them the capability for abutment, see <h-hot><a href="chap5.html#44020"></a><xrefstd>Device Abutment<h-hot /></xrefstd></h-hot>.</p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="chap2.html" id="prev" title="Technology File Requirements for Layout XL">Technology File Requirements f ...</a></em></b><b><em><a href="chap4.html" id="nex" title="Configuring the Physical Hierarchy">Configuring the Physical Hiera ...</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>