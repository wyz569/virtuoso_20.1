
<html><head><title>OpAmp Macromodel</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="TopicTags" content="TRUE" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="rgirdhar" />
<meta name="CreateDate" content="2020-08-14" />
<meta name="CreateTime" content="1597435098" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="The Cadence Functional Block Library Reference Manual is a library within the Cadence analog design enviroment and is used by analog designers as a high-level design tool." />
<meta name="DocTitle" content="Virtuoso Functional Block Library Reference" />
<meta name="DocType" content="Reference" />
<meta name="FileTitle" content="OpAmp Macromodel" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="fblocklibref" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-08-14" />
<meta name="ModifiedTime" content="1597435098" />
<meta name="NextFile" content="" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="appA.html" />
<meta name="c_product" content="Virtuoso Analog Design Environment" />
<meta name="Product" content="Virtuoso Analog Design Environment" />
<meta name="ProductFamily" content="Virtuoso Analog Design Environment" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Functional Block Library Reference -- OpAmp Macromodel" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="fblocklibrefICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="fblocklibrefTOC.html">Contents</a></li><li><a class="prev" href="appA.html" title="Comparator Macromodel">Comparator Macromodel</a></li><li style="float: right;"><a class="viewPrint" href="fblocklibref.pdf">View/Print PDF</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Functional Block Library Reference<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>B
<a name="pgfId-919892"></a></h1>
<h1>
<a name="pgfId-919894"></a><hr />
<a name="25778"></a>OpAmp Macromodel<hr />
</h1>

<p>
<a name="pgfId-919943"></a>The <a name="marker-919942"></a>OpAmp macromodel uses a simplified equivalent circuit to emulate the DC, AC, and transient nature of real amplifier electrical performance.</p>
<p>
<a name="pgfId-919944"></a>The electrical performance is defined by common data sheet performance factors or parameters (such as offset voltage and slew rate) as properties on the macromodel symbol. You use these parameters as arguments in complex algebraic expressions defining the elemental values of the components making up the macromodel.</p>
<div class="webflare-information-macro webflare-macro-note">
<a name="pgfId-943121"></a>The use of the OpAmp macromodel does not create the same device as that denoted earlier in <a href="chap2.html#45367">&#8220;Operational Amplifier (opAmp)&#8221;</a>. </div>
<p>
<a name="pgfId-919949"></a>The OpAmp macromodel simulates the following effects:</p>
<ul><li>
<a name="pgfId-919950"></a>Input bias current</li><li>
<a name="pgfId-919951"></a>Input offset current</li><li>
<a name="pgfId-919952"></a>Input offset voltage</li><li>
<a name="pgfId-919953"></a>Input capacitance</li><li>
<a name="pgfId-919954"></a>Positive and negative slew rate</li><li>
<a name="pgfId-919955"></a>Positive feedthrough</li><li>
<a name="pgfId-919956"></a>Open loop gain</li><li>
<a name="pgfId-919957"></a>Common mode rejection ratio</li><li>
<a name="pgfId-919958"></a>Gain bandwidth product</li><li>
<a name="pgfId-919959"></a>Second pole frequency</li><li>
<a name="pgfId-919960"></a>Saturation delay time</li><li>
<a name="pgfId-919961"></a>High frequency output impedance</li><li>
<a name="pgfId-919962"></a>AC output resistance</li><li>
<a name="pgfId-919963"></a>DC output resistance</li><li>
<a name="pgfId-919964"></a>Positive and negative output swing</li><li>
<a name="pgfId-919965"></a>Positive and negative output current limit</li><li>
<a name="pgfId-919966"></a>Positive and negative power supply rejection ratio</li><li>
<a name="pgfId-919967"></a>Positive and negative power supply current</li></ul>


















  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Equivalent Circuit

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-919968"></a>Equivalent Circuit</h3>

<p>
<a name="pgfId-919969"></a>The following figure is a schematic of the OpAmp macromodel circuit.</p>

<ft-figtabl-title id="#id919974">
<a name="pgfId-919974"></a>Input Stage</ft-figtabl-title>
<p>
<a name="pgfId-942915"></a></p>
<div class="webflare-div-image">
<img width="701" height="419" src="images/appB-2.gif" /></div>
<ft-figtabl-title id="#id919978">
<a name="pgfId-919978"></a>Supply Voltages</ft-figtabl-title>
<p>
<a name="pgfId-942918"></a></p>
<div class="webflare-div-image">
<img width="596" height="346" src="images/appB-3.gif" /></div>
<ft-figtabl-title id="#id919982">
<a name="pgfId-919982"></a>Output Stage</ft-figtabl-title>
<p>
<a name="pgfId-942925"></a></p>
<div class="webflare-div-image">
<img width="673" height="352" src="images/appB-4.gif" /></div>
<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Using the OpAmp Macromodel

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h2>
<a name="pgfId-919983"></a>Using the OpAmp Macromodel</h2>

<p>
<a name="pgfId-919984"></a>You can use the the OpAmp macromodel by</p>
<ul><li>
<a name="pgfId-919985"></a>Defining the common specification sheet values, available in most semiconductor product catalogs</li><li>
<a name="pgfId-919986"></a>Placing the OpAmp symbol in your schematic</li><li>
<a name="pgfId-919987"></a>Defining the CDF parameter values and by using default values for parameters that you do not set </li></ul>



<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Entering the Macromodel into Your Design

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-919988"></a>Entering the Macromodel into Your Design</h3>

<p>
<a name="pgfId-919989"></a>The following is an OpAmp macromodel symbol.</p>

<p>
<a name="pgfId-920007"></a></p>
<div class="webflare-div-image">
<img width="668" height="195" src="images/appB-5.gif" /></div>

<p>
<a name="pgfId-943101"></a>For proper operation of the macromodel, you need to connect the following six I/O pins.</p>
<table class="webflareTable" id="#id945343">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-945345"></a>IN+</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-945347"></a>Positive differential input pin</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-945349"></a>IN-</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-945351"></a>Negative differential input pin</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-945353"></a>OUT</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-945355"></a>OpAmp output pin</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-945357"></a>VCC</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-945359"></a>Positive power supply pin</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-945361"></a>VEE</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-945363"></a>Negative power supply pin</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-945365"></a>REF</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-945367"></a>Reference voltage (typically ground)</p>
</td>
</tr>
</tbody></table>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Setting Macromodel Parameters

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-920015"></a><a name="13450"></a>Setting Macromodel Parameters</h3>

<p>
<a name="pgfId-920016"></a>There are 23 parameters you can use to describe the DC, AC, and transient behavior of the OpAmp in the macromodel. </p>

<p>
<a name="pgfId-943106"></a></p>
<table class="webflareTable" id="#id920017">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id920019">
<a name="pgfId-920019"></a>Property</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id920021">
<a name="pgfId-920021"></a>Typical Value</span>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<span class="tbl-head" id="#id920023">
<a name="pgfId-920023"></a>Description</span>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920025"></a>ccc</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920027"></a>30 p farads</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920029"></a>Internal compensation capacitor</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920031"></a>ibs</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920033"></a>100 n amps</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920035"></a>Input bias current</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920037"></a>ios</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920039"></a>10 n amps</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920041"></a>Input offset current</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920043"></a>vos</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920045"></a>1 m+.01 m* (tempdc-25) volts</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920047"></a>Input offset voltage</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920049"></a>srp</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920051"></a>10 me volts/second</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920053"></a>Positive slew rate</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920055"></a>srn</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920057"></a>10 me volts/second</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920059"></a>Negative slew rate</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920061"></a>ftp</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920063"></a>0.1</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920065"></a>Positive feedthrough</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920067"></a>gol</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920069"></a>100 k volts/volt</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920071"></a>Open loop gain</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920073"></a>cmr</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920075"></a>90 db</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920077"></a>Common mode rejection ratio</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920079"></a>gbw</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920081"></a>10 MHz</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920083"></a>Gain-bandwidth product</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920085"></a>ff2</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920087"></a>20 MHz</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920089"></a>Second pole frequency</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920091"></a>tsd</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920093"></a>500 n seconds</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920095"></a>Overdrive storage delay</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920097"></a>roa</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920099"></a>20 ohms</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920101"></a>AC output resistance</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920103"></a>rod</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920105"></a>30 ohms</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920107"></a>DC output resistance</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920109"></a>vsn</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920111"></a>-14 volts</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920113"></a>Negative output swing limit</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920115"></a>vsp</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920117"></a>14 volts</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920119"></a>Positive output swing limit</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920121"></a>ion</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920123"></a>50 m amps</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920125"></a>Negative output current limit</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920127"></a>iop</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920129"></a>50 m amps</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920131"></a>Positive output current limit</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920133"></a>prn</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920135"></a>90 db</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920137"></a>Negative power supply rejection ratio</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920139"></a>prp</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920141"></a>90 db</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920143"></a>Positive power supply rejection ratio</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920145"></a>iee</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920147"></a>5 m amps</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920149"></a>Negative power supply current</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920151"></a>icc</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920153"></a>5 m amps</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920155"></a>Positive power supply current</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920157"></a>vnm</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920159"></a>15 volts</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-920161"></a>Nominal power supply</p>
</td>
</tr>
</tbody></table>

<p>
<a name="pgfId-920162"></a>You define these parameters in the cell CDF description.</p>
<p>
<a name="pgfId-920163"></a>The property value can be a</p>
<ul><li>
<a name="pgfId-920164"></a>Number</li><li>
<a name="pgfId-920165"></a>Variable</li><li>
<a name="pgfId-920166"></a>Valid expression (with variables)</li></ul>


<p>
<a name="pgfId-920167"></a>For example, to define the offset voltage as a simple linear function of temperature, enter the following expression as the value of the offset voltage property:</p>

<pre class="webflare-courier-new codeContent">
<a name="pgfId-920168"></a>vos = 1m + 0.01m * (TEMPDC - 25)</pre>
<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Obtaining Macromodel Parameters

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-920169"></a>Obtaining Macromodel Parameters</h3>

<p>
<a name="pgfId-920170"></a>You can obtain model parameters in several ways, depending on your application. </p>
<ul><li>
<a name="pgfId-920173"></a>IC vendor catalog<br />
<a name="pgfId-943107"></a>Obtain most of the parameters from the specific amplifier catalog data sheet</li><li>
<a name="pgfId-920179"></a>Schematics<br />
<a name="pgfId-920182"></a>Simulate and measure the performance parameters you want using the OpAmp transistor schematic and associated SPICE device models</li><li>
<a name="pgfId-920185"></a>Component<br />
<a name="pgfId-920187"></a>Make the measurements in the lab using the OpAmp component</li></ul>





<p>
<a name="pgfId-920189"></a>You can use the default values or set some reasonable values for the remaining parameters. For example, you might set parameters to some typical values (or use the defaults) when exploring your system design space before selecting a particular amplifier, then modify the values later.</p>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Applying Macromodels

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h2>
<a name="pgfId-920190"></a>Applying Macromodels</h2>

<p>
<a name="pgfId-920191"></a>You can use operational amplifier macromodels for a variety of applications. For example, these macromodels can be used for</p>
<ul><li>
<a name="pgfId-920192"></a>&#8220;What-if&#8221; exploratory system simulation</li><li>
<a name="pgfId-920193"></a>Fast system simulation</li><li>
<a name="pgfId-920194"></a>Library characterization and protection</li></ul>


<p>
<a name="pgfId-920195"></a>These three applications are described in detail below.</p>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=&#8220;What-if&#8221; Exploratory System Simulation

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-920196"></a>&#8220;What-if&#8221; Exploratory System Simulation</h3>

<p>
<a name="pgfId-920197"></a>You can perform the &#8220;what-if&#8221; exploratory system simulation with the following steps.</p>
<ul><li>
<a name="pgfId-920198"></a>Implement a circuit with generic OpAmp macromodels early in an analog system design cycle. This way, you can quickly enter the OpAmps into the schematic, simulate, and independently set and change the OpAmp parameters (such as slew rate, bandwidth, and offset voltage) to understand their effects on system performance.</li><li>
<a name="pgfId-920199"></a>Center the design, locate an OpAmp as close as possible to the required specifications in a catalog, then enter its data sheet values to verify that your system functions with the real parameters.</li><li>
<a name="pgfId-920200"></a>Enter or design the OpAmp transistor level circuits to the defined specifications.</li></ul>


<div class="webflare-information-macro webflare-macro-note">
<a name="pgfId-920201"></a>Because most macromodel parameters are independent, be careful not to specify difficult or unrealistic combinations of specifications, such as low power and high speed.</div>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Fast System Simulation

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-920202"></a>Fast System Simulation</h3>

<p>
<a name="pgfId-920203"></a>It might be impractical to simulate the entire system interactively at the transistor level when the system includes many OpAmps.</p>
<ul><li>
<a name="pgfId-920204"></a>Change and simulate the system quickly using macromodels.</li><li>
<a name="pgfId-920205"></a>Run final verification simulations on the entire system in background or noninteractive mode.</li></ul>


<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Library Characterization and Protection

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h3>
<a name="pgfId-920206"></a>Library Characterization and Protection</h3>

<p>
<a name="pgfId-920207"></a>The OpAmp macromodel also finds application in library characterization and protection (as described here).</p>
<ul><li>
<a name="pgfId-920208"></a>Many CAD, semiconductor, and ASIC vendors provide qualified macromodel libraries of commonly used catalog components or cells.</li><li>
<a name="pgfId-920209"></a>Systems designers get faster simulations using these macromodels.</li><li>
<a name="pgfId-920210"></a>Vendors protect their circuit designs and process parameters.</li></ul>



<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=OpAmp System Size

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h2>
<a name="pgfId-920211"></a>OpAmp System Size</h2>

<p>
<a name="pgfId-920214"></a>A primary reason for using macromodels in large systems is for faster simulations. These simulations are faster when compared to transistor-level simulations. These simulations are about 10 to 50 times faster for complex OpAmps containing between 30 and 100 devices. Storage requirements are also reduced using macromodels.</p>
<p>
<a name="pgfId-920216"></a>The fast simulation time and reduced storage requirement of smaller amplifiers (fewer than 10 devices) might not compensate for the loss of accuracy from using macromodels. However, macromodels are still useful for exploratory tuning and for protecting libraries.</p>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Accuracy and Limitations

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h2>
<a name="pgfId-920217"></a>Accuracy and Limitations</h2>

<p>
<a name="pgfId-920218"></a>The OpAmp macromodel might not work as a comprehensive model. Its limitations are described here.</p>
<ul><li>
<a name="pgfId-920219"></a>Macromodel accuracy<br />
<a name="pgfId-920220"></a>The OpAmp macromodel is less accurate and comprehensive than the transistor level representation, and even less accurate than the circuit measurements.</li><li>
<a name="pgfId-920221"></a>Model scope<br />
<a name="pgfId-920222"></a>Specifications not defined as macromodel parameters are not modeled, including common-mode input range, noise, transient power dissipation, and output impedance.</li><li>
<a name="pgfId-920223"></a>Temperature<br />
<a name="pgfId-920224"></a>Temperature effects are not implicitly included, but can be explicitly defined as an algebraic or table function. For example:<br />
<a name="pgfId-920225"></a>offset voltage = 1m + 0.01 m * (tempdc - 25)<br />
<a name="pgfId-920226"></a>or<br />
<a name="pgfId-920227"></a>offset voltage = TABLE(tempdc,-75,0,25,1m,125,2m)</li><li>
<a name="pgfId-920228"></a>Parameter independence<br />
<a name="pgfId-920229"></a>To a first order of accuracy, you can set the macromodel parameters independently, ignoring interactions.</li><li>
<a name="pgfId-920230"></a>Small input bias currents<br />
<a name="pgfId-920231"></a>When using small input bias currents (~1E-12), decrease the simulation control variable GMIN (minimum conductance) to ~1E-15 (default is 1.0E-12). This helps to prevent relatively large leakage currents and corresponding accuracy loss. </li><li>
<a name="pgfId-920232"></a>Unrealistic conditions<br />
<a name="pgfId-920233"></a>The macromodel is particularly good for modeling the OpAmp components. Avoid the following unrealistic parameter values or extreme conditions:<ul><li>
<a name="pgfId-920234"></a>Offset voltages less than 10 μvolts vary due to numerical errors</li><li>
<a name="pgfId-920235"></a>The quantities below affect the accuracy of the slew rate of the macromodel in small but measurable ways<ul><li>
<a name="pgfId-920236"></a>Gain-bandwidth product (GBW)</li><li>
<a name="pgfId-920237"></a>Large-signal saturation delay (TSD)</li><li>
<a name="pgfId-920238"></a>Second pole frequency (FF2)</li></ul><br />
<a name="pgfId-920239"></a>This effect can be significant for the following examples of extreme cases:<ul><li>
<a name="pgfId-920240"></a>TSD&lt;&lt;(1/GBW)</li><li>
<a name="pgfId-920241"></a>FF2&lt;&lt;GBW</li></ul><br />
<a name="pgfId-920242"></a>In these situations, measure the simulated macromodel response and adjust the parameters accordingly.</li></ul></li><li>
<a name="pgfId-920243"></a>Additional parameter requirements<ul><li>
<a name="pgfId-920245"></a>The slew rates must conform to the inequality   0.1 ≤ srn/srp ≤ 10</li><li>
<a name="pgfId-920246"></a>The output DC and AC resistances must conform to the inequality rod &gt; roa &gt; 0</li></ul></li></ul>































<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Example

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h2>
<a name="pgfId-920247"></a>Example</h2>

<p>
<a name="pgfId-920248"></a>Below is a schematic of a simple noninverting amplifier with closed-loop DC gain = rfeed/(rfeed + 1K).</p>

<p>
<a name="pgfId-942929"></a></p>
<div class="webflare-div-image">
<img width="669" height="517" src="images/appB-6.gif" /></div>

<p>
<a name="pgfId-920254"></a>The <a name="marker-920253"></a>macromodel property list values are the typical values listed in <a href="appB.html#13450">&#8220;Setting Macromodel Parameters&#8221;</a>.</p>

<!-- [TOPIC_END] -->

<p>
<a name="pgfId-943840"></a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="appA.html" id="prev" title="Comparator Macromodel">Comparator Macromodel</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>