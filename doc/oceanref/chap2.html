
<html><head><title>Using OCEAN</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="TopicTags" content="TRUE" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="shubh" />
<meta name="CreateDate" content="2020-09-18" />
<meta name="CreateTime" content="1600435849" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="The Open Command Environment for Analysis (OCEAN) can be used with any simulator integrated into the Analog Design Environment. OCEAN enables you set up, simulate and analyze circuit data." />
<meta name="DocTitle" content="OCEAN Reference" />
<meta name="DocType" content="SKILL Reference" />
<meta name="FileTitle" content="Using OCEAN" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="oceanref" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-09-18" />
<meta name="ModifiedTime" content="1600435849" />
<meta name="NextFile" content="chap3.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="chap1.html" />
<meta name="c_product" content="Virtuoso Analog Design Environment" />
<meta name="Product" content="Virtuoso Analog Design Environment" />
<meta name="ProductFamily" content="Virtuoso Analog Design Environment" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="OCEAN Reference -- Using OCEAN" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="oceanrefICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="oceanrefTOC.html">Contents</a></li><li><a class="prev" href="chap1.html" title="Introduction to OCEAN">Introduction to OCEAN</a></li><li style="float: right;"><a class="viewPrint" href="oceanref.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="chap3.html" title="Introduction to SKILL">Introduction to SKILL</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>OCEAN Reference<br />Product Version ICADVM20.1, October  2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>2
<a name="pgfId-1008781"></a></h1>
<h1>
<a name="pgfId-1011663"></a><hr />
<a name="20106"></a>Using OCEAN<hr />
</h1>

<p>
<a name="pgfId-1013000"></a>This chapter explains the different ways you can use OCEAN to perform simulation tasks. In this chapter, you can find information about</p>
<ul><li>
<a name="pgfId-1013882"></a><a href="chap2.html#23522">OCEAN Use Models</a></li><li>
<a name="pgfId-1018216"></a><a href="chap2.html#33914">Using OCEAN Interactively</a></li><li>
<a name="pgfId-1018217"></a><a href="chap2.html#10172">License Requirements</a></li><li>
<a name="pgfId-1018221"></a><a href="chap2.html#26845">Creating OCEAN Scripts</a></li><li>
<a name="pgfId-1013901"></a><a href="chap2.html#37513">Selecting Results</a></li><li>
<a name="pgfId-1023002"></a><a href="chap2.html#42163">Running Multiple Simulators</a></li><li>
<a name="pgfId-1023024"></a><a href="chap2.html#25332">OCEAN Tips</a></li></ul>







  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=OCEAN Use Models

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h2>
<a name="pgfId-1013881"></a><a name="marker-1014425"></a><a name="23522"></a>OCEAN Use Models</h2>

<p>
<a name="pgfId-1013883"></a>There are two ways you can use OCEAN:</p>
<ul><li>
<a name="pgfId-1013008"></a>You can use OCEAN interactively to perform simple tasks. </li><li>
<a name="pgfId-1013022"></a>You can use OCEAN in batch mode and provide the name of an existing (or parameterized) script as a command line argument. OCEAN scripts can be created:<ul><li>
<a name="pgfId-1013023"></a>From the Virtuoso&#174; Analog Design Environment window with the command
<em>Session &#8211; Save Script</em></li><li>
<a name="pgfId-1013024"></a>Using a text editor</li></ul><br />
<a name="pgfId-1013028"></a>For information about creating scripts, see <a href="chap2.html#26845">&#8220;Creating OCEAN Scripts&#8221;</a>.</li></ul>






<p>
<a name="pgfId-1013649"></a>All the OCEAN commands are described in this manual, and online help is available for all these commands. For information about using the OCEAN online help, see <a href="chap1.html#22607">&#8220;OCEAN Online Help&#8221;</a>.</p>
<div class="webflare-information-macro webflare-macro-note">
<a name="pgfId-1013672"></a>The current version of OCEAN has some specific issues that are addressed in <a href="appA.html#24814">Appendix 15, &#8220;OCEAN 4.4.6 Issues.&#8221;</a> Refer this appendix before using OCEAN.</div>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Using OCEAN Interactively

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h2>
<a name="pgfId-1013671"></a><a name="marker-1014427"></a><a name="33914"></a>Using OCEAN Interactively</h2>

<p>
<a name="pgfId-1013029"></a>You can run OCEAN from a UNIX prompt or from the Virtuoso<sup>&#174;</sup> design framework II (DFII) Command Interpreter Window (CIW). </p>
<div class="webflare-information-macro webflare-macro-note">
<a name="pgfId-1013861"></a>The primary use model is to use OCEAN in a UNIX shell. Unless otherwise indicated, the rest of this chapter assumes that you are working from OCEAN in a UNIX shell.</div>

<h3>
<a name="pgfId-1013272"></a><a name="marker-1014429"></a>Using OCEAN from a UNIX Shell</h3>

<p>
<a name="pgfId-1013273"></a>To start OCEAN from a UNIX prompt, type the following command:</p>
<p>
<a name="pgfId-1017285"></a><code>ocean</code> </p>
<p>
<a name="pgfId-1017286"></a>This command loads and reads the <code>.oceanrc</code> file. You can place OCEAN commands in your <code>.oceanrc</code> file, which is similar to the <code>.cdsinit</code> file. This file can contain any valid OCEAN command, function or SKILL initialization routine (excluding graphical dfII references, such as bindkeys and so on, which are not applicable to OCEAN). If you do not want to specify any startup initialization options for OCEAN, you do not need to create or add an <code>.oceanrc</code> file. </p>
<p>
<a name="pgfId-1012966"></a>The OCEAN prompt appears indicating that you have started OCEAN:</p>
<p>
<a name="pgfId-1014174"></a><code>ocean&gt;</code></p>
<p>
<a name="pgfId-1013329"></a>If you do not see this prompt after starting OCEAN, press <code>Return</code>. If you still do not see this prompt, you may have redefined the prompt with the <code>setPrompt</code> command. (This does not affect OCEAN; the prompt just will not indicate OCEAN is running.)</p>
<p>
<a name="pgfId-1017447"></a>Now you can start typing OCEAN commands interactively. For an example of interactive use, see <a href="chap2.html#21642">&#8220;Interactive Session Demonstrating the OCEAN Use Model&#8221;</a>.</p>
<p>
<a name="pgfId-1017452"></a>To quit the OCEAN executable from UNIX, type the following command:</p>
<p>
<a name="pgfId-1014172"></a><code>exit</code></p>

<h4>
<a name="pgfId-1016433"></a><a name="marker-1016598"></a>OCEAN in Non-Graphical Mode</h4>

<p>
<a name="pgfId-1016579"></a>OCEAN is an executable shell script that calls the AWD workbench and passes all its command-line options to it using the following shell command:</p>
<p>
<a name="pgfId-1016580"></a><code>#! /bin/sh -</code></p>
<p>
<a name="pgfId-1016581"></a><code>exec awd -ocean &quot;$@&quot;</code></p>
<p>
<a name="pgfId-1016582"></a>This makes OCEAN highly dependent on the UNIX shell environment.</p>
<p>
<a name="pgfId-1016453"></a>You can run OCEAN in a non-graphical mode by using the <code>-nograph</code> option with the <code>ocean</code> command. This disables the graphical options of the software. This option is useful if OCEAN is started on a machine that does not have X-Windows running.</p>
<div class="webflare-information-macro webflare-macro-note">
<a name="pgfId-1017508"></a>You can use the <code>-nograph</code> option to run the OCEAN job through a cron. Ensure that <code>DISPLAY</code> is set to &#8220;<code>:0</code>&#8221;. If the screen will be locked when the OCEAN cron job runs, use the <code>allowaccess</code> option with the <code>xlock</code> command on the UNIX prompt. For more information on the usage of <code>xlock</code>, type <code>man xlock</code> in a terminal window.</div>
<p>
<a name="pgfId-1017473"></a>The <code>-nograph</code> option must only be used to replay logfiles that have been created interactively. For example, while using OCEAN with the <code>-nograph</code> option, your <code>oceanScript.ocn</code> file must have an <code>exit()</code> statement at the end followed by a newline. Otherwise, OCEAN hangs. The reason for this is that when the workbench is started in the non-graphical mode, it does not redirect standard I/O as it normally does; instead, it lets the SKILL human interface (HI) handle the standard I/O. HI expects an explicit <code>exit()</code> statement at the end of the OCEAN script and OCEAN exits only when it detects an <code>exit()</code> at EOF. The command is used as follows:</p>
<p>
<a name="pgfId-1016459"></a><code>ocean -nograph &lt; oceanScript.ocn &gt; oceanScript.log </code></p>
<p>
<a name="pgfId-1020099"></a>Alternatively, you can execute the OCEAN script using the <code>-replay</code> option. The command is used as follows:</p>

<pre class="webflare-courier-new codeContent">
<a name="pgfId-1020100"></a>ocean -nograph -replay oceanScript.ocn -log oceanScript.log</pre>

<p>
<a name="pgfId-1020101"></a><code>.oceanrc</code> is automatically loaded while using ocean <code>-nograph -replay</code> command. If you use the <code>virtuoso</code> command, <code>.oceanrc</code> is not loaded automatically.</p>
<p>
<a name="pgfId-1020091"></a>While using the <code>-nograph</code> option with <code>ocean</code>, if you find that simulation run messages are not being stored in the log file, check for the following environment variable in the <code>.cdsenv</code> file:</p>
<p>
<a name="pgfId-1016467"></a><code>(envGetVal &quot;spectre.envOpts&quot; &quot;firstRun&quot; )</code></p>
<p>
<a name="pgfId-1016471"></a>It must be set to <code>nil</code> as shown below for simulation run messages to be stored in it:</p>
<p>
<a name="pgfId-1016473"></a><code>(envSetVal &quot;spectre.envOpts&quot; &quot;firstRun&quot; &#8217;boolean nil)</code></p>
<p>
<a name="pgfId-1016477"></a>For more information about this variable, see Appendix B of the <em>Virtuoso Analog Design Environment L User Guide</em>.</p>

<h3>
<a name="pgfId-1013274"></a><a name="marker-1014431"></a>Using OCEAN from the CIW</h3>

<p>
<a name="pgfId-1013688"></a>You can type OCEAN commands in the CIW after you bring up the Virtuoso&#174; Analog Design Environment. (Starting the design environment loads the required OCEAN files.)</p>
<p>
<a name="pgfId-1013693"></a>Your <code>.oceanrc</code> file is <em>not</em> automatically read when you start the DFII software (using the <code>virtuoso</code> command). Therefore, you might want to load your <code>.oceanrc</code> file manually in the CIW if you need information that it contains.</p>
<p>
<a name="pgfId-1017457"></a>You can also use the <a href="chap5.html#66636">history</a> command from the CIW to list and reuse the most recently used commands.</p>

<h3>
<a name="pgfId-1013102"></a><a name="marker-1014433"></a><a name="21642"></a>Interactive Session Demonstrating the OCEAN Use Model</h3>

<p>
<a name="pgfId-1013105"></a><a name="14539"></a>The following figure shows a typical set of simulation tasks that you might perform interactively in OCEAN with the corresponding commands.</p>

<p>
<a name="pgfId-1015284"></a></p>
<div class="webflare-div-image">
<img width="668" height="581" src="images/chap2-2.gif" /></div>

<p>
<a name="pgfId-1013187"></a>On the second and third run, the AC analysis runs because it is still active. If you do not want it to run, you must disable it with the following command:</p>

<pre class="webflare-courier-new codeContent">
<a name="pgfId-1014270"></a><code>delete( &#8217;analysis &#8217;ac )</code></pre>

<p>
<a name="pgfId-1013189"></a>The simulator is not called and run until the <code>run()</code> command is entered. </p>
<p>
<a name="pgfId-1013805"></a>The commands can be given in any order, as long as they are all defined before the <code>run()</code> command.</p>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=License Requirements

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h2>
<a name="pgfId-1018115"></a><a name="10172"></a>License Requirements</h2>

<p>
<a name="pgfId-1018592"></a>You need licenses to run the <code>simulator()</code> and <code>ocnSetXLMode()</code> OCEAN commands. For more information on these commands, see <a href="chap6.html#33986">simulator</a>.</p>
<ul><li>
<a name="pgfId-1018602"></a>To run the <code>simulator()</code> OCEAN command, you must have one of the following licenses. If one of these licenses are not already checked out, the first available license will be checked out in the following order:<ul><li>
<a name="pgfId-1018609"></a>95200 Virtuoso(R) Analog Design Environment L</li><li>
<a name="pgfId-1018610"></a>95210 Virtuoso(R) Analog Design Environment XL</li><li>
<a name="pgfId-1018611"></a>95220 Virtuoso(R) Analog Design Environment GXL</li></ul></li><li>
<a name="pgfId-1018616"></a>To run the <code>ocnSetXLMode()</code> OCEAN command, you must have one of the following licenses. If one of these licenses are not already checked out, the first available license will be checked out in the following order:<ul><li>
<a name="pgfId-1018623"></a>95210 Virtuoso(R) Analog Design Environment XL</li><li>
<a name="pgfId-1018624"></a>95220 Virtuoso(R) Analog Design Environment GXL<br /><div class="webflare-information-macro webflare-macro-note">
<a name="pgfId-1018649"></a>If you have run the <code>ocnSetXLMode()</code> command, running the <code>simulator()</code> command subsequently will not checkout an additional license. </div></li></ul></li></ul>







<p>
<a name="pgfId-1018650"></a>If you do not want OCEAN to automatically checkout a higher tiered license&#8212;for example, if you do not want OCEAN to automatically checkout the <code>95210</code> license if the <code>95200</code> license is not available&#8212;set the following environment variable in your <code>.cdsenv</code> file:</p>

<pre class="webflare-courier-new webflare-indent1 codeContent">
<a name="pgfId-1018139"></a>asimenv.misc&#160;&#160;alwaysTryHigherTieredLicenseInOcean&#160;&#160; &#8217;boolean nil</pre>

<div class="webflare-information-macro webflare-macro-note">
<a name="pgfId-1018248"></a>If the <code>alwaysTryHigherTieredLicenseInOcean</code> environment variable is set to <code>nil</code>, errors are displayed if OCEAN is unable to checkout a license.</div>
<div class="webflare-information-macro webflare-macro-note">
<a name="pgfId-1022193"></a>The <code>95200 Virtuoso(R) Analog Design Environment L</code> license is checked out when you load the ocean script. Exit Virtuoso, or run the <a href="../oceanref/chap6.html#ocnCloseSession">ocnCloseSession()</a> command to release the license.</div>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Creating OCEAN Scripts

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h2>
<a name="pgfId-1013808"></a><a name="marker-1014435"></a><a name="26845"></a>Creating OCEAN Scripts</h2>

<p>
<a name="pgfId-1013414"></a>You can modify the included sample script files or create script files interactively from the Virtuoso&#174; Analog Design Environment. </p>

<h3>
<a name="pgfId-1014014"></a><a name="marker-1014437"></a>Creating Scripts Using Sample Script Files</h3>

<p>
<a name="pgfId-1014013"></a>You can create your own script files with a text editor using the sample scripts as examples, or you can make copies of the sample scripts and modify them as needed using a text editor. The scripts can be found in the following directory:</p>

<pre class="webflare-courier-new codeContent">
<a name="pgfId-1013419"></a><code><em>your_install_dir</em></code>/tools/dfII/samples/artist/OCEAN</pre>

<p>
<a name="pgfId-1013422"></a>Refer to the <code>README</code> file in this directory for information about the scripts.</p>

<h3>
<a name="pgfId-1012867"></a><a name="marker-1014594"></a><a name="marker-1014439"></a>Creating Scripts from the Analog Design Environment</h3>

<p>
<a name="pgfId-1013571"></a>When you perform tasks in the design environment, the associated OCEAN commands are automatically stored in the <span class="webflare-courier-new" style="white-space:pre"><em>simulatorx</em></span><code>.ocn</code> file in your <code>netlist</code> directory. For example, if you start the Virtuoso software, open the Virtuoso&#174; Analog Design Environment window, and run a simulation using the Cadence SPICE simulator, a <code>cdsSpice0.ocn</code> file is created in your <code>netlist</code> directory. You can load this <code>cdsSpice0.ocn</code> script as described in <a href="chap2.html#24794">&#8220;Loading OCEAN Scripts&#8221;</a>.</p>

<h3>
<a name="pgfId-1013579"></a><a name="marker-1014441"></a>Selectively Creating Scripts</h3>

<p>
<a name="pgfId-1013576"></a>You can be selective about the information that is created in your <code>.ocn</code> script. The Virtuoso&#174; Analog Design Environment has a feature that lets you create an OCEAN script based on the state of your current session. The following example illustrates how using this feature is different than using the automatic script generation feature.</p>
<p>
<a name="pgfId-1012872"></a>Consider the following task flow:</p>
<ol><li>
<a name="pgfId-1013488"></a>Start the Virtuoso&#174; Analog Design Environment.</li><li>
<a name="pgfId-1012873"></a>Specify a DC analysis.</li><li>
<a name="pgfId-1012874"></a>Select nets on the schematic to save.</li><li>
<a name="pgfId-1012875"></a>Run the simulation.</li><li>
<a name="pgfId-1012876"></a>Turn off the DC analysis.</li><li>
<a name="pgfId-1012877"></a>Select a transient analysis.</li><li>
<a name="pgfId-1012878"></a>Run the simulation.</li><li>
<a name="pgfId-1013503"></a>Save the script from the Virtuoso&#174; Analog Design Environment.</li></ol>







<p>
<a name="pgfId-1013504"></a>The script that is created, called <code>oceanScript.ocn</code> by default, contains only the selected nets, the transient analysis, and the run command. The script does not contain the DC analysis because it was turned off.</p>
<p>
<a name="pgfId-1013505"></a>In contrast, the <span class="webflare-courier-new" style="white-space:pre"><em>simulator</em></span><code>0.ocn</code> script, which is automatically created in the <code>netlist</code> directory, contains all of the commands, including the DC analysis and the current state of the analysis (on or off).</p>

<h4>
<a name="pgfId-1014649"></a>Creating a Script</h4>

<p>
<a name="pgfId-1013534"></a>To selectively create a script from Virtuoso Analog Design Environment L or ,</p>
<ol><li>
<a name="pgfId-1013535"></a>Start the Virtuoso software,<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1013536">
<a name="pgfId-1013536"></a>virtuoso</pre>
<a name="pgfId-1013537"></a>The CIW appears.</li><li>
<a name="pgfId-1013542"></a>From the CIW, choose <em>Tools &#8211; ADE L &#8211; Simulation</em>.<br />
<a name="pgfId-1013543"></a>The Virtuoso Analog Design Environment window appears.</li><li>
<a name="pgfId-1013544"></a>Perform all of the design environment tasks that you want to capture in the script.</li><li>
<a name="pgfId-1013545"></a>Choose <em>Session &#8211; Save Script</em>. <br />
<a name="pgfId-1013551"></a>The Save Ocean Script to File form appears.</li><li>
<a name="pgfId-1013552"></a>Click <em>OK</em> to accept the default file name (<code>./oceanScript.ocn</code>), or change the name for the file and click <em>OK</em>.<br />
<a name="pgfId-1013553"></a>A script containing the OCEAN commands for the tasks you performed is created. For information about how to load this script, see <a href="chap2.html#18576">&#8220;Loading OCEAN Scripts&#8221;</a>.</li></ol>
















<h4>
<a name="pgfId-1014648"></a>Controlling What Is Included in Scripts</h4>

<p>
<a name="pgfId-1014652"></a>You can use <code>.cdsenv</code> variables to alter the OCEAN script that is created when you choose <em>Session &#8211; Create Script</em> in the Virtuoso Analog Design Environment. One variable allows you to include default environment settings in a script, two other variables allow you to run procedures before and after a script is created.</p>

<h4><em>
<a name="pgfId-1014655"></a>Including Default Control Statements</em></h4>

<p>
<a name="pgfId-1014756"></a>To save every control statement, including default statements, in your OCEAN script, add the following line to your <code>.cdsenv</code> file.</p>

<pre class="webflare-courier-new codeContent">
<a name="pgfId-1014766"></a>asimenv.misc saveDefaultsToOCEAN boolean t</pre>

<p>
<a name="pgfId-1014768"></a>Setting <code>saveDefaultsToOCEAN</code> to <code>t</code> results in a complete dump of the current circuit design environment, defaults and all. Because the created OCEAN script contains all the settings, you might use this variable when you plan to archive a script, for example.</p>
<p>
<a name="pgfId-1014665"></a>If <code>saveDefaultsToOCEAN</code> is not set to <code>t</code>, the created OCEAN script contains only those items that you explicitly set to some value other than their default.</p>

<h4><em>
<a name="pgfId-1014668"></a>Running Functions Before or After Creating a Script</em></h4>

<p>
<a name="pgfId-1014833"></a>The information in this section describes how you can specify functions to be run before or after a script is created. You can use these functions, for example, to add information at the beginning or end of a script. To use this capability follow these steps.</p>
<ol><li>
<a name="pgfId-1014879"></a>Decide when you want the functions to run.<ul><li>
<a name="pgfId-1015101"></a>Add the following line to your <code>.cdsenv</code> file to run the function <span class="webflare-courier-new" style="white-space:pre"><em>preOceanFunc</em></span> before the OCEAN script is created.</li></ul><br /><pre class="webflare-pre-block webflare-courier-new" id="#id1014880">
<a name="pgfId-1014880"></a>    asimenv.misc preSaveOceanScript string &quot;<code><em>preOceanFunc</em></code>&quot;</pre><ul><li>
<a name="pgfId-1014909"></a>Add the following line to your <code>.cdsenv</code> file to run the function <span class="webflare-courier-new" style="white-space:pre"><em>postOceanFunc</em></span> after the OCEAN script is created.</li></ul><br /><pre class="webflare-pre-block webflare-courier-new" id="#id1014910">
<a name="pgfId-1014910"></a>    asimenv.misc postSaveOceanScript string &quot;<code><em>postOceanFunc</em></code>&quot;</pre></li><li>
<a name="pgfId-1014872"></a>Use the following syntax to specify the functions.<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1014849">
<a name="pgfId-1014849"></a><code><em>preOceanFunc</em></code>( <code><em>session</em></code> fp )
<code><em>postOceanFunc</em></code>( <code><em>session</em></code> fp )</pre>
<a name="pgfId-1014852"></a>In this syntax, <span class="webflare-courier-new" style="white-space:pre"><em>session</em></span> is the OASIS session and <code>fp</code> is the file pointer to the OCEAN script file. For guidance on determining the <span class="webflare-courier-new" style="white-space:pre"><em>session</em></span> to use, see the <em><a actuate="user" class="URL" href="../skartistref/skartistrefTOC.html#firstpage" show="replace" xml:link="simple">VirtuosoAnalog Design Environment L SKILL Language Reference</a></em>.</li><li>
<a name="pgfId-1015068"></a>Load the functions in your <code>.cdsinit</code> file.<br />
<a name="pgfId-1014693"></a>For example, you might add the following lines to your <code>.cdsenv</code> file.<pre class="webflare-pre-block webflare-courier-new" id="#id1014695">
<a name="pgfId-1014695"></a>asimenv.misc  preSaveOceanScript string &quot;MYfirstProc&quot;
asimenv.misc  postSaveOceanScript string &quot;MYlastProc&quot;</pre>
<a name="pgfId-1014698"></a>The functions <code>MYfirstProc</code> and <code>MYlastProc</code> might be defined like this.<pre class="webflare-pre-block webflare-courier-new" id="#id1014700">
<a name="pgfId-1014700"></a>procedure( MYfirstProc( session fp)
  fprintf(fp &quot;; This will be the first line in the ocean script.\n&quot;)
)</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1014704">
<a name="pgfId-1014704"></a>procedure( MYlastProc( session fp)
  fprintf(fp &quot;; This will be the last line in the ocean script.\n&quot;)
)</pre>
<a name="pgfId-1014710"></a>If these procedures are defined in a file called <code>myOceanProcs.il</code>, you can load them by adding to your <code>.cdsinit</code> file a command like the following.<pre class="webflare-pre-block webflare-courier-new" id="#id1015111">
<a name="pgfId-1015111"></a>load &quot;myOceanProcs.il&quot;</pre>
<a name="pgfId-1015110"></a>When you choose <em>Session &#8211; Create Script</em>, first the <code>preSaveOceanScript</code> procedure is called, then the OCEAN script is created, then the <code>postSaveOceanScript</code> procedure is called.</li></ol>























<h3>
<a name="pgfId-1013379"></a><a name="marker-1014443"></a><a name="24794"></a><a name="18576"></a>Loading OCEAN Scripts</h3>

<p>
<a name="pgfId-1013589"></a>You can load OCEAN scripts from OCEAN (in UNIX) or from the CIW.</p>

<h4>
<a name="pgfId-1013380"></a><a name="marker-1014445"></a>From a UNIX Shell </h4>

<p>
<a name="pgfId-1013381"></a>To load an OCEAN script, </p>
<ol><li>
<a name="pgfId-1013382"></a>Type the following command to start OCEAN:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1013383">
<a name="pgfId-1013383"></a>ocean</pre>
<a name="pgfId-1013384"></a>The OCEAN prompt appears.</li><li>
<a name="pgfId-1013385"></a>Use the SKILL <code>load</code> command to load your script:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1013386">
<a name="pgfId-1013386"></a>load( &quot;<code><em>script_name</em></code>.ocn&quot; )</pre>
<a name="pgfId-1013387"></a>Messages about the progress of your script appear.</li></ol>








<h4>
<a name="pgfId-1013388"></a><a name="marker-1014447"></a>From the CIW</h4>

<p>
<a name="pgfId-1013389"></a>To load an OCEAN script, </p>
<ol><li>
<a name="pgfId-1013390"></a>Start the Virtuoso software<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1013391">
<a name="pgfId-1013391"></a>virtuoso &amp;</pre>
<a name="pgfId-1013392"></a>The CIW appears.</li><li>
<a name="pgfId-1013393"></a>In the text entry field, use the SKILL <code>load</code> command to load your script:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1013394">
<a name="pgfId-1013394"></a>load( &quot;<code><em>script_name</em></code>.ocn&quot; )</pre>
<a name="pgfId-1013395"></a>Messages about the progress of your script appear in the CIW.</li></ol>








<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Selecting Results

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h2>
<a name="pgfId-1015955"></a><a name="37513"></a>Selecting Results</h2>

<p>
<a name="pgfId-1015976"></a>You may use OCEAN to run several simulations on the same design and save the results in different result directories. You can then use Analog Design Environment XL to select the results and work with features like annotation etc.</p>

<h3>
<a name="pgfId-1015956"></a>Selecting Results Run from Worst Case Scripts for Cross-Probing or Back Annotating Operating Points</h3>

<p>
<a name="pgfId-1015957"></a>Assume that you have been using Ocean to create separate data directories for worst case parameter sweeps. Also, assume that the new directories you make are accessed with the <code>resultsDir()</code> ocean command in your Ocean script and that these directories are in the standard location where <code>psf </code>data is stored in the Analog Design Environment.&#160;&#160;</p>
<p>
<a name="pgfId-1016047"></a>In the Analog Design Environment, <code>psf</code> data is stored in:</p>

<pre class="webflare-courier-new codeContent">
<a name="pgfId-1015675"></a><code>&lt;runDir&gt;/simulation/&lt;testSchemName&gt;/spectre/schematic/psf</code></pre>

<p>
<a name="pgfId-1015677"></a>where,</p>
<p>
<a name="pgfId-1025062"></a></p>
<table class="webflareTable" id="#id1025063">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-1025065"></a><code>runDir</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-1025067"></a>is the directory where you invoke <code>virtuoso&amp;</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-1025069"></a><code>testSchemName</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-1025071"></a>is your test schematic</p>
</td>
</tr>
</tbody></table>
<p>
<a name="pgfId-1015682"></a>This implies that your script should store the new directories under the <code>schematic</code> directory. Therefore, if c1, c2 and c3 are the worst case directories, they are located at:</p>

<pre class="webflare-courier-new codeContent">
<a name="pgfId-1015686"></a>&lt;runDir&gt;/simulation/&lt;testSchemName&gt;/spectre/schematic/c1</pre>
<pre class="webflare-courier-new codeContent">
<a name="pgfId-1015687"></a>&lt;runDir&gt;/simulation/&lt;testSchemName&gt;/spectre/schematic/c2</pre>
<pre class="webflare-courier-new codeContent">
<a name="pgfId-1015688"></a>&lt;runDir&gt;/simulation/&lt;testSchemName&gt;/spectre/schematic/c3</pre>

<ol><li>
<a name="pgfId-1015690"></a>Choose <em>Results &#8211; Select</em></li><li>
<a name="pgfId-1015691"></a>The <em>Select Results</em> form opens. Click <em>Browse</em>.  A Unix Browser form appears.</li><li>
<a name="pgfId-1015696"></a>Navigate to the directory that contains your Ocean generated directories c1, c2, and c3.</li><li>
<a name="pgfId-1015699"></a>Click <em>OK</em> on the Unix Browser form. Now the <em>Select Results</em> Form should show c1, c2 and c3. </li><li>
<a name="pgfId-1015703"></a>Double-click c1, c2 or c3. Alternatively, you can also single-click c1, c2 or c3 and then choose <em>Update Results</em> and click <em>OK</em>. At this point the data is selected though there is no confirmation in the CIW. Now, you should be able to use <em>Results &#8211; Direct Plot</em> , <em>Results &#8211; Annotate</em> etc to see the results of that particular directory.</li></ol>





<h3>
<a name="pgfId-1015721"></a>Selecting Results Run from Spectre Standalone</h3>

<p>
<a name="pgfId-1016032"></a>After running spectre standalone, you can select results using the <em>Results Browser</em> and use calculator to plot the results. However, this does not allow you to use ADE features like <em>Results &#8211; Direct Plot</em>  or <em>Results &#8211; Annotate</em>.</p>
<p>
<a name="pgfId-1015729"></a>Consider that your data is in </p>

<pre class="webflare-courier-new codeContent">
<a name="pgfId-1015730"></a>&lt;runDir&gt;/simulation/&lt;testSchemName&gt;/spectre/schematic/psf.</pre>

<p>
<a name="pgfId-1015732"></a>where,</p>
<table class="webflareTable" id="#id1025203">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-1025205"></a><code>runDir</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-1025207"></a>is the directory where you invoke <code>virtuoso&amp;</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-1025209"></a><code>testSchemName</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a name="pgfId-1025211"></a>is your test schematic</p>
</td>
</tr>
</tbody></table>
<ol><li>
<a name="pgfId-1015738"></a>Choose <em>Tools &#8211; Results Browser</em>. A pop up box appears. Enter your design path up to the spectre directory.</li><li>
<a name="pgfId-1015743"></a>Click <em>OK</em>, and the browser comes up.</li><li>
<a name="pgfId-1015745"></a>Click the schematic directory. The psf directory should appear.</li><li>
<a name="pgfId-1015747"></a>Click the directory with the data in it, psf. When you click the &#8217;psf&#8217; directory you should see the tree expand with different results from your spectre stand alone simulation, e.g. tran.tran etc.</li><li>
<a name="pgfId-1015751"></a>Place the mouse pointer over the &#8217;psf&#8217; node in the tree and press down the middle mouse key and scroll down to &quot;create ROF&quot;. You should now see the psf directory change, and an intermediate node comes up --Run1-- betweenpsf/ and the results. </li><li>
<a name="pgfId-1015757"></a>Place the middle mouse pointer over the Run1 node, scroll down and select &quot;Select Results&quot;.  <br /><div class="webflare-information-macro webflare-macro-note">
<a name="pgfId-1016416"></a>Even though there is a confirmation message in the CIW that the select was success, Analog Design Environment is not synced up to allow cross-probing and backannotation of operating points. </div></li><li>
<a name="pgfId-1016422"></a>You may now use <em>Tools &#8211; Calculator </em>to select objects from the schematic. You can then choose &#8217;plot&#8217; from the calculator, or different calculator operations. <br /><div class="webflare-information-macro webflare-macro-note">
<a name="pgfId-1015778"></a>You CAN use Tools<em> &#8211; </em>Calculator but you CAN NOT use <em>Results &#8211; Direct Plot</em> or<em> Results &#8211; Annotate</em> etc.</div></li></ol>









<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=Running Multiple Simulators

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h2>
<a name="pgfId-1013875"></a><a name="marker-1014449"></a><a name="42163"></a>Running Multiple Simulators</h2>

<p>
<a name="pgfId-1013876"></a>There are times when you might want to run more than one simulator. You might be benchmarking simulators or comparing results. In OCEAN, you can only use one simulator per OCEAN session. If you change simulators, you must start a new OCEAN session. This is because some OCEAN command arguments are simulator specific, and therefore change when the simulator changes. For example, the arguments to the <code>option</code> command are simulator specific. (No two simulators have the exact same options.) The analyses are typically simulator specific also.</p>

<!-- [TOPIC_END] -->
  <!--  [TOPIC_START_OPEN]type=cmdref

[TOPIC_START_ATTR]text=OCEAN Tips

[TOPIC_START_ATTR]description=

[TOPIC_START_ATTR]keyword=

[TOPIC_START_CLOSE] -->




<h2>
<a name="pgfId-1013612"></a><a name="marker-1014451"></a><a name="25332"></a>OCEAN Tips<a name="21605"></a></h2>

<p>
<a name="pgfId-1014257"></a>The information in this section can help you solve problems that you encounter while using OCEAN.</p>
<ul><li>
<a name="pgfId-1014621"></a>While working in OCEAN, you might get the following SKILL error message:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1014622">
<a name="pgfId-1014622"></a>*Error* eval: unbound variable - nameOfVariable</pre>
<a name="pgfId-1014623"></a>In this case, you need to see if you have an undeclared variable or if you are missing a single quotation mark (&#39;) or a quotation mark (&quot;) for one of your arguments. For example, the following command returns an error message stating that <code>fromVal</code> is an unbound variable because the variable has not been declared:<pre class="webflare-pre-block webflare-courier-new" id="#id1013617">
<a name="pgfId-1013617"></a>analysis(&#39;tran ?from fromVal)</pre>
<a name="pgfId-1013618"></a>However, the following pair of statements work correctly because <code>fromVal</code> has a value (is bound).<pre class="webflare-pre-block webflare-courier-new" id="#id1013619">
<a name="pgfId-1013619"></a>fromVal=0</pre><pre class="webflare-pre-block webflare-courier-new" id="#id1013620">
<a name="pgfId-1013620"></a>analysis(&#39;tran ?from fromVal)</pre></li><li>
<a name="pgfId-1013621"></a>If you get an error in an OCEAN session, you are automatically put into the SKILL debugger. In this case, you see a prompt similar to this:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1013622">
<a name="pgfId-1013622"></a>ocean-Debug 2&gt;</pre>
<a name="pgfId-1013623"></a>You can continue working. However, if you would like to get out of the debugger, you can type<pre class="webflare-pre-block webflare-courier-new" id="#id1013624">
<a name="pgfId-1013624"></a>debugQuit()</pre>
<a name="pgfId-1013625"></a>Now you are back to the normal prompt: <pre class="webflare-pre-block webflare-courier-new" id="#id1014226">
<a name="pgfId-1014226"></a><code>ocean&gt;</code></pre></li><li>
<a name="pgfId-1014319"></a>If it appears that OCEAN does not accept your input, or OCEAN appears to hang, then you may have forgotten to enter a closing quotation mark. Type <code>&quot;]</code>   to close all strings. For more information, and some examples, see <a href="chap1.html#14469">&#8220;Recovering from an Omitted Quotation Mark&#8221;</a>.</li><li>
<a name="pgfId-1014416"></a>In SKILL, the following formats are equivalent: <code>(one two)</code> and <code>one(two)</code>. Results might be returned in either format. For example, OCEAN might return <code>ac(tran)</code> or <code>(ac tran)</code>, but the two forms are equivalent.</li><li>
<a name="pgfId-1014530"></a>You can check your script for simple syntax errors by running SKILL lint. For example, you might use a command like<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1014549">
<a name="pgfId-1014549"></a>sklint -file <code><em>myScript</em></code>.ocn</pre>
<a name="pgfId-1014535"></a>From within OCEAN, you can run SKILL lint by typing the following at the OCEAN prompt:<pre class="webflare-pre-block webflare-courier-new" id="#id1014584">
<a name="pgfId-1014584"></a>sklint(?file &quot;<code><em>yourOceanScript</em></code>.ocn&quot;)</pre>
<a name="pgfId-1014583"></a>Running SKILL lint helps catch basic errors, such as unmatched parentheses and strings that are not closed.</li></ul>

























<p>
<a name="pgfId-1017673"></a></p>

<!-- [TOPIC_END] -->

<p>
<a name="pgfId-1018355"></a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="chap1.html" id="prev" title="Introduction to OCEAN">Introduction to OCEAN</a></em></b><b><em><a href="chap3.html" id="nex" title="Introduction to SKILL">Introduction to SKILL</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>