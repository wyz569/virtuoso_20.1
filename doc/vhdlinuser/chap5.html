
<html><head><title>Importing a Complex VHDL Design (RISC Processor Unit)</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="rgirdhar" />
<meta name="CreateDate" content="2020-08-20" />
<meta name="CreateTime" content="1597946571" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes VHDL In, VHDL In forms and importing a VHDL design." />
<meta name="DocTitle" content="VHDL In for Virtuoso Design Environment User Guide and Reference" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Importing a Complex VHDL Design (RISC Processor Unit)" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="vhdlinuser" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-08-20" />
<meta name="ModifiedTime" content="1597946571" />
<meta name="NextFile" content="chap6.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom Environment  Layout" />
<meta name="PrevFile" content="chap4.html" />
<meta name="c_product" content="Virtuoso Schematic Editor" />
<meta name="Product" content="Virtuoso Schematic Editor" />
<meta name="ProductFamily" content="Virtuoso Schematic Editor" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="VHDL In for Virtuoso Design Environment User Guide and Reference -- Importing a Complex VHDL Design (RISC Processor Unit)" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="vhdlinuserICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="vhdlinuserTOC.html">Contents</a></li><li><a class="prev" href="chap4.html" title="Importing a Simple VHDL Design">Importing a Simple VHDL Design</a></li><li style="float: right;"><a class="viewPrint" href="vhdlinuser.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="chap6.html" title="Conversion Issues">Conversion Issues</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>VHDL In for Virtuoso Design Environment User Guide and Reference<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>5
<a id="pgfId-1014262"></a></h1>
<h1>
<a id="pgfId-1014264"></a><hr />
<a id="33428"></a>Importing a Complex VHDL Design (RISC Processor Unit)<hr />
</h1>

<p>
<a id="pgfId-1014265"></a>This chapter discusses the following:</p>
<ul><li>
<a id="pgfId-1014269"></a><a href="chap5.html#25748">Overview</a></li><li>
<a id="pgfId-1014273"></a><a href="chap5.html#25926">RPU Design Structure</a></li><li>
<a id="pgfId-1014277"></a><a href="chap5.html#19967">Setting Up the VHDL Import Form</a></li><li>
<a id="pgfId-1014281"></a><a href="chap5.html#12062">Specifying Schematic Generation Options</a></li><li>
<a id="pgfId-1014285"></a><a href="chap5.html#22273">Creating a Target Library</a></li><li>
<a id="pgfId-1014289"></a><a href="chap5.html#36967">Viewing Error and Log Files</a></li><li>
<a id="pgfId-1014293"></a><a href="chap5.html#27271">Viewing the Results</a></li></ul>







<h2>
<a id="pgfId-1014295"></a><a id="25748"></a>Overview</h2>

<p>
<a id="pgfId-1014296"></a>This chapter describes how you can import a larger, more complex VHDL design. This example uses the design of an <h-hot><a href="glossary.html#RPU">RPU</a></h-hot> (a Reduced Instruction Set Computer (<h-hot><a href="glossary.html#RISC">RISC</a></h-hot><a id="marker-1014298"></a><a id="marker-1014299"></a>) Processor Unit). The more complex design of the RISC processor unit (RPU) raises some issues that did not come up with the simple adder design. As part of the process, you use the options under the <em>Schematic Generation Options</em> tab to adjust the appearance of the final schematic.<a id="marker-1014301"></a></p>
<p>
<a id="pgfId-1014302"></a>Before you begin this example, use the Library Manager to modify your <code>cds.lib</code> file to include the five minimum required libraries, <code>basic</code>, <code>sample</code>, <code>US_8ths</code><em>, </em><code>std</code><em>, </em>and<em> </em><code>ieee.</code> The process for referencing these libraries is described in <a href="chap2.html#Getting Started with VHDL In">Chapter 2, &#8220;Getting Started with VHDL In.&#8221;</a></p>

<h2>
<a id="pgfId-1014308"></a><a id="marker-1014306"></a><a id="25926"></a>RPU Design Structure </h2>

<p>
<a id="pgfId-1017267"></a>This sample design is included in the Cadence software <h-hot><a href="glossary.html#hierarchy">hierarchy</a></h-hot>, at <em>&lt;dfII_install_dir&gt;</em><code>/tools/dfII/samples/vhdlin/Test3</code>, where <em>&lt;dfII_install_dir&gt; </em>is dfII installation directory. Copy this design directory into your own account. In the following example, the RPU design starts in the <code>~/vhdlin_examples/rpu_design</code> directory.</p>
<p>
<a id="pgfId-1014312"></a><a id="Edit SimInfo"></a>The RPU design consists of I/O connection pads and the main design.</p>
<p>
<a id="pgfId-1014313"></a>The I/O pads include</p>
<ul><li>
<a id="pgfId-1014314"></a>ipad_1 (input pad)</li><li>
<a id="pgfId-1014315"></a>opad_1 (output pad)</li><li>
<a id="pgfId-1014316"></a>iopad_1 (bidirectional pad)</li></ul>


<p>
<a id="pgfId-1014317"></a>The design includes 11 unique functional elements:</p>
<ul><li>
<a id="pgfId-1014318"></a>reg16 (16-bit register)</li><li>
<a id="pgfId-1014319"></a>reg16c (reg16 with carry)</li><li>
<a id="pgfId-1014320"></a>cntr16 (16-bit counter)</li><li>
<a id="pgfId-1014321"></a>mux2 (2:1 multiplexer)</li><li>
<a id="pgfId-1014322"></a>dff (D flip-flop)</li><li>
<a id="pgfId-1014323"></a>alu (Arithmetic Logic Unit)</li><li>
<a id="pgfId-1014324"></a>clockgen (clock source)</li><li>
<a id="pgfId-1014325"></a>reg4c (4-bit register with carry)</li><li>
<a id="pgfId-1014326"></a>instructionDecoder (an array of logic)</li><li>
<a id="pgfId-1014327"></a>regArray (local data storage)</li><li>
<a id="pgfId-1014328"></a>mux4 (4:1 multiplexer)</li></ul>











<h2>
<a id="pgfId-1014330"></a><a id="19967"></a>Setting Up the VHDL Import Form</h2>

<p>
<a id="pgfId-1017417"></a>Although you can run VHDL In from VHDL Tool Box, this example starts from the <h-hot><a href="glossary.html#CIW">CIW</a></h-hot>. The example design is located in <code>/usr1/vhdlin/example</code>. Before you start, copy the design example from the <em>&lt;dfII_install_dir&gt;</em><code>/tools/dfII/samples/vhdlin</code> directory and keep it in your own account.</p>

<ol><li>
<a id="pgfId-1014339"></a>In the CIW, select <em>File &#8211; Import &#8211; VHDL</em><br />
<a id="pgfId-1014340"></a>The VHDL Import form opens.</li><li>
<a id="pgfId-1014366"></a>Double-click entries in the Files List Box until the design directory is displayed.<br />
<a id="pgfId-1014367"></a>To move the display up one directory, click ../. To display the contents of a directory, click the directory name.</li><li>
<a id="pgfId-1014368"></a>In the <em>Target Library Name</em> field, enter the name of the target library <code>(</code>rpulib).</li><li>
<a id="pgfId-1014369"></a>Set the<em> Import Structural Architectures As</em> cyclic field to<em> schematic</em>.<br />
<a id="pgfId-1014370"></a>You can leave all other options at their default setting.</li><li>
<a id="pgfId-1014371"></a>To add the design&#8217;s entity and architecture files to the Import Files List Box, double-click each file name in the Files List Box. <br />
<a id="pgfId-1014373"></a>In this example, the entity and architecture for each <a href="glossary.html#component">component</a> are contained in a single <code>*.vhd</code> file.<br />
<a id="pgfId-1019101"></a>When you add files to be imported, keep the following items in mind. <ul><li>
<a id="pgfId-1019104"></a>The <a id="marker-1019102"></a><a id="marker-1019103"></a>VHDL Import form shows only the <code>.vhd</code> files in each directory. If you are using other tools or techniques, some of your directories might include C model files and Verilog files. <a id="marker-1019105"></a><a id="marker-1019106"></a><br />
<a id="pgfId-1014380"></a>Even though these files end in <code>.vhd</code>, do not import them. VHDL In processes only VHDL files.</li><li>
<a id="pgfId-1014381"></a>As you add more and more design files from the design subdirectories, you might discover that different design elements use the <a id="marker-1014382"></a>same file names. <br />
<a id="pgfId-1014383"></a>For example, you might call all the architecture files <code>data_flow.vhd,</code> and all the entity files <code>entity.vhd,</code> and put both sets of files under directories named after the component. The VHDL Import form keeps track of which directory each file comes from and can tell the different files apart.</li><li>
<a id="pgfId-1014384"></a>If you cannot remember if you have added a file, select it again, because VHDL In ignores multiple requests to add the same file.</li></ul><br />
<a id="pgfId-1014431"></a>The following figure illustrates and summarizes these three considerations.<br />
<a id="pgfId-1015115"></a><div class="webflare-div-image">
<img src="images/threeConsiderations.gif" /></div></li></ol>























<h2>
<a id="pgfId-1014435"></a><a id="marker-1014432"></a><a id="marker-1014433"></a><a id="12062"></a>Specifying Schematic Generation Options</h2>

<p>
<a id="pgfId-1014436"></a>Now you are ready to set the schematic generation options. The three-element adder design is so simple that a schematic generated with just the default settings still looks reasonable. The RPU design, however, is larger and more difficult to place properly.</p>
<p>
<a id="pgfId-1014437"></a>If you do not set the schematic generation options, VHDL In draws the entire design onto one schematic sheet of infinite size.</p>

<ol><li>
<a id="pgfId-1014438"></a>O<a id="marker-1019123"></a>n the VHDL Import form, click the <em>Schematic Generation Options</em> tab.</li><li>
<a id="pgfId-1014443"></a>Set <a id="marker-1014441"></a><a id="marker-1014442"></a><em>Sheet Border Size</em> to <em>C</em>.</li><li>
<a id="pgfId-1014447"></a>In <a id="marker-1014444"></a><a id="marker-1014445"></a><a id="marker-1014446"></a><em>Maximum Number of Rows</em>, enter <em>3</em>.</li><li>
<a id="pgfId-1014451"></a>In <a id="marker-1014448"></a><a id="marker-1014449"></a><a id="marker-1014450"></a><em>Maximum Number of Columns</em>, enter <em>6</em>.</li><li>
<a id="pgfId-1014453"></a>Set the <a id="marker-1014452"></a><em>Component Density</em> slider to <em>15</em>.<br />
<a id="pgfId-1014454"></a>The last three options specify a reasonable number of large components that can be placed comfortably on a C-size schematic.</li><li>
<a id="pgfId-1014458"></a>Deselect <a id="marker-1014455"></a><a id="marker-1014456"></a><a id="marker-1014457"></a><em>Generate Square Schematics</em>.<br />
<a id="pgfId-1014459"></a>The standard Cadence schematic sheet frame is rectangular, so turning off this option improves the use of schematic sheet space<br />
<a id="pgfId-1015280"></a>.<div class="webflare-div-image">
<img src="images/importoptions_setOptions.gif" /></div></li><li>
<a id="pgfId-1014483"></a>Click <em>OK</em>.<br />
<a id="pgfId-1014484"></a>The form closes.</li><li>
<a id="pgfId-1014485"></a>In the VHDL Import form, click <em>OK </em>or <em>Apply</em>.</li></ol>












<h2>
<a id="pgfId-1014488"></a><a id="22273"></a>Creating a Target Library<a id="marker-1014487"></a></h2>

<p>
<a id="pgfId-1015305"></a>Because you specified a target library name in the <h-hot><a href="chap3.html#vhdlImportForm">VHDL Import form </a></h-hot>that does not exist <code>(</code>rpulib), a dialog box opens, asking you if you want to create the new library. When you click <code>Yes</code> in the dialog box, the New Library form opens.</p>
<p>
<a id="pgfId-1018650"></a></p>

<div class="webflare-div-image">
<img src="images/newlib_form.gif" /></div>
<ol><li>
<a id="pgfId-1015310"></a>Enter the library name and directory.</li><li>
<a id="pgfId-1014496"></a>Select <em>Do not need process information</em>.</li><li>
<a id="pgfId-1014497"></a>Click <em>OK</em>.</li></ol>



<p>
<a id="pgfId-1014498"></a>A message appears in the CIW display area after the new library is created:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014499"></a>Created library &quot;rpulib&quot; as &quot;.../vhdlin_examples/rpu_design/rpulib&quot;</pre>
<h2>
<a id="pgfId-1014505"></a><a id="36967"></a>Viewing Error and Log Files<a id="marker-1014503"></a><a id="marker-1014504"></a></h2>

<p>
<a id="pgfId-1014506"></a>A message in the CIW display area tells you that the VHDL Import process has started. When it finishes, you are presented with a dialog box. If the import process is successful, the box asks if you want to view the log file. If the import process fails, the box asks you if you want to view the error message file. For examples of these and other dialog boxes, refer to <h-hot>Chapter 7, &#8220;Error Messages.&#8221;</h-hot></p>
<p>
<a id="pgfId-1014508"></a>If you receive an error message, go back to the VHDL Import form. After fixing the problems indicated, select a new list of design files to import and run VHDL In again.</p>
<p>
<a id="pgfId-1014510"></a>The following figure is the <a id="marker-1014509"></a>VHDL Tool Box status window display of the beginning of the <a id="marker-1014511"></a>log file for this VHDL import example. The window refers to the VHDL Tool Box even when you start the software from the CIW. Select <em>File &#8211; Close</em> to close the log window.</p>

<h2>
<a id="pgfId-1014521"></a><a id="27271"></a>Viewing the Results<a id="marker-1014520"></a></h2>

<p>
<a id="pgfId-1014522"></a>Once the import process has finished successfully, you can examine the target library to check the result.</p>

<h3>
<a id="pgfId-1014526"></a>Accessing the Symbol Editor<a id="marker-1014523"></a><a id="marker-1014524"></a><a id="marker-1014525"></a></h3>

<p>
<a id="pgfId-1014528"></a>You can view the symbol view of a <h-hot><a href="glossary.html#cell">cell</a></h-hot> in the design you just imported. In this procedure you view the symbol for the<em> alu</em> in the imported design.</p>

<ol><li>
<a id="pgfId-1014529"></a>In the CIW, choose <em>Tools &#8211; Library Manager</em>.<br />
<a id="pgfId-1014546"></a>The <a id="marker-1014530"></a>Library Manager window opens.<br />
<a id="pgfId-1015315"></a>.<div class="webflare-div-image">
<img src="images/libform_page76_mani.gif" /></div></li><li>
<a id="pgfId-1014547"></a>In the Library column of the Library Manager window, enter<em> rpulib</em> in the<em> Library</em> text field and press<em> Return</em> or click the <em>rpulib </em>library.<br />
<a id="pgfId-1014548"></a>The Cell column displays all the cells of the RPU design elements.</li><li>
<a id="pgfId-1014549"></a>To display the cellviews of the alu design, click the <em>alu </em>cell name.<br />
<a id="pgfId-1014551"></a>The View column displays three cellview names: <a id="marker-1014550"></a><em>dataflow</em>, <em>entity</em>, and <em>symbol</em>.</li><li>
<a id="pgfId-1014553"></a>Double-click the view name <em>symbol</em><a id="marker-1014552"></a>.<br />
<a id="pgfId-1014558"></a>The Symbol Editor opens, displaying the <a id="marker-1014554"></a>symbol for <em>alu.</em><br />
<a id="pgfId-1015320"></a><div class="webflare-div-image">
<img src="images/chap5_alu_mani.gif" /></div>
<a id="pgfId-1014560"></a>Each element in this design now has its own <a href="glossary.html#OA">OA</a> symbol. If you do not like how the symbols look, you can edit them.</li><li>
<a id="pgfId-1014561"></a>To close the Symbol Editor, select <em>File &#8211; Close</em>.</li></ol>













<h3>
<a id="pgfId-1014563"></a>Viewing the Schematic<a id="marker-1014562"></a></h3>

<p>
<a id="pgfId-1014564"></a>In this procedure, you examine the schematic views that VHDL In has produced for <em>rpustruc</em> and<em> rputop</em> designs. <em>rpustruc</em> is just the RISC processor design itself. <em>rputop</em> includes <em>rpustruc</em> surrounded by I/O pads.</p>
<p>
<a id="pgfId-1014565"></a>VHDL In converts all capital letters in the cellview names to lowercase in the schematic. <a id="marker-1014566"></a></p>

<ol><li>
<a id="pgfId-1014567"></a>In the CIW, select <em>Tools &#8211; Library Manager</em>.<br />
<a id="pgfId-1014571"></a>The Library Manager window opens.</li><li>
<a id="pgfId-1014572"></a>In the Library list box, click the <em>rpulib</em> library name.<br />
<a id="pgfId-1014573"></a>The Cell list box displays nine cells for the <em>rpulib library</em>.</li><li>
<a id="pgfId-1014574"></a>In the Cell list box, click the <em>rputop</em> cell.<br />
<a id="pgfId-1014576"></a>The View list box displays three cellview names for the RPU design: <em>entity</em><a id="marker-1014575"></a>, <em>schematic</em>, and <em>symbol.</em> </li><li>
<a id="pgfId-1014577"></a>In the View list box, double-click the <em>schematic</em> cellview of the <em>rputop</em> cell to view the schematic of the cell.<br />
<a id="pgfId-1014579"></a>The <a id="marker-1016008"></a>Virtuoso Schematic Editor L opens, displaying the schematic of <em>rputop</em>.<br />
<a id="pgfId-1015322"></a><div class="webflare-div-image">
<img src="images/chap5_rputop_mani.gif" /></div>
<a id="pgfId-1014585"></a><a id="marker-1014583"></a>VHDL In, following the criteria set up under the <em>Schematic Generation Options</em><a id="marker-1014584"></a> tab, has divided the top-level design into four sheets. Sheets 1 through 3 include only I/O pads.<a id="marker-1014586"></a></li><li>
<a id="pgfId-1014589"></a>In the schematic window, select <em>Sheet &#8211; Go To</em><a id="marker-1014587"></a><a id="marker-1014588"></a>, and select Sheet 3.<br />
<a id="pgfId-1017025"></a><div class="webflare-div-image">
<img src="images/goToSheet.gif" /></div>
<a id="pgfId-1014590"></a>Schematic sheet 3 for rputop is shown below: <br />
<a id="pgfId-1015957"></a>.<div class="webflare-div-image">
<img src="images/chap5_rputop3_mani.gif" /></div></li><li>
<a id="pgfId-1015961"></a>From the Library Manager double-click the <em>schematic</em> view for <em>rpustruc@sheet004</em>. This sheet displays <em>rpustruc</em> and some I/O pins.<br />
<a id="pgfId-1017091"></a><div class="webflare-div-image">
<img src="images/chap5_rpustruc4.gif" /></div></li><li>
<a id="pgfId-1018988"></a>In the schematic window for the <em>rpustruc</em> index schematic, select <em>Sheet 5</em>.</li><li>
<a id="pgfId-1018991"></a>Click <em>Edit &#8211; Hierarchy &#8211; Descend Edit</em><a id="marker-1018989"></a><a id="marker-1018990"></a>, and click OK from the Descend form.<br />
<a id="pgfId-1018995"></a><div class="webflare-div-image">
<img src="images/descend.gif" /></div>
<a id="pgfId-1014599"></a>The Virtuoso Schematic Editor L opens Sheet 6 of <em>rpustruc</em>.</li></ol>

























<p>
<a id="pgfId-1014600"></a>The following figure shows how VHDL In has positioned a portion of the RPU design in a <a id="marker-1014601"></a>C-size schematic frame and entered the<a id="marker-1014602"></a> design name in the information section.</p>

<p>
<a id="pgfId-1017151"></a></p>
<div class="webflare-div-image">
<img src="images/chap5_rpustruc5_mani.gif" /></div>

<p>
<a id="pgfId-1015335"></a>To see how VHDL In has <a id="marker-1015333"></a><a id="marker-1015334"></a>routed nets and placed labels, press <em>z</em> to zoom in on one section of the schematic.</p>

<p>
<a id="pgfId-1015360"></a></p>
<div class="webflare-div-image">
<img src="images/chap5_rpustruc5zoom_mani.gif" /></div>
<p class="webflare-indent1">
<a id="pgfId-1015357"></a><a id="marker-1015356"></a>If you are dissatisfied with the decisions VHDL In has made, you can rerun VHDL In with different schematic generation options, or you can use the schematic editor to make changes to the schematic.</p>
<p class="webflare-indent1">
<a id="pgfId-1014636"></a>If you descend further into one of the design elements, you can view the entity and dataflow (<a href="glossary.html#architecture">architecture</a>) text files.</p>
<ul><li>
<a id="pgfId-1014638"></a>To exit the design, select <em>File &#8211; Close</em>.</li></ul>
<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="chap4.html" id="prev" title="Importing a Simple VHDL Design">Importing a Simple VHDL Design</a></em></b><b><em><a href="chap6.html" id="nex" title="Conversion Issues">Conversion Issues</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>