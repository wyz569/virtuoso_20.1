
<html><head><title>Placement Planning</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="spriya" />
<meta name="CreateDate" content="2020-09-14" />
<meta name="CreateTime" content="1600104079" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the functionality of the Virtuoso Layout Suite GXL custom digital placer in the current release." />
<meta name="DocTitle" content="Virtuoso Custom Digital Placer User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Placement Planning" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="vcphelp" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-09-14" />
<meta name="ModifiedTime" content="1600104079" />
<meta name="NextFile" content="chap4.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="chap2.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Custom Digital Placer User Guide -- Placement Planning" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="vcphelpICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="vcphelpTOC.html">Contents</a></li><li><a class="prev" href="chap2.html" title="Pin Planning">Pin Planning</a></li><li style="float: right;"><a class="viewPrint" href="vcphelp.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="chap4.html" title="Running the Placer">Running the Placer</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Custom Digital Placer User Guide<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>


<h1>3
<a id="pgfId-1032955"></a></h1>

<h1>
<a id="pgfId-1042672"></a><hr />
<a id="44786"></a>Placement Planning<hr />
</h1>

<p>
<a id="pgfId-1062147"></a>This chapter describes the Virtuoso&#174; Custom Digital Placer&#8217;s placement planning capability. Placement planning lets you define where in the layout view are the transistors and other design elements placed. </p>

<div class="webflare-information-macro webflare-macro-tip">
<a id="pgfId-1062142"></a>
Before you can perform placement planning, you or the library developer must first define the component types for placement. Component types define which components can be placed in which rows. For more information, see <a actuate="user" class="URL" href="../vxlhelp/chap4.html#DefiningComponentTypes" show="replace" xml:link="simple">Defining a Component Type</a> in the <em>Virtuoso Layout Suite XL User Guide</em>.</div>

<p>
<a id="pgfId-1064122"></a>This chapter covers the following topics:</p>
<ul><li>
<a id="pgfId-1064110"></a><a href="chap3.html#32566">Row Height Calculation</a></li><li>
<a id="pgfId-1064140"></a><a href="chap3.html#21318">Types of Rows</a></li><li>
<a id="pgfId-1064163"></a><a href="chap3.html#77442">Support for Flipped Row Creation</a></li><li>
<a id="pgfId-1064186"></a><a href="chap3.html#31550">Blockage Support</a></li><li>
<a id="pgfId-1064209"></a><a href="chap3.html#98919">Placement Restrictions - Designs with Only Devices</a></li><li>
<a id="pgfId-1064334"></a><a href="chap3.html#87705">Planning a Placement</a></li><li>
<a id="pgfId-1064255"></a><a href="chap3.html#68468">Planning Placement of Multi-Height Cells</a></li><li>
<a id="pgfId-1085373"></a><a href="chap3.html#20707">Planning Placement of Multi-Height Cells</a></li><li>
<a id="pgfId-1064277"></a><a href="chap3.html#44249">Planning Placement of Standard Cells</a></li><li>
<a id="pgfId-1064816"></a><a href="chap3.html#13982">Context-Aware Placement</a></li><li>
<a id="pgfId-1085351"></a><a href="chap3.html#79226">Assigning Edges for Boundary Cells</a></li></ul>











<h3>
<a id="pgfId-1062144"></a><a id="32566"></a>Row Height Calculation</h3>

<p>
<a id="pgfId-1061803"></a>The row height is determined based on the height of the components supported in the design:</p>
<ul><li>
<a id="pgfId-1061804"></a>For designs that contains only devices, the row heights are the height of the <em>N</em> and the <em>P</em> row.<br />
<a id="pgfId-1061805"></a>For <em>N</em> row placement, the row height is calculated based on the maximum height of the Nmos devices. For <em>P</em> row placement, the row height is calculated based on the maximum height of the Pmos devices.</li><li>
<a id="pgfId-1061806"></a>For designs that contains only standard cells, the row height is the height of the standard-cells.</li><li>
<a id="pgfId-1061807"></a>For designs that contains both devices and standard cells, the row height is the same as the height of the standard-cell unless the device height exceeds the standard-cell height. In this case, the placer issues a warning indicating that the device height is used as row height during placement planning.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1061808"></a>(ICADVM20.1 Only) If the design uses FinFET devices&#8212;devices of type <em>NFIN</em> or <em>PFIN</em>&#8212;the row height is based on the standard cell height even if the combined height of the <em>NFIN</em> and <em>PFIN</em> devices exceeds the standard cell height. In this case, the placer always creates the row height based on the standard cell height, but issues a warning to indicate the same, if the combined height of the devices exceeds the standard cell height.</div></li></ul>





<h3>
<a id="pgfId-1061809"></a><a id="21318"></a>Types of Rows</h3>

<p>
<a id="pgfId-1061810"></a>The custom digital placer handles two different types of rows:</p>
<ul><li>
<a id="pgfId-1061811"></a>An OpenAccess row (<code>oaRow</code>) is an OpenAccess database object recognized by all tools that support the OpenAccess database. It is represented in Virtuoso as a <code>figGroup</code> with type <code>row</code>.<br />
<a id="pgfId-1061812"></a>An OpenAccess row requires appropriate site definitions (<code>siteDefs</code>) to be present in the technology database for the design. Instances are placed at the fixed <code>siteDef</code> locations within the row.</li><li>
<a id="pgfId-1061813"></a>A custom placement area is an object generated by the placer if there are no appropriate <code>siteDefs</code> available with which to generate OpenAccess rows. It is represented as a <code>figGroup</code> with type <code>placeArea</code>.<br />
<a id="pgfId-1061814"></a>A custom placement area offers more flexibility in the placement of instances because the locations where devices can be placed are not fixed. However, the Virtuoso custom placement solution is guaranteed to recognize a custom placement area as a row object.<br />
<a id="pgfId-1061815"></a>For information on how to manually create rows and custom placement area, see <a actuate="user" class="URL" href="../vlehelp/chap6.html#creatingrows" show="replace" xml:link="simple">Creating Rows</a> and <a actuate="user" class="URL" href="../vlehelp/chap6.html#customplacementarea" show="replace" xml:link="simple">Creating a Custom Placement Area</a> in the Virtuoso Layout Suite documentation.</li></ul>






<h4><em>
<a id="pgfId-1061819"></a>Snapping the <a id="snappingCPA"></a>Custom Placement Area</em></h4>

<p>
<a id="pgfId-1061820"></a>When manually creating a custom placement area in the layout environment by using the <em>Create</em> &#8211; <em>PR Boundary </em>&#8211; <em>Custom Placement Area </em>command, the custom placement area is automatically snapped to an appropriate grid depending on the state of the <h-hot><a actuate="user" class="URL" href="../vxlhelp/appA.html#snapCpaToPlacementGrid" show="replace" xml:link="simple">snapCpaToPlacementGrid</a></h-hot> environment variable. For more information, see <h-hot><a actuate="user" class="URL" href="../vxlhelp/appD.html#CreateCPA" show="replace" xml:link="simple">Create Custom Placement Area</a></h-hot> in the Virtuoso Layout Suite XL User Guide.</p>

<h3>
<a id="pgfId-1061824"></a><a id="77442"></a>Support for Flipp<a id="flippedRow"></a>ed Row Creation</h3>

<p>
<a id="pgfId-1061825"></a>The Virtuoso Custom Digital Placer automatically flips the rows during creation, if required, to align them with the rail pattern specified. This implies that a horizontal (or vertical) row can have R0 or MX orientation, depending on the rail pattern associated with the row.</p>
<p>
<a id="pgfId-1061826"></a>When following a GP rail pattern, the horizontal (or vertical) row can be created with an R0 orientation, as displayed in the figure below, and allowed component orientations set to R0/MY.</p>


<p>
<a id="pgfId-1061830"></a></p>
<div class="webflare-div-image">
<img width="285" height="94" src="images/chap3-3.gif" /></div>

<p>
<a id="pgfId-1061831"></a>When following a PG rail pattern, a horizontal (or vertical) PG row can be created with a row orientation MX, as shown in the figure below, and allowed component orientations set to R0/MY.</p>



<p>
<a id="pgfId-1061835"></a></p>
<div class="webflare-div-image">
<img width="325" height="105" src="images/chap3-4.gif" /></div>

<p>
<a id="pgfId-1061836"></a>The figure below illustrates how the row orientations are now automatically changed to match the specified rail pattern, which is GPPG in this case.</p>



<p>
<a id="pgfId-1061842"></a></p>
<div class="webflare-div-image">
<img width="757" height="293" src="images/chap3-5.gif" /></div>
<h3>
<a id="pgfId-1061843"></a><a id="31550"></a>Blockage Support</h3>

<p>
<a id="pgfId-1061844"></a>The custom placer honors the following types of blockages:</p>
<ul><li>
<a id="pgfId-1070687"></a>Placement blockages: Components cannot be placed in the specified blockage area. The custom placer also honors partial placement blockages, which specify the density of the instances placed in the area covered by the blockages. <br />
<a id="pgfId-1070688"></a>The density of partial blockages should be greater than 0 and less than 100. For example if the density of a partial placement blockage is 60 percent, the placer tries to keep the density of the instances that are placed in that area to be around 60 percent of the global utilization.</li><li>
<a id="pgfId-1061846"></a>Routing blockages: Pins cannot be placed in the specified blockage area. Layers of the blockage are not considered. However, standard cells and devices can be placed in the blockage area.</li><li>
<a id="pgfId-1061847"></a>Pin blockages: Pins cannot be placed in the specified blockage area. Layers of the blockage are not considered. However, standard cells and devices can be placed in the blockage area.</li></ul>



<p>
<a id="pgfId-1061848"></a>All other types of blockages are not honored.</p>

<h3>
<a id="pgfId-1061850"></a><a id="98919"></a>Placement Restrictions - Designs with Only Devices </h3>

<p>
<a id="pgfId-1061851"></a>The following placement restrictions apply for designs that contain only devices:</p>
<ul><li>
<a id="pgfId-1061852"></a>All rows must be horizontal.</li><li>
<a id="pgfId-1061853"></a>All rows have the same width and span the entire placement region, although the row width can vary if the region is polygonal.</li><li>
<a id="pgfId-1061854"></a>Each row can contain either NMOS or PMOS devices, but not both and not any other types of components.</li><li>
<a id="pgfId-1061855"></a>There are equal numbers of NMOS and PMOS rows.</li><li>
<a id="pgfId-1061856"></a>There is a regular arrangement of alternating power and ground rails between rows:<ul><li>
<a id="pgfId-1061857"></a>G-P-P-G</li><li>
<a id="pgfId-1061858"></a>P-G-G-P</li><li>
<a id="pgfId-1061859"></a>G-P</li><li>
<a id="pgfId-1061860"></a>P-G</li></ul></li><li>
<a id="pgfId-1061861"></a>Device rotation depends on the row and pattern.</li><li>
<a id="pgfId-1061862"></a>The rows can extend outside of the boundary or cluster.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1061863"></a>The custom placer can place only within the boundary or cluster.</div></li></ul>












<h3>
<a id="pgfId-1061864"></a><a id="87705"></a><a id="57993"></a>Planning a P<a id="PlacePlanner"></a>lacement </h3>

<p>
<a id="pgfId-1072042"></a>Use the Placement Planning form to prepare your design for placement before you run the Virtuoso<sup>&#174;</sup> Custom Digital Placer. Select <em>Place &#8211; Custom Digital &#8211; Placement Planning</em> to display the <a href="appB.html#30147">Placement Planning</a> form. The options in the form are organized in tabs, which control the following placement settings. </p>
<ul><li>
<a id="pgfId-1072354"></a><a href="chap3.html#13437">(ICADVM20.1 Only) Adding Boundary Cells</a></li><li>
<a id="pgfId-1072368"></a><a href="chap3.html#57000">Generating Tap Cells</a></li><li>
<a id="pgfId-1072387"></a><a href="chap3.html#21530">Defining Rows</a></li><li>
<a id="pgfId-1072406"></a><a href="chap3.html#70324">Setting Other Placement Parameters</a></li></ul>




<h4>
<a id="pgfId-1072197"></a><a id="13437"></a>(ICADVM20.1 Only) Adding Boundary Cells</h4>

<p>
<a id="pgfId-1072772"></a>At advanced node<a id="vcpBoundCell"></a>s, adjacent cells (core cells) are placed in close proximity, which could lead to shots and DRC violations. Adding boundary cells around core cells lets you isolate the core cells from each other, and therefore helps prevent such undesired effects.</p>
<p>
<a id="pgfId-1076571"></a>Boundary cells are represented by cells that have their component class set to <code>BOUNDARYCELL</code>. Component types are defined in the <em>Cells</em> table of the <h-hot><a actuate="user" class="URL" href="../vxlhelp/appD.html#configurePhysicalHierarchyForm" show="replace" xml:link="simple">Configure Physical Hierarchy form</a></h-hot> - <em>Component Types</em> mode. For more information, see <h-hot><a actuate="user" class="URL" href="../vxlhelp/chap4.html#designcomponenttypes" show="replace" xml:link="simple">Defining a Design-Level Component Type</a></h-hot>.</p>
<p>
<a id="pgfId-1076828"></a>After ensuring that the boundary cell definitions are in place, you can start inserting them between the core cells in your design.</p>
<p>
<a id="pgfId-1073501"></a>Use the options on the <em>Boundary Cell</em> tab of the Placement Planning form to insert boundary cells.</p>



<p>
<a id="pgfId-1073547"></a></p>
<div class="webflare-div-image">
<img width="668" height="680" src="images/chap3-6.gif" /></div>
<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1089995"></a>
If a row template with boundary cell and tap cell definitions is selected in the <em>Row</em> tab, then these definitions are honored. The settings in the <em>Boundary Cell</em> and <em>Tap Cell</em> tabs are ignored.</div>

<p>
<a id="pgfId-1073569"></a>On the <em>Boundary Cell</em> tab:</p>
<ol><li>
<a id="pgfId-1073060"></a>Specify whether you want to select boundary cells based on their <em>Component Types</em> or <em>Cell Names</em>. </li><li>
<a id="pgfId-1073154"></a>Click <em>Choose</em> to display the Select Cells form. The options in the form differ depending on whether <em>Component Types</em> or <em>Cell Names</em> was selected.<ul><li>
<a id="pgfId-1072814"></a>When <em>Component Types</em> is selected, the following Select Cells form is displayed.<br />
<a id="pgfId-1073685"></a><div class="webflare-div-image">
<img src="images/PP_SelectCells.gif" /></div>
<a id="pgfId-1077024"></a>In the Select Cells form:</li><li>
<a id="pgfId-1073730"></a>Select the required <em>Comptypes</em>. The corresponding <em>Library</em> and <em>Cells</em> entries are listed.</li><li>
<a id="pgfId-1073851"></a>Select the required <em>Library</em> and <em>Cells</em> entries.</li><li>
<a id="pgfId-1073932"></a>Click <em>Add</em>. The selected cellviews are listed in the <em>Selected Cells</em> text box.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1074076"></a>Click <em>Add All</em> to select all cellviews. Use the <em>Remove</em> and <em>Remove All</em> buttons to remove cells from the <em>Selected Cells</em> list.</div></li><li>
<a id="pgfId-1074130"></a>Click <em>OK</em>.</li><li>
<a id="pgfId-1073100"></a>With <em>Cell Names</em> selected, the following Select Cells form is displayed.<br />
<a id="pgfId-1074183"></a><div class="webflare-div-image">
<img src="images/PP_SelectCells2.gif" /></div>
<a id="pgfId-1077113"></a>In the Select Cells form:</li><li>
<a id="pgfId-1074160"></a>Select the required <em>Library</em>, <em>Cell</em>, and <em>View</em>.</li><li>
<a id="pgfId-1074246"></a>Click <em>Add</em>. The selected cellviews are listed in the <em>Selected Cells</em> text box.</li><li>
<a id="pgfId-1074340"></a>Click <em>OK</em>.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1085008"></a>Use the <em>Remove</em> and <em>Remove All</em> buttons to remove cells from the <em>Selected Cells</em> list.</div></li></ul><br />
<a id="pgfId-1074723"></a>The selected cells are populated in all the applicable fields on the <em>Boundary Cell</em> tab of the Placement Planning form.<br />
<a id="pgfId-1074942"></a><div class="webflare-div-image">
<img width="660" height="770" src="images/chap3-10.gif" /></div></li><li>
<a id="pgfId-1074753"></a>Select <em>Place Outside Region</em> to generate boundary cells outside the row region. As a result, the placement region is shrunk by a value equal to the width of the boundary cells.</li><li>
<a id="pgfId-1074966"></a>Select <em>Place On Top Of Row Cells</em> to allow the placement of boundary cells over any existing standard cells on the left, right, top, and bottom rows.</li><li>
<a id="pgfId-1075382"></a>Sele<a id="cphEdge"></a>ct the boundary cells to be inserted in the <em>Left</em> and <em>Right</em> edges. Select <em>Mirror</em> to apply a mirrored orientation to these cells.</li><li>
<a id="pgfId-1075784"></a>Select the boundary cells to be inserted in the corners<em> &#8211; Top Left</em>, <em>Top Right</em>, <em>Bottom Left</em>, and <em>Bottom Right</em>. Select <em>Mirror</em> to apply a mirrored orientation to these cells.</li><li>
<a id="pgfId-1072895"></a>Select the boundary cells to be inserted in the <em>Top</em> and <em>Bottom</em> edges. </li><li>
<a id="pgfId-1077570"></a>Before inserting boundary cells, navigate to the other tabs to define the tap cells and rows that need to be added. </li><li>
<a id="pgfId-1077801"></a>Open the <em>Create</em> tab to specify the placement region and other generic settings.</li><li>
<a id="pgfId-1085052"></a>Ensure that <em>Boundary Cells</em> is selected.</li><li>
<a id="pgfId-1077661"></a>Click <em>Insert</em>.<br /><div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1085565"></a>
For more information about the boundary cell types, depending on the position of the boundary cell relative to the standard cell row, see <a href="chap3.html#80133">Valid edge assignments in CPH window</a>.</div></li></ol>











































<h4>
<a id="pgfId-1085653"></a>Related Envi<a id="BoundaryCellsEnvars"></a>ronment Variables:</h4>

<p>
<a id="pgfId-1085654"></a>Boundary Cells:</p>
<ul><li>
<a id="pgfId-1085658"></a><a href="appA.html#33485">boundaryCellType</a></li><li>
<a id="pgfId-1085662"></a><a href="appA.html#75427">insertBdryCells</a></li><li>
<a id="pgfId-1085666"></a><a href="appA.html#70732">topRowBdryCell</a></li><li>
<a id="pgfId-1085670"></a><a href="appA.html#58728">topTapBdryCell</a></li><li>
<a id="pgfId-1085674"></a><a href="appA.html#90282">botRowBdryCell</a></li><li>
<a id="pgfId-1085678"></a><a href="appA.html#68819">botTapBdryCell</a></li><li>
<a id="pgfId-1085682"></a><a href="appA.html#51442">leftBotCornerBdryCell</a></li><li>
<a id="pgfId-1085686"></a><a href="appA.html#43813">leftEdgeBdryCell</a></li><li>
<a id="pgfId-1085690"></a><a href="appA.html#62874">leftTopCornerBdryCell</a></li><li>
<a id="pgfId-1085694"></a><a href="appA.html#43184">rightBotCornerBdryCell</a></li><li>
<a id="pgfId-1085698"></a><a href="appA.html#78223">rightEdgeBdryCell</a></li><li>
<a id="pgfId-1085702"></a><a href="appA.html#66742">rightTopCornerBdryCell</a></li><li>
<a id="pgfId-1085706"></a><a href="appA.html#86211">topBotRowPlaceable</a></li><li>
<a id="pgfId-1085714"></a><a href="appA.html#35330">leftBotEdgeBdryCell</a></li></ul>














<h4>
<a id="pgfId-1072225"></a><a id="57000"></a>Generating Tap Cells</h4>

<p>
<a id="pgfId-1080133"></a>After specifying boundary cell parameters, you can (optionally) insert either single-height or multi-height tap cells in the empty spaces between the standard cells. Tap cells are a set of contacts that are used to reduce latch-up effects between power and ground connections and the connections with wells or substrate contacts. </p>
<p>
<a id="pgfId-1078147"></a>Tap cells are represented by cells that have their component class set to <code>STDSUBCONT</code>. Component types are defined in the <em>Cells</em> table of the <h-hot><a actuate="user" class="URL" href="../vxlhelp/appD.html#configurePhysicalHierarchyForm" show="replace" xml:link="simple">Configure Physical Hierarchy form</a></h-hot> - <em>Component Types</em> mode. For more information, see <h-hot><a actuate="user" class="URL" href="../vxlhelp/chap4.html#designcomponenttypes" show="replace" xml:link="simple">Defining a Design-Level Component Type</a></h-hot>. After ensuring that the tap cell definitions are in place, you can start inserting them between the core cells in your design.</p>
<p>
<a id="pgfId-1077852"></a>Use the options on the <em>Tap Cell</em> tab of the Placement Planning form to insert tap cells before running Custom Digital Placer.</p>




<p>
<a id="pgfId-1086547"></a></p>
<div class="webflare-div-image">
<img width="668" height="771" src="images/chap3-11.gif" /></div>

<p>
<a id="pgfId-1080258"></a>Corresponding SKILL function: <h-hot><a actuate="user" class="URL" href="../sklayoutref/vcp.html#vcpfePlaceTapCells" show="replace" xml:link="simple">vcpfePlaceTapCells</a></h-hot></p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1090093"></a>
If a row template with boundary cell and tap cell definitions is selected in the <em>Row</em> tab, then these definitions are honored. The settings in the <em>Boundary Cell</em> and <em>Tap Cell</em> tabs are ignored.</div>

<p>
<a id="pgfId-1078056"></a>On the <em>Tap Cell</em> tab: </p>
<ol><li>
<a id="pgfId-1078371"></a>Select either<em> Component Types</em> or <em>Cell Names</em> to specify the tap cells. With <em>Component Types</em> selected, all valid tap cells, which have their component type set to <code>STDSUBCONT,</code> are automatically listed in the <em>Tap Cells</em> text box. You can edit this list.</li><li>
<a id="pgfId-1078093"></a>Click <em>Choose</em> to display the Select Cells form. The options in the form differ depending on whether <em>Component Types</em> or <em>Cell Names</em> is selected.<ul><li>
<a id="pgfId-1078094"></a>When <em>Component Types</em> is selected, the following Select Cells form is displayed.<br />
<a id="pgfId-1078098"></a><div class="webflare-div-image">
<img src="images/PP_TapCellSelectCompTypes.gif" /></div>
<a id="pgfId-1078099"></a>In the Select Cells form, all valid cells are automatically listed in the <em>Selected Cells</em> text box. You can add or remove cells based on your requirement.</li><li>
<a id="pgfId-1078105"></a>With <em>Cell Names</em> selected, the following Select Cells form is displayed.<br />
<a id="pgfId-1078109"></a><div class="webflare-div-image">
<img src="images/PP_TapCellSelectCells.gif" /></div>
<a id="pgfId-1078110"></a>In the Select Cells form:</li><li>
<a id="pgfId-1078111"></a>Select the required <em>Library</em>, <em>Cell</em>, and <em>View</em>.</li><li>
<a id="pgfId-1078112"></a>Click <em>Add</em>. The selected cellviews are listed in the <em>Selected Cells</em> text box.</li><li>
<a id="pgfId-1078113"></a>Click <em>OK</em>.</li></ul><br />
<a id="pgfId-1078114"></a>The selected cells are populated in all the applicable fields on the <em>Tap Cell</em> tab of the Placement Planning form.</li><li>
<a id="pgfId-1078078"></a>Select a <em>Mode</em> to specify whether the tap cells must be <em>Static</em> or <em>Flexible</em>.<ul><li>
<a id="pgfId-1078873"></a>Static: Fixes the positions of tap cells as per the exact spacing values. Therefore, any change to the core cell placement does not affect the placement of the static tap cells.<br /><ffi2-fig-frame-in-2 id="#id1078818">
<a id="pgfId-1078818"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img src="images/PP_TapCell_ModeStatic.gif" /></div>
<a id="pgfId-1078816"></a>The following options are available only in the <em>Static</em> mode:<ul><li>
<a id="pgfId-1079096"></a><em>Tap to Tap Spacing</em> specifies the spacing to be maintained between adjacent tap cells.</li><li>
<a id="pgfId-1079144"></a><em>Tap to Tap Minimum Spacing</em> is applicable in situations where the tap cell placement needs to back track, for example when there is an existing blockage.</li></ul></li><li>
<a id="pgfId-1079317"></a>Flexible: Does not fix the positions of tap cells. Therefore, changes to core cell placement alter the tap cell placement. Use the <em>Maximum Spacing</em> and <em>Minimum Spacing</em> options to define a spacing range in the <em>Flexible</em> mode.<br /><ffi2-fig-frame-in-2 id="#id1079897">
<a id="pgfId-1079897"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img src="images/PP_TapCell_ModeFlexible.gif" /></div></li></ul></li><li>
<a id="pgfId-1079175"></a>(ICADVM20.1 Only) Specify the <em>Pattern</em> in which the tap cells must be inserted. You can select between the <em>Regular</em> and <em>Checker Board </em>patterns.<br />
<a id="pgfId-1080458"></a><div class="webflare-div-image">
<img width="668" height="92" src="images/chap3-16.gif" /></div><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1080459"></a>The <em>Skip Row Count </em>and <em>Avoid Abutment </em>settings are not available when the <em>Checker Board </em>pattern is selected.</div><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1080479"></a>The <em>Skip Row Count</em> and <em>Checker Board</em> options are ignored when multi-height tap cells are used.</div></li><li>
<a id="pgfId-1080415"></a>(optional) Specify the <em>Skip Row Count</em>, which specifies the rows that must be skipped during tap cell placement. The top row cannot be skipped. In the following example, alternate rows are skipped.<br />
<a id="pgfId-1080611"></a><div class="webflare-div-image">
<img src="images/TapCells_SkipRows.gif" /></div></li><li>
<a id="pgfId-1079211"></a>Specify the <em>Offset from Row Start</em>, which is the initial offset for the first tap cell in each row. This option is available only when <em>Mode</em> is set to <em>Static</em>.</li><li>
<a id="pgfId-1079238"></a>(ICADVM20.1 Only) Select <em>Avoid Abutment</em> to specify that the tap cells must not be abutted vertically. By default, tap cells are abutted. <br />
<a id="pgfId-1080293"></a><div class="webflare-div-image">
<img src="images/TapCells_AvoidAbutment.gif" /></div></li><li>
<a id="pgfId-1080306"></a>(ICADVM20.1 Only) Select <em>Periodic</em> to insert tap cells periodically from the list of available cells starting from the bottom lower left.<br />
<a id="pgfId-1081133"></a><div class="webflare-div-image">
<img src="images/TapCells_Periodic.gif" /></div></li><li>
<a id="pgfId-1080310"></a>Select <em>Lock Tap Cells</em> to apply the settings of <em>Flexible</em> tap cells and then lock the tap cells to their positions. This option is not available in the <em>Static</em> mode.<br /></li></ol>




































































<h4>
<a id="pgfId-1080312"></a>Related Envi<a id="TapCellsEnvars"></a>ronment Variables:</h4>

<p>
<a id="pgfId-1085537"></a>Tap Cells:</p>
<ul><li>
<a id="pgfId-1085800"></a><a href="appA.html#58728">topTapBdryCell</a></li><li>
<a id="pgfId-1085763"></a><a href="appA.html#70223">avoidAbutment</a></li><li>
<a id="pgfId-1085764"></a><a href="appA.html#69722">insertSubstrateContacts</a></li><li>
<a id="pgfId-1085767"></a><a href="appA.html#23487">lockTap</a></li><li>
<a id="pgfId-1085867"></a><a href="appA.html#54779">packedPlacement</a></li><li>
<a id="pgfId-1085768"></a><a href="appA.html#42843">periodicTap</a></li><li>
<a id="pgfId-1085769"></a><a href="appA.html#79559">rowTapEndOffset</a></li><li>
<a id="pgfId-1085770"></a><a href="appA.html#81724">subContInAlternateRow</a></li><li>
<a id="pgfId-1085771"></a><a href="appA.html#50126">subContMaxSpacing</a></li><li>
<a id="pgfId-1085772"></a><a href="appA.html#80275">subContMinSpacing</a></li><li>
<a id="pgfId-1085773"></a><a href="appA.html#69064">substrateContactType</a></li></ul>











<h4>
<a id="pgfId-1072116"></a><a id="21530"></a>Defining Rows</h4>

<p>
<a id="pgfId-1081455"></a>Row-based placement provides tremendous advantage over the conventional placement methods. Row-based placement helps improve routability, achieve better wire length after routing, and resolve illegal placements by balancing the number of instances placed in each row. It also helps resolve overlaps between the devices in each row. Use the options on the <em>Row</em> tab to define the row settings before generating them in the placement region.</p>




<p>
<a id="pgfId-1081487"></a></p>
<div class="webflare-div-image">
<img width="668" height="673" src="images/chap3-20.gif" /></div>

<ol><li>
<a id="pgfId-1082215"></a>(ICADVM20.1 Only) Select the <em>Row Template</em> to be used to generate rows in the layout canvas. Use the <a actuate="user" class="URL" href="../vplacer/vPlaceForms.html#apDefineRowTemplate" show="replace" xml:link="simple">Row Template Manager</a> to define row templates.<br />
<a id="pgfId-1082217"></a>If you select a row template, the <em>Row Parameters </em>and <em>Rails</em> sections are collapsed. <em>Number of Rows</em> is the only option available in the <em>Row Parameters </em>section, and its value is reset to <em>Maximum</em>. <br />
<a id="pgfId-1089640"></a>If the selected row template has boundary cell and tap cell definitions, then these definitions are honored. In that case the settings in the <em>Boundary Cell</em> and <em>Tap Cell</em> tabs are ignored. <br /></li><li>
<a id="pgfId-1082221"></a>(ICADVM20.1 Only) Select <em>Use Partial Template</em> to allow partial row templates while filling the placement region. Therefore, the selected row template is repeated multiple times, and the remaining space at the top, which is less than the height of a row template, is filled with a partial row template. <br />
<a id="pgfId-1082222"></a>When <em>Use Partial Template</em> is not selected, only full row templates are allowed. Therefore, any remaining space at the top, which is less than the height of a row template, is left empty.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1082223"></a><em>Use Partial Template</em> is available only when you select a row template in the previous step.</div></li><li>
<a id="pgfId-1068115"></a>(ICADVM20.1 Only) Specify the reference grids (<em>Vertical Grid</em> and <em>Horizontal Grid</em>) for snapping the devices and rows during placement.</li><li>
<a id="pgfId-1064072"></a>(ICADVM20.1 Only) Specify the offsets (<em>Vertical Offset</em> and <em>Horizontal Offset</em>) that must be applied to rows after they are snapped to the reference grids.</li><li>
<a id="pgfId-1062694"></a>Expand the <em>Row Parameters</em> section to define the row parameters. </li><li>
<a id="pgfId-1082009"></a>Specify the <em>Number Of Rows</em>. Options are:<ul><li>
<a id="pgfId-1082669"></a>Auto: Automatically calculates the number of rows depending on the number of devices to be placed and the specified <em>Row Utilization (%)</em>.</li><li>
<a id="pgfId-1082686"></a>Maximum: Accommodates the maximum number or rows in the placement region.</li><li>
<a id="pgfId-1082696"></a>Specify: Lets you specify the number of rows to be generated. If the specified number of rows cannot be accommodated within the boundary, for example if the row height is greater than the region height, then an appropriate warning is displayed.</li></ul></li><li>
<a id="pgfId-1082006"></a>Specify a <em>Row Utilization (%)</em> value to indicate the space available for placing components. The remaining space is used for routing. The higher the utilization value, the lesser the space available for the router to route the design. The lower the utilization value, the more free space is made available for the router.</li><li>
<a id="pgfId-1082007"></a>Specify the <em>Row Spacing</em> between rows. If a value is not specified, then the placer automatically calculates a value.</li><li>
<a id="pgfId-1082008"></a>Specify whether the <em>Row Site Pitch</em> value will be calculated automatically or defined manually.</li><li>
<a id="pgfId-1082011"></a>Specify whether the value calculated for the number of<em> Row Sites</em> must be used as is or rolled down to the nearest <em>Odd</em> or <em>Even</em> number.</li><li>
<a id="pgfId-1082012"></a>Specify the <em>Power/Ground Pattern</em> for alternating rails between rows. Available patterns are G-P, P-G, G-P-P-G, and P-G-G-P. This option lets you flip rows and save space by sharing power or ground rails between the rows.</li><li>
<a id="pgfId-1082912"></a>Expand the <em>Rails</em> section to define rail parameters.</li><li>
<a id="pgfId-1082013"></a>Select <em>Generate Rails </em>to create rails.</li><li>
<a id="pgfId-1082014"></a>Specify the <em>Rail Position</em> with respect to the rows. Available options are <em>Inside</em>, <em>Outside</em>, and <em>Center</em>.</li><li>
<a id="pgfId-1082015"></a>Specify the <em>Power Net </em>to which the rail belongs.</li><li>
<a id="pgfId-1082016"></a>Specify the <em>Ground Net</em> to which the rail belongs.</li><li>
<a id="pgfId-1082017"></a>Specify the <em>Layer</em> on which the rail must be drawn. If rails are not created for any reason, then a suitable warning message is displayed.</li><li>
<a id="pgfId-1082018"></a>Specify the <em>Width</em> of the rails.</li></ol>































<h4><em>
<a id="pgfId-1082019"></a>Example 1: </em></h4>

<p>
<a id="pgfId-1082020"></a>The following parameters are specified:</p>
<ul><li>
<a id="pgfId-1082021"></a><em>Row Spacing</em>:<em> 2</em></li><li>
<a id="pgfId-1082022"></a><em>Power/Ground Pattern</em>:<em> GPPG</em></li><li>
<a id="pgfId-1082023"></a><em>Generate Rails&#8212;Rail Position</em>:<em> Inside</em></li></ul>


<p>
<a id="pgfId-1082024"></a>Here, the power rails are not shared because the <em>Row Spacing</em> is not <code>0</code>.</p>


<p>
<a id="pgfId-1082048"></a></p>
<div class="webflare-div-image">
<img width="668" height="271" src="images/chap3-21.gif" /></div>



<h4><em>
<a id="pgfId-1082049"></a>Example 2:</em></h4>

<p>
<a id="pgfId-1082050"></a>The following parameters are specified:</p>
<ul><li>
<a id="pgfId-1082051"></a><em>Row Spacing</em>:<em> 0</em></li><li>
<a id="pgfId-1082052"></a><em>Power/Ground Pattern</em>:<em> PGGP</em></li><li>
<a id="pgfId-1082053"></a><em>Generate Rails&#8212;Rail Position</em>:<em> Center</em></li></ul>


<p>
<a id="pgfId-1082054"></a>Here, ground rails are shared because the <em>Row Spacing</em> is <code>0</code>.</p>


<p>
<a id="pgfId-1085989"></a></p>
<div class="webflare-div-image">
<img width="668" height="258" src="images/chap3-22.gif" /></div>
<h4>
<a id="pgfId-1085994"></a>Related Envi<a id="TapCellsEnvars"></a>ronment Variables:</h4>

<p>
<a id="pgfId-1082074"></a>Rows:</p>
<ul><li>
<a id="pgfId-1086024"></a><a href="appA.html#87702">allowRowsBeyondRegion</a></li><li>
<a id="pgfId-1086051"></a><a href="appA.html#48686">generateRails</a></li><li>
<a id="pgfId-1086069"></a><a href="appA.html#30014">interRowSpacer</a></li><li>
<a id="pgfId-1086087"></a><a href="appA.html#78057">intraRowSpacer</a></li><li>
<a id="pgfId-1086105"></a><a href="appA.html#33765">numRowOption</a></li><li>
<a id="pgfId-1086123"></a><a href="appA.html#49567">numRowSites</a></li><li>
<a id="pgfId-1086141"></a><a href="appA.html#91497">numTemplateRowOption</a></li><li>
<a id="pgfId-1086159"></a><a href="appA.html#59545">rowCount</a></li><li>
<a id="pgfId-1086177"></a><a href="appA.html#64148">rowsFromLowerLeft</a></li><li>
<a id="pgfId-1086195"></a><a href="appA.html#16656">rowGroundLayer</a></li><li>
<a id="pgfId-1086213"></a><a href="appA.html#45241">rowGroundName</a></li><li>
<a id="pgfId-1086231"></a><a href="appA.html#37575">rowGroundWidth</a></li><li>
<a id="pgfId-1086249"></a><a href="appA.html#46010">rowOffsetX</a></li><li>
<a id="pgfId-1086267"></a><a href="appA.html#81267">rowOffsetY</a></li><li>
<a id="pgfId-1086285"></a><a href="appA.html#62243">rowPowerLayer</a></li><li>
<a id="pgfId-1086303"></a><a href="appA.html#44231">rowPowerName</a></li><li>
<a id="pgfId-1086321"></a><a href="appA.html#78167">rowPowerWidth</a></li><li>
<a id="pgfId-1086339"></a><a href="appA.html#99393">rowSpacingOption</a></li><li>
<a id="pgfId-1086357"></a><a href="appA.html#79559">rowTapEndOffset</a></li><li>
<a id="pgfId-1086375"></a><a href="appA.html#37721">rowTemplateName</a></li><li>
<a id="pgfId-1086393"></a><a href="appA.html#91742">rowUtilization</a></li><li>
<a id="pgfId-1086411"></a><a href="appA.html#67541">row2RowSpacing</a></li><li>
<a id="pgfId-1086429"></a><a href="appA.html#34565">rowPitchOption</a></li><li>
<a id="pgfId-1086447"></a><a href="appA.html#77891">rowPitchValue</a></li><li>
<a id="pgfId-1086480"></a><a href="appA.html#62334">templateRowCount</a></li><li>
<a id="pgfId-1086498"></a><a href="appA.html#86211">topBotRowPlaceable</a></li><li>
<a id="pgfId-1086523"></a><a href="appA.html#10540">usePartialTemplate</a></li></ul>



























<h4>
<a id="pgfId-1081641"></a><a id="70324"></a>Setting Other Placement Parameters</h4>

<p>
<a id="pgfId-1083122"></a>After defining the <em>Boundary Cell</em>, <em>Tap Cell</em>, and <em>Row</em> parameters, the final step is to define the generic placement settings before running the command. Use the options on the <em>Create</em> tab to define the generic settings.</p>



<p>
<a id="pgfId-1083128"></a></p>
<div class="webflare-div-image">
<img width="668" height="599" src="images/chap3-23.gif" /></div>

<ol><li>
<a id="pgfId-1061889"></a>Select whether you want to generate <em>Rows</em>, <strong>(ICADVM20.1 Only) </strong><em>Boundary Cells</em>, and <em>Tap Cells</em>.</li><li>
<a id="pgfId-1083513"></a>Select a placement <em>Region</em>. You can either select <em>Boundary</em> and select an existing boundary (default is PR Boundary) or select <em>Placement Region</em> to define a custom placement region. <br />
<a id="pgfId-1090191"></a>When <em>Boundary</em> is set to <code>rowRegion</code>, the row template selected on the <em>Row</em> tab is considered. A row region,as defined in the row template is created. If the row template has boundary cell and tap cell definitions, then the settings in the <em>Boundary Cell </em>and <em>Tap Cell</em> tabs are ignored.<br />
<a id="pgfId-1090309"></a>With <em>Placement Region</em> selected, you can define a custom placement region by one of the following methods: <br />
<a id="pgfId-1083965"></a>- By defining a rectangular region: <ol><li>
<a id="pgfId-1083984"></a>Select <em>Rectangle</em>.</li><li>
<a id="pgfId-1084291"></a>Type the X and Y coordinates of the lower-left corner of the region in the <em>Origin X</em> and <em>Origin Y </em>fields. Notice the X and Y coordinates of the cursor position in the status line at the top of the layout window. If you do not type any coordinates, the new row is placed at the lower-left corner of the region.</li><li>
<a id="pgfId-1066111"></a>Type the <em>Width</em> and <em>Height</em> dimensions for the region.</li><li>
<a id="pgfId-1066101"></a>Click <em>Update</em>. </li></ol><br />
<a id="pgfId-1084017"></a>- By defining a rectilinear region:<ol><li>
<a id="pgfId-1084031"></a>Specify the coordinates in the <em>Points</em> text box.</li><li>
<a id="pgfId-1084097"></a>Click <em>Update</em>. <br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1066184"></a>Use <em>Delete</em> to remove an existing region.</div></li></ol><br />
<a id="pgfId-1066077"></a>- By drawing in the canvas (manually)<ol><li>
<a id="pgfId-1066233"></a>Select <em>Placement Region</em>.</li><li>
<a id="pgfId-1066225"></a>Click<em> Draw.</em> </li><li>
<a id="pgfId-1071185"></a>Specify the placement region manually in the layout window. You are prompted to point at the first corner of the region&#8217;s rectangle.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1066218"></a>Rectilinear row regions in the U-shape and concave polygons are not supported.</div></li></ol></li><li>
<a id="pgfId-1084450"></a>Expand the <em>Options</em> section. </li><li>
<a id="pgfId-1088297"></a>(ICADVM20.1 EXL Only) Select <em>Allow Region Overlap</em> to allow the presence of overlapping row regions in the placement region. Existing row region is maintained and a new row region is generated over it. You can use this option to create partial overlapping row regions.<br />
<a id="pgfId-1088426"></a>When running the placer, placement of instances depends on the selected placement region as follows: <ul><li>
<a id="pgfId-1089008"></a>Row region: Instances are placed only in the selected row region. All other overlapping row regions are considered as blockages. </li><li>
<a id="pgfId-1088515"></a>PR boundary: Instances are placed on all overlapping row regions that exist within the PR boundary. Instances are placed in row regions according to their allowed component types. When an instance is placed in the outer row region, the inner row region is considered blockage. In case of partial overlap between two row regions, nothing is placed in the overlapping area.<br /><ffi2-fig-frame-in-2 id="#id1089457">
<a id="pgfId-1089457"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img src="images/AllowOverlappingRowRegion.gif" /></div></li></ul></li><li>
<a id="pgfId-1061898"></a>Select <em>Allow for Pins </em>to reserve space for pins. The budgeted pin space equals the size of the pin plus the spacing rule inside the boundary edge, which helps avoid pin overlaps. This option is available only when <em>Region</em> is set to <em>Boundary</em>.</li><li>
<a id="pgfId-1061899"></a>Choose <em>Extend Boundary</em> to expand the row and the PR boundary beyond the specified region, wherever needed. Also specify whether rows are to be stretched <em>Horizontally</em> or <em>Vertically</em>. This option is available only when <em>Region</em> is set to <em>Boundary</em>.</li><li>
<a id="pgfId-1086773"></a>Select <em>Start from Lower Left</em> to create rows from the lower-left side of the PR boundary or region. Specify the corresponding row <em>X Offset X</em> and <em>Y Offset </em>values.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1086774"></a>This option is not available when you select a <em>Row Template</em> on the <em>Row</em> tab.</div></li><li>
<a id="pgfId-1086784"></a>(IC6.1.8 Only) Select <em>Ignore Blockages / Instances</em> to ignore the existing blockages and instances and create rows over these blockages and instances. <br />
<a id="pgfId-1086925"></a><div class="webflare-div-image">
<img width="668" height="168" src="images/chap3-25.gif" /></div></li><li>
<a id="pgfId-1086788"></a>(IC6.1.8 Only) Select <em>Context Aware Placement</em> to enable context-aware, row-based placement. Select a Context<em> File</em>, which is an XML file containing edge spacing constraint information for performing context-aware placement. </li><li>
<a id="pgfId-1084631"></a>Click <em>Insert</em> to generate the specified boundary cells, tap cells, and rows in the layout canvas.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1061998"></a>Click <em>Delete</em> to remove boundary cells, tap cells, and rows from the layout canvas.</div></li></ol>












































<h3>
<a id="pgfId-1062002"></a><a id="20707"></a><a id="68468"></a>Plann<a id="placeDoubleHeightCells"></a>ing Placement of Multi-Height Cells</h3>

<p>
<a id="pgfId-1062003"></a>The Virtuoso Custom Placement solution supports the placement of multi-height standard cells. Multi-height cells are standard cells that are double, triple, or other multiples of the height of a single-height standard cell. This implies that during row estimation, if the placer encounters double-height (2x), triple height (3x), or any multi-height (Hx) cells in the design, it still creates rows with the height of a standard, single-height cell (x). But, for placing these multi-height cells, the placer budgets more space.</p>
<p>
<a id="pgfId-1062004"></a>In a design with double-height cells, each row is half the height (x) of a double-height (2x) cell. Therefore, the double-height cells along with the specified rail pattern occupy two rows each.</p>
<p>
<a id="pgfId-1062005"></a>Both PGGP and GPPG rail patterns are supported and these patterns can co-exist in a design to ensure uninterrupted power and ground connectivity to the cells, as shown in the figure below.</p>




<p>
<a id="pgfId-1062009"></a></p>
<div class="webflare-div-image">
<img src="images/planningDoubleHeightPlacement.GIF" /></div>

<p>
<a id="pgfId-1062010"></a>If the design had cells that were triple or any other integer multiple of the height of a standard cell, the placer would budget for them similarly, by considering their height as an integer multiple of the standard single height cell. However, the placer creates single-height rows for a multi-height design only if all the cells in the design have heights that are integer multiples of the single-height cell.</p>
<p>
<a id="pgfId-1062011"></a>For example, if the cell heights are 3.0, 6.0, 9.0, and 12.0; the placer creates rows of height <code>3.0</code> because that is the height of the single-height cell. </p>
<p>
<a id="pgfId-1062012"></a>If the height of even a single cell in the design is not an integer multiple of the single-height cell, the placer creates rows that are the height of the largest cell. For example, if the cell heights are 3.0, 4.0, 6.0, 9.0, and 12.0; the placer creates rows of height <code>12.0</code>.</p>
<b>Note:</b><br />
<a id="pgfId-1062013"></a>
<ul><li>
<a id="pgfId-1062014"></a>To ensure that multi-height cells are accommodated within the rows and the cells are not placed outside, the placer automatically sets the row spacing to <code>0</code>.</li><li>
<a id="pgfId-1062015"></a>To provide optimal placement results with designs that carry multi-height cells, the placer might perform several iterations before generating the final placement. Therefore, designs that have multi-height cells might take longer to place.</li></ul>

<p>
<a id="pgfId-1062016"></a>If you notice that in spite of running several iterations, the placement results are not as desired, you can choose to run the placer again.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1065758"></a>In the mixed mode, the Placement Planner creates only single-height rows, irrespective of whether the design has single, double, or any <span class="webflare-courier-new" style="white-space:pre"><em>n</em></span>-height cells, where <span class="webflare-courier-new" style="white-space:pre"><em>n</em></span> is a valid integer.</div>

<h3>
<a id="pgfId-1062019"></a><a id="44249"></a>Planni<a id="vcpAdNode"></a>ng Placement of Standard Cells</h3>

<p>
<a id="pgfId-1062020"></a>If standard cells are placed using the regular placement method, they can get placed too close together, resulting in spacing violations. The litho and stress effects due to neighboring layout cells at lower nodes can further affect cell delay and leakage. Therefore, placement planning should pre-empt possible placement challenges and aim for context-aware row-based placement.</p>
<p>
<a id="pgfId-1062021"></a>To achieve context-aware placement, VCP honors the cell-to-cell boundary conditions called cell-edge characterizations. The cell-edge characterization defines that a specific <em>edge type,</em> such as <em>edge type 1 or 2</em>, that is assigned to the <em>LEFT</em> or <em>RIGHT</em> edge of a standard cell be placed with a specific edge type, such as 2 or 3, that is assigned to the <em>LEFT</em> or <em>RIGHT</em> edge of another standard cell such that the cells be placed adjacent to each other, within acceptable spacing values as defined using the <code>LEF58_CELLEDGESPACINGTABLE</code> property.</p>
<p>
<a id="pgfId-1062022"></a>To define cell-edge characterizations, the custom placer uses the following LEF 5.8 edge properties defined in the standard cell masters:</p>
<ul><li>
<a id="pgfId-1070734"></a>LEF58_EDGETYPE</li><li>
<a id="pgfId-1062030"></a>LEF58_CELLEDGESPACINGTABLE<br /><div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-1062031"></a>
The LEF5.8 edge properties must be appropriately set in the technology LEF and the Macro LEF. Else, you must provide an XML file to specify the edge type and the edge spacing table for the standard cells to be abutted.</div></li></ul>



<h4>
<a id="pgfId-1062033"></a><code>LEF58_EDGETYPE</code><a id="84818"></a></h4>

<p>
<a id="pgfId-1062034"></a>Use the <code>LEF58_EDGETYPE</code> property to assign edge types for standard cell boundaries. For example:</p>
<p>
<a id="pgfId-1069480"></a><code>EDGETYPE {RIGHT | LEFT | TOP | BOTTOM}</code></p>
<p>
<a id="pgfId-1069385"></a>The acceptable spacing between the edges is defined in the <code>LEF58_CELLEDGESPACINGTABLE</code> library definition by referring to the above edge types. </p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1069528"></a>These properties can be specified either on the current cellview or in the <code>techLib</code>. The property directly on the cellview is given preference.</div>
<p>
<a id="pgfId-1069525"></a>For information about the <code>LEF58_EDGETYPE</code> property, see the Edge Type Rule in the <h-hot><a actuate="user" class="URL" href="../lefdefref/LEFSyntax.html#Macro" show="replace" xml:link="simple">LEF/DEF Language Reference.</a></h-hot></p>

<h4>
<a id="pgfId-1062037"></a><code>LEF58_CELLEDGESPACINGTABLE</code><a id="94793"></a></h4>

<p>
<a id="pgfId-1062038"></a><code>LEF58_CELLEDGESPACINGTABLE</code> is a spacing rule table that defines the minimum acceptable spacing that must be maintained between two abutting edges of different edge types, <code>EDGETYPE1</code> and <code>EDGETYPE2</code>.</p>
<p>
<a id="pgfId-1062039"></a>An example of the edge spacing table is given below:</p>



<p>
<a id="pgfId-1062071"></a></p>
<table class="webflareTable" id="#id1062040">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1062042">
<a id="pgfId-1062042"></a>Edge Type 1</span>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1062044">
<a id="pgfId-1062044"></a>Edge Type 2</span>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<span class="tbl-head" id="#id1062046">
<a id="pgfId-1062046"></a>Spacing (in micron)</span>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1062048"></a>1</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1062050"></a>1</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1062052"></a>1.0</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1062054"></a>1</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1062056"></a>2</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1062058"></a>0.5</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1062060"></a>1</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1062062"></a>3</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1062064"></a>2.7</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1062066"></a>2</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1062068"></a>3</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1062070"></a>1.3</p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1062072"></a>To achieve context-aware placement, the adjacent edges of standard cells should be placed such that they meet the spacing constraints defined in the table above.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1067897"></a>If no spacing constraint is defined between two edge types, the edges are considered abuttable.</div>
<p>
<a id="pgfId-1067898"></a>Virtuoso Custom Digital Placer honors the <code>LEF58_CELLEDGESPACINGTABLE</code> property. However, the following properties are partially honored. The following table describes VCP behavior when these properties are set:</p>



<p>
<a id="pgfId-1067911"></a></p>
<table class="webflareTable" id="#id1067916">
<tbody><tr>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-1067918"></a>Property</p>
</th>
<th class="webflareTh" colspan="1" rowspan="1">
<p>
<a id="pgfId-1067920"></a>VCP Behavior</p>
</th>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1067922"></a><code>NODEFAULT</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1067924"></a>Works as desired</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1067926"></a><code>EXCEPTABUTTED</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">

<p>
<a id="pgfId-1068034"></a>Specifies that two abutted macros of the given edge types are allowed</p>

</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1067930"></a><code>OPTIONAL</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">

<p>
<a id="pgfId-1068050"></a>Considers these groups only if the <code>considerOptionalEdges</code> environment variable is set to <code>t</code></p>

</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1067934"></a><code>SOFT</code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1067936"></a>Ignores these groups</p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1067844"></a>For more information about <code>LEF58_CELLEDGESPACINGTABLE</code>, see the Cell Edge Spacing Table Rule in the <h-hot><a actuate="user" class="URL" href="../lefdefref/LEFSyntax.html#Macro" show="replace" xml:link="simple">LEF/DEF Language Reference</a></h-hot>.</p>

<h4>
<a id="pgfId-1062076"></a><a id="13982"></a>Context-Awa<a id="contextAware"></a>re Placement</h4>

<p>
<a id="pgfId-1062077"></a>To support context-aware placement planning of standard cells, Virtuoso Custom Placement Solution provides a Context Aware Placement option on the Component tab of the Placement Planning form. The option can also be controlled using the <h-hot><a href="appA.html#76750">contextAwarePlacement</a></h-hot> environment variable.</p>
<p>
<a id="pgfId-1062081"></a>If placement planning needs to be context-aware, define the cell edge and spacing constraints in the technology LEF and the macro LEF. Also, select the Context Aware Placement option on the Placement Planning form. Alternatively, if the constraint information is not defined in the LEF files, provide an XML file that contains the required constraint information. A sample XML file carrying the context information is displayed below.</p>



<p>
<a id="pgfId-1062085"></a></p>
<div class="webflare-div-image">
<img src="images/sampleContextXML.gif" /></div>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1062093"></a>The XML file can also be provided by using the <a href="appA.html#11161">contextConstraintFile</a> environment variable.</div>
<p>
<a id="pgfId-1070538"></a>If the XML file is unavailable or an invalid file name is specified, the placer looks for the required information in the technology LEF and the Macro LEF. </p>

<div class="webflare-information-macro webflare-macro-tip">
<a id="pgfId-1070607"></a>
If the constraint information is not available in the LEF file, a warning is issued and context-aware planning fails.</div>

<p>
<a id="pgfId-1070339"></a>The placer performs placement planning in accordance with the specified <code>LEF58_EDGETYPE</code> and <code>LEF58_CELLEDGESPACINGTABLE</code> properties, budgeting extra rows to accommodate the context-aware standard cells.</p>
<p>
<a id="pgfId-1067063"></a>The placer looks for the <code>LEF58_EDGETYPE</code> property on the cell masters that are instantiated in the current cellview. If not found, the placer looks for the property in the abstract views of the cell masters.</p>
<p>
<a id="pgfId-1070345"></a>The placer looks for <code>LEF58_CELLEDGESPACINGTABLE</code> property in the following order:</p>
<ul><li>
<a id="pgfId-1070346"></a>In the user-specified library, using the <code>cdsEnv (&quot;layoutXL.placement&quot;, &quot;cellEdgeSpacingTableLib&quot;) </code>command.</li><li>
<a id="pgfId-1070347"></a>In the current cellview.</li><li>
<a id="pgfId-1070348"></a>In the current design library.</li><li>
<a id="pgfId-1070349"></a>In the attached technology library and all the referenced technology libraries. </li><li>
<a id="pgfId-1070350"></a>In all the reference libraries (of the master cellviews).</li><li>
<a id="pgfId-1070351"></a>In the technology file of the attached technology library.<a id="34242"></a></li></ul>






<h3>
<a id="pgfId-1085257"></a><a id="79226"></a>Assigning Edges for Boundary Cells</h3>

<p>
<a id="pgfId-1085258"></a>The edge assignments for boundary cells types are done in the Configure Physical Hierarchy (CPH) window - <em>Component Types</em> mode. Depending on these assignments, a filtered list of cells is displayed in the various edge drop-down lists on the <em>Defaults</em> tab. </p>
<p>
<a id="pgfId-1085259"></a>Example: In the CPH window, the <em>Edge type </em>for a set of boundary cells (with their <em>Component class </em><code>BOUNDARYCELL</code>) is set to <em>Left</em> and <em>Right</em>. This setting is automatically propagated to the Boundary Cells Placement form. When the corresponding <em>Component Type</em> is selected, the boundary cells are listed only in the <em>Left Edge</em> and <em>Right Edge</em> drop-down lists.</p>



<p>
<a id="pgfId-1085266"></a></p>
<div class="webflare-div-image">
<img width="668" height="562" src="images/chap3-28.gif" /></div>

<p>
<a id="pgfId-1085267"></a></p>




<h4><em>
<a id="pgfId-1085268"></a><a id="80133"></a>Valid edge assignments in CPH window</em></h4>

<p>
<a id="pgfId-1085315"></a></p>
<table class="webflareTable" id="#id1085269">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085271"></a>Boundary Cell Placement Form - Edges</p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085273"></a>CPH Window - Valid Edge Assignments</p>
<p>
<a id="pgfId-1085274"></a>(Case insensitive)</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085276"></a><em>Left Edge</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085278"></a><code>left, leftedge</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085280"></a><em>Right Edge</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085282"></a><code>right, rightedge</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085284"></a><em>Left Top Corner</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085286"></a><code>lefttopcorner, ltc</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085288"></a><em>Left Bottom Corner</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085290"></a><code>leftbottomcorner, leftbotcorner, lbc</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085292"></a><em>Right Top Corner</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085294"></a><code>righttopcorner, rbc</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085296"></a><em>Right Bottom Corner</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085298"></a><code>rightbottomcorner, rightbotcorner, rbc</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085300"></a><em>Top </em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085302"></a><code>top, topedge</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085304"></a><em>Bottom</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085306"></a><code>bottom, bot, bottomedge, botedge</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085308"></a><em>Top Tap</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085310"></a><code>toptap</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085312"></a><em>Bottom Tap</em></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-1085314"></a><code>bottomtap, bottap</code></p>
</td>
</tr>
</tbody></table>

<p>
<a id="pgfId-1085252"></a></p>





<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="chap2.html" id="prev" title="Pin Planning">Pin Planning</a></em></b><b><em><a href="chap4.html" id="nex" title="Running the Placer">Running the Placer</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>