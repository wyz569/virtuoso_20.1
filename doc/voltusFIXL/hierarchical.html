
<html><head><title>Hierarchical EMIR Analysis</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="pallabi" />
<meta name="CreateDate" content="2020-09-17" />
<meta name="CreateTime" content="1600411303" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="This manual describes the use flow information in Voltus-Fi Custom Power Integrity Solution." />
<meta name="DocTitle" content="Voltus-Fi Custom Power Integrity Solution XL User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Hierarchical EMIR Analysis" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2" />
<meta name="Keyword" content="voltusFIXL" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-09-17" />
<meta name="ModifiedTime" content="1600411303" />
<meta name="NextFile" content="batchmode.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Digital IC Design,Digital IC Design" />
<meta name="PrevFile" content="pgvcreation.html" />
<meta name="c_product" content="Virtuoso Power System,Voltus-Fi" />
<meta name="Product" content="Virtuoso Power System,Voltus-Fi" />
<meta name="ProductFamily" content="Virtuoso Power System,Voltus-Fi" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Voltus-Fi Custom Power Integrity Solution XL User Guide -- Hierarchical EMIR Analysis" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="voltusFIXLICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="voltusFIXLTOC.html">Contents</a></li><li><a class="prev" href="pgvcreation.html" title="Power-Grid View Generation">Power-Grid View Generation</a></li><li style="float: right;"><a class="viewPrint" href="voltusFIXL.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="batchmode.html" title="Batch Mode Execution">Batch Mode Execution</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Voltus-Fi Custom Power Integrity Solution XL User Guide<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>15
<a id="pgfId-55593"></a><a id="97089"></a></h1>
<h1>
<a id="pgfId-55595"></a><hr />
<a id="58483"></a>Hierarchical EMIR Analysis<hr />
</h1>

<ul><li>
<a id="pgfId-80994"></a><a href="hierarchical.html#16027">Hierarchical EMIR Analysis in Voltus-Fi-XL</a></li><li>
<a id="pgfId-104085"></a><a href="hierarchical.html#25676">The High-Level Flow</a></li><li>
<a id="pgfId-92756"></a><a href="hierarchical.html#20674">Compatible Software Versions</a></li><li>
<a id="pgfId-92771"></a><a href="hierarchical.html#57125">Data Requirements for the Hierarchical EMIR Flow</a></li><li>
<a id="pgfId-115570"></a><a href="hierarchical.html#86070">Types of Block-Level xDSPF &#8211; Detailed, Port, and Via Snapped</a></li><li>
<a id="pgfId-116162"></a><a href="hierarchical.html#23321">PWL Current Files for Top-Level Simulation</a></li><li>
<a id="pgfId-90183"></a><a href="hierarchical.html#54745">Hierarchical EMIR Analysis Flow in GUI Mode</a><ul><li>
<a id="pgfId-115584"></a><a href="hierarchical.html#68685">Opening the Hierarchical EMIR Forms</a></li><li>
<a id="pgfId-110884"></a><a href="hierarchical.html#55608">Creating the Block PGVs and xDSPF</a></li><li>
<a id="pgfId-110901"></a><a href="hierarchical.html#18661">Generating the Top-Level xDSPF File</a></li><li>
<a id="pgfId-110911"></a><a href="hierarchical.html#32075">Running the Top-Level Simulation</a></li></ul></li><li>
<a id="pgfId-124390"></a><a href="hierarchical.html#26789">The Hierarchical EMIR Analysis Batch Mode Flow</a><ul><li>
<a id="pgfId-95301"></a><a href="hierarchical.html#31483">set_mmsim_pgv_nets</a></li><li>
<a id="pgfId-95327"></a><a href="hierarchical.html#70543">create_pgv</a></li><li>
<a id="pgfId-110921"></a><a href="hierarchical.html#76419">extract_xdspf</a></li><li>
<a id="pgfId-110931"></a><a href="hierarchical.html#40915">set_block_data</a></li><li>
<a id="pgfId-110941"></a><a href="hierarchical.html#23682">run_top_simulation</a></li></ul></li><li>
<a id="pgfId-121665"></a><a href="hierarchical.html#42587">The Hierarchical EMIR Analysis Batch Mode Automation Flow</a><ul><li>
<a id="pgfId-121683"></a><a href="hierarchical.html#14510">Block PGV Generation</a></li><li>
<a id="pgfId-121697"></a><a href="hierarchical.html#15460">Block PGV Inputs for Top-Level Extraction and Simulation</a></li><li>
<a id="pgfId-121708"></a><a href="hierarchical.html#85945">The Top-Level Extraction and Simulation Run</a></li><li>
<a id="pgfId-121719"></a><a href="hierarchical.html#18860">Multi-Mode Support</a></li><li>
<a id="pgfId-121729"></a><a href="hierarchical.html#51281">A Sample Script for Automated Batch Mode Flow</a></li></ul></li><li>
<a id="pgfId-124385"></a><a href="hierarchical.html#44529">Analyzing the EMIR Results for Hierarchical Analysis</a><ul><li>
<a id="pgfId-124386"></a><a href="hierarchical.html#58571">Loading the IR/EM Results for the Hierarchical Flow in the GUI</a></li><li>
<a id="pgfId-124398"></a><a href="hierarchical.html#32653">Viewing Plots for Top and Block-Level Results</a></li><li>
<a id="pgfId-124408"></a><a href="hierarchical.html#59331">Analyzing the EMIR Results</a></li></ul></li><li>
<a id="pgfId-118949"></a><a href="hierarchical.html#88705">Sample File Formats for Hierarchical EMIR analysis</a><ul><li>
<a id="pgfId-118967"></a><a href="hierarchical.html#79962">Sample Block-Level xDSPF Files</a></li><li>
<a id="pgfId-118984"></a><a href="hierarchical.html#33329">A Sample Top-Level xDSPF file</a></li><li>
<a id="pgfId-118994"></a><a href="hierarchical.html#43182">A Macro LEF File</a></li></ul></li></ul>































<h2>
<a id="pgfId-75101"></a><a id="16027"></a>Hierarchical EMIR Analysis in Voltus-Fi-XL </h2>

<p>
<a id="pgfId-111828"></a>Voltus-Fi is used for transistor-level power-integrity analysis that includes simulation and EM and IR drop (EMIR) analysis for transistor designs captured in the xDSPF netlist extracted from the layout. The target designs include analog, analog/mixed-signal (AMS), and custom digital designs of large sizes that are created using Virtuoso.</p>
<p>
<a id="pgfId-111829"></a>In the current scenario, shrinking geometries and increasing design complexities have increased the probability of chip failures if the designs are not accurately analyzed for either EM or IR problems.</p>
<p>
<a id="pgfId-111830"></a>The increase in the size of the designs, to include several million instances and an even larger number of nodes, might result in exceeding the simulation capacity required to solve the complete design. In such scenarios, it is imperative to apply an hierarchical approach to simulate these designs.</p>
<p>
<a id="pgfId-111862"></a>Hierarchical analysis is useful for simulating large top-level designs that have multiple levels. Flat simulation and analysis of such designs uses a lot of space and increases the run time tremendously. </p>
<p>
<a id="pgfId-112365"></a>The Voltus-Fi Hierarchical EMIR flow enables the hierarchical signoff for AoT (Analog on Top) designs with a cockpit that is fully integrated within Virtuoso, similar to the flat Voltus-Fi EMIR flow. The Hierarchical analysis results are displayed on the Virtuoso layout with all the features and capabilities of flat Voltus-Fi EMIR analysis. </p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-128596"></a>
This feature is only available when the VTS-Fi-AA license is checked out. This is an advanced license that is not available as part of the Voltus-Fi-XL license.</div>

<p>
<a id="pgfId-112366"></a>The Voltus-Fi hierarchical EMIR flow has the following advantages:</p>
<ul><li>
<a id="pgfId-112406"></a>Lets you analyze and fix EMIR violations for the block and top-level of the design, together and separately.</li><li>
<a id="pgfId-112424"></a>Provides a single interface for the complete hierarchical analysis.</li><li>
<a id="pgfId-112431"></a>Provides flexibility to choose either port, detailed, or reduced models of blocks to be used for top-level signoff.</li><li>
<a id="pgfId-112466"></a>Provides high performance and high simulation capacity as compared to the flat flow with comparable accuracy &#8211; EMIR signoff for large designs.</li><li>
<a id="pgfId-112475"></a>Provides support for multiple ports as blocks.</li></ul>





<h2>
<a id="pgfId-112490"></a><a id="25676"></a>The High-Level Flow</h2>

<p>
<a id="pgfId-112367"></a>The integrated hierarchical EMIR flow involves Quantus, MMSIM, and Voltus-Fi working in an integrated manner.</p>
<p>
<a id="pgfId-114108"></a>Following are the key features of this flow: </p>
<ul><li>
<a id="pgfId-111938"></a>The PGVs (power grid-views) are leveraged to create a model of the block to enable the hierarchical EMIR flow within Voltus-Fi.</li><li>
<a id="pgfId-111939"></a>The PGVs and a block-level xDSPF file is written out.</li><li>
<a id="pgfId-114740"></a>Extraction is performed using Quantus and the block PGVs are used to connect from the top level to the block level. The output is a top-level xDSPF file.</li><li>
<a id="pgfId-111941"></a>Multi-mode simulation (MMSIM) is performed using Spectre<sup>&#174;</sup> Accelerated Parallel Simulator (APS)/eXtensive Partitioned Simulator (XPS) to process the top-level xDSPF with the block-level xDSPF.</li><li>
<a id="pgfId-111929"></a>The top-level and block-level EMIR analysis results are analyzed in Voltus-Fi and the plots are displayed on the Virtuoso layout.</li></ul>




<p>
<a id="pgfId-112084"></a>This following diagram illustrates the above flow.</p>

<p><strong>Figure 15-1
<a id="pgfId-112046"></a>The High-Level Flow</strong></p>
<p>
<a id="pgfId-112056"></a></p>
<div class="webflare-div-image">
<img width="625" height="491" src="images/hierarchical-3.gif" /></div>

<p>
<a id="pgfId-112114"></a>The Voltus-Fi Hierarchical EMIR flow uses the extraction and simulation tools in the flow and the Voltus-Fi cockpit drives the flow. The sequence of steps in the Hierarchical flow within Voltus-Fi are listed below.</p>
<ul><li>
<a id="pgfId-101216"></a>Generating block-level PGVs and block-level xDSPF</li><li>
<a id="pgfId-101219"></a>Running Quantus for generating the top-level xDSPF</li><li>
<a id="pgfId-110832"></a>Running top-level simulation using both block-level and top-level xDSPF files</li><li>
<a id="pgfId-110866"></a>Displaying the EMIR plots for top and block levels and analyzing the results</li></ul>



<p>
<a id="pgfId-101220"></a>The above steps are detailed in subsequent sections of this document. The following diagram illustrates the above flow.</p>

<p><strong>Figure 15-2
<a id="pgfId-101186"></a>The Hierarchical EMIR Flow in Voltus-Fi</strong></p>
<p>
<a id="pgfId-101189"></a></p>
<div class="webflare-div-image">
<img width="443" height="418" src="images/hierarchical-4.gif" /></div>
<h2>
<a id="pgfId-91018"></a><a id="20674"></a>Compatible Software Versions</h2>

<p>
<a id="pgfId-91035"></a>The following software versions are recommended for the hierarchical flow:</p>
<ul><li>
<a id="pgfId-91064"></a>Voltus-Fi-XL 6.1.7 ISR or ICADV123 ISR latest version</li><li>
<a id="pgfId-91083"></a>MMSIM 15.1.0 latest version</li><li>
<a id="pgfId-91109"></a>EXT 16.1.1 latest version</li></ul>



<h2>
<a id="pgfId-90948"></a><a id="57125"></a>Data Requirements for the Hierarchical EMIR Flow</h2>

<p>
<a id="pgfId-90949"></a>To run the hierarchical EMIR flow, ensure that the following inputs are available:</p>
<ul><li>
<a id="pgfId-121920"></a>All inputs for generating PGVs for the blocks. For details, see <a href="pgvcreation.html#15444">Data Requirements and Flow for PGV Creation</a> in the &#8220;Power-Grid View Generation&#8221; chapter. In addition, for the hierarchical flow, provide the following:<ul><li>
<a id="pgfId-121997"></a>LibGen command file for any additional commands needed for creating block PGVs.</li><li>
<a id="pgfId-122015"></a>Path to the LibGen binary. This is used only to specify a binary outside the IC hierarchy. By default, the software uses the binary available in the IC hierarchy.</li></ul></li><li>
<a id="pgfId-121937"></a>All inputs required for embedded extraction flow in Voltus-Fi. Ensure the following:<ul><li>
<a id="pgfId-121961"></a>The Quantus hierarchy is available because the software calls the Quantus binary from this path.</li><li>
<a id="pgfId-121962"></a>The Pegasus, PVS, or Calibre&#174; run is performed with the &#8220;lvs black box&#8221; option to generate the Pegasus, PVS, or Calibre database, which is the input database for generating the xDSPF file using Quantus.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-122233"></a>For the hierarchical flow, Quantus only supports the input database <code>svdb</code> that is generated by Pegasus, PVS, and Calibre LVS.</div></li><li>
<a id="pgfId-121953"></a>The PGV binary database is available.</li></ul></li><li>
<a id="pgfId-112783"></a>Inputs required for top-level simulation.<ul><li>
<a id="pgfId-122034"></a>Current/PWL file from the block simulation.</li><li>
<a id="pgfId-122066"></a>The input circuit file, which contains information about models/vectors and other parameters required for top-level simulation.</li></ul></li></ul>










<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-133570"></a>Pegasus, the new physical verification system, will be available in the 18.2 physical verification release. </div>

<h3>
<a id="pgfId-115112"></a><a id="86070"></a><a id="15083"></a>Types of Block-Level xDSPF &#8211; Detailed, Port, and Via Snapped</h3>

<p>
<a id="pgfId-115113"></a>In the hierarchical flow, block-level xDSPF is generated from the PGVs. </p>
<p>
<a id="pgfId-115114"></a>The PGVs contain the complete RC grid for all the power nets and their node locations and current taps, which can be written in the xDSPF format. However, the complete RC grid may not be required for all the blocks, so you can choose to create the xDSPF for a block to include only a specific type of information. The following options are available:</p>
<ul><li>
<a id="pgfId-115115"></a>Detailed xDSPF: Includes the complete RC grid information for the blocks. The current taps are on the device locations of the original block. The xDSPF subcircuit name is <code>&lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>BlockName</em></span><code>&gt;_Detailed</code>.</li><li>
<a id="pgfId-115116"></a>Port xDSPF: Includes the port model information for all the interface nodes but does not include the RC grid information. The current taps are at the interface locations, and the xDSPF subcircuit name is <code>&lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>BlockName</em></span><code>&gt;_Port</code>.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-122285"></a>This xDSPF file is not recommended for hierarchical analysis because of low accuracy results.</div></li><li>
<a id="pgfId-115117"></a>ViaLayer/MetalLayer/&lt;<em>LayerName</em>&gt;: Includes the RC grid information only for the layers above the specified layer. However, the capacitance and currents of all the layers below the specified layer will be distributed on the specified layer. The xDSPF subcircuit name is <code>&lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>BlockName</em></span><code>&gt;_&lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>LayerName</em></span><code>&gt;.</code></li></ul>



<p>
<a id="pgfId-115118"></a>The name of the layer above which the RC information should be included in the via layer xDSPF that is generated is specified in the GUI by using the <em>Stop Layer</em> field in the Create Power Grid Views form. In batch mode, it is provided by specifying the <code>-hier_flow_stop_layer</code> <span class="webflare-courier-new" style="white-space:pre"><em>layer_name</em></span> parameter of the <code>create_pgv</code> command. </p>
<p>
<a id="pgfId-122320"></a>For example, if <code>via1</code> is specified as the stop layer, then the power grids of all the layers below <code>via1</code> will be removed from the xDSPF file and their capacitance and the currents will be distributed either on <code>via1</code> or the layers above it.</p>

<div class="webflare-information-macro webflare-macro-information">
<a id="pgfId-122340"></a>
If the type of xDSPF file is not specified while performing the top-level simulation, then the software generates Detailed and Port xDSPF files. If the stop layer is specified, all three types of xDSPF files are generated by default.</div>
<h3>
<a id="pgfId-115886"></a><a id="23321"></a>PWL Current Files for Top-Level Simulation</h3>

<p>
<a id="pgfId-115900"></a>For the top-level simulation in the hierarchical flow, block currents are specified using PWL files. These files are generated while running the block simulation. </p>

<p><strong>Figure 15-3
<a id="pgfId-116072"></a>Block-Level Simulation PWL Generation</strong></p>
<p>
<a id="pgfId-116088"></a></p>
<div class="webflare-div-image">
<img width="239" height="260" src="images/hierarchical-5.gif" /></div>

<p>
<a id="pgfId-115988"></a>The PWL files include the following information:</p>
<ul><li>
<a id="pgfId-115915"></a>Tap device and terminal name</li><li>
<a id="pgfId-115916"></a>Subckt port PWL current</li><li>
<a id="pgfId-115917"></a>Tap device PWL current</li><li>
<a id="pgfId-115918"></a>Average resistance and capacitance for tap device</li><li>
<a id="pgfId-115907"></a>Time-varying always-on resistance (Ron) for power-gated designs </li></ul>




<p>
<a id="pgfId-115960"></a>The PWL files are written using the following keyword in the EMIR configuration file:</p>
<p>
<a id="pgfId-115970"></a><code>eisopt save_tapi=&lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>designName.tapi</em></span><code>&gt;</code></p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-116042"></a>The PWL file is only created in the Iterated mode of simulation. It is not supported in the direct mode of simulation. For details of the two modes, see <a href="dataprep.html#81519">Spectre APS/XPS EMIR Flow Overview</a> in the &#8220;Data Preparation&#8221; chapter.</div>

<h2>
<a id="pgfId-87020"></a><a id="54745"></a>Hierarchic<a id="HierAnalysisGUIMode"></a>al EMIR Analysis Flow in GUI Mode</h2>

<p>
<a id="pgfId-110595"></a>The hierarchical EMIR flow in Voltus-Fi-XL enables the hierarchical signoff for the Analog on Top (AoT) designs with a cockpit that is fully integrated within Virtuoso. Voltus-Fi-XL supports the hierarchical EMIR flow in both GUI and batch modes. The flow in the GUI mode comprises the following steps:</p>
<ol><li>
<a id="pgfId-115080"></a><a href="hierarchical.html#68685">Opening the Hierarchical EMIR Forms</a></li><li>
<a id="pgfId-114958"></a><a href="hierarchical.html#55608">Creating the Block PGVs and xDSPF</a></li><li>
<a id="pgfId-114976"></a><a href="hierarchical.html#18661">Generating the Top-Level xDSPF File</a></li><li>
<a id="pgfId-114987"></a><a href="hierarchical.html#32075">Running the Top-Level Simulation</a></li></ol>




<h3>
<a id="pgfId-88561"></a><a id="68685"></a>Opening the Hierarchical EMIR Forms </h3>

<p>
<a id="pgfId-99288"></a>To start the hierarchical EMIR flow, you need to open the three related forms: Create Power Grid Views, Extract xDSPF, and Hierarchical Top Simulation. To open these forms, perform the following step.</p>
<ul><li>
<a id="pgfId-138822"></a>In the Voltus-Fi-XL interface, choose <em>Hierarchical EMIR.</em> </li></ul>

<h3>
<a id="pgfId-95526"></a><a id="55608"></a>Creating the Block PGVs and xDSPF</h3>

<p>
<a id="pgfId-115014"></a>As a first step in the hierarchical flow within Voltus-Fi, block-level PGVs and xDSPF files are generated. In the GUI, the Create Power Grid Views form of Voltus-Fi is enhanced to specify the options for the hierarchical flow. </p>
<p>
<a id="pgfId-115638"></a>In batch mode, the <a href="hierarchical.html#31483">set_mmsim_pgv_nets</a> command is used to specify the nets for which you want to create PGVs, and the <a href="hierarchical.html#70543">create_pgv</a> command is enhanced to specify the settings for the hierarchical flow. The GUI use model is detailed below.</p>
<p>
<a id="pgfId-115521"></a>In the <em>Hierarchical EMIR</em> menu, click the <em>Block Power Grid View Generation</em> submenu. The Create Power Grid Views form opens.</p>

<p><strong>Figure 15-4
<a id="pgfId-75112"></a><a id="27494"></a>The Create P<a id="CreatePowerGridViewsHier"></a>ower Grid Views Form</strong></p>
<p>
<a id="pgfId-75116"></a>    </p>
<div class="webflare-div-image">
<img width="441" height="710" src="images/hierarchical-6.gif" /></div>

<p>
<a id="pgfId-106433"></a>In this form, you can provide the information detailed below.</p>
<ul><li>
<a id="pgfId-106434"></a>Specify the <em>OA Libs</em>, which is the name of the open access (OA) database library.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-106435"></a>If this option is specified, the <em>Tech Lef File/Macro Lef File </em>options do not need to be specified.</div></li><li>
<a id="pgfId-106436"></a>Specify the <em>Macro Name</em><em>, </em>which is the top cell name.</li><li>
<a id="pgfId-106437"></a>Specify the <em>Library Name</em><em>,</em> which is the name of the library. This option is used to create a library with a name different than that of the macro. By default, a library is created with the same name as that of the macro.</li><li>
<a id="pgfId-106438"></a>Specify the <em>Extraction Tech File</em>, which provides the name of the technology file used for reading the technology data.</li><li>
<a id="pgfId-106439"></a>Specify the <em>Tech Lef File</em>, which includes the library exchange format (LEF) information for the technology data.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-125936"></a>The <em>Tech Lef File</em><em> and </em><em>OA Libs</em> options are mutually exclusive.</div></li><li>
<a id="pgfId-117998"></a>Specify the <em>Macro Lef File, which includes the </em>LEF information for the design.<br /><b>Note:</b><br />
<a id="pgfId-132815"></a><ul><li>
<a id="pgfId-117999"></a>In case the technology data and design data are in the same LEF file, use any of the two options,<em> Tech Lef File </em>or<em> Macro Lef File </em>to specify the filename<em>.</em></li><li>
<a id="pgfId-126057"></a>The <em>Macro Lef File</em><em> and </em><em>OA Libs</em> options are mutually exclusive.</li></ul></li><li>
<a id="pgfId-106442"></a>Specify the <em>Lef Def Layer Map File</em>, which provides the mapping between LEF layer names and technology layer names. <br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-131441"></a>If the lef def layer map file is not specified, the software automatically generates this file. For details, see <a href="pgvcreation.html#47366">Automatic Generation of Layer Map Files</a> in the &#8220;Power-Grid View Generation&#8221; chapter.</div></li><li>
<a id="pgfId-106443"></a>Specify the power-grid database or the <em>PGDB Layer Map File, </em>which provides the mapping between the xDSPF layer names that are written in the simulation database, and the technology layer names. <br /><b>Note:</b><br />
<a id="pgfId-132827"></a><ul><li>
<a id="pgfId-106444"></a>If an xDSPF layer name is missing in this file, the PGVs will not contain data for that layer.</li><li>
<a id="pgfId-131483"></a>If the PGDB layer map file is not specified, the software automatically generates this file. </li></ul><br />
<a id="pgfId-132836"></a>For details, see <a href="pgvcreation.html#47366">Automatic Generation of Layer Map Files</a> in the &#8220;Power-Grid View Generation&#8221; chapter.<br />
<a id="pgfId-106445"></a>For more information about the LEF layer map file and PGDB layer map file formats, see <a href="fileformats.html#35924">LEF layer Map File</a> and <a href="fileformats.html#57642">PGDB layer Map File</a> in the &#8220;File Formats&#8221; chapter.<br />
<a id="pgfId-106452"></a>The <em>Tech Lef File</em>, the <em>Macro Lef File</em>, the <em>Lef Def Layer Map File</em>, and the <em>PGDB Layer Map File</em> can be created and edited using the edit buttons provided against each of these fields.</li><li>
<a id="pgfId-106453"></a>Specify the <em>Simulation Directory</em>. For the hierarchical flow, the simulation directory may or may not contain the current (<code>*.ptiavg</code>) files.</li><li>
<a id="pgfId-106455"></a>Specify the <em>Simulation Prefix,</em> which is the prefix used for creating an instance while performing the simulation. The prefix is specified along with the hierarchy separator. This input is optional.<br />
<a id="pgfId-106456"></a>For example, you can specify &#8220;<code>XO.&#8221;</code> or &#8220;<code>IO.&#8221;. </code>In these examples,<code> &#8220;XO&#8221; </code>or<code> &#8220;IO&#8221; </code>are prefixes<code> and &#8220;.&#8221; </code>is the hierarchy separator. You can check the prefix used during simulation in your simulator input file.</li><li>
<a id="pgfId-106458"></a>Specify the <em>UTI Ron File </em>that is generated by Spectre. This file contains multiple on-resistance (Ron) values &#8211; minimum, maximum, and average &#8211; for powergates. A sample file is shown below:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id106459">
<a id="pgfId-106459"></a>D-Term-Net   S-Term-Net   Ron_avg(Ohm) Ron_max(Ohm) Ron_min(Ohm) Power-Gate   </pre><pre class="webflare-pre-block webflare-courier-new" id="#id106460">
<a id="pgfId-106460"></a>outp       VDD         1268.34      1302.38      1230.52     MPM3         </pre><pre class="webflare-pre-block webflare-courier-new" id="#id106461">
<a id="pgfId-106461"></a>outp       VDD         1268.03      1302.06      1230.2      MPM3@39      </pre><pre class="webflare-pre-block webflare-courier-new" id="#id106462">
<a id="pgfId-106462"></a>outp       VDD         1268         1302.04      1230.18     MPM3@40      </pre><pre class="webflare-pre-block webflare-courier-new" id="#id106463">
<a id="pgfId-106463"></a>outp       VDD         1268.03      1302.07      1230.21     MPM3@41</pre><span class="indent-as-level2"><pre class="webflare-pre-block webflare-courier-new" id="#id106464">
<a id="pgfId-106464"></a></pre></span>
<a id="pgfId-106465"></a>If this file is not specified, Voltus-Fi uses the <code>Ron</code> values from the Spectre simulation database (<code>*.emir#_bin</code> file).</li><li>
<a id="pgfId-106466"></a>Specify the <em>Trigger File</em>, which is a text file that is used during a dynamic current simulation to run a detailed analysis for determining the distribution of current. For detailed information about the trigger file format and contents, see <a href="fileformats.html#59638">Format and Contents of Trigger File</a> in the &#8220;File Formats&#8221; chapter.</li><li>
<a id="pgfId-106524"></a>The <em>Hierarchical Flow xDSPF generation</em> option is selected by default. This option enables the hierarchical EMIR analysis. </li><li>
<a id="pgfId-106564"></a>Specify the <em>Stop Layer</em> to specify the layer for creating a snapped via layer xDSPF. When the stop layer name is specified, the RC grid for all the layers below the specified layer will not be included in the xDSPF file that is generated for the block.</li><li>
<a id="pgfId-106573"></a>Specify the <em>Sub Node Char</em> that will be used as the subnode identification. By default, <code>#</code> is specified.</li><li>
<a id="pgfId-106591"></a>Specify the <em>Net Name</em> and the corresponding <em>Voltage</em>. </li><li>
<a id="pgfId-106592"></a>Specify the <em>State Directory/Results File</em>, which is the simulation result file.<em> </em>The naming convention of the simulation result file is, <code>*.emir#_bin</code>. </li><li>
<a id="pgfId-106638"></a>The table below is populated with the information about the specified <em>Net Name</em>, <em>Voltage,</em> and <em>EMIR Results DB File</em>.<ul><li>
<a id="pgfId-106593"></a>Click <em>Add</em> to add a net to the list.</li><li>
<a id="pgfId-106594"></a>Click <em>Remove</em> to remove a net from the list.</li></ul></li><li>
<a id="pgfId-106612"></a>In the <em>Output </em>group box, specify the <em>Results Directory</em>, which is the output directory for the PGVs. By default, the PGVs are stored in the work directory.</li></ul>











































<h3>
<a id="pgfId-106699"></a><a id="18661"></a>Generating the Top-Level xDSPF File</h3>

<p>
<a id="pgfId-106710"></a>Once the block PGVs and xDSPF files are generated, the next step involves performing extraction using the embedded Quantus flow of Voltus-Fi and generating the top-level xDSPF file. </p>
<p>
<a id="pgfId-115231"></a>In the GUI, the Extract xDSPF form of Voltus-Fi is enhanced to specify the options for the hierarchical flow.</p>
<p>
<a id="pgfId-115714"></a>In batch mode, the <a href="batchmode.html#76419"><h-hot>extract_xdspf</h-hot><code></code></a> command is enhanced to include the settings for the hierarchical flow. The GUI use model is detailed below.</p>
<p>
<a id="pgfId-129060"></a>In the <em>Hierarchical EMIR</em> menu, select <em>Extract Top DSPF</em>. The Extract xDSPF form opens.</p>

<p><strong>Figure 15-5
<a id="pgfId-106725"></a>The E<a id="ExtractxDSPFHier"></a>xtract xDSPF Form</strong></p>
<p>
<a id="pgfId-106735"></a></p>
<div class="webflare-div-image">
<img width="586" height="793" src="images/hierarchical-7.gif" /></div>

<p>
<a id="pgfId-106779"></a>In this form, you can provide the information detailed below. </p>
<p>
<a id="pgfId-136079"></a>In the <em>Input</em> section:</p>
<ul><li>
<a id="pgfId-106811"></a>For <em>Data Type</em>, select either <em>PVS/Pegasus</em> or <em>Calibre</em>. This specifies whether the input data will come from <em>Pegasus</em> or <em>Calibre</em>. By default, <em>PVS/Pegasus</em> is selected.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-134735"></a>In case PVS was used to generate data, Pegasus should be selected.</div></li><li>
<a id="pgfId-106812"></a>Specify the <em>Data Directory</em>, which is the svdb directory created with lvs black box option, that provides the path to the directory in which the input data is stored. </li><li>
<a id="pgfId-106813"></a>Specify the <em>Run Name</em>, which is the name of the Pegasus or Calibre run.</li><li>
<a id="pgfId-136124"></a>Specify the <em>Post Processing Script</em>, which is the name of the post-processing script file.</li></ul>




<p>
<a id="pgfId-136137"></a>In the <em>Process</em> section:</p>
<ul><li>
<a id="pgfId-136173"></a>Specify the <em>Foundry / Process Node</em>. The following options are available:<ul><li>
<a id="pgfId-136174"></a><em>N5/N3: </em>for N5 and N3 process nodes</li><li>
<a id="pgfId-136175"></a><em>N7:</em> for N7 process nodes</li><li>
<a id="pgfId-136176"></a><em>N10-PG</em>: for N10 process nodes with PG rules</li><li>
<a id="pgfId-136177"></a><em>N10</em>: for N10 process nodes</li><li>
<a id="pgfId-136178"></a><em>N20/N16/N12</em>: for N20, N16, and N12 process nodes</li><li>
<a id="pgfId-136179"></a><em>N14</em>: for N14 process nodes</li><li>
<a id="pgfId-136180"></a><em>Others &gt; 20</em>: for process nodes greater than N20</li></ul></li><li>
<a id="pgfId-106862"></a>Select <em>Signal EM</em> to specify that signal nets should be included in the xDSPF file. When <em>Signal EM</em> is selected, the following command is added to the Quantus command file or the common command language (CCL) file, to perform decoupled RC extraction <code>(rc_decoupled) </code>for all nets. <br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-135925"></a>In <code>rc_decoupled</code> extraction, an RC network for the specified net(s) with both parasitic resistance and capacitance decoupled to ground is extracted.</div><pre class="webflare-pre-block webflare-courier-new" id="#id135926">
<a id="pgfId-135926"></a>extract \
   -selection &quot;all&quot; \
   -type &quot;rc_decoupled&quot;</pre>
<a id="pgfId-135927"></a>When <em>Signal EM</em> is not selected, you need to provide the names of the power or ground nets on which <code>rc_decoupled</code> extraction will be performed. For all other nets, <code>c_only_decoupled</code> extraction is performed. <br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-135928"></a>In <code>c_only_decoupled</code> extraction, only parasitic capacitance between the specified nets and adjacent nets decoupled to the specified cap ground is extracted.</div>
<a id="pgfId-135929"></a>For example, when the following command is specified, <code>c_only_decoupled</code> extraction is performed on all nets:<pre class="webflare-pre-block webflare-courier-new" id="#id135930">
<a id="pgfId-135930"></a>extract \</pre><pre class="webflare-pre-block webflare-courier-new" id="#id135931">
<a id="pgfId-135931"></a>   -selection &quot;all&quot; \</pre><pre class="webflare-pre-block webflare-courier-new" id="#id135932">
<a id="pgfId-135932"></a>   -type &quot;c_only_decoupled&quot;</pre>
<a id="pgfId-135933"></a>When the following command is specified, <code>rc_decoupled</code> extraction is performed on nets specified in the <code>vfiQrc_nets</code> file. For all other nets, <code>c_only_decoupled</code> extraction is performed.<pre class="webflare-pre-block webflare-courier-new" id="#id135934">
<a id="pgfId-135934"></a>extract \</pre><pre class="webflare-pre-block webflare-courier-new" id="#id135935">
<a id="pgfId-135935"></a>   -selection &quot;nets_file ./vfiQrc_nets&quot;</pre><pre class="webflare-pre-block webflare-courier-new" id="#id106874">
<a id="pgfId-106874"></a>   -type &quot;rc_decoupled&quot;</pre></li><li>
<a id="pgfId-106875"></a>Specify <em>PG Net(s)</em> or the power and ground nets that should be included in the xDSPF file. This option is specified only when the <em>Signal EM</em> option is not selected. If the <em>Signal EM</em> option is not selected and <em>PG Nets</em> are not provided, a pop-up window opens asking for the list of PG Nets.</li><li>
<a id="pgfId-106876"></a>Specify the <em>Nets File</em> that contains the names of the nets to be included in extraction. When the <em>Nets File</em> option is checked, the <em>Signal EM</em> and <em>PG Net(s)</em> options will be ignored.</li><li>
<a id="pgfId-106801"></a>The <em>Hierarchical EMIR flow</em> check box is selected by default. This option enables hierarchical EMIR analysis.</li><li>
<a id="pgfId-106832"></a>Specify the <em>PGV Library Name</em>, which is the block PGV library name that is generated in the first step and used for the block-level extraction performed for the hierarchical flow.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-122482"></a>If there are multiple block PGVs to be used, create a merged library and specify the name of that library in the <em>PGV Library Name</em> field. This is required to be done only in the GUI mode. In batch mode, the merged library is created automatically.</div></li><li>
<a id="pgfId-106877"></a>In the <em>Extraction Type</em> cyclic field, specify one of the following:<ul><li>
<a id="pgfId-106878"></a><em>RC</em>: specifies that both parasitic resistors and capacitors will be extracted</li><li>
<a id="pgfId-106879"></a><em>R only</em>: specifies that only parasitic resistors will be extracted<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-106881"></a>When <em>Extraction Type</em> selected is <em>R only</em>, the simulation time is short. While selecting the extraction type, consider the type of simulation being run. By default, <em>RC</em> extraction type is selected.</div></li></ul></li><li>
<a id="pgfId-106882"></a>In the <em>Cap Coupling Model </em>cyclic field, select one of the following:<ul><li>
<a id="pgfId-106883"></a><em>De-coupled</em>: specifies that decoupled capacitance extraction will be performed</li><li>
<a id="pgfId-106884"></a><em>Coupled</em>: specifies that coupled capacitance extraction will be performed<br />
<a id="pgfId-106885"></a>By default, the <em>De-coupled</em> mode is selected.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-137372"></a>While specifying the coupling mode, ensure that there is no <code>extract</code> command defined in the additional CCL file. The <code>extract</code> command in the additional CCL file will override the above options. For more information about the above options, see the <em>Quantus Extraction Users Manual</em>.</div></li></ul></li><li>
<a id="pgfId-106924"></a>Select <em>Parasitic RES Color</em> to enable color-aware EM analysis.</li><li>
<a id="pgfId-106925"></a>Select <em>Compression</em> to generate the xDSPF in a compressed format.</li><li>
<a id="pgfId-106926"></a>Select <em>Reduce I-Cards</em> to enable the <code>reduce_i_cards</code> option in the CCL file that is used for generating the xDSPF file. If a net is capacitance only, it is qualified for reduced I card or instance card treatment. This means the I cards and the corresponding dummy resistors are not printed in the results.</li><li>
<a id="pgfId-106927"></a>Select <em>Comment Sub Ckt</em> to comment out the top subcircuit statements from the xDSPF file.</li><li>
<a id="pgfId-106928"></a>Select <em>Sub Conductor Model</em> to specify the parasitic resistor models for the subconductor layers that should be included during extraction. This is used to support different EM rules for poly layers during EM analysis.</li><li>
<a id="pgfId-136515"></a>Select <em>Filter RES Center</em> to include sub-nodes after eliminating resistors with small resistance values. When this option is selected, the survivor sub-nodes, among a group of sub-nodes that are formed by the filtered resistors, are chosen based on their proximity to the geometric center of the group. This field is specific to process nodes 5nm and below.</li><li>
<a id="pgfId-136616"></a>Select <em>Filter RES By Layer</em> to specify the LVS layer name for which the minimum resistance value for the extracted parasitic resistors is to be applied. If the layer name is not specified, the default value, <code>RH_TN_6 0</code>, is used. This field is specific to process nodes 5nm and below. </li><li>
<a id="pgfId-136259"></a>Specify the <em>Ref Node</em> or the reference node on which the extraction is to be performed. By default, <code>0</code> is specified.</li><li>
<a id="pgfId-106930"></a>Specify the <em>Sub-Node Char</em> that will be used as subnode identification. By default, <code>#</code> is specified.</li><li>
<a id="pgfId-106931"></a>Specify the <em>Fracture Via Count </em>that will be used to divide pseudo vias into segments during extraction.</li><li>
<a id="pgfId-106932"></a>Specify the <em>Via Array Spacing,</em> which is the distance, a floating point micron value that will be used as the maximum distance criteria for grouping vias within the same array. This means that if the distance between vias is less than the specified maximum distance, they are grouped within the same array. The default value of the via array spacing is 0.35 times the via size for N10, N16, N12, and N20 processes. For other processes, the default is <em>auto</em>, in which case the software sets the via spacing automatically. <br />
<a id="pgfId-106933"></a>Use this option to specify a value other than the default value of 0.35.</li><li>
<a id="pgfId-106934"></a>Specify the <em>Via Array Count </em>number, without the per via layer count option, which is the number of vias per side allowed in an array. The default value is 4. For example, if the via array count is set to 2, the number of vias allowed per array side will be 2.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-106935"></a>For more information about the above, see the <em>Quantus Extraction Users Manual</em>.</div></li></ul>


















































<p>
<a id="pgfId-136287"></a>In the <em>Technology</em> section:</p>
<ul><li>
<a id="pgfId-106964"></a>From the list, either specify the <em>Technology Library File</em> that provides the path of the technology file to be used for reading the technology data, or the name of the <em>Technology Directory</em> that contains the technology file.</li><li>
<a id="pgfId-106969"></a>Specify the <em>Technology Name</em>, which is the technology filename to be used for extraction. This field is optional if the technology directory has been specified.</li><li>
<a id="pgfId-106970"></a>Specify the <em>Corner</em>, which is the name of the technology corner to be picked from the library.</li><li>
<a id="pgfId-106972"></a>Specify the <em>Temperature</em> at which the extraction will be performed. By default, a temperature of 25 degree Celsius is used. The temperature specified for extraction is optional. The options, temperature and <code>temp_coeff</code>, specified in the CCL file are mutually exclusive. The following scenarios hold true.<ul><li>
<a id="pgfId-106973"></a>If you specify a temperature for extraction in the Extract xDSPF form, or by using the <code>-temperature</code> parameter of the <code>extract_xdspf</code> command in batch mode, the following option in the CCL file will be set to <code>false</code>:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id106977">
<a id="pgfId-106977"></a>-include_parasitic_res_temp_coeff &quot;false&quot; \</pre>
<a id="pgfId-106978"></a>The software displays the following message:<pre class="webflare-pre-block webflare-courier-new" id="#id106979">
<a id="pgfId-106979"></a><code>User specified temperature will be used for extraction. The option -include_parasitic_res_temp_coeff will be set to false.</code></pre></li><li>
<a id="pgfId-106980"></a>If the temperature is not specified for extraction, the following option in the CCL file will be set to <code>true</code>:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id106981">
<a id="pgfId-106981"></a>-include_parasitic_res_temp_coeff &quot;true&quot; \</pre>
<a id="pgfId-106982"></a>The software displays the following message:<pre class="webflare-pre-block webflare-courier-new" id="#id106983">
<a id="pgfId-106983"></a><code>No user specified temperature value so the option -include_parasitic_res_temp_coeff will be set to true.</code></pre></li></ul></li><li>
<a id="pgfId-106984"></a>Specify the number of CPUs to be used during the Quantus extraction run in the <em>No of CPUs </em>field. </li><li>
<a id="pgfId-106985"></a>Specify the <em>SubCkt Pin Order File </em>to provide the order of pins to be used during extraction. The pin order is specified in the xDSPF file using the <code>.SUBCKT</code> and <code>.ENDS</code> statements. By default, for the hierarchical flow, the software uses the pin order file for blocks from the PGV directory. You can use this option to provide a file with a different pin order that will override the order specified using the default<code> .SUBCKT</code> statement in the xDSPF file. <br />
<a id="pgfId-106986"></a>Below are examples of pin orders in the xDSPF file before and after specifying the pin order file.<br />
<a id="pgfId-106987"></a>Without the sub-circuit pin order file<pre class="webflare-pre-block webflare-courier-new" id="#id106988">
<a id="pgfId-106988"></a>    .SUBCKT top In_001 VDD Out_001  VSS In_002 Out_002 In_003 Out_004 ...</pre><pre class="webflare-pre-block webflare-courier-new" id="#id106989">
<a id="pgfId-106989"></a>    .ENDS</pre>
<a id="pgfId-106990"></a>With the sub-circuit pin order file<pre class="webflare-pre-block webflare-courier-new" id="#id106991">
<a id="pgfId-106991"></a>    .SUBCKT top VDD VSS In_001 Out_001 In_002 Out_002 In_003 Out_004 ...</pre><pre class="webflare-pre-block webflare-courier-new" id="#id106992">
<a id="pgfId-106992"></a>    .ENDS</pre></li><li>
<a id="pgfId-137349"></a>Specify the <em>Customized Extract Commands File</em> to specify the file with user-customized extract commands. When this file is specified, the Voltus-Fi-generated CCL will not have any extract commands, and the commands from the customized extract commands file will be added in the Voltus-Fi-generated CCL.<br />
<a id="pgfId-137350"></a>A sample customized extract commands file is as follows:<pre class="webflare-pre-block webflare-courier-new" id="#id137351">
<a id="pgfId-137351"></a>extract \</pre><pre class="webflare-pre-block webflare-courier-new" id="#id137352">
<a id="pgfId-137352"></a>   -selection &quot;all&quot; \</pre><pre class="webflare-pre-block webflare-courier-new" id="#id137353">
<a id="pgfId-137353"></a>   -type &quot;rc_coupled&quot;</pre><pre class="webflare-pre-block webflare-courier-new" id="#id137354">
<a id="pgfId-137354"></a></pre><pre class="webflare-pre-block webflare-courier-new" id="#id137355">
<a id="pgfId-137355"></a>extract \</pre><pre class="webflare-pre-block webflare-courier-new" id="#id137356">
<a id="pgfId-137356"></a>   -selection nets_file &quot;file.txt&quot; \</pre><pre class="webflare-pre-block webflare-courier-new" id="#id137357">
<a id="pgfId-137357"></a>   -type &quot;none&quot;</pre><br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-137358"></a>You can create a <code>customextract</code> file by using either single or multiple extract settings. Ensure that the commands are in the Quantus CCL file syntax because this file is added as is in the Voltus-Fi-generated CCL.</div></li><li>
<a id="pgfId-137390"></a>Select <em>Add Extract Command</em> if you want Voltus-Fi to add the extract commands to the CCL file. <br />
<a id="pgfId-137792"></a>By default, when a <code>customextract</code> file is specified, all commands, including the extract commands, from that file are added to the Voltus-Fi-generated CCL file. However, when you select <em>Add Extract Command</em>, Voltus-Fi adds the extract commands to the CCL file, and all other commands specified in the <code>customextract</code> file are added to the CCL file.</li><li>
<a id="pgfId-106999"></a>Specify the <em>Parasitic blocking device cells</em> <em>file</em> to specify the file containing parasitic blocking device cell names, if any. Once a cell is declared as a blocking cell, all the parasitic RCs inside the cell are not extracted. If the cell content overlaps top cell routing, then the top cell routing&#39;s RCs in the overlapping regions are also not extracted.</li></ul>





































<p>
<a id="pgfId-107000"></a>In the <em>Output </em>section:</p>
<ul><li>
<a id="pgfId-107001"></a>Specify the <em>Directory</em>, which is the output directory in which the xDSPF file will be saved. If this file is not specified, a pop-up window opens asking for the name of the directory.</li><li>
<a id="pgfId-107002"></a>Specify the name of the <em>xDSPF</em> file that will be generated. If the filename is not specified, the software generates a file with the name, <code>&lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>runName</em></span><code>&gt;.dspf</code>, by default.</li><li>
<a id="pgfId-136630"></a>Select<em> Autorun Spfchecker </em>to automatically run the SPF Checker utility after the extraction run. SPF Checker checks the syntax of the DSPF/SPEF followed by opening the output log. It also compares the terminal names in the DSPF and the device models and populates the summary section with the recommended mapping statements or the <code>spf aliasterm</code> statements.<br />
<a id="pgfId-136631"></a>This check box is selected by default.<br /><b>Note:</b><br />
<a id="pgfId-136704"></a><ul><li>
<a id="pgfId-136705"></a>To use this feature, the SPF Checker utility must be located at the MMSIM/Spectre installation directory.</li><li>
<a id="pgfId-136706"></a>SPF Checker works only when the top-level Quantus run is successful.</li></ul></li><li>
<a id="pgfId-107003"></a>Click <em>Generate CCL</em> to create the CCL or the Quantus command file that will be used to run Quantus. By default, <code>vfiQuantus-</code><span class="webflare-courier-new" style="white-space:pre"><em>&lt;cellname&gt;</em></span><code>.ccl</code> is created and the file opens in the Voltus-Fi console. You can view the file and modify it, if required. </li><li>
<a id="pgfId-107004"></a>Click <em>Generate and Run</em> to create the CCL file and run Quantus to create the xDSPF file in a single step. This is useful when you do not want to view the CCL file before running Quantus.<br /><b>Note:</b><br />
<a id="pgfId-137221"></a><ul><li>
<a id="pgfId-137222"></a>When you click <em>Generate and Run</em>, Voltus-Fi creates a file, <code>.vfiExtractDSPFGuiLast</code> to save the form settings. This file gets loaded automatically when the next session starts. If you do not want to load these settings, remove this file before starting the session. This file is created along with <code>cds.lib</code>.</li><li>
<a id="pgfId-137223"></a>The values specified in the <code>.cdsinit </code>file override the values of the <code>.vfiExtractDSPFGuiLast</code> file of the previous session.</li></ul></li><li>
<a id="pgfId-107054"></a>Click <em>Run</em> to select the CCL file to use for running Quantus. This is useful if you have modified the auto-generated CCL file in the previous step. The log is saved both in the <code>vfiQuantus.log</code> and on the Voltus-Fi console.<br />
<a id="pgfId-136650"></a>The <code>vfiQuantus-</code><span class="webflare-courier-new" style="white-space:pre"><em>&lt;cellname&gt;</em></span><code>.log</code> file stores all the CCL commands and the info, warning, and error messages issued by Voltus-Fi during the extraction run. It is saved in the specified output directory.<br />
<a id="pgfId-136651"></a>With every successive extraction run, the name of the log file is updated to <code>vfiQuantus-&lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>cellname</em></span><code>&gt;.log.(n-1)</code>. Here, n-1 is the run number. Therefore, the greater the numeric value in the filename, the more recent or latest that file is.<br />
<a id="pgfId-136652"></a>For example, after three extraction runs, the following log files are created:<ul><li>
<a id="pgfId-136653"></a><code>vfiQuantus-&lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>cellname</em></span><code>&gt;.log</code> (log file for the first run)</li><li>
<a id="pgfId-136654"></a><code>vfiQuantus-&lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>cellname</em></span><code>&gt;.log.1</code> (log file for the second run)</li><li>
<a id="pgfId-136655"></a><code>vfiQuantus-&lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>cellname</em></span><code>&gt;.log.2</code> (log file for the latest run)</li></ul><br />
<a id="pgfId-107055"></a>For information about the format of the Voltus-Fi-generated CCL file and its example, see <a href="fileformats.html#74063">Common Command Language (CCL) File</a> in the &#8220;File Formats&#8221; chapter.</li><li>
<a id="pgfId-137181"></a>Click <em>Reset</em> if you want to revert to the default values. </li></ul>





















<h3>
<a id="pgfId-106848"></a><a id="32075"></a>Running the Top-Level Simulation</h3>

<p>
<a id="pgfId-122519"></a>Once the block-level PGVs are generated and top-level xDSPF is created, the next step is performing the top-level simulation. In this step, the top-level xDSPF generated by Quantus is processed along with the block-level xDSPF generated by VFI-LibGen to perform simulation. </p>
<p>
<a id="pgfId-130692"></a>In the GUI, the Hierarchical Top Simulation form is provided to specify the options for the hierarchical flow. </p>
<p>
<a id="pgfId-115804"></a>In batch mode, two commands, <a href="hierarchical.html#40915">set_block_data</a> and <a href="hierarchical.html#23682">run_top_simulation</a> are provided to specify the settings for the hierarchical flow. The GUI use model is detailed below.</p>
<p>
<a id="pgfId-114499"></a>In the <em>Hierarchical EMIR</em> menu, click the <em>Top Simulation</em> submenu. The Hierarchical Top Simulation form opens.</p>

<p><strong>Figure 15-6
<a id="pgfId-107082"></a>The Hierarchical To<a id="HierTopSimulation"></a>p Simulation Form</strong></p>
<p>
<a id="pgfId-107096"></a></p>
<div class="webflare-div-image">
<img width="436" height="658" src="images/hierarchical-8.gif" /></div>

<p>
<a id="pgfId-107118"></a>In the <em>Block</em> group box, specify the following:</p>
<ul><li>
<a id="pgfId-107129"></a>In the <em>xDSPF Type</em> box, specify the type of xDSPF to be used from the PGV directory. You can choose from the following options:<ul><li>
<a id="pgfId-107142"></a><em>Detailed</em>: to select the detailed block xDSPF file</li><li>
<a id="pgfId-107152"></a><em>Port</em>: to select the port block xDSPF file </li><li>
<a id="pgfId-107159"></a><em>Via Snapped</em>: to select the via layer xDSPF generated using via layer snapping. For details, see <a href="hierarchical.html#15083">Types of Block-Level xDSPF &#8211; Detailed, Port, and Via Snapped</a></li></ul></li><li>
<a id="pgfId-107166"></a>Specify the <em>PGV dir for the block xDSPF file</em>.</li><li>
<a id="pgfId-107190"></a>In the <em>Instance(s)</em> field, specify the instance name of the block. For multiple instances of the same block that use the same current file, specify the instances separated by a space.</li><li>
<a id="pgfId-107232"></a>In the <em>Current Type</em> list box, specify whether the current analysis will be <em>Static</em> or <em>Dynamic</em>. By default, <em>Dynamic</em> is selected.</li><li>
<a id="pgfId-107243"></a>Specify the path to the <em>Current File</em>. This is a PWL file. For details of the file contents and how to generate the PWL files, see <a href="hierarchical.html#23321">PWL Current Files for Top-Level Simulation</a>.</li><li>
<a id="pgfId-107260"></a>Click <em>Add Block</em> to add the block data specified above to the table.</li><li>
<a id="pgfId-107277"></a>Click <em>Add Block Instance</em> to add another instance to the already added block with a different current file.</li><li>
<a id="pgfId-107308"></a>Click <em>Remove</em> to remove any block data from the table.</li></ul>










<p>
<a id="pgfId-107323"></a>In the <em>Top</em> group box, specify the following:</p>
<ul><li>
<a id="pgfId-107330"></a>Specify the top-level <em>xDSPF File </em>generated in the previous step.</li><li>
<a id="pgfId-107357"></a>Specify the input <em>Ckt File</em> with models/vectors and other parameters for top-level simulation.</li><li>
<a id="pgfId-107395"></a>Select the <em>Bus Bit Char</em> from the options, <code>&lt;&gt;</code>, <code>[]</code>, and <code>{} </code>available in the cyclic field. The default character is <code>&lt;&gt;</code>.</li></ul>


<p>
<a id="pgfId-107450"></a>In the <em>EMIR Config file</em> group box, specify the following:</p>
<ul><li>
<a id="pgfId-130808"></a>Specify an existing EMIR configuration file or generate an EMIR config file. To specify an existing file, click the Browse button and select the file. For generating the EMIR config file, specify the following options:<ul><li>
<a id="pgfId-107462"></a>The name of the <em>EM Techfile</em></li><li>
<a id="pgfId-107463"></a>The <em>Instance Hierarchy</em><br /><strong class="webflare-fig-line-height">Figure 15-7
<a id="pgfId-107464"></a>Creating an EMIR Config File</strong><ffi2-fig-frame-in-2 id="#id107468">
<a id="pgfId-107468"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img width="495" height="84" src="images/hierarchical-9.gif" /></div></li><li>
<a id="pgfId-107497"></a>Click <em>Create New</em> to generate a default EMIR config file, <code>emir_vfi.conf</code>. A sample file is shown below.<br /><ffi2-fig-frame-in-2 id="#id107501">
<a id="pgfId-107501"></a></ffi2-fig-frame-in-2><div class="webflare-div-image">
<img width="442" height="301" src="images/hierarchical-10.gif" /></div></li></ul></li><li>
<a id="pgfId-107532"></a>Specify the <em>Results Directory</em> to store the results of the top-level simulation. The default directory is <code>vfitop</code>.</li><li>
<a id="pgfId-107546"></a>Click <em>Run</em> to run the top-level simulation.</li></ul>















<h2>
<a id="pgfId-107624"></a><a id="26789"></a>The Hierarch<a id="HierAnalysisBatchMode"></a>ical EMIR Analysis Batch Mode Flow</h2>

<p>
<a id="pgfId-95114"></a>The following commands are provided for performing the Hierarchical EMIR analysis flow.</p>
<ul><li>
<a id="pgfId-111691"></a>The following commands are used to create block PGVs in batch mode:<ul><li>
<a id="pgfId-107804"></a><a href="hierarchical.html#31483">set_mmsim_pgv_nets</a></li><li>
<a id="pgfId-107815"></a><a href="hierarchical.html#70543">create_pgv</a></li></ul></li><li>
<a id="pgfId-108574"></a>The following command is used to generate top-level xDSPF in batch mode:<ul><li>
<a id="pgfId-108586"></a><a href="hierarchical.html#76419">extract_xdspf</a></li></ul></li><li>
<a id="pgfId-110537"></a>The following commands are used to run top-level simulation in batch mode:<ul><li>
<a id="pgfId-110555"></a><a href="hierarchical.html#40915">set_block_data</a></li><li>
<a id="pgfId-110569"></a><a href="hierarchical.html#23682">run_top_simulation</a></li></ul></li></ul>








<h3>
<a id="pgfId-107832"></a><a id="31483"></a>set_mmsim_pgv_nets</h3>
<a id="pgfId-107833"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
set_mmsim_pgv_nets 
-net <code><em>net_name</em></code> 
-voltage <code><em>voltage_value
</em></code>-voltage_source_nets <code><em>voltage_source_only_nets</em></code>-results_file <code><em>result_file_name
</em></code>[-prefix <code><em>prefix_name</em></code><code>]
</code>[-feedthru_nets {net1 net2 net#}]</pre>

<p>
<a id="pgfId-128308"></a>Specifies the nets for which you want to create PGVs in the Spectre flow. You can use this command to specify multiple PGV nets at a time.</p>
<p>
<a id="pgfId-131193"></a>Example:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-131207"></a>set_mmsim_pgv_nets \<br />-net { AVDD AVSS Ibias inm inp outm outp } \<br />-voltage { 1.3 0 0 0 0 0 0 } \<br />-results_file psf/input.emir0_bin \<br />-prefix I0</pre>

<p>
<a id="pgfId-128304"></a>For detailed information about the parameters of this command, see <a href="batchmode.html#53632">set_mmsim_pgv_nets</a> in the &#8220;<a href="batchmode.html#58483">Batch Mode Execution</a>&#8221; chapter.</p>

<h3>
<a id="pgfId-139301"></a><a id="70543"></a>cre<a id="create_pgv_hier"></a>ate_pgv</h3>
<a id="pgfId-140398"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
create_pgv
-macro_name <code><em>macro_name
</em></code>[-lib_name <code><em>name_of_library</em></code>]
[-hier_flow {true | false}]
[-hier_flow_stop_layer <code><em>layer_name</em></code>]
[-disable_signal_pgdb {true | false}]
[-stop_on_missing_lef_pins {true | false}]
[-libgen_cmd_file <code><em>cmd_file_name</em></code>]
[-libgen_path <code><em>libgen_binary_path</em></code>]
-tech_file <code><em>tech_file_name
</em></code>[-tech_lef_file <code><em>tech_lef_file_name</em></code>]
<code><em>-</em></code>type {static | dynamic}
[-macro_lef_file <code><em>macro_lef_file_name</em></code>]
-sim_dir <code><em>simulation_dir
</em></code>[-lef_layer_map <code><em>lef_layer_map_file_name</em></code><code>]
</code>[-oa_lib <code><em>list_of_OA_libraries</em></code>]
-pgdb_layer_map <code><em>pgdb_layermap_file_name
</em></code><code>[-pgdb_version </code><code><em>version_number</em></code><code>]
</code>[-trigger_file<code><em> trigger_file_name</em></code>]
[-output_directory <code><em>directory</em></code>]
[-uti_Ron_file <code><em>Ron_report_file_dumped_by_Spectre</em></code>]
[-create_no_device_nets true | false]
[-powergate_state_flow true | false]
[-use_pwl_files true | false]
[-map_connectivity_layers true | false]
[-units <code><em>value</em></code>]</pre>

<p>
<a id="pgfId-139303"></a>Creates PGVs. The PGVs contain information about the power ports of a transistor or block, the internal power grid, and the tap current distribution within a transistor or block.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-139304"></a>The options in blue in the above syntax are relevant only for the hierarchical EMIR analysis flow and are detailed below. </div>

<h4>
<a id="pgfId-139305"></a>Parameters</h4>
<p>
<a id="pgfId-139345"></a></p>
<table class="webflareTable" id="#id139306">
<tbody><tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-139308"></a><code>-disable_signal_pgdb true | false</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139312"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139314"></a>Checks the nets or pins with port shapes in the LEF file and confirms that the input results database (<code>emir_bin</code>) contains these nets data. When set to <code>false</code>, generates an error message if the results database does not contain the data of the LEF pins or nets.</p>
<p>
<a id="pgfId-139315"></a>Default: <code>True</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-139317"></a><code>-hier_flow true | false</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139577"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139579"></a>When set to <code>true</code>, enables the hierarchical analysis flow.</p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-139580"></a>This parameter is optional for the regular PGV generation flow but it is required for the hierarchical flow. It is used to enable via snapping to a higher level in the PGV.</div>

</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-139323"></a><code>-hier_flow_stop_layer </code><span class="webflare-courier-new" style="white-space:pre"><em>layer_name</em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139327"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139329"></a>Specifies the name of the stop layer for generating the via layer xDSPF file. For example, if layer, via1 is specified, then the power grids of all the layers below via1 will not be included in the xDSPF file, and their capacitance and currents will be distributed either on via1 or layers above it.</p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-139330"></a>This parameter is optional for the regular PGV generation flow but it is required for the hierarchical flow. It is used to enable via snapping to a higher level in the PGV. </div>

</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-139332"></a><code>-sim_dir </code><span class="webflare-courier-new" style="white-space:pre"><em>simulation_dir</em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139609"></a><span class="webflare-courier-new" style="white-space:pre"><em></em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139611"></a>Specifies the simulation directory for the current data. This is a required parameter.</p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-139612"></a>For the hierarchical flow, the simulation directory may or may not contain the current (<code>*.ptiavg</code>) files.</div>

</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-139337"></a><code>-stop_on_missing_lef_pins true | false</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139341"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139343"></a>When set to <code>false</code>, generates a warning message (instead of an error message) if the <code>emir_bin</code> database does not contain data about LEF pins or nets and continues to generate the PGVs.</p>
<p>
<a id="pgfId-139344"></a>Default: <code>True</code></p>
</td>
</tr>
</tbody></table>
<h4>
<a id="pgfId-139368"></a>Example</h4>

<p>
<a id="pgfId-139369"></a>The following command is used to create power-grid views for hierarchical EMIR analysis:</p>
<pre class="webflare-courier-new webflare-indent1 codeContent">
<a id="pgfId-139370"></a>create_pgv  \<br />-macro_name DiffOpAmp \<br />-tech_file typical_unified/qrcTechFile \<br />-tech_lef_file PGV_gen_setup/LEF/gsclib045_tech.lef \<br />-type dynamic \<br />-macro_lef_file ./DiffOpAmp_multiAVDD.lef \<br />-sim_dir ./ \<br />-lef_layer_map PGV_gen_setup/lefdef.map \<br />-pgdb_layer_map PGV_gen_setup/pgdb.map \<br />-output_directory vfi_pgv_hier \<br />-hier_flow true \<br />-hier_flow_stop_layer Via1 \<br />-libgen_cmd_file mylibgen.cmd \<br />-libgen_path ../voltus_libgen</pre>

<h3>
<a id="pgfId-120293"></a><a id="76419"></a>extr<a id="extract_xdspf_hier"></a>act_xdspf</h3>
<a id="pgfId-127832"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
extract_xdspf
-signalEM {true | false}
[-PGNets <code><em>list_of_pg_nets</em></code>]
-process {n7 | n10pg | n10 | n20 | n16 | n12 | others}
-techDir <code><em>tech_dir_name</em></code> | -techLib <code><em>tech_lib_file_name
</em></code>[-techName <code><em>technology_name</em></code>]
[-techCorner <code><em>technology_corner_name</em></code>]
[-temperature<code><em> value</em></code>]
-inputType {pegasus | pvs | calibre}
-inputDir <code><em>input_dir_name
</em></code>-RunName <code><em>input_run_name
</em></code>-outputDir <code><em>output_dir_name
</em></code><code>[-hier_flow {true | false}]
[-hier_flow_pgv {1.cl 2.cl}]
</code>[-outputDspf <code><em>output_dspf_filename</em></code>]
[-output_xy_generic {true | false}]
[-coloring {true | false}]
[-subcktPinOrder <code><em>pin_order_file</em></code>]
<code>[-multiCpu </code><code><em>number_of_cpus</em></code>]
[-customExtract <code><em>extract_Commands_File</em></code>]
[-groundNet <code><em>ground_net_name</em></code>]
[-blockingCellFile <code><em>parasitic_blocking_device_cell_names_file</em></code>]
[-subNodeChar <code><em>sub_node_char</em></code>]
[-compression {true | false}]
[-reduction {true | false}]
[-commentSubCkt {true | false}]
[-subConductorModel {true | false}]
[-fractureViaCnt <code><em>via_count_number</em></code>]
[-arrayViaSpacing {auto | <code><em>value</em></code>}]<code><em> 
</em></code><code>[-lic_queue </code><code><em>timeout_in_seconds</em></code><code>]
[-generate_ccl_only </code>{true | false}]
[-user_ccl_file <code><em>ccl_file_name</em></code>]
[-bus_bit_char <code><em>string</em></code>]
[-tech_cmd_file <code><em>filename</em></code>]
[-tech_layer_setup_file <code><em>filename</em></code>] 
[-icell_map_file <code><em>filename</em></code>]
[-keep_pin_shorting_res {true | false}]
[-keep_pin_shorting_res_by_layer {&quot;<code><em>layer1</em></code>&quot; &quot;<code><em>layer2</em></code>&quot; .... }]</pre>

<p>
<a id="pgfId-108606"></a>Generates the xDSPF file using Quantus from within Voltus-Fi. </p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-108607"></a>Before running this command, ensure that the Quantus hierarchy is available because Voltus-Fi calls the Quantus binary from this path and also ensure that the Pegasus, PVS, or Calibre&#174; run is performed successfully.</div>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-127797"></a>The options in blue in the above syntax are specified only for the hierarchical EMIR analysis flow and are detailed below. For the description of the other options of this command, see <a href="batchmode.html#76419">extract_xdspf</a> in the &#8220;<a href="batchmode.html#58483">Batch Mode Execution</a>&#8221; chapter.</div>

<h4>
<a id="pgfId-108608"></a>Parameters</h4>
<p>
<a id="pgfId-108887"></a></p>
<table class="webflareTable" id="#id108609">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-108992"></a><code>-hier_flow true | false</code></p>
<p>
<a id="pgfId-108986"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-108988"></a>When set to <code>true</code>, enables the hierarchical EMIR analysis flow.</p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-131338"></a>This parameter is optional for the regular extraction flow but it is required for the hierarchical flow. </div>

</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-109002"></a><code>-hier_flow_pgv 1.cl 2.cl</code></p>
<p>
<a id="pgfId-108996"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-109031"></a>Specifies the names of the PGV files (<code>.cl</code>). You can specify multiple filenames separated by a space. Voltus-Fi creates a merged PGV.</p>

<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-109000"></a>This parameter is optional for the regular extraction flow but it is required for the hierarchical flow. </div>

</td>
</tr>
</tbody></table>
<h4>
<a id="pgfId-108888"></a>Examples</h4>

<ul><li>
<a id="pgfId-110039"></a>The following command is used to run the hierarchical flow using the <code>DiffOpAmp.cl</code> PGV file:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id110050">
<a id="pgfId-110050"></a>extract_xdspf 
-signalEM true \
-process n20 \
-techLib ../pvtech.lib \
-techName gpdk045  \
-techCorner &quot;rcx_typical&quot; \
-inputType pegasus \
-inputDir ./svdb \
-RunName DiffOpAmp_top_2subblock_VSSport \
-outputdir vfi_quantus_top \ 
-temperature 25 \
-hier_flow true \
-hier_flow_pgv DiffOpAmp.cl \
-subcktPinOrder pin_order_file \
-groundNet  AVSS \
-reduction true</pre></li></ul>


<h3>
<a id="pgfId-109963"></a><a id="79029"></a><a id="40915"></a>s<a id="set_block_data"></a>et_block_data<a id="marker-109962"></a></h3>
<a id="pgfId-111789"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
set_block_data
-dspf <code><em>block_dspf_filename
</em></code>-instance {XI1 XI2 ...}
[-current_type {static | dynamic}]
-current_file <code><em>current_filename</em></code></pre>

<p>
<a id="pgfId-111790"></a>Specifies the block data information to be used in the top-level simulation.</p>

<h4>
<a id="pgfId-109966"></a>Parameters</h4>
<p>
<a id="pgfId-110000"></a></p>
<table class="webflareTable" id="#id109967">
<tbody><tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-109969"></a><code>-dspf </code><span class="webflare-courier-new" style="white-space:pre"><em>block_dspf_filename</em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-109973"></a><span class="webflare-courier-new" style="white-space:pre"><em></em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-109975"></a>Specifies the name of the block xDSPF file to be used. This is a required parameter.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-122746"></a><code>instance {XI1 XI2 ...}</code></p>
<p>
<a id="pgfId-122750"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-122752"></a>Specifies the instance names of the child cells. For multiple instances of the same block that use the same current file, specify the names separated by a space.</p>
<p>
<a id="pgfId-122818"></a>This is a required parameter.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-109977"></a><code>-current_type {static | dynamic}</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-109981"></a><span class="webflare-courier-new" style="white-space:pre"><em></em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-109983"></a>Specifies whether the current analysis type will be static or dynamic.</p>
<p>
<a id="pgfId-122840"></a>This is an optional parameter.</p>
<p>
<a id="pgfId-124493"></a>Default: <code>dynamic</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-109985"></a><code>-current_file </code><span class="webflare-courier-new" style="white-space:pre"><em>current_filename</em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-109989"></a><span class="webflare-courier-new" style="white-space:pre"><em></em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-109991"></a>Specifies the current file to be used. This is a PWL file. for details of the file and how to create it, see <a href="hierarchical.html#23321">PWL Current Files for Top-Level Simulation</a>.</p>
<p>
<a id="pgfId-122861"></a>This is a required parameter.</p>
</td>
</tr>
</tbody></table>
<h4>
<a id="pgfId-110161"></a>Examples</h4>

<ul><li>
<a id="pgfId-130922"></a>Use the following command to specify the same PWL file for all instances:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id130923">
<a id="pgfId-130923"></a>set_block_data 
-dspf DiffOpAmp_detailed.dspf 
-instance {XI1 XI2}  
-current_type dynamic 
-current_file DiffOpAmp.pwl </pre></li><li>
<a id="pgfId-130924"></a>Use the following command to specify a different pwl file for each instance:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id130925">
<a id="pgfId-130925"></a>set_block_data 
-dspf DiffOpAmp_detailed.dspf 
-instance {XI1 XI2}  
-current_type dynamic 
-current_file {DiffOpAmp.pwl DiffOpAmp.pwl} </pre></li><li>
<a id="pgfId-130926"></a>Use the following command to specify the static current for a block:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id130927">
<a id="pgfId-130927"></a>set_block_data 
-dspf DiffOpAmp_detailed.dspf 
-instance {XI1 XI2}  
-current_type static 
-current_file block_i.txt </pre></li><li>
<a id="pgfId-130928"></a>Use the following command to use the via snapped xDSPF:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id130929">
<a id="pgfId-130929"></a>set_block_data 
-dspf DiffOpAmp_vialayer.dspf 
-instance {XI1 XI2}  
-current_type dynamic 
-current_file DiffOpAmp.pwl </pre></li></ul>








<h3>
<a id="pgfId-139197"></a><a id="23682"></a>run<a id="run_top_simulation"></a>_top_simulation<a id="marker-139196"></a></h3>
<a id="pgfId-139198"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
run_top_simulation
<code>-cktfile </code><code><em>input_ckt_file
</em></code><code>[-dspf </code><code><em>top_dspf_file</em></code><code>]
[-bus_bit_char b<span class="webflare-courier-new" style="white-space:pre"><em>us_bit_char</em></span><code>]
</code>[-emir_conf_file </code><code><em>emir_config_file</em></code><code>]
[-generate_cmd_only {true | false}]
[-output_directory </code><code><em>output dir</em></code>]
[-overwrite_cmd_files {true | false}]
[<code>-sim_switches &quot;</code><code><em>sim_cmd_line_options&quot;</em></code><code>]
[-use_config_file_flow {true | false}]</code></pre>

<p>
<a id="pgfId-139199"></a>Specifies the information to be used for performing the top-level simulation.</p>

<h4>
<a id="pgfId-139200"></a>Parameters</h4>
<p>
<a id="pgfId-139282"></a></p>
<table class="webflareTable" id="#id139201">
<tbody><tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-139203"></a><code>-bus_bit_char b</code><span class="webflare-courier-new" style="white-space:pre"><em>us_bit_char</em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139207"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139209"></a>Specifies the bus delimiter character. The following options are available: <code>&lt;&gt;</code>, <code>[]</code>, <code>{}</code>.</p>
<p>
<a id="pgfId-139210"></a>This is an optional parameter. </p>
<p>
<a id="pgfId-139211"></a><em>Default</em>: <code>&lt;&gt;</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139213"></a><code>-cktfile <span class="webflare-courier-new" style="white-space:pre"><em>input_ckt_file</em></span></code></p>
<p>
<a id="pgfId-139214"></a><span class="webflare-courier-new" style="white-space:pre"><em></em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139216"></a>Specifies the input circuit file for the top simulation. This file contains information about models/vectors and other parameters required for the top-level simulation.</p>
<p>
<a id="pgfId-139217"></a>This is a required parameter.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139219"></a><code>-dspf <span class="webflare-courier-new" style="white-space:pre"><em>top_dspf_file</em></span></code></p>
<p>
<a id="pgfId-139220"></a><span class="webflare-courier-new" style="white-space:pre"><em></em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139222"></a>Specifies the top-level xDSPF file to be used for the top-level simulation.</p>
<p>
<a id="pgfId-139223"></a>This is an optional parameter if the <code>extract_xdspf</code> command is specified. In that case, Quantus is run and the top-level xDSPF file that is generated is used by the tool for the top-level simulation. </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-139225"></a><code>-emir_conf_file <span class="webflare-courier-new" style="white-space:pre"><em>emir_config_file</em></span></code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139229"></a><span class="webflare-courier-new" style="white-space:pre"><em></em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139231"></a>Specifies the top-level EMIR configuration file.</p>
<p>
<a id="pgfId-139232"></a>This is an optional parameter. If the file is not specified, the tool generates a default <code>emir.conf</code> file for all nets.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-139234"></a><code>-generate_cmd_only {true | false}</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139238"></a><span class="webflare-courier-new" style="white-space:pre"><em></em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139240"></a>When set to <code>true</code>, the Spectre run is skipped. The input command files, <code>vfi_input.scs</code> and <code>vfi_runsimulation</code>, are created. You can make changes in these files and then run Spectre.</p>
<p>
<a id="pgfId-139241"></a>This is an optional parameter. </p>
<p>
<a id="pgfId-139242"></a><em>Default</em>: <code>false</code> </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139244"></a><code>-output_directory <span class="webflare-courier-new" style="white-space:pre"><em>output dir</em></span></code></p>
<p>
<a id="pgfId-139245"></a><span class="webflare-courier-new" style="white-space:pre"><em></em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139247"></a>Specifies the name of the directory in which the results of the top-level simulation will be saved.</p>
<p>
<a id="pgfId-139248"></a>This is an optional parameter. By default, the tool uses the <code>topSimulation</code> directory.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-139250"></a><code>-overwrite_cmd_files {true | false}</code><span class="webflare-courier-new" style="white-space:pre"><em></em></span></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139254"></a><span class="webflare-courier-new" style="white-space:pre"><em></em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139256"></a>When set to <code>false</code>, the tool generates new input command files and does not overwrite the input command files generated in the previous run. </p>
<p>
<a id="pgfId-139257"></a>For example, if <code>vfi_input.scs</code> and <code>vfi_runsimulation</code> files were generated in the previous run, and if this option is set to <code>false</code> in the new run, then new files, <code>vfi_input1.scs</code> and <code>vfi_runsimulation1</code>, are created. </p>
<p>
<a id="pgfId-139258"></a>By default, this option is set to <code>true</code>, which means the input command files generated in the previous run are overwritten.</p>
<p>
<a id="pgfId-139259"></a>This is an optional parameter. </p>
<p>
<a id="pgfId-139260"></a><em>Default</em>: <code>true</code> </p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-139262"></a><code>-sim_switches &quot;</code><span class="webflare-courier-new" style="white-space:pre"><em>sim_cmd_line_options</em></span><code>&quot;</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139266"></a><code></code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139268"></a>This option is used only to add additional Spectre command-line options for running the top-level simulation. The names of the switches are specified within quotes, as shown in the example below.</p>
<p>
<a id="pgfId-139269"></a>This is an optional parameter.</p>
<p>
<a id="pgfId-139270"></a><em>Default</em>: none</p>
<p>
<a id="pgfId-139271"></a>Example:</p>
<p>
<a id="pgfId-139272"></a>-sim_switches &quot;+top +mt=8 +ms +fastdc&quot;</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-139274"></a><code>-use_config_file_flow {true | false}</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139278"></a><code></code></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-139280"></a>Specifies whether to store <code>tapi</code> commands in the <code>vfi_emir.conf</code> file instead of the <code>vfi_input.scs</code> file.</p>
<p>
<a id="pgfId-139281"></a>Default: <code>false</code></p>
</td>
</tr>
</tbody></table>
<h4>
<a id="pgfId-139283"></a>Example</h4>

<p>
<a id="pgfId-139284"></a>Use the following command to run the top-level simulation using the top-level xDSPF file, <code>VSSport.dspf</code>:</p>

<a id="pgfId-139285"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
run_top_simulation 
-dspf DiffOpAmp_top_2subblock_VSSport.dspf 
-cktfile input.ckt 
-bus_bit_char &lt;&gt; 
-emir_conf_file emir.conf 
-output_directory topsimvfi</pre>
<h2>
<a id="pgfId-119034"></a><a id="72282"></a><a id="42587"></a>The Hierarchical EMIR Analysis Batch Mode Automation Flow</h2>

<p>
<a id="pgfId-119048"></a>The hierarchical EMIR analysis flow in Voltus-Fi detailed in the above document is automated for the convenience of the user. The subsequent sections provide details of batch mode automation flow.</p>
<ul><li>
<a id="pgfId-127898"></a><a href="hierarchical.html#14510">Block PGV Generation</a></li><li>
<a id="pgfId-127911"></a><a href="hierarchical.html#15460">Block PGV Inputs for Top-Level Extraction and Simulation</a></li><li>
<a id="pgfId-127917"></a><a href="hierarchical.html#85945">The Top-Level Extraction and Simulation Run</a></li><li>
<a id="pgfId-129995"></a><a href="hierarchical.html#18860">Multi-Mode Support</a></li></ul>




<h3>
<a id="pgfId-119057"></a><a id="14510"></a>Block PGV Generation</h3>

<p>
<a id="pgfId-119092"></a>In this step, block PGVs are generated using either batch commands or the GUI. Once a block PGV is created, the PGV run directory stores all the data needed for both the top-level Quantus and the top-level simulation runs.</p>
<p>
<a id="pgfId-119112"></a>In addition to the<code>.cl</code> files, the DSPF files and port_order files, and the PWL files from block simulation, are copied in the PGV run directory.</p>
<p>
<a id="pgfId-119102"></a>The PWL or current file for a block PGV is picked automatically from parsing the block <code>emir.conf</code> file, which has the name of the PWL created using the following option:</p>
<p>
<a id="pgfId-119186"></a><code>eisopt save_tapi=&lt;</code><span class="webflare-courier-new" style="white-space:pre"><em>pwl file name</em></span><code>&gt;</code></p>
<p>
<a id="pgfId-119093"></a>The PGV run directory includes the following data:</p>
<ul><li>
<a id="pgfId-119209"></a>The <code>cell.cl</code> file, which is the PGV binary database</li><li>
<a id="pgfId-119210"></a>Block cell DSPF files for all modes (detailed, port, and snapped).</li><li>
<a id="pgfId-119211"></a>The port_order file</li><li>
<a id="pgfId-119200"></a>The block current/PWL file</li></ul>




<h3>
<a id="pgfId-119238"></a><a id="15460"></a>Block PGV Inputs for Top-Level Extraction and Simulation </h3>

<p>
<a id="pgfId-130262"></a>Once all the block PGVs are created, create a list of all the PGV directories and provide that as input for next step. This is done in a simple text file that contains the paths for each block PGV.</p>
<p>
<a id="pgfId-130266"></a>The <code>set_pgv</code> command is used to provide all the details of the block-level data to be used for the top-level extraction and simulation runs. </p>

<h4>
<a id="pgfId-130268"></a><a id="25296"></a>s<a id="set_pgv"></a>et_pgv</h4>
<a id="pgfId-130269"></a><pre class="webflare-courier-new webflare-syx-syntax codeContent">
set_pgv
-module <code><em>block_name
</em></code>-pgv_dir <code><em>pgv_run_dir
</em></code>[-dspf <code><em>dspf_file</em></code>]
[-delay <code><em>value</em></code>]
[-repeat <code><em>value</em></code>]
[-instances <code><em>instance_list</em></code>]
[-view {snapped | detailed | port}]
[-pwl {<code><em>pwl_file1 pwl_file2</em></code>...}]</pre>

<p>
<a id="pgfId-130270"></a>Specifies the information to be used from the block PGV and xDSPF generation step for the top-level Quantus and simulation runs. </p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-130271"></a>This command is only used in batch mode automation flow for hierarchical EMIR analysis. </div>

<h4>
<a id="pgfId-130275"></a>Parameters</h4>
<p>
<a id="pgfId-130335"></a></p>
<table class="webflareTable" id="#id130276">
<tbody><tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-133338"></a><code>-delay </code><span class="webflare-courier-new" style="white-space:pre"><em>value</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-133340"></a>Specifies the value by which to delay the PWL file content. This value can be either positive or negative.</p>
<p>
<a id="pgfId-133341"></a>This is an optional parameter. The default delay value is 0.</p>
<p>
<a id="pgfId-133342"></a>Example:</p>
<p>
<a id="pgfId-133343"></a><code>set_pgv -delay 5n</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-130278"></a><code>-dspf</code> <span class="webflare-courier-new" style="white-space:pre"><em>dspf_file</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-130280"></a>Specifies the block-level xDSPF file to be used for top-level extraction and simulation.</p>
<p>
<a id="pgfId-130281"></a>This is an optional parameter. By default the tool uses the xDSPF file stored in the PGV run directory.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-130287"></a><code>-instances </code><span class="webflare-courier-new" style="white-space:pre"><em>instance_list</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">

<p>
<a id="pgfId-130289"></a>Specifies the list of instances for which you want to specify the PWL file.</p>
<p>
<a id="pgfId-130290"></a>This is an optional parameter. By default, all the instances of the module use the PWL file stored in PGV run directory.</p>

</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-130292"></a><code>-module </code><span class="webflare-courier-new" style="white-space:pre"><em>block_name</em></span></p>
<p>
<a id="pgfId-130296"></a></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-130298"></a>Specifies the name of the block.</p>
<p>
<a id="pgfId-130299"></a>This is a required parameter.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-130301"></a><code>-pgv_dir <span class="webflare-courier-new" style="white-space:pre"><em>pgv_run_dir</em></span></code></p>
<p>
<a id="pgfId-130305"></a><span class="webflare-courier-new" style="white-space:pre"><em></em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-130307"></a>Specifies the name of the PGV run directory that contains the <code>.cl</code> file and the xDSPF files.</p>
<p>
<a id="pgfId-130308"></a>This is a required parameter.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-130310"></a><code>-pwl {<span class="webflare-courier-new" style="white-space:pre"><em>pwl_file1 pwl_file2</em></span><code>....}</code></code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-130314"></a><span class="webflare-courier-new" style="white-space:pre"><em></em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-130316"></a>Specifies the PWL files to be used for top-level simulation. You can specify a single PWL file to be used for all instances or for the instances specified using the <code>-instances</code> parameter.</p>
<p>
<a id="pgfId-130317"></a>You can also specify multiple PWL files for different instances of a block. For details, see <a href="hierarchical.html#18860">Multi-Mode Support</a>.</p>
<p>
<a id="pgfId-130321"></a>This is an optional parameter. By default, the software uses the PWL file stored in the PGV run directory.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-133345"></a><code>-repeat</code> <span class="webflare-courier-new" style="white-space:pre"><em>value</em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-133347"></a>Specifies the number of times the PWL content should be repeated. This value is always positive.</p>
<p>
<a id="pgfId-133348"></a>This is an optional parameter. The default value of this parameter is 1, which means the PWL content is used only once.</p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="2" rowspan="1">
<p>
<a id="pgfId-130323"></a><code>-view {snapped | detailed | port}</code></p>
</td>
</tr>
<tr>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-130327"></a><span class="webflare-courier-new" style="white-space:pre"><em></em></span></p>
</td>
<td class="webflareTd" colspan="1" rowspan="1">
<p>
<a id="pgfId-130329"></a>Specifies the type of block-level xDSPF file to be used for top-level simulation. The following options are available:</p>

<ul><li>
<a id="pgfId-130330"></a><code>snapped</code>: a via layer xDSPF generated using via layer snapping</li><li>
<a id="pgfId-130331"></a><code>detailed</code>: a detailed xDSPF file with complete RC grid information for the blocks</li><li>
<a id="pgfId-130332"></a><code>port</code>: a port xDSPF file, which only includes the port order information for all interface nodes and does not include any RC grid information</li></ul>


<p>
<a id="pgfId-130333"></a>This is an optional parameter.</p>
<p>
<a id="pgfId-130334"></a><em>Default</em>: <code>detailed</code></p>

</td>
</tr>
</tbody></table>
<h4>
<a id="pgfId-130336"></a>Examples</h4>

<ul><li>
<a id="pgfId-130337"></a>The following command picks up the detailed DSPF and PWL from the <code>pgv_dir</code>, vfi_pgv_hier and applies it to all the instances.<br /><pre class="webflare-pre-block webflare-courier-new" id="#id130338">
<a id="pgfId-130338"></a>set_pgv -module DiffOpAmp -pgv_dir ./blockPGV/vfi_pgv_hier</pre></li><li>
<a id="pgfId-133355"></a>The following command picks up the detailed DSPF and PWL from the <code>pgv_dir</code>, vfi_pgv_hier, applies it to all the instances and delays the PWL content by <code>5n</code>.<br /><pre class="webflare-pre-block webflare-courier-new" id="#id133356">
<a id="pgfId-133356"></a>set_pgv -module DiffOpAmp -pgv_dir ./blockPGV/vfi_pgv_hier -delay 5n</pre></li><li>
<a id="pgfId-130339"></a>The following command picks up the via layer snapped DSPF and PWL from the <code>pgv_dir</code>, vfi_pgv_hier.via and applies it to all the instances. <br /><pre class="webflare-pre-block webflare-courier-new" id="#id130340">
<a id="pgfId-130340"></a>set_pgv -module DiffOpAmp -pgv_dir ./blockPGV/vfi_pgv_hier.via -view snapped</pre></li><li>
<a id="pgfId-130341"></a>The following command specifies the PWL, DiffOpAmp.pwl, for instance, <code>X1</code>. For all other instances for the same block, the PWL stored in pgv_dir, vfi_pgv_hier.via, is used.<br /><pre class="webflare-pre-block webflare-courier-new" id="#id130342">
<a id="pgfId-130342"></a>set_pgv -module DiffOpAmp -pgv_dir ./blockPGV/vfi_pgv_hier.via -instances {XI1 } -pwl {blockSim/psf/input.emirtap/DiffOpAmp.pwl}</pre></li><li>
<a id="pgfId-130343"></a>The following commands provide the block-level data for different blocks, block 1 and block 2:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id130344">
<a id="pgfId-130344"></a>set_pgv -module block1 -pgv_dir ./block1PGV/vfi_pgv_hier1
set_pgv -module block2 -pgv_dir ./block2PGV/vfi_pgv_hier2</pre></li></ul>










<h3>
<a id="pgfId-120003"></a><a id="85945"></a>The Top-Level Extraction and Simulation Run</h3>

<p>
<a id="pgfId-120025"></a>The top-level extraction run and the simulation run is a single-run process that takes the following as input:</p>
<ul><li>
<a id="pgfId-120026"></a>A list of block PGVs specified using the <code>set_pgv</code> command as detailed in the previous section.</li><li>
<a id="pgfId-120027"></a>The Voltus-Fi <a href="batchmode.html#76419">extract_xdspf</a> command inputs such as Pegasus/PVS/Calibre directory and technology files and so on. This is similar to block embedded Quantus flow with no additional input.</li><li>
<a id="pgfId-120017"></a>Simulation inputs specified using the <a href="hierarchical.html#23682">run_top_simulation</a> command. These inputs include the input circuit file containing models, input vectors, and so on for the top-level simulation run. </li></ul>


<p>
<a id="pgfId-120511"></a>Voltus-Fi uses the PGV list to create a merged <code>.cl</code> file for the top-level Quantus run. Once the top-level Quantus run is successful, the xDSPF is parsed to map the block instances with the xDSPF and PWL files.</p>
<p>
<a id="pgfId-120513"></a>While running the above, the tool uses the automation commands to create the following internal command files for extraction and simulation.</p>
<ul><li>
<a id="pgfId-120514"></a><code>Hier_Flow_Automated_Top_Extraction.cmd</code></li><li>
<a id="pgfId-120515"></a><code>Hier_Flow_Automated_Top_Simulation.cmd</code></li></ul>

<p>
<a id="pgfId-120500"></a>These command files can be used for debugging, to verify that data is picked correctly. If needed, the command files can be used to run a specific step.</p>

<h3>
<a id="pgfId-121394"></a><a id="18860"></a>Multi-Mode Support</h3>

<p>
<a id="pgfId-121416"></a>The multi-mode support means that the hierarchical flow supports the use of different PWL files for different instances of a block.</p>
<p>
<a id="pgfId-121417"></a>Use the <code>-pwl</code> parameter of the <code>set_pgv</code> command to override the default PWL file for any instance with a different PWL file. This feature eliminates the need to specify or keep data for multiple modes in the PGV because the PGV and block xDSPF do not have any dependency on the current data stored in the PWL.</p>
<p>
<a id="pgfId-121421"></a>Example</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-121422"></a>set_pgv <br />-module DiffOpAmp <br />-pgv_dir ./blockPGV/vfi_pgv_hier.via <br />-instances {XI1 XI2} <br />-pwl {blockSimMode1/psf/input.emirtap/DiffOpAmp.pwl blockSimMode2/psf/input.emirtap/DiffOpAmp.pwl}</pre>
<h3>
<a id="pgfId-120565"></a><a id="51281"></a>A Sample Script for Automated Batch Mode Flow</h3>

<p>
<a id="pgfId-120575"></a>Following are sample scripts for three different scenarios of the automated hierarchical EMIR analysis flow.</p>

<h4>
<a id="pgfId-120617"></a>Sample 1: Using a detailed xDSPF file</h4>

<p>
<a id="pgfId-120618"></a>In the script sample below, a <code>vpsbatch_automate.cmd</code> is run and the block-level PGV data is picked from the <code>vfi_pgv_hier</code> directory.</p>
<p>
<a id="pgfId-120619"></a><code>vpsbatch -cmd vpsbatch_automate.cmd</code></p>
<p>
<a id="pgfId-120649"></a>Where, </p>
<p>
<a id="pgfId-120656"></a>the <code>vpsbatch_automate.cmd</code> includes the following information:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-120683"></a>include blockpgv.txt</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-120684"></a>extract_xdspf -signalEM true \<br />   -process n20 \<br />   -techLib ./pvtech.lib -techName gpdk045  -techCorner &quot;rcx_typical&quot; \<br />   -inputType pegasus -inputDir topQRC/svdb -RunName DiffOpAmp_top_2subblock_VSSport \<br />   -temperature 25 \<br />   -groundNet  AVSS</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-120690"></a>run_top_simulation&#160;&#160;-cktfile topSim/input.ckt&#160;&#160;-emir_conf_file topSim/emir.conf</pre>

<p>
<a id="pgfId-120675"></a>The <code>blockpgv.txt</code> file contains the following information:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-120717"></a>set_pgv -module DiffOpAmp -pgv_dir ./blockPGV/vfi_pgv_hier</pre>
<h4>
<a id="pgfId-120870"></a>Sample 2: Using a snapped xDSPF file</h4>

<p>
<a id="pgfId-120900"></a>In the script sample below, a <code>vpsbatch_automate_vialayer.cmd</code> is run and the block-level PGV data is picked from the <code>vfi_pgv_hier.via</code> directory.</p>
<p>
<a id="pgfId-120901"></a><code>vpsbatch -cmd vpsbatch_automate_vialayer.cmd</code></p>
<p>
<a id="pgfId-120873"></a>Where, </p>
<p>
<a id="pgfId-120874"></a>the <code>vpsbatch_automate_vialayer.cmd</code> includes the following information:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-120910"></a>include blockpgv_vialayer.txt</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-120911"></a>extract_xdspf -signalEM true \</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-120912"></a>   -process n20 \</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-120913"></a>   -techLib ./pvtech.lib -techName gpdk045  -techCorner &quot;rcx_typical&quot;  \</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-120929"></a>   -inputType pegasus -inputDir topQRC/svdb -RunName DiffOpAmp_top_2subblock_VSSport \</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-120930"></a>   -temperature 25 \</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-120916"></a>   -groundNet  AVSS</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-121146"></a>run_top_simulation&#160;&#160;-cktfile topSim/input.ckt&#160;&#160;-emir_conf_file topSim/emir.conf</pre>

<p>
<a id="pgfId-121147"></a>The <code>blockpgv_vialayer.txt</code> file contains the following information:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-121148"></a>set_pgv -module DiffOpAmp -pgv_dir ./blockPGV/vfi_pgv_hier.via -view snapped</pre>
<h4>
<a id="pgfId-121173"></a>Sample 3: Specifying the PWL file</h4>

<p>
<a id="pgfId-121174"></a>In the script sample below, user-specified PWL file, DiffOpAmp.pwl is used instead of the default PWL file in the pgv_dir. The <code>vpsbatch_automate_pwl.cmd</code> is run and the block-level PGV data is picked from the <code>vfi_pgv_hier.via</code> directory.</p>
<p>
<a id="pgfId-121175"></a><code>vpsbatch -cmd vpsbatch_automate_pwl.cmd</code></p>
<p>
<a id="pgfId-121176"></a>Where, </p>
<p>
<a id="pgfId-121177"></a>the <code>vpsbatch_automate_pwl.cmd</code> includes the following information:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-121198"></a>include blockpgv_pwl.txt</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-121199"></a>extract_xdspf -signalEM true \</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-121200"></a>   -process n20 \</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-121201"></a>   -techLib ./pvtech.lib -techName gpdk045  -techCorner &quot;rcx_typical&quot;  \</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-121202"></a>   -inputType pegasus -inputDir topQRC/svdb  -RunName DiffOpAmp_top_2subblock_VSSport \</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-121203"></a>   -temperature 25 \</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-121204"></a>   -groundNet  AVSS</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-121165"></a>run_top_simulation&#160;&#160;-cktfile topSim/input.ckt&#160;&#160;-emir_conf_file topSim/emir.conf</pre>

<p>
<a id="pgfId-121343"></a>The <code>blockpgv_pwl.txt</code> file contains the following information:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-121357"></a>set_pgv -module DiffOpAmp -pgv_dir ./blockPGV/vfi_pgv_hier.via -instances {XI1 } -pwl {blockSim/psf/input.emirtap/DiffOpAmp.pwl}</pre>
<h2>
<a id="pgfId-123886"></a><a id="44529"></a>Analyzing the EMIR Results for Hierarchical Analysis</h2>

<p>
<a id="pgfId-123946"></a>This section covers how to load the EMIR results, view the plots, and analyze the results. The following topics are covered:</p>
<ul><li>
<a id="pgfId-124160"></a><a href="hierarchical.html#58571">Loading the IR/EM Results for the Hierarchical Flow in the GUI</a></li><li>
<a id="pgfId-124174"></a><a href="hierarchical.html#32653">Viewing Plots for Top and Block-Level Results</a></li><li>
<a id="pgfId-124309"></a><a href="hierarchical.html#59331">Analyzing the EMIR Results</a></li></ul>



<h3>
<a id="pgfId-123580"></a><a id="58571"></a>Loading the IR/EM Results for the Hierarchical Flow in the GUI</h3>

<p>
<a id="pgfId-122964"></a>In the IR/EM Results form, do the following:</p>
<ol><li>
<a id="pgfId-123594"></a>Specify the <em>State Directory/Results File</em>, which is the <code>emir_bin</code> file generated after the hierarchical simulation. </li><li>
<a id="pgfId-123613"></a>Specify the <em>DFII layermap</em> file.</li><li>
<a id="pgfId-140535"></a>Click <em>Load Results</em>. <br /><strong class="webflare-fig-line-height">Figure 15-8
<a id="pgfId-122975"></a>Loading the IR/EM Results for the Hierarchical Flow</strong>
<a id="pgfId-122985"></a><div class="webflare-div-image">
<img width="668" height="714" src="images/hierarchical-11.gif" /></div></li></ol>









<p>
<a id="pgfId-123088"></a>The <em>Net Type</em> and <em>Net Name</em> information are populated, as shown above. In addition, the table displays the block-level information. For example, the first two rows in the table display the type of net and the corresponding net name (<code>AVDD</code> and <code>AVSS</code>). The subsequent rows display the names of nets for particular blocks (<code>X11.AVDD</code>, <code>X11.AVSS</code>, and so on). You can plot the results for both the top level and block level.</p>

<h3>
<a id="pgfId-123700"></a><a id="32653"></a>Viewing Plots for Top and Block-Level Results</h3>

<p>
<a id="pgfId-140318"></a>After loading the results, do the following:</p>
<ol><li>
<a id="pgfId-140319"></a>Select <em>Combine Hier Nets</em>. This check box is selected by default. It plots top nets and the associated block nets together. The option is available only when the hierarchical EMIR results are loaded and is ON by default.</li><li>
<a id="pgfId-140320"></a>Select a top net and click <em>Show Plot</em>. <br />
<a id="pgfId-140321"></a>The associated block nets are selected automatically. The plots of the top net and the block nets (only the interface nodes) are displayed on the Virtuoso layout. When the <em>Combine Hier Nets</em> check box is not selected, the nets are treated individually and are plotted with their full data.</li></ol>


<p>
<a id="pgfId-140322"></a>The first image shows the IR drop analysis plot for the selected net, <code>AVDD</code>, at the top level. The second image shows the IR drop analysis results for the net for a specific block, <code>X11.AVDD</code>.</p>

<p><strong>Figure 15-9
<a id="pgfId-123229"></a>Viewing the Top-Level Results for the Selected Net, AVDD</strong></p>
<p>
<a id="pgfId-123241"></a></p>
<div class="webflare-div-image">
<img width="668" height="431" src="images/hierarchical-12.gif" /></div>
<p><strong>Figure 15-10
<a id="pgfId-123101"></a>Viewing the Block-Level Results for the Block X11 of the AVDD Net</strong></p>
<p>
<a id="pgfId-123112"></a></p>
<div class="webflare-div-image">
<img width="668" height="638" src="images/hierarchical-13.gif" /></div>
<h3>
<a id="pgfId-124197"></a><a id="59331"></a>Analyzing the EMIR Results</h3>

<p>
<a id="pgfId-124218"></a>You can analyze and debug the various IR and EM plots for the block and top levels, either together or separately. This is depicted in the diagrams below.</p>

<p><strong>Figure 15-11
<a id="pgfId-124219"></a>Viewing the Top- and Block-Level Results Together</strong></p>
<p>
<a id="pgfId-124223"></a></p>
<div class="webflare-div-image">
<img width="626" height="322" src="images/hierarchical-14.gif" /></div>
<p><strong>Figure 15-12
<a id="pgfId-124224"></a>Viewing the Top- and Block-Level Results Separately</strong></p>
<p>
<a id="pgfId-124228"></a></p>
<div class="webflare-div-image">
<img width="516" height="366" src="images/hierarchical-15.gif" /></div>
<h2>
<a id="pgfId-119297"></a><a id="88705"></a>Sample File Formats for Hierarchical EMIR analysis</h2>

<p>
<a id="pgfId-116462"></a>This section covers the following sample file formats:</p>
<ul><li>
<a id="pgfId-116469"></a><a href="hierarchical.html#79962">Sample Block-Level xDSPF Files</a></li><li>
<a id="pgfId-117122"></a><a href="hierarchical.html#33329">A Sample Top-Level xDSPF file</a></li><li>
<a id="pgfId-117137"></a><a href="hierarchical.html#43182">A Macro LEF File</a></li></ul>



<h3>
<a id="pgfId-116370"></a><a id="79962"></a>Sample Block-Level xDSPF Files</h3>

<p>
<a id="pgfId-116371"></a>The following sample files are provided below:</p>
<ul><li>
<a id="pgfId-131035"></a><a href="hierarchical.html#17587">A Sample Detailed xDSPF File</a></li><li>
<a id="pgfId-131045"></a><a href="hierarchical.html#85443">A Sample Port xDSPF File</a></li><li>
<a id="pgfId-131052"></a><a href="hierarchical.html#63742">A Sample Via Layer xDSPF</a></li></ul>



<h4>
<a id="pgfId-116372"></a><a id="17587"></a>A Sample Detailed xDSPF File</h4>

<p>
<a id="pgfId-116697"></a>A part of a sample top-level xDSPF file is shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-116826"></a>------------------------------------------------------------</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130175"></a>*|DELIMITER #</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130176"></a>*|BUSBIT []</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130177"></a>*|GLOBAL_TEMPERATURE 110</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130178"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130179"></a>.SUBCKT DiffOpAmp AVDD AVSS Ibias inm inp outm outp</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130180"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130181"></a>*|GROUND_NET 0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130182"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130183"></a>*|NET AVDD 0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130184"></a>** Interface nodes: 3</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130185"></a>** Regular nodes: 1703</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130186"></a>** Tap nodes: 200</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130187"></a>** Resistors: 3178</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130188"></a>*|P (AVDD%2 I 0 43.17 47.708)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130189"></a>*|S (AVDD 0.041 47.708)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130190"></a>*|S (AVDD%1 25.13 49.308)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130191"></a>*|I (MM5@49#s MM5@49 s I 0 27.75 36.17)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130192"></a>*|I (MM5@48#s MM5@48 s I 0 27.75 29.02)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130193"></a>*|I (MM0@49#s MM0@49 s I 0 25.931 36.17)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130194"></a>*|I (MM0@48#s MM0@48 s I 0 25.931 29.02)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130195"></a>*|I (MM5@44#s MM5@44 s I 0 38.711 29.02)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130196"></a>*|I (MM5@45#s MM5@45 s I 0 38.711 36.17)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130197"></a>*|S (AVDD#3 2.655 44.265)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130198"></a>*|S (AVDD#4 2.655 43.965)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130199"></a>*|S (AVDD#5 2.655 43.485)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130200"></a>R1_AVDD MM13@7#s MM4@6#s 0.001 $pdiff_conn $W=10000 $L=0 $X=31.4005 $Y=42.985</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130201"></a>R2_AVDD MM0@43#s MM0@47#s 0.001 $pdiff_conn $W=10000 $L=0 $X=14.8105 $Y=36.17</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130202"></a>R3_AVDD MM0@42#s MM0@46#s 0.001 $pdiff_conn $W=10000 $L=0 $X=14.8105 $Y=29.02</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116819"></a>-----------------------------------------------------------------------------</pre>

<p>
<a id="pgfId-116727"></a>where,</p>
<p>
<a id="pgfId-116734"></a><code>*|P</code> - interface nodes for the block</p>
<p>
<a id="pgfId-116744"></a><code>*|I</code> - current taps</p>
<p>
<a id="pgfId-116757"></a><code>*|S</code> - sub nodes of the block</p>
<p>
<a id="pgfId-116767"></a><code>R</code> - resistor information</p>

<h4>
<a id="pgfId-116396"></a><a id="85443"></a>A Sample Port xDSPF File</h4>

<p>
<a id="pgfId-116674"></a>A part of a sample port xDSPF file is shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-116948"></a>----------------------------------------------------------------</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116397"></a>Port DSPF:</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130024"></a>*|DSPF 1.0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130025"></a>*|DESIGN &quot;DiffOpAmp&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130026"></a>*|VENDOR &quot;Cadence Design Systems, Inc.&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130027"></a>*|PROGRAM &quot;Voltus_libgen&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130028"></a>*|DIVIDER /</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130029"></a>*|DELIMITER #</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130030"></a>*|BUSBIT []</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130031"></a>*|GLOBAL_TEMPERATURE 110</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130032"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130033"></a>.SUBCKT DiffOpAmp AVDD AVSS Ibias inm inp outm outp</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130035"></a>*|GROUND_NET 0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130037"></a>*|NET AVDD 0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130038"></a>** Interface nodes: 3</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130039"></a>** Regular nodes: 0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130040"></a>** Tap nodes: 3</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130041"></a>** Resistors: 0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130042"></a>*|P (AVDD%2 I 0 43.17 47.708)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130043"></a>*|P (AVDD 0.041 47.708)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130044"></a>*|P (AVDD%1 25.13 49.308)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130045"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130046"></a>*|NET AVSS 0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130047"></a>** Interface nodes: 1</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130048"></a>** Regular nodes: 0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130049"></a>** Tap nodes: 1</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130050"></a>** Resistors: 0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116419"></a>*|P (AVSS I 0 0.041 2.15)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130070"></a>*|NET Ibias 0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130071"></a>** Interface nodes: 1</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130072"></a>** Regular nodes: 0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130073"></a>** Tap nodes: 1</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130074"></a>** Resistors: 0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130075"></a>*|P (Ibias I 0 0.04 38.86)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130066"></a>ENDS</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116958"></a>----------------------------------------------------------------</pre>
<h4>
<a id="pgfId-116420"></a><a id="63742"></a>A Sample Via Layer xDSPF</h4>

<p>
<a id="pgfId-116645"></a>A part of a sample via layer xDSPF file is shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-116938"></a>-----------------------------------------------------------------</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116421"></a>*|DSPF 1.0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116422"></a>*|DESIGN &quot;DiffOpAmp&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116423"></a>*|VENDOR &quot;Cadence Design Systems, Inc.&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116424"></a>*|PROGRAM &quot;Voltus_libgen&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116425"></a>*|DIVIDER /</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116426"></a>*|DELIMITER #</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116427"></a>*|BUSBIT []</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116428"></a>*|GLOBAL_TEMPERATURE 110</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116429"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116430"></a>.SUBCKT DiffOpAmp AVDD AVSS Ibias inm inp outm outp</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116432"></a>*|GROUND_NET 0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116434"></a>*|NET&#160;&#160; AVDD&#160;&#160;  0</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116435"></a>** Interface nodes:&#160;&#160;   3</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116436"></a>** Regular nodes:&#160;&#160;     1580</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116437"></a>** Resistors:&#160;&#160; 1670</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130128"></a>*|P (AVDD%2 I 0 43.17 47.708)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130129"></a>*|S (AVDD 0.041 47.708) </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130130"></a>*|S (AVDD%1 25.13 49.308)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130131"></a>*|I (AVDD#1144 MM5@49 s I 0 26.09 33.245)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130132"></a>*|I (AVDD#1065 MM5@48 s I 0 24.21 33.245)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130133"></a>*|I (AVDD#1019 MM0@49 s I 0 23.27 33.245)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130134"></a>*|I (AVDD#990 MM0@48 s I 0 22.33 33.245)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130135"></a>*|I (AVDD#619 MM0@47 s I 0 14.81 33.245)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130136"></a>*|I (AVDD#806 MM0@46 s I 0 18.57 33.245)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130095"></a>*|I (AVDD#619 MM0@45 s I 0 14.81 33.245)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130096"></a>*|S (AVDD#4 2.655 43.965)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130097"></a>*|S (AVDD#5 2.655 43.485)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130098"></a>*|S (AVDD#6 2.655 43.005)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130099"></a>*|S (AVDD#7 2.655 42.525)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130149"></a>R1_AVDD AVDD#3 AVDD#4 0.196186 $metal1_conn $W=600 $L=3000 $X=2.655 $Y=44.115</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130150"></a>R2_AVDD AVDD#4 AVDD#5 0.313897 $metal1_conn $W=600 $L=4800 $X=2.655 $Y=43.725</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130151"></a>R3_AVDD AVDD#5 AVDD#6 0.313897 $metal1_conn $W=600 $L=4800 $X=2.655 $Y=43.245</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130152"></a>R4_AVDD AVDD#6 AVDD#7 0.313897 $metal1_conn $W=600 $L=4800 $X=2.655 $Y=42.765</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-130153"></a>R5_AVDD AVDD#7 AVDD#8 0.313897 $metal1_conn $W=600 $L=4800 $X=2.655 $Y=42.285</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116926"></a>.ENDS</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116917"></a>-----------------------------------------------------------------------------</pre>
<h3>
<a id="pgfId-116508"></a><a id="33329"></a>A Sample Top-Level xDSPF file</h3>

<p>
<a id="pgfId-116623"></a>A part of a sample top-level xDSPF file is shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-116967"></a>----------------------------------------------------------------------------</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116526"></a>*|DSPF 1.5</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116527"></a>*</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116528"></a>*|DATE &quot;Fri Jan&#160;&#160;6 09:00:59 2017&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116529"></a>*|VENDOR &quot;Cadence Design Systems&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116530"></a>*|PROGRAM &quot;Cadence Quantus Extraction&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116531"></a>*|VERSION &quot;16.1.1 Linux 64 bit - (Wed Dec&#160;&#160;7 10:12:15 PST 2016)&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116532"></a>*|DESIGN &quot;DiffOpAmp_top_2subblock&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116533"></a>*|DIVIDER /</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116534"></a>*|DELIMITER #</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116535"></a>*|DeviceFingerDelim &quot;@&quot;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116536"></a>*|BUSBIT []</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116537"></a>*|GLOBAL_TEMPERATURE 25</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116538"></a>*|OPERATING_TEMPERATURE 25</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116539"></a>** caps2d version: 10</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116540"></a>*</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116541"></a>.SUBCKT&#160;&#160;DiffOpAmp_top_2subblock inm outm Ibias inp AVDD AVSS outp</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116542"></a>*</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116543"></a>*Net Section</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116544"></a>*</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116545"></a>*|GROUND_NET AVSS</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116546"></a>*</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116547"></a>*LAYER_MAP</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116548"></a>*0 none</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116549"></a>*1 metal11_conn</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116550"></a>*2 metal10_conn</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116554"></a>*6 Via1</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116555"></a>*7 Via2</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116563"></a>*15 via10_cap</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116564"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116565"></a>*|NET inm 2.06705e-15</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116566"></a>*|P (inm X 0 13.9350 2.2885) // $llx=13.9350 $lly=2.2885 $urx=13.9350 $ury=2.2885 $lvl=5</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116567"></a>*|I (XI1#inm XI1 inm X 0 13.9350 2.8700) // $llx=13.9350 $lly=2.8700 $urx=13.9350 $ury=2.8700 $lvl=5</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116568"></a>*|S (inm#1 13.9350 3.1465) // $llx=13.9350 $lly=3.1465 $urx=13.9350 $ury=3.1465 $lvl=5</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116569"></a>*|S (inm#2 13.9350 2.2485) // $llx=13.9350 $lly=2.2485 $urx=13.9350 $ury=2.2485 $lvl=5</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116570"></a>C1 inm#2 AVSS 1.36516e-17</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116571"></a>C2 XI1#inm AVSS 5.35868e-17</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116572"></a>C3 inm AVSS 1.99981e-15</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116573"></a>Rk1 inm#1 XI1#inm 0.158887 $metal1_conn&#160;&#160;$L=0.277 $W=0.08 $X=13.935 $Y=3.008 $lvl=5</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116574"></a>Rk2 XI1#inm inm 0.334151 $metal1_conn&#160;&#160;$L=0.5815 $W=0.08 $X=13.935 $Y=2.579 $lvl=5</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116575"></a>Rk3 inm inm#2 0.022985 $metal1_conn&#160;&#160;$L=0.04 $W=0.08 $X=13.935 $Y=2.2685 $lvl=5</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-116576"></a>*</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-117074"></a>*|NET outm 5.00591e-15</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-117075"></a>*|P (outm X 0 61.3645 2.6400) // $llx=61.3645 $lly=2.6400 $urx=61.3645 $ury=2.6400 $lvl=5</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-117076"></a>*|I (XI2#outm XI2 outm X 0 61.3650 3.0300) // $llx=61.3650 $lly=3.0300 $urx=61.3650 $ury=3.0300 $lvl=5</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-117077"></a>*|S (outm#1 70.1200 27.5500) // $llx=70.1200 $lly=27.5500 $urx=70.1200 $ury=27.5500 $lvl=15</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-117090"></a>C4 outm#65 AVSS 3.96163e-17</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-117091"></a>C5 outm#64 AVSS 1.32595e-17</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-117092"></a>C6 outm#63 AVSS 8.5239e-17</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-117105"></a>Ra4 outm#2 outm#5 0.007130 $metal11_conn&#160;&#160;$L=1.64 $W=4.8 $X=68.475 $Y=26.73 $lvl=1</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-117106"></a>Ra5 outm#5 outm#8 0.007152 $metal11_conn&#160;&#160;$L=1.645 $W=4.8 $X=68.475 $Y=25.0875 $lvl=1</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-117107"></a>Ra6 outm#8 outm#11 0.020521 $metal11_conn&#160;&#160;$L=0.7595 $W=4.8 $X=68.475 $Y=23.885 $lvl=1</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-117062"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-117009"></a>------------------------------------------------------------------------------</pre>

<p>
<a id="pgfId-117016"></a>Where,</p>
<p>
<a id="pgfId-117030"></a>R/C is the resistor/capacitor information</p>

<h3>
<a id="pgfId-116358"></a><a id="43182"></a>A Macro LEF File</h3>

<p>
<a id="pgfId-116492"></a>Sample Macro LEF file that contains the LEF information for the design is shown below.</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-111479"></a>VERSION 5.8 ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111480"></a>BUSBITCHARS &quot;[]&quot; ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111481"></a>DIVIDERCHAR &quot;/&quot; ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111482"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111483"></a>PROPERTYDEFINITIONS</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111484"></a>  LIBRARY artistTranslator STRING &quot;4.2.1&quot; ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111485"></a>  LIBRARY artistVersion STRING &quot;4.2.1&quot; ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111486"></a>  MACRO oaTaper STRING ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111487"></a>  MACRO lastSavedExtractCounter INTEGER ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111488"></a>  LAYER LEF58_TYPE STRING ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111489"></a>  LAYER LEF58_ENCLOSURE STRING ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111490"></a>  LAYER LEF58_SPACING STRING ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111491"></a>  LAYER LEF58_WIDTH STRING ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111492"></a>END PROPERTYDEFINITIONS</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111493"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111494"></a>UNITS</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111495"></a>  CAPACITANCE PICOFARADS 1 ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111496"></a>  DATABASE MICRONS 2000 ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111497"></a>END UNITS</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111498"></a>MANUFACTURINGGRID 0.005 ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111499"></a>LAYER OVERLAP</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111500"></a>  TYPE OVERLAP ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-111471"></a>END OVERLAP</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-114438"></a>LAYER PWdummy</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-114439"></a>  TYPE MASTERSLICE ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-114440"></a>  PROPERTY LEF58_TYPE &quot;TYPE PWELL ;&quot; ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-114441"></a>  PROPERTY LEF58_SPACING &quot;SPACING 0.3 ;&quot; ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-114442"></a>  PROPERTY LEF58_WIDTH &quot;WIDTH 0.3 ;&quot; ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-114443"></a>END PWdummy</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-114444"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-114445"></a>LAYER Nwell</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-114446"></a>  TYPE MASTERSLICE ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-114447"></a>  PROPERTY LEF58_TYPE &quot;TYPE NWELL ;&quot; ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-114448"></a>  PROPERTY LEF58_SPACING &quot;SPACING 0.6 ;&quot; ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-114449"></a>  PROPERTY LEF58_WIDTH &quot;WIDTH 0.3 ;&quot; ;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-114426"></a>END Nwell</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-128739"></a>-------------------------------------------------------------------------</pre>
<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="pgvcreation.html" id="prev" title="Power-Grid View Generation">Power-Grid View Generation</a></em></b><b><em><a href="batchmode.html" id="nex" title="Batch Mode Execution">Batch Mode Execution</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>