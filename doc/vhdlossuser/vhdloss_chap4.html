
<html><head><title>Creating a Testbench</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="rgirdhar" />
<meta name="CreateDate" content="2020-08-20" />
<meta name="CreateTime" content="1597946693" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes how to use VHDL OSS Toolbox to generate netlist views." />
<meta name="DocTitle" content="Virtuoso VHDL Toolbox User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Creating a Testbench" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="vhdlossuser" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-08-20" />
<meta name="ModifiedTime" content="1597946693" />
<meta name="NextFile" content="vhdloss_chap5.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="vhdloss_chap3.html" />
<meta name="c_product" content="Virtuoso Schematic Editor" />
<meta name="Product" content="Virtuoso Schematic Editor" />
<meta name="ProductFamily" content="Virtuoso Schematic Editor" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso VHDL Toolbox User Guide -- Creating a Testbench" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="vhdlossuserICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="vhdlossuserTOC.html">Contents</a></li><li><a class="prev" href="vhdloss_chap3.html" title="Netlisting a VHDL Design">Netlisting a VHDL Design</a></li><li style="float: right;"><a class="viewPrint" href="vhdlossuser.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="vhdloss_chap5.html" title="Simulating a Netlisted VHDL Design">Simulating a Netlisted VHDL De ...</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso VHDL Toolbox User Guide<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>4
<a id="pgfId-1014262"></a></h1>
<h1>
<a id="pgfId-1017962"></a><hr />
<a id="13916"></a>Creating a Testbench<hr />
</h1>

<p>
<a id="pgfId-1019517"></a>A testbench is typically an entity/architecture pair, which instantiates the top-level cell and provides stimulus to the Design Under Test (DUT). By using the VHDL Create Test Bench form, you can:</p>
<ul><li>
<a id="pgfId-1019518"></a>Provide details about an external testbench for the top-level design that you want to simulate.</li><li>
<a id="pgfId-1019519"></a>Provide details to be used during auto-generation of the testbench by VHDL Toolbox.</li><li>
<a id="pgfId-1019520"></a>Edit the auto-generated testbench. </li></ul>


<p>
<a id="pgfId-1019521"></a>This chapter describes how you can use the VHDL Toolbox to configure properties for a testbench and the various methods used for creating a testbench. </p>
<p>
<a id="pgfId-1019522"></a>In this chapter, you will learn about the following topics:</p>
<ul><li>
<a id="pgfId-1019523"></a><a href="vhdloss_chap4.html#36182">VHDL Create Test Bench Form</a></li><li>
<a id="pgfId-1019524"></a><a href="vhdloss_chap4.html#65330">Methods to Create a Testbench</a></li></ul>

<p>
<a id="pgfId-1019846"></a>For information on the SKILL functions associated with VHDL Toolbox, see <em><a actuate="user" class="URL" href="../netlistsimulateref/netlistsimulaterefTOC.html#firstpage" show="replace" xml:link="simple">Digital Design Netlisting and Simulation SKILL Reference</a></em>.</p>

<h2>
<a id="pgfId-1019576"></a><a id="36182"></a>VHDL Create Test Bench Form<a id="testbenchSetup"></a></h2>

<p>
<a id="pgfId-1019577"></a>The VHDL Create Test Bench form contains fields that you can use to configure the properties of a testbench. To open the VHDL Create Test Bench form:</p>
<ol><li>
<a id="pgfId-1019578"></a>In the VHDL Toolbox window, choose <em>Commands &#8211; Edit Test Bench</em>.
The VHDL Create Test Bench form appears, as shown in the figure below.<br />
<a id="pgfId-1019582"></a><div class="webflare-div-image">
<img src="images/vhdloss_edit_testbench.gif" /></div></li></ol>




<p>
<a id="pgfId-1019583"></a>The various options on the VHDL Create Test Bench form are:</p>
<ul><li>
<a id="pgfId-1019584"></a>VHDL Test Bench File: Specifies the name of input testbench file, which needs to be compiled with the generated netlists. When you specify the testbench file, you also need to ensure that the <em>Include the specified Test-Bench in simulation</em> check box on the VHDL Setup - Simulation form is selected. The current version of the VHDL Toolbox allows you to specify only a single testbench file. If the entity and architecture of a testbench are defined in separate files, you need to combine these files to get a single file.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1019585"></a>If an auto generated testbench exists for current cellview in the specified run directory, the path to that testbench is displayed. To edit the testbench already created, click the edit button <img src="images/vhdloss_edit_button.gif" /><span> next to the </span><em>VHDL Test Bench File</em><span> field. The testbench is opened in the default editor where you can make changes. </span></div><br />
<a id="pgfId-1019589"></a>Default: <code>test_bench.vhd</code></li><li>
<a id="pgfId-1019590"></a>Compile Library Name: Specifies the library in which a testbench is compiled. A testbench is usually compiled in the same library as the top level design. However, you can change the value in the textfield to compile a testbench in a different library. The textfield contains the name of the top cell library by default.</li><li>
<a id="pgfId-1019591"></a>Cell Name (Primary Unit): Specifies the name of the entity in the testbench. The entity name is <code>testbench</code> by default. However, you can change the value in the textfield, if the entity in the testbench has a name other than <code>testbench</code>.</li><li>
<a id="pgfId-1019592"></a>View Name (Secondary Unit): Specifies the name of the architecture in the testbench. The architecture name is <code>stimulus</code> by default. However, you can change the value in the textfield, if the architecture in the testbench has a name other than <code>stimulus</code>.</li></ul>







<h2>
<a id="pgfId-1019593"></a><a id="65330"></a>Methods to Create a Testbench</h2>

<p>
<a id="pgfId-1019594"></a>You can create a testbench for the top level schematic in two ways:</p>
<ul><li>
<a id="pgfId-1019595"></a>Generate a testbench automatically during netlist creation</li><li>
<a id="pgfId-1019596"></a>Attach an existing testbench with the schematic</li></ul>


<h3>
<a id="pgfId-1019597"></a>Automatic Generation of Testbench</h3>

<p>
<a id="pgfId-1019599"></a>To create a testbench automatically, select the <em><a href="vhdloss_chap3.html#vhdlgentestbench">Generate Test Bench Template</a></em> option on the <em>Netlist Options</em> tab of the VHDL Setup - Netlist form. When this option is used, the VHDL Toolbox creates a testbench and saves it as <code>test_bench.vhd</code> in the run directory.</p>
<p>
<a id="pgfId-1019600"></a>The default structure of the testbench is as given below:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019601"></a>&lt;Default Context Clause&gt;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019602"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019603"></a>ENTITY &lt;entname&gt;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019604"></a>END [ENTITY] &lt;entname&gt;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019605"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019606"></a>&lt;Default Context Clause&gt;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019607"></a>&lt;use lib clause&gt;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019608"></a></pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019609"></a>ARCHITECTURE &lt;archname&gt; of &lt;entname&gt; IS</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019610"></a>&lt; COMPONENT DECLARATION&gt;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019611"></a>&lt; SIGNAL DECLARATION &gt;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019612"></a>BEGIN</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019613"></a>&lt;INSTANCE NAME&gt; : &lt; BINDING &gt;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019614"></a>PORT MAP ( </pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019615"></a>  &lt;formal_1&gt; =&gt; &lt;actual_1&gt;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019616"></a>  &#8230;</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019617"></a> )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1019618"></a>END [ARCHITECTURE] &lt;archname&gt;</pre>

<p>
<a id="pgfId-1019619"></a></p>
<p>
<a id="pgfId-1019620"></a>The instances are bound in the testbench in the same way as done during netlist creation, as described below:</p>
<ul><li>
<a id="pgfId-1019621"></a>In case of VHDL 93, the direct entity binding is used. 
For example, <code>&lt;instname&gt; : USE ENTITY &lt;lib&gt;.&lt;topcell&gt;(&lt;view&gt;)</code>.</li><li>
<a id="pgfId-1019622"></a>In case of VHDL 87, the component and open binding is used. 
For example, <code>&lt;instname&gt; : &lt;topcell&gt;</code>.</li><li>
<a id="pgfId-1019623"></a>In case of config, the instances are bound to the config of the top cell. 
For example, <code>&lt;instname&gt; : configuration &lt;lib&gt;.&lt;top_config_name&gt;</code></li></ul>


<p>
<a id="pgfId-1019624"></a>You can configure details, such as the file name or the library name of the testbench to be generated, using the VHDL Create Test Bench form. Alternatively, you can also set certain SKILL variables. For more details, refer <a href="vhdloss_chap4.html#19171">SKILL Variables to Configure Testbench Creation</a>.</p>
<p>
<a id="pgfId-1019628"></a>To view and edit the auto generated testbench, choose <em>Commands &#8211; Edit Test Bench</em>. The VHDL Create Test Bench form appears. The name and path of the testbench file appears in the <em>VHDL Test Bench File</em> field. To open the test bench in the default editor and make changes to the file, click the edit button <img src="images/vhdloss_edit_button.gif" /><span>.</span></p>
<h3>
<a id="pgfId-1019632"></a>Providing an Existing Testbench</h3>

<p>
<a id="pgfId-1019689"></a>If you have an existing testbench, provide its details to VHDL Toolbox using the VHDL Create Test Bench form. For more details about this form, refer to <a href="vhdloss_chap4.html#36182">VHDL Create Test Bench Form</a>.</p>

<h3>
<a id="pgfId-1019693"></a><a id="19171"></a>SKIL<a id="SKILL_testbench"></a>L Variables to Configure Testbench Creation</h3>

<p>
<a id="pgfId-1019694"></a>You can use the following SKILL variables to configure the testbench:</p>
<ul><li>
<a id="pgfId-1019639"></a><code>hnlVHDLGenTestBench</code>: Specifies if the testbench is to be generated automatically during netlist generation. By default, this variable is set as <code>nil</code>.</li><li>
<a id="pgfId-1019640"></a><code>vhdlSimTestBenchLCV</code>: Sets the name of the library, cell and view for which testbench is to be created. By default, this variable is set as <code>&#39;(&lt;top_cell_lib&gt; &quot;testbench&quot; &quot;stimulus&quot;)</code>.</li><li>
<a id="pgfId-1019641"></a><code>hnlVHDLTestBenchInstName</code>: Sets the name of instance for the testbench. By default, this variable is set as <code>dut</code>.</li><li>
<a id="pgfId-1019642"></a><code>vhdlSimTestBenchFile</code>: Sets the name of the testbench file. By default, this variable is set as <code>test_bench.vhd</code>.</li></ul>




<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="vhdloss_chap3.html" id="prev" title="Netlisting a VHDL Design">Netlisting a VHDL Design</a></em></b><b><em><a href="vhdloss_chap5.html" id="nex" title="Simulating a Netlisted VHDL Design">Simulating a Netlisted VHDL De ...</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>