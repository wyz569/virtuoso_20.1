
<html><head><title>Simulating a Netlisted VHDL Design</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="rgirdhar" />
<meta name="CreateDate" content="2020-08-20" />
<meta name="CreateTime" content="1597946693" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes how to use VHDL OSS Toolbox to generate netlist views." />
<meta name="DocTitle" content="Virtuoso VHDL Toolbox User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Simulating a Netlisted VHDL Design" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="vhdlossuser" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-08-20" />
<meta name="ModifiedTime" content="1597946693" />
<meta name="NextFile" content="vhdloss_chap6.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Design" />
<meta name="PrevFile" content="vhdloss_chap4.html" />
<meta name="c_product" content="Virtuoso Schematic Editor" />
<meta name="Product" content="Virtuoso Schematic Editor" />
<meta name="ProductFamily" content="Virtuoso Schematic Editor" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso VHDL Toolbox User Guide -- Simulating a Netlisted VHDL Design" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="vhdlossuserICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="vhdlossuserTOC.html">Contents</a></li><li><a class="prev" href="vhdloss_chap4.html" title="Creating a Testbench">Creating a Testbench</a></li><li style="float: right;"><a class="viewPrint" href="vhdlossuser.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="vhdloss_chap6.html" title="Modeling Schematics as VHDL">Modeling Schematics as VHDL</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso VHDL Toolbox User Guide<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>5
<a id="pgfId-1014262"></a></h1>
<h1>
<a id="pgfId-1017962"></a><hr />
<a id="38952"></a>Simulating a Netlisted VHDL Design<hr />
</h1>

<p>
<a id="pgfId-1017963"></a>After netlisting, you can simulate and debug your VHDL design. In the Virtuoso design environment, you can simulate a design by using the <code>xrun utility</code> or the XMVHDL (xmsim) simulator. While the <code>xrun utility </code>is a quick one-step process, the XMVHDL simulator is a three-step process, which involves compiling, elaborating, and simulating the design.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1020414"></a>The executable and log file names will depend on the simulator being used. For the changes in the executable and log file names when using the Xcelium simulator, see <a href="appD.html#80897">Running Simulations with Xcelium</a>.</div>
<p>
<a id="pgfId-1019017"></a>You can set up and run the <code>xrun utility </code>from both, the command line interface and VHDL Toolbox, however, the XMVHDL simulator can be run only from the VHDL Toolbox.</p>
<p>
<a id="pgfId-1019019"></a>The XMVHDL simulator enables you to<a id="marker-1019018"></a>:</p>
<ul><li>
<a id="pgfId-1017706"></a>Collect simulation data in a <a id="marker-1017705"></a>database file</li><li>
<a id="pgfId-1017707"></a>Create your own programs to directly process simulation results</li><li>
<a id="pgfId-1020187"></a>Display simulation results using a waveform window</li><li>
<a id="pgfId-1020189"></a>Save the state of a simulation as a &#8220;golden&#8221; run so that it can be compared with a subsequent run.</li></ul>



<p>
<a id="pgfId-1017693"></a>This chapter describes the steps to simulate and debug your netlisted design using the VHDL Toolbox. </p>
<p>
<a id="pgfId-1019038"></a>In this chapter, you will learn about the following topics:</p>
<ul><li>
<a id="pgfId-1016416"></a><a href="vhdloss_chap5.html#30591">Simulating a Design Using the VHDL Toolbox</a></li><li>
<a id="pgfId-1016043"></a><a href="vhdloss_chap5.html#30927">Debugging Your VHDL Design</a></li><li>
<a id="pgfId-1014280"></a><a href="vhdloss_chap5.html#23357">Comparing Simulations</a></li><li>
<a id="pgfId-1014283"></a><a href="vhdloss_chap5.html#16599">Simulating a VHDL Design Using Non-Cadence VHDL Tools</a></li></ul>



<p>
<a id="pgfId-1019524"></a>For more information about using the command-line options for simulating your design, refer to <a href="vhdloss_chap1.html#12754">Netlist and Simulate a VHDL Design</a>. For information on the SKILL functions associated with VHDL Toolbox, see <em><a actuate="user" class="URL" href="../netlistsimulateref/netlistsimulaterefTOC.html#firstpage" show="replace" xml:link="simple">Digital Design Netlisting and Simulation SKILL Reference</a></em>.</p>

<h2>
<a id="pgfId-1019531"></a><a id="HYGGEN.88"></a><a id="30591"></a>Simulating a Design Using the VHDL Toolbox</h2>

<p>
<a id="pgfId-1019532"></a>Before you can simulate a design by choosing <em>Commands &#8211; Simulate</em>, you need to set up the simulation options. </p>

<h3>
<a id="pgfId-1017934"></a><a id="HYGGEN.84"></a><a id="18364"></a><a id="HYGGEN.80"></a>VHDL Setup - Simulation Form<a id="marker-1017865"></a> </h3>

<p>
<a id="pgfId-1017867"></a>To set simulatio<a id="vhdlOSSSimulateOptionsForm"></a>n options for a VHDL design:</p>
<ol><li>
<a id="pgfId-1019834"></a>In the VHDL Toolbox window, choose <em>Setup &#8211; Simulation</em><a id="marker-1019832"></a><a id="vhdlSimulateOptionsForm"></a>.
The VHDL Setup - Simulation form appears, as shown in the figure below.<br />
<a id="pgfId-1019852"></a><div class="webflare-div-image">
<img width="415" height="437" src="images/vhdloss_chap5-2.gif" /></div></li></ol>




<p>
<a id="pgfId-1019838"></a>The VHDL Setup - Simulation form consists of two tabs:</p>
<ul><li>
<a id="pgfId-1017995"></a>General Options</li><li>
<a id="pgfId-1018005"></a>xrun Options</li></ul>


<h4>
<a id="pgfId-1018012"></a>General Options Tab</h4>

<p>
<a id="pgfId-1018022"></a>The figure displayed above shows the General Options tab of the VHDL Setup - Simulation form. This tab contains various options to control simulation.</p>
<ul><li>
<a id="pgfId-1018041"></a>Simulator Type:</li><li>
<a id="pgfId-1018064"></a>Simulation Snapshot Name:</li><li>
<a id="pgfId-1018071"></a>Run Netlist Before Simulation : Ensures the creation of VHDL netlist before running the simulation. The netlister traverses the design hierarchy and converts all the schematics into VHDL design units. The traversal is defined by a switch list, a stop view list, and a stop library list specified in <a href="vhdloss_chap3.html#TraversalSettings">Traversal Settings</a>. After netlisting, the hierarchy is converted into a VHDL configuration. You can choose this option when you are not netlisting the design explicitly before simulation.</li><li>
<a id="pgfId-1018043"></a>Clean compiled data(.pak files) before simulation: Deletes the elaboration or simulation results of the previous run before starting the simulation. If you do not select this option, the simulator reuses the results of the previous run.</li><li>
<a id="pgfId-1018044"></a>Include the specified Test Bench in simulaton: Indicates that the user supplied testbench file is also to be added to the list of design files after the specified design gets netlisted. The library, entity name, and architecture can also be specified if their values differ from default values. Once the complete design along with a testbench is compiled and elaborated, the simulator can honor the stimulus in testbench file and perform actions for the users. By default, this option is enabled.</li><li>
<a id="pgfId-1018045"></a>Batch/Interactive Simulation:<ul><li>
<a id="pgfId-1018191"></a>Simulation Mode</li><li>
<a id="pgfId-1018205"></a>Script File</li></ul></li><li>
<a id="pgfId-1018212"></a>Cosimulation: <ul><li>
<a id="pgfId-1018222"></a>Verilog Run Directory</li><li>
<a id="pgfId-1018232"></a>Verilog Simulator Optionsp</li></ul></li></ul>










<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1018263"></a>When you enable the <em>Xrun Options</em> tab, the <em>Cosimulation</em> section of the <em>General Options</em> tab is disabled.</div>

<h4>
<a id="pgfId-1019087"></a>Xrun Options Tab</h4>

<p>
<a id="pgfId-1019146"></a>The following figure shows the <em>Xrun Options</em> tab on the VHDL Setup - Simulation form:</p>

<p>
<a id="pgfId-1019862"></a></p>
<div class="webflare-div-image">
<img width="410" height="434" src="images/vhdloss_chap5-3.gif" /></div>

<p>
<a id="pgfId-1019167"></a>The <em>Xrun Options</em> tab provides options for the <em>xrun utility</em> integrated with Virtuoso. The xrun utility provides a simple invocation process that lets you run the simulator by specifying all input files and command-line options on a single command line.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1019168"></a>By default, Virtuoso uses the <code>xmsim</code> simulator. Therefore, the <em>Xrun Options</em> tab is disabled. To enable the <em>Xrun Options</em> tab, set the <code>vhdlSimSimulator</code> SKILL variable to <code>xrun</code>. When you enable the <em>Xrun Options</em> tab, the <em>Cosimulation</em> section of the <em>General Options</em> tab is disabled.</div>
<p>
<a id="pgfId-1018270"></a>When using the xrun utility, you need to set xrun specific options in addition to the options given in the settings done in the <em>General Options</em> tab. The various options on the <em>Xrun Options</em> tab are: </p>
<ul><li>
<a id="pgfId-1018271"></a>Xrun Options: Contains the following fields to specify the settings to be used by the xrun utility:<ul><li>
<a id="pgfId-1018273"></a>L<a id="irunLogFile"></a>og File: Specifies path for the xrun log file.<br />
<a id="pgfId-1018274"></a>Default: <code>xrun.log</code></li><li>
<a id="pgfId-1018276"></a><a id="irunSimOptions"></a>Xrun Simulator Options: Specifies simulation options that are to be passed to the simulator and are not present in the Simulation Options form.<br />
<a id="pgfId-1018277"></a>Default: <code>-q -v93</code>. Here, <code>-q</code> specifies that all informational messages will be suppressed. <code>-v93</code> specifies that all VHDL-93 features supported in this release will be enabled.</li><li>
<a id="pgfId-1018279"></a>In<a id="irunInclExtn"></a>clude Extensions: Specifies a list of file extensions to be recognized by the xrun utility. xrun recognizes language of a file by the file extension. Therefore, you need to specify the file types to be recognized for a specific language. Select a language from the pull-down list and specify the file extensions to be recognized for that language. This list overrides the default extensions for VHDL files. <br />
<a id="pgfId-1018280"></a>By default, the xrun utility recognizes files with the following extensions as VHDL files:
<code>.vhd,.vhdp,.vhdl,.vhdlp,.VHD,.VHDP,.VHDL,.VHDLP</code><br />
<a id="pgfId-1018281"></a>By default, the xrun utility recognizes files with the following extensions as Verilog files:
<code>.v,.vp,.vs,.V,.VP,.VS</code></li></ul></li><li>
<a id="pgfId-1018283"></a>De<a id="irunDebugOptions"></a>bug Options: Specifies the debug options. You can specify the type of access required while compiling the design. No special access is required for viewing the hierarchy or for finding the names of objects (nets, regs, variables, or scopes) in the design. However, you need the following types of access for more control on objects:<ul><li>
<a id="pgfId-1018284"></a>Read access is required to probe nets, regs, and variables (including setting PLI callbacks) and to get the value of these objects.</li><li>
<a id="pgfId-1018285"></a>Write access is required to interactively set the value of simulation objects (depositing or forcing variables). Write access automatically provides read access.</li><li>
<a id="pgfId-1018286"></a>Connectivity access is required to get driver and load information about a specific net, reg, or other variable. Connectivity access automatically provides write and read access.</li><li>
<a id="pgfId-1018287"></a>Enable Line Debugging is required to set breakpoints at source lines or to apply statement callbacks. by default, this option is not checked. Using this option automatically provides read, write, and connectivity access.</li></ul></li></ul>


















<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1018288"></a>When you use the xrun utility, the settings done using the VHDL Setup - Simulation form are saved as a set of SKILL variables in the <code>.vhdlrc</code> file in the run directory. Inputs from this file are passed to the xrun utility. When you use the same run directory again, the options set in the .vhdlrc file are restored. For more details on the SKILL variables, refer to the <a href="appB.html#23236">Setting VHDL HNL Variables</a> section in Appendix B.</div>

<h3>
<a id="pgfId-1018821"></a><a id="HYGGEN.82"></a>Simulating the VHDL Design</h3>

<p>
<a id="pgfId-1020457"></a>Simulation first checks the design. If the check is successful, the VHDL simulator starts in batch or interactive mode on the local machine, as specified in the setup. The VHDL simulator triggers a three-step process to compile, elaborate, and simulate a design. When you click <em>Simulate, </em>the registered compiler (<code>xmvhdl</code>) is invoked on the generated netlist. A testbench, if available, is also compiled with the design. After the design is compiled, it is elaborated using the registered elaborator (<code>xmelab</code>). The elaborated design is then passed on to the registered simulator (<code>xmsim</code>). You can run the simulation either in interactive or batch mode as required.</p>
<p>
<a id="pgfId-1020210"></a>To simulate your VHDL design:</p>
<ul><li>
<a id="pgfId-1019179"></a>Choose<em> Commands &#8211; Simulate</em>.
This command checks your design and, if successful, starts the XM-VHDL simulator using the setup specified on the VHDL Setup - Simulation form. Alternatively, you can also simulate the design using the<em> Simulate Design</em> button on the fixed menu. </li></ul>
<p>
<a id="pgfId-1018798"></a>For more information on the XM-VHDL simulator, refer to the <em>XM-VHDL Simulator Help.</em></p>

<h2>
<a id="pgfId-1014377"></a><a id="HYGGEN.89"></a><a id="30927"></a>Debugging Your VHDL Design </h2>

<p>
<a id="pgfId-1014379"></a><a id="marker-1014378"></a>You can use several tools to help in debugging your design. You can</p>
<ul><li>
<a id="pgfId-1014380"></a>Use the VHDL text editor or the schematic editor to edit your design</li><li>
<a id="pgfId-1014381"></a>Set breakpoints or traces on certain objects to prompt you to specify an object</li></ul>


<h3>
<a id="pgfId-1014384"></a><a id="HYGGEN.83"></a>Editing from the XM-VHDL Simulator</h3>

<p>
<a id="pgfId-1016401"></a>You can edit your design while debugging it. To edit a design unit from the XM-VHDL simulator:</p>
<ol><li>
<a id="pgfId-1016403"></a>Choose <em>File &#8211; Edit File </em>from the pop-up menu.
The Edit File form will be invoked. <a id="marker-1016402"></a></li><li>
<a id="pgfId-1019214"></a>Specify the name of the design unit and click the <em>OK</em> button.
The design will appear in the VHDL text editor.</li><li>
<a id="pgfId-1016089"></a>Edit your design.</li></ol>



<h3>
<a id="pgfId-1014393"></a><a id="HYGGEN.79"></a>Using Cross Selection</h3>

<p>
<a id="pgfId-1014395"></a>When <a id="marker-1014394"></a>debugging your design, you can set breakpoints or traces on certain objects. These commands prompt you to specify an object. You can specify an object by doing the following:</p>
<ul><li>
<a id="pgfId-1014396"></a>Typing in a name on the command form</li><li>
<a id="pgfId-1014397"></a>Clicking on an object in the schematic window that automatically fills in the name on the command form</li></ul>

<p>
<a id="pgfId-1014398"></a>To debug your design using cross selection:</p>
<ol><li>
<a id="pgfId-1019890"></a>From the Visrtuoso Schematic Editor, choose <em>Options &#8211; Editor</em>.
The Editor Options form appears.<br />
<a id="pgfId-1019901"></a><div class="webflare-div-image">
<img width="466" height="526" src="images/vhdloss_chap5-4.gif" /></div></li><li>
<a id="pgfId-1019894"></a>Select <em>Cross Selection</em> check box.</li><li>
<a id="pgfId-1014409"></a>Click <em>OK</em>.<br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1014410"></a>You can also add the following line to your <code>.cdsenv</code> file:</div><pre class="webflare-pre-block webflare-courier-new" id="#id1014411">
<a id="pgfId-1014411"></a>envSetVal(&quot;schematic&quot; &quot;broadcast&quot; &#8217;boolean t)</pre></li><li>
<a id="pgfId-1014412"></a>From the XM-VHDL simulator, choose <em>Show &#8211; Breakpoint...&#8211; Set... </em>or <em>Show &#8211; Probes...&#8211; Set... </em>.</li></ol>











<p>
<a id="pgfId-1014413"></a>The following sections show you how to fill in the forms automatically through cross selection.</p>

<h4>
<a id="pgfId-1014414"></a>Setting Break Points </h4>

<p>
<a id="pgfId-1014416"></a>The <em>Set Breakpoint </em>command opens a form to create, delete, enable, or disable break points. A breakpoint listing includes the state of the breakpoint.<a id="marker-1014415"></a><a id="marker-1014417"></a></p>
<p>
<a id="pgfId-1014418"></a>You can set break points on the form by identifying an object in the context of a schematic or symbol, as opposed to the netlisted VHDL text.</p>
<p>
<a id="pgfId-1014419"></a>To use cross selection with the <em>Set Breakpoint</em> command in the XM-VHDL simulator, do the following:</p>
<ol><li>
<a id="pgfId-1014420"></a>Choose <em>Show &#8211; Breakpoints</em>... . The <em>Debug Settings</em> form appears.</li><li>
<a id="pgfId-1016164"></a>Select <em>Set...</em> . The <em>Set Break </em>form appears.
<a id="marker-1014421"></a>The Show form appears.<br />
<a id="pgfId-1014430"></a>Click <em>Set </em>to open the Set Break form to add a new breakpoint.
The Set Break form appears.
You can use this form to set breakpoints and specify options for breakpoints of various types. The options change, based on the type of breakpoint you set. <a id="99694"></a></li><li>
<a id="pgfId-1014438"></a>Click a wire in the Virtuoso Schematic Editor L.
The Set Break form fills in automatically, showing the breakpoint type name.</li><li>
<a id="pgfId-1014440"></a>Click <em>OK </em>on the Set Break form.</li></ol>




<p>
<a id="pgfId-1014441"></a>For details on this command, refer to the <em>XM-VHDL Simulator Reference Manual</em><em>.</em></p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1016817"></a>The <em>Show &#8211; Set Trace</em> command is similar. You can select wires in the schematic window to set a trace on a signal.</div>

<h2>
<a id="pgfId-1018457"></a><a id="HYGGEN.90"></a><a id="23357"></a><a id="HYGGEN.91"></a><a id="35248"></a>Comparing Simulations</h2>

<p>
<a id="pgfId-1019662"></a>VHDL<a id="vhdlOSSSimCompareOptionsForm"></a> uses a tool, SimCompare, to compare two waveform databases and log the results of the simulation comparison. SimCompare is invoked in the background when you select the <em>Simulation Compare</em> option from the <em>Fixed Menu</em> or choose <em>Commands &#8211; Sim Compare</em>. SimCompare provides a text view of any differences found when two simulation results are compared. You can compare, for example, pre-synthesis and post-synthesis simulation results. For more information on using the SimCompare tool, refer to the SimCompare User Guide. </p>
<p>
<a id="pgfId-1019587"></a>Choose <em>Setup &#8211; Sim Comparison </em>to open the VHDL Setup - Sim Comparison form in which you can specify names of the Simulation History Manager (SHM) databases that you need to compare and the name of a output log. </p>
<p>
<a id="pgfId-1014527"></a>During simulation, the simulation database opens and traces signals. The current database becomes the <em>golden</em><a id="marker-1014528"></a> database. Then, you run another simulation and compare it against the current database. You can compare the results of any two VHDL simulations that are able to generate SHM databases.</p>

<h3>
<a id="pgfId-1018554"></a><a id="HYGGEN.85"></a>VHDL Setup - Sim Comparison Form</h3>

<p>
<a id="pgfId-1014532"></a>To set up the options for comparing two VHDL simulations<a id="marker-1014531"></a>:</p>
<ol><li>
<a id="pgfId-1014536"></a><a id="marker-1014533"></a>Choose <em>Setup &#8211; Sim Comparison</em> <a id="marker-1014534"></a><a id="vhdlSimCompareOptionsForm"></a>.
The VHDL Setup - Sim Comparison form appears.<br />
<a id="pgfId-1014814"></a><div class="webflare-div-image">
<img src="images/oss_setup_simcompare.gif" /></div></li></ol>




<p>
<a id="pgfId-1014541"></a>The various options on the VHDL Setup - Sim Comparison form are:</p>
<ul><li>
<a id="pgfId-1018580"></a>Golden Database: <a id="marker-1014542"></a>Enables you to type the name of the first SHM database<a id="marker-1014543"></a>. Alternatively, you can also select a file by clicking the ellipsis button next to the field.</li><li>
<a id="pgfId-1018654"></a>Current Database: Enables you to type the name of the second <a id="marker-1014545"></a>SHM database used for comparison. Alternatively, you can also select a file by clicking the ellipsis button next to the field. </li><li>
<a id="pgfId-1018683"></a>Output Log: Enables you to specify the name of a log file that should contain the comparison results. Alternatively, you can also select a file by clicking the ellipsis button next to the field. </li><li>
<a id="pgfId-1014548"></a>Tolerance: Specifies the window of time during which a signal may match<a id="marker-1014549"></a></li><li>
<a id="pgfId-1014550"></a>Compare Offset: Specifies the offset from beginning of the cycle when the comparison is relevant</li><li>
<a id="pgfId-1014552"></a>Units of Time:<a id="marker-1014551"></a>. Displays a list box from which you can select the unit of time</li><li>
<a id="pgfId-1018704"></a>Compare Time Length: Specifies the length of time from offset when comparison is valid<br />
<a id="pgfId-1018707"></a>The following example shows <a id="marker-1018706"></a><em>Compare Offset</em> set to <code>15</code>, and <em>Compare Time Length</em> set to <code>10</code> nanoseconds.<br />
<a id="pgfId-1014816"></a><div class="webflare-div-image">
<img width="470" height="258" src="images/vhdloss_chap5-6.gif" /></div></li></ul>










<h3>
<a id="pgfId-1014599"></a>Comparing VHDL Simulations</h3>

<p>
<a id="pgfId-1014600"></a>To compare simulations:</p>
<ul><li>
<a id="pgfId-1014602"></a>Choose <em>Commands &#8211; Compare Simulation.
</em>The system displays the comparison results in a waveform window.</li></ul>

<h2>
<a id="pgfId-1014605"></a><a id="16599"></a>Simulating a VHDL Design Using Non-Cadence VHDL Tools</h2>

<p>
<a id="pgfId-1014606"></a>To use non-Cadence VHDL tools, you need to define your own SKILL procedures and register this information with the toolbox using the SKILL routine, <code>vhdlRegisterSimulator()</code>. </p>
<p>
<a id="pgfId-1014607"></a>To register your callbacks, add the procedures for the callbacks in some file, say myfile.il that is in the /home/xyz directory and add the following lines to the .cdsinit file in your home directory:</p>

<pre class="webflare-courier-new codeContent">
<a id="pgfId-1016761"></a>(loadi &quot;/home/xyz/myfile.il&quot;)<br />vhdlRegisterSimulator(&quot;<h-hot><a href="vhdloss_chap5.html#myParserCallBack">myParserCallBack</a></h-hot>&quot;<br />               &quot;<h-hot><a href="vhdloss_chap5.html#myAnalyzerCallBack">myAnalyzerCallBack</a></h-hot>&quot;<br />               &quot;<h-hot><a href="vhdloss_chap5.html#myAnalyzerFileExt">myAnalyzerFileExt</a></h-hot>&quot;<br />               &quot;<h-hot><a href="vhdloss_chap5.html#myElaboratorCallBack">myElaboratorCallBack</a></h-hot>&quot;<br />               &quot;<h-hot><a href="vhdloss_chap5.html#mySimulatorCallBack">mySimulatorCallBack</a></h-hot>&quot;<br />               &quot;<h-hot><a href="vhdloss_chap5.html#myDataDirCallBack">myDataDirCallBack</a></h-hot>&quot;<br />               &quot;<h-hot><a href="vhdloss_chap5.html#myDataFileCallBack">myDataFileCallBack</a></h-hot>&quot;<br />               &quot;<h-hot><a href="vhdloss_chap5.html#myWorkLibCallBack">myWorkLibCallBack</a></h-hot>&quot;) </pre>

<p>
<a id="pgfId-1014617"></a>If you do not provide your own callback routines to invoke any of the non-Cadence tools, namely, the <code>parser/analyser/elaborator/simulator</code>, then by default, the XM-VHDL tools such as the <code>parser/analyzer xmvhdl</code>, elaborator <code>xmelab,</code> and simulator <code>xmsim</code> are run.</p>

<h3>
<a id="pgfId-1014619"></a><a id="myParserCallBack"></a>Parser CallBack</h3>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014620"></a>procedure(myParserCallBack((t_filePath t_libName t_errorFile)<br />         ...<br />       )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014621"></a>return value:<br />disembodied Property List(DPL) </pre>

<p>
<a id="pgfId-1014622"></a>This procedure takes the VHDL source file and the name of the library in which this file is contained and runs the parser on it. The parser produces a LISP file which can be loaded by the SKILL engine and referenced as the <code>DPL</code> disembodied property list.&#160;&#160;If the parsing was unsuccessful, then errors/warnings from the parser are written to the error file. </p>

<h3>
<a id="pgfId-1014624"></a><a id="myAnalyzerCallBack"></a>Analyzer CallBack</h3>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014625"></a>procedure( myAnalyzerCallBack(t_filePath t_sourceFileName<br />         t_workLibraryName x_maxErrors)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014626"></a>      ....</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014627"></a>      )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014628"></a>return value:<br />      t if successful</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014629"></a>      nil if fatal error OR</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014630"></a>      list( x_errCount t_errFileName ) if errors occurred</pre>

<p>
<a id="pgfId-1014631"></a>The procedure invokes the analyzer that analyzes the specified <code>sourceFileName</code> which exists in the specified directory <code>filePath</code>. The VHDL design unit is compiled into the library specified by the <code>workLibraryName</code> variable. The analysis aborts if the number of errors generated exceeds the specified <code>maxErrors</code>. </p>
<p>
<a id="pgfId-1014632"></a>For incremental processing to avoid calling the analyzer if the file has already been analyzed, the analyzed file should exist or be linked to the specified <code>filePath</code>.</p>

<h3>
<a id="pgfId-1014634"></a><a id="myAnalyzerFileExt"></a>Analyzed File String</h3>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014635"></a>analyzerFileExt</pre>

<p>
<a id="pgfId-1014636"></a>It is a string representing the name of the analyzed file. For incremental netlisting you need to provide the name of the analyzed file so that the tool does not reanalyze the design. </p>

<h3>
<a id="pgfId-1014638"></a><a id="myElaboratorCallBack"></a>Elaborator CallBack</h3>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014639"></a>procedure( myElaboratorCallBack(t_libName t_primaryName<br />         t_secondaryName t_simModelName x_maxErrors)<br />         ....<br />       )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014640"></a>return value:<br />      t if successful<br />      nil if fatal error OR<br />      list( x_errCount t_errFileName ) if errors occurred</pre>

<p>
<a id="pgfId-1014641"></a>This procedure invokes the elaborator to elaborate the VHDL design unit specified by <span class="webflare-courier-new" style="white-space:pre"><em>libName</em></span>, <span class="webflare-courier-new" style="white-space:pre"><em>primaryName</em></span> and <span class="webflare-courier-new" style="white-space:pre"><em>secondaryName</em></span> variables. The result of the elaboration is a simulation model whose name is specified by the <span class="webflare-courier-new" style="white-space:pre"><em>simModelName</em></span> variable. Elaboration aborts if the number of errors generated exceeds the specified <code>maxErrors</code>. The VHDL design unit can be an architecture or configuration. In the latter case, the configuration name is <code>configuration</code>. </p>

<h3>
<a id="pgfId-1014643"></a><a id="mySimulatorCallBack"></a>Simulator CallBack</h3>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014644"></a>procedure( mySimulatorCallBack(t_libName t_primaryName<br />         t_secondaryName t_simModelName g_batchp<br />               t_scriptFileName)</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014645"></a>         ...</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014646"></a>       )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014647"></a>return value:<br />      t if successful<br />      nil if unsuccessful</pre>

<p>
<a id="pgfId-1014648"></a>The procedure invokes the simulator that simulates the specified simulation model <span class="webflare-courier-new" style="white-space:pre"><em>simModelName.</em></span> You can either run the simulation in batch or interactive mode using the <span class="webflare-courier-new" style="white-space:pre"><em>batchp</em></span> variable.</p>
<p>
<a id="pgfId-1014649"></a>In case of interactive simulation you need to quit any currently running simulations and start the simulator. You can also set the WORK library to specified <span class="webflare-courier-new" style="white-space:pre"><em>libName</em></span>. If <span class="webflare-courier-new" style="white-space:pre"><em>scriptFileName</em></span> is not an empty string, then it is sent to the simulator as a setup file.</p>
<p>
<a id="pgfId-1014650"></a>In case of batch simulation the simulator starts the simulation in background. If scriptFileName is not empty string, then it is sent as the simulation run. Otherwise a scriptFile is created which starts the simulation. In this case the simulation is ended based on the testbench. </p>

<h3>
<a id="pgfId-1014652"></a><a id="myDataDirCallBack"></a>Data Directory CallBack</h3>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014653"></a>procedure( myDataDirCallBack(t_libName t_cellName t_viewName)<br />         ...<br />       )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014654"></a>return value:<br />physical directory where the VHDL text file should be stored</pre>

<p>
<a id="pgfId-1014655"></a>If the library, cell, and view name are given this procedure returns the physical directory where the VHDL text file is to be stored. </p>

<h3>
<a id="pgfId-1014657"></a><a id="myDataFileCallBack"></a>Data File CallBack</h3>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014658"></a>procedure(myDataFileCallBack(t_libName t_cellName t_viewName)<br />         ...<br />       )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014659"></a>return value: <br />name of the file in which the VHDL text file should be stored.</pre>

<p>
<a id="pgfId-1014660"></a>If the library, cell and view names are given this procedure returns the physical file name under which the VHDL text file is to be stored.</p>

<h3>
<a id="pgfId-1014662"></a><a id="myWorkLibCallBack"></a>Work Library CallBack</h3>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014663"></a>procedure(myWorkLibCallBack()<br />         ...<br />       )</pre>
<pre class="webflare-courier-new codeContent">
<a id="pgfId-1014664"></a>return value:<br />name of the work library</pre>

<p>
<a id="pgfId-1014665"></a>This procedure returns the library that contains the compiled design unit information.</p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="vhdloss_chap4.html" id="prev" title="Creating a Testbench">Creating a Testbench</a></em></b><b><em><a href="vhdloss_chap6.html" id="nex" title="Modeling Schematics as VHDL">Modeling Schematics as VHDL</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>