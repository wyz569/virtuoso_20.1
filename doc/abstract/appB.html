
<html><head><title>Library Design Guidelines</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="umap" />
<meta name="CreateDate" content="2020-08-16" />
<meta name="CreateTime" content="1597635221" />
<meta name="DataType" content="Manuals" />
<meta name="Description" content="Describes the Virtuoso Abstract Generator that you can use to create abstracts from layout data." />
<meta name="DocTitle" content="Virtuoso Abstract Generator User Guide" />
<meta name="DocType" content="User Guide" />
<meta name="FileTitle" content="Library Design Guidelines" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2.1" />
<meta name="Keyword" content="abstract" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2020-08-16" />
<meta name="ModifiedTime" content="1597635221" />
<meta name="NextFile" content="appC.html" />
<meta name="Group" content="" />
<meta name="Platform" content="Custom IC Layout" />
<meta name="PrevFile" content="abstract_skill.html" />
<meta name="c_product" content="Virtuoso Layout Suite" />
<meta name="Product" content="Virtuoso Layout Suite" />
<meta name="ProductFamily" content="Virtuoso Layout Suite" />
<meta name="ProductVersion" content="ICADVM20.1" />
<meta name="RightsManagement" content="Copyright 2012-2020 Cadence Design Systems Inc." />
<meta name="Title" content="Virtuoso Abstract Generator User Guide -- Library Design Guidelines" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="prod_feature" content="" />
<meta name="prod_subfeature" content="" />
<meta name="new_topic" content="No" />
<meta name="spotlight_topic" content="0" />
<meta name="Version" content="ICADVM20.1" />
<meta name="SpaceKey" content="abstractICADVM201" />
<meta name="webflare-version" content="2.0" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="abstractTOC.html">Contents</a></li><li><a class="prev" href="abstract_skill.html" title="Abstract Generator SKILL Functions">Abstract Generator SKILL Funct ...</a></li><li style="float: right;"><a class="viewPrint" href="abstract.pdf">View/Print PDF</a></li><li style="float: right;margin-right: 25px;"><a class="nextd" href="appC.html" title="Using Regular Expressions in Abstract Generator">Using Regular Expressions in A ...</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Virtuoso Abstract Generator User Guide<br />Product Version ICADVM20.1, October 2020</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;"><a name="#firstpage"></a>

<h1>C
<a id="pgfId-1022808"></a></h1>
<h1>
<a id="pgfId-1022810"></a><hr />
<a id="60109"></a>Library Design Guidelines<hr />
</h1>

<p>
<a id="pgfId-1017734"></a>This appendix contains guidelines that will help you optimize your library to reduce die size and maximize the effectiveness of the place-and-route software.</p>
<p>
<a id="pgfId-1017735"></a>A properly designed cell library is one of the most important factors in obtaining optimum results from Innovus<sup>TM</sup> Digital Implementation System (Innovus). A poorly designed library can lead to increased run times, undesirable placements, poor routing, and ultimately, less than ideal performance.</p>
<p>
<a id="pgfId-1017736"></a>Although the following suggestions and guidelines are written with Innovus in mind, many also apply to any advanced place-and-route tool. It might be difficult, if not impossible, to incorporate all of the following guidelines into your library: the goal, however, is to adhere to as many of these features as possible in your library design.</p>
<p>
<a id="pgfId-1017737"></a>Before detailing the library development guidelines, it is important for the designer of the library to keep in mind that minimizing cell sizes does not necessarily minimize the total die size. In fact, some of the suggestions in the following pages will cause an increase in the size of the individual cells, but will decrease the overall die size due to reductions in routing among the cells.</p>
<p>
<a id="pgfId-1017738"></a>This appendix does not detail the procedures for creating or validating your library. The main sections covered in this appendix are:</p>
<ul><li>
<a id="pgfId-1019165"></a><a href="appB.html#19498">General Guidelines</a><ul><li>
<a id="pgfId-1019046"></a><a href="appB.html#30742">General Rules for All Cell Types</a></li><li>
<a id="pgfId-1021694"></a><a href="appB.html#18612">Designing Pins for Cells</a></li><li>
<a id="pgfId-1021695"></a><a href="appB.html#27821">Designing Standard Cells</a></li><li>
<a id="pgfId-1021696"></a><a href="appB.html#31920">Designing IO and Corner Cells</a></li><li>
<a id="pgfId-1021697"></a><a href="appB.html#34152">Designing Blocks</a></li></ul></li><li>
<a id="pgfId-1019020"></a><a href="appB.html#42533">Determining Routing Grid Pitch</a><ul><li>
<a id="pgfId-1019073"></a><a href="appB.html#13561">General Guidelines for Setting Pitch</a></li><li>
<a id="pgfId-1021698"></a><a href="appB.html#26877">Setting Pitch for Layers with the Same Preferred Direction</a></li><li>
<a id="pgfId-1021699"></a><a href="appB.html#20770">Setting Pitch for Via Stacking</a></li><li>
<a id="pgfId-1021700"></a><a href="appB.html#37620">Designing a Gridded Library for Innovus</a></li><li>
<a id="pgfId-1021701"></a><a href="appB.html#30363">Converting an Existing Library</a></li></ul></li><li>
<a id="pgfId-1014263"></a><a href="appB.html#11107">Modeling Pins</a><ul><li>
<a id="pgfId-1019094"></a><a href="appB.html#30659">Deciding Pin Layers</a></li><li>
<a id="pgfId-1021702"></a><a href="appB.html#22783">Power to Blockage Violations</a></li><li>
<a id="pgfId-1021703"></a><a href="appB.html#31100">Virtual Tracks</a></li><li>
<a id="pgfId-1021704"></a><a href="appB.html#23363">Off-grid routing on the virtual track might cause violations with fractured pin or blockage rectangles.</a></li><li>
<a id="pgfId-1021705"></a><a href="appB.html#10486">Centering On-grid Pins</a></li><li>
<a id="pgfId-1021706"></a><a href="appB.html#36801">Pins with Potential Routing Problems</a></li></ul></li><li>
<a id="pgfId-1017894"></a><a href="appB.html#31619">Blockages</a><ul><li>
<a id="pgfId-1019130"></a><a href="appB.html#15554">Blockages and Wiring Density</a></li><li>
<a id="pgfId-1021707"></a><a href="appB.html#34447">Blockages and Pin Accessibility</a></li><li>
<a id="pgfId-1021708"></a><a href="appB.html#25706">On-grid Versus Off-Grid Blockages</a></li></ul></li><li>
<a id="pgfId-1019041"></a><a href="appB.html#12936">Cell Porosity and High Density</a><ul><li>
<a id="pgfId-1019139"></a><a href="appB.html#15833">Routing Pitch</a></li><li>
<a id="pgfId-1021709"></a><a href="appB.html#17039">Pin Spacing</a></li><li>
<a id="pgfId-1021710"></a><a href="appB.html#24073">Pin Staggering</a></li><li>
<a id="pgfId-1021711"></a><a href="appB.html#10412">Defining Tracks for Wide Wire Designs</a></li><li>
<a id="pgfId-1021712"></a><a href="appB.html#27456">Variable-Height Versus Multiple-Height Cells</a></li><li>
<a id="pgfId-1021713"></a><a href="appB.html#39037">Non-rectangular Blocks</a></li></ul></li></ul>






























<h2>
<a id="pgfId-1018377"></a><a id="19498"></a>General Guidelines</h2>

<p>
<a id="pgfId-1018378"></a>This section describes the models the software uses and gives you some general tips on the best ways to model the cells in your library. </p>

<h3>
<a id="pgfId-1018379"></a><a id="30742"></a>General Rules for All Cell Types</h3>

<ul><li>
<a id="pgfId-1018380"></a>Every logical pin must have a physical description that contains at least one port. Each port must have at least one physical geometry. </li><li>
<a id="pgfId-1018381"></a>All objects belonging to the cell must be inside the cell boundary.</li><li>
<a id="pgfId-1018901"></a>In some technologies, power and ground pins extend to the edge or outside the boundary.</li><li>
<a id="pgfId-1018382"></a>The edges of pins and blockages must be at least one half the minimum spacing away from the cell boundary.</li><li>
<a id="pgfId-1018383"></a>Minimizing cell size does not necessarily minimize die size. It is better to increase the cell size slightly to optimize routing than to minimize cell size without keeping routing considerations in mind. </li></ul>





<h3>
<a id="pgfId-1018384"></a><a id="27821"></a>Designing Standard Cells</h3>

<p>
<a id="pgfId-1018385"></a>This section provides suggestions for optimizing your design at the library level or inter-cell level, to ensure that the individual cells work together as well as possible. </p>

<h4>
<a id="pgfId-1018386"></a>Optimize Cell Widths</h4>

<ul><li>
<a id="pgfId-1018387"></a>Avoid creating standard cells of the same type that vary greatly in width.<br />
<a id="pgfId-1018971"></a>This results in unbalanced row lengths. In general, the width of the largest standard cells should be no more than five or six times the width of smallest standard cell of the same type in your library. <br />
<a id="pgfId-1018388"></a>If you need more complex cells, it is better to double or triple the height of the cells and keep a reasonable cell width. Innovus can optimize the area utilization by mixing single- and multiple-height cells in the core area without creating gaps around multiple-height cells.</li><li>
<a id="pgfId-1018389"></a>All cell widths should be a multiple of the pin grid.<br />
<a id="pgfId-1018972"></a>If a cell width is not a multiple of the pin grid, even though its pins are on the grid, the cell will cause the cells adjacent to it to be misaligned with respect to the grid. This makes having pins on grid useless because the misalignment of the other cells causes their pins to be off-grid, thereby using more horizontal or vertical tracks than needed.<br />
<a id="pgfId-1019207"></a>Making the cell width a multiple of the pin grid can increase the size of the cell, but will yield a reduction in the total area of the die.</li><li>
<a id="pgfId-1018390"></a>Placement should also be done on a placement snap grid so that the edges of the cells are also on the grid.</li></ul>







<h4>
<a id="pgfId-1018392"></a>Optimize Cell Heights</h4>

<p>
<a id="pgfId-1018393"></a>Optimal cell heights vary depending on the row style your design uses.</p>
<p>
<a id="pgfId-1018394"></a>Of the four styles described below, using the second style is highly discouraged. You can use any of the other three for Innovus. The last two row styles typically result in the smallest die sizes. </p>
<ul><li>
<a id="pgfId-1018434"></a>Style 1: Standard height cells in single cell rows <br />
<a id="pgfId-1020271"></a><br /><div class="webflare-div-image">
<img width="568" height="190" src="images/appB-2.gif" /></div>
<a id="pgfId-1018435"></a>Typically, these designs have two or more layers. Cell height is limited. You can have power sharing if you design it in. Power sharing can reduce die size by reducing the number of channels. </li><li>
<a id="pgfId-1018473"></a>Style 2: Variable height cells, in single cell rows<br />
<a id="pgfId-1020319"></a><div class="webflare-div-image">
<img width="616" height="170" src="images/appB-3.gif" /></div>
<a id="pgfId-1018474"></a>These designs are usually two-layer designs. They are not efficient for three or more layers. They allow cell heights to vary by about 30%, but do not allow for power sharing. </li><li>
<a id="pgfId-1018499"></a>Style 3: Single-height and double-height cells, in double cell rows<br />
<a id="pgfId-1020361"></a><br /><div class="webflare-div-image">
<img width="648" height="77" src="images/appB-4.gif" /></div>
<a id="pgfId-1018500"></a>These designs have two or more layers. Single-height or double-height cells are arranged in double rows. This kind of design is meant for power sharing. </li><li>
<a id="pgfId-1018522"></a>Style 4: Multi-height cells in a sea-of-cells design<br />
<a id="pgfId-1020390"></a><br /><div class="webflare-div-image">
<img width="480" height="123" src="images/appB-5.gif" /></div>
<a id="pgfId-1018523"></a>These designs feature three or more layers. They do not allow two-layer routing and have no channels, so you cannot use a channel-based router. You can have single-, double-, or multi-height cells. This kind of design permits the most efficient power sharing of both power lines. </li></ul>
























<h4>
<a id="pgfId-1018524"></a>Optimize Porosity</h4>

<ul><li>
<a id="pgfId-1018525"></a>Medium and large cells should have the same porosity, primarily in <em>M2</em>.<br />
<a id="pgfId-1018977"></a>This means that the percentage of free <em>M2</em> tracks should be the same for all the medium and large cells in the library. If the porosity is not uniform, the router might have trouble finishing if cells with low porosity are placed near each other. <br />
<a id="pgfId-1018527"></a>For small cells (one to three tracks wide) you can let the placer optimize porosity by spacing them apart where necessary. However, careful design can improve routability significantly. <br />
<a id="pgfId-1018528"></a>For example, you can maximize <em>M1</em> left/right access to pins on small cells, as shown in the following figure. This optimizes <em>M2</em> porosity by maximizing the amount of routing done on <em>M1</em>. Small cells often have this kind of routing.<br />
<a id="pgfId-1020416"></a><div class="webflare-div-image">
<img width="503" height="260" src="images/appB-6.gif" /></div>
<a id="pgfId-1018557"></a>You can also design small cells to have multiple accessible pins or open grids so that you can get Z-shape <em>M2</em> routes where possible, as shown in the following example.<br />
<a id="pgfId-1020449"></a><br /><div class="webflare-div-image">
<img width="502" height="216" src="images/appB-7.gif" /></div></li></ul>











<h3>
<a id="pgfId-1018585"></a><a id="18612"></a>Designing Pins for Cells</h3>

<p>
<a id="pgfId-1018586"></a>This section contains guidelines for designing pins so that you maximize the routability of the cells and improve the run time and memory performance of the router. The more porous the design, the easier it is for the router to make connections.</p>

<h4>
<a id="pgfId-1018587"></a>Placing Pins on the Grid</h4>

<p>
<a id="pgfId-1018588"></a>Every pin should cover at least one grid intersection because the software connects most efficiently to pins at grid intersections. If you have off-grid pins, the software creates a pseudogrid through the center of each off-grid pin.</p>
<p>
<a id="pgfId-1022312"></a>Use the following guidelines to optimize pin placement:</p>
<ul><li>
<a id="pgfId-1018589"></a>Place pins on-grid wherever possible. </li><li>
<a id="pgfId-1018590"></a>Ensure that off-grid pins follow spacing rules by using the pseudogrid point at the center of the pin geometry. </li><li>
<a id="pgfId-1018591"></a>Center the pin via on the routing grid for its layer. </li><li>
<a id="pgfId-1018592"></a>Place special pins in such a way so that they do not obstruct routing on an adjacent track. You can place special pins off-grid for this. </li></ul>



<p>
<a id="pgfId-1019223"></a>Innovus has gridless routers but they handle gridded pins better than off-grid pins. A pin is considered to be on-grid if it meets the following criteria:</p>
<ul><li>
<a id="pgfId-1018594"></a>The pin rectangle is centered at the grid intersection. </li><li>
<a id="pgfId-1018596"></a>The pin rectangle encloses the grid intersection point on all four sides by half the minimum metal width of that pin shape layer. The grid intersection is from the x and y routing grid pitch for that layer. The router routes to the pin rectangle only at that grid intersection.</li><li>
<a id="pgfId-1018597"></a>The router only routes to the center of the off-grid pin port rectangles if this is legal.</li></ul>


<p>
<a id="pgfId-1018665"></a>The following figure shows a LEF standard cell with shapes similar to layout data.</p>

<p>
<a id="pgfId-1020481"></a></p>
<div class="webflare-div-image">
<img width="668" height="253" src="images/appB-8.gif" /></div>

<p>
<a id="pgfId-1018666"></a>Pin A has several off-grid shapes and one on-grid shape. Pin B has two off-grid polysilicon pin shapes. Pin O has one on-grid shape. The off-grid shapes slow down the router and lead to inefficient routing. Further, if the spacing rules for this example did not allow <em>M1</em>/<em>M2</em> vias to be placed on pin A, the router would not be able to connect to Pin A. This could result in an inefficiently routed design. </p>
<p>
<a id="pgfId-1018667"></a>Off-grid pins can affect your design in a number of ways. Some of these are listed below:</p>
<ul><li>
<a id="pgfId-1018668"></a>Large die size<br />
<a id="pgfId-1018669"></a>The router creates jogs to compensate for pins that are not aligned. This forces the channels to expand vertically and increases the die size.<br />
<a id="pgfId-1020553"></a><div class="webflare-div-image">
<img width="502" height="133" src="images/appB-9.gif" /></div></li><li>
<a id="pgfId-1022329"></a>Overconstrained design<br />
<a id="pgfId-1018700"></a>The more constraints there are, the harder it is for the router. The following figure shows how one off-grid pin increases the number of constraints. <br />
<a id="pgfId-1020587"></a><div class="webflare-div-image">
<img width="505" height="379" src="images/appB-10.gif" /></div></li><li>
<a id="pgfId-1018753"></a>Longer run-times<br />
<a id="pgfId-1018754"></a>This design slows down the router significantly because the router is more constrained. Each off-grid track can interfere with adjacent tracks. </li><li>
<a id="pgfId-1018755"></a>Optimistic global router results<br />
<a id="pgfId-1018756"></a>The global router might not recognize off-grid pins as blocking the routing track and, as a result gives you optimistic results.</li></ul>
















<h4>
<a id="pgfId-1018757"></a>Handling Special Pins</h4>

<p>
<a id="pgfId-1018758"></a>Special pins are pins routed by the special net router instead of the final router. Special pins have different shapes, depending on their function. On cells, you can have feedthrough or abutment special pins. </p>
<ul><li>
<a id="pgfId-1018759"></a>Non-interference with adjacent grid lines.</li><li>
<a id="pgfId-1018760"></a>Define special pins in the <code>SPECIAL NETS</code> section of the DEF file.</li><li>
<a id="pgfId-1018761"></a>Place all power and ground feedthrough and abutment pins at the same axis on opposite sides of the cell. </li><li>
<a id="pgfId-1018762"></a>Position the power and ground feedthrough or abutment pins so that they align with corresponding pins in other cells.</li><li>
<a id="pgfId-1018763"></a>Avoid creating power and ground pins in <em>M2</em>, because <em>M2</em> within the cell makes it harder to route over the cell. </li><li>
<a id="pgfId-1018764"></a>Define a shape property for power and ground pins with the value set to either feedthru or abutment. </li><li>
<a id="pgfId-1018765"></a>Set the same y offset for power and ground pins from the cell origin so that the FollowPins command works properly. You can specify the origin in the LEF file or use the default, which is the lower left corner.</li></ul>







<h4>
<a id="pgfId-1018766"></a>Maximizing Routing Resources</h4>

<p>
<a id="pgfId-1018767"></a>The more routing resources you have available, the easier it is for the router to connect. You must maximize the resources in your most constrained layer. In three-layer designs where <em>M2</em> is vertical and <em>M1</em> and <em>M3</em> are horizontal, <em>M2</em> is typically the most constrained layer.</p>
<p>
<a id="pgfId-1018768"></a>The following are some suggestions:</p>
<ul><li>
<a id="pgfId-1018769"></a>Maximize pin accessibility.<br />
<a id="pgfId-1018770"></a>Make cell pins as accessible as they can be by declaring the complete geometry of the pin as a pin. This will allow the router to connect to the best location on the pin as it sees fit, rather than forcing it to connect to a particular point. <br />
<a id="pgfId-1019226"></a>Also, avoid having geometries on the same layer close to and around the pin, in effect, blocking it. This makes the router unable to make a connection to the pin.<br />
<a id="pgfId-1019227"></a>Special care should be taken not to block access to pins through vias. For example, avoid <em>M2</em> geometries too close to a <em>M1</em> pin such that <em>M1</em> to <em>M2</em> via cannot be dropped in order to access the pin on <em>M2</em>.</li><li>
<a id="pgfId-1018771"></a>Stagger pins in the x and y directions.<br />
<a id="pgfId-1018772"></a>Staggering pins provides additional vertical routing resources, as shown in the following figure:<br />
<a id="pgfId-1020644"></a><div class="webflare-div-image">
<img width="638" height="251" src="images/appB-11.gif" /></div>
<a id="pgfId-1018798"></a>If two or more pins are aligned vertically, then the vertical track going through the pins can become blocked, forcing some of the horizontal routing resources to be used to connect to the pins.<br />
<a id="pgfId-1019229"></a>By staggering the pins in the vertical direction, especially at a pitch equal to integer multiples of the pitch of the vertical routing track, a higher degree of flexibility is given to the tool to connect to the pins in either direction.</li><li>
<a id="pgfId-1018799"></a>Minimize the number of geometries within the cell that are on the constrained layer.<br />
<a id="pgfId-1018800"></a>Any geometry on the constrained layer within the cell becomes a blockage to routing in that layer. For three-layer designs where <em>M2</em> is the vertical layer, you can maximize routing resources by creating internal cell geometries in <em>M1</em> and polysilicon, and leave <em>M2</em> and <em>M3</em> for routing. </li><li>
<a id="pgfId-1018801"></a>Allow extra routing resources in the constrained layer.<br />
<a id="pgfId-1018802"></a>In libraries for gate isolation base arrays that might be congested in <em>M2</em>, you can add extra <em>M2</em> routing resources as padding. For example, a two-input NAND gate might be three tracks wide with every track obstructed by a pin. You can model this as at least four tracks wide to provide an extra track for routing. </li><li>
<a id="pgfId-1018803"></a>Do not add pieces of metal to provide extra connection points. <br />
<a id="pgfId-1018804"></a>In some libraries, you add a piece of <em>M2</em> to a pin to provide the router with an extra connection point if <em>M1</em> is blocked. This is counter productive because unused <em>M2</em> areas become blockages that limit the flexibility of the router. You do not have to add extra metal, because the router can drop vias to the pins. </li></ul>


















<h3>
<a id="pgfId-1018805"></a><a id="31920"></a>Designing IO and Corner Cells</h3>

<p>
<a id="pgfId-1018807"></a>Abstract Generator uses the cover blockage model for IO cells, preventing the router from routing over IO cells.</p>
<p>
<a id="pgfId-1018916"></a>Abstract Generator uses the same model for generating abstracts for corner cells.</p>

<h3>
<a id="pgfId-1018808"></a><a id="34152"></a>Designing Blocks</h3>

<ul><li>
<a id="pgfId-1018812"></a>Maximize porosity for over-the-block routing.<br />
<a id="pgfId-1018813"></a>Leave unobstructed areas for over-the-block routing. Minimize the number of M2 and M3 geometries inside the block, so that these routing resources can be used to route over the block. </li><li>
<a id="pgfId-1018818"></a>Create power rings around large macro blocks.<br />
<a id="pgfId-1018819"></a>It might be easier to accommodate power routing around a macro block if you create a power ring around it and connect the internal buses to the ring. </li><li>
<a id="pgfId-1018820"></a>Pad around block boundaries.<br />
<a id="pgfId-1018821"></a>It is always good to have extra routing resources around a block, because this area can get congested. Leave extra room around the corners.</li><li>
<a id="pgfId-1018822"></a>Create as much open vertical <em>M2</em> space as possible on the left and right sides.</li><li>
<a id="pgfId-1018823"></a>Create as much open <em>M1</em> and <em>M3</em> space as possible on the top and bottom. </li><li>
<a id="pgfId-1018824"></a>Space pins apart by at least line-to-via spacing. <br />
<a id="pgfId-1018825"></a>If your design requires line-to-line spacing, add flare outs to line-to-via spacing even if this sticks out from the macro, as shown in the following figure.<br />
<a id="pgfId-1020674"></a><br /><div class="webflare-div-image">
<img width="505" height="115" src="images/appB-12.gif" /></div></li></ul>












<h2>
<a id="pgfId-1017900"></a><a id="42533"></a>Determining Routing Grid Pitch</h2>

<p>
<a id="pgfId-1022036"></a>This section discusses the various guidelines associated with determining routing grid pitches and recommended pitch setting strategies.</p>

<h3>
<a id="pgfId-1017901"></a><a id="13561"></a>General Guidelines for Setting Pitch</h3>

<p>
<a id="pgfId-1018984"></a>You must define horizontal and vertical grids for routing on every routing layer. To do this, you must do the following:</p>
<ul><li>
<a id="pgfId-1017902"></a>Select the preferred and non preferred routing direction for each layer.<br />
<a id="pgfId-1017903"></a>One common convention is HVH, where the preferred direction for routing <em>M1</em> and <em>M3</em> is horizontal and the preferred direction for <em>M2</em> is vertical. </li><li>
<a id="pgfId-1017904"></a>Define a minimum pitch for each layer in the preferred direction track for that layer.<br />
<a id="pgfId-1017905"></a>This pitch must be at least line-to-via distance. Anything less will result in low utilization rates and longer run times, because the router will not be able to place vias next to wires on adjacent tracks.<br />
<a id="pgfId-1017947"></a>The following figure shows line and via definitions for track pitch: <br />
<a id="pgfId-1020692"></a><br /><div class="webflare-div-image">
<img width="663" height="224" src="images/appB-13.gif" /></div></li></ul>








<p>
<a id="pgfId-1019400"></a>The most common track pitch is line-to-via, because it is the minimum pitch in which you can place a via next to a route. It is calculated as follows:</p>

<p>
<a id="pgfId-1022037"></a>half the metal width for the layer + the metal spacing + half the via.</p>
<p class="webflare-indent1">
<a id="pgfId-1020744"></a></p>
<div class="webflare-div-image">
<img src="images/pitch4.gif" /></div>

<ul><li>
<a id="pgfId-1019432"></a>Assign tracks in the non-preferred direction for every routing layer.<br />
<a id="pgfId-1017981"></a>Align these tracks with preferred direction tracks on adjacent layers, even if this is different from the track pitch of that layer in the preferred direction. Lining up the tracks lets the software create jogs at locations where vias can be placed or where pins can be connected to consistent xy locations. </li><li>
<a id="pgfId-1017982"></a>Allow for diagonally adjacent vias.<br />
<a id="pgfId-1017983"></a>Increase spacing to allow vias to be placed diagonally adjacent to each other. This might make the orthogonal spacing slightly more than line-to-via, but will reduce overall die size, because lack of via resources causes more congestion and longer routes to route around congested areas.<br />
<a id="pgfId-1020752"></a><div class="webflare-div-image">
<img width="665" height="311" src="images/appB-15.gif" /></div></li><li>
<a id="pgfId-1018009"></a>Maximize total routing track resources<br />
<a id="pgfId-1018010"></a>If you have an HVH layer scheme, keep <em>M1</em> and <em>M3</em> spacing to the minimum, and make any needed spacing increases in M2. Minimizing spacing on two layers (<em>M1</em> and <em>M3</em>) gives you more total routing resources than minimizing spacing on one layer by the same amount. <br />
<a id="pgfId-1018011"></a>To a certain extent, the placer also adjusts for different horizontal and vertical demands on the routing resources. You can also use a rectangular die instead of a square one to maximize routing resources.</li><li>
<a id="pgfId-1018012"></a>Use rectangular vias if that allows you to have smaller track pitch and more total routing resources overall.<br />
<a id="pgfId-1018013"></a>Ensure that the rectangular via and pitch still allows diagonal vias. <br />
<a id="pgfId-1018014"></a>Normally, you maximize your total routing track resources. However, if one direction is constrained, you might want to maximize your resources in that direction.<br />
<a id="pgfId-1018015"></a>For example, take an HVH library with the same line-to-via spacing for all three layers and no diagonal vias. To allow for diagonal vias, increase the spacing for the horizontal layers (<em>M1</em> and <em>M3</em>) to maximize the vertical routing resources on <em>M2</em>. This might not optimize the overall routing resources, but it reduces the congestion on the critically constrained <em>M2</em> layer. <br />
<a id="pgfId-1018016"></a>Alternatively, if the cells have no free <em>M1</em> tracks and the <em>M3</em> pitch is much larger than <em>M2</em>, you can increase the spacing on <em>M2</em>.<br />
<a id="pgfId-1018103"></a>Another technique for handling an overconstrained layer is to use a die aspect ratio that minimizes the routing demand for that layer. </li></ul>

















<h3>
<a id="pgfId-1018151"></a><a id="26877"></a>Setting Pitch for Layers with the Same Preferred Direction</h3>

<ul><li>
<a id="pgfId-1018153"></a>Align the tracks on the layers as much as possible</li><li>
<a id="pgfId-1018154"></a>If you cannot align the tracks, keep the pitch ratio between them simple, for example, 1:2 or 2:3.<br />
<a id="pgfId-1018155"></a>The following figure shows a ratio of 2:1 between <em>M1</em> and <em>M3</em>. The figure shows preferred direction tracks. Non-preferred direction tracks should be the same. <br />
<a id="pgfId-1020787"></a><br /><div class="webflare-div-image">
<img width="664" height="348" src="images/appB-16.gif" /></div></li></ul>






<p>
<a id="pgfId-1018193"></a>If <em>M1</em> and <em>M3</em> have complex ratios, such as 11:8, you can run into the following problems:</p>
<ul><li>
<a id="pgfId-1018194"></a>If you have inter-layer spacing rules between cut layers, vias will often be limited on two tracks instead of one.<br />
<a id="pgfId-1019236"></a>In the following figure, <em>V12</em> prevents the router from dropping <em>V23</em> vias above and below it on the <em>M3</em> tracks. If the <em>M1</em> and <em>M3</em> tracks were aligned, the via (<em>V12</em>) would block only one <em>V23</em> via. <br />
<a id="pgfId-1020828"></a><div class="webflare-div-image">
<img width="667" height="222" src="images/appB-17.gif" /></div></li><li>
<a id="pgfId-1018223"></a>This design can seriously affect memory allocation at run time. With a ratio of 11:8, you must create a non preferred <em>M2</em> track for every <em>M1</em> and <em>M3</em> track. Because these tracks align only at every eighth track, the result is more <em>M2</em> tracks than required with a 1:1 ratio, and this affects memory allocation. </li><li>
<a id="pgfId-1018224"></a>With a ratio such as11:8, your choice of cell heights is limited. This is because the cell height should be a multiple of the common denominator of the track spacing. </li><li>
<a id="pgfId-1018225"></a>If your technology allows center-stacked vias, a ratio like 11:8 will produce few.</li></ul>









<h3>
<a id="pgfId-1018147"></a><a id="20770"></a>Setting Pitch for Via Stacking</h3>

<ul><li>
<a id="pgfId-1014749"></a>If two metal layers have the same routing direction, make the relationship one of the following: 1:1, 1:2, 2:3, or 3:4.<br />
<a id="pgfId-1018236"></a>Vias cannot be stacked where <em>M1</em> and <em>M3</em> are not coincident. You can only stack vias at grid intersection points where all layers in the stack exist. If the relationship is not one of the above, it is difficult or impossible to place vias.<br />
<a id="pgfId-1014768"></a>If your process allows stacking of vias, you <em>must</em> use one of the above ratios. To stack vias everywhere, use 1:1. This is described in the following figure.<br />
<a id="pgfId-1014829"></a><div class="webflare-div-image">
<img width="606" height="304" src="images/appB-18.gif" /></div></li></ul>





<h3>
<a id="pgfId-1014855"></a><a id="37620"></a>Designing a Gridded Library for Innovus</h3>

<p>
<a id="pgfId-1014859"></a>Use the following general guidelines to simplify the internal data structures that Innovus uses during routing (assuming horizontal rows):</p>
<ul><li>
<a id="pgfId-1014860"></a>Make cell width a multiple of the vertical routing track pitch.<br />
<a id="pgfId-1016917"></a>Cell widths should be a multiple of the vertical routing pitch if there is only one vertical routing layer. </li><li>
<a id="pgfId-1014861"></a>Make cell heights a multiple of the horizontal routing layer pitch.<br />
<a id="pgfId-1016930"></a>If there is more than one horizontal routing layer, use a multiple of the greatest common denominator of the horizontal track spacing.</li><li>
<a id="pgfId-1014862"></a>Create pins that cover routing grid intersection points by half the minimum width.<br />
<a id="pgfId-1016939"></a>The CPU time increase for on-grid versus off-grid routing varies from 20% to 30%, depending on how many off-grid pins are in the library. The quality of route is not significantly degraded with off-grid routing.</li><li>
<a id="pgfId-1014863"></a>Make blockages cover grid intersection points.<br />
<a id="pgfId-1016950"></a>Blockages and pins should cover grid intersection points even after the blockages are fractured.<br />
<a id="pgfId-1014864"></a>The routers can use any grid intersection point not covered by a pin or blockage shape.</li></ul>









<h3>
<a id="pgfId-1018338"></a><a id="30363"></a>Converting an Existing Library</h3>

<p>
<a id="pgfId-1018339"></a>The following guidelines apply if you have to create a routing grid for a library that was not designed with a routing grid in mind, or for a library that has a routing grid designed for an older technology that needs to be reduced.</p>
<ul><li>
<a id="pgfId-1018340"></a>Calculate all minimum line-to-via and via-to-via pitches for all the layers. Calculate minimum xy distances for all diagonal vias. </li><li>
<a id="pgfId-1018341"></a>Determine the routing pitch and offset for each layer by examining some cell layouts from the existing library.<br />
<a id="pgfId-1018367"></a>You can get the <em>M2</em> preferred pitch (x coordinate) from the pin center-to-center distance of layout shapes. Getting the <em>M1</em> pitch (y coordinate) might be harder because many cells in older libraries were not designed with a y pitch in mind.</li><li>
<a id="pgfId-1018342"></a>If the designed x or y pitch is larger than the line-to-via minimum, reduce the pitch.<br />
<a id="pgfId-1018343"></a>It might be easier to reduce the y pitch than the x pitch. Reset cell boundaries to be a multiple of the new pitch. </li><li>
<a id="pgfId-1018345"></a>Define different <em>M1</em> and <em>M3</em> pitches to maximize routing resources.<br />
<a id="pgfId-1018374"></a>Remember to use simple ratios. The cell boundary must be a multiple of both layers.</li><li>
<a id="pgfId-1018992"></a>Use rectangular vias for routing if that allows the grid you want.</li></ul>








<h2>
<a id="pgfId-1018993"></a><a id="11107"></a>Modeling Pins</h2>
<h3>
<a id="pgfId-1018997"></a><a id="30659"></a>Deciding Pin Layers</h3>

<ul><li>
<a id="pgfId-1018994"></a>Avoid creating <em>M2</em> geometry on pins. This blocks routing for other nets if the <em>M2</em> geometry is not required.</li><li>
<a id="pgfId-1014886"></a>Create an <em>M2</em> pin only if the pin is accessible only by <em>M3</em>. That is, it is blocked completely with <em>M1</em> and <em>M2</em>.</li></ul>


<h3>
<a id="pgfId-1018300"></a><a id="22783"></a>Power to Blockage Violations</h3>

<p>
<a id="pgfId-1015396"></a>A common library problem occurs during the power and ground connections by the special router used in Innovus.</p>
<p>
<a id="pgfId-1017259"></a>If the blockage does not keep a legal clearance to the power and ground pins, as shown in Figures (a) and (b) below, false violations are highlighted that make it difficult to identify real violations.</p>

<p>
<a id="pgfId-1020923"></a></p>
<div class="webflare-div-image">
<img width="668" height="445" src="images/appB-19.gif" /></div>
<h3>
<a id="pgfId-1015268"></a><a id="31100"></a>Virtual Tracks</h3>

<p>
<a id="pgfId-1015461"></a>Each off-grid rectangle must be made on-grid in order for Innovus to recognize it. This is accomplished using virtual tracks.</p>
<p>
<a id="pgfId-1017272"></a>Certain libraries require the creation of thousands of virtual tracks because of the presence of off-grid geometries, which must be avoided during routing. The following figure shows virtual tracks in use.</p>

<p>
<a id="pgfId-1020971"></a></p>
<div class="webflare-div-image">
<img width="656" height="325" src="images/appB-20.gif" /></div>

<p>
<a id="pgfId-1015471"></a><a id="23363"></a>Off-grid routing on the virtual track might cause violations with fractured pin or blockage rectangles.</p>
<p>
<a id="pgfId-1015519"></a>When virtual tracks are present, the router will use either virtual tracks or regular tracks, depending on which are closest.</p>

<h3>
<a id="pgfId-1019250"></a><a id="10486"></a>Centering On-grid Pins</h3>

<p>
<a id="pgfId-1015527"></a>If off-grid pin access is not allowed, you should center pins on grid intersection points. If a pin shape touches a grid intersection point, it is considered on-grid.</p>
<p>
<a id="pgfId-1017286"></a>If your pins touch grid points, and you do not allow off-grid routing;</p>
<ul><li>
<a id="pgfId-1015528"></a>The router will recognize it as needing to be routed, and will avoid it when routing other nets.</li><li>
<a id="pgfId-1015524"></a>Depending on the pin shape and position, the router might be unable to route to the pin, or make an efficient connection.<br />
<a id="pgfId-1021022"></a><div class="webflare-div-image">
<img width="668" height="318" src="images/appB-21.gif" /></div></li></ul>





<p>
<a id="pgfId-1015587"></a>Routing problems can be caused by incorrectly defined on-grid pins. These problems are sometimes referred to as off-grid problems. The router and verify geometry (in Innovus) do not consider a notch a violation. These violations are found by the <code>samenet</code> check.</p>

<h3>
<a id="pgfId-1017298"></a><a id="36801"></a>Pins with Potential Routing Problems</h3>

<ul><li>
<a id="pgfId-1015599"></a>The pin geometry interferes with the adjacent grid without covering it.<br />
<a id="pgfId-1017320"></a>The problem with off-grid pins that do not cover grid points but are too close to allow routing, is that the global router will not see the track as obstructed. The global routing scores will not consider that the track is blocked by the off-grid pin and will give you over-optimistic results.</li><li>
<a id="pgfId-1015600"></a>Vias (in pins) are not centered on the routing grids for its layers.<br />
<a id="pgfId-1017336"></a>If off-grid pins exist, and the router has been set to allow off-grid pins, then grids are created by the router. Any pin that does not cover the routing grid with enough area to place a via is considered off-grid, and a track is created through the center of the pins. Off-grid tracks will slow the router by requiring more memory. Routing is slower because wires on each off-grid track interfere with adjacent on-grid routing.</li><li>
<a id="pgfId-1015584"></a>Special pins need not be on-grid, but should follow blockage rules.<br />
<a id="pgfId-1022115"></a>The following figure shows potential routing problems.<br />
<a id="pgfId-1021077"></a><div class="webflare-div-image">
<img width="666" height="285" src="images/appB-22.gif" /></div></li></ul>








<h2>
<a id="pgfId-1015677"></a><a id="31619"></a>Blockages</h2>

<p>
<a id="pgfId-1015690"></a>All geometries on routing and cut layers that are not associated with a pin are identified as blockages by Abstract Generator. A blockage is a keep-out area for any routing layer or cut layer.</p>
<p>
<a id="pgfId-1022883"></a>You can use Abstract Generator to create blockages. You can specify the <em><a href="chap5.html#14780">Geometry Specification</a></em> for the layers on which the blockage is to be created. Alternatively, from Abstract Generator you can open any one of the layout, pin, extract, or abstract cellview in VLS L and edit them to add blockages. For information about adding blockages by using VLS L, see &quot;<h-hot><a actuate="user" class="URL" href="../vlehelp/chap6.html#creatingBlockages" show="replace" xml:link="simple">Creating Blockages</a></h-hot>&quot; in the <em>Virtuoso Layout Suite L User Guide</em>.</p>

<h3>
<a id="pgfId-1015699"></a><a id="15554"></a>Blockages and Wiring Density</h3>

<p>
<a id="pgfId-1015700"></a>Use the following guidelines when blocking a routing layer:</p>
<ul><li>
<a id="pgfId-1015701"></a>If all of the routing is blocked for a layer, then create a single blockage over the area instead of many separate blockages.<br />
<a id="pgfId-1018315"></a>This simplifies the LEF file generated for the abstract.</li><li>
<a id="pgfId-1015702"></a>When drawing a blockage over the whole cell, leave half a minimum spacing between the blockage and the boundary.</li><li>
<a id="pgfId-1015693"></a>If there are free tracks available, leave them open in the abstract.<br />
<a id="pgfId-1018318"></a>This can increase wiring density.<br />
<a id="pgfId-1022118"></a>In the following figure, the blockages in the cell on the right allow <em>M1</em> routing to the pins.<br />
<a id="pgfId-1021138"></a><div class="webflare-div-image">
<img width="647" height="308" src="images/appB-23.gif" /></div></li></ul>








<h3>
<a id="pgfId-1015757"></a><a id="34447"></a>Blockages and Pin Accessibility</h3>

<p>
<a id="pgfId-1015759"></a>Pins are accessible from the side if they are less than one routing grid distance from the blockage edge, and the command <code>FROUTE.ALLOW.PINACCESS.ATBLOCKAGEEDGE</code> is set to <code>TRUE</code>.</p>
<p>
<a id="pgfId-1017433"></a>Note: The command <code>FROUTE.ALLOW.PINACCESS.ATBLOCKAGEEDGE</code> controls <em>FRoute</em> only, and not the line probe router.</p>
<p>
<a id="pgfId-1015803"></a>The line probe router (LPR) will <em>not</em> route to any pin that is surrounded by a blockage on that layer.</p>
<p>
<a id="pgfId-1017392"></a>In the following figure, pins are accessible by routing over the cell with <em>M2</em>, and dropping a via to <em>M1</em> (Via12 is a via from <em>M1</em> to <em>M2</em>).</p>

<p>
<a id="pgfId-1021179"></a></p>
<div class="webflare-div-image">
<img width="665" height="301" src="images/appB-24.gif" /></div>

<p>
<a id="pgfId-1015844"></a>If your library has blockages defined as shown above, you must route the clock tree with <em>GRoute</em> and <em>FRoute</em>, and not <em>CRoute</em> Balance. </p>

<h3>
<a id="pgfId-1015849"></a><a id="25706"></a>On-grid Versus Off-Grid Blockages</h3>

<p>
<a id="pgfId-1017456"></a>On-grid blockages completely cover the grid points that are interfered with.</p>
<p>
<a id="pgfId-1017457"></a>Slivers that result from fracturing can cause edge-to-edge spacing violations. This happens when a sliver is off-grid, as shown on the right of the figure below. The sliver covers no grid intersection points, but interferes with routing.</p>

<p>
<a id="pgfId-1021211"></a></p>
<div class="webflare-div-image">
<img width="669" height="328" src="images/appB-25.gif" /></div>

<p>
<a id="pgfId-1015910"></a>The blockage on the left covers three grid points and effects only one vertical routing track. This is an on-grid blockage. It allows a via to be placed without violations. The blockages on the right cover three grid points and interfere with two vertical routing tracks. The sliver also causes an edge violation with the via. The sliver is an off-grid blockage.</p>
<p>
<a id="pgfId-1015911"></a>Libraries with no off-grid blockages allow the best routing density. The final router runs faster if all blockages within cells are on-grid.</p>

<h2>
<a id="pgfId-1015920"></a><a id="12936"></a>Cell Porosity and High Density </h2>

<p>
<a id="pgfId-1015921"></a>Cells are more porous if there is free routing resource to route over the cell. A porous library allows high core utilizations.</p>

<h3>
<a id="pgfId-1015935"></a><a id="15833"></a>Routing Pitch</h3>

<p>
<a id="pgfId-1015936"></a>The pitch you choose affects the routing density. The pitch is usually a value between via-to-via spacing and line-to-via spacing.</p>

<h4>
<a id="pgfId-1017493"></a>Via-to-Via Spacing</h4>

<p>
<a id="pgfId-1017534"></a>This is the spacing required for adjacent vias and is illustrated in the figure below.</p>

<p>
<a id="pgfId-1021264"></a></p>
<div class="webflare-div-image">
<img width="643" height="293" src="images/appB-26.gif" /></div>
<h4>
<a id="pgfId-1015946"></a>Line-to-Via Spacing</h4>

<p>
<a id="pgfId-1015957"></a>The line-to-via dimension is the distance that the routing pitch requires in order to legally place a via on the track next to a wire (line). This is illustrated in the figure below.</p>

<p>
<a id="pgfId-1021309"></a></p>
<div class="webflare-div-image">
<img width="669" height="293" src="images/appB-27.gif" /></div>
<h4>
<a id="pgfId-1016142"></a>Adjusting the Routing Pitch</h4>

<p>
<a id="pgfId-1016143"></a>Most processes allow diagonal vias when the routing pitch is set to line-to-via. In some cases it is necessary to adjust the vertical routing pitch to allow diagonal vias. This adjustment is referred to as <em>expanded line-to-via spacing</em>.</p>
<p>
<a id="pgfId-1016053"></a>Expanded line-to-via pin spacing gives better routing density than via-to-via spacing. Use via-to-via spacing only if your process requires large vias. This is illustrated in the figure below.</p>

<p>
<a id="pgfId-1021349"></a></p>
<div class="webflare-div-image">
<img width="669" height="362" src="images/appB-28.gif" /></div>

<p>
<a id="pgfId-1016197"></a>If diagonal vias are not allowed when using the line-to-via routing pitch, expand the routing pitch just enough to make diagonal vias allowed. The amount that the pitch must be expanded depends on the cap size of the vias. </p>
<p>
<a id="pgfId-1016199"></a>When diagonal vias are placed, the spacing (d) must be greater than the <em>M1</em>-to-<em>M1</em>, <em>M2</em>-to-<em>M2</em>, and <em>M3</em>-to-<em>M3</em> spacing rule, depending on the layers in the via.</p>

<h3>
<a id="pgfId-1016208"></a><a id="17039"></a>Pin Spacing</h3>

<p>
<a id="pgfId-1016219"></a>Pin spacing is usually more than line-to-via spacing and less than via-to-via spacing. Start with line-to-via spacing and, if necessary, increase the pin spacing to allow access to both pins by dropping vias (adjacent vias).</p>
<p>
<a id="pgfId-1016222"></a>Normally, the maximum spacing necessary is via-to-via spacing.</p>

<h4>
<a id="pgfId-1016225"></a>Single Grid Pin Spacing</h4>

<p>
<a id="pgfId-1016234"></a>A single grid pin is a pin with only one port that covers only one grid point.</p>
<p>
<a id="pgfId-1022211"></a>Use pin spacing so that it is legal to drop vias on all pins, as shown in the following figure.</p>

<p>
<a id="pgfId-1021400"></a></p>
<div class="webflare-div-image">
<img width="656" height="363" src="images/appB-29.gif" /></div>

<p>
<a id="pgfId-1016276"></a>If you place single grid pins on orthogonally adjacent grid points, you <em>must</em> use via-to-via routing pitch; otherwise, the router might not be able to access the pins.</p>
<p>
<a id="pgfId-1016277"></a>If you place single grid pins on diagonally adjacent grid points, your routing pitch <em>must</em> be able to accommodate diagonal vias.</p>

<h3>
<a id="pgfId-1016282"></a><a id="24073"></a>Pin Staggering</h3>

<p>
<a id="pgfId-1016283"></a>If you have one vertical routing layer, and line-to-via pin spacing, you should stagger the pin placement, as shown in the following figure.</p>

<p>
<a id="pgfId-1021436"></a></p>
<div class="webflare-div-image">
<img width="662" height="344" src="images/appB-30.gif" /></div>

<p>
<a id="pgfId-1017630"></a>If pins are at the same y coordinate, there is no legal way to route through the area. However, placing pins at alternate y coordinates allows the final router to route vertically through the cell. (Allow one vertical feedthrough for every three pins.)</p>
<p>
<a id="pgfId-1016345"></a>If pins are not staggered as shown, the router can only route vertically between cells. This makes designs with high row utilizations unroutable.</p>

<h3>
<a id="pgfId-1016343"></a><a id="10412"></a>Defining Tracks for Wide Wire Designs</h3>

<p>
<a id="pgfId-1016361"></a>If you route wide and narrow wires, you can get better on-grid routing density by doubling the number of tracks, as shown in the following figure.</p>

<p>
<a id="pgfId-1021493"></a></p>
<div class="webflare-div-image">
<img width="668" height="428" src="images/appB-31.gif" /></div>

<p>
<a id="pgfId-1016487"></a>For designs with a combination of wide wires and narrow wires, </p>
<ul><li>
<a id="pgfId-1016488"></a>The design on the left shows the closest that wide wires can be placed using the normal, expanded line-to-via routing pitches.</li><li>
<a id="pgfId-1016489"></a>The design on the right shows better routing density, if you double the number of tracks.</li></ul>


<h3>
<a id="pgfId-1016683"></a><a id="27456"></a>Variable-Height Versus Multiple-Height Cells</h3>

<p>
<a id="pgfId-1016692"></a>Cell heights in your library affect floorplanning and placement. This is shown in the following figure.</p>

<p>
<a id="pgfId-1021616"></a></p>
<div class="webflare-div-image">
<img width="656" height="318" src="images/appB-32.gif" /></div>

<p>
<a id="pgfId-1016716"></a>For more information about variable-height cells see <a href="appB.html#42382">Variable Height Cells</a> and for more information about multiple-height cells see <a href="appB.html#12703">Multiple Height Cells</a>.</p>

<h4>
<a id="pgfId-1016721"></a><a id="42382"></a>Variable Height Cells</h4>

<p>
<a id="pgfId-1016722"></a>If your design has variable height cells, define only one site type. The following guidelines should be used to assist you.</p>
<ul><li>
<a id="pgfId-1016723"></a>The tallest cell&#8217;s height should be used to define row (site) height.</li><li>
<a id="pgfId-1016724"></a>Cells are aligned by the lower left corner.</li><li>
<a id="pgfId-1016725"></a>Power must abut between all cells in the row.</li><li>
<a id="pgfId-1016726"></a>Placement space is wasted where short cells are placed.</li><li>
<a id="pgfId-1016719"></a>Floorplanning the core area is simplified because there is only one type of core row.</li></ul>




<p>
<a id="pgfId-1017669"></a>In the following figure, the cell heights are not multiples of each other.</p>

<p>
<a id="pgfId-1021633"></a></p>
<div class="webflare-div-image">
<img width="669" height="180" src="images/appB-33.gif" /></div>

<p>
<a id="pgfId-1017692"></a>As a result of this design,</p>
<ul><li>
<a id="pgfId-1022240"></a>Floorplanning is simplified because additional row types are not added. </li><li>
<a id="pgfId-1016765"></a>Placement space is wasted because the rows do not overlap.</li><li>
<a id="pgfId-1016766"></a>The lower left corner of the non rotated cell&#8217;s place-and-route boundary is used as the alignment point.</li></ul>


<p>
<a id="pgfId-1016767"></a>If cell heights are multiples of each other (single and double height cells, for example), floorplanning is handled differently.</p>

<h4>
<a id="pgfId-1016781"></a>Using the Overlap Layer</h4>

<p>
<a id="pgfId-1022244"></a>You can use the overlap layer to increase placement density and eliminate most of the empty space. The following guidelines should be used to assist you.</p>
<ul><li>
<a id="pgfId-1016783"></a>The site for each cell is the same height (use the tallest cell to define the site).</li><li>
<a id="pgfId-1016784"></a>The overlap layer defines the cell height.</li><li>
<a id="pgfId-1016785"></a>Empty space above short cells is used by taller cells in the next row.</li><li>
<a id="pgfId-1016779"></a>The placer will resolve overlaps as shown.<br />
<a id="pgfId-1021659"></a><div class="webflare-div-image">
<img width="669" height="167" src="images/appB-34.gif" /></div></li></ul>







<p>
<a id="pgfId-1016821"></a>If power overlaps:</p>
<ul><li>
<a id="pgfId-1016822"></a>The cells must have power pins defined so they connect when cells abut.</li><li>
<a id="pgfId-1016823"></a>If flipping of rows is allowed, you must define power to accommodate this. </li></ul>

<p>
<a id="pgfId-1016824"></a>Cell rows can overlap where power does not overlap.</p>

<h4>
<a id="pgfId-1016835"></a><a id="12703"></a>Multiple Height Cells</h4>

<p>
<a id="pgfId-1016836"></a>The following guidelines should be used to assist you when using multiple-height cells.</p>
<ul><li>
<a id="pgfId-1022255"></a>These cells have a height that is a multiple of the normal cell height.</li><li>
<a id="pgfId-1016837"></a>Define a site for each cell height.</li><li>
<a id="pgfId-1016838"></a>Rows can overlap as long as the power rails align.</li><li>
<a id="pgfId-1016839"></a>A true channel-less library, where no routing channels are needed between core cell rows, provides best placement.</li><li>
<a id="pgfId-1016840"></a>Advantages<ul><li>
<a id="pgfId-1016841"></a>Multiple-height cells utilize placement space better than variable-height cells.</li></ul></li><li>
<a id="pgfId-1016842"></a>Disadvantages<ul><li>
<a id="pgfId-1016843"></a>Overlapping single and multiple-height rows complicates floorplanning.</li><li>
<a id="pgfId-1016844"></a>Utilization calculations are more complex.</li></ul></li></ul>








<p>
<a id="pgfId-1016833"></a>If a cell is over twice as high, then it limits routing space between the short rows, based on the large cells abutment.</p>
<p>
<a id="pgfId-1016855"></a>Currently, Innovus does not report utilization values that take into account overlapping rows.</p>

<h3>
<a id="pgfId-1016860"></a><a id="39037"></a>Non-rectangular Blocks</h3>

<p>
<a id="pgfId-1016861"></a>If you have non-rectangular blocks, some of the area might be available for standard cell placement.</p>
<ul><li>
<a id="pgfId-1016862"></a>In the LEF file use the overlap layer to describe the area that is not available for placement of other cells. </li><li>
<a id="pgfId-1016863"></a>Otherwise, by default, the bounding box of the boundary or the <code>SIZE</code> statement in the LEF file is used for the shape of the cell.</li><li>
<a id="pgfId-1016864"></a>Use Abstract Generator to translate the boundary layer into the LEF overlap layer. </li></ul>


<p>
<a id="pgfId-1016870"></a>Define an blockage on the <code>OVERLAP</code> layer in the block (megacell) over the areas that are not available for cell placement.</p>

<h3>
<a id="pgfId-1017711"></a>Summary</h3>

<p>
<a id="pgfId-1016875"></a>For an optimal design, follow these guidelines:</p>
<ul><li>
<a id="pgfId-1022277"></a>Determine the routing grid for each layer.</li><li>
<a id="pgfId-1016876"></a>Try to keep pin and blockages on routing grids.</li><li>
<a id="pgfId-1016877"></a>Ensure that pins will be accessible after all connections are made.</li><li>
<a id="pgfId-1016878"></a>Keep cell size a multiple of the greatest common denominator of grids in each direction.</li><li>
<a id="pgfId-1016879"></a>Create a site for each cell height and multiple of grid minimum.</li><li>
<a id="pgfId-1016880"></a>Create place-and-route boundaries around cells.</li></ul>






<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="abstract_skill.html" id="prev" title="Abstract Generator SKILL Functions">Abstract Generator SKILL Funct ...</a></em></b><b><em><a href="appC.html" id="nex" title="Using Regular Expressions in Abstract Generator">Using Regular Expressions in A ...</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2020, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>