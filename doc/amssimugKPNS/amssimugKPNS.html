
<html><head><title>About This Manual</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Approver" content="Technical Publications" />
<meta name="Author" content="jaini" />
<meta name="CreateDate" content="2019-09-17" />
<meta name="CreateTime" content="1568787485" />
<meta name="DataType" content="KP&amp;S" />
<meta name="Description" content="Lists problems and solutions for the Virtuoso AMS Designer simulator." />
<meta name="DocTitle" content="Spectre AMS Designer and Xcelium Simulator Known Problems and Solutions" />
<meta name="DocType" content="Known Problems and Solutions" />
<meta name="FileTitle" content="About This Manual" />
<meta name="FileType" content="Chapter" />
<meta name="FMWikiRelease" content="FM-Wiki-3.2" />
<meta name="Keyword" content="amssimugKPNS" />
<meta name="Language" content="English" />
<meta name="ModifiedDate" content="2019-09-17" />
<meta name="ModifiedTime" content="1568787485" />
<meta name="NextFile" content="" />
<meta name="Group" content="Known Problems and Solutions" />
<meta name="Platform" content="Functional Verification" />
<meta name="PrevFile" content="amssimugKPNSTOC.html" />
<meta name="Product" content="Xcelium" />
<meta name="ProductFamily" content="Xcelium" />
<meta name="ProductVersion" content="19.09" />
<meta name="RightsManagement" content="Copyright 2012-2019 Cadence Design Systems Inc." />
<meta name="Title" content="Spectre AMS Designer and Xcelium Simulator Known Problems and Solutions -- About This Manual" />
<meta name="Keywords" content="" />
<meta name="topic_type" content="" />
<meta name="reference_type" content="" />
<meta name="product_feature" content="" />
<meta name="product_subfeature" content="" />
<meta name="Version" content="19.09" />
<meta name="SpaceKey" content="amssimugKPNS1909" />
<meta name="webflare-version" content="1.4" />
<link rel="stylesheet" href="styles/webflare.css" type="text/css" /></head><body style="background-color: #FFFFFF;"><a name="pagetop"></a>
<!-- Begin Buttons -->
<header><div class="docHeadr">Product Documentation<img src="icons/Cadence-Logo.jpg" /></div><nav class="blueHead"><ul><li><a class="content" href="amssimugKPNSTOC.html">Contents</a></li><li><a class="prev" href="amssimugKPNSTOC.html" title="Contents">Contents</a></li><li style="float: right;"><a class="viewPrint" href="amssimugKPNS.pdf">View/Print PDF</a></li></ul></nav></header>
<!-- End Buttons -->
<h5><center>Spectre AMS Designer and Xcelium Simulator Known Problems and Solutions<br />Product Version 19.09, September 2019</center></h5><div id="main-content" style="min-height: 50vh; margin-left: 5%; margin-right: 2%;">

<h1>
<a id="pgfId-1090499"></a><hr />
About This Manual<hr />
</h1>

<p>
<a id="pgfId-1005640"></a>This Known Problems and Solutions document describes important change requests (CCRs) for the Spectre AMS Designer and Xcelium simulator (with the UltraSim solver included) and tells you how to solve or work around these problems.</p>
<p>
<a id="pgfId-1082027"></a><strong>Important:</strong> Only known problems and solutions available at release time are available in this document. An up-to-date list of known problems for the Spectre AMS Designer simulator is published in <h-hot><a actuate="user" class="URL" href="http://support.cadence.com" show="replace" xml:link="simple">Cadence Online Support</a></h-hot>.</p>
<div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1099936"></a>The Planned Release information that is included for the CCRs listed in this document reflects the Cadence estimate, at the time of publishing, of when the resolution will be incorporated in the product. Communication of this Planned Release information is for informational purposes only and should not be considered a warranty of any kind. Cadence reserves the right to alter the planned release at any time without notice.</div>
<p>
<a id="pgfId-1099938"></a>Updated Known Problems and Solutions documents are published at regular intervals. Customers can view on Cadence Online Support the most up-to-date information about the status of their CCRs.</p>

<h2>
<a id="pgfId-1111310"></a>Product: AMSD</h2>
<h3>
<a id="pgfId-1111311"></a>Product Level 2: AMSD</h3>
<h4>
<a id="pgfId-1120416"></a>CCR 02070704/2072065: SV-AMS connectmodules are not supported via VAMS connrules</h4>

<p>
<a id="pgfId-1120447"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1120418"></a>Description: Custom connect rules are not supported with SystemVerilog-AMS Connect modules (UDN to UDN IEs). The tool generates the following error when you specify custom connect rules with SV-AMS connect modules</p>

<pre class="webflare-courier-new">
<a id="pgfId-1120420"></a>xmelab: *E,CUCCSA (./crules.vams,14|6): SVAMS connect module &#39;EEnet_2_E&#39; is in user defined VAMS connect rule, which is not allowed.</pre>

<p>
<a id="pgfId-1120423"></a>Workaround: Currently, there is no workaround. You must use the <code>-custom_udn_cr</code> option and the tool automatically creates the connect rules for the SV-AMS connect modules.</p>
<p>
<a id="pgfId-1120340"></a>Planned Release: Not currently planned.</p>

<h4>
<a id="pgfId-1118611"></a>CCR 02001471: Issue with &#39;packngo_agent&#39;</h4>

<p>
<a id="pgfId-1118612"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1118680"></a>Description: With <code>xrun -packngorec..</code> option, during <code>xmelab</code>, following errors are generated:</p>
<p>
<a id="pgfId-1118681"></a>However, the issue does not affect the feature functionality.</p>
<p>
<a id="pgfId-1118614"></a>Solution: None</p>
<p>
<a id="pgfId-1118618"></a>Planned Release: Not currently planned.</p>

<h4>
<a id="pgfId-1117545"></a>CCR 1702460: AMS simulation with skipdc=sigrampup gives incorrect outputs</h4>

<p>
<a id="pgfId-1117546"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1117547"></a>Description: The SST2 format waveform does not support minus values in time axis.</p>
<p>
<a id="pgfId-1117548"></a>Solution: To workaround this problem, do one of the following:</p>
<ul><li>
<a id="pgfId-1117683"></a>Switch to the SST2/PSFXL unified format and add the following <code>xrun</code> argument in command-line mode:<br />
<a id="pgfId-1117729"></a><code>-amsformat psfxl_all</code></li><li>
<a id="pgfId-1117684"></a>In ADE, select <em>Output</em>&gt;<em>Save All</em>&gt;<em>Output Format</em>&gt;<em>psfxl</em>.</li></ul>


<p>
<a id="pgfId-1117541"></a>Planned Release: Not currently planned.</p>

<h4>
<a id="pgfId-1115462"></a>CCR 1331095: Getting MMSIM tokens on multiple servers with a granularity of 1 token when queuing is enabled</h4>

<p>
<a id="pgfId-1115593"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1115601"></a>Description: If a simulation requires two or more MMSIM tokens that are available on different servers, AMS checks out the MMSIM tokens only from one server, locks the token(s), and waits for other tokens to be available on the same server for the simulation to run when the <code>-licqueue</code> option is turned on. For example, if a digital solver requires two MMSIM tokens and one MMSIM token is available on server 1 and the other is available on server 2 and the <code>-licqueue</code> option is turned on, AMS checks out the MMSIM token from server1 and even if the token is available in server2, it locks the token from server1 and waits for the token to be available on server1.</p>
<p>
<a id="pgfId-1115650"></a>Solution: To workaround this problem, remove the <code>-licqueue</code> option to enable the feature in INCISIV 14.2.</p>
<p>
<a id="pgfId-1115664"></a>Planned Release: This limitation will be removed in a future release.</p>

<h4>
<a id="pgfId-1115595"></a>CCR 617209: Error loading mdl/libSpectreEH_sh.so in ibmrs/aix platform</h4>

<p>
<a id="pgfId-1111313"></a><strong>OS: </strong>AIX<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111314"></a><strong>Description: </strong>Spectre solver reports error as: </p>
<p>
<a id="pgfId-1111315"></a>============================&#160;&#160; </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111316"></a>Error in opening shared object:      0509-022 Cannot load module<br />       /grid/avs/install/ius/8.2/08.20.001-p/tools.ibmrs/spectre/lib/mdl/libSpectreEH_sh.so.</pre>

<p>
<a id="pgfId-1111317"></a>============================ </p>
<p>
<a id="pgfId-1111318"></a>This problem is noticed if both <code>LIBPATH</code> and <code>LD_LIBRARY_PATH</code> variables are set.</p>
<p>
<a id="pgfId-1111319"></a><strong>Solution: </strong>Do the following:</p>

<pre class="webflare-courier-new">
<a id="pgfId-1111320"></a>%unsetenv LD_LIBRARY_PATH <br />%setenv LIBPATH &lt;ius_install_dir&gt;/tools/lib </pre>

<p>
<a id="pgfId-1111321"></a>That solves the problem and the mdl library is loaded properly.</p>
<p>
<a id="pgfId-1111322"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1114805"></a>CCR 560646: ncsim internal error and wrong ELF class message when running 64-bit AMS-Spectre on Solaris 10 x86_64</h4>

<p>
<a id="pgfId-1114806"></a><strong>OS: </strong>SOL86<strong> Version: </strong>10</p>
<p>
<a id="pgfId-1114807"></a><strong>Description: </strong>On the Solaris 10 x86_64 platform, running the AMS Designer simulator with the Spectre solver, if you run the 64-bit version of <code>ncsim</code> by specifying the <span class="webflare-courier-new" style="white-space:pre"><em>install_dir</em></span><code>/tools/bin/64bit</code> directory first in your path, <code>ncsim</code>  terminates with an internal error: <code>ncsim: *F,INTERR: INTERNAL ERROR</code>. </p>
<p>
<a id="pgfId-1114808"></a><strong>Solution: </strong>To work around this problem, do the following: </p>
<ol><li>
<a id="pgfId-1114809"></a> Remove <span class="webflare-courier-new" style="white-space:pre"><em>install_dir</em></span><code>/tools/bin/64bit</code> from your path. </li><li>
<a id="pgfId-1114810"></a> Use the 32-bit version to run in 64-bit mode by using either the <code>-64bit</code> command-line option when you run the executable or by setting the <code>INCA_64BIT</code> environment variable.</li></ol>

<p>
<a id="pgfId-1114811"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111330"></a>CCR 440028: ncelab cannot resolve hierarchical Verilog-A modules</h4>

<p>
<a id="pgfId-1111331"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111332"></a><strong>Description: </strong>When you define a Verilog-A top module and Verilog-A submodules in the same file, only the top-level cell has a cellview (veriloga + symbol). </p>
<p>
<a id="pgfId-1111333"></a>For example, if the file <code>veriloga.va</code> contains: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111334"></a>`include &quot;constants.vams&quot;<br />`include &quot;disciplines.vams&quot;</pre>
<pre class="webflare-courier-new">
<a id="pgfId-1111335"></a>module top (qin, qout);<br /> input qin;<br /> output qout;<br /> electrical qin, qout;<br /> electrical aa1;</pre>
<pre class="webflare-courier-new">
<a id="pgfId-1111336"></a> sub vd1 (qin, aa1);<br /> sub vd2 (aa1, qout);<br />endmodule</pre>
<pre class="webflare-courier-new">
<a id="pgfId-1111337"></a>module sub (in, out);<br /> input in;<br /> output out;<br /> electrical in, out;</pre>
<pre class="webflare-courier-new">
<a id="pgfId-1111338"></a> analog<br />    V(out) &lt;+ 2.0 * V(in);<br />endmodule</pre>

<p>
<a id="pgfId-1111339"></a><code>ncelab</code> fails with an error message such as the following: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111340"></a>ncelab: *E,CUCFUN: instance &#39;vd1&#39; of the unit &#39;sub&#39; is unresolved in &#39;hierVerilogA.hierarchical_mpa:veriloga&#39;.</pre>

<p>
<a id="pgfId-1111341"></a><strong>Solution: </strong>To work around the problem, do the following: </p>
<ol><li>
<a id="pgfId-1111342"></a>Create a file containing the following statement, where the <code>ahdl_include</code> file contains the <code>veriloga.va</code> contents printed above. <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1111343">
<a id="pgfId-1111343"></a>ahdl_include .../veriloga_file.va</pre></li><li>
<a id="pgfId-1111344"></a>In the hierarchy editor (HED), right-click the cell and choose <em>Set Cell View -&gt; Source File</em>. </li><li>
<a id="pgfId-1111345"></a>Use the <em>Browse</em> button on the form that appears to select the Verilog-A source file. </li><li>
<a id="pgfId-1111346"></a>Click <em>OK</em>.</li></ol>




<p>
<a id="pgfId-1111347"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111353"></a>CCR 305235: AMS Designer has a run-time dependency on ELF libs when run on SUSE Linux 9.0</h4>

<p>
<a id="pgfId-1111354"></a><strong>OS: </strong>LINUX<strong> Version: </strong>SLES9_64</p>
<p>
<a id="pgfId-1111355"></a><strong>Description: </strong>When it runs on a SUSE Linux 9.0 system, AMS Designer has a run-time dependency on a particular version of the ELF libs (<code>libelf.so.1</code>). The version of <code>libelf.so</code> in a typical SUSE Linux 9.0 installation differs from a typical Red Hat Linux installation. Due to this incompatibility in the versions of the ELF libs, some test cases fail to run on the SUSE Linux machine.</p>
<p>
<a id="pgfId-1111356"></a><strong>Solution: </strong>When running on a SUSE Linux machine, add <span class="webflare-courier-new" style="white-space:pre"><em>your_install_dir</em></span><code>/tools/lib/SuSE</code> to your <code>LD_LIBRARY_PATH</code>. For example: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111357"></a>setenv LD_LIBRARY_PATH $AMSHOME/tools/lib/SuSE:...</pre>

<p>
<a id="pgfId-1111358"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111359"></a>CCR 303934: AMS Designer does not support hierarchical node names</h4>

<p>
<a id="pgfId-1111360"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111361"></a><strong>Description: </strong>AMS Designer running with the Spectre solver cannot handle hierarchical node names. For example: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111362"></a>module top();</pre>
<pre class="webflare-courier-new">
<a id="pgfId-1111363"></a> TB_amp_test uut ();<br /> Vsin_source Vin (top.uut.vin); \&lt;-- Cannot use hierarchical node name<br /> vsource #(.dc(5.0)) Vdd (cds_globals.\vdd! ,cds_globals.gnd );<br /> vsource #(.dc(-5.0)) Vss (cds_globals.\vss! ,cds_globals.gnd );</pre>
<pre class="webflare-courier-new">
<a id="pgfId-1111364"></a>endmodule</pre>
<pre class="webflare-courier-new">
<a id="pgfId-1111365"></a>subckt Vsin_source (a)<br />V1 (a 0) vsource dc=1 mag=1 type=sine sinedc=0 ampl=50m freq=1M<br />ends Vsin_source</pre>

<p>
<a id="pgfId-1111366"></a>For this kind of usage, ncelab issues an error message such as the following: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111367"></a>Vsin_source Vin (top.uut.vin);<br />                            |<br />ncelab: *E,CUILDP (./top.v,6|28): defparam is not allowed on parameters of<br />analog primitives.</pre>

<p>
<a id="pgfId-1111368"></a><strong>Solution: </strong>Do the following: </p>
<ol><li>
<a id="pgfId-1111369"></a>In your top.v module, add code like this: <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1111370">
<a id="pgfId-1111370"></a>`ifdef ams_mode
Vsin_source Vin (cds_globals.net1);
`else
Vsin_source Vin (top.uut.vin);
`endif</pre></li><li>
<a id="pgfId-1111371"></a>Add a declaration of <code>net1</code> in the <code>cds_globals</code> module. <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1111372">
<a id="pgfId-1111372"></a>electrical net1;</pre></li><li>
<a id="pgfId-1111373"></a>Add a global statement in the SPICE netlist. <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1111374">
<a id="pgfId-1111374"></a>.global net1</pre></li><li>
<a id="pgfId-1111375"></a>Add a V0 vsource in the analog control file. <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1111376">
<a id="pgfId-1111376"></a>simulator lang=spice
V0 net1 top.uut.vin vsource dc=0</pre></li><li>
<a id="pgfId-1111377"></a>Add the <code>-define ams_mode</code> option in the <code>ncvlog</code> command.</li></ol>








<p>
<a id="pgfId-1111378"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111379"></a>CCR 144885: Incomplete support for the digital variable in I/O statements</h4>

<p>
<a id="pgfId-1111380"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111381"></a><strong>Description: </strong>When you use an I/O statement such as <code>$display</code>, <code>$write</code>, <code>$fdisplay</code>, or <code>$fwrite</code>, to print a digital variable that: </p>
<ul><li>
<a id="pgfId-1111382"></a>contains bits of <code>X</code> or <code>Z</code>, and </li><li>
<a id="pgfId-1111383"></a>is used in the analog block, </li></ul>

<p>
<a id="pgfId-1111384"></a>the simulation fails. For example: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111385"></a>module top;<br />     wire control;<br />     assign control = 1&#39;&#39;bz;</pre>
<pre class="webflare-courier-new">
<a id="pgfId-1111386"></a>     analog $display( &quot;control = %d\n&quot;, control );<br />endmodule</pre>

<p>
<a id="pgfId-1111387"></a>In this example, the simulation fails because the digital variable <code>control</code> contains bit <code>Z</code>.</p>
<p>
<a id="pgfId-1111388"></a><strong>Solution: </strong>Print the digital variable in the digital context.</p>
<p>
<a id="pgfId-1111389"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111390"></a>CCR 98772: SST2 interface error in restarting a snapshot when debugging analog HDL code</h4>

<p>
<a id="pgfId-1111391"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111392"></a><strong>Description: </strong>When the following two conditions are true, restarting a snapshot results in an SST2 interface error message: </p>
<ul><li>
<a id="pgfId-1111393"></a>You are using an SST2 database opened either from within the analog simulation control file or by a TCL database or probe command, and </li><li>
<a id="pgfId-1111394"></a>The simulation is being controlled from within the analog debugger.</li></ul>

<p>
<a id="pgfId-1111395"></a><strong>Solution: </strong>If the simulation is running within an analog interactive debug session or stopped at an analog breakpoint, use the <code>run -clean</code> command before restarting. </p>
<p>
<a id="pgfId-1111396"></a>Here is an example: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111397"></a>ncsim&gt;run [-phase|-next|-step]<br />ncsim&gt;run -clean<br />ncsim&gt;restart state1</pre>

<p>
<a id="pgfId-1111398"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111399"></a>CCR 67622: AMS Designer does not support checklimit analysis</h4>

<p>
<a id="pgfId-1111400"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111401"></a><strong>Description: </strong>The checklimit analysis, as supported by Spectre beginning with the 5.0.33 release is not supported by AMS Designer. </p>
<p>
<a id="pgfId-1111402"></a><strong>Solution: </strong>None.</p>
<p>
<a id="pgfId-1111403"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111404"></a>CCR 43793: The run -timepoint command leaves a waveform gap between last 2 solutions</h4>

<p>
<a id="pgfId-1111405"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111406"></a><strong>Description: </strong>The Tcl command <code>run -timepoint</code> runs to the next absolute time point, which might require processing by either the analog or digital solver. When that time point is processed by the analog solver, the <code>run -timepoint</code> command does not update the database used to display waveforms. As a result, the time displayed by the Tcl <code>time</code> command does not always agree with the final time shown for the waveform.</p>
<p>
<a id="pgfId-1111407"></a><strong>Solution: </strong>Use the <code>run -clean</code> command to finish the processing for the time point and to write the results to the waveform database.</p>
<p>
<a id="pgfId-1111408"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111409"></a>CCR 31724: SST2 file created from analog control file does not keep index for analog bus</h4>

<p>
<a id="pgfId-1111410"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111411"></a><strong>Description: </strong>If your design contains an analog bus and the waveform is saved in the SST2 format by specifying the format (<code>rawfmt=sst2</code>) in an analog simulation control (<code>.scs</code>) file, the individual bits of the bus do not show a bit index.</p>
<p>
<a id="pgfId-1111412"></a><strong>Solution: </strong>Probe the analog bus from the Tcl prompt to see the correct waveform.</p>
<p>
<a id="pgfId-1111413"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1115793"></a>CCR 13907: Auto-inserted connect modules not viewable in SimVision</h4>

<p>
<a id="pgfId-1115794"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1115795"></a><strong>Description: </strong>Currently auto-inserted connect modules cannot be stepped into or probed. You can access the values on both ports but nothing inside of the connect module.</p>
<p>
<a id="pgfId-1115796"></a><strong>Solution: </strong>If you need visibility into connect module for debugging, manually insert the connect module into the design. Then, you have full use of the debug capabilities provided by Tcl commands and SimVision. After debugging your design, you can restore the automatically-inserted connect modules.</p>
<p>
<a id="pgfId-1115797"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h3>
<a id="pgfId-1111414"></a>Product Level 2: AMSVF</h3>
<h4>
<a id="pgfId-1111420"></a>CCR 219559: Cannot reload ic (initial condition) file in AMS UltraSim command-line mode</h4>

<p>
<a id="pgfId-1111421"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111422"></a><strong>Description: </strong>In AMSUltra (HSPICE + Verilog) command-line mode, after using an accurate UltraSim sim_mode, such as S mode, to create an ic (initial condition) file, you cannot reload the file in a later run that uses a sim_mode such as MS.</p>
<p>
<a id="pgfId-1111423"></a><strong>Solution: </strong>The following steps allow you to reload the file: </p>
<ol><li>
<a id="pgfId-1111424"></a>Change all the HSPICE netlists to lower case. </li><li>
<a id="pgfId-1111425"></a>Change all the initial conditions to lower case. </li><li>
<a id="pgfId-1111426"></a>Change the initial condition format from HSPICE to Spectre format. </li><li>
<a id="pgfId-1111427"></a>Add the <code>&quot;simulator lang=spectre insensitive=yes&quot;</code> at the beginning of the ic file.</li></ol>



<p>
<a id="pgfId-1111428"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1115713"></a>CCR 65445: Mixed-signal hierarchies beneath instance arrays are not supported</h4>

<p>
<a id="pgfId-1115714"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1115715"></a><strong>Description: </strong>AMS Designer supports only pure digital hierarchies for instance arrays. As a result, the following limitations apply: </p>
<ul><li>
<a id="pgfId-1115716"></a>If Verilog-AMS or VHDL-AMS content is found inside instance array hierarchies, an error is generated. </li><li>
<a id="pgfId-1115717"></a>When an analog node is declared and connected to an instance array, an error is generated. </li><li>
<a id="pgfId-1115718"></a>Dynamic parameter declarations inside hierarchies beneath instance arrays are not supported. </li><li>
<a id="pgfId-1115719"></a>If connection modules are manually inserted as instance arrays, the elaborator generates an error. </li><li>
<a id="pgfId-1115720"></a>Inherited connection attributes declared inside hierarchies beneath instance arrays are not supported. </li><li>
<a id="pgfId-1115721"></a>Analog primitives cannot be instantiated as arrays. </li><li>
<a id="pgfId-1115722"></a>If a wire attached to an instance array has an OOMR analog node declaration, the elaborator generates an error.</li></ul>






<p>
<a id="pgfId-1115723"></a><strong>Solution: </strong>None.</p>
<p>
<a id="pgfId-1115701"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h3>
<a id="pgfId-1111429"></a>Product Level 2: ANALOG_ELAB</h3>
<h4>
<a id="pgfId-1112886"></a>CCR 910511: Parameter Expressions used in array declaration cause elaboration error</h4>

<p>
<a id="pgfId-1112887"></a><strong>OS: </strong>LINUX<strong> Version: </strong>4.0_X86_64</p>
<p>
<a id="pgfId-1112888"></a><strong>Description: </strong>The Elaborator issues an error when you use parameter expressions instead of constant value inside array declaration. Below is a simple example where parameter <code>ANASWEN_MUX_WIDTH</code> is used in an expression in the array declaration of <code>ipt_anaswen_demux</code>. </p>

<pre class="webflare-courier-new">
<a id="pgfId-1112889"></a>parameter ANASWEN_MUX_WIDTH = 3; <br />output [(2**ANASWEN_MUX_WIDTH)-1:0] ipt_anaswen_demux;</pre>

<p>
<a id="pgfId-1112890"></a><strong>Solution: </strong>To avoid the elaboration error, use const value inside array declaration. For example, to avoid the elaboration error in the above example, evaluate the parameter expression before the array declaration and assign the evaluated value in the array, as shown below. </p>

<pre class="webflare-courier-new">
<a id="pgfId-1112891"></a>parameter ANASWEN_MUX_WIDTH = 3; <br />Parameter BUS_WIDTH = (2**ANASWEN_MUX_WIDTH)-1; <br />output [BUS_WIDTH :0] ipt_anaswen_demux;</pre>

<p>
<a id="pgfId-1112892"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1112930"></a>CCR 560104: ncelab internal error (Failed to open Spectre library) on Linux platforms</h4>

<p>
<a id="pgfId-1111431"></a><strong>OS: </strong>LINUX<strong> Version: </strong>4.0_X86_64</p>
<p>
<a id="pgfId-1111432"></a><strong>Description: </strong> If you are running the AMS Designer simulator on Linux using the three-step method (<code>ncvlog</code>, <code>ncelab</code>, <code>ncsim</code>), and you do not specify the <code>lib</code> directory correctly (and first) in the&#160;&#160;<code>LD_LIBRARY_PATH</code> variable, an error such as the following appears during elaboration: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111433"></a>ncelab: *N,SFEDPL: Deploying new SFE in analog engine.<br />ncelab: *F,INTERR: INTERNAL ERROR</pre>

<p>
<a id="pgfId-1111434"></a>This problem does not occur if you are running <code>irun</code> or running the AMS Designer simulator from the AMS Designer environment.</p>
<p>
<a id="pgfId-1111435"></a><strong>Solution: </strong>Add the <code>tools/lib</code> location at the beginning of your <code>LD_LIBRARY_PATH</code> setting, before any other library locations. If you are using the 64-bit version of the software, add the <code>tools/lib/64bit</code> location first.</p>
<p>
<a id="pgfId-1111436"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111437"></a>CCR 396225: AMS Designer simulator does not support using an OOMR for passed_mfactor value</h4>

<p>
<a id="pgfId-1111438"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111439"></a><strong>Description: </strong>The elaborator fails if you use an out-of-module reference (OOMR) as the value of <code>passed_mfactor</code>. For example, you cannot use a statement such as the following because <code>cds_globals.r</code> is an OOMR. </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111440"></a>child #(.m(cds_globals.r)) (* integer passed_mfactor = &quot;m&quot;; *) c1();</pre>

<p>
<a id="pgfId-1111441"></a><strong>Solution: </strong>Pass <code>passed_mfactor</code> values directly instead of using OOMRs.</p>
<p>
<a id="pgfId-1111442"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111455"></a>CCR 26067: Declaring global aliases makes ncelab fail</h4>

<p>
<a id="pgfId-1111456"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111457"></a><strong>Description: </strong>When there are aliases defined in a design (which instantiates <code>cds_alias</code> from <code>basic</code>) the elaboration fails with a message like the following: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111458"></a>ncelab: *E,DLPAKW: Attempt to write module basic.cds_alias:functional (SAM) &lt;0x00000001&gt; into a read-only library.</pre>
<pre class="webflare-courier-new">
<a id="pgfId-1111459"></a>Error found by spectre.
&#160;&#160;&#160;&#160;Error: Unable to instantiate master &quot;basic:cds_alias.functional&quot; as
&#160;&#160;&#160;&#160;     &quot;cds_globals.ams_alias_inst_1&quot;<br />ncelab: *E,DLPAKW: Attempt to write module basic.cds_alias:functional (SDB)<br />into a read-only library.<br />ncelab: *F,SSIGF: Spectre Simulation Image generation failed!.</pre>

<p>
<a id="pgfId-1111460"></a><strong>Solution: </strong>Set TMP directory in the <code>cds.lib</code> file and, in the command line, run <code>ncvlog</code> to compile <code>basic:cds_alias.functional</code> (verilog.v) into the TMP directory. For example, add the following lines to your <code>cds.lib</code> file: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111461"></a>DEFINE basic $CDSHOME/tools/dfII/etc/cdslib/basic<br />ASSIGN basic TMP ./basic_local</pre>

<p>
<a id="pgfId-1111462"></a>Then run the <code>ncvlog</code> command as follows: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111463"></a>ncvlog -use5x -ams $CDSHOME/tools/dfII/etc/cdslib/basic/cds_alias/functional/verilog.v -work basic</pre>

<p>
<a id="pgfId-1111464"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111465"></a>CCR 8473: Analog functions cannot call another function if it is forward declared</h4>

<p>
<a id="pgfId-1111466"></a><strong>OS: </strong>SUN4U ALL<strong> Version: </strong>NONE</p>
<p>
<a id="pgfId-1111467"></a><strong>Description: </strong>Analog user-defined functions fail elaboration if they call other analog functions that are not defined prior to their use (call).</p>
<p>
<a id="pgfId-1111468"></a>An example of this situation is: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111469"></a>analog<br />begin<br />    V(n2) &lt;+ maxVal(4.0, 5.0);<br />end</pre>
<pre class="webflare-courier-new">
<a id="pgfId-1111470"></a>analog function real maxVal;<br />    input n1, n2;<br />    real n1, n2;<br />    real g;<br />    begin<br />        g = (n1 &gt; n2) ? n1 : n2;<br />        maxVal = add5(g);<br />    end<br />endfunction</pre>
<pre class="webflare-courier-new">
<a id="pgfId-1111471"></a>analog function real add5;<br />    input a;<br />    real a;<br />    begin<br />        add5 = a + 5;<br />    end<br />endfunction</pre>

<p>
<a id="pgfId-1111472"></a>The above fragment fails during elaboration with the following error: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111473"></a>                maxVal = add5(g);<br />                            |<br />ncelab: *E,SYERROR: Unknown user defined function</pre>

<p>
<a id="pgfId-1111474"></a><strong>Solution: </strong>Ensure that analog user-defined functions are defined prior to their use in another analog function.</p>
<p>
<a id="pgfId-1111475"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h3>
<a id="pgfId-1118979"></a>Product Level 2: Auto-Incremental Elaboration with RNM</h3>
<h4>
<a id="pgfId-1118980"></a>CCR 02011260: Auto-MSIE partition file is generated even when the simulation has TYCMPAT elab error</h4>

<p>
<a id="pgfId-1118981"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1119067"></a><strong>Description: </strong>In some scenarios, the tool performs auto-partitioning of designs and generates an invalid partition file, even when a TYCMPAT elab error is issued.</p>
<p>
<a id="pgfId-1119069"></a>This issue is related to part select of UDN array, which leads to mismatched size connection. This has been enabled in monolithic flow; however, not yet in incremental elaboration flow.</p>
<p>
<a id="pgfId-1118983"></a><strong>Solution: </strong>None</p>
<p>
<a id="pgfId-1118984"></a>Planned Release: Not currently planned.</p>

<h3>
<a id="pgfId-1118822"></a>Product Level 2: AXUM</h3>
<h4>
<a id="pgfId-1118823"></a>CCR 2031018: Valid spice OOMR&#39;s are ignored with autoxspice option</h4>

<p>
<a id="pgfId-1118824"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1118825"></a><strong>Description: </strong>Valid spice OOMR&#39;s are being ignored when <code>autoxspice</code> option is used along with <code>autospiceoomr </code>option.</p>
<p>
<a id="pgfId-1118826"></a><strong>Solution: </strong>Disable the Autoxspice OOMR processing (<code>-disable_autoxpsice</code>)</p>
<p>
<a id="pgfId-1118818"></a>Planned Release: Future Agile release.</p>

<h3>
<a id="pgfId-1119123"></a>Product Level 2: BIND</h3>
<h4>
<a id="pgfId-1119124"></a>CCR 02060943: -rnm_info is not displaying the message with RNM_INFO keyword</h4>

<p>
<a id="pgfId-1119125"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1119126"></a><strong>Description: </strong><code>-rnm_info</code> is displaying messages with WREAL_INFO &amp; RNM_INFO.</p>
<p>
<a id="pgfId-1119229"></a><strong>Solution: </strong>-<code>rnm_info</code> is superset of <code>+wreal_info</code>; therefore, will work for all RNM nets including Wreal, SV-Real, and SV-UDN. Currently, in the log files, wreal nets are shown under WREAL_INFO and SV-UDN are under RNM_INFO.</p>
<p>
<a id="pgfId-1119231"></a>In the next release, the <code>+wreal_info</code> option will be deprecated and WREAL_INFO messages also will be included in RNM_INFO.</p>
<p>
<a id="pgfId-1119119"></a>Planned Release: Future Agile release.</p>

<h3>
<a id="pgfId-1113953"></a>Product Level 2: CONNECT_MOD</h3>
<h4>
<a id="pgfId-1113960"></a>CCR 972832: Incorrect `timescale value causes unexpected &#39;x&#39; state on the logic side of the E2L connect module.</h4>

<p>
<a id="pgfId-1113961"></a><strong>OS: </strong>LINUX<strong> Version: </strong>RHEL5.0_64</p>
<p>
<a id="pgfId-1113962"></a><strong>Description: </strong>The <code>`timescale</code> value (1ns/100ps) is hardcoded in the E2L connect module. When you specify the tr/tf values as less than 12.5ps, an unexpected <code>x</code> state is added to the rising/falling edge of the logic side of E2L. The <code>x</code> state leads to wrong functions in the subsequent logic, and is hard to debug. The root cause of this condition is that the second precision <code>`timescale</code> value (100ps) exceeds eight times the specified tr/tf value, which does not conform to the algorithm in E2L conversion.</p>
<p>
<a id="pgfId-1113963"></a><strong>Solution: </strong>To work around this issue, you can modify the E2L file and include it in the <code>irun</code> command to replace the built-in E2L file, or use the following <code>ncelab</code>/<code>irun</code> options:</p>
<ul><li>
<a id="pgfId-1114008"></a><code>ncelab -timescale 1ns/10ps -OVERRIDE_Precision</code></li><li>
<a id="pgfId-1114016"></a><code>irun -timescale 1ns/10ps -OVERRIDE_Precision</code></li></ul>

<p>
<a id="pgfId-1113964"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h3>
<a id="pgfId-1114064"></a>Product Level 2: INTERACTIVE</h3>
<h4>
<a id="pgfId-1114211"></a>CCR 1062751: Drivers for Wreal and/or SVDC Net Types cannot be traced</h4>

<p>
<a id="pgfId-1114212"></a><strong>OS: </strong>LINUX<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1114213"></a><strong>Description: </strong>The SimVision T<em>race Driver in side bar</em> feature erroneously reports <code>No Drivers Available</code> for WREAL and SVDC net types. </p>
<p>
<a id="pgfId-1114214"></a><strong>Solution: </strong>As a work around, use the Tcl <code>drivers</code> command to report the drivers for WREAL and/or SVDC net types. </p>
<p>
<a id="pgfId-1114215"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1114073"></a>CCR 8130: Problems when evaluating integer analog array objects</h4>

<p>
<a id="pgfId-1111478"></a><strong>OS: </strong>ALL<strong> Version: </strong>NONE</p>
<p>
<a id="pgfId-1111479"></a><strong>Description: </strong>When evaluating the value of integer analog arrays, several formatting and valuation problems exist.</p>
<p>
<a id="pgfId-1111480"></a><strong>Solution: </strong>To ensure that you see the correct and complete values of integer analog arrays, use the <code>%d</code> formatting option for these objects.</p>
<p>
<a id="pgfId-1111481"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h3>
<a id="pgfId-1111482"></a>Product Level 2: NCELAB</h3>
<h4>
<a id="pgfId-1111483"></a>CCR 212139: Supply-sensitive connect module does not work with top digital test bench</h4>

<p>
<a id="pgfId-1111484"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111485"></a><strong>Description: </strong>When you have a behavioral test bench driving an analog or SPICE block at the top level, automatically inserted connect modules (AICMs) used between the block and the test bench do not inherit the supply sensitivity value from the digital test bench.</p>
<p>
<a id="pgfId-1111486"></a><strong>Solution: </strong>Create a dummy top level and make sure the supply sensitive AICMs are all one level below the top level.</p>
<p>
<a id="pgfId-1111487"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111488"></a>CCR 152870: AMS supply sensitivity attributes in IEEE 1364-2001 format are ignored</h4>

<p>
<a id="pgfId-1111489"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111490"></a><strong>Description: </strong>AMS Designer supply sensitivity attributes in IEEE 1364-2001 format are ignored by the simulation flow. Attributes in this form are unsupported.</p>
<p>
<a id="pgfId-1111491"></a><strong>Solution: </strong>Use the IEEE 1364-1995 format to write AMS Designer supply sensitivity attributes.</p>
<p>
<a id="pgfId-1111492"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111493"></a>CCR 115386: Supply/ground sensitivity does not work in default discipline resolution mode</h4>

<p>
<a id="pgfId-1111494"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111495"></a><strong>Description: </strong>The <code>ncelab</code> tool does not support supply and ground sensitivity attributes in the default discipline resolution mode. As a result, analog nodes are left floating (and grounded) leading to incorrect simulation results. </p>
<p>
<a id="pgfId-1111496"></a>The supply and ground sensitivity attributes <em>are</em> supported in the detailed discipline resolution mode.</p>
<p>
<a id="pgfId-1111497"></a><strong>Solution: </strong>Use the <code>-detailed</code> discipline resolution option to the <code>ncelab</code> command instead of the <code>-default</code> option.</p>
<p>
<a id="pgfId-1111498"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111499"></a>CCR 68807: Error when more than two disciplines are used in a connectrule statement</h4>

<p>
<a id="pgfId-1111500"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111501"></a><strong>Description: </strong>If the connectrule statement includes three or more disciplines, the elaborator generates an error when you attempt to use the connectrule to resolve only two disciplines. </p>
<p>
<a id="pgfId-1111502"></a>For example, you have the connectrule: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111503"></a>connect electrical, magnetic, thermal resolveto magnetic;</pre>

<p>
<a id="pgfId-1111504"></a>and you have the following instantiation statements: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111505"></a>vams_a  aa1 (net1); // has electrical port<br />vams_b&#160;&#160;bb1 (net1); // has magnetic port</pre>

<p>
<a id="pgfId-1111506"></a>The elaborator generates an error if you try to resolve these two ports (an electrical one and a magnetic one) to magnetic, using a connectrule that includes three disciplines.</p>
<p>
<a id="pgfId-1111507"></a><strong>Solution: </strong>To resolve ports that are of only two different disciplines, be sure that the connectrule to be used has only a pair of disciplines. For the example above, you can rewrite the connectrule as: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111508"></a>connect electrical, magnetic resolveto magnetic;</pre>

<p>
<a id="pgfId-1111509"></a>If you need to resolve ports of more than two different disciplines, you can continue to use a connectrule that includes more than two disciplines.</p>
<p>
<a id="pgfId-1111510"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111511"></a>CCR 19328: Hypotenuse function with param argument does not parse in AMS</h4>

<p>
<a id="pgfId-1111512"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111513"></a><strong>Description: </strong>The hypotenuse function does not work in AMS Designer if at least one of the arguments is a parameter.</p>
<p>
<a id="pgfId-1111514"></a><strong>Solution: </strong>Use the full equation, with the <code>sqrt</code> and <code>**2</code> functions.</p>
<p>
<a id="pgfId-1111515"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h3>
<a id="pgfId-1111516"></a>Product Level 2: NCSIM</h3>
<h4>
<a id="pgfId-1112461"></a>CCR 1079842: Simvision does not display interface elements during live simulation</h4>

<p>
<a id="pgfId-1114950"></a><strong>OS</strong>:ALL <strong>Version</strong>: ALL</p>
<p>
<a id="pgfId-1114968"></a><strong>Description</strong>: If you use the ncsim/irun <code>-gui</code> option or the ADE debugging mode, interface elements are not always displayed as marching waveforms during live simulation.</p>
<p>
<a id="pgfId-1114988"></a><strong>Solution</strong>: You can verify the interface elements during post-processing.</p>

<h4>
<a id="pgfId-1114927"></a>CCR 648450: AMS Designer does not support wreal array assignments</h4>

<p>
<a id="pgfId-1112462"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1112449"></a><strong>Description: </strong>AMS Designer does not support wreal array assignments. For example,</p>

<a id="pgfId-1112489"></a><pre class="webflare-courier-new webflare-syx-syntax">
module mid(p,r); 
output wreal r [1:0][1:0];
input  wreal p [1:0][1:0]; </pre>
<a id="pgfId-1112490"></a><pre class="webflare-courier-new webflare-syx-syntax">
     assign r=p; 
// The following is working fine:
//  assign r[0][0]=p[0][0]; 
//  assign r[0][1]=p[0][1]; 
//  assign r[1][0]=p[1][0]; 
//  assign r[1][1]=p[1][1]; </pre>
<a id="pgfId-1112551"></a><pre class="webflare-courier-new webflare-syx-syntax">
endmodule</pre>

<p>
<a id="pgfId-1112566"></a><strong>Solution: </strong>Wreal array support is beyond the Verilog-AMS LRM requirement. Cadence extends the support of wreal array (among other extensions) to benefit wreal customers. In earlier releases, wreal array assignment was not supported, and the workaround was to assign bit by bit, that is, <code>wreal_a[1]=wreal_b[1]</code>, which was time consuming if the array had a&#160;&#160;big dimension. In this release, you can perform wreal array assignment in a more convenient way through a predefined macro as follows: </p>
<ul><li>
<a id="pgfId-1112567"></a>In the Verilog-AMS model file, define a macro with pre-compiler directive, as follows:<br /><pre class="webflare-pre-block webflare-courier-new" id="#id1112604">
<a id="pgfId-1112604"></a>&#8216;define ASSIGN_ARRAY(a,b,c) genvar i; generate for (i=0;i&lt;c;i=i+1) assign a[i]=b[i];      
endgenerate </pre></li><li>
<a id="pgfId-1112592"></a>Within the model, call the macro as follows:     <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1112626">
<a id="pgfId-1112626"></a>&#8216;ASSIGN_ARRAY(myDes, myAssign, 5) </pre><br /><div class="webflare-information-macro webflare-macro-note">
<a id="pgfId-1112568"></a>Note: <code>myAssign</code> and <code>myDes</code> are 5-element arrays where <code>myDes</code>&lt;=<code>myAssign</code>. There is no &#8220;;&#8221; at the end of the line, since it just calls the macro. </div></li></ul>





<h4>
<a id="pgfId-1111517"></a>CCR 548909: digital signal cannot be plotted with simvision after ams simulation killed in SGE</h4>

<p>
<a id="pgfId-1111518"></a><strong>OS: </strong>LINUX<strong> Version: </strong>EE3.0</p>
<p>
<a id="pgfId-1111519"></a><strong>Description: </strong>It occurs in a certain situation. The <code>ncsim</code> saves the digital waveform to database only when the memory is full. When the simulation is killed using SIGKILL(-9) in SGE AND the waveform memory is not full, the digital signal will not be saved properly.</p>
<p>
<a id="pgfId-1111520"></a><strong>Solution: </strong>There is a SGE setting workaround for this problem: </p>
<p>
<a id="pgfId-1111521"></a>By default, the <code>qdel</code> command gives the SIGKILL(-9) signal, but you can change it to SIGTERM, which can terminate the simulator in a normal way using next method: </p>
<p>
<a id="pgfId-1111522"></a>Edit queue files in next directory: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111523"></a>$SGE_ROOT/$SGE_CELL/spool/qmaster/cqueues/ </pre>

<p>
<a id="pgfId-1111524"></a>Before the change: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111525"></a>terminate_method none </pre>

<p>
<a id="pgfId-1111526"></a>After the change: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111527"></a>terminate_method SIGTERM </pre>

<p>
<a id="pgfId-1111528"></a>Re-invoke the SGE deamon and run the simulation from ADE selecting the queue you have changed. <code>qdel</code> the simulation now and the result waveform data is kept well and can be plotted without problem. </p>
<p>
<a id="pgfId-1111529"></a>You will get DP log inform as next: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111530"></a>&gt; -------------------------------------------- <br />&gt; Job 658 (cmdLineRunDistrib) Complete <br />&gt; User             = yanyan <br />&gt; Queue            = cdsj139@cdsj139.Cadence.COM <br />&gt;  Host             = cdsj139.Cadence.COM <br />&gt;  Start Time       = 05/21/2008 07:20:06 <br />&gt;  End Time         = 05/21/2008 07:20:42 <br />&gt; User Time        = 00:00:30 <br />&gt;  System Time      = 00:00:03 <br />&gt;  Wallclock Time   = 00:00:36 <br />&gt;  CPU              = 00:00:33 <br />&gt;  Max vmem         = 333.016M <br />&gt;  Exit Status      = 0 <br />&gt; --------------------------------------------- </pre>

<p>
<a id="pgfId-1111531"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111532"></a>CCR 222957: Unprobed bits of analog bus also show non-empty waveforms in amsfastspice mode</h4>

<p>
<a id="pgfId-1111533"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111534"></a><strong>Description: </strong>When you probe an individual bit of an analog bus, all the bits of that bus show up with non-empty waveforms. For example, you try to probe just bit <code>vd[1]</code> with the following commands, </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111535"></a>probe -shm top.IdealDac.vd[1]<br />probe -shm -flow top.IdealDac.vd[1]</pre>

<p>
<a id="pgfId-1111536"></a>where <code>vd</code> is an 8-bit analog bus. </p>
<p>
<a id="pgfId-1111537"></a>After the simulation, you find that the SST2 waveform database for these Tcl commands contains waveforms for all the bits of the bus <code>vd</code>.</p>
<p>
<a id="pgfId-1111538"></a><strong>Solution: </strong>None.</p>
<p>
<a id="pgfId-1111539"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111540"></a>CCR 93385: Mixed-case library name must be escaped when used in MAPN2D specification</h4>

<p>
<a id="pgfId-1111541"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111542"></a><strong>Description: </strong>If you want to use a <code>MAPN2D</code> specification for a VHDL-AMS nature defined in a library whose name is a mixed-case identifier, you must escape the library name in the <code>MAPN2D</code> specification. </p>
<p>
<a id="pgfId-1111543"></a>Example: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111544"></a>MAPN2D amsPLL.std_decls.electrical electrical   -- INCORRECT<br />MAPN2D \amsPLL\.std_decls.electrical electrical -- CORRECT</pre>

<p>
<a id="pgfId-1111545"></a><strong>Solution: </strong>Always escape mixed-case library names that are used in <code>MAPN2D</code> specifications.</p>
<p>
<a id="pgfId-1111546"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111552"></a>CCR 7827: Tcl drivers command omits auto-inserted connect modules</h4>

<p>
<a id="pgfId-1111553"></a><strong>OS: </strong>ALL<strong> Version: </strong>NONE</p>
<p>
<a id="pgfId-1111554"></a><strong>Description: </strong>When the Tcl <code>drivers</code> command is applied to a mixed-net and an automatically-inserted connect module is driving that net in the design, the connect module is not included in the <code>drivers</code> command output listing.</p>
<p>
<a id="pgfId-1111555"></a><strong>Solution: </strong>You can list all the connect modules in a particular scope of the design with the <code>scope</code> command (see <code>help</code>). In this way, you can determine if a problematic mixed-signal net has such a hidden driver. </p>
<p>
<a id="pgfId-1111556"></a>By editing your design, you can also replace automatically-inserted connect modules with identical manually-inserted connect modules. Then you have full use of the debug capabilities provided by Tcl commands and SimVision. After debugging your design, you can restore the automatically-inserted connect modules.</p>
<p>
<a id="pgfId-1111557"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h3>
<a id="pgfId-1111558"></a>Product Level 2: NCVHDL</h3>
<h4>
<a id="pgfId-1111559"></a>CCR 40597: Restrictions to the simultaneous IF statement</h4>

<p>
<a id="pgfId-1111560"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111561"></a><strong>Description: </strong>The <code>IF</code> statement must be balanced. Every <code>IF</code> statement must contain an <code>else</code> clause. Any free or interface quantity of mode out must be referenced in a simultaneous statement.</p>
<p>
<a id="pgfId-1111562"></a><strong>Solution: </strong>Support for the simultaneous <code>if</code> statement is limited so that the <code>else</code> clause, which according to the standard is optional, is required for the model to successfully pass the solvability balance check. </p>
<p>
<a id="pgfId-1111563"></a>Example: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111564"></a>The following code snippet while LRM compliant fails in the parser:<br />FAILS:if (vd &gt; -5.0) use<br />q1 == 5.0;<br />elsif (vd &lt;= -5.0) use<br />q1 == 6.0;<br />end use;</pre>

<p>
<a id="pgfId-1111565"></a>It needs to be re-written like this to pass through: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111566"></a>PASSES:if (vd &gt; -5.0) use<br />q1 == 5.0;<br />else<br />q1 == 6.0;<br />end use;</pre>

<p>
<a id="pgfId-1111567"></a>A modeling constraint is also placed such that the <code>If</code> statement has to be balanced. In other words, the number of simultaneous statements in the <code>if</code> and <code>else</code> blocks must be equal. </p>
<p>
<a id="pgfId-1111568"></a>Example: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111569"></a>PASSES:if (vd &gt; 6.0) use<br />q1 == 6.0;<br />q2 == -6.0;<br />elsif (vd &gt; 0.0) use<br />q1 == vd;<br />q2 == -vd;<br />else<br />q1 == 0.0;<br />q2 == 0.0;<br />end use;<br />FAILS:if (vd &gt; 6.0) use<br />q1 == 6.0;<br />q2 == -6.0;<br />elsif (vd &gt; 0.0) use<br />q1 == vd;<br />q2 == -vd;<br />else<br />q1 == 0.0; -- this path has different number of expressions<br />end use;</pre>

<p>
<a id="pgfId-1111570"></a>A dependency check is also performed to ensure that any free or interface quantity of mode out is referenced in a simultaneous statement. </p>
<p>
<a id="pgfId-1111571"></a>Example (assume the quantities <code>q1</code>, <code>q2</code> and <code>q3</code> are not referenced in any other simultaneous statements outside the block below). This example passes the balance check but fails the dependency check. </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111572"></a>FAILS_2:if condition_1 use<br />if condition_2 use<br />q1 == 0.0;<br />else<br />q1 == 1.0;<br />end use;<br />q2 == 2.0; --q3 is not referenced in the design.<br />else<br />q1 == 3.0;<br />q3 == 4.0; --q2 is not referenced in the design.<br />end use;<br />PASSES:if condition_1 use<br />if condition_2 use<br />q1 == 0.0;<br />else<br />q1 == 1.0;<br />end use;<br />q2 == 2.0;<br />q3 == 5.0;<br />else<br />q1 == 3.0;<br />q2 == 5.0;<br />q3 == 6.0;<br />end use;</pre>

<p>
<a id="pgfId-1111573"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111574"></a>CCR 31405: Multiple package definitions in source files can cause segmentation fault</h4>

<p>
<a id="pgfId-1111575"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111576"></a><strong>Description: </strong>If a package identifier is given multiple definitions in different source files, and those source files are compiled with <em>ncvhdl</em> on the same command line, it is possible for a segmentation fault to occur if the system clock does not change between the first and second files. The expected behavior would be the generation of a <code>DLWNEW</code> warning.</p>
<p>
<a id="pgfId-1111577"></a><strong>Solution: </strong>Compile each source file separately and a <code>DLWNEW</code> warning will be reported on the duplicate package name.</p>
<p>
<a id="pgfId-1111578"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h3>
<a id="pgfId-1111579"></a>Product Level 2: NCVLOG</h3>
<h4>
<a id="pgfId-1111580"></a>CCR 73352: Digital signals not detected in @cross expression</h4>

<p>
<a id="pgfId-1111581"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111582"></a><strong>Description: </strong>Using digital signals in the <code>@cross</code> expression can slow down simulation because, effectively, the digital signal does not cross the 0.0 threshold. Although the <em>Language Reference Manual</em> does not declare this usage to be illegal, Cadence recommends that you avoid using digital signals in this way.</p>
<p>
<a id="pgfId-1111583"></a><strong>Solution: </strong>Use digital events such as <code>@posedge</code>, <code>@negedge</code>, or just <code>@</code>, to detect changes in digital signals. These events are supported in the analog context.</p>
<p>
<a id="pgfId-1111584"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111585"></a>CCR 144136: Inherited connections that resolve to implicit nets cause an elaboration error</h4>

<p>
<a id="pgfId-1111586"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111587"></a><strong>Description: </strong>An inherited connection that resolves to an implicit net causes a <code>CUVHNF</code> error during elaboration. </p>
<p>
<a id="pgfId-1111588"></a>During inherited connection processing, the elaborator searches in the parent hierarchy for the target net. Because the net is implicit, it is not found. As a result, the elaborator is unable to establish the connection and issues an error.</p>
<p>
<a id="pgfId-1111589"></a><strong>Solution: </strong>Explicitly declare all nets that are used as inherited connections. One way to do this is to declare the target inherited connection as a wire within the parent hierarchy.</p>
<p>
<a id="pgfId-1111590"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h3>
<a id="pgfId-1111596"></a>Product Level 2: OUTPUT</h3>
<h4>
<a id="pgfId-1115144"></a>CCR 938845: Analog signals or vectors are not saved by default in the AIUM flow</h4>

<p>
<a id="pgfId-1115145"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1115146"></a><strong>Description: </strong>In AMS-Spectre or AMS-APS, when you save or probe analog signals or vectors using the AIUM flow (Verilog-Spice or VHDL-Spice), these vectors are not saved. </p>
<p>
<a id="pgfId-1115147"></a><strong>Solution: </strong>You can work around this problem by using the following two methods: </p>
<ol><li>
<a id="pgfId-1115148"></a>Add <code>save=selected</code> to the <code>tran</code> command card or statement, as follows: <br />
<a id="pgfId-1115149"></a>Spice format: <code>.tran 1ns 10ns save=selected .probe v(*) depth=3</code> <br />
<a id="pgfId-1115150"></a>Spectre format: <code>simulator lang=spectre tran1 tran stop=10ns save * depth=3</code> </li><li>
<a id="pgfId-1115151"></a>Use the Spectre option <code>save=selected</code>, as follows: <br />
<a id="pgfId-1115152"></a><code>simulator lang=spectre myopt options  save=selected</code></li></ol>




<p>
<a id="pgfId-1115153"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1113587"></a>CCR 899753: rtsf not working for psfbin and psfxl</h4>

<p>
<a id="pgfId-1112694"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1112695"></a><strong>Description: </strong>The RTSF feature in AMS-UltraSim does not support the <code>psfbin</code> and <code>psfxl</code> formats. These formats are also not supported in UltraSim standalone. They are supported only in AMS-Spectre and AMS-APS.</p>
<p>
<a id="pgfId-1112696"></a><strong>Solution: </strong>None</p>
<p>
<a id="pgfId-1112697"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1112742"></a>CCR 898494: Run multiple simulations from the same directory</h4>

<p>
<a id="pgfId-1112743"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1112744"></a><strong>Description: </strong>When you run multiple simulations on the same case from the same directory, the following two important options are used: </p>
<ul><li>
<a id="pgfId-1112745"></a><code>-nclibdirname</code>: All intermediate outputs for digital and mixed-signal (The generic irun <code>INCA_lib</code> output, AIUM internal material, like skeleton, portmap file, and so on.) </li><li>
<a id="pgfId-1112746"></a><code>-outdir</code>: All analog solver outputs. </li></ul>

<p>
<a id="pgfId-1112747"></a>However, the location of the final waveform database is determined by the <code>database -into</code> command in Tcl file, and not the <code>-outdir</code> command.</p>
<p>
<a id="pgfId-1112748"></a><strong>Solution: </strong>To work around this problem, set the waveform location in the <code>database -into</code> command in TCL file the same as the value of the irun option of the <code>-outdir</code> command.</p>
<p>
<a id="pgfId-1112749"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1113214"></a>CCR 759343: Controlling the vector signal names format in the waveform database for AMS-D + Ultrasim solver</h4>

<p>
<a id="pgfId-1113215"></a><strong>OS: </strong>LINUX<strong> Version: </strong>RHEL5.0_64</p>
<p>
<a id="pgfId-1113216"></a><strong>Description: </strong>With ultrasim solver generating <code>SST2</code> and <code>FSDB</code> output formats, running regular Spice simulation, we have the output files generated in a certain format. When we run AMSD with ultrasim, we get a different format compared to Spice-only simulation. </p>
<p>
<a id="pgfId-1113217"></a>With AMSD+Ultrasim solver the default value for the above is <code>verilog</code>. </p>
<p>
<a id="pgfId-1113218"></a>The Ultrasim solver <code>.usim_opt wf_output_format</code> controls the appearance of a hierarchical node name in the waveform database. </p>
<p>
<a id="pgfId-1113219"></a>For example, for FSDB file the expected SPICE vector format is <code>x1.x11.v(n1), x1.x11.i1(m1)</code></p>
<p>
<a id="pgfId-1113220"></a><strong>Solution: </strong>The default <code>wf_output_format=verilog</code> sets the following vector signal names format in the waveform database: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1113270"></a>x1.x11.n1 and x1.x11.m1:1_$flow </pre>

<p>
<a id="pgfId-1113221"></a>Such vector signal names format can be changed using <code>.usim_opt wf_output_format=spice</code> . It sets the following vector signal names format&#160;&#160;in the waveform database: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1113285"></a>x1.x11.v(n1), x1.x11.i1(m1) </pre>

<p>
<a id="pgfId-1113223"></a><code>.usim_opt wf_output_format=spice</code> includes the following format in the waveform database: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1113298"></a>x1.x11.v(n1), x1.x11.i1(m1) </pre>

<p>
<a id="pgfId-1113224"></a>or </p>

<pre class="webflare-courier-new">
<a id="pgfId-1113308"></a>.usim_opt wf_output_format=spectre </pre>

<p>
<a id="pgfId-1113315"></a>It sets the following vector signal names format&#160;&#160;in the waveform database: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1113325"></a>x1.x11.n1 and x1.x11.m1:1 </pre>

<p>
<a id="pgfId-1113225"></a>or </p>

<pre class="webflare-courier-new">
<a id="pgfId-1113335"></a>wf_output_format=spice_raw </pre>

<p>
<a id="pgfId-1113342"></a>It includes the following formats in the waveform database: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1113352"></a>v(x1.x11.n1) and i1(x1.x11.m1) </pre>

<p>
<a id="pgfId-1113226"></a>Based on your requirments and the post processing software used, you can change the verctor signal names format.</p>
<p>
<a id="pgfId-1113228"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111597"></a>CCR 8002: Long term: port probe problem in hierarchy</h4>

<p>
<a id="pgfId-1111598"></a><strong>OS: </strong>ALL<strong> Version: </strong>NONE</p>
<p>
<a id="pgfId-1111599"></a><strong>Description: </strong>Port probes do not consider current contributions of instantiated components inside of a hierarchical design. As a result, the accumulated value of a port probe does not reflect the complete current through the port.</p>
<p>
<a id="pgfId-1111600"></a><strong>Solution: </strong>Manually (explicitly) create a port probe in the module by introducing an internal node. The internal node should be connected to the port using a zero-volts source. All references to the port in the module should be replaced by a reference to the internal node. Then the port probe can be created by probing between the port and the internal node. </p>
<p>
<a id="pgfId-1111601"></a>For example, rewrite; </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111602"></a>module test(a,b);<br />inout a,b;<br />electrical a,b, gnd;<br />ground gnd;<br />real r1, r2;</pre>
<pre class="webflare-courier-new">
<a id="pgfId-1111603"></a>resistor #(.r(10)) R3 (a, gnd);</pre>
<pre class="webflare-courier-new">
<a id="pgfId-1111604"></a>analog begin
&#160;&#160;&#160;&#160;r1 = I(&lt;a&gt;);
&#160;&#160;&#160;&#160;I(a,b) &lt;+ V(a,b)/10;
&#160;&#160;&#160;&#160;I(b,gnd) &lt;+ V(b,gnd)/10;
&#160;&#160;&#160;&#160;$display(&quot; I(&lt;a&gt;) = %g \n&quot;, r1);<br />end</pre>
<pre class="webflare-courier-new">
<a id="pgfId-1111605"></a>endmodule</pre>

<p>
<a id="pgfId-1111606"></a>as: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111607"></a>module test(a,b);<br />inout a,b;<br />electrical a,b, gnd;<br />ground gnd;<br />real r1, r2;</pre>
<pre class="webflare-courier-new">
<a id="pgfId-1111608"></a>electrical a2;<br />resistor #(.r(10)) R3 (a2, gnd);</pre>
<pre class="webflare-courier-new">
<a id="pgfId-1111609"></a>analog begin
&#160;&#160;&#160;&#160;V(a,a2) &lt;+ 0;
&#160;&#160;&#160;&#160;r1 = I(a,a2);
&#160;&#160;&#160;&#160;I(a2,b) &lt;+ V(a2,b)/10;
&#160;&#160;&#160;&#160;I(b,gnd) &lt;+ V(b,gnd)/10;
&#160;&#160;&#160;&#160;$display(&quot; I(&lt;a&gt;) = %g \n&quot;, r1);<br />end</pre>
<pre class="webflare-courier-new">
<a id="pgfId-1111610"></a>endmodule</pre>

<p>
<a id="pgfId-1111611"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h3>
<a id="pgfId-1114526"></a>Product Level 2: SAVE-RESTART</h3>
<h4>
<a id="pgfId-1114550"></a>CCR 1071048: The SystemC-AMS SaveRestart feature does not work on SLES11</h4>

<p>
<a id="pgfId-1114551"></a><strong>OS: </strong>LINUX <strong>Version: SLES11_64</strong></p>
<p>
<a id="pgfId-1114552"></a><strong>Description</strong>: If you try to perform save &amp; restart on a SystemC-AMS design that uses both SystemC and AMS languages on SLES11, AMS may crash when restarting the simulation.</p>
<p>
<a id="pgfId-1114553"></a>Solution: Use this feature only on platforms other than SLES11.</p>
<p>
<a id="pgfId-1114542"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h3>
<a id="pgfId-1111798"></a>Product Level 2: SPECTRE</h3>
<h4>
<a id="pgfId-1114252"></a>CCR 1072379: Linter message tags do not work on ibmrs platform</h4>

<p>
<a id="pgfId-1114253"></a><strong>OS: </strong>AIX<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1114254"></a><strong>Description: </strong>AMS checks for static and dynamic linter issues when the -<code>spectre_args</code> <code>-ahdllint</code> option is used. When issues are encountered, linter gives the warning as below.</p>

<pre class="webflare-courier-new">
<a id="pgfId-1114287"></a>WARNING (AHDLLINT-5008): &quot;test.va&quot;, line 139: Detected discrete expression on the right side of a contribution statement. It is recommended that you apply the transition function on discrete values by specifying the transition rise and fall time when the logic or discrete expression value changes. </pre>

<p>
<a id="pgfId-1114297"></a>In the ibmrs platform, the warning is stil issued but the reference tag is missing as below:</p>

<pre class="webflare-courier-new">
<a id="pgfId-1114314"></a>&quot;test.va&quot;, line 139: Detected discrete expression on the right side of a con&#160;&#160;tribution statement. It is recommended that you apply the transition function on&#160;&#160;discrete values by specifying the transition rise and fall time when the logic&#160;&#160;or discrete expression value changes. </pre>

<p>
<a id="pgfId-1114619"></a>This may hinder extracting further info about the warning using ahdlhelp or to track the issue when <code>-ahdllint=error</code> is used. </p>
<p>
<a id="pgfId-1114255"></a><strong>Solution: </strong>Use non-ibmrs platforms.</p>
<p>
<a id="pgfId-1114256"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1114349"></a>CCR 870372: tclspice probing does not work in ibmrs platform</h4>

<p>
<a id="pgfId-1114350"></a><strong>OS:</strong> ALL <strong>Version:</strong> ALL</p>
<p>
<a id="pgfId-1114351"></a><strong>Description:</strong> The tclspice probing feature is not turned on in the AIX platform.</p>
<p>
<a id="pgfId-1114352"></a><strong>Solution:</strong> Use other platforms for this feature.</p>
<p>
<a id="pgfId-1114353"></a><strong>Planned Release:</strong> Not currently planned.</p>

<h4>
<a id="pgfId-1111856"></a>CCR 836468: Multithreading not enabled in AMS Designer on AIX platform</h4>

<p>
<a id="pgfId-1111857"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111858"></a><strong>Description:</strong> Starting with MMSIM10.1, multithreading is enabled with the Spectre and APS solvers on AIX platform. However, multithreading remains disabled in AMS Designer with Spectre or APS solver on AIX platform.</p>
<p>
<a id="pgfId-1111859"></a><strong>Solution: </strong>None.</p>
<p>
<a id="pgfId-1111860"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111613"></a>CCR 523791: Default minimum time step for the analog solver causes AMS-Spectre to hang</h4>

<p>
<a id="pgfId-1111614"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111615"></a><strong>Description: </strong>In very rare customer test cases, the AMS Designer simulator with the Spectre solver hangs when using the default minimum time step of the Spectre analog solver. While the default minimum time step of the analog solver typically yields accurate results, the default minimum time step can lead to a quantity blow-up or convergence issue for some designs that feature digital-to-analog events such as Verilog-AMS <code>logic</code>-to-<code>electrical</code> conversions or VHDL-AMS <code>break</code> statements. On occasion, the simulation might just hang. </p>
<p>
<a id="pgfId-1111616"></a>For example, consider a typical VHDL-AMS design that has a stop time of 1.2 ms, a liberal mode maxstep of 120 us, and 16 time steps during simulation without <code>break</code> statements. If you add <code>break</code> statements, the simulation has 28 time steps, which amounts to a minimum time step that is 12 orders of magnitude less than the previous setup without the <code>break</code> statements. In this way, the simulation time can increase significantly. </p>
<p>
<a id="pgfId-1111617"></a><strong>Solution: </strong>Use the <code>d2aminstep</code> option on the <code>tran</code> statement to define a different minimum time step for the Spectre analog solver. For example, the following statement (in an analog control file) demonstrates how you might define a <code>d2aminstep</code> (minimum time step) of 1e-12 for AMS-Spectre simulation of a 1Ghz design: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111618"></a>amsAnalysis tran stop=100u d2aminstep=1e-12</pre>

<p>
<a id="pgfId-1111619"></a>Usually a larger <code>d2aminstep</code> value can speed up the simulation as well as prevent the simulator from hanging. It can also prevent non convergence during tran analysis. However, it must not be too large to cause missing signal transition. Tune the option to make sure there is no <code>d2aminstep</code> warning message in the simulation log.</p>
<p>
<a id="pgfId-1111620"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111621"></a>CCR 446913: Wrong analog/digital signal transitions during transient analysis using skipdc</h4>

<p>
<a id="pgfId-1111622"></a><strong>OS: </strong>LINUX<strong> Version: </strong>RHEL4.0_32</p>
<p>
<a id="pgfId-1111623"></a><strong>Description: </strong>Using the AMS Designer simulator with the Spectre solver, you should not set the <code>skipdc</code> transient analysis option to anything other than <code>no</code> as doing so can result in incorrect analog-to-digital signal transitions. The default value for the <code>skipdc</code> option is <code>no</code>. (You set transient analysis options using the <code>tran</code> statement in your analog simulation control file.) &lt;no&gt;If you used this option, a warning message appears in your simulation log file and you can search for the <code>AMSD</code> keyword to find the message.</p>
<p>
<a id="pgfId-1111624"></a><strong>Solution: </strong>None.</p>
<p>
<a id="pgfId-1111625"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111626"></a>CCR 8448: @final_step does not always run</h4>

<p>
<a id="pgfId-1111627"></a><strong>OS: </strong>ALL<strong> Version: </strong>NONE</p>
<p>
<a id="pgfId-1111628"></a><strong>Description: </strong>In the following simulation termination scenarios, <code>@final_step</code> does not run and the last analog solution is not always written to the database. </p>
<ul><li>
<a id="pgfId-1111629"></a>The digital solver encounters <code>$finish()</code> in behavioral code. </li><li>
<a id="pgfId-1111630"></a>The analog solver is interactive (Tcl prompt) at some behavioral statement when the Tcl <code>finish</code> command is issued. </li><li>
<a id="pgfId-1111631"></a>The digital solver is interactive at some behavioral statement when the Tcl <code>finish</code> command is issued. </li><li>
<a id="pgfId-1111632"></a>The analog solver is interactive at a time advance when the Tcl <code>finish</code> command is issued. </li><li>
<a id="pgfId-1111633"></a>The digital solver is interactive at a time advance when the Tcl <code>finish</code> command is issued.</li></ul>




<p>
<a id="pgfId-1111634"></a><strong>Solution: </strong>None.</p>
<p>
<a id="pgfId-1111921"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h3>
<a id="pgfId-1113608"></a>Product Level 2: ULTRASIM</h3>
<h4>
<a id="pgfId-1111923"></a>CCR 475174: AMS Designer simulator does not support instance-based properties</h4>

<p>
<a id="pgfId-1111638"></a><strong>OS: </strong>ALL_WIN<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111639"></a><strong>Description: </strong>Instance-based properties are used to apply properties to individual instances inside cells such as subcircuits, modules, or architectures. </p>
<p>
<a id="pgfId-1111640"></a>The instance name in an instance-based property has the following form in the <code>prop.cfg</code> file: </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111641"></a>`(<code><em>lib</em></code>.<code><em>cell</em></code>:<code><em>view</em></code>).<code><em>name</em></code>&#39;&#39;</pre>

<p>
<a id="pgfId-1111642"></a>The optional prefix before the period designates the cell that encloses the instance. The <span class="webflare-courier-new" style="white-space:pre"><em>name</em></span> after the period specifies the instance to which the property is applied. When the optional prefix is omitted, the property is applied to all instances that have the given instance name, in whatever cells the instances are found. </p>
<p>
<a id="pgfId-1111643"></a>However, AMS Designer simulator does not support instance-based properties.</p>
<p>
<a id="pgfId-1111644"></a><strong>Solution: </strong>Use the path property to apply a property to a specific instance in the design hierarchy.</p>
<p>
<a id="pgfId-1111645"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111646"></a>CCR 253991: Current probe access from digital context not supported by UltraSim solver</h4>

<p>
<a id="pgfId-1111647"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111648"></a><strong>Description: </strong>Normally, when <code>p</code> is an analog port of a module, you can use the port current probe <code>I(&lt;p&gt;)</code> to probe the current through port <code>p</code>. However, when you use the AMS simulator UltraSim solver, this kind of probe is not supported from digital contexts.</p>
<p>
<a id="pgfId-1111649"></a><strong>Solution: </strong>Use a temporary node to store the value of <code>I(&lt;p&gt;)</code> in the analog block. For example, code </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111650"></a>electrical foo;<br />analog begin<br />    V(foo) &lt;+ I(&lt;p&gt;);<br />end</pre>

<p>
<a id="pgfId-1111651"></a>Then in the digital context replace <code>I(&lt;p&gt;)</code> with <code>V(foo)</code>.</p>
<p>
<a id="pgfId-1111652"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111653"></a>CCR 197238: tnom must not be used as a variable in netlists for AMS UltraSim</h4>

<p>
<a id="pgfId-1111654"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111655"></a><strong>Description: </strong><code>tnom</code> is a reserved keyword used for specifying the temperature. AMS UltraSim users must not use any UltraSim reserved keywords in their netlists.</p>
<p>
<a id="pgfId-1111656"></a><strong>Solution: </strong>None.</p>
<p>
<a id="pgfId-1111657"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111658"></a>CCR 184866: The warning_limit option does not work in ADE running the UltraSim solver</h4>

<p>
<a id="pgfId-1111659"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111660"></a><strong>Description: </strong>While running the UltraSim solver in ADE, the <code>.usim_opt warning_limit</code> option always takes the default value, even when a different value is set.</p>
<p>
<a id="pgfId-1111661"></a><strong>Solution: </strong>Create a file called <code>ultrasim.cfg</code> in your <code>$HOME</code> directory. Set the option value in the file with a statement similar to </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111662"></a>.usim_opt warning_limit = 20</pre>

<p>
<a id="pgfId-1111663"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111664"></a>CCR 176693: Cannot access master imported by prop.cfg in modelpath</h4>

<p>
<a id="pgfId-1111665"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111666"></a><strong>Description: </strong>In AMS Designer, you can import a netlist file into a design by specifying the file name with the <code>modelpath</code> option. You can also import a netlist file (or a Verilog-A file) by specifying the <code>sourcefile</code> property in the <code>prop.cfg</code> file. </p>
<p>
<a id="pgfId-1111667"></a>However, while using the UltraSim solver in AMS Designer, masters defined in a source file that is imported by specifying the <code>sourcefile</code> property cannot be accessed in a netlist that is imported by specifying the <code>modelpath</code> option.</p>
<p>
<a id="pgfId-1111668"></a><strong>Solution: </strong>None.</p>
<p>
<a id="pgfId-1111669"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111670"></a>CCR 165606: Access functions other than V and I are not supported in AMS UltraSim</h4>

<p>
<a id="pgfId-1111671"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111672"></a><strong>Description: </strong>In AMS UltraSim, only the predefined access functions <code>V</code> and <code>I</code> are supported in the analog block. Other access functions defined in the predefined discipline file <code>disciplines.vams</code> or defined by users cannot be used in the analog block.</p>
<p>
<a id="pgfId-1111673"></a><strong>Solution: </strong>None.</p>
<p>
<a id="pgfId-1111674"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1118199"></a>CCR 163571: Spectre, UltraSim differences seen in Tcl Query for AHDL variables</h4>

<p>
<a id="pgfId-1118200"></a><strong>OS: </strong>ALL_WIN<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1118201"></a><strong>Description: </strong>When running AMS simulations using the UltraSim solver, the values for AHDL variables that are returned by using Tcl commands are not accurate. The values are shifted in time so that the returned value of the variable is not necessarily the value at the queried simulation time.</p>
<p>
<a id="pgfId-1118327"></a><strong>Solution: </strong>Wait until the simulation is complete. Querying then returns accurate values of the variable.</p>
<p>
<a id="pgfId-1118323"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h3>
<a id="pgfId-1111675"></a>Product Level 2: VHDL_AMS</h3>
<h4>
<a id="pgfId-1111676"></a>CCR 43803: Simultaneous case statement implementation constraints</h4>

<p>
<a id="pgfId-1111677"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111678"></a><strong>Description: </strong>The <code>case</code> statement must be balanced, so that the number of simultaneous statements in each case of the statement is the same. The simultaneous <code>case</code> statement must also pass the dependency check. </p>
<p>
<a id="pgfId-1111679"></a>For information about the dependency check, refer to the entry for CCR 40597 (&quot;Restrictions to the simultaneous IF statement&quot;) in this document.</p>
<p>
<a id="pgfId-1111680"></a><strong>Solution: </strong>None.</p>
<p>
<a id="pgfId-1111681"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111682"></a>CCR   30746: Expressions and implicit quantities cannot be actuals in quantity port map</h4>

<p>
<a id="pgfId-1111683"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111684"></a><strong>Description: </strong>Only the following types of quantities can be used as actuals in a component port map (having quantity ports): across quantities, through quantities, and free quantities. This restriction means that you cannot use the following types of quantities in a quantity port map: </p>
<ul><li>
<a id="pgfId-1111685"></a>Implicit quantities (quantity valued attributes such as <code>S&#39;&#39;RAMP</code> or <code>Q&#39;&#39;DOT</code>). As a result, statements like the following are not supported. <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1111686">
<a id="pgfId-1111686"></a>i1: TEST_ENT1 PORT MAP(s3&#39;&#39;RAMP(1.0/10.0, 1.0/20.0));</pre></li><li>
<a id="pgfId-1111687"></a>Expressions (like 2.0, 1.5 * q3 where q3 is a quantity reference). As a result, statements like the following are not supported. <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1111688">
<a id="pgfId-1111688"></a>i1: TEST_ENT1 PORT MAP(2.0 * q3);</pre></li></ul>



<p>
<a id="pgfId-1111689"></a><strong>Solution: </strong>Declare an additional free quantity and assign it to the unsupported type (the implicit quantity or expression) using a simple simultaneous statement. Use this new quantity in the quantity port map. For example, the unsupported statement </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111690"></a>i1: TEST_ENT1 PORT MAP(s3&#39;&#39;RAMP(1.0/10.0, 1.0/20.0));</pre>

<p>
<a id="pgfId-1111691"></a>can be recoded as </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111692"></a>quantity q4 : real;<br />q4 == s3&#39;&#39;RAMP(1.0/10.0, 1.0/20.0);<br />i1: TEST_ENT1 PORT MAP(q4);</pre>

<p>
<a id="pgfId-1111693"></a>Similarly, the unsupported statement </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111694"></a>i1: TEST_ENT1 PORT MAP(2.0 * q3);</pre>

<p>
<a id="pgfId-1111695"></a>can be recoded as </p>

<pre class="webflare-courier-new">
<a id="pgfId-1111696"></a>quantity q4 : real;<br />q4 == 2.0 * q3;<br />i1: TEST_ENT1 PORT MAP(q4);</pre>

<p>
<a id="pgfId-1111697"></a>Be aware that quantity initialization is unsupported. This means that if you replace an expression with a free quantity, the free quantity might not initially have the same value as the expression it replaces.</p>
<p>
<a id="pgfId-1111698"></a><strong>Planned Release: </strong>Not currently planned.</p>

<h4>
<a id="pgfId-1111699"></a>CCR   29392: Incorrect initialization of Q&#39;&#39;ABOVE(E) signal</h4>

<p>
<a id="pgfId-1111700"></a><strong>OS: </strong>ALL<strong> Version: </strong>ALL</p>
<p>
<a id="pgfId-1111701"></a><strong>Description: </strong>The implicit signal <code>Q&#39;ABOVE(E)</code> is incorrectly initialized to <code>FALSE</code> even when the quantity <code>Q</code> is assigned an initial value greater than the value of the expression <code>E</code>. Depending on how the implicit signal is used in the design, the incorrect initialization might or might not impact the simulation result. </p>
<p>
<a id="pgfId-1111702"></a>Shown below are two examples. In the first, there is no impact on the simulation result; in the second, there is an impact. </p>
<ol><li>
<a id="pgfId-1111703"></a>In this example, <code>q&#39;&#39;above</code> is used in the analog context. <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1111704">
<a id="pgfId-1111704"></a>architecture TEST_ARCH of TEST_ENT is
    quantity q1 : real := 10.0;
    quantity q2 : real;
begin
    q1 == 1.0;
    if (q1&#39;&#39;ABOVE(0.5)) use
        q2 == 1.0;
    else
        q2 == 2.0;
    end use;
end architecture TEST_ARCH;</pre>
<a id="pgfId-1111705"></a>In the above example, the initial guess for <code>q1</code> is 10.0 and the DC value is 1.0. The <code>q1&#39;&#39;ABOVE(0.5)</code> is incorrectly initialized to <code>FALSE</code> but at DC it identifies the value to be <code>TRUE</code> (because <code>q1</code> is now 1.0) and correctly chooses the equation <code>q2 == 1.0</code>. <br />
<a id="pgfId-1111706"></a>So, in this example, the incorrect initial value of <code>q1&#39;&#39;above(0.5)</code> has no impact on the simulation result. </li><li>
<a id="pgfId-1111707"></a>In the next example, the incorrect <code>q1&#39;&#39;above(0.5)</code> initialization causes unexpected behavior. In this architecture, <code>q&#39;&#39;above</code> is used in the digital context in the sensitivity clause of the <code>process</code> statement. <br /><pre class="webflare-pre-block webflare-courier-new" id="#id1111708">
<a id="pgfId-1111708"></a>architecture TEST_ARCH of TEST_ENT is
    quantity q1 : real := 1.0;
    begin
       q1 == 1.0;
       process(q1&#39;&#39;above(0.5))
         begin
            report &quot;When working correctly should print exactly once. &quot; &amp;
                   &quot;Currently q1&#39;&#39;above(0.5) (=&quot; &amp;
                   Boolean&#39;&#39;IMAGE(q1&#39;&#39;above(0.5)) &amp;
                   &quot;) is true.&quot;;
            report &quot; &quot;;
       end process;
end architecture TEST_ARCH;</pre>
<a id="pgfId-1111709"></a>In the above example, <code>q1&#39;&#39;above(0.5)</code> is incorrectly initialized to <code>FALSE</code>. So, during the first digital run, the report statement is executed and reports the value of <code>q1&#39;&#39;above(0.5</code>) to be <code>FALSE</code>. However, during DC computation, <code>q1</code> is set to 1.0, thereby switching the value of <code>q1&#39;&#39;above(0.5)</code> from <code>FALSE</code> to <code>TRUE</code>. <br />
<a id="pgfId-1111710"></a>This causes the <code>process</code> statement to be executed one additional time. The incorrect <code>q1&#39;&#39;above(0.5)</code> initialization causes the process block to be executed twice when only one execution is expected.</li></ol>







<p>
<a id="pgfId-1111711"></a><strong>Solution: </strong>None.</p>
<p>
<a id="pgfId-1111712"></a><strong>Planned Release: </strong>Not currently planned.</p>
<p>
<a id="pgfId-1115302"></a></p>

<br /><a href="#pagetop">Return to top</a><br /></div>
<!-- Begin Buttons --><!-- End Buttons -->
<footer><nav class="navigation"><b><em><a href="amssimugKPNSTOC.html" id="prev" title="Contents">Contents</a></em></b></nav><div>
            For further assistance, contact <a href="https://support.cadence.com">Cadence Online Support</a>. Copyright &#169; 2019, <a href="https://www.cadence.com">Cadence Design Systems, Inc.</a> All rights reserved. 
          </div></footer>
</body></html>